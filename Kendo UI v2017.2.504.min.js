/** 
 * Kendo UI v2017.2.504 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2017 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms. */   
!function (e, t) { t("kendo.core.min", ["jquery"], function () { return function (e, t, i) { function n() { } function o(e, t) { if (t) return "'" + e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\t/g, "\\t") + "'"; var i = e.charAt(0), n = e.substring(1); return "=" === i ? "+(" + n + ")+" : ":" === i ? "+$kendoHtmlEncode(" + n + ")+" : ";" + e + ";$kendoOutput+=" } function r(e, t, i) { return (i = (t = t || 2) - (e += "").length) ? I[t].substring(0, i) + e : e } function s(e) { var t = 1, i = arguments.length; for (t = 1; t < i; t++)a(e, arguments[t]); return e } function a(e, t) { var i, n, o, r, s, l = oe.data.ObservableArray, c = oe.data.LazyObservableArray, d = oe.data.DataSource, u = oe.data.HierarchicalDataSource; for (i in t) n = t[i], (r = (o = typeof n) === we && null !== n ? n.constructor : null) && r !== Array && r !== l && r !== c && r !== d && r !== u && r !== RegExp ? n instanceof Date ? e[i] = new Date(n.getTime()) : w(n.clone) ? e[i] = n.clone() : (s = e[i], e[i] = typeof s === we && s || {}, a(e[i], n)) : o !== xe && (e[i] = n); return e } function l(e, t, n) { for (var o in t) if (t.hasOwnProperty(o) && t[o].test(e)) return o; return n !== i ? n : e } function c(e) { return e.replace(/\-(\w)/g, function (e, t) { return t.toUpperCase() }) } function d(t, i) { var n, o = {}; return document.defaultView && document.defaultView.getComputedStyle ? (n = document.defaultView.getComputedStyle(t, ""), i && e.each(i, function (e, t) { o[t] = n.getPropertyValue(t) })) : (n = t.currentStyle, i && e.each(i, function (e, t) { o[t] = n[c(t)] })), oe.size(o) || (o = n), o } function u(e, t, i, n) { return typeof e === _e && (w(t) && (n = t, t = 400, i = !1), w(i) && (n = i, i = !1), typeof t === ke && (i = t, t = 400), e = { effects: e, duration: t, reverse: i, complete: n }), re({ effects: {}, duration: 400, reverse: !1, init: ce, teardown: ce, hide: !1 }, e, { completeCallback: e.complete, complete: ce }) } function h(t, i, n, o, r) { for (var s, a = 0, l = t.length; a < l; a++)(s = e(t[a])).queue(function () { R.promise(s, u(i, n, o, r)) }); return t } function f(e, t) { var n; return 0 === t.indexOf("data") && (t = (t = t.substring(4)).charAt(0).toLowerCase() + t.substring(1)), t = t.replace(G, "-$1"), null === (n = e.getAttribute("data-" + oe.ns + t)) ? n = i : "null" === n ? n = null : "true" === n ? n = !0 : "false" === n ? n = !1 : ge.test(n) ? n = parseFloat(n) : q.test(n) && !j.test(n) && (n = Function("return (" + n + ")")()), n } function p(t, n) { var o, r, s = {}; for (o in n) (r = f(t, o)) !== i && (W.test(o) && (r = "string" == typeof r ? oe.template(e("#" + r).html()) : t.getAttribute(o)), s[o] = r); return s } function m(t, i) { return e.contains(t, i) ? -1 : 1 } function g() { var t = e(this); return e.inArray(t.attr("data-" + oe.ns + "role"), ["slider", "rangeslider"]) > -1 || t.is(":visible") } function v(t) { return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function () { return "hidden" === e.css(this, "visibility") }).length } function _(e, t) { return new _.fn.init(e, t) } var b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H, N, O, V, U, W, q, j, G, $, Y, K, Q, X, Z, J, ee, te, ie, ne, oe = t.kendo = t.kendo || { cultures: {} }, re = e.extend, se = e.each, ae = e.isArray, le = e.proxy, ce = e.noop, de = Math, ue = t.JSON || {}, he = {}, fe = /%/, pe = /\{(\d+)(:[^\}]+)?\}/g, me = /(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i, ge = /^(\+|-?)\d+(\.?)\d*$/, ve = "function", _e = "string", be = "number", we = "object", ye = "null", ke = "boolean", xe = "undefined", Ce = {}, Se = {}, Te = [].slice; oe.version = "2017.2.504".replace(/^\s+|\s+$/g, ""), n.extend = function (e) { var t, i, n = function () { }, o = this, r = e && e.init ? e.init : function () { o.apply(this, arguments) }; for (t in n.prototype = o.prototype, i = r.fn = r.prototype = new n, e) i[t] = null != e[t] && e[t].constructor === Object ? re(!0, {}, n.prototype[t], e[t]) : e[t]; return i.constructor = r, r.extend = o.extend, r }, n.prototype._initOptions = function (e) { this.options = s({}, this.options, e) }, w = oe.isFunction = function (e) { return "function" == typeof e }, y = function () { this._defaultPrevented = !0 }, k = function () { return !0 === this._defaultPrevented }, x = n.extend({ init: function () { this._events = {} }, bind: function (e, t, n) { var o, r, s, a, l = this, c = typeof e === _e ? [e] : e, d = typeof t === ve; if (t === i) { for (o in e) l.bind(o, e[o]); return l } for (o = 0, r = c.length; o < r; o++)e = c[o], (a = d ? t : t[e]) && (n && (s = a, (a = function () { l.unbind(e, a), s.apply(l, arguments) }).original = s), (l._events[e] = l._events[e] || []).push(a)); return l }, one: function (e, t) { return this.bind(e, t, !0) }, first: function (e, t) { var i, n, o, r = this, s = typeof e === _e ? [e] : e, a = typeof t === ve; for (i = 0, n = s.length; i < n; i++)e = s[i], (o = a ? t : t[e]) && (r._events[e] = r._events[e] || []).unshift(o); return r }, trigger: function (e, t) { var i, n, o = this, r = o._events[e]; if (r) { for ((t = t || {}).sender = o, t._defaultPrevented = !1, t.preventDefault = y, t.isDefaultPrevented = k, r = r.slice(), i = 0, n = r.length; i < n; i++)r[i].call(o, t); return !0 === t._defaultPrevented } return !1 }, unbind: function (e, t) { var n, o = this, r = o._events[e]; if (e === i) o._events = {}; else if (r) if (t) for (n = r.length - 1; n >= 0; n--)r[n] !== t && r[n].original !== t || r.splice(n, 1); else o._events[e] = []; return o } }), C = /^\w+/, S = /\$\{([^}]*)\}/g, T = /\\\}/g, D = /__CURLY__/g, A = /\\#/g, E = /__SHARP__/g, I = ["", "0", "00", "000", "0000"], b = { paramName: "data", useWithBlock: !0, render: function (e, t) { var i, n, o = ""; for (i = 0, n = t.length; i < n; i++)o += e(t[i]); return o }, compile: function (e, t) { var i, n, r, s = re({}, this, t), a = s.paramName, l = a.match(C)[0], c = s.useWithBlock, d = "var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;"; if (w(e)) return e; for (d += c ? "with(" + a + "){" : "", d += "$kendoOutput=", n = e.replace(T, "__CURLY__").replace(S, "#=$kendoHtmlEncode($1)#").replace(D, "}").replace(A, "__SHARP__").split("#"), r = 0; r < n.length; r++)d += o(n[r], r % 2 == 0); d += c ? ";}" : ";", d = (d += "return $kendoOutput;").replace(E, "#"); try { return (i = Function(l, d))._slotCount = Math.floor(n.length / 2), i } catch (t) { throw Error(oe.format("Invalid template:'{0}' Generated code:'{1}'", e, d)) } } }, function () { function e(e) { return s.lastIndex = 0, s.test(e) ? '"' + e.replace(s, function (e) { var t = a[e]; return typeof t === _e ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) }) + '"' : '"' + e + '"' } function t(r, s) { var a, c, d, u, h, f, p = i, m = s[r]; if (m && typeof m === we && typeof m.toJSON === ve && (m = m.toJSON(r)), typeof o === ve && (m = o.call(s, r, m)), (f = typeof m) === _e) return e(m); if (f === be) return isFinite(m) ? m + "" : ye; if (f === ke || f === ye) return m + ""; if (f === we) { if (!m) return ye; if (i += n, h = [], "[object Array]" === l.apply(m)) { for (u = m.length, a = 0; a < u; a++)h[a] = t(a, m) || ye; return d = 0 === h.length ? "[]" : i ? "[\n" + i + h.join(",\n" + i) + "\n" + p + "]" : "[" + h.join(",") + "]", i = p, d } if (o && typeof o === we) for (u = o.length, a = 0; a < u; a++)typeof o[a] === _e && (c = o[a], (d = t(c, m)) && h.push(e(c) + (i ? ": " : ":") + d)); else for (c in m) Object.hasOwnProperty.call(m, c) && ((d = t(c, m)) && h.push(e(c) + (i ? ": " : ":") + d)); return d = 0 === h.length ? "{}" : i ? "{\n" + i + h.join(",\n" + i) + "\n" + p + "}" : "{" + h.join(",") + "}", i = p, d } } var i, n, o, s = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, a = { "\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }, l = {}.toString; typeof Date.prototype.toJSON !== ve && (Date.prototype.toJSON = function () { var e = this; return isFinite(e.valueOf()) ? r(e.getUTCFullYear(), 4) + "-" + r(e.getUTCMonth() + 1) + "-" + r(e.getUTCDate()) + "T" + r(e.getUTCHours()) + ":" + r(e.getUTCMinutes()) + ":" + r(e.getUTCSeconds()) + "Z" : null }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function () { return this.valueOf() }), typeof ue.stringify !== ve && (ue.stringify = function (e, r, s) { var a; if (i = "", n = "", typeof s === be) for (a = 0; a < s; a += 1)n += " "; else typeof s === _e && (n = s); if (o = r, r && typeof r !== ve && (typeof r !== we || typeof r.length !== be)) throw Error("JSON.stringify"); return t("", { "": e }) }) }(), function () { function t(e) { if (e) { if (e.numberFormat) return e; if (typeof e === _e) { var t = oe.cultures; return t[e] || t[e.split("-")[0]] || null } return null } return null } function n(e) { return e && (e = t(e)), e || oe.cultures.current } function o(e, t, o) { var s = (o = n(o)).calendars.standard, a = s.days, l = s.months; return (t = s.patterns[t] || t).replace(d, function (t) { var n, o, c; return "d" === t ? o = e.getDate() : "dd" === t ? o = r(e.getDate()) : "ddd" === t ? o = a.namesAbbr[e.getDay()] : "dddd" === t ? o = a.names[e.getDay()] : "M" === t ? o = e.getMonth() + 1 : "MM" === t ? o = r(e.getMonth() + 1) : "MMM" === t ? o = l.namesAbbr[e.getMonth()] : "MMMM" === t ? o = l.names[e.getMonth()] : "yy" === t ? o = r(e.getFullYear() % 100) : "yyyy" === t ? o = r(e.getFullYear(), 4) : "h" === t ? o = e.getHours() % 12 || 12 : "hh" === t ? o = r(e.getHours() % 12 || 12) : "H" === t ? o = e.getHours() : "HH" === t ? o = r(e.getHours()) : "m" === t ? o = e.getMinutes() : "mm" === t ? o = r(e.getMinutes()) : "s" === t ? o = e.getSeconds() : "ss" === t ? o = r(e.getSeconds()) : "f" === t ? o = de.floor(e.getMilliseconds() / 100) : "ff" === t ? ((o = e.getMilliseconds()) > 99 && (o = de.floor(o / 10)), o = r(o)) : "fff" === t ? o = r(e.getMilliseconds(), 3) : "tt" === t ? o = e.getHours() < 12 ? s.AM[0] : s.PM[0] : "zzz" === t ? (n = e.getTimezoneOffset(), c = n < 0, o = ("" + de.abs(n / 60)).split(".")[0], n = de.abs(n) - 60 * o, o = (c ? "+" : "-") + r(o), o += ":" + r(n)) : "zz" !== t && "z" !== t || (o = e.getTimezoneOffset() / 60, c = o < 0, o = ("" + de.abs(o)).split(".")[0], o = (c ? "+" : "-") + ("zz" === t ? r(o) : o)), o !== i ? o : t.slice(1, t.length - 1) }) } function s(e, t, o) { var r, s, c, d, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L = (o = n(o)).numberFormat, H = L[m], N = L.decimals, O = L.pattern[0], V = [], U = e < 0, W = p, q = p, j = -1; if (e === i) return p; if (!isFinite(e)) return e; if (!t) return o.name.length ? e.toLocaleString() : "" + e; if (w = u.exec(t)) { if (t = w[1].toLowerCase(), c = "p" === t, ((s = "c" === t) || c) && (L = s ? L.currency : L.percent, H = L[m], N = L.decimals, r = L.symbol, O = L.pattern[U ? 0 : 1]), (d = w[2]) && (N = +d), "e" === t) return d ? e.toExponential(N) : e.toExponential(); if (c && (e *= 100), e = l(e, N), U = e < 0, e = e.split(m), y = e[0], k = e[1], U && (y = y.substring(1)), q = a(y, 0, y.length, L), k && (q += H + k), "n" === t && !U) return q; for (e = p, C = 0, S = O.length; C < S; C++)T = O.charAt(C), e += "n" === T ? q : "$" === T || "%" === T ? r : T; return e } if (U && (e = -e), (t.indexOf("'") > -1 || t.indexOf('"') > -1 || t.indexOf("\\") > -1) && (t = t.replace(h, function (e) { var t = e.charAt(0).replace("\\", ""), i = e.slice(1).replace(t, ""); return V.push(i), b })), t = t.split(";"), U && t[1]) t = t[1], A = !0; else if (0 === e) { if (-1 == (t = t[2] || t[0]).indexOf(v) && -1 == t.indexOf(_)) return t } else t = t[0]; if (z = t.indexOf("%"), P = t.indexOf("$"), (c = -1 != z) && (e *= 100), (s = -1 != P) && "\\" === t[P - 1] && (t = t.split("\\").join(""), s = !1), (s || c) && (L = s ? L.currency : L.percent, H = L[m], N = L.decimals, r = L.symbol), (D = t.indexOf(g) > -1) && (t = t.replace(f, p)), E = t.indexOf(m), S = t.length, -1 != E ? (k = (k = (k = ("" + e).split("e"))[1] ? l(e, Math.abs(k[1])) : k[0]).split(m)[1] || p, M = t.lastIndexOf(_) - E, I = t.lastIndexOf(v) - E, R = M > -1, F = I > -1, C = k.length, R || F || (t = t.substring(0, E) + t.substring(E + 1), S = t.length, E = -1, C = 0), R && M > I ? C = M : I > M && (F && C > I ? C = I : R && C < M && (C = M)), C > -1 && (e = l(e, C))) : e = l(e), I = t.indexOf(v), M = t.indexOf(_), j = -1 == I && -1 != M ? M : -1 != I && -1 == M ? I : I > M ? M : I, I = t.lastIndexOf(v), M = t.lastIndexOf(_), B = -1 == I && -1 != M ? M : -1 != I && -1 == M ? I : I > M ? I : M, j == S && (B = j), -1 != j) { for (q = ("" + e).split(m), y = q[0], k = q[1] || p, x = y.length, k.length, U && -1 * e >= 0 && (U = !1), e = t.substring(0, j), U && !A && (e += "-"), C = j; C < S; C++) { if (T = t.charAt(C), -1 == E) { if (B - C < x) { e += y; break } } else if (-1 != M && M < C && (W = p), E - C <= x && E - C > -1 && (e += y, C = E), E === C) { e += (k ? H : p) + k, C += B - E + 1; continue } T === _ ? (e += T, W = T) : T === v && (e += W) } if (D && (e = a(e, j + (U && !A ? 1 : 0), Math.max(B, x + j), L)), B >= j && (e += t.substring(B + 1)), s || c) { for (q = p, C = 0, S = e.length; C < S; C++)T = e.charAt(C), q += "$" === T || "%" === T ? r : T; e = q } if (S = V.length) for (C = 0; C < S; C++)e = e.replace(b, V[C]) } return e } var a, l, c, d = /dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g, u = /^(n|c|p|e)(\d*)$/i, h = /(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g, f = /\,/g, p = "", m = ".", g = ",", v = "#", _ = "0", b = "??", w = "en-US", y = {}.toString; oe.cultures["en-US"] = { name: w, numberFormat: { pattern: ["-n"], decimals: 2, ",": ",", ".": ".", groupSize: [3], percent: { pattern: ["-n %", "n %"], decimals: 2, ",": ",", ".": ".", groupSize: [3], symbol: "%" }, currency: { name: "US Dollar", abbr: "USD", pattern: ["($n)", "$n"], decimals: 2, ",": ",", ".": ".", groupSize: [3], symbol: "$" } }, calendars: { standard: { days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", F: "dddd, MMMM dd, yyyy h:mm:ss tt", g: "M/d/yyyy h:mm tt", G: "M/d/yyyy h:mm:ss tt", m: "MMMM dd", M: "MMMM dd", s: "yyyy'-'MM'-'ddTHH':'mm':'ss", t: "h:mm tt", T: "h:mm:ss tt", u: "yyyy'-'MM'-'dd HH':'mm':'ss'Z'", y: "MMMM, yyyy", Y: "MMMM, yyyy" }, "/": "/", ":": ":", firstDay: 0, twoDigitYearMax: 2029 } } }, oe.culture = function (e) { var n, o = oe.cultures; return e === i ? o.current : ((n = t(e) || o[w]).calendar = n.calendars.standard, o.current = n, i) }, oe.findCulture = t, oe.getCulture = n, oe.culture(w), a = function (e, t, n, o) { var r, s, a, l, c, d, u = e.indexOf(o[m]), h = o.groupSize.slice(), f = h.shift(); if (n = -1 !== u ? u : n + 1, r = e.substring(t, n), (s = r.length) >= f) { for (a = s, l = []; a > -1;)if ((c = r.substring(a - f, a)) && l.push(c), a -= f, d = h.shift(), 0 === (f = d !== i ? d : f)) { l.push(r.substring(0, a)); break } r = l.reverse().join(o[g]), e = e.substring(0, t) + r + e.substring(n) } return e }, l = function (e, t) { return t = t || 0, e = ("" + e).split("e"), (e = +((e = ("" + (e = Math.round(+(e[0] + "e" + (e[1] ? +e[1] + t : t))))).split("e"))[0] + "e" + (e[1] ? +e[1] - t : -t))).toFixed(Math.min(t, 20)) }, c = function (e, t, n) { if (t) { if ("[object Date]" === y.call(e)) return o(e, t, n); if (typeof e === be) return s(e, t, n) } return e !== i ? e : "" }, oe.format = function (e) { var t = arguments; return e.replace(pe, function (e, i, n) { var o = t[parseInt(i, 10) + 1]; return c(o, n ? n.substring(1) : "") }) }, oe._extractFormat = function (e) { return "{0:" === e.slice(0, 3) && (e = e.slice(3, e.length - 1)), e }, oe._activeElement = function () { try { return document.activeElement } catch (e) { return document.documentElement.activeElement } }, oe._round = l, oe._outerWidth = function (t, i) { return e(t).outerWidth(i || !1) || 0 }, oe._outerHeight = function (t, i) { return e(t).outerHeight(i || !1) || 0 }, oe.toString = c }(), function () { function t(e, t, i) { return !(e >= t && e <= i) } function n(e) { return e.charAt(0) } function o(t) { return e.map(t, n) } function r(e) { for (var t = 0, i = e.length, n = []; t < i; t++)n[t] = (e[t] + "").toLowerCase(); return n } function s(e) { var t, i = {}; for (t in e) i[t] = r(e[t]); return i } function a(e, n, r) { if (!e) return null; var a, l, c, h, f, p, m, v, _, b, w, y, k = function (e) { for (var t = 0; n[z] === e;)t++, z++; return t > 0 && (z -= 1), t }, x = function (t) { var i = g[t] || RegExp("^\\d{1," + t + "}"), n = e.substr(P, t).match(i); return n ? (n = n[0], P += n.length, parseInt(n, 10)) : null }, C = function (t, i) { for (var n, o, r, s = 0, a = t.length, l = 0, c = 0; s < a; s++)n = t[s], o = n.length, r = e.substr(P, o), i && (r = r.toLowerCase()), r == n && o > l && (l = o, c = s); return l ? (P += l, c + 1) : null }, S = function () { var t = !1; return e.charAt(P) === n[z] && (P++, t = !0), t }, T = r.calendars.standard, D = null, A = null, E = null, I = null, M = null, R = null, F = null, z = 0, P = 0, B = !1, L = new Date, H = T.twoDigitYearMax || 2029, N = L.getFullYear(); for (n || (n = "d"), (h = T.patterns[n]) && (n = h), n = n.split(""), c = n.length; z < c; z++)if (a = n[z], B) "'" === a ? B = !1 : S(); else if ("d" === a) { if (l = k("d"), T._lowerDays || (T._lowerDays = s(T.days)), null !== E && l > 2) continue; if (null === (E = l < 3 ? x(2) : C(T._lowerDays[3 == l ? "namesAbbr" : "names"], !0)) || t(E, 1, 31)) return null } else if ("M" === a) { if (l = k("M"), T._lowerMonths || (T._lowerMonths = s(T.months)), null === (A = l < 3 ? x(2) : C(T._lowerMonths[3 == l ? "namesAbbr" : "names"], !0)) || t(A, 1, 12)) return null; A -= 1 } else if ("y" === a) { if (l = k("y"), null === (D = x(l))) return null; 2 == l && ("string" == typeof H && (H = N + parseInt(H, 10)), (D = N - N % 100 + D) > H && (D -= 100)) } else if ("h" === a) { if (k("h"), 12 == (I = x(2)) && (I = 0), null === I || t(I, 0, 11)) return null } else if ("H" === a) { if (k("H"), null === (I = x(2)) || t(I, 0, 23)) return null } else if ("m" === a) { if (k("m"), null === (M = x(2)) || t(M, 0, 59)) return null } else if ("s" === a) { if (k("s"), null === (R = x(2)) || t(R, 0, 59)) return null } else if ("f" === a) { if (l = k("f"), y = e.substr(P, l).match(g[3]), null !== (F = x(l)) && (F = parseFloat("0." + y[0], 10), F = oe._round(F, 3), F *= 1e3), null === F || t(F, 0, 999)) return null } else if ("t" === a) { if (l = k("t"), v = T.AM, _ = T.PM, 1 === l && (v = o(v), _ = o(_)), !(f = C(_)) && !C(v)) return null } else if ("z" === a) { if (p = !0, l = k("z"), "Z" === e.substr(P, 1)) { S(); continue } if (!(m = e.substr(P, 6).match(l > 2 ? u : d))) return null; if (m = m[0].split(":"), b = m[0], !(w = m[1]) && b.length > 3 && (P = b.length - 2, w = b.substring(P), b = b.substring(0, P)), t(b = parseInt(b, 10), -12, 13)) return null; if (l > 2 && (w = parseInt(w, 10), isNaN(w) || t(w, 0, 59))) return null } else if ("'" === a) B = !0, S(); else if (!S()) return null; return null === D && null === A && null === E && (null !== I || null !== M || R || null) ? (D = N, A = L.getMonth(), E = L.getDate()) : (null === D && (D = N), null === E && (E = 1)), f && I < 12 && (I += 12), p ? (b && (I += -b), w && (M += -w), e = new Date(Date.UTC(D, A, E, I, M, R, F))) : function (e, t) { t || 23 !== e.getHours() || e.setHours(e.getHours() + 2) }(e = new Date(D, A, E, I, M, R, F), I), D < 100 && e.setFullYear(D), e.getDate() !== E && p === i ? null : e } var l = /\u00A0/g, c = /[eE][\-+]?[0-9]+/, d = /[+|\-]\d{1,2}/, u = /[+|\-]\d{1,2}:?\d{2}/, h = /^\/Date\((.*?)\)\/$/, f = /[+-]\d*/, p = [[], ["G", "g", "F"], ["D", "d", "y", "m", "T", "t"]], m = [["yyyy-MM-ddTHH:mm:ss.fffffffzzz", "yyyy-MM-ddTHH:mm:ss.fffffff", "yyyy-MM-ddTHH:mm:ss.fffzzz", "yyyy-MM-ddTHH:mm:ss.fff", "ddd MMM dd yyyy HH:mm:ss", "yyyy-MM-ddTHH:mm:sszzz", "yyyy-MM-ddTHH:mmzzz", "yyyy-MM-ddTHH:mmzz", "yyyy-MM-ddTHH:mm:ss", "yyyy-MM-dd HH:mm:ss", "yyyy/MM/dd HH:mm:ss"], ["yyyy-MM-ddTHH:mm", "yyyy-MM-dd HH:mm", "yyyy/MM/dd HH:mm"], ["yyyy/MM/dd", "yyyy-MM-dd", "HH:mm:ss", "HH:mm"]], g = { 2: /^\d{1,2}/, 3: /^\d{1,3}/, 4: /^\d{4}/ }, v = {}.toString; oe.parseDate = function (e, t, i) { var n, o, r, s; if ("[object Date]" === v.call(e)) return e; if (n = 0, o = null, e && 0 === e.indexOf("/D") && (o = h.exec(e))) return o = o[1], s = f.exec(o.substring(1)), o = new Date(parseInt(o, 10)), s && (s = function (e) { var t = "-" === e.substr(0, 1) ? -1 : 1; return e = e.substring(1), e = 60 * parseInt(e.substr(0, 2), 10) + parseInt(e.substring(2), 10), t * e }(s[0]), o = oe.timezone.apply(o, 0), o = oe.timezone.convert(o, 0, -1 * s)), o; for (i = oe.getCulture(i), t || (t = function (e) { var t, i, n, o = de.max(p.length, m.length), r = e.calendar.patterns, s = []; for (n = 0; n < o; n++) { for (t = p[n], i = 0; i < t.length; i++)s.push(r[t[i]]); s = s.concat(m[n]) } return s }(i)), t = ae(t) ? t : [t], r = t.length; n < r; n++)if (o = a(e, t[n], i)) return o; return o }, oe.parseInt = function (e, t) { var i = oe.parseFloat(e, t); return i && (i |= 0), i }, oe.parseFloat = function (e, t, i) { if (!e && 0 !== e) return null; if (typeof e === be) return e; e = "" + e; var n, o, r = (t = oe.getCulture(t)).numberFormat, s = r.percent, a = r.currency, d = a.symbol, u = s.symbol, h = e.indexOf("-"); return c.test(e) ? (e = parseFloat(e.replace(r["."], ".")), isNaN(e) && (e = null), e) : h > 0 ? null : (h = h > -1, e.indexOf(d) > -1 || i && i.toLowerCase().indexOf("c") > -1 ? (n = (r = a).pattern[0].replace("$", d).split("n"), e.indexOf(n[0]) > -1 && e.indexOf(n[1]) > -1 && (e = e.replace(n[0], "").replace(n[1], ""), h = !0)) : e.indexOf(u) > -1 && (o = !0, r = s, d = u), e = e.replace("-", "").replace(d, "").replace(l, " ").split(r[","].replace(l, " ")).join("").replace(r["."], "."), e = parseFloat(e), isNaN(e) ? e = null : h && (e *= -1), e && o && (e /= 100), e) } }(), function () { var n, o, r, s, a, c, d, u, h; he._scrollbar = i, he.scrollbar = function (e) { if (isNaN(he._scrollbar) || e) { var t, i = document.createElement("div"); return i.style.cssText = "overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block", i.innerHTML = "&nbsp;", document.body.appendChild(i), he._scrollbar = t = i.offsetWidth - i.scrollWidth, document.body.removeChild(i), t } return he._scrollbar }, he.isRtl = function (t) { return e(t).closest(".k-rtl").length > 0 }, n = document.createElement("table"); try { n.innerHTML = "<tr><td></td></tr>", he.tbodyInnerHtml = !0 } catch (e) { he.tbodyInnerHtml = !1 } he.touch = "ontouchstart" in t, o = document.documentElement.style, r = he.transitions = !1, s = he.transforms = !1, a = "HTMLElement" in t ? HTMLElement.prototype : [], he.hasHW3D = "WebKitCSSMatrix" in t && "m11" in new t.WebKitCSSMatrix || "MozPerspective" in o || "msPerspective" in o, he.cssFlexbox = "flexWrap" in o || "WebkitFlexWrap" in o || "msFlexWrap" in o, se(["Moz", "webkit", "O", "ms"], function () { var e, t = "" + this, i = typeof n.style[t + "Transition"] === _e; if (i || typeof n.style[t + "Transform"] === _e) return e = t.toLowerCase(), s = { css: "ms" != e ? "-" + e + "-" : "", prefix: t, event: "o" === e || "webkit" === e ? e : "" }, i && ((r = s).event = r.event ? r.event + "TransitionEnd" : "transitionend"), !1 }), n = null, he.transforms = s, he.transitions = r, he.devicePixelRatio = t.devicePixelRatio === i ? 1 : t.devicePixelRatio; try { he.screenWidth = t.outerWidth || t.screen ? t.screen.availWidth : t.innerWidth, he.screenHeight = t.outerHeight || t.screen ? t.screen.availHeight : t.innerHeight } catch (e) { he.screenWidth = t.screen.availWidth, he.screenHeight = t.screen.availHeight } he.detectOS = function (e) { var i, n, o = !1, r = [], s = !/mobile safari/i.test(e), a = { wp: /(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/, fire: /(Silk)\/(\d+)\.(\d+(\.\d+)?)/, android: /(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/, iphone: /(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/, ipad: /(iPad).*OS\s+(\d+)[\._]([\d_]+)/, meego: /(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/, webos: /(webOS)\/(\d+)\.(\d+(\.\d+)?)/, blackberry: /(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/, playbook: /(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/, windows: /(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/, tizen: /(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i, sailfish: /(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i, ffos: /(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/ }, c = { ios: /^i(phone|pad|pod)$/i, android: /^android|fire$/i, blackberry: /^blackberry|playbook/i, windows: /windows/, wp: /wp/, flat: /sailfish|ffos|tizen/i, meego: /meego/ }, d = { tablet: /playbook|ipad|fire/i }, u = { omini: /Opera\sMini/i, omobile: /Opera\sMobi/i, firefox: /Firefox|Fennec/i, mobilesafari: /version\/.*safari/i, ie: /MSIE|Windows\sPhone/i, chrome: /chrome|crios/i, webkit: /webkit/i }; for (n in a) if (a.hasOwnProperty(n) && (r = e.match(a[n]))) { if ("windows" == n && "plugins" in navigator) return !1; (o = {}).device = n, o.tablet = l(n, d, !1), o.browser = l(e, u, "default"), o.name = l(n, c), o[o.name] = !0, o.majorVersion = r[2], o.minorVersion = r[3].replace("_", "."), i = o.minorVersion.replace(".", "").substr(0, 2), o.flatVersion = o.majorVersion + i + Array(3 - (i.length < 3 ? i.length : 2)).join("0"), o.cordova = typeof t.PhoneGap !== xe || typeof t.cordova !== xe, o.appMode = t.navigator.standalone || /file|local|wmapp/.test(t.location.protocol) || o.cordova, o.android && (he.devicePixelRatio < 1.5 && o.flatVersion < 400 || s) && (he.screenWidth > 800 || he.screenHeight > 800) && (o.tablet = n); break } return o }, c = he.mobileOS = he.detectOS(navigator.userAgent), he.wpDevicePixelRatio = c.wp ? screen.width / 320 : 0, he.hasNativeScrolling = !1, (c.ios || c.android && c.majorVersion > 2 || c.wp) && (he.hasNativeScrolling = c), he.delayedClick = function () { if (he.touch) { if (c.ios) return !0; if (c.android) return !he.browser.chrome || !(he.browser.version < 32) && !(e("meta[name=viewport]").attr("content") || "").match(/user-scalable=no/i) } return !1 }, he.mouseAndTouchPresent = he.touch && !(he.mobileOS.ios || he.mobileOS.android), he.detectBrowser = function (e) { var t, i = !1, n = [], o = { edge: /(edge)[ \/]([\w.]+)/i, webkit: /(chrome)[ \/]([\w.]+)/i, safari: /(webkit)[ \/]([\w.]+)/i, opera: /(opera)(?:.*version|)[ \/]([\w.]+)/i, msie: /(msie\s|trident.*? rv:)([\w.]+)/i, mozilla: /(mozilla)(?:.*? rv:([\w.]+)|)/i }; for (t in o) if (o.hasOwnProperty(t) && (n = e.match(o[t]))) { (i = {})[t] = !0, i[n[1].toLowerCase().split(" ")[0].split("/")[0]] = !0, i.version = parseInt(document.documentMode || n[2], 10); break } return i }, he.browser = he.detectBrowser(navigator.userAgent), he.detectClipboardAccess = function () { var e = { copy: !!document.queryCommandSupported && document.queryCommandSupported("copy"), cut: !!document.queryCommandSupported && document.queryCommandSupported("cut"), paste: !!document.queryCommandSupported && document.queryCommandSupported("paste") }; return he.browser.chrome && (e.paste = !1, he.browser.version >= 43 && (e.copy = !0, e.cut = !0)), e }, he.clipboard = he.detectClipboardAccess(), he.zoomLevel = function () { var e, i, n; try { return e = he.browser, i = 0, n = document.documentElement, e.msie && 11 == e.version && n.scrollHeight > n.clientHeight && !he.touch && (i = he.scrollbar()), he.touch ? n.clientWidth / t.innerWidth : e.msie && e.version >= 10 ? ((top || t).document.documentElement.offsetWidth + i) / (top || t).innerWidth : 1 } catch (e) { return 1 } }, he.cssBorderSpacing = i !== o.borderSpacing && !(he.browser.msie && he.browser.version < 8), function (t) { var i = "", n = e(document.documentElement), o = parseInt(t.version, 10); t.msie ? i = "ie" : t.mozilla ? i = "ff" : t.safari ? i = "safari" : t.webkit ? i = "webkit" : t.opera ? i = "opera" : t.edge && (i = "edge"), i && (i = "k-" + i + " k-" + i + o), he.mobileOS && (i += " k-mobile"), he.cssFlexbox || (i += " k-no-flexbox"), n.addClass(i) }(he.browser), he.eventCapture = document.documentElement.addEventListener, d = document.createElement("input"), he.placeholder = "placeholder" in d, he.propertyChangeEvent = "onpropertychange" in d, he.input = function () { for (var e, t = ["number", "date", "time", "month", "week", "datetime", "datetime-local"], i = t.length, n = "test", o = {}, r = 0; r < i; r++)e = t[r], d.setAttribute("type", e), d.value = n, o[e.replace("-", "")] = "text" !== d.type && d.value !== n; return o }(), d.style.cssText = "float:left;", he.cssFloat = !!d.style.cssFloat, d = null, he.stableSort = function () { var e, t = [{ index: 0, field: "b" }]; for (e = 1; e < 513; e++)t.push({ index: e, field: "a" }); return t.sort(function (e, t) { return e.field > t.field ? 1 : e.field < t.field ? -1 : 0 }), 1 === t[0].index }(), he.matchesSelector = a.webkitMatchesSelector || a.mozMatchesSelector || a.msMatchesSelector || a.oMatchesSelector || a.matchesSelector || a.matches || function (t) { for (var i = document.querySelectorAll ? (this.parentNode || document).querySelectorAll(t) || [] : e(t), n = i.length; n--;)if (i[n] == this) return !0; return !1 }, he.pushState = t.history && t.history.pushState, u = document.documentMode, he.hashChange = "onhashchange" in t && !(he.browser.msie && (!u || u <= 8)), he.customElements = "registerElement" in t.document, h = he.browser.chrome, he.msPointers = !h && t.MSPointerEvent, he.pointers = !h && t.PointerEvent, he.kineticScrollNeeded = c && (he.touch || he.msPointers || he.pointers) }(), M = { left: { reverse: "right" }, right: { reverse: "left" }, down: { reverse: "up" }, up: { reverse: "down" }, top: { reverse: "bottom" }, bottom: { reverse: "top" }, in: { reverse: "out" }, out: { reverse: "in" } }, R = {}, e.extend(R, { enabled: !0, Element: function (t) { this.element = e(t) }, promise: function (e, t) { e.is(":visible") || e.css({ display: e.data("olddisplay") || "block" }).css("display"), t.hide && e.data("olddisplay", e.css("display")).hide(), t.init && t.init(), t.completeCallback && t.completeCallback(e), e.dequeue() }, disable: function () { this.enabled = !1, this.promise = this.promiseShim }, enable: function () { this.enabled = !0, this.promise = this.animatedPromise } }), R.promiseShim = R.promise, "kendoAnimate" in e.fn || re(e.fn, { kendoStop: function (e, t) { return this.stop(e, t) }, kendoAnimate: function (e, t, i, n) { return h(this, e, t, i, n) }, kendoAddClass: function (e, t) { return oe.toggleClass(this, e, t, !0) }, kendoRemoveClass: function (e, t) { return oe.toggleClass(this, e, t, !1) }, kendoToggleClass: function (e, t, i) { return oe.toggleClass(this, e, t, i) } }), F = /&/g, z = /</g, P = /"/g, B = /'/g, L = />/g, H = function (e) { return e.target }, he.touch && (H = function (e) { var t = "originalEvent" in e ? e.originalEvent.changedTouches : "changedTouches" in e ? e.changedTouches : null; return t ? document.elementFromPoint(t[0].clientX, t[0].clientY) : e.target }, se(["swipe", "swipeLeft", "swipeRight", "swipeUp", "swipeDown", "doubleTap", "tap"], function (t, i) { e.fn[i] = function (e) { return this.bind(i, e) } })), he.touch ? he.mobileOS ? (he.mousedown = "touchstart", he.mouseup = "touchend", he.mousemove = "touchmove", he.mousecancel = "touchcancel", he.click = "touchend", he.resize = "orientationchange") : (he.mousedown = "mousedown touchstart", he.mouseup = "mouseup touchend", he.mousemove = "mousemove touchmove", he.mousecancel = "mouseleave touchcancel", he.click = "click", he.resize = "resize") : he.pointers ? (he.mousemove = "pointermove", he.mousedown = "pointerdown", he.mouseup = "pointerup", he.mousecancel = "pointercancel", he.click = "pointerup", he.resize = "orientationchange resize") : he.msPointers ? (he.mousemove = "MSPointerMove", he.mousedown = "MSPointerDown", he.mouseup = "MSPointerUp", he.mousecancel = "MSPointerCancel", he.click = "MSPointerUp", he.resize = "orientationchange resize") : (he.mousemove = "mousemove", he.mousedown = "mousedown", he.mouseup = "mouseup", he.mousecancel = "mouseleave", he.click = "click", he.resize = "resize"), N = function (e, t) { var i, n, o, r, s = t || "d", a = 1; for (n = 0, o = e.length; n < o; n++)"" !== (r = e[n]) && (0 !== (i = r.indexOf("[")) && (-1 == i ? r = "." + r : (a++, r = "." + r.substring(0, i) + " || {})" + r.substring(i))), a++, s += r + (n < o - 1 ? " || {})" : ")")); return Array(a).join("(") + s }, O = /^([a-z]+:)?\/\//i, re(oe, { widgets: [], _widgetRegisteredCallbacks: [], ui: oe.ui || {}, fx: oe.fx || function (e) { return new oe.effects.Element(e) }, effects: oe.effects || R, mobile: oe.mobile || {}, data: oe.data || {}, dataviz: oe.dataviz || {}, drawing: oe.drawing || {}, spreadsheet: { messages: {} }, keys: { INSERT: 45, DELETE: 46, BACKSPACE: 8, TAB: 9, ENTER: 13, ESC: 27, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, END: 35, HOME: 36, SPACEBAR: 32, PAGEUP: 33, PAGEDOWN: 34, F2: 113, F10: 121, F12: 123, NUMPAD_PLUS: 107, NUMPAD_MINUS: 109, NUMPAD_DOT: 110 }, support: oe.support || he, animate: oe.animate || h, ns: "", attr: function (e) { return "data-" + oe.ns + e }, getShadows: function (e) { var t = e.css(oe.support.transitions.css + "box-shadow") || e.css("box-shadow"), i = t && t.match(me) || [0, 0, 0, 0, 0], n = de.max(+i[3], +(i[4] || 0)); return { left: -i[1] + n, right: +i[1] + n, bottom: +i[2] + n } }, wrap: function (t, i) { var n, o, r, s, a, l, c, d = he.browser, u = oe._outerWidth, h = oe._outerHeight; return t.parent().hasClass("k-animation-container") ? (l = t.parent(".k-animation-container"), c = l[0].style, l.is(":hidden") && l.show(), (n = fe.test(c.width) || fe.test(c.height)) || l.css({ width: u(t), height: h(t), boxSizing: "content-box", mozBoxSizing: "content-box", webkitBoxSizing: "content-box" })) : (o = t[0].style.width, r = t[0].style.height, s = fe.test(o), a = fe.test(r), n = s || a, !s && (!i || i && o) && (o = u(t)), !a && (!i || i && r) && (r = h(t)), t.wrap(e("<div/>").addClass("k-animation-container").css({ width: o, height: r })), n && t.css({ width: "100%", height: "100%", boxSizing: "border-box", mozBoxSizing: "border-box", webkitBoxSizing: "border-box" })), d.msie && de.floor(d.version) <= 7 && (t.css({ zoom: 1 }), t.children(".k-menu").width(t.width())), t.parent() }, deepExtend: s, getComputedStyles: d, webComponents: oe.webComponents || [], isScrollable: function (e) { if (e && e.className && "string" == typeof e.className && e.className.indexOf("k-auto-scrollable") > -1) return !0; var t = d(e, ["overflow"]).overflow; return "auto" == t || "scroll" == t }, scrollLeft: function (t, n) { var o, r = he.browser.webkit, s = he.browser.mozilla, a = t instanceof e ? t[0] : t; if (t) return o = he.isRtl(t), n === i ? o && r ? a.scrollWidth - a.clientWidth - a.scrollLeft : Math.abs(a.scrollLeft) : (a.scrollLeft = o && r ? a.scrollWidth - a.clientWidth - n : o && s ? -n : n, i) }, size: function (e) { var t, i = 0; for (t in e) e.hasOwnProperty(t) && "toJSON" != t && i++; return i }, toCamelCase: c, toHyphens: function (e) { return e.replace(/([a-z][A-Z])/g, function (e) { return e.charAt(0) + "-" + e.charAt(1).toLowerCase() }) }, getOffset: oe.getOffset || function (e, i, n) { var o, r, s; return i || (i = "offset"), o = e[i](), r = { top: o.top, right: o.right, bottom: o.bottom, left: o.left }, he.browser.msie && (he.pointers || he.msPointers) && !n && (s = he.isRtl(e) ? 1 : -1, r.top -= t.pageYOffset + s * document.documentElement.scrollTop, r.left -= t.pageXOffset + s * document.documentElement.scrollLeft), r }, parseEffects: oe.parseEffects || function (e) { var t = {}; return se("string" == typeof e ? e.split(" ") : e, function (e) { t[e] = this }), t }, toggleClass: oe.toggleClass || function (e, t, i, n) { return t && (t = t.split(" "), se(t, function (t, i) { e.toggleClass(i, n) })), e }, directions: oe.directions || M, Observable: x, Class: n, Template: b, template: le(b.compile, b), render: le(b.render, b), stringify: le(ue.stringify, ue), eventTarget: H, htmlEncode: function (e) { return ("" + e).replace(F, "&amp;").replace(z, "&lt;").replace(L, "&gt;").replace(P, "&quot;").replace(B, "&#39;") }, isLocalUrl: function (e) { return e && !O.test(e) }, expr: function (e, t, i) { return typeof t == _e && (i = t, t = !1), i = i || "d", (e = e || "") && "[" !== e.charAt(0) && (e = "." + e), t ? (e = (e = e.replace(/"([^.]*)\.([^"]*)"/g, '"$1_$DOT$_$2"')).replace(/'([^.]*)\.([^']*)'/g, "'$1_$DOT$_$2'"), e = (e = N(e.split("."), i)).replace(/_\$DOT\$_/g, ".")) : e = i + e, e }, getter: function (e, t) { var i = e + t; return Ce[i] = Ce[i] || Function("d", "return " + oe.expr(e, t)) }, setter: function (e) { return Se[e] = Se[e] || Function("d,value", oe.expr(e) + "=value") }, accessor: function (e) { return { get: oe.getter(e), set: oe.setter(e) } }, guid: function () { var e, t, i = ""; for (e = 0; e < 32; e++)t = 16 * de.random() | 0, 8 != e && 12 != e && 16 != e && 20 != e || (i += "-"), i += (12 == e ? 4 : 16 == e ? 3 & t | 8 : t).toString(16); return i }, roleSelector: function (e) { return e.replace(/(\S+)/g, "[" + oe.attr("role") + "=$1],").slice(0, -1) }, directiveSelector: function (e) { var t, i = e.split(" "); if (i) for (t = 0; t < i.length; t++)"view" != i[t] && (i[t] = i[t].replace(/(\w*)(view|bar|strip|over)$/, "$1-$2")); return i.join(" ").replace(/(\S+)/g, "kendo-mobile-$1,").slice(0, -1) }, triggeredByInput: function (e) { return /^(label|input|textarea|select)$/i.test(e.target.tagName) }, onWidgetRegistered: function (e) { for (var t = 0, i = oe.widgets.length; t < i; t++)e(oe.widgets[t]); oe._widgetRegisteredCallbacks.push(e) }, logToConsole: function (e, n) { var o = t.console; !oe.suppressLog && i !== o && o.log && o[n || "log"](e) } }), V = x.extend({ init: function (e, t) { var i, n = this; n.element = oe.jQuery(e).handler(n), n.angular("init", t), x.fn.init.call(n), (i = t ? t.dataSource : null) && (t = re({}, t, { dataSource: {} })), t = n.options = re(!0, {}, n.options, t), i && (t.dataSource = i), n.element.attr(oe.attr("role")) || n.element.attr(oe.attr("role"), (t.name || "").toLowerCase()), n.element.data("kendo" + t.prefix + t.name, n), n.bind(n.events, t) }, events: [], options: { prefix: "" }, _hasBindingTarget: function () { return !!this.element[0].kendoBindingTarget }, _tabindex: function (e) { e = e || this.wrapper; var t = this.element, i = "tabindex", n = e.attr(i) || t.attr(i); t.removeAttr(i), e.attr(i, isNaN(n) ? 0 : n) }, setOptions: function (t) { this._setEvents(t), e.extend(this.options, t) }, _setEvents: function (e) { for (var t, i = this, n = 0, o = i.events.length; n < o; n++)t = i.events[n], i.options[t] && e[t] && i.unbind(t, i.options[t]); i.bind(i.events, e) }, resize: function (e) { var t = this.getSize(), i = this._size; (e || (t.width > 0 || t.height > 0) && (!i || t.width !== i.width || t.height !== i.height)) && (this._size = t, this._resize(t, e), this.trigger("resize", t)) }, getSize: function () { return oe.dimensions(this.element) }, size: function (e) { return e ? (this.setSize(e), i) : this.getSize() }, setSize: e.noop, _resize: e.noop, destroy: function () { var e = this; e.element.removeData("kendo" + e.options.prefix + e.options.name), e.element.removeData("handler"), e.unbind() }, _destroy: function () { this.destroy() }, angular: function () { }, _muteAngularRebind: function (e) { this._muteRebind = !0, e.call(this), this._muteRebind = !1 } }), U = V.extend({ dataItems: function () { return this.dataSource.flatView() }, _angularItems: function (t) { var i = this; i.angular(t, function () { return { elements: i.items(), data: e.map(i.dataItems(), function (e) { return { dataItem: e } }) } }) } }), oe.dimensions = function (e, t) { var i = e[0]; return t && e.css(t), { width: i.offsetWidth, height: i.offsetHeight } }, oe.notify = ce, W = /template$/i, q = /^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/, j = /^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]+\]$/, G = /([A-Z])/g, oe.initWidget = function (n, o, r) { var s, a, l, c, d, u, h, m, g, v, _, b, w; if (r ? r.roles && (r = r.roles) : r = oe.ui.roles, n = n.nodeType ? n : n[0], u = n.getAttribute("data-" + oe.ns + "role")) { for (w in g = -1 === u.indexOf("."), l = g ? r[u] : oe.getter(u)(t), _ = e(n).data(), b = l ? "kendo" + l.fn.options.prefix + l.fn.options.name : "", v = g ? RegExp("^kendo.*" + u + "$", "i") : RegExp("^" + b + "$", "i"), _) if (w.match(v)) { if (w !== b) return _[w]; s = _[w] } if (l) { for (m = f(n, "dataSource"), o = e.extend({}, p(n, l.fn.options), o), m && (o.dataSource = typeof m === _e ? oe.getter(m)(t) : m), c = 0, d = l.fn.events.length; c < d; c++)a = l.fn.events[c], (h = f(n, a)) !== i && (o[a] = oe.getter(h)(t)); return s ? e.isEmptyObject(o) || s.setOptions(o) : s = new l(n, o), s } } }, oe.rolesFromNamespaces = function (e) { var t, i, n = []; for (e[0] || (e = [oe.ui, oe.dataviz.ui]), t = 0, i = e.length; t < i; t++)n[t] = e[t].roles; return re.apply(null, [{}].concat(n.reverse())) }, oe.init = function (t) { var i = oe.rolesFromNamespaces(Te.call(arguments, 1)); e(t).find("[data-" + oe.ns + "role]").addBack().each(function () { oe.initWidget(this, {}, i) }) }, oe.destroy = function (t) { e(t).find("[data-" + oe.ns + "role]").addBack().each(function () { var t, i = e(this).data(); for (t in i) 0 === t.indexOf("kendo") && typeof i[t].destroy === ve && i[t].destroy() }) }, oe.resize = function (t, i) { var n, o = e(t).find("[data-" + oe.ns + "role]").addBack().filter(g); o.length && ((n = e.makeArray(o)).sort(m), e.each(n, function () { var t = oe.widgetInstance(e(this)); t && t.resize(i) })) }, oe.parseOptions = p, re(oe.ui, { Widget: V, DataBoundWidget: U, roles: {}, progress: function (t, i) { var n, o, r, s, a = t.find(".k-loading-mask"), l = oe.support, c = l.browser; i ? a.length || (n = l.isRtl(t), o = n ? "right" : "left", s = t.scrollLeft(), r = c.webkit && n ? t[0].scrollWidth - t.width() - 2 * s : 0, a = e("<div class='k-loading-mask'><span class='k-loading-text'>" + oe.ui.progress.messages.loading + "</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top", t.scrollTop()).css(o, Math.abs(s) + r).prependTo(t)) : a && a.remove() }, plugin: function (t, n, o) { var r, s, a, l, c = t.fn.options.name; for (n = n || oe.ui, o = o || "", n[c] = t, n.roles[c.toLowerCase()] = t, r = "getKendo" + o + c, s = { name: c = "kendo" + o + c, widget: t, prefix: o || "" }, oe.widgets.push(s), a = 0, l = oe._widgetRegisteredCallbacks.length; a < l; a++)oe._widgetRegisteredCallbacks[a](s); e.fn[c] = function (n) { var o, r = this; return typeof n === _e ? (o = Te.call(arguments, 1), this.each(function () { var t, s, a = e.data(this, c); if (!a) throw Error(oe.format("Cannot call method '{0}' of {1} before it is initialized", n, c)); if (typeof (t = a[n]) !== ve) throw Error(oe.format("Cannot find method '{0}' of {1}", n, c)); if ((s = t.apply(a, o)) !== i) return r = s, !1 })) : this.each(function () { return new t(this, n) }), r }, e.fn[c].widget = t, e.fn[r] = function () { return this.data(c) } } }), oe.ui.progress.messages = { loading: "Loading..." }, $ = { bind: function () { return this }, nullObject: !0, options: {} }, Y = V.extend({ init: function (e, t) { V.fn.init.call(this, e, t), this.element.autoApplyNS(), this.wrapper = this.element, this.element.addClass("km-widget") }, destroy: function () { V.fn.destroy.call(this), this.element.kendoDestroy() }, options: { prefix: "Mobile" }, events: [], view: function () { var e = this.element.closest(oe.roleSelector("view splitview modalview drawer")); return oe.widgetInstance(e, oe.mobile.ui) || $ }, viewHasNativeScrolling: function () { var e = this.view(); return e && e.options.useNativeScrolling }, container: function () { var e = this.element.closest(oe.roleSelector("view layout modalview drawer splitview")); return oe.widgetInstance(e.eq(0), oe.mobile.ui) || $ } }), re(oe.mobile, { init: function (e) { oe.init(e, oe.mobile.ui, oe.ui, oe.dataviz.ui) }, appLevelNativeScrolling: function () { return oe.mobile.application && oe.mobile.application.options && oe.mobile.application.options.useNativeScrolling }, roles: {}, ui: { Widget: Y, DataBoundWidget: U.extend(Y.prototype), roles: {}, plugin: function (e) { oe.ui.plugin(e, oe.mobile.ui, "Mobile") } } }), s(oe.dataviz, { init: function (e) { oe.init(e, oe.dataviz.ui) }, ui: { roles: {}, themes: {}, views: [], plugin: function (e) { oe.ui.plugin(e, oe.dataviz.ui) } }, roles: {} }), oe.touchScroller = function (t, i) { return i || (i = {}), i.useNative = !0, e(t).map(function (t, n) { return n = e(n), !(!he.kineticScrollNeeded || !oe.mobile.ui.Scroller || n.data("kendoMobileScroller")) && (n.kendoMobileScroller(i), n.data("kendoMobileScroller")) })[0] }, oe.preventDefault = function (e) { e.preventDefault() }, oe.widgetInstance = function (e, i) { var n, o, r, s, a = e.data(oe.ns + "role"), l = []; if (a) { if ("content" === a && (a = "scroller"), i) if (i[0]) for (n = 0, o = i.length; n < o; n++)l.push(i[n].roles[a]); else l.push(i.roles[a]); else l = [oe.ui.roles[a], oe.dataviz.ui.roles[a], oe.mobile.ui.roles[a]]; for (a.indexOf(".") >= 0 && (l = [oe.getter(a)(t)]), n = 0, o = l.length; n < o; n++)if ((r = l[n]) && (s = e.data("kendo" + r.fn.options.prefix + r.fn.options.name))) return s } }, oe.onResize = function (i) { var n = i; return he.mobileOS.android && (n = function () { setTimeout(i, 600) }), e(t).on(he.resize, n), n }, oe.unbindResize = function (i) { e(t).off(he.resize, i) }, oe.attrValue = function (e, t) { return e.data(oe.ns + t) }, oe.days = { Sunday: 0, Monday: 1, Tuesday: 2, Wednesday: 3, Thursday: 4, Friday: 5, Saturday: 6 }, e.extend(e.expr[":"], { kendoFocusable: function (t) { var i = e.attr(t, "tabindex"); return function (e, t) { var i = e.nodeName.toLowerCase(); return (/input|select|textarea|button|object/.test(i) ? !e.disabled : "a" === i && e.href || t) && v(e) }(t, !isNaN(i) && i > -1) } }), K = ["mousedown", "mousemove", "mouseenter", "mouseleave", "mouseover", "mouseout", "mouseup", "click"], Q = { setupMouseMute: function () { var t, i = 0, n = K.length, o = document.documentElement; if (!Q.mouseTrap && he.eventCapture) for (Q.mouseTrap = !0, Q.bustClick = !1, Q.captureMouse = !1, t = function (t) { Q.captureMouse && ("click" === t.type ? Q.bustClick && !e(t.target).is("label, input, [data-rel=external]") && (t.preventDefault(), t.stopPropagation()) : t.stopPropagation()) }; i < n; i++)o.addEventListener(K[i], t, !0) }, muteMouse: function (e) { Q.captureMouse = !0, e.data.bustClick && (Q.bustClick = !0), clearTimeout(Q.mouseTrapTimeoutID) }, unMuteMouse: function () { clearTimeout(Q.mouseTrapTimeoutID), Q.mouseTrapTimeoutID = setTimeout(function () { Q.captureMouse = !1, Q.bustClick = !1 }, 400) } }, X = { down: "touchstart mousedown", move: "mousemove touchmove", up: "mouseup touchend touchcancel", cancel: "mouseleave touchcancel" }, he.touch && (he.mobileOS.ios || he.mobileOS.android) ? X = { down: "touchstart", move: "touchmove", up: "touchend touchcancel", cancel: "touchcancel" } : he.pointers ? X = { down: "pointerdown", move: "pointermove", up: "pointerup", cancel: "pointercancel pointerleave" } : he.msPointers && (X = { down: "MSPointerDown", move: "MSPointerMove", up: "MSPointerUp", cancel: "MSPointerCancel MSPointerLeave" }), !he.msPointers || "onmspointerenter" in t || e.each({ MSPointerEnter: "MSPointerOver", MSPointerLeave: "MSPointerOut" }, function (t, i) { e.event.special[t] = { delegateType: i, bindType: i, handle: function (t) { var n, o = t.relatedTarget, r = t.handleObj; return o && (o === this || e.contains(this, o)) || (t.type = r.origType, n = r.handler.apply(this, arguments), t.type = i), n } } }), Z = function (e) { return X[e] || e }, J = /([^ ]+)/g, oe.applyEventMap = function (e, t) { return e = e.replace(J, Z), t && (e = e.replace(J, "$1." + t)), e }, ee = e.fn.on, re(!0, _, e), _.fn = _.prototype = new e, _.fn.constructor = _, _.fn.init = function (t, i) { return i && i instanceof e && !(i instanceof _) && (i = _(i)), e.fn.init.call(this, t, i, te) }, _.fn.init.prototype = _.fn, te = _(document), re(_.fn, { handler: function (e) { return this.data("handler", e), this }, autoApplyNS: function (e) { return this.data("kendoNS", e || oe.guid()), this }, on: function () { var e, t, i, n, o, r, s = this, a = s.data("kendoNS"); return 1 === arguments.length ? ee.call(s, arguments[0]) : (e = s, typeof (t = Te.call(arguments))[t.length - 1] === xe && t.pop(), i = t[t.length - 1], n = oe.applyEventMap(t[0], a), he.mouseAndTouchPresent && n.search(/mouse|click/) > -1 && this[0] !== document.documentElement && (Q.setupMouseMute(), o = 2 === t.length ? null : t[1], r = n.indexOf("click") > -1 && n.indexOf("touchend") > -1, ee.call(this, { touchstart: Q.muteMouse, touchend: Q.unMuteMouse }, o, { bustClick: r })), typeof i === _e && (e = s.data("handler"), i = e[i], t[t.length - 1] = function (t) { i.call(e, t) }), t[0] = n, ee.apply(s, t), s) }, kendoDestroy: function (e) { return (e = e || this.data("kendoNS")) && this.off("." + e), this } }), oe.jQuery = _, oe.eventMap = X, oe.timezone = function () { function e(e, t) { var i, r, s, a = t[3], l = t[4], c = t[5], d = t[8]; return d || (t[8] = d = {}), d[e] ? d[e] : (isNaN(l) ? 0 === l.indexOf("last") ? (i = new Date(Date.UTC(e, n[a] + 1, 1, c[0] - 24, c[1], c[2], 0)), r = o[l.substr(4, 3)], s = i.getUTCDay(), i.setUTCDate(i.getUTCDate() + r - s - (r > s ? 7 : 0))) : l.indexOf(">=") >= 0 && (i = new Date(Date.UTC(e, n[a], l.substr(5), c[0], c[1], c[2], 0)), r = o[l.substr(0, 3)], s = i.getUTCDay(), i.setUTCDate(i.getUTCDate() + r - s + (r < s ? 7 : 0))) : i = new Date(Date.UTC(e, n[a], l, c[0], c[1], c[2], 0)), d[e] = i) } function t(t, i, n) { var o, r, s, a; return (i = i[n]) ? (s = new Date(t).getUTCFullYear(), (i = jQuery.grep(i, function (e) { var t = e[0], i = e[1]; return t <= s && (i >= s || t == s && "only" == i || "max" == i) })).push(t), i.sort(function (t, i) { return "number" != typeof t && (t = +e(s, t)), "number" != typeof i && (i = +e(s, i)), t - i }), a = i[jQuery.inArray(t, i) - 1] || i[i.length - 1], isNaN(a) ? a : null) : (o = n.split(":"), r = 0, o.length > 1 && (r = 60 * o[0] + +o[1]), [-1e6, "max", "-", "Jan", 1, [0, 0, 0], r, "-"]) } function i(e, i, n, o) { typeof e != be && (e = Date.UTC(e.getFullYear(), e.getMonth(), e.getDate(), e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds())); var r = function (e, t, i) { var n, o, r, s = t[i]; if ("string" == typeof s && (s = t[s]), !s) throw Error('Timezone "' + i + '" is either incorrect, or kendo.timezones.min.js is not included.'); for (n = s.length - 1; n >= 0 && !((o = s[n][3]) && e > o); n--); if (!(r = s[n + 1])) throw Error('Timezone "' + i + '" not found on ' + e + "."); return r }(e, i, o); return { zone: r, rule: t(e, n, r[1]) } } var n = { Jan: 0, Feb: 1, Mar: 2, Apr: 3, May: 4, Jun: 5, Jul: 6, Aug: 7, Sep: 8, Oct: 9, Nov: 10, Dec: 11 }, o = { Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6 }; return { zones: {}, rules: {}, offset: function (e, t) { var n, o, r; return "Etc/UTC" == t || "Etc/GMT" == t ? 0 : (n = i(e, this.zones, this.rules, t), o = n.zone, r = n.rule, oe.parseFloat(r ? o[0] - r[6] : o[0])) }, convert: function (e, t, i) { var n, o; return typeof t == _e && (t = this.offset(e, t)), typeof i == _e && (i = this.offset(e, i)), n = e.getTimezoneOffset(), e = new Date(e.getTime() + 6e4 * (t - i)), o = e.getTimezoneOffset(), new Date(e.getTime() + 6e4 * (o - n)) }, apply: function (e, t) { return this.convert(e, e.getTimezoneOffset(), t) }, remove: function (e, t) { return this.convert(e, t, e.getTimezoneOffset()) }, abbr: function (e, t) { var n = i(e, this.zones, this.rules, t), o = n.zone, r = n.rule, s = o[2]; return s.indexOf("/") >= 0 ? s.split("/")[r && +r[6] ? 1 : 0] : s.indexOf("%s") >= 0 ? s.replace("%s", r && "-" != r[7] ? r[7] : "") : s }, toLocalDate: function (e) { return this.apply(new Date(e), "Etc/UTC") } } }(), oe.date = function () { function e(e, t) { return 0 === t && 23 === e.getHours() && (e.setHours(e.getHours() + 2), !0) } function t(t, i, n) { var o = t.getHours(); n = n || 1, i = (i - t.getDay() + 7 * n) % 7, t.setDate(t.getDate() + i), e(t, o) } function i(e, i, n) { return t(e = new Date(e), i, n), e } function n(e) { return new Date(e.getFullYear(), e.getMonth(), 1) } function o(e, t) { return 1 !== t ? l(i(e, t, -1), 4) : l(e, 4 - (e.getDay() || 7)) } function r(e, t) { var i = new Date(e.getFullYear(), 0, 1, -6), n = o(e, t), r = n.getTime() - i.getTime(), s = Math.floor(r / h); return 1 + Math.floor(s / 7) } function s(t) { return e(t = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0, 0, 0), 0), t } function a(e) { return e.getTime() - s(e) } function l(t, i) { var n = t.getHours(); return c(t = new Date(t), i * h), e(t, n), t } function c(e, t, i) { var n, o = e.getTimezoneOffset(); e.setTime(e.getTime() + t), i || (n = e.getTimezoneOffset() - o, e.setTime(e.getTime() + n * u)) } function d() { return s(new Date) } var u = 6e4, h = 864e5; return { adjustDST: e, dayOfWeek: i, setDayOfWeek: t, getDate: s, isInDateRange: function (e, t, i) { var n, o = t.getTime(), r = i.getTime(); return o >= r && (r += h), (n = e.getTime()) >= o && n <= r }, isInTimeRange: function (e, t, i) { var n, o = a(t), r = a(i); return !e || o == r || (t >= i && (i += h), n = a(e), o > n && (n += h), r < o && (r += h), n >= o && n <= r) }, isToday: function (e) { return s(e).getTime() == d().getTime() }, nextDay: function (e) { return l(e, 1) }, previousDay: function (e) { return l(e, -1) }, toUtcTime: function (e) { return Date.UTC(e.getFullYear(), e.getMonth(), e.getDate(), e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds()) }, MS_PER_DAY: h, MS_PER_HOUR: 60 * u, MS_PER_MINUTE: u, setTime: c, setHours: function (t, i) { return e(t = new Date(oe.date.getDate(t).getTime() + oe.date.getMilliseconds(i)), i.getHours()), t }, addDays: l, today: d, toInvariantTime: function (e) { var t = new Date(1980, 1, 1, 0, 0, 0); return e && t.setHours(e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds()), t }, firstDayOfMonth: n, lastDayOfMonth: function (e) { var t = new Date(e.getFullYear(), e.getMonth() + 1, 0), i = n(e), o = Math.abs(t.getTimezoneOffset() - i.getTimezoneOffset()); return o && t.setHours(i.getHours() + o / 60), t }, weekInYear: function (e, t) { var i = l(e, -7), n = l(e, 7), o = r(e, t); return 0 === o ? r(i, t) + 1 : 53 === o && r(n, t) > 1 ? 1 : o }, getMilliseconds: a } }(), oe.stripWhitespace = function (e) { var t, i, n; if (document.createNodeIterator) for (t = document.createNodeIterator(e, NodeFilter.SHOW_TEXT, function (t) { return t.parentNode == e ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT }, !1); t.nextNode();)t.referenceNode && !t.referenceNode.textContent.trim() && t.referenceNode.parentNode.removeChild(t.referenceNode); else for (i = 0; i < e.childNodes.length; i++)3 != (n = e.childNodes[i]).nodeType || /\S/.test(n.nodeValue) || (e.removeChild(n), i--), 1 == n.nodeType && oe.stripWhitespace(n) }, ie = t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || t.msRequestAnimationFrame || function (e) { setTimeout(e, 1e3 / 60) }, oe.animationFrame = function (e) { ie.call(t, e) }, ne = [], oe.queueAnimation = function (e) { ne[ne.length] = e, 1 === ne.length && oe.runNextAnimation() }, oe.runNextAnimation = function () { oe.animationFrame(function () { ne[0] && (ne.shift()(), ne[0] && oe.runNextAnimation()) }) }, oe.parseQueryStringParams = function (e) { for (var t = e.split("?")[1] || "", i = {}, n = t.split(/&|=/), o = n.length, r = 0; r < o; r += 2)"" !== n[r] && (i[decodeURIComponent(n[r])] = decodeURIComponent(n[r + 1])); return i }, oe.elementUnderCursor = function (e) { if (i !== e.x.client) return document.elementFromPoint(e.x.client, e.y.client) }, oe.wheelDeltaY = function (e) { var t, n = e.originalEvent, o = n.wheelDeltaY; return n.wheelDelta ? (o === i || o) && (t = n.wheelDelta) : n.detail && n.axis === n.VERTICAL_AXIS && (t = 10 * -n.detail), t }, oe.throttle = function (e, t) { var n, o, r = 0; return !t || t <= 0 ? e : ((o = function () { function o() { e.apply(s, l), r = +new Date } var s = this, a = +new Date - r, l = arguments; return r ? (n && clearTimeout(n), a > t ? o() : n = setTimeout(o, t - a), i) : o() }).cancel = function () { clearTimeout(n) }, o) }, oe.caret = function (t, n, o) { var r, s, a, l, c, d = n !== i; if (o === i && (o = n), t[0] && (t = t[0]), !d || !t.disabled) { try { t.selectionStart !== i ? d ? (t.focus(), (s = he.mobileOS).wp || s.android ? setTimeout(function () { t.setSelectionRange(n, o) }, 0) : t.setSelectionRange(n, o)) : n = [t.selectionStart, t.selectionEnd] : document.selection && (e(t).is(":visible") && t.focus(), r = t.createTextRange(), d ? (r.collapse(!0), r.moveStart("character", n), r.moveEnd("character", o - n), r.select()) : (a = r.duplicate(), r.moveToBookmark(document.selection.createRange().getBookmark()), a.setEndPoint("EndToStart", r), l = a.text.length, c = l + r.text.length, n = [l, c])) } catch (e) { n = [] } return n } }, oe.compileMobileDirective = function (e, i) { var n = t.angular; return e.attr("data-" + oe.ns + "role", e[0].tagName.toLowerCase().replace("kendo-mobile-", "").replace("-", "")), n.element(e).injector().invoke(["$compile", function (t) { t(e)(i), /^\$(digest|apply)$/.test(i.$$phase) || i.$digest() }]), oe.widgetInstance(e, oe.mobile.ui) }, oe.antiForgeryTokens = function () { var t = {}, n = e("meta[name=csrf-token],meta[name=_csrf]").attr("content"), o = e("meta[name=csrf-param],meta[name=_csrf_header]").attr("content"); return e("input[name^='__RequestVerificationToken']").each(function () { t[this.name] = this.value }), o !== i && n !== i && (t[o] = n), t }, oe.cycleForm = function (e) { function t(e) { var t = oe.widgetInstance(e); t && t.focus ? t.focus() : e.focus() } var i = e.find("input, .k-widget").first(), n = e.find("button, .k-button").last(); n.on("keydown", function (e) { e.keyCode != oe.keys.TAB || e.shiftKey || (e.preventDefault(), t(i)) }), i.on("keydown", function (e) { e.keyCode == oe.keys.TAB && e.shiftKey && (e.preventDefault(), t(n)) }) }, function () { function i(t, i, n, o) { var r, s, a = e("<form>").attr({ action: n, method: "POST", target: o }), l = oe.antiForgeryTokens(); for (s in l.fileName = i, r = t.split(";base64,"), l.contentType = r[0].replace("data:", ""), l.base64 = r[1], l) l.hasOwnProperty(s) && e("<input>").attr({ value: l[s], name: s, type: "hidden" }).appendTo(a); a.appendTo("body").submit().remove() } function n(e, t) { var i, n, o, r, s, a = e; if ("string" == typeof e) { for (i = e.split(";base64,"), n = i[0], o = atob(i[1]), r = new Uint8Array(o.length), s = 0; s < o.length; s++)r[s] = o.charCodeAt(s); a = new Blob([r.buffer], { type: n }) } navigator.msSaveBlob(a, t) } function o(e, i) { t.Blob && e instanceof Blob && (e = URL.createObjectURL(e)), r.download = i, r.href = e; var n = document.createEvent("MouseEvents"); n.initMouseEvent("click", !0, !1, t, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), r.dispatchEvent(n), setTimeout(function () { URL.revokeObjectURL(e) }) } var r = document.createElement("a"), s = "download" in r && !oe.support.browser.edge; oe.saveAs = function (e) { var t = i; e.forceProxy || (s ? t = o : navigator.msSaveBlob && (t = n)), t(e.dataURI, e.fileName, e.proxyURL, e.proxyTarget) } }(), oe.proxyModelSetters = function (e) { var t = {}; return Object.keys(e || {}).forEach(function (i) { Object.defineProperty(t, i, { get: function () { return e[i] }, set: function (t) { e[i] = t, e.dirty = !0 } }) }), t } }(jQuery, window), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.router.min", ["kendo.core.min"], function () { return function (e, t) { function i(e, t) { if (!t) return e; e + "/" === t && (e = t); var i = RegExp("^" + t, "i"); return i.test(e) || (e = t + "/" + e), h.protocol + "//" + (h.host + "/" + e).replace(/\/\/+/g, "/") } function n(e) { return e ? "#!" : "#" } function o(e) { var t = h.href; return "#!" === e && t.indexOf("#") > -1 && t.indexOf("#!") < 0 ? null : t.split(e)[1] || "" } function r(e, t) { return 0 === t.indexOf(e) ? t.substr(e.length).replace(/\/\//g, "/") : t } function s(e) { return e.replace(/^(#)?/, "#") } function a(e) { return e.replace(/^(#(!)?)?/, "#!") } var l = window.kendo, c = "change", d = "same", u = l.support, h = window.location, f = window.history, p = l.support.browser.msie, m = /^#*/, g = window.document, v = l.Class.extend({ back: function () { p ? setTimeout(function () { f.back() }) : f.back() }, forward: function () { p ? setTimeout(function () { f.forward() }) : f.forward() }, length: function () { return f.length }, replaceLocation: function (e) { h.replace(e) } }), _ = v.extend({ init: function (e) { this.root = e }, navigate: function (e) { f.pushState({}, g.title, i(e, this.root)) }, replace: function (e) { f.replaceState({}, g.title, i(e, this.root)) }, normalize: function (e) { return r(this.root, e) }, current: function () { var e = h.pathname; return h.search && (e += h.search), r(this.root, e) }, change: function (t) { e(window).bind("popstate.kendo", t) }, stop: function () { e(window).unbind("popstate.kendo") }, normalizeCurrent: function (e) { var t, r = e.root, s = h.pathname, a = o(n(e.hashBang)); r === s + "/" && (t = r), r === s && a && (t = i(a.replace(m, ""), r)), t && f.pushState({}, g.title, t) } }), b = v.extend({ init: function (e) { this._id = l.guid(), this.prefix = n(e), this.fix = e ? a : s }, navigate: function (e) { h.hash = this.fix(e) }, replace: function (e) { this.replaceLocation(this.fix(e)) }, normalize: function (e) { return e.indexOf(this.prefix) < 0 ? e : e.split(this.prefix)[1] }, change: function (t) { u.hashChange ? e(window).on("hashchange." + this._id, t) : this._interval = setInterval(t, 50) }, stop: function () { e(window).off("hashchange." + this._id), clearInterval(this._interval) }, current: function () { return o(this.prefix) }, normalizeCurrent: function (e) { var t = h.pathname, i = e.root; return !(!e.pushState || i === t || (this.replaceLocation(i + this.prefix + r(i, t)), 0)) } }), w = l.Observable.extend({ start: function (t) { if (t = t || {}, this.bind([c, "back", d], t), !this._started) { this._started = !0, t.root = t.root || "/"; var i, n = this.createAdapter(t); n.normalizeCurrent(t) || (i = n.current(), e.extend(this, { adapter: n, root: t.root, historyLength: n.length(), current: i, locations: [i] }), n.change(e.proxy(this, "_checkUrl"))) } }, createAdapter: function (e) { return u.pushState && e.pushState ? new _(e.root) : new b(e.hashBang) }, stop: function () { this._started && (this.adapter.stop(), this.unbind(c), this._started = !1) }, change: function (e) { this.bind(c, e) }, replace: function (e, t) { this._navigate(e, t, function (t) { t.replace(e), this.locations[this.locations.length - 1] = this.current }) }, navigate: function (e, i) { return "#:back" === e ? (this.backCalled = !0, this.adapter.back(), t) : (this._navigate(e, i, function (t) { t.navigate(e), this.locations.push(this.current) }), t) }, _navigate: function (e, i, n) { var o = this.adapter; return e = o.normalize(e), this.current === e || this.current === decodeURIComponent(e) ? (this.trigger(d), t) : (!i && this.trigger(c, { url: e, decode: !1 }) || (this.current = e, n.call(this, o), this.historyLength = o.length()), t) }, _checkUrl: function () { var e = this.adapter, i = e.current(), n = e.length(), o = this.historyLength === n, r = i === this.locations[this.locations.length - 2] && o, s = this.backCalled, a = this.current; return null === i || this.current === i || this.current === decodeURIComponent(i) || (this.historyLength = n, this.backCalled = !1, this.current = i, r && this.trigger("back", { url: a, to: i }) ? (e.forward(), this.current = a, t) : this.trigger(c, { url: i, backButtonPressed: !s }) ? (r ? e.forward() : (e.back(), this.historyLength--), this.current = a, t) : (r ? this.locations.pop() : this.locations.push(i), t)) } }); l.History = w, l.History.HistoryAdapter = v, l.History.HashAdapter = b, l.History.PushStateAdapter = _, l.absoluteURL = i, l.history = new w }(window.kendo.jQuery), function () { function e(e, t) { return t ? e : "([^/]+)" } function t(t, i) { return RegExp("^" + t.replace(p, "\\$&").replace(u, "(?:$1)?").replace(h, e).replace(f, "(.*?)") + "$", i ? "i" : "") } function i(e) { return e.replace(/(\?.*)|(#.*)/g, "") } var n = window.kendo, o = n.history, r = n.Observable, s = "init", a = "routeMissing", l = "change", c = "back", d = "same", u = /\((.*?)\)/g, h = /(\(\?)?:\w+/g, f = /\*\w+/g, p = /[\-{}\[\]+?.,\\\^$|#\s]/g, m = n.Class.extend({ init: function (e, i, n) { e instanceof RegExp || (e = t(e, n)), this.route = e, this._callback = i }, callback: function (e, t, o) { var r, s, a = 0, l = n.parseQueryStringParams(e); if (l._back = t, e = i(e), r = this.route.exec(e).slice(1), s = r.length, o) for (; a < s; a++)void 0 !== r[a] && (r[a] = decodeURIComponent(r[a])); r.push(l), this._callback.apply(null, r) }, worksWith: function (e, t, n) { return !!this.route.test(i(e)) && (this.callback(e, t, n), !0) } }), g = r.extend({ init: function (e) { e || (e = {}), r.fn.init.call(this), this.routes = [], this.pushState = e.pushState, this.hashBang = e.hashBang, this.root = e.root, this.ignoreCase = !1 !== e.ignoreCase, this.bind([s, a, l, d], e) }, destroy: function () { o.unbind(l, this._urlChangedProxy), o.unbind(d, this._sameProxy), o.unbind(c, this._backProxy), this.unbind() }, start: function () { var e, t = this, i = function (e) { t._back(e) }, n = function (e) { t._urlChanged(e) }; o.start({ same: function () { t._same() }, change: n, back: i, pushState: t.pushState, hashBang: t.hashBang, root: t.root }), e = { url: o.current || "/", preventDefault: $.noop }, t.trigger(s, e) || t._urlChanged(e), this._urlChangedProxy = n, this._backProxy = i }, route: function (e, t) { this.routes.push(new m(e, t, this.ignoreCase)) }, navigate: function (e, t) { n.history.navigate(e, t) }, replace: function (e, t) { n.history.replace(e, t) }, _back: function (e) { this.trigger(c, { url: e.url, to: e.to }) && e.preventDefault() }, _same: function () { this.trigger(d) }, _urlChanged: function (e) { var t, i, o, r = e.url, s = void 0 === e.decode, c = e.backButtonPressed; if (r || (r = "/"), this.trigger(l, { url: e.url, params: n.parseQueryStringParams(e.url), backButtonPressed: c })) e.preventDefault(); else { for (t = 0, i = this.routes, o = i.length; t < o; t++)if (i[t].worksWith(r, c, s)) return; this.trigger(a, { url: r, params: n.parseQueryStringParams(r), backButtonPressed: c }) && e.preventDefault() } } }); n.Router = g }(), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.data.odata.min", ["kendo.core.min"], function () { return function (e, t) { function i(o, a) { var l, c, d, u, h, f, p, m, g = [], v = o.logic || "and", _ = o.filters; for (l = 0, c = _.length; l < c; l++)o = _[l], d = o.field, p = o.value, f = o.operator, o.filters ? o = i(o, a) : (m = o.ignoreCase, d = d.replace(/\./g, "/"), o = r[f], a && (o = s[f]), "isnull" === f || "isnotnull" === f ? o = n.format("{0} {1} null", d, o) : "isempty" === f || "isnotempty" === f ? o = n.format("{0} {1} ''", d, o) : o && p !== t && ("string" === (u = e.type(p)) ? (h = "'{1}'", p = p.replace(/'/g, "''"), !0 === m && (d = "tolower(" + d + ")")) : "date" === u ? a ? (h = "{1:yyyy-MM-ddTHH:mm:ss+00:00}", p = n.timezone.apply(p, "Etc/UTC")) : h = "datetime'{1:yyyy-MM-ddTHH:mm:ss}'" : h = "{1}", o.length > 3 ? "substringof" !== o ? h = "{0}({2}," + h + ")" : (h = "{0}(" + h + ",{2})", "doesnotcontain" === f && (a ? (h = "{0}({2},'{1}') eq -1", o = "indexof") : h += " eq false")) : h = "{2} {0} " + h, o = n.format(h, o, p, d))), g.push(o); return o = g.join(" " + v + " "), g.length > 1 && (o = "(" + o + ")"), o } var n = window.kendo, o = e.extend, r = { eq: "eq", neq: "ne", gt: "gt", gte: "ge", lt: "lt", lte: "le", contains: "substringof", doesnotcontain: "substringof", endswith: "endswith", startswith: "startswith", isnull: "eq", isnotnull: "ne", isempty: "eq", isnotempty: "ne" }, s = o({}, r, { contains: "contains" }), a = { pageSize: e.noop, page: e.noop, filter: function (e, t, n) { t && ((t = i(t, n)) && (e.$filter = t)) }, sort: function (t, i) { var n = e.map(i, function (e) { var t = e.field.replace(/\./g, "/"); return "desc" === e.dir && (t += " desc"), t }).join(","); n && (t.$orderby = n) }, skip: function (e, t) { t && (e.$skip = t) }, take: function (e, t) { t && (e.$top = t) } }, l = { read: { dataType: "jsonp" } }; o(!0, n.data, { schemas: { odata: { type: "json", data: function (e) { return e.d.results || [e.d] }, total: "d.__count" } }, transports: { odata: { read: { cache: !0, dataType: "jsonp", jsonp: "$callback" }, update: { cache: !0, dataType: "json", contentType: "application/json", type: "PUT" }, create: { cache: !0, dataType: "json", contentType: "application/json", type: "POST" }, destroy: { cache: !0, dataType: "json", type: "DELETE" }, parameterMap: function (e, t, i) { var o, r, s, c; if (e = e || {}, t = t || "read", c = (c = (this.options || l)[t]) ? c.dataType : "json", "read" === t) for (s in o = { $inlinecount: "allpages" }, "json" != c && (o.$format = "json"), e) a[s] ? a[s](o, e[s], i) : o[s] = e[s]; else { if ("json" !== c) throw Error("Only json dataType can be used for " + t + " operation."); if ("destroy" !== t) { for (s in e) "number" == typeof (r = e[s]) && (e[s] = r + ""); o = n.stringify(e) } } return o } } } }), o(!0, n.data, { schemas: { "odata-v4": { type: "json", data: function (t) { return function (e) { for (var t in e) 0 === t.indexOf("@odata") && delete e[t] }(t = e.extend({}, t)), t.value ? t.value : [t] }, total: function (e) { return e["@odata.count"] } } }, transports: { "odata-v4": { read: { cache: !0, dataType: "json" }, update: { cache: !0, dataType: "json", contentType: "application/json;IEEE754Compatible=true", type: "PUT" }, create: { cache: !0, dataType: "json", contentType: "application/json;IEEE754Compatible=true", type: "POST" }, destroy: { cache: !0, dataType: "json", type: "DELETE" }, parameterMap: function (e, t) { var i = n.data.transports.odata.parameterMap(e, t, !0); return "read" == t && (i.$count = !0, delete i.$inlinecount), i } } } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.data.xml.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = e.isArray, n = e.isPlainObject, o = e.map, r = e.each, s = e.extend, a = t.getter, l = t.Class, c = l.extend({ init: function (a) { var l, c, d, u, h = this, f = a.total, p = a.model, m = a.parse, g = a.errors, v = a.serialize, _ = a.data; p && (n(p) && (l = a.modelBase || t.data.Model, p.fields && r(p.fields, function (t, i) { n(i) && i.field ? e.isFunction(i.field) || (i = s(i, { field: h.getter(i.field) })) : i = { field: h.getter(i) }, p.fields[t] = i }), (c = p.id) && ((d = {})[h.xpathToMember(c, !0)] = { field: h.getter(c) }, p.fields = s(d, p.fields), p.id = h.xpathToMember(c)), p = l.define(p)), h.model = p), f && ("string" == typeof f ? (f = h.getter(f), h.total = function (e) { return parseInt(f(e), 10) }) : "function" == typeof f && (h.total = f)), g && ("string" == typeof g ? (g = h.getter(g), h.errors = function (e) { return g(e) || null }) : "function" == typeof g && (h.errors = g)), _ && ("string" == typeof _ ? (_ = h.xpathToMember(_), h.data = function (e) { var t, n = h.evaluate(e, _); return n = i(n) ? n : [n], h.model && p.fields ? (t = new h.model, o(n, function (e) { if (e) { var i, n = {}; for (i in p.fields) n[i] = t._parse(i, p.fields[i].field(e)); return n } })) : n }) : "function" == typeof _ && (h.data = _)), "function" == typeof m && (u = h.parse, h.parse = function (e) { var t = m.call(h, e); return u.call(h, t) }), "function" == typeof v && (h.serialize = v) }, total: function (e) { return this.data(e).length }, errors: function (e) { return e ? e.errors : null }, serialize: function (e) { return e }, parseDOM: function (e) { var t, n, o, r, s, a, l, c = {}, d = e.attributes, u = d.length; for (l = 0; l < u; l++)a = d[l], c["@" + a.nodeName] = a.nodeValue; for (n = e.firstChild; n; n = n.nextSibling)3 === (o = n.nodeType) || 4 === o ? c["#text"] = n.nodeValue : 1 === o && (t = this.parseDOM(n), r = n.nodeName, s = c[r], i(s) ? s.push(t) : s = void 0 !== s ? [s, t] : t, c[r] = s); return c }, evaluate: function (e, t) { for (var n, o, r, s, a, l = t.split("."); n = l.shift();)if (e = e[n], i(e)) { for (o = [], t = l.join("."), a = 0, r = e.length; a < r; a++)s = this.evaluate(e[a], t), s = i(s) ? s : [s], o.push.apply(o, s); return o } return e }, parse: function (t) { var i, n, o = {}; return i = t.documentElement || e.parseXML(t).documentElement, n = this.parseDOM(i), o[i.nodeName] = n, o }, xpathToMember: function (e, t) { return e ? (e = e.replace(/^\//, "").replace(/\//g, ".")).indexOf("@") >= 0 ? e.replace(/\.?(@.*)/, t ? "$1" : '["$1"]') : e.indexOf("text()") >= 0 ? e.replace(/(\.?text\(\))/, t ? "#text" : '["#text"]') : e : "" }, getter: function (e) { return a(this.xpathToMember(e), !0) } }), e.extend(!0, t.data, { XmlDataReader: c, readers: { xml: c } }), window.kendo; var e, t, i, n, o, r, s, a, l, c }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.data.min", ["kendo.core.min", "kendo.data.odata.min", "kendo.data.xml.min"], function () { return function (e, t) { function i(e, t, i, n) { return function (o) { var r, s = {}; for (r in o) s[r] = o[r]; s.field = n ? i + "." + o.field : i, t == ve && e._notifyChange && e._notifyChange(s), e.trigger(t, s) } } function n(t, i) { if (t === i) return !0; var o, r = e.type(t), s = e.type(i); if (r !== s) return !1; if ("date" === r) return t.getTime() === i.getTime(); if ("object" !== r && "array" !== r) return !1; for (o in t) if (!n(t[o], i[o])) return !1; return !0 } function o(e) { this.data = e || [] } function r(e, i) { if (e) { var n = typeof e === pe ? { field: e, dir: i } : e, o = re(n) ? n : n !== t ? [n] : []; return se(o, function (e) { return !!e.dir }) } } function s(e) { if (e && !oe(e)) return !re(e) && e.filters || (e = { logic: "and", filters: re(e) ? e : [e] }), function e(t) { var i, n, o, r, s = t.filters; if (s) for (i = 0, n = s.length; i < n; i++)o = s[i], r = o.operator, r && typeof r === pe && (o.operator = W[r.toLowerCase()] || r), e(o) }(e), e } function a(e, t) { return !e.logic && !t.logic && e.field === t.field && e.value === t.value && e.operator === t.operator } function l(e) { return oe(e = e || {}) ? { logic: "and", filters: [] } : s(e) } function c(e, t) { return t.logic || e.field > t.field ? 1 : e.field < t.field ? -1 : 0 } function d(e, i) { var n = typeof e === pe ? { field: e, dir: i } : e, o = re(n) ? n : n !== t ? [n] : []; return z(o, function (e) { return { field: e.field, dir: e.dir || "asc", aggregates: e.aggregates } }) } function u(e, t) { return e && e.getTime && t && t.getTime ? e.getTime() === t.getTime() : e === t } function h(e, t, i, n, o, r) { var s, a, l, c, d; for (c = (t = t || []).length, s = 0; s < c; s++)a = t[s], l = a.aggregate, d = a.field, e[d] = e[d] || {}, r[d] = r[d] || {}, r[d][l] = r[d][l] || {}, e[d][l] = q[l.toLowerCase()](e[d][l], i, de.accessor(d), n, o, r[d][l]) } function f(e) { return "number" == typeof e && !isNaN(e) } function p(e) { return e && e.getTime } function m(e) { var t, i = e.length, n = Array(i); for (t = 0; t < i; t++)n[t] = e[t].toJSON(); return n } function g(e, t, i, n, o) { var r, s, a, l, c, d = {}; for (l = 0, c = e.length; l < c; l++)for (s in r = e[l], t) (a = o[s]) && a !== s && (d[a] || (d[a] = de.setter(a)), d[a](r, t[s](r)), delete r[s]) } function v(e, t, i, n, o) { var r, s, a, l, c; for (l = 0, c = e.length; l < c; l++)for (s in r = e[l], t) r[s] = i._parse(s, t[s](r)), (a = o[s]) && a !== s && delete r[a] } function _(e, t, i, n, o) { var r, s, a, l; for (s = 0, l = e.length; s < l; s++)r = e[s], (a = n[r.field]) && a != r.field && (r.field = a), r.value = i._parse(r.field, r.value), r.hasSubgroups ? _(r.items, t, i, n, o) : v(r.items, t, i, n, o) } function b(e, t, i, n, o, r) { return function (s) { return (s = e(s)) && !oe(n) && ("[object Array]" === Pe.call(s) || s instanceof He || (s = [s]), i(s, n, new t, o, r)), s || [] } } function w(e) { var t, i, n, o, r, s = []; for (t = 0, i = e.length; t < i; t++)if ((r = e.at(t)).hasSubgroups) s = s.concat(w(r.items)); else for (n = r.items, o = 0; o < n.length; o++)s.push(n.at(o)); return s } function y(e, t, i, n) { for (var o = 0; o < e.length && e[o].data !== t && !k(e[o].data, i, n); o++); } function k(e, t, i) { for (var n = 0, o = e.length; n < o; n++) { if (e[n] && e[n].hasSubgroups) return k(e[n].items, t, i); if (e[n] === t || e[n] === i) return e[n] = i, !0 } } function x(e, i, n, o, r) { var s, a, l, c; for (s = 0, a = e.length; s < a; s++)if ((l = e[s]) && !(l instanceof o)) if (l.hasSubgroups === t || r) { for (c = 0; c < i.length; c++)if (i[c] === l) { e[s] = i.at(c), y(n, i, l, e[s]); break } } else x(l.items, i, n, o, r) } function C(e, t) { var i, n, o; for (i = 0, n = e.length; i < n; i++)if ((o = e.at(i)).uid == t.uid) return e.splice(i, 1), o } function S(e, t) { return t ? D(e, function (e) { return e.uid && e.uid == t.uid || e[t.idField] === t.id && t.id !== t._defaultId }) : -1 } function T(e, t) { return t ? D(e, function (e) { return e.uid == t.uid }) : -1 } function D(e, t) { var i, n; for (i = 0, n = e.length; i < n; i++)if (t(e[i])) return i; return -1 } function A(e, t) { var i, n; return e && !oe(e) ? (i = e[t], n = ne(i) ? i.from || i.field || t : e[t] || t, ue(n) ? t : n) : t } function E(e, t) { var i, n, o, r, s, a = []; for (i = 0, n = e.length; i < n; i++) { for (s in o = {}, r = e[i]) o[s] = r[s]; o.field = A(t.fields, o.field), o.aggregates && re(o.aggregates) && (o.aggregates = E(o.aggregates, t)), a.push(o) } return a } function I(t, i) { var n, o, r, s, a, l, c, d, u, h; for (t = e(t)[0], n = t.options, o = i[0], r = i[1], s = [], a = 0, l = n.length; a < l; a++)u = {}, d = n[a], (c = d.parentNode) === t && (c = null), d.disabled || c && c.disabled || (c && (u.optgroup = c.label), u[o.field] = d.text, h = (h = d.attributes.value) && h.specified ? d.value : d.text, u[r.field] = h, s.push(u)); return s } function M(t, i) { var n, o, r, s, a, l, c, d = e(t)[0].tBodies[0], u = d ? d.rows : [], h = i.length, f = []; for (n = 0, o = u.length; n < o; n++) { for (a = {}, c = !0, s = u[n].cells, r = 0; r < h; r++)"th" !== (l = s[r]).nodeName.toLowerCase() && (c = !1, a[i[r].field] = l.innerHTML); c || f.push(a) } return f } function R(e) { return function () { var t = this._data, i = K.fn[e].apply(this, Fe.call(arguments)); return this._data != t && this._attachBubbleHandlers(), i } } function F(t, i) { function n(e, t) { return e.filter(t).add(e.find(t)) } var o, r, s, a, l, c, d, u, h = e(t).children(), f = [], p = i[0].field, m = i[1] && i[1].field, g = i[2] && i[2].field, v = i[3] && i[3].field; for (o = 0, r = h.length; o < r; o++)s = { _loaded: !0 }, a = h.eq(o), c = a[0].firstChild, u = a.children(), t = u.filter("ul"), u = u.filter(":not(ul)"), (l = a.attr("data-id")) && (s.id = l), c && (s[p] = 3 == c.nodeType ? c.nodeValue : u.text()), m && (s[m] = n(u, "a").attr("href")), v && (s[v] = n(u, "img").attr("src")), g && (d = n(u, ".k-sprite").prop("className"), s[g] = d && e.trim(d.replace("k-sprite", ""))), t.length && (s.items = F(t.eq(0), i)), "true" == a.attr("data-hasChildren") && (s.hasChildren = !0), f.push(s); return f } var z, P, B, L, H, N, O, V, U, W, q, j, G, $, Y, K, Q, X, Z, J, ee, te = e.extend, ie = e.proxy, ne = e.isPlainObject, oe = e.isEmptyObject, re = e.isArray, se = e.grep, ae = e.ajax, le = e.each, ce = e.noop, de = window.kendo, ue = de.isFunction, he = de.Observable, fe = de.Class, pe = "string", me = "function", ge = "destroy", ve = "change", _e = "get", be = "error", we = "requestStart", ye = "progress", ke = "requestEnd", xe = ["create", "read", "update", ge], Ce = function (e) { return e }, Se = de.getter, Te = de.stringify, De = Math, Ae = [].push, Ee = [].join, Ie = [].pop, Me = [].splice, Re = [].shift, Fe = [].slice, ze = [].unshift, Pe = {}.toString, Be = de.support.stableSort, Le = /^\/Date\((.*?)\)\/$/, He = he.extend({ init: function (e, t) { var i = this; i.type = t || B, he.fn.init.call(i), i.length = e.length, i.wrapAll(e, i) }, at: function (e) { return this[e] }, toJSON: function () { var e, t, i = this.length, n = Array(i); for (e = 0; e < i; e++)(t = this[e]) instanceof B && (t = t.toJSON()), n[e] = t; return n }, parent: ce, wrapAll: function (e, t) { var i, n, o = this, r = function () { return o }; for (t = t || [], i = 0, n = e.length; i < n; i++)t[i] = o.wrap(e[i], r); return t }, wrap: function (e, t) { var i = this; return null !== e && "[object Object]" === Pe.call(e) && (e instanceof i.type || e instanceof N || (e = e instanceof B ? e.toJSON() : e, e = new i.type(e)), e.parent = t, e.bind(ve, function (e) { i.trigger(ve, { field: e.field, node: e.node, index: e.index, items: e.items || [this], action: e.node ? e.action || "itemloaded" : "itemchange" }) })), e }, push: function () { var e, t = this.length, i = this.wrapAll(arguments); return e = Ae.apply(this, i), this.trigger(ve, { action: "add", index: t, items: i }), e }, slice: Fe, sort: [].sort, join: Ee, pop: function () { var e = this.length, t = Ie.apply(this); return e && this.trigger(ve, { action: "remove", index: e - 1, items: [t] }), t }, splice: function (e, t, i) { var n, o, r, s = this.wrapAll(Fe.call(arguments, 2)); if ((n = Me.apply(this, [e, t].concat(s))).length) for (this.trigger(ve, { action: "remove", index: e, items: n }), o = 0, r = n.length; o < r; o++)n[o] && n[o].children && n[o].unbind(ve); return i && this.trigger(ve, { action: "add", index: e, items: s }), n }, shift: function () { var e = this.length, t = Re.apply(this); return e && this.trigger(ve, { action: "remove", index: 0, items: [t] }), t }, unshift: function () { var e, t = this.wrapAll(arguments); return e = ze.apply(this, t), this.trigger(ve, { action: "add", index: 0, items: t }), e }, indexOf: function (e) { var t, i; for (t = 0, i = this.length; t < i; t++)if (this[t] === e) return t; return -1 }, forEach: function (e) { for (var t = 0, i = this.length; t < i; t++)e(this[t], t, this) }, map: function (e) { for (var t = 0, i = [], n = this.length; t < n; t++)i[t] = e(this[t], t, this); return i }, reduce: function (e) { var t, i = 0, n = this.length; for (2 == arguments.length ? t = arguments[1] : i < n && (t = this[i++]); i < n; i++)t = e(t, this[i], i, this); return t }, reduceRight: function (e) { var t, i = this.length - 1; for (2 == arguments.length ? t = arguments[1] : i > 0 && (t = this[i--]); i >= 0; i--)t = e(t, this[i], i, this); return t }, filter: function (e) { for (var t, i = 0, n = [], o = this.length; i < o; i++)t = this[i], e(t, i, this) && (n[n.length] = t); return n }, find: function (e) { for (var t, i = 0, n = this.length; i < n; i++)if (t = this[i], e(t, i, this)) return t }, every: function (e) { for (var t, i = 0, n = this.length; i < n; i++)if (t = this[i], !e(t, i, this)) return !1; return !0 }, some: function (e) { for (var t, i = 0, n = this.length; i < n; i++)if (t = this[i], e(t, i, this)) return !0; return !1 }, remove: function (e) { var t = this.indexOf(e); -1 !== t && this.splice(t, 1) }, empty: function () { this.splice(0, this.length) } }); "undefined" != typeof Symbol && Symbol.iterator && !He.prototype[Symbol.iterator] && (He.prototype[Symbol.iterator] = [][Symbol.iterator]), P = He.extend({ init: function (e, t) { he.fn.init.call(this), this.type = t || B; for (var i = 0; i < e.length; i++)this[i] = e[i]; this.length = i, this._parent = ie(function () { return this }, this) }, at: function (e) { var t = this[e]; return t instanceof this.type ? t.parent = this._parent : t = this[e] = this.wrap(t, this._parent), t } }), B = he.extend({ init: function (e) { var t, i, n = this, o = function () { return n }; for (i in he.fn.init.call(this), this._handlers = {}, e) "object" == typeof (t = e[i]) && t && !t.getTime && "_" != i.charAt(0) && (t = n.wrap(t, i, o)), n[i] = t; n.uid = de.guid() }, shouldSerialize: function (e) { return this.hasOwnProperty(e) && "_handlers" !== e && "_events" !== e && typeof this[e] !== me && "uid" !== e }, forEach: function (e) { for (var t in this) this.shouldSerialize(t) && e(this[t], t) }, toJSON: function () { var e, t, i = {}; for (t in this) this.shouldSerialize(t) && (((e = this[t]) instanceof B || e instanceof He) && (e = e.toJSON()), i[t] = e); return i }, get: function (e) { var t = this; return t.trigger(_e, { field: e }), "this" === e ? t : de.getter(e, !0)(t) }, _set: function (e, t) { var i, n, o, r = e.indexOf(".") >= 0; if (r) for (i = e.split("."), n = ""; i.length > 1;) { if (n += i.shift(), (o = de.getter(n, !0)(this)) instanceof B) return o.set(i.join("."), t), r; n += "." } return de.setter(e)(this, t), r }, set: function (e, t) { var i = this, n = !1, o = e.indexOf(".") >= 0, r = de.getter(e, !0)(i); return r !== t && (r instanceof he && this._handlers[e] && (this._handlers[e].get && r.unbind(_e, this._handlers[e].get), r.unbind(ve, this._handlers[e].change)), (n = i.trigger("set", { field: e, value: t })) || (o || (t = i.wrap(t, e, function () { return i })), (!i._set(e, t) || e.indexOf("(") >= 0 || e.indexOf("[") >= 0) && i.trigger(ve, { field: e }))), n }, parent: ce, wrap: function (e, t, n) { var o, r, s, a, l = this, c = Pe.call(e); return null == e || "[object Object]" !== c && "[object Array]" !== c || (s = e instanceof He, a = e instanceof K, "[object Object]" !== c || a || s ? ("[object Array]" === c || s || a) && (s || a || (e = new He(e)), r = i(l, ve, t, !1), e.bind(ve, r), l._handlers[t] = { change: r }) : (e instanceof B || (e = new B(e)), o = i(l, _e, t, !0), e.bind(_e, o), r = i(l, ve, t, !0), e.bind(ve, r), l._handlers[t] = { get: o, change: r }), e.parent = n), e } }), L = { number: function (e) { return de.parseFloat(e) }, date: function (e) { return de.parseDate(e) }, boolean: function (e) { return typeof e === pe ? "true" === e.toLowerCase() : null != e ? !!e : e }, string: function (e) { return null != e ? e + "" : e }, default: function (e) { return e } }, H = { string: "", number: 0, date: new Date, boolean: !1, default: "" }, (N = B.extend({ init: function (i) { var n, o, r = this; if ((!i || e.isEmptyObject(i)) && (i = e.extend({}, r.defaults, i), r._initializers)) for (n = 0; n < r._initializers.length; n++)o = r._initializers[n], i[o] = r.defaults[o](); B.fn.init.call(r, i), r.dirty = !1, r.idField && (r.id = r.get(r.idField), r.id === t && (r.id = r._defaultId)) }, shouldSerialize: function (e) { return B.fn.shouldSerialize.call(this, e) && "uid" !== e && !("id" !== this.idField && "id" === e) && "dirty" !== e && "_accessors" !== e }, _parse: function (e, t) { var i, n = e, o = this.fields || {}; return (e = o[e]) || (e = function (e, t) { var i, n; for (n in e) { if (i = e[n], ne(i) && i.field && i.field === t) return i; if (i === t) return i } return null }(o, n)), e && (!(i = e.parse) && e.type && (i = L[e.type.toLowerCase()])), i ? i(t) : t }, _notifyChange: function (e) { var t = e.action; "add" != t && "remove" != t || (this.dirty = !0) }, editable: function (e) { return !(e = (this.fields || {})[e]) || !1 !== e.editable }, set: function (e, t, i) { var o = this, r = o.dirty; o.editable(e) && (n(t = o._parse(e, t), o.get(e)) || (o.dirty = !0, B.fn.set.call(o, e, t, i) && !r && (o.dirty = r))) }, accept: function (e) { var t, i, n = this, o = function () { return n }; for (t in e) i = e[t], "_" != t.charAt(0) && (i = n.wrap(e[t], t, o)), n._set(t, i); n.idField && (n.id = n.get(n.idField)), n.dirty = !1 }, isNew: function () { return this.id === this._defaultId } })).define = function (e, i) { i === t && (i = e, e = N); var n, o, r, s, a, l, c, d, u = te({ defaults: {} }, i), h = {}, f = u.id, p = []; if (f && (u.idField = f), u.id && delete u.id, f && (u.defaults[f] = u._defaultId = ""), "[object Array]" === Pe.call(u.fields)) { for (l = 0, c = u.fields.length; l < c; l++)typeof (r = u.fields[l]) === pe ? h[r] = {} : r.field && (h[r.field] = r); u.fields = h } for (o in u.fields) r = u.fields[o], s = r.type || "default", a = null, d = o, o = typeof r.field === pe ? r.field : o, r.nullable || "function" == typeof (a = u.defaults[d !== o ? d : o] = r.defaultValue !== t ? r.defaultValue : H[s.toLowerCase()]) && p.push(o), i.id === o && (u._defaultId = a), u.defaults[d !== o ? d : o] = a, r.parse = r.parse || L[s]; return p.length > 0 && (u._initializers = p), (n = e.extend(u)).define = function (e) { return N.define(n, e) }, u.fields && (n.fields = u.fields, n.idField = u.idField), n }, V = te({}, O = { selector: function (e) { return ue(e) ? e : Se(e) }, compare: function (e) { var t = this.selector(e); return function (e, i) { return e = t(e), i = t(i), null == e && null == i ? 0 : null == e ? -1 : null == i ? 1 : e.localeCompare ? e.localeCompare(i) : e > i ? 1 : e < i ? -1 : 0 } }, create: function (e) { var t = e.compare || this.compare(e.field); return "desc" == e.dir ? function (e, i) { return t(i, e, !0) } : t }, combine: function (e) { return function (t, i) { var n, o, r = e[0](t, i); for (n = 1, o = e.length; n < o; n++)r = r || e[n](t, i); return r } } }, { asc: function (e) { var t = this.selector(e); return function (e, i) { var n = t(e), o = t(i); return n && n.getTime && o && o.getTime && (n = n.getTime(), o = o.getTime()), n === o ? e.__position - i.__position : null == n ? -1 : null == o ? 1 : n.localeCompare ? n.localeCompare(o) : n > o ? 1 : -1 } }, desc: function (e) { var t = this.selector(e); return function (e, i) { var n = t(e), o = t(i); return n && n.getTime && o && o.getTime && (n = n.getTime(), o = o.getTime()), n === o ? e.__position - i.__position : null == n ? 1 : null == o ? -1 : o.localeCompare ? o.localeCompare(n) : n < o ? 1 : -1 } }, create: function (e) { return this[e.dir](e.field) } }), z = function (e, t) { var i, n = e.length, o = Array(n); for (i = 0; i < n; i++)o[i] = t(e[i], i, e); return o }, U = function () { function e(e) { return "string" == typeof e && (e = e.replace(/[\r\n]+/g, "")), JSON.stringify(e) } function t(t) { return function (i, n, o) { return n += "", o && (i = "(" + i + " || '').toLowerCase()", n = n.toLowerCase()), t(i, e(n), o) } } function i(t, i, n, o) { if (null != n) { if (typeof n === pe) { var r = Le.exec(n); r ? n = new Date(+r[1]) : o ? (n = e(n.toLowerCase()), i = "((" + i + " || '')+'').toLowerCase()") : n = e(n) } n.getTime && (i = "(" + i + "&&" + i + ".getTime?" + i + ".getTime():" + i + ")", n = n.getTime()) } return i + " " + t + " " + n } function n(e) { var t, i, n, o; for (t = "/^", i = !1, n = 0; n < e.length; ++n) { if (o = e.charAt(n), i) t += "\\" + o; else { if ("~" == o) { i = !0; continue } t += "*" == o ? ".*" : "?" == o ? "." : ".+^$()[]{}|\\/\n\r\u2028\u2029 ".indexOf(o) >= 0 ? "\\" + o : o } i = !1 } return t + "$/" } return { quote: function (t) { return t && t.getTime ? "new Date(" + t.getTime() + ")" : e(t) }, eq: function (e, t, n) { return i("==", e, t, n) }, neq: function (e, t, n) { return i("!=", e, t, n) }, gt: function (e, t, n) { return i(">", e, t, n) }, gte: function (e, t, n) { return i(">=", e, t, n) }, lt: function (e, t, n) { return i("<", e, t, n) }, lte: function (e, t, n) { return i("<=", e, t, n) }, startswith: t(function (e, t) { return e + ".lastIndexOf(" + t + ", 0) == 0" }), doesnotstartwith: t(function (e, t) { return e + ".lastIndexOf(" + t + ", 0) == -1" }), endswith: t(function (e, t) { var i = t ? t.length - 2 : 0; return e + ".indexOf(" + t + ", " + e + ".length - " + i + ") >= 0" }), doesnotendwith: t(function (e, t) { var i = t ? t.length - 2 : 0; return e + ".indexOf(" + t + ", " + e + ".length - " + i + ") < 0" }), contains: t(function (e, t) { return e + ".indexOf(" + t + ") >= 0" }), doesnotcontain: t(function (e, t) { return e + ".indexOf(" + t + ") == -1" }), matches: t(function (e, t) { return n(t = t.substring(1, t.length - 1)) + ".test(" + e + ")" }), doesnotmatch: t(function (e, t) { return "!" + n(t = t.substring(1, t.length - 1)) + ".test(" + e + ")" }), isempty: function (e) { return e + " === ''" }, isnotempty: function (e) { return e + " !== ''" }, isnull: function (e) { return "(" + e + " == null)" }, isnotnull: function (e) { return "(" + e + " != null)" } } }(), o.filterExpr = function (e) { var i, n, r, s, a, l, c = [], d = [], u = [], h = e.filters; for (i = 0, n = h.length; i < n; i++)r = h[i], a = r.field, l = r.operator, r.filters ? (s = o.filterExpr(r), r = s.expression.replace(/__o\[(\d+)\]/g, function (e, t) { return t = +t, "__o[" + (u.length + t) + "]" }).replace(/__f\[(\d+)\]/g, function (e, t) { return t = +t, "__f[" + (d.length + t) + "]" }), u.push.apply(u, s.operators), d.push.apply(d, s.fields)) : (typeof a === me ? (s = "__f[" + d.length + "](d)", d.push(a)) : s = de.expr(a), typeof l === me ? (r = "__o[" + u.length + "](" + s + ", " + U.quote(r.value) + ")", u.push(l)) : r = U[(l || "eq").toLowerCase()](s, r.value, r.ignoreCase === t || r.ignoreCase)), c.push(r); return { expression: "(" + c.join({ and: " && ", or: " || " }[e.logic]) + ")", fields: d, operators: u } }, W = { "==": "eq", equals: "eq", isequalto: "eq", equalto: "eq", equal: "eq", "!=": "neq", ne: "neq", notequals: "neq", isnotequalto: "neq", notequalto: "neq", notequal: "neq", "<": "lt", islessthan: "lt", lessthan: "lt", less: "lt", "<=": "lte", le: "lte", islessthanorequalto: "lte", lessthanequal: "lte", ">": "gt", isgreaterthan: "gt", greaterthan: "gt", greater: "gt", ">=": "gte", isgreaterthanorequalto: "gte", greaterthanequal: "gte", ge: "gte", notsubstringof: "doesnotcontain", isnull: "isnull", isempty: "isempty", isnotempty: "isnotempty" }, o.normalizeFilter = s, o.compareFilters = function e(t, i) { var n, o, r, s, d; if (t = l(t), i = l(i), t.logic !== i.logic) return !1; if (r = (t.filters || []).slice(), s = (i.filters || []).slice(), r.length !== s.length) return !1; for (r = r.sort(c), s = s.sort(c), d = 0; d < r.length; d++)if (n = r[d], o = s[d], n.logic && o.logic) { if (!e(n, o)) return !1 } else if (!a(n, o)) return !1; return !0 }, o.prototype = { toArray: function () { return this.data }, range: function (e, t) { return new o(this.data.slice(e, e + t)) }, skip: function (e) { return new o(this.data.slice(e)) }, take: function (e) { return new o(this.data.slice(0, e)) }, select: function (e) { return new o(z(this.data, e)) }, order: function (e, t) { var i = { dir: t }; return e && (e.compare ? i.compare = e.compare : i.field = e), new o(this.data.slice(0).sort(O.create(i))) }, orderBy: function (e) { return this.order(e, "asc") }, orderByDescending: function (e) { return this.order(e, "desc") }, sort: function (e, t, i) { var n, o, s = r(e, t), a = []; if (i = i || O, s.length) { for (n = 0, o = s.length; n < o; n++)a.push(i.create(s[n])); return this.orderBy({ compare: i.combine(a) }) } return this }, filter: function (e) { var t, i, n, r, a, l, c, d, u = this.data, h = []; if (!(e = s(e)) || 0 === e.filters.length) return this; for (r = o.filterExpr(e), l = r.fields, c = r.operators, a = d = Function("d, __f, __o", "return " + r.expression), (l.length || c.length) && (d = function (e) { return a(e, l, c) }), t = 0, n = u.length; t < n; t++)i = u[t], d(i) && h.push(i); return new o(h) }, group: function (e, t) { e = d(e || []), t = t || this.data; var i, n = new o(this.data); return e.length > 0 && (i = e[0], n = n.groupBy(i).select(function (n) { var r = new o(t).filter([{ field: n.field, operator: "eq", value: n.value, ignoreCase: !1 }]); return { field: n.field, value: n.value, items: e.length > 1 ? new o(n.items).group(e.slice(1), r.toArray()).toArray() : n.items, hasSubgroups: e.length > 1, aggregates: r.aggregate(i.aggregates) } })), n }, groupBy: function (e) { if (oe(e) || !this.data.length) return new o([]); var t, i, n, r, s = e.field, a = this._sortForGrouping(s, e.dir || "asc"), l = de.accessor(s), c = l.get(a[0], s), d = { field: s, value: c, items: [] }, h = [d]; for (n = 0, r = a.length; n < r; n++)t = a[n], i = l.get(t, s), u(c, i) || (d = { field: s, value: c = i, items: [] }, h.push(d)), d.items.push(t); return new o(h) }, _sortForGrouping: function (e, t) { var i, n, r = this.data; if (!Be) { for (i = 0, n = r.length; i < n; i++)r[i].__position = i; for (r = new o(r).sort(e, t, V).toArray(), i = 0, n = r.length; i < n; i++)delete r[i].__position; return r } return this.sort(e, t).toArray() }, aggregate: function (e) { var t, i, n = {}, o = {}; if (e && e.length) for (t = 0, i = this.data.length; t < i; t++)h(n, e, this.data[t], t, i, o); return n } }, q = { sum: function (e, t, i) { var n = i.get(t); return f(e) ? f(n) && (e += n) : e = n, e }, count: function (e) { return (e || 0) + 1 }, average: function (e, i, n, o, r, s) { var a = n.get(i); return s.count === t && (s.count = 0), f(e) ? f(a) && (e += a) : e = a, f(a) && s.count++, o == r - 1 && f(e) && (e /= s.count), e }, max: function (e, t, i) { var n = i.get(t); return f(e) || p(e) || (e = n), e < n && (f(n) || p(n)) && (e = n), e }, min: function (e, t, i) { var n = i.get(t); return f(e) || p(e) || (e = n), e > n && (f(n) || p(n)) && (e = n), e } }, o.process = function (e, i) { i = i || {}; var n, s = new o(e), a = i.group, l = d(a || []).concat(r(i.sort || [])), c = i.filterCallback, u = i.filter, h = i.skip, f = i.take; return u && (s = s.filter(u), c && (s = c(s)), n = s.toArray().length), l && (s = s.sort(l), a && (e = s.toArray())), h !== t && f !== t && (s = s.range(h, f)), a && (s = s.group(a, e)), { total: n, data: s.toArray() } }, j = fe.extend({ init: function (e) { this.data = e.data }, read: function (e) { e.success(this.data) }, update: function (e) { e.success(e.data) }, create: function (e) { e.success(e.data) }, destroy: function (e) { e.success(e.data) } }), G = fe.extend({ init: function (e) { var t, i = this; e = i.options = te({}, i.options, e), le(xe, function (t, i) { typeof e[i] === pe && (e[i] = { url: e[i] }) }), i.cache = e.cache ? $.create(e.cache) : { find: ce, add: ce }, t = e.parameterMap, ue(e.push) && (i.push = e.push), i.push || (i.push = Ce), i.parameterMap = ue(t) ? t : function (e) { var i = {}; return le(e, function (e, n) { e in t && (e = t[e], ne(e) && (n = e.value(n), e = e.key)), i[e] = n }), i } }, options: { parameterMap: Ce }, create: function (e) { return ae(this.setup(e, "create")) }, read: function (i) { var n, o, r = this.cache; i = this.setup(i, "read"), n = i.success || ce, i.error, (o = r.find(i.data)) !== t ? n(o) : (i.success = function (e) { r.add(i.data, e), n(e) }, e.ajax(i)) }, update: function (e) { return ae(this.setup(e, "update")) }, destroy: function (e) { return ae(this.setup(e, ge)) }, setup: function (e, t) { e = e || {}; var i, n = this.options[t], o = ue(n.data) ? n.data(e.data) : n.data; return e = te(!0, {}, n, e), i = te(!0, {}, o, e.data), e.data = this.parameterMap(i, t), ue(e.url) && (e.url = e.url(i)), e } }), ($ = fe.extend({ init: function () { this._store = {} }, add: function (e, i) { e !== t && (this._store[Te(e)] = i) }, find: function (e) { return this._store[Te(e)] }, clear: function () { this._store = {} }, remove: function (e) { delete this._store[Te(e)] } })).create = function (e) { var t = { inmemory: function () { return new $ } }; return ne(e) && ue(e.find) ? e : !0 === e ? new $ : t[e]() }, Y = fe.extend({ init: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p = this; for (t in e = e || {}) i = e[t], p[t] = typeof i === pe ? Se(i) : i; o = e.modelBase || N, ne(p.model) && (p.model = n = o.define(p.model)), r = ie(p.data, p), p._dataAccessFunction = r, p.model && (s = ie(p.groups, p), a = ie(p.serialize, p), l = {}, c = {}, d = {}, u = {}, h = !1, (n = p.model).fields && (le(n.fields, function (e, t) { var i; f = e, ne(t) && t.field ? f = t.field : typeof t === pe && (f = t), ne(t) && t.from && (i = t.from), h = h || i && i !== e || f !== e, c[e] = Se(i || f), d[e] = Se(e), l[i || f] = e, u[e] = i || f }), !e.serialize && h && (p.serialize = b(a, n, g, d, l, u))), p._dataAccessFunction = r, p.data = b(r, n, v, c, l, u), p.groups = b(s, n, _, c, l, u)) }, errors: function (e) { return e ? e.errors : null }, parse: Ce, data: Ce, total: function (e) { return e.length }, groups: Ce, aggregates: function () { return {} }, serialize: function (e) { return e } }), K = he.extend({ init: function (e) { var i, n, o = this; e && (i = e.data), e = o.options = te({}, o.options, e), o._map = {}, o._prefetch = {}, o._data = [], o._pristineData = [], o._ranges = [], o._view = [], o._pristineTotal = 0, o._destroyed = [], o._pageSize = e.pageSize, o._page = e.page || (e.pageSize ? 1 : t), o._sort = r(e.sort), o._filter = s(e.filter), o._group = d(e.group), o._aggregate = e.aggregate, o._total = e.total, o._shouldDetachObservableParents = !0, he.fn.init.call(o), o.transport = Q.create(e, i, o), ue(o.transport.push) && o.transport.push({ pushCreate: ie(o._pushCreate, o), pushUpdate: ie(o._pushUpdate, o), pushDestroy: ie(o._pushDestroy, o) }), null != e.offlineStorage && ("string" == typeof e.offlineStorage ? (n = e.offlineStorage, o._storage = { getItem: function () { return JSON.parse(localStorage.getItem(n)) }, setItem: function (e) { localStorage.setItem(n, Te(o.reader.serialize(e))) } }) : o._storage = e.offlineStorage), o.reader = new de.data.readers[e.schema.type || "json"](e.schema), o.reader.model, o._detachObservableParents(), o._data = o._observe(o._data), o._online = !0, o.bind(["push", be, ve, we, "sync", ke, ye], e) }, options: { data: null, schema: { modelBase: N }, offlineStorage: null, serverSorting: !1, serverPaging: !1, serverFiltering: !1, serverGrouping: !1, serverAggregates: !1, batch: !1 }, clone: function () { return this }, online: function (i) { return i !== t ? this._online != i && (this._online = i, i) ? this.sync() : e.Deferred().resolve().promise() : this._online }, offlineData: function (e) { return null == this.options.offlineStorage ? null : e !== t ? this._storage.setItem(e) : this._storage.getItem() || [] }, _isServerGrouped: function () { var e = this.group() || []; return this.options.serverGrouping && e.length }, _pushCreate: function (e) { this._push(e, "pushCreate") }, _pushUpdate: function (e) { this._push(e, "pushUpdate") }, _pushDestroy: function (e) { this._push(e, "pushDestroy") }, _push: function (e, t) { var i = this._readData(e); i || (i = e), this[t](i) }, _flatData: function (e, t) { if (e) { if (this._isServerGrouped()) return w(e); if (!t) for (var i = 0; i < e.length; i++)e.at(i) } return e }, parent: ce, get: function (e) { var t, i, n = this._flatData(this._data); for (t = 0, i = n.length; t < i; t++)if (n[t].id == e) return n[t] }, getByUid: function (e) { var t, i, n = this._flatData(this._data); if (n) for (t = 0, i = n.length; t < i; t++)if (n[t].uid == e) return n[t] }, indexOf: function (e) { return T(this._data, e) }, at: function (e) { return this._data.at(e) }, data: function (e) { var i, n = this; if (e === t) { if (n._data) for (i = 0; i < n._data.length; i++)n._data.at(i); return n._data } n._detachObservableParents(), n._data = this._observe(e), n._pristineData = e.slice(0), n._storeData(), n._ranges = [], n.trigger("reset"), n._addRange(n._data), n._total = n._data.length, n._pristineTotal = n._total, n._process(n._data) }, view: function (e) { return e === t ? this._view : (this._view = this._observeView(e), t) }, _observeView: function (e) { var t, i = this; return x(e, i._data, i._ranges, i.reader.model || B, i._isServerGrouped()), (t = new P(e, i.reader.model)).parent = function () { return i.parent() }, t }, flatView: function () { var e = this.group() || []; return e.length ? w(this._view) : this._view }, add: function (e) { return this.insert(this._data.length, e) }, _createNewModel: function (e) { return this.reader.model ? new this.reader.model(e) : e instanceof B ? e : new B(e) }, insert: function (e, t) { return t || (t = e, e = 0), t instanceof N || (t = this._createNewModel(t)), this._isServerGrouped() ? this._data.splice(e, 0, this._wrapInEmptyGroup(t)) : this._data.splice(e, 0, t), t }, pushInsert: function (e, t) { var i, n, o, r, s, a; t || (t = e, e = 0), re(t) || (t = [t]), i = [], n = this.options.autoSync, this.options.autoSync = !1; try { for (o = 0; o < t.length; o++)r = t[o], s = this.insert(e, r), i.push(s), a = s.toJSON(), this._isServerGrouped() && (a = this._wrapInEmptyGroup(a)), this._pristineData.push(a), e++ } finally { this.options.autoSync = n } i.length && this.trigger("push", { type: "create", items: i }) }, pushCreate: function (e) { this.pushInsert(this._data.length, e) }, pushUpdate: function (e) { var t, i, n, o, r; for (re(e) || (e = [e]), t = [], i = 0; i < e.length; i++)n = e[i], o = this._createNewModel(n), (r = this.get(o.id)) ? (t.push(r), r.accept(n), r.trigger(ve), this._updatePristineForModel(r, n)) : this.pushCreate(n); t.length && this.trigger("push", { type: "update", items: t }) }, pushDestroy: function (e) { var t = this._removeItems(e); t.length && this.trigger("push", { type: "destroy", items: t }) }, _removeItems: function (e) { var t, i, n, o, r, s; re(e) || (e = [e]), t = [], i = this.options.autoSync, this.options.autoSync = !1; try { for (n = 0; n < e.length; n++)o = e[n], r = this._createNewModel(o), s = !1, this._eachItem(this._data, function (e) { var i, n; for (i = 0; i < e.length; i++)if ((n = e.at(i)).id === r.id) { t.push(n), e.splice(i, 1), s = !0; break } }), s && (this._removePristineForModel(r), this._destroyed.pop()) } finally { this.options.autoSync = i } return t }, remove: function (e) { var t, i = this, n = i._isServerGrouped(); return this._eachItem(i._data, function (o) { if ((t = C(o, e)) && n) return t.isNew && t.isNew() || i._destroyed.push(t), !0 }), this._removeModelFromRanges(e), this._updateRangesLength(), e }, destroyed: function () { return this._destroyed }, created: function () { var e, t, i = [], n = this._flatData(this._data); for (e = 0, t = n.length; e < t; e++)n[e].isNew && n[e].isNew() && i.push(n[e]); return i }, updated: function () { var e, t, i = [], n = this._flatData(this._data); for (e = 0, t = n.length; e < t; e++)n[e].isNew && !n[e].isNew() && n[e].dirty && i.push(n[e]); return i }, sync: function () { var t, i = this, n = [], o = [], r = i._destroyed, s = e.Deferred().resolve().promise(); if (i.online()) { if (!i.reader.model) return s; n = i.created(), o = i.updated(), t = [], i.options.batch && i.transport.submit ? t = i._sendSubmit(n, o, r) : (t.push.apply(t, i._send("create", n)), t.push.apply(t, i._send("update", o)), t.push.apply(t, i._send("destroy", r))), s = e.when.apply(null, t).then(function () { var e, t; for (e = 0, t = arguments.length; e < t; e++)arguments[e] && i._accept(arguments[e]); i._storeData(!0), i._change({ action: "sync" }), i.trigger("sync") }) } else i._storeData(!0), i._change({ action: "sync" }); return s }, cancelChanges: function (e) { var t = this; e instanceof de.data.Model ? t._cancelModel(e) : (t._destroyed = [], t._detachObservableParents(), t._data = t._observe(t._pristineData), t.options.serverPaging && (t._total = t._pristineTotal), t._ranges = [], t._addRange(t._data), t._change(), t._markOfflineUpdatesAsDirty()) }, _markOfflineUpdatesAsDirty: function () { var e = this; null != e.options.offlineStorage && e._eachItem(e._data, function (e) { var t, i; for (t = 0; t < e.length; t++)"update" != (i = e.at(t)).__state__ && "create" != i.__state__ || (i.dirty = !0) }) }, hasChanges: function () { var e, t, i = this._flatData(this._data); if (this._destroyed.length) return !0; for (e = 0, t = i.length; e < t; e++)if (i[e].isNew && i[e].isNew() || i[e].dirty) return !0; return !1 }, _accept: function (t) { var i, n = this, o = t.models, r = t.response, s = 0, a = n._isServerGrouped(), l = n._pristineData, c = t.type; if (n.trigger(ke, { response: r, type: c }), r && !oe(r)) { if (r = n.reader.parse(r), n._handleCustomErrors(r)) return; r = n.reader.data(r), re(r) || (r = [r]) } else r = e.map(o, function (e) { return e.toJSON() }); for ("destroy" === c && (n._destroyed = []), s = 0, i = o.length; s < i; s++)"destroy" !== c ? (o[s].accept(r[s]), "create" === c ? l.push(a ? n._wrapInEmptyGroup(o[s]) : r[s]) : "update" === c && n._updatePristineForModel(o[s], r[s])) : n._removePristineForModel(o[s]) }, _updatePristineForModel: function (e, t) { this._executeOnPristineForModel(e, function (e, i) { de.deepExtend(i[e], t) }) }, _executeOnPristineForModel: function (e, t) { this._eachPristineItem(function (i) { var n = S(i, e); if (n > -1) return t(n, i), !0 }) }, _removePristineForModel: function (e) { this._executeOnPristineForModel(e, function (e, t) { t.splice(e, 1) }) }, _readData: function (e) { var t = this._isServerGrouped() ? this.reader.groups : this.reader.data; return t.call(this.reader, e) }, _eachPristineItem: function (e) { this._eachItem(this._pristineData, e) }, _eachItem: function (e, t) { e && e.length && (this._isServerGrouped() ? function e(t, i) { for (var n = 0, o = t.length; n < o; n++)if (t[n].hasSubgroups) { if (e(t[n].items, i)) return !0 } else if (i(t[n].items, t[n])) return !0 }(e, t) : t(e)) }, _pristineForModel: function (e) { var t, i; return this._eachPristineItem(function (n) { if ((i = S(n, e)) > -1) return t = n[i], !0 }), t }, _cancelModel: function (e) { var t = this._pristineForModel(e); this._eachItem(this._data, function (i) { var n = T(i, e); n >= 0 && (!t || e.isNew() && !t.__state__ ? i.splice(n, 1) : (i[n].accept(t), "update" == t.__state__ && (i[n].dirty = !0))) }) }, _submit: function (t, i) { var n = this; n.trigger(we, { type: "submit" }), n.trigger(ye), n.transport.submit(te({ success: function (i, n) { var o = e.grep(t, function (e) { return e.type == n })[0]; o && o.resolve({ response: i, models: o.models, type: n }) }, error: function (e, i, o) { for (var r = 0; r < t.length; r++)t[r].reject(e); n.error(e, i, o) } }, i)) }, _sendSubmit: function (t, i, n) { var o = this, r = []; return o.options.batch && (t.length && r.push(e.Deferred(function (e) { e.type = "create", e.models = t })), i.length && r.push(e.Deferred(function (e) { e.type = "update", e.models = i })), n.length && r.push(e.Deferred(function (e) { e.type = "destroy", e.models = n })), o._submit(r, { data: { created: o.reader.serialize(m(t)), updated: o.reader.serialize(m(i)), destroyed: o.reader.serialize(m(n)) } })), r }, _promise: function (t, i, n) { var o = this; return e.Deferred(function (e) { o.trigger(we, { type: n }), o.trigger(ye), o.transport[n].call(o.transport, te({ success: function (t) { e.resolve({ response: t, models: i, type: n }) }, error: function (t, i, n) { e.reject(t), o.error(t, i, n) } }, t)) }).promise() }, _send: function (e, t) { var i, n, o = this, r = [], s = o.reader.serialize(m(t)); if (o.options.batch) t.length && r.push(o._promise({ data: { models: s } }, t, e)); else for (i = 0, n = t.length; i < n; i++)r.push(o._promise({ data: s[i] }, [t[i]], e)); return r }, read: function (t) { var i = this, n = i._params(t), o = e.Deferred(); return i._queueRequest(n, function () { var e = i.trigger(we, { type: "read" }); e ? (i._dequeueRequest(), o.resolve(e)) : (i.trigger(ye), i._ranges = [], i.trigger("reset"), i.online() ? i.transport.read({ data: n, success: function (e) { i._ranges = [], i.success(e, n), o.resolve() }, error: function () { var e = Fe.call(arguments); i.error.apply(i, e), o.reject.apply(o, e) } }) : null != i.options.offlineStorage && (i.success(i.offlineData(), n), o.resolve())) }), o.promise() }, _readAggregates: function (e) { return this.reader.aggregates(e) }, success: function (e) { var i, n, o, r, s, a, l, c = this, d = c.options; if (c.trigger(ke, { response: e, type: "read" }), c.online()) { if (e = c.reader.parse(e), c._handleCustomErrors(e)) return c._dequeueRequest(), t; c._total = c.reader.total(e), c._aggregate && d.serverAggregates && (c._aggregateResult = c._readAggregates(e)), e = c._readData(e), c._destroyed = [] } else { for (e = c._readData(e), i = [], n = {}, o = c.reader.model, r = o ? o.idField : "id", s = 0; s < this._destroyed.length; s++)a = this._destroyed[s][r], n[a] = a; for (s = 0; s < e.length; s++)l = e[s], "destroy" == l.__state__ ? n[l[r]] || this._destroyed.push(this._createNewModel(l)) : i.push(l); e = i, c._total = e.length } c._pristineTotal = c._total, c._pristineData = e.slice(0), c._detachObservableParents(), c._data = c._observe(e), c._markOfflineUpdatesAsDirty(), c._storeData(), c._addRange(c._data), c._process(c._data), c._dequeueRequest() }, _detachObservableParents: function () { if (this._data && this._shouldDetachObservableParents) for (var e = 0; e < this._data.length; e++)this._data[e].parent && (this._data[e].parent = ce) }, _storeData: function (e) { var t, i, n, o, r = this._isServerGrouped(), s = this.reader.model; if (null != this.options.offlineStorage) { for (t = function e(t) { var i, n, o, a = []; for (i = 0; i < t.length; i++)n = t.at(i), o = n.toJSON(), r && n.items ? o.items = e(n.items) : (o.uid = n.uid, s && (n.isNew() ? o.__state__ = "create" : n.dirty && (o.__state__ = "update"))), a.push(o); return a }(this._data), i = [], n = 0; n < this._destroyed.length; n++)(o = this._destroyed[n].toJSON()).__state__ = "destroy", i.push(o); this.offlineData(t.concat(i)), e && (this._pristineData = this._readData(t)) } }, _addRange: function (e) { var t = this, i = t._skip || 0, n = i + t._flatData(e, !0).length; t._ranges.push({ start: i, end: n, data: e, timestamp: (new Date).getTime() }), t._ranges.sort(function (e, t) { return e.start - t.start }) }, error: function (e, t, i) { this._dequeueRequest(), this.trigger(ke, {}), this.trigger(be, { xhr: e, status: t, errorThrown: i }) }, _params: function (e) { var t = this, i = te({ take: t.take(), skip: t.skip(), page: t.page(), pageSize: t.pageSize(), sort: t._sort, filter: t._filter, group: t._group, aggregate: t._aggregate }, e); return t.options.serverPaging || (delete i.take, delete i.skip, delete i.page, delete i.pageSize), t.options.serverGrouping ? t.reader.model && i.group && (i.group = E(i.group, t.reader.model)) : delete i.group, t.options.serverFiltering ? t.reader.model && i.filter && (i.filter = function e(t, i) { var n, o, r, s = {}; for (r in t) "filters" !== r && (s[r] = t[r]); if (t.filters) for (s.filters = [], n = 0, o = t.filters.length; n < o; n++)s.filters[n] = e(t.filters[n], i); else s.field = A(i.fields, s.field); return s }(i.filter, t.reader.model)) : delete i.filter, t.options.serverSorting ? t.reader.model && i.sort && (i.sort = E(i.sort, t.reader.model)) : delete i.sort, t.options.serverAggregates ? t.reader.model && i.aggregate && (i.aggregate = E(i.aggregate, t.reader.model)) : delete i.aggregate, i }, _queueRequest: function (e, i) { var n = this; n._requestInProgress ? n._pending = { callback: ie(i, n), options: e } : (n._requestInProgress = !0, n._pending = t, i()) }, _dequeueRequest: function () { var e = this; e._requestInProgress = !1, e._pending && e._queueRequest(e._pending.options, e._pending.callback) }, _handleCustomErrors: function (e) { if (this.reader.errors) { var t = this.reader.errors(e); if (t) return this.trigger(be, { xhr: null, status: "customerror", errorThrown: "custom error", errors: t }), !0 } return !1 }, _shouldWrap: function (e) { var t = this.reader.model; return !(!t || !e.length || e[0] instanceof t) }, _observe: function (e) { var t, i = this, n = i.reader.model; return i._shouldDetachObservableParents = !0, e instanceof He ? (i._shouldDetachObservableParents = !1, i._shouldWrap(e) && (e.type = i.reader.model, e.wrapAll(e, e))) : (t = i.pageSize() && !i.options.serverPaging ? P : He, (e = new t(e, i.reader.model)).parent = function () { return i.parent() }), i._isServerGrouped() && function e(t, i) { var n, o, r; if (i) for (n = 0, o = t.length; n < o; n++)r = t.at(n), r.hasSubgroups ? e(r.items, i) : r.items = new P(r.items, i) }(e, n), i._changeHandler && i._data && i._data instanceof He ? i._data.unbind(ve, i._changeHandler) : i._changeHandler = ie(i._change, i), e.bind(ve, i._changeHandler) }, _updateTotalForAction: function (e, t) { var i = this, n = parseInt(i._total, 10); f(i._total) || (n = parseInt(i._pristineTotal, 10)), "add" === e ? n += t.length : "remove" === e ? n -= t.length : "itemchange" === e || "sync" === e || i.options.serverPaging ? "sync" === e && (n = i._pristineTotal = parseInt(i._total, 10)) : n = i._pristineTotal, i._total = n }, _change: function (e) { var t, i, n, o = this, r = e ? e.action : ""; if ("remove" === r) for (t = 0, i = e.items.length; t < i; t++)e.items[t].isNew && e.items[t].isNew() || o._destroyed.push(e.items[t]); !o.options.autoSync || "add" !== r && "remove" !== r && "itemchange" !== r ? (o._updateTotalForAction(r, e ? e.items : []), o._process(o._data, e)) : (n = function (t) { "sync" === t.action && (o.unbind("change", n), o._updateTotalForAction(r, e.items)) }, o.first("change", n), o.sync()) }, _calculateAggregates: function (e, t) { t = t || {}; var i = new o(e), n = t.aggregate, r = t.filter; return r && (i = i.filter(r)), i.aggregate(n) }, _process: function (e, i) { var n, o = this, r = {}; !0 !== o.options.serverPaging && (r.skip = o._skip, r.take = o._take || o._pageSize, r.skip === t && o._page !== t && o._pageSize !== t && (r.skip = (o._page - 1) * o._pageSize)), !0 !== o.options.serverSorting && (r.sort = o._sort), !0 !== o.options.serverFiltering && (r.filter = o._filter), !0 !== o.options.serverGrouping && (r.group = o._group), !0 !== o.options.serverAggregates && (r.aggregate = o._aggregate, o._aggregateResult = o._calculateAggregates(e, r)), n = o._queryProcess(e, r), o.view(n.data), n.total === t || o.options.serverFiltering || (o._total = n.total), (i = i || {}).items = i.items || o._view, o.trigger(ve, i) }, _queryProcess: function (e, t) { return o.process(e, t) }, _mergeState: function (e) { var i = this; return e !== t && (i._pageSize = e.pageSize, i._page = e.page, i._sort = e.sort, i._filter = e.filter, i._group = e.group, i._aggregate = e.aggregate, i._skip = i._currentRangeStart = e.skip, i._take = e.take, i._skip === t && (i._skip = i._currentRangeStart = i.skip(), e.skip = i.skip()), i._take === t && i._pageSize !== t && (i._take = i._pageSize, e.take = i._take), e.sort && (i._sort = e.sort = r(e.sort)), e.filter && (i._filter = e.filter = s(e.filter)), e.group && (i._group = e.group = d(e.group)), e.aggregate && (i._aggregate = e.aggregate = function (e) { return re(e) ? e : [e] }(e.aggregate))), e }, query: function (i) { var n, o, r = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates; return r || (this._data === t || 0 === this._data.length) && !this._destroyed.length ? this.read(this._mergeState(i)) : ((o = this.trigger(we, { type: "read" })) || (this.trigger(ye), n = this._queryProcess(this._data, this._mergeState(i)), this.options.serverFiltering || (this._total = n.total !== t ? n.total : this._data.length), this._aggregateResult = this._calculateAggregates(this._data, i), this.view(n.data), this.trigger(ke, { type: "read" }), this.trigger(ve, { items: n.data })), e.Deferred().resolve(o).promise()) }, fetch: function (e) { var t = this; return this._query().then(function (i) { !0 !== i && ue(e) && e.call(t) }) }, _query: function (e) { var t = this; return t.query(te({}, { page: t.page(), pageSize: t.pageSize(), sort: t.sort(), filter: t.filter(), group: t.group(), aggregate: t.aggregate() }, e)) }, next: function (e) { var t = this, i = t.page(), n = t.total(); if (e = e || {}, i && !(n && i + 1 > t.totalPages())) return t._skip = t._currentRangeStart = i * t.take(), i += 1, e.page = i, t._query(e), i }, prev: function (e) { var t = this, i = t.page(); if (e = e || {}, i && 1 !== i) return t._skip = t._currentRangeStart = t._skip - t.take(), i -= 1, e.page = i, t._query(e), i }, page: function (e) { var i, n = this; return e !== t ? (e = De.max(De.min(De.max(e, 1), n.totalPages()), 1), n._query({ page: e }), t) : (i = n.skip()) !== t ? De.round((i || 0) / (n.take() || 1)) + 1 : t }, pageSize: function (e) { return e !== t ? (this._query({ pageSize: e, page: 1 }), t) : this.take() }, sort: function (e) { return e !== t ? (this._query({ sort: e }), t) : this._sort }, filter: function (e) { var i = this; return e === t ? i._filter : (i.trigger("reset"), i._query({ filter: e, page: 1 }), t) }, group: function (e) { return e !== t ? (this._query({ group: e }), t) : this._group }, total: function () { return parseInt(this._total || 0, 10) }, aggregate: function (e) { return e !== t ? (this._query({ aggregate: e }), t) : this._aggregate }, aggregates: function () { var e = this._aggregateResult; return oe(e) && (e = this._emptyAggregates(this.aggregate())), e }, _emptyAggregates: function (e) { var t, i, n = {}; if (!oe(e)) for (t = {}, re(e) || (e = [e]), i = 0; i < e.length; i++)t[e[i].aggregate] = 0, n[e[i].field] = t; return n }, _wrapInEmptyGroup: function (e) { var t, i, n, o = this.group(); for (n = o.length - 1, 0; n >= 0; n--)i = o[n], t = { value: e.get(i.field), field: i.field, items: t ? [t] : [e], hasSubgroups: !!t, aggregates: this._emptyAggregates(i.aggregates) }; return t }, totalPages: function () { var e = this, t = e.pageSize() || e.total(); return De.ceil((e.total() || 0) / t) }, inRange: function (e, t) { var i = this, n = De.min(e + t, i.total()); return !i.options.serverPaging && i._data.length > 0 || i._findRange(e, n).length > 0 }, lastRange: function () { var e = this._ranges; return e[e.length - 1] || { start: 0, end: 0, data: [] } }, firstItemUid: function () { var e = this._ranges; return e.length && e[0].data.length && e[0].data[0].uid }, enableRequestsInProgress: function () { this._skipRequestsInProgress = !1 }, _timeStamp: function () { return (new Date).getTime() }, range: function (e, i) { var n, o, r, s, a, l, c, d; if (this._currentRequestTimeStamp = this._timeStamp(), this._skipRequestsInProgress = !0, e = De.min(e || 0, this.total()), n = this, o = De.max(De.floor(e / i), 0) * i, r = De.min(o + i, n.total()), (s = n._findRange(e, De.min(e + i, n.total()))).length) { n._pending = t, n._skip = e > n.skip() ? De.min(r, (n.totalPages() - 1) * n.take()) : o, n._currentRangeStart = e, n._take = i, a = n.options.serverPaging, l = n.options.serverSorting, c = n.options.serverFiltering, d = n.options.serverAggregates; try { n.options.serverPaging = !0, n._isServerGrouped() || n.group() && n.group().length || (n.options.serverSorting = !0), n.options.serverFiltering = !0, n.options.serverPaging = !0, n.options.serverAggregates = !0, a && (n._detachObservableParents(), n._data = s = n._observe(s)), n._process(s) } finally { n.options.serverPaging = a, n.options.serverSorting = l, n.options.serverFiltering = c, n.options.serverAggregates = d } } else i !== t && (n._rangeExists(o, r) ? o < e && n.prefetch(r, i, function () { n.range(e, i) }) : n.prefetch(o, i, function () { e > o && r < n.total() && !n._rangeExists(r, De.min(r + i, n.total())) ? n.prefetch(r, i, function () { n.range(e, i) }) : n.range(e, i) })) }, _findRange: function (e, i) { var n, o, s, a, l, c, u, h, f, p, m, g, v = this, _ = v._ranges, b = [], w = v.options, y = w.serverSorting || w.serverPaging || w.serverFiltering || w.serverGrouping || w.serverAggregates; for (o = 0, m = _.length; o < m; o++)if (n = _[o], e >= n.start && e <= n.end) { for (p = 0, s = o; s < m; s++)if (n = _[s], (f = v._flatData(n.data, !0)).length && e + p >= n.start && (c = n.data, u = n.end, y || (g = d(v.group() || []).concat(r(v.sort() || [])), h = v._queryProcess(n.data, { sort: g, filter: v.filter() }), f = c = h.data, h.total !== t && (u = h.total)), a = 0, e + p > n.start && (a = e + p - n.start), l = f.length, u > i && (l -= u - i), p += l - a, b = v._mergeGroups(b, c, a, l), i <= n.end && p == i - e)) return b; break } return [] }, _mergeGroups: function (e, t, i, n) { if (this._isServerGrouped()) { var o, r = t.toJSON(); return e.length && (o = e[e.length - 1]), function e(t, i, n, o) { for (var r, s, a, l = 0; i.length && o && (r = i[l], s = r.items, a = s.length, t && t.field === r.field && t.value === r.value ? (t.hasSubgroups && t.items.length ? e(t.items[t.items.length - 1], r.items, n, o) : (s = s.slice(n, n + o), t.items = t.items.concat(s)), i.splice(l--, 1)) : r.hasSubgroups && s.length ? (e(r, s, n, o), r.items.length || i.splice(l--, 1)) : (s = s.slice(n, n + o), r.items = s, r.items.length || i.splice(l--, 1)), 0 === s.length ? n -= a : (n = 0, o -= s.length), !(++l >= i.length));); l < i.length && i.splice(l, i.length - l) }(o, r, i, n), e.concat(r) } return e.concat(t.slice(i, n)) }, skip: function () { var e = this; return e._skip === t ? e._page !== t ? (e._page - 1) * (e.take() || 1) : t : e._skip }, currentRangeStart: function () { return this._currentRangeStart || 0 }, take: function () { return this._take || this._pageSize }, _prefetchSuccessHandler: function (e, t, i, n) { var o = this, r = o._timeStamp(); return function (s) { var a, l, c, d = !1, u = { start: e, end: t, data: [], timestamp: o._timeStamp() }; if (o._dequeueRequest(), o.trigger(ke, { response: s, type: "read" }), s = o.reader.parse(s), (c = o._readData(s)).length) { for (a = 0, l = o._ranges.length; a < l; a++)if (o._ranges[a].start === e) { d = !0, u = o._ranges[a]; break } d || o._ranges.push(u) } u.data = o._observe(c), u.end = u.start + o._flatData(u.data, !0).length, o._ranges.sort(function (e, t) { return e.start - t.start }), o._total = o.reader.total(s), (n || r >= o._currentRequestTimeStamp || !o._skipRequestsInProgress) && (i && c.length ? i() : o.trigger(ve, {})) } }, prefetch: function (e, t, i) { var n = this, o = De.min(e + t, n.total()), r = { take: t, skip: e, page: e / t + 1, pageSize: t, sort: n._sort, filter: n._filter, group: n._group, aggregate: n._aggregate }; n._rangeExists(e, o) ? i && i() : (clearTimeout(n._timeout), n._timeout = setTimeout(function () { n._queueRequest(r, function () { n.trigger(we, { type: "read" }) ? n._dequeueRequest() : n.transport.read({ data: n._params(r), success: n._prefetchSuccessHandler(e, o, i), error: function () { var e = Fe.call(arguments); n.error.apply(n, e) } }) }) }, 100)) }, _multiplePrefetch: function (e, t, i) { var n = this, o = De.min(e + t, n.total()), r = { take: t, skip: e, page: e / t + 1, pageSize: t, sort: n._sort, filter: n._filter, group: n._group, aggregate: n._aggregate }; n._rangeExists(e, o) ? i && i() : n.trigger(we, { type: "read" }) || n.transport.read({ data: n._params(r), success: n._prefetchSuccessHandler(e, o, i, !0) }) }, _rangeExists: function (e, t) { var i, n, o = this._ranges; for (i = 0, n = o.length; i < n; i++)if (o[i].start <= e && o[i].end >= t) return !0; return !1 }, _removeModelFromRanges: function (e) { var t, i, n, o; for (n = 0, o = this._ranges.length; n < o && (i = this._ranges[n], this._eachItem(i.data, function (i) { C(i, e) && (t = !0) }), !t); n++); }, _updateRangesLength: function () { var e, t, i, n, o = 0; for (i = 0, n = this._ranges.length; i < n; i++)(e = this._ranges[i]).start = e.start - o, t = this._flatData(e.data, !0).length, o = e.end - t, e.end = e.start + t } }), (Q = {}).create = function (t, i, n) { var o, r = t.transport ? e.extend({}, t.transport) : null; return r ? (r.read = typeof r.read === pe ? { url: r.read } : r.read, "jsdo" === t.type && (r.dataSource = n), t.type && (de.data.transports = de.data.transports || {}, de.data.schemas = de.data.schemas || {}, de.data.transports[t.type] ? ne(de.data.transports[t.type]) ? r = te(!0, {}, de.data.transports[t.type], r) : o = new de.data.transports[t.type](te(r, { data: i })) : de.logToConsole("Unknown DataSource transport type '" + t.type + "'.\nVerify that registration scripts for this type are included after Kendo UI on the page.", "warn"), t.schema = te(!0, {}, de.data.schemas[t.type], t.schema)), o || (o = ue(r.read) ? r : new G(r))) : o = new j({ data: t.data || [] }), o }, K.create = function (e) { (re(e) || e instanceof He) && (e = { data: e }); var i, n, o, r = e || {}, s = r.data, a = r.fields, l = r.table, c = r.select, d = {}; if (s || !a || r.transport || (l ? s = M(l, a) : c && (s = I(c, a), r.group === t && s[0] && s[0].optgroup !== t && (r.group = "optgroup"))), de.data.Model && a && (!r.schema || !r.schema.model)) { for (i = 0, n = a.length; i < n; i++)(o = a[i]).type && (d[o.field] = o); oe(d) || (r.schema = te(!0, r.schema, { model: { fields: d } })) } return r.data = s, c = null, r.select = null, l = null, r.table = null, r instanceof K ? r : new K(r) }, X = N.define({ idField: "id", init: function (e) { var t = this, i = t.hasChildren || e && e.hasChildren, n = "items", o = {}; de.data.Model.fn.init.call(t, e), typeof t.children === pe && (n = t.children), o = { schema: { data: n, model: { hasChildren: i, id: t.idField, fields: t.fields } } }, typeof t.children !== pe && te(o, t.children), o.data = e, i || (i = o.schema.data), typeof i === pe && (i = de.getter(i)), ue(i) && (t.hasChildren = !!i.call(t, t)), t._childrenOptions = o, t.hasChildren && t._initChildren(), t._loaded = !(!e || !e._loaded) }, _initChildren: function () { var e, t, i, n = this; n.children instanceof Z || (e = n.children = new Z(n._childrenOptions), t = e.transport, i = t.parameterMap, t.parameterMap = function (e, t) { return e[n.idField || "id"] = n.id, i && (e = i(e, t)), e }, e.parent = function () { return n }, e.bind(ve, function (e) { e.node = e.node || n, n.trigger(ve, e) }), e.bind(be, function (e) { var t = n.parent(); t && (e.node = e.node || n, t.trigger(be, e)) }), n._updateChildrenField()) }, append: function (e) { this._initChildren(), this.loaded(!0), this.children.add(e) }, hasChildren: !1, level: function () { for (var e = this.parentNode(), t = 0; e && e.parentNode;)t++, e = e.parentNode ? e.parentNode() : null; return t }, _updateChildrenField: function () { var e = this._childrenOptions.schema.data; this[e || "items"] = this.children.data() }, _childrenLoaded: function () { this._loaded = !0, this._updateChildrenField() }, load: function () { var i, n, o = {}, r = "_query"; return this.hasChildren ? (this._initChildren(), i = this.children, o[this.idField || "id"] = this.id, this._loaded || (i._data = t, r = "read"), i.one(ve, ie(this._childrenLoaded, this)), this._matchFilter && (o.filter = { field: "_matchFilter", operator: "eq", value: !0 }), n = i[r](o)) : this.loaded(!0), n || e.Deferred().resolve().promise() }, parentNode: function () { var e = this.parent(); return e.parent() }, loaded: function (e) { return e === t ? this._loaded : (this._loaded = e, t) }, shouldSerialize: function (e) { return N.fn.shouldSerialize.call(this, e) && "children" !== e && "_loaded" !== e && "hasChildren" !== e && "_childrenOptions" !== e } }), (Z = K.extend({ init: function (e) { var t = X.define({ children: e }); e.filter && (this._hierarchicalFilter = e.filter, e.filter = null), K.fn.init.call(this, te(!0, {}, { schema: { modelBase: t, model: t } }, e)), this._attachBubbleHandlers() }, _attachBubbleHandlers: function () { var e = this; e._data.bind(be, function (t) { e.trigger(be, t) }) }, read: function (e) { var t = K.fn.read.call(this, e); return this._hierarchicalFilter && this.filter(this._hierarchicalFilter), t }, remove: function (e) { var t, i = e.parentNode(), n = this; return i && i._initChildren && (n = i.children), t = K.fn.remove.call(n, e), i && !n.data().length && (i.hasChildren = !1), t }, success: R("success"), data: R("data"), insert: function (e, t) { var i = this.parent(); return i && i._initChildren && (i.hasChildren = !0, i._initChildren()), K.fn.insert.call(this, e, t) }, filter: function (e) { return e === t ? this._filter : (this.options.serverFiltering || (this._markHierarchicalQuery(e), e = { logic: "or", filters: [e, { field: "_matchFilter", operator: "equals", value: !0 }] }), this.trigger("reset"), this._query({ filter: e, page: 1 }), t) }, _markHierarchicalQuery: function (e) { var i, n, r, a, l; return (e = s(e)) && 0 !== e.filters.length ? (i = o.filterExpr(e), r = i.fields, a = i.operators, n = l = Function("d, __f, __o", "return " + i.expression), (r.length || a.length) && (l = function (e) { return n(e, r, a) }), this._updateHierarchicalFilter(l), t) : this }, _updateHierarchicalFilter: function (e) { var t, i, n = this._data, o = !1; for (i = 0; i < n.length; i++)(t = n[i]).hasChildren ? (t._matchFilter = t.children._updateHierarchicalFilter(e), t._matchFilter || (t._matchFilter = e(t))) : t._matchFilter = e(t), t._matchFilter && (o = !0); return o }, _find: function (e, t) { var i, n, o, r, s = this._data; if (s) { if (o = K.fn[e].call(this, t)) return o; for (s = this._flatData(this._data), i = 0, n = s.length; i < n; i++)if ((r = s[i].children) instanceof Z && (o = r[e](t))) return o } }, get: function (e) { return this._find("get", e) }, getByUid: function (e) { return this._find("getByUid", e) } })).create = function (e) { var t = (e = e && e.push ? { data: e } : e) || {}, i = t.data, n = t.fields, o = t.list; return i && i._dataSource ? i._dataSource : (i || !n || t.transport || o && (i = F(o, n)), t.data = i, t instanceof Z ? t : new Z(t)) }, J = de.Observable.extend({ init: function (e, t, i) { de.Observable.fn.init.call(this), this._prefetching = !1, this.dataSource = e, this.prefetch = !i; var n = this; e.bind("change", function () { n._change() }), e.bind("reset", function () { n._reset() }), this._syncWithDataSource(), this.setViewSize(t) }, setViewSize: function (e) { this.viewSize = e, this._recalculate() }, at: function (e) { var i = this.pageSize, n = !0; return e >= this.total() ? (this.trigger("endreached", { index: e }), null) : this.useRanges ? this.useRanges ? ((e < this.dataOffset || e >= this.skip + i) && (n = this.range(Math.floor(e / i) * i)), e === this.prefetchThreshold && this._prefetch(), e === this.midPageThreshold ? this.range(this.nextMidRange, !0) : e === this.nextPageThreshold ? this.range(this.nextFullRange) : e === this.pullBackThreshold && this.range(this.offset === this.skip ? this.previousMidRange : this.previousFullRange), n ? this.dataSource.at(e - this.dataOffset) : (this.trigger("endreached", { index: e }), null)) : t : this.dataSource.view()[e] }, indexOf: function (e) { return this.dataSource.data().indexOf(e) + this.dataOffset }, total: function () { return parseInt(this.dataSource.total(), 10) }, next: function () { var e = this, t = e.pageSize, i = e.skip - e.viewSize + t, n = De.max(De.floor(i / t), 0) * t; this.offset = i, this.dataSource.prefetch(n, t, function () { e._goToRange(i, !0) }) }, range: function (e, t) { if (this.offset === e) return !0; var i = this, n = this.pageSize, o = De.max(De.floor(e / n), 0) * n, r = this.dataSource; return t && (o += n), r.inRange(e, n) ? (this.offset = e, this._recalculate(), this._goToRange(e), !0) : !this.prefetch || (r.prefetch(o, n, function () { i.offset = e, i._recalculate(), i._goToRange(e, !0) }), !1) }, syncDataSource: function () { var e = this.offset; this.offset = null, this.range(e) }, destroy: function () { this.unbind() }, _prefetch: function () { var e = this, t = this.pageSize, i = this.skip + t, n = this.dataSource; n.inRange(i, t) || this._prefetching || !this.prefetch || (this._prefetching = !0, this.trigger("prefetching", { skip: i, take: t }), n.prefetch(i, t, function () { e._prefetching = !1, e.trigger("prefetched", { skip: i, take: t }) })) }, _goToRange: function (e, t) { this.offset === e && (this.dataOffset = e, this._expanding = t, this.dataSource.range(e, this.pageSize), this.dataSource.enableRequestsInProgress()) }, _reset: function () { this._syncPending = !0 }, _change: function () { var e = this.dataSource; this.length = this.useRanges ? e.lastRange().end : e.view().length, this._syncPending && (this._syncWithDataSource(), this._recalculate(), this._syncPending = !1, this.trigger("reset", { offset: this.offset })), this.trigger("resize"), this._expanding && this.trigger("expand"), delete this._expanding }, _syncWithDataSource: function () { var e = this.dataSource; this._firstItemUid = e.firstItemUid(), this.dataOffset = this.offset = e.skip() || 0, this.pageSize = e.pageSize(), this.useRanges = e.options.serverPaging }, _recalculate: function () { var e = this.pageSize, t = this.offset, i = this.viewSize, n = Math.ceil(t / e) * e; this.skip = n, this.midPageThreshold = n + e - 1, this.nextPageThreshold = n + i - 1, this.prefetchThreshold = n + Math.floor(e / 3 * 2), this.pullBackThreshold = this.offset - 1, this.nextMidRange = n + e - i, this.nextFullRange = n, this.previousMidRange = t - i, this.previousFullRange = n - e } }), ee = de.Observable.extend({ init: function (e, t) { var i = this; de.Observable.fn.init.call(i), this.dataSource = e, this.batchSize = t, this._total = 0, this.buffer = new J(e, 3 * t), this.buffer.bind({ endreached: function (e) { i.trigger("endreached", { index: e.index }) }, prefetching: function (e) { i.trigger("prefetching", { skip: e.skip, take: e.take }) }, prefetched: function (e) { i.trigger("prefetched", { skip: e.skip, take: e.take }) }, reset: function () { i._total = 0, i.trigger("reset") }, resize: function () { i._total = Math.ceil(this.length / i.batchSize), i.trigger("resize", { total: i.total(), offset: this.offset }) } }) }, syncDataSource: function () { this.buffer.syncDataSource() }, at: function (e) { var t, i, n = this.buffer, o = e * this.batchSize, r = this.batchSize, s = []; for (n.offset > o && n.at(n.offset - 1), i = 0; i < r && null !== (t = n.at(o + i)); i++)s.push(t); return s }, total: function () { return this._total }, destroy: function () { this.buffer.destroy(), this.unbind() } }), te(!0, de.data, { readers: { json: Y }, Query: o, DataSource: K, HierarchicalDataSource: Z, Node: X, ObservableObject: B, ObservableArray: He, LazyObservableArray: P, LocalTransport: j, RemoteTransport: G, Cache: $, DataReader: Y, Model: N, Buffer: J, BatchBuffer: ee }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.binder.min", ["kendo.core.min", "kendo.data.min"], function () { return function (e, t) { function i(t, i, n) { return p.extend({ init: function (e, t, i) { var n = this; p.fn.init.call(n, e.element[0], t, i), n.widget = e, n._dataBinding = A(n.dataBinding, n), n._dataBound = A(n.dataBound, n), n._itemChange = A(n.itemChange, n) }, itemChange: function (e) { r(e.item[0], e.data, this._ns(e.ns), [e.data].concat(this.bindings[t]._parents())) }, dataBinding: function (e) { var t, i, n = this.widget, o = e.removedItems || n.items(); for (t = 0, i = o.length; t < i; t++)l(o[t], !1) }, _ns: function (t) { t = t || y.ui; var i = [y.ui, y.dataviz.ui, y.mobile.ui]; return i.splice(e.inArray(t, i), 1), i.unshift(t), y.rolesFromNamespaces(i) }, dataBound: function (e) { var n, o, s, a, l = this.widget, c = e.addedItems || l.items(), d = l[i], u = y.data.HierarchicalDataSource; if (!(u && d instanceof u) && c.length) for (s = e.addedDataItems || d.flatView(), a = this.bindings[t]._parents(), n = 0, o = s.length; n < o; n++)r(c[n], s[n], this._ns(e.ns), [s[n]].concat(a)) }, refresh: function (e) { var o, r, s, a = this, l = a.widget; (e = e || {}).action || (a.destroy(), l.bind("dataBinding", a._dataBinding), l.bind("dataBound", a._dataBound), l.bind("itemChange", a._itemChange), o = a.bindings[t].get(), l[i] instanceof y.data.DataSource && l[i] != o && (o instanceof y.data.DataSource ? l[n](o) : o && o._dataSource ? l[n](o._dataSource) : (l[i].data(o), r = y.ui.Select && l instanceof y.ui.Select, s = y.ui.MultiSelect && l instanceof y.ui.MultiSelect, a.bindings.value && (r || s) && l.value(d(a.bindings.value.get(), l.options.dataValueField))))) }, destroy: function () { var e = this.widget; e.unbind("dataBinding", this._dataBinding), e.unbind("dataBound", this._dataBound), e.unbind("itemChange", this._itemChange) } }) } function n(e, t) { var i = y.initWidget(e, {}, t); if (i) return new _(i) } function o(e, t, i) { var n, o = {}; for (n in e) o[n] = new i(t, e[n]); return o } function r(e, t, i, s) { var l, c, d, p, m = e.getAttribute("data-" + y.ns + "role"), g = e.getAttribute("data-" + y.ns + "bind"), _ = [], k = !0, x = {}; if (s = s || [t], (m || g) && a(e, !1), m && (d = n(e, i)), g && (g = function e(t) { var i, n, o, r, s, a, l, c = {}; for (l = t.match(b), i = 0, n = l.length; i < n; i++)o = l[i], r = o.indexOf(":"), s = o.substring(0, r), a = o.substring(r + 1), "{" == a.charAt(0) && (a = e(a)), c[s] = a; return c }(g.replace(w, "")), d || ((x = y.parseOptions(e, { textField: "", valueField: "", template: "", valueUpdate: P, valuePrimitive: !1, autoBind: !0 })).roles = i, d = new v(e, x)), d.source = t, c = o(g, s, u), x.template && (c.template = new f(s, "", x.template)), c.click && (g.events = g.events || {}, g.events.click = g.click, c.click.destroy(), delete c.click), c.source && (k = !1), g.attr && (c.attr = o(g.attr, s, u)), g.style && (c.style = o(g.style, s, u)), g.events && (c.events = o(g.events, s, h)), g.css && (c.css = o(g.css, s, u)), d.bind(c)), d && (e.kendoBindingTarget = d), p = e.children, k && p) { for (l = 0; l < p.length; l++)_[l] = p[l]; for (l = 0; l < _.length; l++)r(_[l], t, i, s) } } function s(t, i) { var n, o, s, a = y.rolesFromNamespaces([].slice.call(arguments, 2)); for (i = y.observable(i), t = e(t), n = 0, o = t.length; n < o; n++)1 === (s = t[n]).nodeType && r(s, i, a) } function a(t, i) { var n, o = t.kendoBindingTarget; o && (o.destroy(), F ? delete t.kendoBindingTarget : t.removeAttribute ? t.removeAttribute("kendoBindingTarget") : t.kendoBindingTarget = null), i && ((n = y.widgetInstance(e(t))) && typeof n.destroy === z && n.destroy()) } function l(e, t) { a(e, t), c(e, t) } function c(e, t) { var i, n, o = e.children; if (o) for (i = 0, n = o.length; i < n; i++)l(o[i], t) } function d(e, t) { var i, n, o = [], r = 0; if (!t) return e; if (e instanceof C) { for (i = e.length; r < i; r++)n = e[r], o[r] = n.get ? n.get(t) : n[t]; e = o } else e instanceof x && (e = e.get(t)); return e } var u, h, f, p, m, g, v, _, b, w, y = window.kendo, k = y.Observable, x = y.data.ObservableObject, C = y.data.ObservableArray, S = {}.toString, T = {}, D = y.Class, A = e.proxy, E = "value", I = "source", M = "events", R = "checked", F = !0, z = "function", P = "change"; !function () { var e = document.createElement("a"); try { delete e.test } catch (e) { F = !1 } }(), u = k.extend({ init: function (e, t) { var i = this; k.fn.init.call(i), i.source = e[0], i.parents = e, i.path = t, i.dependencies = {}, i.dependencies[t] = !0, i.observable = i.source instanceof k, i._access = function (e) { i.dependencies[e.field] = !0 }, i.observable && (i._change = function (e) { i.change(e) }, i.source.bind(P, i._change)) }, _parents: function () { var t, i = this.parents, n = this.get(); return n && "function" == typeof n.parent && (t = n.parent(), e.inArray(t, i) < 0 && (i = [t].concat(i))), i }, change: function (e) { var t, i, n = e.field, o = this; if ("this" === o.path) o.trigger(P, e); else for (t in o.dependencies) if (0 === t.indexOf(n) && (!(i = t.charAt(n.length)) || "." === i || "[" === i)) { o.trigger(P, e); break } }, start: function (e) { e.bind("get", this._access) }, stop: function (e) { e.unbind("get", this._access) }, get: function () { var e = this, i = e.source, n = 0, o = e.path, r = i; if (!e.observable) return r; for (e.start(e.source), r = i.get(o); r === t && i;)(i = e.parents[++n]) instanceof x && (r = i.get(o)); if (r === t) for (i = e.source; r === t && i;)(i = i.parent()) instanceof x && (r = i.get(o)); return "function" == typeof r && ((n = o.lastIndexOf(".")) > 0 && (i = i.get(o.substring(0, n))), e.start(i), r = i !== e.source ? r.call(i, e.source) : r.call(i), e.stop(i)), i && i !== e.source && (e.currentSource = i, i.unbind(P, e._change).bind(P, e._change)), e.stop(e.source), r }, set: function (e) { var t = this.currentSource || this.source, i = y.getter(this.path)(t); "function" == typeof i ? t !== this.source ? i.call(t, this.source, e) : i.call(t, e) : t.set(this.path, e) }, destroy: function () { this.observable && (this.source.unbind(P, this._change), this.currentSource && this.currentSource.unbind(P, this._change)), this.unbind() } }), h = u.extend({ get: function () { var e, t = this.source, i = this.path, n = 0; for (e = t.get(i); !e && t;)(t = this.parents[++n]) instanceof x && (e = t.get(i)); return A(e, t) } }), f = u.extend({ init: function (e, t, i) { u.fn.init.call(this, e, t), this.template = i }, render: function (e) { var t; return this.start(this.source), t = y.render(this.template, e), this.stop(this.source), t } }), p = D.extend({ init: function (e, t, i) { this.element = e, this.bindings = t, this.options = i }, bind: function (e, t) { var i = this; (e = t ? e[t] : e).bind(P, function (e) { i.refresh(t || e) }), i.refresh(t) }, destroy: function () { } }), m = p.extend({ dataType: function () { var e = this.element.getAttribute("data-type") || this.element.type || "text"; return e.toLowerCase() }, parsedValue: function () { return this._parseValue(this.element.value, this.dataType()) }, _parseValue: function (e, t) { return "date" == t ? e = y.parseDate(e, "yyyy-MM-dd") : "datetime-local" == t ? e = y.parseDate(e, ["yyyy-MM-ddTHH:mm:ss", "yyyy-MM-ddTHH:mm"]) : "number" == t ? e = y.parseFloat(e) : "boolean" == t && (e = e.toLowerCase(), e = null !== y.parseFloat(e) ? !!y.parseFloat(e) : "true" === e.toLowerCase()), e } }), T.attr = p.extend({ refresh: function (e) { this.element.setAttribute(e, this.bindings.attr[e].get()) } }), T.css = p.extend({ init: function (e, t, i) { p.fn.init.call(this, e, t, i), this.classes = {} }, refresh: function (t) { var i = e(this.element), n = this.bindings.css[t], o = this.classes[t] = n.get(); o ? i.addClass(t) : i.removeClass(t) } }), T.style = p.extend({ refresh: function (e) { this.element.style[e] = this.bindings.style[e].get() || "" } }), T.enabled = p.extend({ refresh: function () { this.bindings.enabled.get() ? this.element.removeAttribute("disabled") : this.element.setAttribute("disabled", "disabled") } }), T.readonly = p.extend({ refresh: function () { this.bindings.readonly.get() ? this.element.setAttribute("readonly", "readonly") : this.element.removeAttribute("readonly") } }), T.disabled = p.extend({ refresh: function () { this.bindings.disabled.get() ? this.element.setAttribute("disabled", "disabled") : this.element.removeAttribute("disabled") } }), T.events = p.extend({ init: function (e, t, i) { p.fn.init.call(this, e, t, i), this.handlers = {} }, refresh: function (t) { var i = e(this.element), n = this.bindings.events[t], o = this.handlers[t]; o && i.off(t, o), o = this.handlers[t] = n.get(), i.on(t, n.source, o) }, destroy: function () { var t, i = e(this.element); for (t in this.handlers) i.off(t, this.handlers[t]) } }), T.text = p.extend({ refresh: function () { var t = this.bindings.text.get(), i = this.element.getAttribute("data-format") || ""; null == t && (t = ""), e(this.element).text(y.toString(t, i)) } }), T.visible = p.extend({ refresh: function () { this.element.style.display = this.bindings.visible.get() ? "" : "none" } }), T.invisible = p.extend({ refresh: function () { this.element.style.display = this.bindings.invisible.get() ? "none" : "" } }), T.html = p.extend({ refresh: function () { this.element.innerHTML = this.bindings.html.get() } }), T.value = m.extend({ init: function (t, i, n) { m.fn.init.call(this, t, i, n), this._change = A(this.change, this), this.eventName = n.valueUpdate || P, e(this.element).on(this.eventName, this._change), this._initChange = !1 }, change: function () { this._initChange = this.eventName != P, this.bindings[E].set(this.parsedValue()), this._initChange = !1 }, refresh: function () { var e, t; this._initChange || (null == (e = this.bindings[E].get()) && (e = ""), "date" == (t = this.dataType()) ? e = y.toString(e, "yyyy-MM-dd") : "datetime-local" == t && (e = y.toString(e, "yyyy-MM-ddTHH:mm:ss")), this.element.value = e), this._initChange = !1 }, destroy: function () { e(this.element).off(this.eventName, this._change) } }), T.source = p.extend({ init: function (e, t, i) { p.fn.init.call(this, e, t, i); var n = this.bindings.source.get(); n instanceof y.data.DataSource && !1 !== i.autoBind && n.fetch() }, refresh: function (e) { var t = this, i = t.bindings.source.get(); i instanceof C || i instanceof y.data.DataSource ? "add" == (e = e || {}).action ? t.add(e.index, e.items) : "remove" == e.action ? t.remove(e.index, e.items) : "itemchange" != e.action && t.render() : t.render() }, container: function () { var e = this.element; return "table" == e.nodeName.toLowerCase() && (e.tBodies[0] || e.appendChild(document.createElement("tbody")), e = e.tBodies[0]), e }, template: function () { var e = this.options, t = e.template, i = this.container().nodeName.toLowerCase(); return t || (t = "select" == i ? e.valueField || e.textField ? y.format('<option value="#:{0}#">#:{1}#</option>', e.valueField || e.textField, e.textField || e.valueField) : "<option>#:data#</option>" : "tbody" == i ? "<tr><td>#:data#</td></tr>" : "ul" == i || "ol" == i ? "<li>#:data#</li>" : "#:data#", t = y.template(t)), t }, add: function (t, i) { var n, o, s, a, l = this.container(), c = l.cloneNode(!1), d = l.children[t]; if (e(c).html(y.render(this.template(), i)), c.children.length) for (n = this.bindings.source._parents(), o = 0, s = i.length; o < s; o++)a = c.children[0], l.insertBefore(a, d || null), r(a, i[o], this.options.roles, [i[o]].concat(n)) }, remove: function (e, t) { var i, n, o = this.container(); for (i = 0; i < t.length; i++)l(n = o.children[e], !0), n.parentNode == o && o.removeChild(n) }, render: function () { var t, i, n, o = this.bindings.source.get(), s = this.container(), a = this.template(); if (null != o) if (o instanceof y.data.DataSource && (o = o.view()), o instanceof C || "[object Array]" === S.call(o) || (o = [o]), this.bindings.template) { if (c(s, !0), e(s).html(this.bindings.template.render(o)), s.children.length) for (t = this.bindings.source._parents(), i = 0, n = o.length; i < n; i++)r(s.children[i], o[i], this.options.roles, [o[i]].concat(t)) } else e(s).html(y.render(a, o)) } }), T.input = { checked: m.extend({ init: function (t, i, n) { m.fn.init.call(this, t, i, n), this._change = A(this.change, this), e(this.element).change(this._change) }, change: function () { var e, t, i, n = this.element, o = this.value(); if ("radio" == n.type) o = this.parsedValue(), this.bindings[R].set(o); else if ("checkbox" == n.type) if ((e = this.bindings[R].get()) instanceof C) { if ((o = this.parsedValue()) instanceof Date) { for (i = 0; i < e.length; i++)if (e[i] instanceof Date && +e[i] == +o) { t = i; break } } else t = e.indexOf(o); t > -1 ? e.splice(t, 1) : e.push(o) } else this.bindings[R].set(o) }, refresh: function () { var e, t, i = this.bindings[R].get(), n = i, o = this.dataType(), r = this.element; if ("checkbox" == r.type) if (n instanceof C) { if (e = -1, (i = this.parsedValue()) instanceof Date) { for (t = 0; t < n.length; t++)if (n[t] instanceof Date && +n[t] == +i) { e = t; break } } else e = n.indexOf(i); r.checked = e >= 0 } else r.checked = n; else "radio" == r.type && null != i && ("date" == o ? i = y.toString(i, "yyyy-MM-dd") : "datetime-local" == o && (i = y.toString(i, "yyyy-MM-ddTHH:mm:ss")), r.checked = r.value === "" + i) }, value: function () { var e = this.element, t = e.value; return "checkbox" == e.type && (t = e.checked), t }, destroy: function () { e(this.element).off(P, this._change) } }) }, T.select = { source: T.source.extend({ refresh: function (i) { var n, o = this, r = o.bindings.source.get(); r instanceof C || r instanceof y.data.DataSource ? "add" == (i = i || {}).action ? o.add(i.index, i.items) : "remove" == i.action ? o.remove(i.index, i.items) : "itemchange" != i.action && i.action !== t || (o.render(), o.bindings.value && o.bindings.value && (null === (n = d(o.bindings.value.get(), e(o.element).data("valueField"))) ? o.element.selectedIndex = -1 : o.element.value = n)) : o.render() } }), value: m.extend({ init: function (t, i, n) { m.fn.init.call(this, t, i, n), this._change = A(this.change, this), e(this.element).change(this._change) }, parsedValue: function () { var e, t, i, n, o = this.dataType(), r = []; for (i = 0, n = this.element.options.length; i < n; i++)(t = this.element.options[i]).selected && (e = (e = t.attributes.value) && e.specified ? t.value : t.text, r.push(this._parseValue(e, o))); return r }, change: function () { var e, i, n, o, r, s, a, l = [], c = this.element, d = this.options.valueField || this.options.textField, u = this.options.valuePrimitive; for (r = 0, s = c.options.length; r < s; r++)(i = c.options[r]).selected && (o = (o = i.attributes.value) && o.specified ? i.value : i.text, l.push(d ? o : this._parseValue(o, this.dataType()))); if (d) for ((e = this.bindings.source.get()) instanceof y.data.DataSource && (e = e.view()), n = 0; n < l.length; n++)for (r = 0, s = e.length; r < s; r++)if (a = e[r].get(d), a + "" === l[n]) { l[n] = e[r]; break } (o = this.bindings[E].get()) instanceof C ? o.splice.apply(o, [0, o.length].concat(l)) : this.bindings[E].set(u || !(o instanceof x || null === o || o === t) && d ? l[0].get(d) : l[0]) }, refresh: function () { var e, t, i, n = this.element, o = n.options, r = this.bindings[E].get(), s = r, a = this.options.valueField || this.options.textField, l = this.dataType(); for (s instanceof C || (s = new C([r])), n.selectedIndex = -1, i = 0; i < s.length; i++)for (r = s[i], a && r instanceof x && (r = r.get(a)), "date" == l ? r = y.toString(s[i], "yyyy-MM-dd") : "datetime-local" == l && (r = y.toString(s[i], "yyyy-MM-ddTHH:mm:ss")), e = 0; e < o.length; e++)"" === (t = o[e].value) && "" !== r && (t = o[e].text), null != r && t == "" + r && (o[e].selected = !0, !0) }, destroy: function () { e(this.element).off(P, this._change) } }) }, T.widget = { events: p.extend({ init: function (e, t, i) { p.fn.init.call(this, e.element[0], t, i), this.widget = e, this.handlers = {} }, refresh: function (e) { var t = this.bindings.events[e], i = this.handlers[e]; i && this.widget.unbind(e, i), i = t.get(), this.handlers[e] = function (e) { e.data = t.source, i(e), e.data === t.source && delete e.data }, this.widget.bind(e, this.handlers[e]) }, destroy: function () { var e; for (e in this.handlers) this.widget.unbind(e, this.handlers[e]) } }), checked: p.extend({ init: function (e, t, i) { p.fn.init.call(this, e.element[0], t, i), this.widget = e, this._change = A(this.change, this), this.widget.bind(P, this._change) }, change: function () { this.bindings[R].set(this.value()) }, refresh: function () { this.widget.check(!0 === this.bindings[R].get()) }, value: function () { var e = this.element, t = e.value; return "on" != t && "off" != t || (t = e.checked), t }, destroy: function () { this.widget.unbind(P, this._change) } }), visible: p.extend({ init: function (e, t, i) { p.fn.init.call(this, e.element[0], t, i), this.widget = e }, refresh: function () { var e = this.bindings.visible.get(); this.widget.wrapper[0].style.display = e ? "" : "none" } }), invisible: p.extend({ init: function (e, t, i) { p.fn.init.call(this, e.element[0], t, i), this.widget = e }, refresh: function () { var e = this.bindings.invisible.get(); this.widget.wrapper[0].style.display = e ? "none" : "" } }), enabled: p.extend({ init: function (e, t, i) { p.fn.init.call(this, e.element[0], t, i), this.widget = e }, refresh: function () { this.widget.enable && this.widget.enable(this.bindings.enabled.get()) } }), disabled: p.extend({ init: function (e, t, i) { p.fn.init.call(this, e.element[0], t, i), this.widget = e }, refresh: function () { this.widget.enable && this.widget.enable(!this.bindings.disabled.get()) } }), source: i("source", "dataSource", "setDataSource"), value: p.extend({ init: function (t, i, n) { p.fn.init.call(this, t.element[0], i, n), this.widget = t, this._change = e.proxy(this.change, this), this.widget.first(P, this._change); var o = this.bindings.value.get(); this._valueIsObservableObject = !n.valuePrimitive && (null == o || o instanceof x), this._valueIsObservableArray = o instanceof C, this._initChange = !1 }, _source: function () { var e; return this.widget.dataItem && ((e = this.widget.dataItem()) && e instanceof x) ? [e] : (this.bindings.source && (e = this.bindings.source.get()), (!e || e instanceof y.data.DataSource) && (e = this.widget.dataSource.flatView()), e) }, change: function () { var e, t, i, n, o, r, s, a = this.widget.value(), l = this.options.dataValueField || this.options.dataTextField, c = "[object Array]" === S.call(a), d = this._valueIsObservableObject, u = []; if (this._initChange = !0, l) if ("" === a && (d || this.options.valuePrimitive)) a = null; else { for (s = this._source(), c && (t = a.length, u = a.slice(0)), o = 0, r = s.length; o < r; o++)if (i = s[o], n = i.get(l), c) { for (e = 0; e < t; e++)if (n == u[e]) { u[e] = i; break } } else if (n == a) { a = d ? i : n; break } u[0] && (a = this._valueIsObservableArray ? u : d || !l ? u[0] : u[0].get(l)) } this.bindings.value.set(a), this._initChange = !1 }, refresh: function () { var e, i, n, o, r, s, a, l, c; if (!this._initChange) { if (e = this.widget, i = e.options, n = i.dataTextField, o = i.dataValueField || n, r = this.bindings.value.get(), s = i.text || "", a = 0, c = [], r === t && (r = null), o) if (r instanceof C) { for (l = r.length; a < l; a++)c[a] = r[a].get(o); r = c } else r instanceof x && (s = r.get(n), r = r.get(o)); !1 !== i.autoBind || i.cascadeFrom || !e.listView || e.listView.bound() ? e.value(r) : (n !== o || s || (s = r), s || !r && 0 !== r || !i.valuePrimitive ? e._preselect(r, s) : e.value(r)) } this._initChange = !1 }, destroy: function () { this.widget.unbind(P, this._change) } }), gantt: { dependencies: i("dependencies", "dependencies", "setDependenciesDataSource") }, multiselect: { value: p.extend({ init: function (t, i, n) { p.fn.init.call(this, t.element[0], i, n), this.widget = t, this._change = e.proxy(this.change, this), this.widget.first(P, this._change), this._initChange = !1 }, change: function () { var e, i, n, o, r, s, a, l, c, d = this, u = d.bindings[E].get(), h = d.options.valuePrimitive, f = h ? d.widget.value() : d.widget.dataItems(), p = this.options.dataValueField || this.options.dataTextField; if (f = f.slice(0), d._initChange = !0, u instanceof C) { for (e = [], i = f.length, o = 0, r = u[n = 0], s = !1; r !== t;) { for (c = !1, o = 0; o < i; o++)if (h ? s = f[o] == r : (l = (l = f[o]).get ? l.get(p) : l, s = l == (r.get ? r.get(p) : r)), s) { f.splice(o, 1), i -= 1, c = !0; break } c ? n += 1 : (e.push(r), g(u, n, 1), a = n), r = u[n] } g(u, u.length, 0, f), e.length && u.trigger("change", { action: "remove", items: e, index: a }), f.length && u.trigger("change", { action: "add", items: f, index: u.length - 1 }) } else d.bindings[E].set(f); d._initChange = !1 }, refresh: function () { if (!this._initChange) { var e, i, n = this.options, o = this.widget, r = n.dataValueField || n.dataTextField, s = this.bindings.value.get(), a = s, l = 0, c = []; if (s === t && (s = null), r) if (s instanceof C) { for (e = s.length; l < e; l++)i = s[l], c[l] = i.get ? i.get(r) : i; s = c } else s instanceof x && (s = s.get(r)); !1 !== n.autoBind || !0 === n.valuePrimitive || o._isBound() ? o.value(s) : o._preselect(a, s) } }, destroy: function () { this.widget.unbind(P, this._change) } }) }, scheduler: { source: i("source", "dataSource", "setDataSource").extend({ dataBound: function (e) { var t, i, n, o, s = this.widget, a = e.addedItems || s.items(); if (a.length) for (n = e.addedDataItems || s.dataItems(), o = this.bindings.source._parents(), t = 0, i = n.length; t < i; t++)r(a[t], n[t], this._ns(e.ns), [n[t]].concat(o)) } }) } }, g = function (e, t, i, n) { var o, r, s, a, l; if (i = i || 0, o = (n = n || []).length, r = e.length, s = [].slice.call(e, t + i), a = s.length, o) { for (o = t + o, l = 0; t < o; t++)e[t] = n[l], l++; e.length = o } else if (i) for (e.length = t, i += t; t < i;)delete e[--i]; if (a) { for (a = t + a, l = 0; t < a; t++)e[t] = s[l], l++; e.length = a } for (t = e.length; t < r;)delete e[t], t++ }, v = D.extend({ init: function (e, t) { this.target = e, this.options = t, this.toDestroy = [] }, bind: function (e) { var t, i, n, o, r, s, a = this instanceof _, l = this.binders(); for (t in e) t == E ? i = !0 : t == I ? n = !0 : t != M || a ? t == R ? r = !0 : "css" == t ? s = !0 : this.applyBinding(t, e, l) : o = !0; n && this.applyBinding(I, e, l), i && this.applyBinding(E, e, l), r && this.applyBinding(R, e, l), o && !a && this.applyBinding(M, e, l), s && !a && this.applyBinding("css", e, l) }, binders: function () { return T[this.target.nodeName.toLowerCase()] || {} }, applyBinding: function (e, t, i) { var n, o = i[e] || T[e], r = this.toDestroy, s = t[e]; if (o) if (o = new o(this.target, t, this.options), r.push(o), s instanceof u) o.bind(s), r.push(s); else for (n in s) o.bind(s, n), r.push(s[n]); else if ("template" !== e) throw Error("The " + e + " binding is not supported by the " + this.target.nodeName.toLowerCase() + " element") }, destroy: function () { var e, t, i = this.toDestroy; for (e = 0, t = i.length; e < t; e++)i[e].destroy() } }), _ = v.extend({ binders: function () { return T.widget[this.target.options.name.toLowerCase()] || {} }, applyBinding: function (e, t, i) { var n, o = i[e] || T.widget[e], r = this.toDestroy, s = t[e]; if (!o) throw Error("The " + e + " binding is not supported by the " + this.target.options.name + " widget"); if (o = new o(this.target, t, this.target.options), r.push(o), s instanceof u) o.bind(s), r.push(s); else for (n in s) o.bind(s, n), r.push(s[n]) } }), b = /[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g, w = /\s/g, y.unbind = function (t) { var i, n; for (t = e(t), i = 0, n = t.length; i < n; i++)l(t[i], !1) }, y.bind = s, y.data.binders = T, y.data.Binder = p, y.notify = function (e, t) { var i = e.element, n = i[0].kendoBindingTarget; n && s(i, n.source, t) }, y.observable = function (e) { return e instanceof x || (e = new x(e)), e }, y.observableHierarchy = function (e) { var t = y.data.HierarchicalDataSource.create(e); return t.fetch(), function e(t) { var i, n; for (i = 0; i < t.length; i++)t[i]._initChildren(), n = t[i].children, n.fetch(), t[i].items = n.data(), e(t[i].items) }(t.data()), t._data._dataSource = t, t._data } }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.fx.min", ["kendo.core.min"], function () { return function (e, t) { function i(e) { return parseInt(e, 10) } function n(e, t) { return i(e.css(t)) } function o(e) { for (var t in e) -1 != O.indexOf(t) && -1 == V.indexOf(t) && delete e[t]; return e } function r(e, t) { var i, n, o, r, s = [], a = {}; for (n in t) i = n.toLowerCase(), r = E && -1 != O.indexOf(i), !D.hasHW3D && r && -1 == V.indexOf(i) ? delete t[n] : (o = t[n], r ? s.push(n + "(" + o + ")") : a[n] = o); return s.length && (a[oe] = s.join(" ")), a } function s(e, t) { var n, o, r; return E ? (n = e.css(oe)) == G ? "scale" == t ? 1 : 0 : (o = n.match(RegExp(t + "\\s*\\(([\\d\\w\\.]+)")), r = 0, o ? r = i(o[1]) : (o = n.match(z) || [0, 0, 0, 0, 0], t = t.toLowerCase(), B.test(t) ? r = parseFloat(o[3] / o[2]) : "translatey" == t ? r = parseFloat(o[4] / o[2]) : "scale" == t ? r = parseFloat(o[2]) : "rotate" == t && (r = parseFloat(Math.atan2(o[2], o[1])))), r) : parseFloat(e.css(t)) } function a(e) { return e.charAt(0).toUpperCase() + e.substring(1) } function l(e, t) { var i = f.extend(t), n = i.prototype.directions; x[a(e)] = i, x.Element.prototype[e] = function (e, t, n, o) { return new i(this.element, e, t, n, o) }, C(n, function (t, n) { x.Element.prototype[e + a(n)] = function (e, t, o) { return new i(this.element, n, e, t, o) } }) } function c(e, i, n, o) { l(e, { directions: m, startValue: function (e) { return this._startValue = e, this }, endValue: function (e) { return this._endValue = e, this }, shouldHide: function () { return this._shouldHide }, prepare: function (e, r) { var s, a, l = "out" === this._direction, c = this.element.data(i), d = !(isNaN(c) || c == n); s = d ? c : t !== this._startValue ? this._startValue : l ? n : o, a = t !== this._endValue ? this._endValue : l ? o : n, this._reverse ? (e[i] = a, r[i] = s) : (e[i] = s, r[i] = a), this._shouldHide = r[i] === o } }) } function d(e, t) { var i = k.directions[t].vertical, n = e[i ? K : Y]() / 2 + "px"; return v[t].replace("$size", n) } var u, h, f, p, m, g, v, _, b, w, y, k = window.kendo, x = k.effects, C = e.each, S = e.extend, T = e.proxy, D = k.support, A = D.browser, E = D.transforms, I = D.transitions, M = { scale: 0, scalex: 0, scaley: 0, scale3d: 0 }, R = { translate: 0, translatex: 0, translatey: 0, translate3d: 0 }, F = t !== document.documentElement.style.zoom && !E, z = /matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i, P = /^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i, B = /translatex?$/i, L = /(zoom|fade|expand)(\w+)/, H = /(zoom|fade|expand)/, N = /[xy]$/i, O = ["perspective", "rotate", "rotatex", "rotatey", "rotatez", "rotate3d", "scale", "scalex", "scaley", "scalez", "scale3d", "skew", "skewx", "skewy", "translate", "translatex", "translatey", "translatez", "translate3d", "matrix", "matrix3d"], V = ["rotate", "scale", "scalex", "scaley", "skew", "skewx", "skewy", "translate", "translatex", "translatey", "matrix"], U = { rotate: "deg", scale: "", skew: "px", translate: "px" }, W = E.css, q = Math.round, j = "px", G = "none", $ = "auto", Y = "width", K = "height", Q = "hidden", X = "origin", Z = "abortId", J = "overflow", ee = "translate", te = "position", ie = "completeCallback", ne = W + "transition", oe = W + "transform", re = W + "backface-visibility", se = W + "perspective", ae = "1500px", le = "perspective(1500px)", ce = { left: { reverse: "right", property: "left", transition: "translatex", vertical: !1, modifier: -1 }, right: { reverse: "left", property: "left", transition: "translatex", vertical: !1, modifier: 1 }, down: { reverse: "up", property: "top", transition: "translatey", vertical: !0, modifier: 1 }, up: { reverse: "down", property: "top", transition: "translatey", vertical: !0, modifier: -1 }, top: { reverse: "bottom" }, bottom: { reverse: "top" }, in: { reverse: "out", modifier: -1 }, out: { reverse: "in", modifier: 1 }, vertical: { reverse: "vertical" }, horizontal: { reverse: "horizontal" } }; k.directions = ce, S(e.fn, { kendoStop: function (e, t) { return I ? x.stopQueue(this, e || !1, t || !1) : this.stop(e, t) } }), E && !I && (C(V, function (i, n) { e.fn[n] = function (i) { if (t === i) return s(this, n); var o = e(this)[0], r = n + "(" + i + U[n.replace(N, "")] + ")"; return -1 == o.style.cssText.indexOf(oe) ? e(this).css(oe, r) : o.style.cssText = o.style.cssText.replace(RegExp(n + "\\(.*?\\)", "i"), r), this }, e.fx.step[n] = function (t) { e(t.elem)[n](t.now) } }), u = e.fx.prototype.cur, e.fx.prototype.cur = function () { return -1 != V.indexOf(this.prop) ? parseFloat(e(this.elem)[this.prop]()) : u.apply(this, arguments) }), k.toggleClass = function (e, t, i, n) { return t && (t = t.split(" "), I && (i = S({ exclusive: "all", duration: 400, ease: "ease-out" }, i), e.css(ne, i.exclusive + " " + i.duration + "ms " + i.ease), setTimeout(function () { e.css(ne, "").css(K) }, i.duration)), C(t, function (t, i) { e.toggleClass(i, n) })), e }, k.parseEffects = function (e, t) { var i = {}; return "string" == typeof e ? C(e.split(" "), function (e, n) { var o = !H.test(n), r = n.replace(L, function (e, t, i) { return t + ":" + i.toLowerCase() }), s = r.split(":"), a = s[1], l = {}; s.length > 1 && (l.direction = t && o ? ce[a].reverse : a), i[s[0]] = l }) : C(e, function (e) { var n = this.direction; n && t && !H.test(e) && (this.direction = ce[n].reverse), i[e] = this }), i }, I && S(x, { transition: function (t, i, n) { var o, s, a, l, c = 0, d = t.data("keys") || []; n = S({ duration: 200, ease: "ease-out", complete: null, exclusive: "all" }, n), a = !1, l = function () { a || (a = !0, s && (clearTimeout(s), s = null), t.removeData(Z).dequeue().css(ne, "").css(ne), n.complete.call(t)) }, n.duration = e.fx && e.fx.speeds[n.duration] || n.duration, o = r(t, i), e.merge(d, function (e) { var t, i = []; for (t in e) i.push(t); return i }(o)), t.data("keys", e.unique(d)).height(), t.css(ne, n.exclusive + " " + n.duration + "ms " + n.ease).css(ne), t.css(o).css(oe), I.event && (t.one(I.event, l), 0 !== n.duration && (c = 500)), s = setTimeout(l, n.duration + c), t.data(Z, s), t.data(ie, l) }, stopQueue: function (e, t, i) { var n, o = e.data("keys"), r = !i && o, s = e.data(ie); return r && (n = k.getComputedStyles(e[0], o)), s && s(), r && e.css(n), e.removeData("keys").stop(t) } }), h = k.Class.extend({ init: function (e, t) { var i = this; i.element = e, i.effects = [], i.options = t, i.restore = [] }, run: function (t) { var i, n, s, a, l, c, d, u = this, h = t.length, f = u.element, p = u.options, m = e.Deferred(), g = {}, v = {}; for (u.effects = t, m.then(e.proxy(u, "complete")), f.data("animating", !0), n = 0; n < h; n++)for ((i = t[n]).setReverse(p.reverse), i.setOptions(p), u.addRestoreProperties(i.restore), i.prepare(g, v), l = i.children(), s = 0, c = l.length; s < c; s++)l[s].duration(p.duration).run(); for (d in p.effects) S(v, p.effects[d].properties); for (f.is(":visible") || S(g, { display: f.data("olddisplay") || "block" }), E && !p.reset && ((a = f.data("targetTransform")) && (g = S(a, g))), g = r(f, g), E && !I && (g = o(g)), f.css(g).css(oe), n = 0; n < h; n++)t[n].setup(); return p.init && p.init(), f.data("targetTransform", v), x.animate(f, v, S({}, p, { complete: m.resolve })), m.promise() }, stop: function () { e(this.element).kendoStop(!0, !0) }, addRestoreProperties: function (e) { for (var t, i = this.element, n = 0, o = e.length; n < o; n++)t = e[n], this.restore.push(t), i.data(t) || i.data(t, i.css(t)) }, restoreCallback: function () { var e, t, i, n = this.element; for (e = 0, t = this.restore.length; e < t; e++)i = this.restore[e], n.css(i, n.data(i)) }, complete: function () { var t = this, i = 0, n = t.element, o = t.options, r = t.effects, s = r.length; for (n.removeData("animating").dequeue(), o.hide && n.data("olddisplay", n.css("display")).hide(), this.restoreCallback(), F && !E && setTimeout(e.proxy(this, "restoreCallback"), 0); i < s; i++)r[i].teardown(); o.completeCallback && o.completeCallback(n) } }), x.promise = function (e, t) { var i, n, o, r = [], s = new h(e, t), l = k.parseEffects(t.effects); for (o in t.effects = l, l) (i = x[a(o)]) && (n = new i(e, l[o].direction), r.push(n)); r[0] ? s.run(r) : (e.is(":visible") || e.css({ display: e.data("olddisplay") || "block" }).css("display"), t.init && t.init(), e.dequeue(), s.complete()) }, S(x, { animate: function (i, r, s) { var a = !1 !== s.transition; delete s.transition, I && "transition" in x && a ? x.transition(i, r, s) : E ? i.animate(o(r), { queue: !1, show: !1, hide: !1, duration: s.duration, complete: s.complete }) : i.each(function () { var i = e(this), o = {}; C(O, function (e, s) { var a, l, c, d, u, h, f, p = r ? r[s] + " " : null; p && (l = r, s in M && r[s] !== t ? (a = p.match(P), E && S(l, { scale: +a[0] })) : s in R && r[s] !== t && (c = i.css(te), d = "absolute" == c || "fixed" == c, i.data(ee) || (d ? i.data(ee, { top: n(i, "top") || 0, left: n(i, "left") || 0, bottom: n(i, "bottom"), right: n(i, "right") }) : i.data(ee, { top: n(i, "marginTop") || 0, left: n(i, "marginLeft") || 0 })), u = i.data(ee), (a = p.match(P)) && (h = s == ee + "y" ? 0 : +a[1], f = s == ee + "y" ? +a[1] : +a[2], d ? (isNaN(u.right) ? isNaN(h) || S(l, { left: u.left + h }) : isNaN(h) || S(l, { right: u.right - h }), isNaN(u.bottom) ? isNaN(f) || S(l, { top: u.top + f }) : isNaN(f) || S(l, { bottom: u.bottom - f })) : (isNaN(h) || S(l, { marginLeft: u.left + h }), isNaN(f) || S(l, { marginTop: u.top + f })))), !E && "scale" != s && s in l && delete l[s], l && S(o, l)) }), A.msie && delete o.scale, i.animate(o, { queue: !1, show: !1, hide: !1, duration: s.duration, complete: s.complete }) }) } }), x.animatedPromise = x.promise, f = k.Class.extend({ init: function (e, t) { var i = this; i.element = e, i._direction = t, i.options = {}, i._additionalEffects = [], i.restore || (i.restore = []) }, reverse: function () { return this._reverse = !0, this.run() }, play: function () { return this._reverse = !1, this.run() }, add: function (e) { return this._additionalEffects.push(e), this }, direction: function (e) { return this._direction = e, this }, duration: function (e) { return this._duration = e, this }, compositeRun: function () { var e = this, t = new h(e.element, { reverse: e._reverse, duration: e._duration }), i = e._additionalEffects.concat([e]); return t.run(i) }, run: function () { if (this._additionalEffects && this._additionalEffects[0]) return this.compositeRun(); var t, i, n = this, s = n.element, a = 0, l = n.restore, c = l.length, d = e.Deferred(), u = {}, h = {}, f = n.children(), p = f.length; for (d.then(e.proxy(n, "_complete")), s.data("animating", !0), a = 0; a < c; a++)t = l[a], s.data(t) || s.data(t, s.css(t)); for (a = 0; a < p; a++)f[a].duration(n._duration).run(); return n.prepare(u, h), s.is(":visible") || S(u, { display: s.data("olddisplay") || "block" }), E && ((i = s.data("targetTransform")) && (u = S(i, u))), u = r(s, u), E && !I && (u = o(u)), s.css(u).css(oe), n.setup(), s.data("targetTransform", h), x.animate(s, h, { duration: n._duration, complete: d.resolve }), d.promise() }, stop: function () { var t = 0, i = this.children(), n = i.length; for (t = 0; t < n; t++)i[t].stop(); return e(this.element).kendoStop(!0, !0), this }, restoreCallback: function () { var e, t, i, n = this.element; for (e = 0, t = this.restore.length; e < t; e++)i = this.restore[e], n.css(i, n.data(i)) }, _complete: function () { var t = this, i = t.element; i.removeData("animating").dequeue(), t.restoreCallback(), t.shouldHide() && i.data("olddisplay", i.css("display")).hide(), F && !E && setTimeout(e.proxy(t, "restoreCallback"), 0), t.teardown() }, setOptions: function (e) { S(!0, this.options, e) }, children: function () { return [] }, shouldHide: e.noop, setup: e.noop, prepare: e.noop, teardown: e.noop, directions: [], setReverse: function (e) { return this._reverse = e, this } }), m = ["in", "out"], l("slideIn", { directions: p = ["left", "right", "up", "down"], divisor: function (e) { return this.options.divisor = e, this }, prepare: function (e, t) { var i, n = this, o = n.element, r = k._outerWidth, s = k._outerHeight, a = ce[n._direction], l = -a.modifier * (a.vertical ? s(o) : r(o)), c = l / (n.options && n.options.divisor || 1) + j; n._reverse && (i = e, e = t, t = i), E ? (e[a.transition] = c, t[a.transition] = "0px") : (e[a.property] = c, t[a.property] = "0px") } }), l("tile", { directions: p, init: function (e, t, i) { f.prototype.init.call(this, e, t), this.options = { previous: i } }, previousDivisor: function (e) { return this.options.previousDivisor = e, this }, children: function () { var e = this, t = e._reverse, i = e.options.previous, n = e.options.previousDivisor || 1, o = e._direction, r = [k.fx(e.element).slideIn(o).setReverse(t)]; return i && r.push(k.fx(i).slideIn(ce[o].reverse).divisor(n).setReverse(!t)), r } }), c("fade", "opacity", 1, 0), c("zoom", "scale", 1, .01), l("slideMargin", { prepare: function (e, t) { var i, n = this, o = n.element, r = n.options, s = o.data(X), a = r.offset, l = n._reverse; l || null !== s || o.data(X, parseFloat(o.css("margin-" + r.axis))), i = o.data(X) || 0, t["margin-" + r.axis] = l ? i : i + a } }), l("slideTo", { prepare: function (e, t) { var i = this, n = i.element, o = i.options, r = o.offset.split(","), s = i._reverse; E ? (t.translatex = s ? 0 : r[0], t.translatey = s ? 0 : r[1]) : (t.left = s ? 0 : r[0], t.top = s ? 0 : r[1]), n.css("left") } }), l("expand", { directions: ["horizontal", "vertical"], restore: [J], prepare: function (e, i) { var n = this, o = n.element, r = n.options, s = n._reverse, a = "vertical" === n._direction ? K : Y, l = o[0].style[a], c = o.data(a), d = parseFloat(c || l), u = q(o.css(a, $)[a]()); e.overflow = Q, d = r && r.reset ? u || d : d || u, i[a] = (s ? 0 : d) + j, e[a] = (s ? d : 0) + j, c === t && o.data(a, l) }, shouldHide: function () { return this._reverse }, teardown: function () { var e = this.element, t = "vertical" === this._direction ? K : Y, i = e.data(t); i != $ && "" !== i || setTimeout(function () { e.css(t, $).css(t) }, 0) } }), g = { position: "absolute", marginLeft: 0, marginTop: 0, scale: 1 }, l("transfer", { init: function (e, t) { this.element = e, this.options = { target: t }, this.restore = [] }, setup: function () { this.element.appendTo(document.body) }, prepare: function (e, t) { var i = this, n = i.element, o = x.box(n), r = x.box(i.options.target), a = s(n, "scale"), l = x.fillScale(r, o), c = x.transformOrigin(r, o); S(e, g), t.scale = 1, n.css(oe, "scale(1)").css(oe), n.css(oe, "scale(" + a + ")"), e.top = o.top, e.left = o.left, e.transformOrigin = c.x + j + " " + c.y + j, i._reverse ? e.scale = l : t.scale = l } }), v = { top: "rect(auto auto $size auto)", bottom: "rect($size auto auto auto)", left: "rect(auto $size auto auto)", right: "rect(auto auto auto $size)" }, _ = { top: { start: "rotatex(0deg)", end: "rotatex(180deg)" }, bottom: { start: "rotatex(-180deg)", end: "rotatex(0deg)" }, left: { start: "rotatey(0deg)", end: "rotatey(-180deg)" }, right: { start: "rotatey(180deg)", end: "rotatey(0deg)" } }, l("turningPage", { directions: p, init: function (e, t, i) { f.prototype.init.call(this, e, t), this._container = i }, prepare: function (e, t) { var i = this, n = i._reverse, o = n ? ce[i._direction].reverse : i._direction, r = _[o]; e.zIndex = 1, i._clipInHalf && (e.clip = d(i._container, k.directions[o].reverse)), e[re] = Q, t[oe] = le + (n ? r.start : r.end), e[oe] = le + (n ? r.end : r.start) }, setup: function () { this._container.append(this.element) }, face: function (e) { return this._face = e, this }, shouldHide: function () { var e = this._reverse, t = this._face; return e && !t || !e && t }, clipInHalf: function (e) { return this._clipInHalf = e, this }, temporary: function () { return this.element.addClass("temp-page"), this } }), l("staticPage", { directions: p, init: function (e, t, i) { f.prototype.init.call(this, e, t), this._container = i }, restore: ["clip"], prepare: function (e, t) { var i = this, n = i._reverse ? ce[i._direction].reverse : i._direction; e.clip = d(i._container, n), e.opacity = .999, t.opacity = 1 }, shouldHide: function () { var e = this._reverse, t = this._face; return e && !t || !e && t }, face: function (e) { return this._face = e, this } }), l("pageturn", { directions: ["horizontal", "vertical"], init: function (e, t, i, n) { f.prototype.init.call(this, e, t), this.options = {}, this.options.face = i, this.options.back = n }, children: function () { var e, t = this, i = t.options, n = "horizontal" === t._direction ? "left" : "top", o = k.directions[n].reverse, r = t._reverse, s = i.face.clone(!0).removeAttr("id"), a = i.back.clone(!0).removeAttr("id"), l = t.element; return r && (e = n, n = o, o = e), [k.fx(i.face).staticPage(n, l).face(!0).setReverse(r), k.fx(i.back).staticPage(o, l).setReverse(r), k.fx(s).turningPage(n, l).face(!0).clipInHalf(!0).temporary().setReverse(r), k.fx(a).turningPage(o, l).clipInHalf(!0).temporary().setReverse(r)] }, prepare: function (e, t) { e[se] = ae, e.transformStyle = "preserve-3d", e.opacity = .999, t.opacity = 1 }, teardown: function () { this.element.find(".temp-page").remove() } }), l("flip", { directions: ["horizontal", "vertical"], init: function (e, t, i, n) { f.prototype.init.call(this, e, t), this.options = {}, this.options.face = i, this.options.back = n }, children: function () { var e, t = this, i = t.options, n = "horizontal" === t._direction ? "left" : "top", o = k.directions[n].reverse, r = t._reverse, s = t.element; return r && (e = n, n = o, o = e), [k.fx(i.face).turningPage(n, s).face(!0).setReverse(r), k.fx(i.back).turningPage(o, s).setReverse(r)] }, prepare: function (e) { e[se] = ae, e.transformStyle = "preserve-3d" } }), b = !D.mobileOS.android, l("replace", { _before: e.noop, _after: e.noop, init: function (t, i, n) { f.prototype.init.call(this, t), this._previous = e(i), this._transitionClass = n }, duration: function () { throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule") }, beforeTransition: function (e) { return this._before = e, this }, afterTransition: function (e) { return this._after = e, this }, _both: function () { return e().add(this._element).add(this._previous) }, _containerClass: function () { var e = this._direction, t = "k-fx k-fx-start k-fx-" + this._transitionClass; return e && (t += " k-fx-" + e), this._reverse && (t += " k-fx-reverse"), t }, complete: function (t) { if (!(!this.deferred || t && e(t.target).is(".km-touch-scrollbar, .km-actionsheet-wrapper"))) { var i = this.container; i.removeClass("k-fx-end").removeClass(this._containerClass()).off(I.event, this.completeProxy), this._previous.hide().removeClass("k-fx-current"), this.element.removeClass("k-fx-next"), b && i.css(J, ""), this.isAbsolute || this._both().css(te, ""), this.deferred.resolve(), delete this.deferred } }, run: function () { if (this._additionalEffects && this._additionalEffects[0]) return this.compositeRun(); var t = this, i = t.element, n = t._previous, o = i.parents().filter(n.parents()).first(), r = t._both(), s = e.Deferred(), a = i.css(te); return o.length || (o = i.parent()), this.container = o, this.deferred = s, this.isAbsolute = "absolute" == a, this.isAbsolute || r.css(te, "absolute"), b && (o.css(J), o.css(J, "hidden")), I ? (i.addClass("k-fx-hidden"), o.addClass(this._containerClass()), this.completeProxy = e.proxy(this, "complete"), o.on(I.event, this.completeProxy), k.animationFrame(function () { i.removeClass("k-fx-hidden").addClass("k-fx-next"), n.css("display", "").addClass("k-fx-current"), t._before(n, i), k.animationFrame(function () { o.removeClass("k-fx-start").addClass("k-fx-end"), t._after(n, i) }) })) : this.complete(), s.promise() }, stop: function () { this.complete() } }), w = k.Class.extend({ init: function () { var e = this; e._tickProxy = T(e._tick, e), e._started = !1 }, tick: e.noop, done: e.noop, onEnd: e.noop, onCancel: e.noop, start: function () { this.enabled() && (this.done() ? this.onEnd() : (this._started = !0, k.animationFrame(this._tickProxy))) }, enabled: function () { return !0 }, cancel: function () { this._started = !1, this.onCancel() }, _tick: function () { var e = this; e._started && (e.tick(), e.done() ? (e._started = !1, e.onEnd()) : k.animationFrame(e._tickProxy)) } }), y = w.extend({ init: function (e) { S(this, e), w.fn.init.call(this) }, done: function () { return this.timePassed() >= this.duration }, timePassed: function () { return Math.min(this.duration, new Date - this.startDate) }, moveTo: function (e) { var t = this, i = t.movable; t.initial = i[t.axis], t.delta = e.location - t.initial, t.duration = "number" == typeof e.duration ? e.duration : 300, t.tick = t._easeProxy(e.ease), t.startDate = new Date, t.start() }, _easeProxy: function (e) { var t = this; return function () { t.movable.moveAxis(t.axis, e(t.timePassed(), t.initial, t.delta, t.duration)) } } }), S(y, { easeOutExpo: function (e, t, i, n) { return e == n ? t + i : i * (1 - Math.pow(2, -10 * e / n)) + t }, easeOutBack: function (e, t, i, n, o) { return i * ((e = e / n - 1) * e * (((o = 1.70158) + 1) * e + o) + 1) + t } }), x.Animation = w, x.Transition = y, x.createEffect = l, x.box = function (t) { var i = (t = e(t)).offset(); return i.width = k._outerWidth(t), i.height = k._outerHeight(t), i }, x.transformOrigin = function (e, t) { var i = (e.left - t.left) * t.width / (t.width - e.width), n = (e.top - t.top) * t.height / (t.height - e.height); return { x: isNaN(i) ? 0 : i, y: isNaN(n) ? 0 : n } }, x.fillScale = function (e, t) { return Math.min(e.width / t.width, e.height / t.height) }, x.fitScale = function (e, t) { return Math.max(e.width / t.width, e.height / t.height) } }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.view.min", ["kendo.core.min", "kendo.binder.min", "kendo.fx.min"], function () { return function (e, t) { var i = window.kendo, n = i.Observable, o = "init", r = "show", s = "hide", a = "transitionStart", l = "transitionEnd", c = /unrecognized expression/, d = n.extend({ init: function (e, t) { var c = this; t = t || {}, n.fn.init.call(c), c.content = e, c.id = i.guid(), c.tagName = t.tagName || "div", c.model = t.model, c._wrap = !1 !== t.wrap, this._evalTemplate = t.evalTemplate || !1, c._fragments = {}, c.bind([o, r, s, a, l], t) }, render: function (t) { var n = this, s = !n.element; return s && (n.element = n._createElement()), t && e(t).append(n.element), s && (i.bind(n.element, n.model), n.trigger(o)), t && (n._eachFragment("attach"), n.trigger(r)), n.element }, clone: function () { return new u(this) }, triggerBeforeShow: function () { return !0 }, triggerBeforeHide: function () { return !0 }, showStart: function () { this.element.css("display", "") }, showEnd: function () { }, hideEnd: function () { this.hide() }, beforeTransition: function (e) { this.trigger(a, { type: e }) }, afterTransition: function (e) { this.trigger(l, { type: e }) }, hide: function () { this._eachFragment("detach"), this.element.detach(), this.trigger(s) }, destroy: function () { var e = this.element; e && (i.unbind(e), i.destroy(e), e.remove()) }, fragments: function (t) { e.extend(this._fragments, t) }, _eachFragment: function (e) { for (var t in this._fragments) this._fragments[t][e](this, t) }, _createElement: function () { var t, n, o, r = this, s = "<" + r.tagName + " />"; try { "SCRIPT" === (n = e(document.getElementById(r.content) || r.content))[0].tagName && (n = n.html()) } catch (e) { c.test(e.message) && (n = r.content) } return "string" == typeof n ? (n = n.replace(/^\s+|\s+$/g, ""), r._evalTemplate && (n = i.template(n)(r.model || {})), t = e(s).append(n), r._wrap || (t = t.contents())) : (t = n, r._evalTemplate && (o = e(i.template(e("<div />").append(t.clone(!0)).html())(r.model || {})), e.contains(document, t[0]) && t.replaceWith(o), t = o), r._wrap && (t = t.wrapAll(s).parent())), t } }), u = i.Class.extend({ init: function (t) { e.extend(this, { element: t.element.clone(!0), transition: t.transition, id: t.id }), t.element.parent().append(this.element) }, hideEnd: function () { this.element.remove() }, beforeTransition: e.noop, afterTransition: e.noop }), h = d.extend({ init: function (e, t) { d.fn.init.call(this, e, t), this.containers = {} }, container: function (e) { var t = this.containers[e]; return t || (t = this._createContainer(e), this.containers[e] = t), t }, showIn: function (e, t, i) { this.container(e).show(t, i) }, _createContainer: function (e) { var t, i = this.render(), n = i.find(e); if (!n.length && i.is(e)) { if (!i.is(e)) throw Error("can't find a container with the specified " + e + " selector"); n = i } return (t = new m(n)).bind("accepted", function (e) { e.view.render(n) }), t } }), f = d.extend({ attach: function (e, t) { e.element.find(t).replaceWith(this.render()) }, detach: function () { } }), p = /^(\w+)(:(\w+))?( (\w+))?$/, m = n.extend({ init: function (e) { n.fn.init.call(this), this.container = e, this.history = [], this.view = null, this.running = !1 }, after: function () { this.running = !1, this.trigger("complete", { view: this.view }), this.trigger("after") }, end: function () { this.view.showEnd(), this.previous.hideEnd(), this.after() }, show: function (e, t, n) { if (!e.triggerBeforeShow() || this.view && !this.view.triggerBeforeHide()) return this.trigger("after"), !1; n = n || e.id; var o = this, r = e === o.view ? e.clone() : o.view, s = o.history, a = s[s.length - 2] || {}, l = a.id === n, c = t || (l ? s[s.length - 1].transition : e.transition), d = function (e) { if (!e) return {}; var t = e.match(p) || []; return { type: t[1], direction: t[3], reverse: "reverse" === t[5] } }(c); return o.running && o.effect.stop(), "none" === c && (c = null), o.trigger("accepted", { view: e }), o.view = e, o.previous = r, o.running = !0, l ? s.pop() : s.push({ id: n, transition: c }), r ? (c && i.effects.enabled ? (e.element.addClass("k-fx-hidden"), e.showStart(), l && !t && (d.reverse = !d.reverse), o.effect = i.fx(e.element).replace(r.element, d.type).beforeTransition(function () { e.beforeTransition("show"), r.beforeTransition("hide") }).afterTransition(function () { e.afterTransition("show"), r.afterTransition("hide") }).direction(d.direction).setReverse(d.reverse), o.effect.run().then(function () { o.end() })) : (e.showStart(), o.end()), !0) : (e.showStart(), e.showEnd(), o.after(), !0) } }); i.ViewContainer = m, i.Fragment = f, i.Layout = h, i.View = d, i.ViewClone = u }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dom.min", ["kendo.core.min"], function () { return function (e) { function t() { this.node = null } function i() { } function n(e, t, i) { this.nodeName = e, this.attr = t || {}, this.children = i || [] } function o(e) { this.nodeValue = e + "" } function r(e) { this.html = e } function s(e) { return new r(e) } function a(e, t, i) { return new n(e, t, i) } function l(e) { return new o(e) } function c(e) { this.root = e, this.children = [] } var d, u; t.prototype = { remove: function () { this.node.parentNode && this.node.parentNode.removeChild(this.node), this.attr = {} }, attr: {}, text: function () { return "" } }, i.prototype = { nodeName: "#null", attr: { style: {} }, children: [], remove: function () { } }, d = new i, n.prototype = new t, n.prototype.appendTo = function (e) { var t, i = document.createElement(this.nodeName), n = this.children; for (t = 0; t < n.length; t++)n[t].render(i, d); return e.appendChild(i), i }, n.prototype.render = function (e, t) { var i, n, o, r, s, a; if (t.nodeName !== this.nodeName) t.remove(), i = this.appendTo(e); else { if (i = t.node, o = this.children, r = o.length, s = t.children, a = s.length, Math.abs(a - r) > 2) return void this.render({ appendChild: function (i) { e.replaceChild(i, t.node) } }, d); for (n = 0; n < r; n++)o[n].render(i, s[n] || d); for (n = r; n < a; n++)s[n].remove() } this.node = i, this.syncAttributes(t.attr), this.removeAttributes(t.attr) }, n.prototype.syncAttributes = function (e) { var t, i, n, o = this.attr; for (t in o) i = o[t], n = e[t], "style" === t ? this.setStyle(i, n) : i !== n && this.setAttribute(t, i, n) }, n.prototype.setStyle = function (e, t) { var i, n = this.node; if (t) for (i in e) e[i] !== t[i] && (n.style[i] = e[i]); else for (i in e) n.style[i] = e[i] }, n.prototype.removeStyle = function (e) { var t, i = this.attr.style || {}, n = this.node; for (t in e) void 0 === i[t] && (n.style[t] = "") }, n.prototype.removeAttributes = function (e) { var t, i = this.attr; for (t in e) "style" === t ? this.removeStyle(e.style) : void 0 === i[t] && this.removeAttribute(t) }, n.prototype.removeAttribute = function (e) { var t = this.node; "style" === e ? t.style.cssText = "" : "className" === e ? t.className = "" : t.removeAttribute(e) }, n.prototype.setAttribute = function (e, t) { var i = this.node; void 0 !== i[e] ? i[e] = t : i.setAttribute(e, t) }, n.prototype.text = function () { var e, t = ""; for (e = 0; e < this.children.length; ++e)t += this.children[e].text(); return t }, o.prototype = new t, o.prototype.nodeName = "#text", o.prototype.render = function (e, t) { var i; t.nodeName !== this.nodeName ? (t.remove(), i = document.createTextNode(this.nodeValue), e.appendChild(i)) : (i = t.node, this.nodeValue !== t.nodeValue && i.parentNode && (i.nodeValue = this.nodeValue)), this.node = i }, o.prototype.text = function () { return this.nodeValue }, r.prototype = { nodeName: "#html", attr: {}, remove: function () { var e, t; for (e = 0; e < this.nodes.length; e++)(t = this.nodes[e]).parentNode && t.parentNode.removeChild(t) }, render: function (e, t) { var i, n; if (t.nodeName !== this.nodeName || t.html !== this.html) for (t.remove(), i = e.lastChild, function (e, t) { for (u.innerHTML = t; u.firstChild;)e.appendChild(u.firstChild) }(e, this.html), this.nodes = [], n = i ? i.nextSibling : e.firstChild; n; n = n.nextSibling)this.nodes.push(n); else this.nodes = t.nodes.slice(0) } }, u = document.createElement("div"), c.prototype = { html: s, element: a, text: l, render: function (e) { var t, i, n, o = this.children; for (t = 0, i = e.length; t < i; t++)(n = o[t]) ? n.node && n.node.parentNode || (n.remove(), n = d) : n = d, e[t].render(this.root, n); for (t = i; t < o.length; t++)o[t].remove(); this.children = e } }, e.dom = { html: s, text: l, element: a, Tree: c, Node: t } }(window.kendo), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.ooxml.min", ["kendo.core.min"], function () { return function (e, t) { function i(e) { var t = Math.floor(e / 26) - 1; return (t >= 0 ? i(t) : "") + String.fromCharCode(65 + e % 26) } function n(e, t) { return i(t) + (e + 1) } function o(e, t) { return i(t) + "$" + (e + 1) } function r(e) { var t = e.frozenRows || (e.freezePane || {}).rowSplit || 1; return t - 1 } function s(e) { return e.length < 6 && (e = e.replace(/(\w)/g, function (e, t) { return t + t })), (e = e.substring(1).toUpperCase()).length < 8 && (e = "FF" + e), e } function a(e, t) { var i = ""; return t && (i += "<" + e + ' style="' + function (e) { var t = "thin"; return 2 === e ? t = "medium" : 3 === e && (t = "thick"), t }(t.size) + '">', t.color && (i += '<color rgb="' + s(t.color) + '"/>'), i += "</" + e + ">"), i } function l(e) { return e.sort(function (e, t) { return e.index - t.index }) } function c(e, t) { e.indexOf(t) < 0 && e.push(t) } function d(e, t) { var i, n, o, r; for (t = t, i = 0; i < e.length; ++i)if (n = e[i], (o = n.substr(0, 2)) == t) return r = n.substr(3), o = u(o), { rowSpan: (r = u(r)).row - o.row + 1, colSpan: r.col - o.col + 1 } } function u(e) { var t = /^([a-z]+)(\d+)$/i.exec(e); return { row: function (e) { return parseInt(e, 10) - 1 }(t[2]), col: function (e) { e = e.toUpperCase(); for (var t = 0, i = 0; i < e.length; ++i)t = 26 * t + e.charCodeAt(i) - 64; return t - 1 }(t[1]) } } function h(e, t) { var i, o, r, s, a, l, u, h, p, g = e._source, v = e.index, _ = g.cells, b = e.cells; if (_) for (i = 0; i < _.length; i++)if (o = _[i] || R, r = o.rowSpan || 1, s = o.colSpan || 1, a = f(b, o), l = n(v, a), 1 == r && 1 == s && ((u = d(t.mergedCells, l)) && (s = u.colSpan, r = u.rowSpan)), m(o, b, a, s), (r > 1 || s > 1) && c(t.mergedCells, l + ":" + n(v + r - 1, a + s - 1)), r > 1) for (h = v + 1; h < v + r; h++)(p = t.rowsByIndex[h]) || (p = t.rowsByIndex[h] = { index: h, cells: [] }, t.rowData.push(p)), m(o, p.cells, a - 1, s + 1) } function f(e, t) { var i; return "number" == typeof t.index ? (i = t.index, p(e, t, t.index)) : i = function (e, t) { var i, n = e.length; for (i = 0; i < e.length + 1; i++)if (!e[i]) { e[i] = t, n = i; break } return n }(e, t), i } function p(e, t, i) { e[i] = t } function m(e, t, i, n) { var o, r; for (o = 1; o < n; o++)r = { borderTop: e.borderTop, borderRight: e.borderRight, borderBottom: e.borderBottom, borderLeft: e.borderLeft }, p(t, r, i + o) } function g(e) { return F({ ref: e.ref, columns: e.columns, generators: { custom: z, dynamic: P, top: B, value: L } }) } var v = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'), _ = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'), b = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'), w = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## var options = sheets[idx].options; ## var name = options.name || options.title ## if (name) { #<sheet name="${name}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets># if (filterNames.length || userNames.length) { #<definedNames> # for (var di = 0; di < filterNames.length; di++) { #<definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="${filterNames[di].localSheetId}">${filterNames[di].name}!$${filterNames[di].from}:$${filterNames[di].to}</definedName> # } # # for (var i = 0; i < userNames.length; ++i) { #<definedName name="${userNames[i].name}" hidden="${userNames[i].hidden ? 1 : 0}" # if (userNames[i].localSheetId != null) { # localSheetId="${userNames[i].localSheetId}" # } #>${userNames[i].value}</definedName> # } #</definedNames># } #<calcPr fullCalcOnLoad="1" calcId="145621" /></workbook>'), y = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView #if(index==0) {# tabSelected="1" #}# workbookViewId="0" #if (showGridLines === false) {# showGridLines="0" #}#># if (frozenRows || frozenColumns) { #<pane state="frozen"# if (frozenColumns) { # xSplit="${frozenColumns}"# } ## if (frozenRows) { # ySplit="${frozenRows}"# } # topLeftCell="${String.fromCharCode(65 + (frozenColumns || 0))}${(frozenRows || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr x14ac:dyDescent="0.25" defaultRowHeight="#= defaults.rowHeight ? defaults.rowHeight * 0.75 : 15 #" # if (defaults.columnWidth) { # defaultColWidth="#= kendo.ooxml.toWidth(defaults.columnWidth) #" # } # /># if (defaultCellStyleId != null || (columns && columns.length > 0)) { #<cols># if (!columns || !columns.length) { #<col min="1" max="16384" style="${defaultCellStyleId}" # if (defaults.columnWidth) { # width="#= kendo.ooxml.toWidth(defaults.columnWidth) #" # } # /># } ## for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1); ## if (column.width === 0) { #<col #if(defaultCellStyleId!=null){# style="${defaultCellStyleId}" #}#min="${columnIndex}" max="${columnIndex}" hidden="1" customWidth="1" /># } else if (column.width) { #<col #if(defaultCellStyleId!=null){# style="${defaultCellStyleId}" #}#min="${columnIndex}" max="${columnIndex}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="#= kendo.ooxml.toWidth(column.width) #" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; ## var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1); #<row r="${rowIndex}" x14ac:dyDescent="0.25" # if (row.height === 0) { # hidden="1" # }   else if (row.height) { # ht="#= kendo.ooxml.toHeight(row.height) #" customHeight="1" # } # ># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="#=cell.ref#"# if (cell.style) { # s="#=cell.style#" # } ## if (cell.type) { # t="#=cell.type#"# } #># if (cell.formula != null) { #<f>${cell.formula}</f># } ## if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (autoFilter) { #<autoFilter ref="${autoFilter.from}:${autoFilter.to}"/># } else if (filter) { ##= kendo.ooxml.spreadsheetFilters(filter) ## } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } ## if (validations.length) { #<dataValidations># for (var vi = 0; vi < validations.length; vi++) { ## var val = validations[vi]; #<dataValidation sqref="#= val.sqref.join(" ") #" showErrorMessage="#= val.showErrorMessage #" type="#= val.type #"# if (val.type != "list") {# operator="#= val.operator #" # } # allowBlank="#= val.allowBlank #" showDropDown="#= val.showDropDown #"# if (val.error) {# error="#= val.error #" # } ## if (val.errorTitle) {# errorTitle="#= val.errorTitle #" # } #># if (val.formula1) { #<formula1>#: val.formula1 #</formula1># } ## if (val.formula2) { #<formula2>#: val.formula2 #</formula2># } #</dataValidation># } #</dataValidations># } ## if (hyperlinks.length) { #<hyperlinks># for (var hi = 0; hi < hyperlinks.length; hi++) { #<hyperlink ref="${hyperlinks[hi].ref}" r:id="rId${hi}"/># } #</hyperlinks># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'), k = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'), x = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var i = 0; i < hyperlinks.length; i++) { #<Relationship Id="rId${i}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="${hyperlinks[i].target}" TargetMode="External" /># } #</Relationships>'), C = t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'), S = t.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontFamily) { #<name val="${font.fontFamily}" /><family val="2" /># } else { #<name val="Calibri" /><family val="2" /><scheme val="minor" /># } #</font># } #</fonts><fills count="${fills.length+2}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="${borders.length+1}"><border><left/><right/><top/><bottom/><diagonal/></border># for (var bi = 0; bi < borders.length; bi++) { ##= kendo.ooxml.borderTemplate(borders[bi]) ## } #</borders><cellStyleXfs count="1"><xf borderId="0" fillId="0" fontId="0" /></cellStyleXfs><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfId="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.textAlign || style.verticalAlign || style.wrap) { # applyAlignment="1"# } ## if (style.borderId) { # borderId="${style.borderId}" applyBorder="1"# } #># if (style.textAlign || style.verticalAlign || style.wrap) { #<alignment# if (style.textAlign) { # horizontal="${style.textAlign}"# } ## if (style.verticalAlign) { # vertical="${style.verticalAlign}"# } ## if (style.wrap) { # wrapText="1"# } #/># } #</xf># } #</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'), T = new Date(1900, 0, 0), D = t.Class.extend({ init: function (e, t, i, n) { this.options = e, this._strings = t, this._styles = i, this._borders = n, this._validations = {} }, relsToXML: function () { var e = this.options.hyperlinks || []; return e.length ? x({ hyperlinks: e }) : "" }, toXML: function (e) { var t, i, o, s, a, c, d = this.options.mergedCells || [], u = this.options.rows || [], f = function (e, t) { var i, n, o, r = [], s = []; for (function (e, t) { var i, n, o; for (i = 0; i < e.length; i++)(n = e[i]) && ("number" != typeof (o = n.index) && (o = i), t(n, o)) }(e, function (e, t) { var i = { _source: e, index: t, height: e.height, cells: [] }; r.push(i), s[t] = i }), i = l(r).slice(0), n = { rowData: r, rowsByIndex: s, mergedCells: t }, o = 0; o < i.length; o++)h(i[o], n), delete i[o]._source; return l(r) }(u, d); for (s in this._readCells(f), (t = this.options.filter) && "number" == typeof t.from && "number" == typeof t.to ? t = { from: n(r(this.options), t.from), to: n(r(this.options), t.to) } : t && t.ref && t.columns && (i = t, t = null), o = [], this._validations) Object.prototype.hasOwnProperty.call(this._validations, s) && o.push(this._validations[s]); return a = null, this.options.defaultCellStyle && (a = this._lookupStyle(this.options.defaultCellStyle)), c = this.options.freezePane || {}, y({ frozenColumns: this.options.frozenColumns || c.colSplit, frozenRows: this.options.frozenRows || c.rowSplit, columns: this.options.columns, defaults: this.options.defaults || {}, data: f, index: e, mergeCells: d, autoFilter: t, filter: i, showGridLines: this.options.showGridLines, hyperlinks: this.options.hyperlinks || [], validations: o, defaultCellStyleId: a }) }, _lookupString: function (e) { var t = "$" + e, i = this._strings.indexes[t]; return void 0 !== i ? e = i : (e = this._strings.indexes[t] = this._strings.uniqueCount, this._strings.uniqueCount++), this._strings.count++, e }, _lookupStyle: function (i) { var n, o = t.stringify(i); return "{}" == o ? 0 : ((n = e.inArray(o, this._styles)) < 0 && (n = this._styles.push(o) - 1), n + 1) }, _lookupBorder: function (i) { var n, o = t.stringify(i); if ("{}" != o) return (n = e.inArray(o, this._borders)) < 0 && (n = this._borders.push(o) - 1), n + 1 }, _readCells: function (e) { var t, i, n, o, r; for (t = 0; t < e.length; t++)for (i = e[t], n = i.cells, i.data = [], o = 0; o < n.length; o++)(r = this._cell(n[o], i.index, o)) && i.data.push(r) }, _cell: function (e, i, o) { var r, s, a, l, c, d, u, h, f, p; return e && e !== R ? (r = e.value, s = {}, e.borderLeft && (s.left = e.borderLeft), e.borderRight && (s.right = e.borderRight), e.borderTop && (s.top = e.borderTop), e.borderBottom && (s.bottom = e.borderBottom), s = this._lookupBorder(s), a = this.options.defaultCellStyle || {}, l = { borderId: s }, function (e) { e("color"), e("background"), e("bold"), e("italic"), e("underline"), e("fontFamily") || e("fontName", "fontFamily"), e("fontSize"), e("format"), e("textAlign") || e("hAlign", "textAlign"), e("verticalAlign") || e("vAlign", "verticalAlign"), e("wrap") }(function (t, i) { var n = e[t]; if (void 0 === n && (n = a[t]), void 0 !== n) return l[i || t] = n, !0 }), c = this.options.columns || [], d = c[o], u = typeof r, d && d.autoWidth && (h = r, "number" === u && (h = t.toString(r, e.format)), d.width = Math.max(d.width || 0, (h + "").length)), "string" === u ? (r = function (e) { return (e + "").replace(/[\x00-\x08]/g, "").replace(/\n/g, "\r\n") }(r), r = this._lookupString(r), u = "s") : "number" === u ? u = "n" : "boolean" === u ? (u = "b", r = +r) : r && r.getTime ? (u = null, f = (r.getTimezoneOffset() - T.getTimezoneOffset()) * t.date.MS_PER_MINUTE, r = (r - T - f) / t.date.MS_PER_DAY + 1, l.format || (l.format = "mm-dd-yy")) : (u = null, r = null), l = this._lookupStyle(l), p = n(i, o), e.validation && this._addValidation(e.validation, p), { value: r, formula: e.formula, type: u, style: l, ref: p }) : null }, _addValidation: function (e, t) { var i = { showErrorMessage: "reject" == e.type ? 1 : 0, formula1: e.from, formula2: e.to, type: E[e.dataType] || e.dataType, operator: A[e.comparerType] || e.comparerType, allowBlank: e.allowNulls ? 1 : 0, showDropDown: e.showButton ? 0 : 1, error: e.messageTemplate, errorTitle: e.titleTemplate }, n = JSON.stringify(i); this._validations[n] || (this._validations[n] = i, i.sqref = []), this._validations[n].sqref.push(t) } }), A = { greaterThanOrEqualTo: "greaterThanOrEqual", lessThanOrEqualTo: "lessThanOrEqual" }, E = { number: "decimal" }, I = { General: 0, 0: 1, "0.00": 2, "#,##0": 3, "#,##0.00": 4, "0%": 9, "0.00%": 10, "0.00E+00": 11, "# ?/?": 12, "# ??/??": 13, "mm-dd-yy": 14, "d-mmm-yy": 15, "d-mmm": 16, "mmm-yy": 17, "h:mm AM/PM": 18, "h:mm:ss AM/PM": 19, "h:mm": 20, "h:mm:ss": 21, "m/d/yy h:mm": 22, "#,##0 ;(#,##0)": 37, "#,##0 ;[Red](#,##0)": 38, "#,##0.00;(#,##0.00)": 39, "#,##0.00;[Red](#,##0.00)": 40, "mm:ss": 45, "[h]:mm:ss": 46, "mmss.0": 47, "##0.0E+0": 48, "@": 49, "[$-404]e/m/d": 27, "m/d/yy": 30, t0: 59, "t0.00": 60, "t#,##0": 61, "t#,##0.00": 62, "t0%": 67, "t0.00%": 68, "t# ?/?": 69, "t# ??/??": 70 }, M = t.Class.extend({ init: function (t) { this.options = t || {}, this._strings = { indexes: {}, count: 0, uniqueCount: 0 }, this._styles = [], this._borders = [], this._sheets = e.map(this.options.sheets || [], e.proxy(function (e) { return e.defaults = this.options, new D(e, this._strings, this._styles, this._borders) }, this)) }, toDataURL: function () { var i, n, a, l, c, d, u, h, f, p, m, g, y, x, T, D, A; if ("undefined" == typeof JSZip) throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details."); for (i = new JSZip, (n = i.folder("docProps")).file("core.xml", v({ creator: this.options.creator || "Kendo UI", lastModifiedBy: this.options.creator || "Kendo UI", created: this.options.date || (new Date).toJSON(), modified: this.options.date || (new Date).toJSON() })), a = this._sheets.length, n.file("app.xml", _({ sheets: this._sheets })), i.folder("_rels").file(".rels", '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>'), l = i.folder("xl"), l.folder("_rels").file("workbook.xml.rels", k({ count: a })), c = {}, l.file("workbook.xml", w({ sheets: this._sheets, filterNames: e.map(this._sheets, function (e, t) { var i, n = e.options, s = n.name || n.title || "Sheet" + (t + 1); if (c[s.toLowerCase()] = t, (i = n.filter) && void 0 !== i.from && void 0 !== i.to) return { localSheetId: t, name: s, from: o(r(n), i.from), to: o(r(n), i.to) } }), userNames: e.map(this.options.names || [], function (e) { return { name: e.localName, localSheetId: e.sheet ? c[e.sheet.toLowerCase()] : null, value: e.value, hidden: e.hidden } }) })), d = l.folder("worksheets"), u = d.folder("_rels"), h = 0; h < a; h++)f = this._sheets[h], p = t.format("sheet{0}.xml", h + 1), (m = f.relsToXML()) && u.file(p + ".rels", m), d.file(p, f.toXML(h)); return g = e.map(this._borders, e.parseJSON), y = e.map(this._styles, e.parseJSON), x = function (e) { return e.underline || e.bold || e.italic || e.color || e.fontFamily || e.fontSize }, T = e.map(y, function (e) { if (e.color && (e.color = s(e.color)), x(e)) return e }), D = e.map(y, function (e) { if (e.format && void 0 === I[e.format]) return e }), A = e.map(y, function (e) { if (e.background) return e.background = s(e.background), e }), l.file("styles.xml", S({ fonts: T, fills: A, formats: D, borders: g, styles: e.map(y, function (t) { var i = {}; return x(t) && (i.fontId = e.inArray(t, T) + 1), t.background && (i.fillId = e.inArray(t, A) + 2), i.textAlign = t.textAlign, i.verticalAlign = t.verticalAlign, i.wrap = t.wrap, i.borderId = t.borderId, t.format && (i.numFmtId = void 0 !== I[t.format] ? I[t.format] : 165 + e.inArray(t, D)), i }) })), l.file("sharedStrings.xml", C(this._strings)), i.file("[Content_Types].xml", b({ count: a })), "data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64," + i.generate({ compression: "DEFLATE" }) } }), R = {}, F = t.template('<autoFilter ref="${ref}"># for (var i = 0; i < columns.length; ++i) { ## var col = columns[i]; #<filterColumn colId="${col.index}">#= generators[col.filter](col) #</filterColumn># } #</autoFilter>'), z = t.template('<customFilters# if (logic == "and") {# and="1"# } #># for (var i = 0; i < criteria.length; ++i) { ## var f = criteria[i]; ## var op = kendo.ooxml.spreadsheetFilters.customOperator(f); ## var val = kendo.ooxml.spreadsheetFilters.customValue(f); #<customFilter# if (op) {# operator="${op}"#}# val="${val}"/># } #</customFilters>'), P = t.template('<dynamicFilter type="${kendo.ooxml.spreadsheetFilters.dynamicFilterType(type)}" />'), B = t.template('<top10 percent="#= /percent$/i.test(type) ? 1 : 0 #" top="#= /^top/i.test(type) ? 1 : 0 #"  val="#: value #" />'), L = t.template('<filters# if (blanks) {# blank="1"#}#># for (var i = 0; i < values.length; ++i) { #<filter val="${values[i]}" /># } #</filters>'); g.customOperator = function (e) { return { eq: "equal", gt: "greaterThan", gte: "greaterThanOrEqual", lt: "lessThan", lte: "lessThanOrEqual", ne: "notEqual", doesnotstartwith: "notEqual", doesnotendwith: "notEqual", doesnotcontain: "notEqual", doesnotmatch: "notEqual" }[e.operator.toLowerCase()] }, g.customValue = function (e) { function t(e) { return e.replace(/([*?])/g, "~$1") } switch (e.operator.toLowerCase()) { case "startswith": case "doesnotstartwith": return t(e.value) + "*"; case "endswith": case "doesnotendwith": return "*" + t(e.value); case "contains": case "doesnotcontain": return "*" + t(e.value) + "*" }return e.value }, g.dynamicFilterType = function (e) { return { quarter1: "Q1", quarter2: "Q2", quarter3: "Q3", quarter4: "Q4", january: "M1", february: "M2", march: "M3", april: "M4", may: "M5", june: "M6", july: "M7", august: "M8", september: "M9", october: "M10", november: "M11", december: "M12" }[e.toLowerCase()] || e }, t.ooxml = { Workbook: M, Worksheet: D, toWidth: function (e) { return (e / 7 * 100 + .5) / 100 }, toHeight: function (e) { return .75 * e }, borderTemplate: function (e) { return "<border>" + a("left", e.left) + a("right", e.right) + a("top", e.top) + a("bottom", e.bottom) + "</border>" }, spreadsheetFilters: g } }(kendo.jQuery, kendo), kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.excel.min", ["kendo.core.min", "kendo.data.min", "kendo.ooxml.min"], function () { return e = kendo.jQuery, t = kendo, t.ExcelExporter = t.Class.extend({ init: function (i) { var n, o, r; i.columns = this._trimColumns(i.columns || []), this.allColumns = e.map(this._leafColumns(i.columns || []), this._prepareColumn), this.columns = e.grep(this.allColumns, function (e) { return !e.hidden }), this.options = i, (n = i.dataSource) instanceof t.data.DataSource ? (this.dataSource = new n.constructor(e.extend({}, n.options, { page: i.allPages ? 0 : n.page(), filter: n.filter(), pageSize: i.allPages ? n.total() : n.pageSize(), sort: n.sort(), group: n.group(), aggregate: n.aggregate() })), (o = n.data()).length > 0 && (this.dataSource._data = o, r = this.dataSource.transport, n._isServerGrouped() && r.options && r.options.data && (r.options.data = null))) : this.dataSource = t.data.DataSource.create(n) }, _trimColumns: function (t) { var i = this; return e.grep(t, function (e) { var t = !!e.field; return !t && e.columns && (t = i._trimColumns(e.columns).length > 0), t }) }, _leafColumns: function (e) { var t, i = []; for (t = 0; t < e.length; t++)e[t].columns ? i = i.concat(this._leafColumns(e[t].columns)) : i.push(e[t]); return i }, workbook: function () { return e.Deferred(e.proxy(function (t) { this.dataSource.fetch().then(e.proxy(function () { var e = { sheets: [{ columns: this._columns(), rows: this._rows(), freezePane: this._freezePane(), filter: this._filter() }] }; t.resolve(e, this.dataSource.view()) }, this)) }, this)).promise() }, _prepareColumn: function (i) { var n, o; if (i.field) return n = function (e) { return e.get(i.field) }, o = null, i.values && (o = {}, e.each(i.values, function () { o[this.value] = this.text }), n = function (e) { return o[e.get(i.field)] }), e.extend({}, i, { value: n, values: o, groupHeaderTemplate: t.template(i.groupHeaderTemplate || "#= title #: #= value #"), groupFooterTemplate: i.groupFooterTemplate ? t.template(i.groupFooterTemplate) : null, footerTemplate: i.footerTemplate ? t.template(i.footerTemplate) : null }) }, _filter: function () { if (!this.options.filterable) return null; var e = this._depth(); return { from: e, to: e + this.columns.length - 1 } }, _dataRow: function (t, i, n) { var o, r, s, a, l, c, d, u, h, f; for (this._hierarchical() && (i = this.dataSource.level(t) + 1), o = [], r = 0; r < i; r++)o[r] = { background: "#dfdfdf", color: "#333" }; if (n && t.items) return s = e.grep(this.allColumns, function (e) { return e.field == t.field })[0], a = s && s.title ? s.title : t.field, l = s ? s.groupHeaderTemplate : null, c = a + ": " + t.value, d = e.extend({ title: a, field: t.field, value: s && s.values ? s.values[t.value] : t.value, aggregates: t.aggregates, items: t.items }, t.aggregates[t.field]), l && (c = l(d)), o.push({ value: c, background: "#dfdfdf", color: "#333", colSpan: this.columns.length + n - i }), (u = this._dataRows(t.items, i + 1)).unshift({ type: "group-header", cells: o }), u.concat(this._footer(t)); for (h = [], f = 0; f < this.columns.length; f++)h[f] = this._cell(t, this.columns[f]); return this._hierarchical() && (h[0].colSpan = n - i + 1), [{ type: "data", cells: o.concat(h) }] }, _dataRows: function (e, t) { var i, n = this._depth(), o = []; for (i = 0; i < e.length; i++)o.push.apply(o, this._dataRow(e[i], t, n)); return o }, _footer: function (t) { var i = [], n = !1, o = e.map(this.columns, e.proxy(function (i) { if (i.groupFooterTemplate) { var o = { group: { items: t.items, field: t.field, value: t.value } }; return n = !0, { background: "#dfdfdf", color: "#333", value: i.groupFooterTemplate(e.extend({}, this.dataSource.aggregates(), t.aggregates, t.aggregates[i.field], o)) } } return { background: "#dfdfdf", color: "#333" } }, this)); return n && i.push({ type: "group-footer", cells: e.map(Array(this.dataSource.group().length), function () { return { background: "#dfdfdf", color: "#333" } }).concat(o) }), i }, _isColumnVisible: function (e) { return this._visibleColumns([e]).length > 0 && (e.field || e.columns) }, _visibleColumns: function (t) { var i = this; return e.grep(t, function (e) { var t = !e.hidden; return t && e.columns && (t = i._visibleColumns(e.columns).length > 0), t }) }, _headerRow: function (t, i) { var n = e.map(t.cells, function (e) { return { background: "#7a7a7a", color: "#fff", value: e.title, colSpan: e.colSpan > 1 ? e.colSpan : 1, rowSpan: t.rowSpan > 1 && !e.colSpan ? t.rowSpan : 1 } }); return this._hierarchical() && (n[0].colSpan = this._depth() + 1), { type: "header", cells: e.map(Array(i.length), function () { return { background: "#7a7a7a", color: "#fff" } }).concat(n) } }, _prependHeaderRows: function (e) { var t, i = this.dataSource.group(), n = [{ rowSpan: 1, cells: [], index: 0 }]; for (this._prepareHeaderRows(n, this.options.columns), t = n.length - 1; t >= 0; t--)e.unshift(this._headerRow(n[t], i)) }, _prepareHeaderRows: function (e, t, i, n) { var o, r, s, a = n || e[e.length - 1], l = e[a.index + 1], c = 0; for (s = 0; s < t.length; s++)o = t[s], this._isColumnVisible(o) && (r = { title: o.title || o.field, colSpan: 0 }, a.cells.push(r), o.columns && o.columns.length && (l || (l = { rowSpan: 0, cells: [], index: e.length }, e.push(l)), r.colSpan = this._trimColumns(this._visibleColumns(o.columns)).length, this._prepareHeaderRows(e, o.columns, r, l), c += r.colSpan - 1, a.rowSpan = e.length - a.index)); i && (i.colSpan += c) }, _rows: function () { var t, i, n = this.dataSource.group(), o = this._dataRows(this.dataSource.view(), 0); return this.columns.length && (this._prependHeaderRows(o), t = !1, i = e.map(this.columns, e.proxy(function (i) { if (i.footerTemplate) { t = !0; var n = this.dataSource.aggregates(); return { background: "#dfdfdf", color: "#333", value: i.footerTemplate(e.extend({}, n, n[i.field])) } } return { background: "#dfdfdf", color: "#333" } }, this)), t && o.push({ type: "footer", cells: e.map(Array(n.length), function () { return { background: "#dfdfdf", color: "#333" } }).concat(i) })), o }, _headerDepth: function (e) { var t, i, n = 0; for (t = 0; t < e.length; t++)e[t].columns && (i = this._headerDepth(e[t].columns)) > n && (n = i); return 1 + n }, _freezePane: function () { var t = this._visibleColumns(this.options.columns || []), i = this._visibleColumns(this._trimColumns(this._leafColumns(e.grep(t, function (e) { return e.locked })))).length; return { rowSplit: this._headerDepth(t), colSplit: i ? i + this.dataSource.group().length : 0 } }, _cell: function (e, t) { return { value: t.value(e) } }, _hierarchical: function () { return this.options.hierarchy && this.dataSource.level }, _depth: function () { var e, t, i, n = this.dataSource, o = 0; if (this._hierarchical()) { for (e = n.view(), t = 0; t < e.length; t++)(i = n.level(e[t])) > o && (o = i); o++ } else o = n.group().length; return o }, _columns: function () { var t = this._depth(), i = e.map(Array(t), function () { return { width: 20 } }); return i.concat(e.map(this.columns, function (e) { return { width: parseInt(e.width, 10), autoWidth: !e.width } })) } }), t.ExcelMixin = { extend: function (t) { t.events.push("excelExport"), t.options.excel = e.extend(t.options.excel, this.options), t.saveAsExcel = this.saveAsExcel }, options: { proxyURL: "", allPages: !1, filterable: !1, fileName: "Export.xlsx" }, saveAsExcel: function () { var i = this.options.excel || {}, n = new t.ExcelExporter({ columns: this.columns, dataSource: this.dataSource, allPages: i.allPages, filterable: i.filterable, hierarchy: i.hierarchy }); n.workbook().then(e.proxy(function (e, n) { if (!this.trigger("excelExport", { workbook: e, data: n })) { var o = new t.ooxml.Workbook(e); t.saveAs({ dataURI: o.toDataURL(), fileName: e.fileName || i.fileName, proxyURL: i.proxyURL, forceProxy: i.forceProxy }) } }, this)) } }, kendo; var e, t }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.data.signalr.min", ["kendo.data.min"], function () { return e = window.kendo.jQuery, t = kendo.data.RemoteTransport.extend({ init: function (e) { var t, i = e && e.signalr ? e.signalr : {}, n = i.promise; if (!n) throw Error('The "promise" option must be set.'); if ("function" != typeof n.done || "function" != typeof n.fail) throw Error('The "promise" option must be a Promise.'); if (this.promise = n, !(t = i.hub)) throw Error('The "hub" option must be set.'); if ("function" != typeof t.on || "function" != typeof t.invoke) throw Error('The "hub" option is not a valid SignalR hub proxy.'); this.hub = t, kendo.data.RemoteTransport.fn.init.call(this, e) }, push: function (e) { var t = this.options.signalr.client || {}; t.create && this.hub.on(t.create, e.pushCreate), t.update && this.hub.on(t.update, e.pushUpdate), t.destroy && this.hub.on(t.destroy, e.pushDestroy) }, _crud: function (t, i) { var n, o, r = this.hub, s = this.options.signalr.server; if (!s || !s[i]) throw Error(kendo.format('The "server.{0}" option must be set.', i)); n = [s[i]], o = this.parameterMap(t.data, i), e.isEmptyObject(o) || n.push(o), this.promise.done(function () { r.invoke.apply(r, n).done(t.success).fail(t.error) }) }, read: function (e) { this._crud(e, "read") }, create: function (e) { this._crud(e, "create") }, update: function (e) { this._crud(e, "update") }, destroy: function (e) { this._crud(e, "destroy") } }), e.extend(!0, kendo.data, { transports: { signalr: t } }), window.kendo; var e, t }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("drawing/util.min", ["kendo.core.min"], function () { return function (e) { kendo.drawing.util = kendo.drawing.util || {}, kendo.deepExtend(kendo.drawing.util, { createPromise: function () { return e.Deferred() }, promiseAll: function (t) { return e.when.apply(e, t) } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.color.min", ["kendo.core.min"], function () { function e(e, t, i) { void 0 === i && (i = "0"); for (var n = e.toString(16); t > n.length;)n = i + n; return n } function t(e, t, i) { var n = i; return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + (t - e) * (2 / 3 - n) * 6 : e } function i(e, t) { var n, o, s; if (null == e || "none" === e) return null; if (e instanceof c) return e; if (s = e.toLowerCase(), n = a.exec(s)) return (s = "transparent" === n[1] ? new d(1, 1, 1, 0) : i(r[n[1]], t)).match = [n[1]], s; if ((n = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(s)) ? o = new u(parseInt(n[1], 16), parseInt(n[2], 16), parseInt(n[3], 16), 1) : (n = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(s)) ? o = new u(parseInt(n[1] + n[1], 16), parseInt(n[2] + n[2], 16), parseInt(n[3] + n[3], 16), 1) : (n = /^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(s)) ? o = new u(parseInt(n[1], 10), parseInt(n[2], 10), parseInt(n[3], 10), 1) : (n = /^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(s)) ? o = new u(parseInt(n[1], 10), parseInt(n[2], 10), parseInt(n[3], 10), parseFloat(n[4])) : (n = /^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(s)) ? o = new d(parseFloat(n[1]) / 100, parseFloat(n[2]) / 100, parseFloat(n[3]) / 100, 1) : (n = /^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(s)) && (o = new d(parseFloat(n[1]) / 100, parseFloat(n[2]) / 100, parseFloat(n[3]) / 100, parseFloat(n[4]))), o) o.match = n; else if (!t) throw Error("Cannot parse color: " + s); return o } var n, o, r, s, a, l, c, d, u, h, f, p; for (l in window.kendo = window.kendo || {}, n = kendo.Class, o = kendo.support, r = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "00ffff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000000", blanchedalmond: "ffebcd", blue: "0000ff", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "00ffff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgrey: "a9a9a9", darkgreen: "006400", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkslategrey: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dimgrey: "696969", dodgerblue: "1e90ff", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "ff00ff", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", grey: "808080", green: "008000", greenyellow: "adff2f", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgray: "d3d3d3", lightgrey: "d3d3d3", lightgreen: "90ee90", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslategray: "778899", lightslategrey: "778899", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "00ff00", limegreen: "32cd32", linen: "faf0e6", magenta: "ff00ff", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370d8", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "d87093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", red: "ff0000", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", slategrey: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "ffffff", whitesmoke: "f5f5f5", yellow: "ffff00", yellowgreen: "9acd32" }, s = o.browser, a = ["transparent"], r) r.hasOwnProperty(l) && a.push(l); a = RegExp("^(" + a.join("|") + ")(\\W|$)", "i"), c = n.extend({ init: function () { }, toHSV: function () { return this }, toRGB: function () { return this }, toHex: function () { return this.toBytes().toHex() }, toBytes: function () { return this }, toCss: function () { return "#" + this.toHex() }, toCssRgba: function () { var e = this.toBytes(); return "rgba(" + e.r + ", " + e.g + ", " + e.b + ", " + parseFloat((+this.a).toFixed(3)) + ")" }, toDisplay: function () { return s.msie && s.version < 9 ? this.toCss() : this.toCssRgba() }, equals: function (e) { return e === this || null !== e && this.toCssRgba() === i(e).toCssRgba() }, diff: function (e) { var t, i; return null === e ? NaN : (t = this.toBytes(), i = e.toBytes(), Math.sqrt(Math.pow(.3 * (t.r - i.r), 2) + Math.pow(.59 * (t.g - i.g), 2) + Math.pow(.11 * (t.b - i.b), 2))) }, clone: function () { var e = this.toBytes(); return e === this && (e = new u(e.r, e.g, e.b, e.a)), e } }), d = c.extend({ init: function (e, t, i, n) { c.fn.init.call(this), this.r = e, this.g = t, this.b = i, this.a = n }, toHSV: function () { var e, t, i = this, n = i.r, o = i.g, r = i.b, s = Math.min(n, o, r), a = Math.max(n, o, r), l = a - s, c = a; return 0 === l ? new h(0, 0, c, this.a) : (0 !== a ? (t = l / a, e = n === a ? (o - r) / l : o === a ? 2 + (r - n) / l : 4 + (n - o) / l, (e *= 60) < 0 && (e += 360)) : (t = 0, e = -1), new h(e, t, c, this.a)) }, toHSL: function () { var e, t, i, n = this, o = n.r, r = n.g, s = n.b, a = Math.max(o, r, s), l = Math.min(o, r, s), c = (a + l) / 2; if (a === l) e = t = 0; else { switch (i = a - l, t = c > .5 ? i / (2 - a - l) : i / (a + l), a) { case o: e = (r - s) / i + (r < s ? 6 : 0); break; case r: e = (s - o) / i + 2; break; case s: e = (o - r) / i + 4 }e *= 60, t *= 100, c *= 100 } return new f(e, t, c, this.a) }, toBytes: function () { return new u(255 * this.r, 255 * this.g, 255 * this.b, this.a) } }), u = d.extend({ init: function (e, t, i, n) { d.fn.init.call(this, Math.round(e), Math.round(t), Math.round(i), n) }, toRGB: function () { return new d(this.r / 255, this.g / 255, this.b / 255, this.a) }, toHSV: function () { return this.toRGB().toHSV() }, toHSL: function () { return this.toRGB().toHSL() }, toHex: function () { return e(this.r, 2) + e(this.g, 2) + e(this.b, 2) }, toBytes: function () { return this } }), h = c.extend({ init: function (e, t, i, n) { c.fn.init.call(this), this.h = e, this.s = t, this.v = i, this.a = n }, toRGB: function () { var e, t, i, n, o, r, s, a, l = this, c = l.h, u = l.s, h = l.v; if (0 === u) e = t = i = h; else switch (c /= 60, n = Math.floor(c), o = c - n, r = h * (1 - u), s = h * (1 - u * o), a = h * (1 - u * (1 - o)), n) { case 0: e = h, t = a, i = r; break; case 1: e = s, t = h, i = r; break; case 2: e = r, t = h, i = a; break; case 3: e = r, t = s, i = h; break; case 4: e = a, t = r, i = h; break; default: e = h, t = r, i = s }return new d(e, t, i, this.a) }, toHSL: function () { return this.toRGB().toHSL() }, toBytes: function () { return this.toRGB().toBytes() } }), f = c.extend({ init: function (e, t, i, n) { c.fn.init.call(this), this.h = e, this.s = t, this.l = i, this.a = n }, toRGB: function () { var e, i, n, o, r, s = this, a = s.h, l = s.s, c = s.l; return 0 === l ? e = i = n = c : (l /= 100, e = t(r = 2 * (c /= 100) - (o = c < .5 ? c * (1 + l) : c + l - c * l), o, (a /= 360) + 1 / 3), i = t(r, o, a), n = t(r, o, a - 1 / 3)), new d(e, i, n, this.a) }, toHSV: function () { return this.toRGB().toHSV() }, toBytes: function () { return this.toRGB().toBytes() } }), (p = n.extend({ init: function (e) { var t, i, n, o, r, s, a, l = this; if (1 === arguments.length) for (t = p.formats, i = this.resolveColor(e), n = 0; n < t.length; n++)o = t[n].re, r = t[n].process, (s = o.exec(i)) && (a = r(s), l.r = a[0], l.g = a[1], l.b = a[2]); else this.r = arguments[0], this.g = arguments[1], this.b = arguments[2]; this.r = this.normalizeByte(this.r), this.g = this.normalizeByte(this.g), this.b = this.normalizeByte(this.b) }, toHex: function () { var e = this.padDigit, t = this.r.toString(16), i = this.g.toString(16), n = this.b.toString(16); return "#" + e(t) + e(i) + e(n) }, resolveColor: function (e) { var t = e || "black"; return "#" === t.charAt(0) && (t = t.substr(1, 6)), t = (t = t.replace(/ /g, "")).toLowerCase(), t = p.namedColors[t] || t }, normalizeByte: function (e) { return e < 0 || isNaN(e) ? 0 : e > 255 ? 255 : e }, padDigit: function (e) { return 1 === e.length ? "0" + e : e }, brightness: function (e) { var t = Math.round; return this.r = t(this.normalizeByte(this.r * e)), this.g = t(this.normalizeByte(this.g * e)), this.b = t(this.normalizeByte(this.b * e)), this }, percBrightness: function () { return Math.sqrt(.241 * this.r * this.r + .691 * this.g * this.g + .068 * this.b * this.b) } })).fromBytes = function (e, t, i, n) { return new u(e, t, i, null != n ? n : 1) }, p.fromRGB = function (e, t, i, n) { return new d(e, t, i, null != n ? n : 1) }, p.fromHSV = function (e, t, i, n) { return new h(e, t, i, null != n ? n : 1) }, p.fromHSL = function (e, t, i, n) { return new f(e, t, i, null != n ? n : 1) }, p.formats = [{ re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/, process: function (e) { return [parseInt(e[1], 10), parseInt(e[2], 10), parseInt(e[3], 10)] } }, { re: /^(\w{2})(\w{2})(\w{2})$/, process: function (e) { return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)] } }, { re: /^(\w{1})(\w{1})(\w{1})$/, process: function (e) { return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)] } }], p.namedColors = r, kendo.deepExtend(kendo, { parseColor: i, Color: p }) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("util/text-metrics.min", ["kendo.core.min"], function () { !function (e) { function t(e) { var t, i = []; for (t in e) i.push(t + e[t]); return i.sort().join("") } function i(e) { var t, i = 2166136261; for (t = 0; t < e.length; ++t)i += (i << 1) + (i << 4) + (i << 7) + (i << 8) + (i << 24), i ^= e.charCodeAt(t); return i >>> 0 } var n, o, r, s; window.kendo.util = window.kendo.util || {}, n = kendo.Class.extend({ init: function (e) { this._size = e, this._length = 0, this._map = {} }, put: function (e, t) { var i = this._map, n = { key: e, value: t }; i[e] = n, this._head ? (this._tail.newer = n, n.older = this._tail, this._tail = n) : this._head = this._tail = n, this._length >= this._size ? (i[this._head.key] = null, this._head = this._head.newer, this._head.older = null) : this._length++ }, get: function (e) { var t = this._map[e]; if (t) return t === this._head && t !== this._tail && (this._head = t.newer, this._head.older = null), t !== this._tail && (t.older && (t.older.newer = t.newer, t.newer.older = t.older), t.older = this._tail, t.newer = null, this._tail.newer = t, this._tail = t), t.value } }), o = { baselineMarkerSize: 1 }, "undefined" != typeof document && ((r = document.createElement("div")).style.cssText = "position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;"), (s = kendo.Class.extend({ init: function (t) { this._cache = new n(1e3), this.options = e.extend({}, o, t) }, measure: function (e, n, o) { var s, a, l, c, d, u, h, f; if (!e) return { width: 0, height: 0, baseline: 0 }; if (s = t(n), a = i(e + s), l = this._cache.get(a)) return l; for (h in c = { width: 0, height: 0, baseline: 0 }, d = o || r, u = this._baselineMarker().cloneNode(!1), n) void 0 !== (f = n[h]) && (d.style[h] = f); return d.textContent = e, d.appendChild(u), document.body.appendChild(d), (e + "").length && (c.width = d.offsetWidth - this.options.baselineMarkerSize, c.height = d.offsetHeight, c.baseline = u.offsetTop + this.options.baselineMarkerSize), c.width > 0 && c.height > 0 && this._cache.put(a, c), d.parentNode.removeChild(d), c }, _baselineMarker: function () { var e = document.createElement("div"); return e.style.cssText = "display: inline-block; vertical-align: baseline;width: " + this.options.baselineMarkerSize + "px; height: " + this.options.baselineMarkerSize + "px;overflow: hidden;", e } })).current = new s, kendo.deepExtend(kendo.util, { LRUCache: n, TextMetrics: s, measureText: function (e, t, i) { return s.current.measure(e, t, i) }, objectKey: t, hashKey: i }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("drawing/kendo-drawing.min", ["drawing/util.min", "kendo.color.min", "util/text-metrics.min"], function () { !function (e) { function t(e, t) { return e.push.apply(e, t), e } function i(e) { for (var t = [1e3, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1], i = ""; e > 0;)e < t[0] ? t.shift() : (i += dt[t[0]], e -= t[0]); return i } function n(e) { return typeof e !== ut } function o() { return "kdef" + ht++ } function r(e) { return e / ft } function s(e) { for (var t, i, n, o, r, s, a, l = "", c = 0, d = function (e) { var t, i, n = ""; for (t = 0; t < e.length; t++)(i = e.charCodeAt(t)) < 128 ? n += vt(i) : i < 2048 ? (n += vt(192 | i >>> 6), n += vt(128 | 63 & i)) : i < 65536 && (n += vt(224 | i >>> 12), n += vt(128 | i >>> 6 & 63), n += vt(128 | 63 & i)); return n }(e); c < d.length;)t = d.charCodeAt(c++), i = d.charCodeAt(c++), n = d.charCodeAt(c++), o = t >> 2, r = (3 & t) << 4 | i >> 4, s = (15 & i) << 2 | n >> 6, a = 63 & n, isNaN(i) ? s = a = 64 : isNaN(n) && (a = 64), l = l + gt.charAt(o) + gt.charAt(r) + gt.charAt(s) + gt.charAt(a); return l } function a(e) { return n((e.x || {}).location) ? { x: e.x.location, y: e.y.location } : { x: e.pageX || e.clientX || 0, y: e.pageY || e.clientY || 0 } } function l(e) { return void 0 === e && (e = {}), e.touch ? e.touch.initialTouch : e.target } function c(e) { return "" === e || null === e || "none" === e || "transparent" === e || !n(e) } function d(e) { if (e) return e[e.length - 1] } function u(e, t, i) { return Math.max(Math.min(e, i), t) } function h(e, t) { function i(e, i) { for (var n = [], o = 0, r = 0, s = 0; o < e.length && r < i.length;)t(e[o], i[r]) <= 0 ? n[s++] = e[o++] : n[s++] = i[r++]; return o < e.length && n.push.apply(n, e.slice(o)), r < i.length && n.push.apply(n, i.slice(r)), n } return e.length < 2 ? e.slice() : function e(t) { var n, o, r; return t.length <= 1 ? t : (n = Math.floor(t.length / 2), o = t.slice(0, n), r = t.slice(n), o = e(o), r = e(r), i(o, r)) }(e) } function f(e) { return e * ft } function p(e, t) { var i = function (e) { return e ? Math.pow(10, e) : 1 }(t); return Math.round(e * i) / i } function m(e, t) { return n(e) ? e : t } function g(e, t) { var i, n, o; for (i in t) for (n = i.trim().split(" "), o = 0; o < n.length; o++)e.addEventListener(n[o], t[i], !1) } function v(e) { var t = e.getBoundingClientRect(), i = document.documentElement; return { top: t.top + (window.pageYOffset || i.scrollTop) - (i.clientTop || 0), left: t.left + (window.pageXOffset || i.scrollLeft) - (i.clientLeft || 0) } } function _(e, t) { var i, n, o = {}, r = window.getComputedStyle(e), s = Array.isArray(t) ? t : [t]; for (i = 0; i < s.length; i++)n = s[i], o[n] = r[n]; return o } function b(e) { return isNaN(e) ? e : e + "px" } function w(e, t) { var i, o, r; return t ? (i = t.width, o = t.height, n(i) && (e.style.width = b(i)), void (n(o) && (e.style.height = b(o)))) : (r = _(e, ["width", "height"]), { width: parseInt(r.width, 10), height: parseInt(r.height, 10) }) } function y(e, t) { var i, n, o; for (i in void 0 === t && (t = {}), t) for (n = i.trim().split(" "), o = 0; o < n.length; o++)e.removeEventListener(n[o], t[i], !1) } function k(e) { return function (t) { return this[e] !== t && (this[e] = t, this.geometryChange()), this } } function x(e) { return function () { return this[e] } } function C(e, t) { var i, n, o; for (i = 0; i < t.length; i++)n = t[i], o = n.charAt(0).toUpperCase() + n.substring(1, n.length), e["set" + o] = k(n), e["get" + o] = x(n) } function S(e) { return e && "function" == typeof e.matrix ? e.matrix() : e } function T(e) { return null === e ? null : e instanceof St ? e : new St(e) } function D(e, t, i, n) { var o = 0, r = 0; return n && (o = Math.atan2(n.c * i, n.a * t), 0 !== n.b && (r = Math.atan2(n.d * i, n.b * t))), { x: o, y: r } } function A(e) { var t = "_" + e; return function (e) { return n(e) ? (this._observerField(t, e), this.geometryChange(), this) : this[t] } } function E(e, t) { for (var i = 0; i < t.length; i++)e[t[i]] = A(t[i]) } function I(e, t, i) { return void 0 === i && (i = Ft), 0 === p(Math.abs(e - t), i) } function M(e, t, i) { return e < t || I(e, t, i) } function R(e, t, i, n, o, s) { var a = p((o - e) / i, 3), l = p((s - t) / n, 3); return p(r(Math.atan2(l, a))) } function F(e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b = e.x1, w = e.y1, y = e.x2, k = e.y2, x = e.rx, C = e.ry, S = e.largeArc, T = e.swipe; if (w !== k) c = y - b, d = k - w, u = zt(x, 2), h = zt(C, 2), p = (f = (h * c * (b + y) + u * d * (w + k)) / (2 * u * d)) - k, r = 1 / u + zt(m = -c * h / (u * d), 2) / h, s = 2 * (m * p / h - y / u), a = zt(y, 2) / u + zt(p, 2) / h - 1, l = Math.sqrt(zt(s, 2) - 4 * r * a), i = f + m * (t = (-s - l) / (2 * r)), o = f + m * (n = (-s + l) / (2 * r)); else { if (b === y) return !1; s = -2 * k, a = zt((y - b) * C / (2 * x), 2) + zt(k, 2) - zt(C, 2), l = Math.sqrt(zt(s, 2) - 4 * a), t = n = (b + y) / 2, i = (-s - l) / 2, o = (-s + l) / 2 } return g = R(t, i, x, C, b, w), v = R(t, i, x, C, y, k), _ = function (e, t, i) { var n, o = t; return e > o && (o += 360), n = Math.abs(o - e), i || (n = 360 - n), n }(g, v, T), (S && _ <= 180 || !S && _ > 180) && (g = R(t = n, i = o, x, C, b, w), v = R(t, i, x, C, y, k)), { center: new kt(t, i), startAngle: g, endAngle: v } } function z(e, t) { for (var i = e; i < t;)i += 90; return i } function P(e) { var t = "_" + e; return function (e) { return n(e) ? (this._observerField(t, kt.create(e)), this.geometryChange(), this) : this[t] } } function B(e, t) { for (var i = 0; i < t.length; i++)e[t[i]] = P(t[i]) } function L(e, t, i) { var n = r(Math.atan2(t.y - e.y, t.x - e.x)), o = i.transformCopy(T().rotate(-n, e)); return o.x < e.x } function H(e, t, i) { var n = 1 - e; return Math.pow(n, 3) * i[0][t] + 3 * Math.pow(n, 2) * e * i[1][t] + 3 * Math.pow(e, 2) * n * i[2][t] + Math.pow(e, 3) * i[3][t] } function N(e, t) { return [-e[0][t] + 3 * e[1][t] - 3 * e[2][t] + e[3][t], 3 * (e[0][t] - 2 * e[1][t] + e[2][t]), 3 * (-e[0][t] + e[1][t]), e[0][t]] } function O(e) { return e < 0 ? -1 : 1 } function V(e, t, i, n) { var o, r, s, a, l, c, d, u, h, f, m, g, v; return 0 === e ? function (e, t, i) { var n = Math.sqrt(Math.pow(t, 2) - 4 * e * i); return [(-t + n) / (2 * e), (-t - n) / (2 * e)] }(t, i, n) : (o = (3 * e * i - Math.pow(t, 2)) / (3 * Math.pow(e, 2)), r = (2 * Math.pow(t, 3) - 9 * e * t * i + 27 * Math.pow(e, 2) * n) / (27 * Math.pow(e, 3)), s = Math.pow(o / 3, 3) + Math.pow(r / 2, 2), a = new qt(0, 1), l = -t / (3 * e), s < 0 ? (c = new qt(-r / 2, Math.sqrt(-s)).nthRoot(3), d = new qt(-r / 2, -Math.sqrt(-s)).nthRoot(3)) : (c = -r / 2 + Math.sqrt(s), c = new qt(O(c) * Math.pow(Math.abs(c), 1 / 3)), d = -r / 2 - Math.sqrt(s), d = new qt(O(d) * Math.pow(Math.abs(d), 1 / 3))), u = c.add(d), m = c.add(d).multiplyConstant(-.5), g = c.add(d.negate()).multiplyConstant(Math.sqrt(3) / 2), h = m.add(a.multiply(g)), f = m.add(a.negate().multiply(g)), v = [], u.isReal() && v.push(p(u.real + l, Ft)), h.isReal() && v.push(p(h.real + l, Ft)), f.isReal() && v.push(p(f.real + l, Ft)), v) } function U(e, t, i, n, o) { var r, s, a = N(e, n), l = V(a[0], a[1], a[2], a[3] - t[n]); for (s = 0; s < l.length; s++)if (0 <= l[s] && l[s] <= 1 && (r = H(l[s], i, e), Math.abs(r - t[i]) <= o)) return !0 } function W(e, t, i) { var n, o, r, s, a, l; return e.x !== t.x && (o = Math.min(e.x, t.x), r = Math.max(e.x, t.x), s = Math.min(e.y, t.y), a = Math.max(e.y, t.y), l = o <= i.x && i.x < r, n = s === a ? i.y <= s && l : l && (a - s) * ((e.x - t.x) * (e.y - t.y) > 0 ? i.x - o : r - i.x) / (r - o) + s - i.y >= 0), n ? 1 : 0 } function q(e) { var t, i = e.length, n = pt, o = mt; for (t = 0; t < i; t++)o = Math.max(o, e[t]), n = Math.min(n, e[t]); return { min: n, max: o } } function j(e, t, i) { var n, o, r, s; for (o = 0; o < e.length; o++)(r = e[o]).visible() && ((s = t ? r.bbox(i) : r.rawBBox()) && (n = n ? Ct.union(n, s) : s)); return n } function G(e, t) { var i, n, o, r; for (n = 0; n < e.length; n++)(o = e[n]).visible() && ((r = o.clippedBBox(t)) && (i = i ? Ct.union(i, r) : r)); return i } function $(e, t, i) { var n = i.transform() || T(), o = n.matrix(); o.e += e.x - t.origin.x, o.f += e.y - t.origin.y, n.matrix(o), i.transform(n) } function Y(e, t, i, n, o) { return "start" === i ? t.origin[n] : "end" === i ? t.origin[n] + t.size[o] - e : t.origin[n] + (t.size[o] - e) / 2 } function K(e, t, i, n, o) { var r, s, a; for (r = 0; r < e.length; r++)(s = e[r].clippedBBox()) && ((a = s.origin.clone())[n] = Y(s.size[o], t, i || "start", n, o), $(a, s, e[r])) } function Q(e, t, i, n) { var o, r, s, a, l; if (e.length > 1) for (o = new kt, r = e[0].bbox, s = 1; s < e.length; s++)a = e[s].element, l = e[s].bbox, o[t] = r.origin[t] + r.size[n], o[i] = l.origin[i], $(o, l, a), l.origin[t] = o[t], r = l } function X(e) { var t, i, n, o = []; for (t = 0; t < e.length; t++)i = e[t], (n = i.clippedBBox()) && o.push({ element: i, bbox: n }); return o } function Z(e, t, i, n, o) { var r, s, a, l, c = function (e, t, i) { var n, o, r, s, a = t.size[i], l = [], c = [], d = 0, u = function () { c.push({ element: n, bbox: o }) }; for (r = 0; r < e.length; r++)n = e[r], (o = n.clippedBBox()) && (s = o.size[i], d + s > a ? c.length ? (l.push(c), c = [], u(), d = s) : (u(), l.push(c), c = [], d = 0) : (u(), d += s)); return c.length && l.push(c), l }(e, t, o), d = t.origin.clone(), u = []; for (r = 0; r < c.length; r++)for (s = c[r], a = s[0], d[n] = a.bbox.origin[n], $(d, a.bbox, a.element), a.bbox.origin[i] = d[i], Q(s, i, n, o), u.push([]), l = 0; l < s.length; l++)u[r].push(s[l].element); return u } function J(e) { return function (t) { return n(t) ? (this.options.set(e, t), this) : this.options.get(e) } } function ee(e, t, i) { var n, o = t ? 0 : 1; for (n = 0; n < e.length; n += 2)e.splice(n + o, 0, i) } function te(e, t) { if (e && t) return t.scaleCopy(2).translate(-e.x, -e.y) } function ie(e, t, i) { var n = t.clone().scale(2 / 3); return { controlOut: n.clone().translateWith(e.scaleCopy(hi)), controlIn: n.translateWith(i.scaleCopy(hi)) } } function ne(e, t) { return n(t) && null !== t ? " " + e + "='" + t + "' " : "" } function oe(e) { var t, i = ""; for (t = 0; t < e.length; t++)i += ne(e[t][0], e[t][1]); return i } function re(e) { var t, i, o = ""; for (t = 0; t < e.length; t++)n(i = e[t][1]) && (o += e[t][0] + ":" + i + ";"); if ("" !== o) return o } function se(e, t) { return "clip" === e || "fill" === e && (!t || "Gradient" === t.nodeType) } function ae(e) { return "url(" + function () { var e = document.getElementsByTagName("base")[0], t = document.location.href, i = t.indexOf("#"), n = ""; return e && !st.browser.msie && (-1 !== i && (t = t.substring(0, i)), n = t), n }() + "#" + e + ")" } function le(e) { if (!e || !e.indexOf || e.indexOf("&") < 0) return e; var t = le._element; return t.innerHTML = e, t.textContent || t.innerText } function ce(e) { var t, i, n, o = new Li, r = e.clippedBBox(), s = e; return r && (t = r.getOrigin(), (i = new Zt).transform(T().translate(-t.x, -t.y)), i.children.push(e), s = i), o.load([s]), n = "<?xml version='1.0' ?><svg xmlns='" + yi + "' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>" + o.render() + "</svg>", o.destroy(), n } function de(e, t) { var i, n, o, r, s, a, l = t.segments; if (0 !== l.length) { for (i = l[0], n = i.anchor(), e.moveTo(n.x, n.y), o = 1; o < l.length; o++)i = l[o], n = i.anchor(), r = l[o - 1], s = r.controlOut(), a = i.controlIn(), s && a ? e.bezierCurveTo(s.x, s.y, a.x, a.y, n.x, n.y) : e.lineTo(n.x, n.y); t.options.closed && e.closePath() } } function ue(e, t) { return e._zIndex < t._zIndex ? 1 : e._zIndex > t._zIndex ? -1 : 0 } function he(e) { return Array.prototype.slice.call(e) } function fe(e, t) { Object.keys(t).forEach(function (i) { e.style[i] = t[i] }) } function pe(e, t) { if (e.closest) return e.closest(t); for (; e && !/^\[object (?:HTML)?Document\]$/.test(e + "");) { if (kn(e, t)) return e; e = e.parentNode } } function me(e, t) { function i(e) { var i = new Zt, n = e.getBoundingClientRect(); return Be(i, [r.x, 0, 0, r.y, -n.left * r.x, -n.top * r.y]), wn._clipbox = !1, wn._matrix = yt.unit(), wn._stackingContext = { element: e, group: i }, wn._avoidLinks = !0 === t.avoidLinks ? "a" : t.avoidLinks, function (e, t) { e.classList ? e.classList.add(t) : e.className += " " + t }(e, "k-pdf-export"), et(e, i), function (e, t) { e.classList ? e.classList.remove(t) : e.className = e.className.split(/\s+/).reduce(function (e, i) { return i != t && e.push(i), e }, []).join(" ") }(e, "k-pdf-export"), i } function n(e, t, i, n, o, r, s) { function a() { function t() { !function (e, t) { function i() { --n <= 0 && t() } var n = 0; e.forEach(function (e) { var t, o, r = e.querySelectorAll("img"); for (t = 0; t < r.length; ++t)(o = r[t]).complete || (n++, o.onload = o.onerror = i) }), n || i() }(g, function () { e({ pages: g, container: _ }) }) } var n, r; ("-" != i || o) && function e(t) { var n, r, s, a, d, f, p; for ("TABLE" == t.tagName && fe(t, { tableLayout: "fixed" }), n = Ae(t), r = parseFloat(Ee(n, "padding-bottom")), s = parseFloat(Ee(n, "border-bottom-width")), a = b, b += r + s, d = !0, f = t.firstChild; f; f = f.nextSibling)if (1 == f.nodeType) { if (d = !1, kn(f, i)) { c(f); continue } if (!o) { e(f); continue } if (!/^(?:static|relative)$/.test(Ee(Ae(f), "position"))) continue; 1 == (p = u(f)) ? c(f) : p && l(f) ? c(f) : e(f) } else 3 == f.nodeType && o && (h(f, d), d = !1); b = a }(v), n = d(), v.parentNode.insertBefore(n, v), n.appendChild(v), p ? (r = g.length, g.forEach(function (e, i) { var n = p({ element: e, pageNum: i + 1, totalPages: g.length }); n && (e.appendChild(n), xe(n, function () { 0 == --r && t() })) })) : t() } function l(e) { if (s.keepTogether && kn(e, s.keepTogether) && e.offsetHeight <= o - b) return !0; var t = e.tagName; return !(/^h[1-6]$/i.test(t) && e.offsetHeight >= o - b) && (e.getAttribute("data-kendo-chart") || /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(e.tagName)) } function c(e) { var t, i, n, o, r, a, l; return 1 == e.nodeType && e !== v && function (e) { var t = e.parentNode, i = t.firstChild; if (e === i) return !0; if (e === t.children[0]) { if (7 == i.nodeType || 8 == i.nodeType) return !0; if (3 == i.nodeType) return !/\S/.test(i.data) } return !1 }(e) ? c(e.parentNode) : (t = pe(e, "table"), i = t && t.querySelector("colgroup"), s.repeatHeaders && (n = t && t.querySelector("thead"), (o = pe(e, '.k-grid[data-role="grid"]')) && o.querySelector(".k-auto-scrollable") && (r = o.querySelector(".k-grid-header"))), a = d(), (l = m.createRange()).setStartBefore(v), l.setEndBefore(e), a.appendChild(l.extractContents()), v.parentNode.insertBefore(a, v), f(e.parentNode), t && (t = pe(e, "table"), s.repeatHeaders && n && t.insertBefore(n.cloneNode(!0), t.firstChild), i && t.insertBefore(i.cloneNode(!0), t.firstChild)), void (s.repeatHeaders && r && (o = pe(e, '.k-grid[data-role="grid"]'), o.insertBefore(r.cloneNode(!0), o.firstChild)))) } function d() { var e = m.createElement("KENDO-PDF-PAGE"); return fe(e, { display: "block", boxSizing: "content-box", width: n ? n + "px" : "auto", padding: r.top + "px " + r.right + "px " + r.bottom + "px " + r.left + "px", position: "relative", height: o ? o + "px" : "auto", overflow: o || n ? "hidden" : "visible", clear: "both" }), s && s.pageClassName && (e.className = s.pageClassName), g.push(e), e } function u(e) { var t, i, n = e.getBoundingClientRect(); return 0 === n.width || 0 === n.height ? 0 : (t = v.getBoundingClientRect().top, i = o - b, n.height > i ? 3 : n.top - t > i ? 1 : n.bottom - t > i ? 2 : 0) } function h(e, t) { var i, n, o, r, s; /\S/.test(e.data) && (i = e.data.length, (n = m.createRange()).selectNodeContents(e), (o = u(n)) && (r = e, 1 == o ? c(t ? e.parentNode : e) : (function t(i, o, r) { return n.setEnd(e, o), i == o || o == r ? o : u(n) ? t(i, i + o >> 1, o) : t(o, o + r >> 1, r) }(0, i >> 1, i), !/\S/.test("" + n) && t ? c(e.parentNode) : (r = e.splitText(n.endOffset), s = d(), n.setStartBefore(v), s.appendChild(n.extractContents()), v.parentNode.insertBefore(s, v), f(r.parentNode))), h(r))) } function f(e) { var t = pe(e, "li"); t && (t.setAttribute("kendo-no-bullet", "1"), f(t.parentNode)) } var p = function (e) { if (null != e) return "string" == typeof e && (e = kendo.template(e.replace(/^\s+|\s+$/g, ""))), "function" == typeof e ? function (t) { var i, n = e(t); return n && "string" == typeof n && ((i = document.createElement("div")).innerHTML = n, n = i.firstElementChild), n } : function () { return e.cloneNode(!0) } }(s.template), m = t.ownerDocument, g = [], v = s._destructive ? t : xn(t), _ = m.createElement("KENDO-PDF-DOCUMENT"), b = 0; he(v.querySelectorAll("tfoot")).forEach(function (e) { e.parentNode.appendChild(e) }), he(v.querySelectorAll("ol")).forEach(function (e) { he(e.children).forEach(function (e, t) { e.setAttribute("kendo-split-index", t) }) }), fe(_, { display: "block", position: "absolute", boxSizing: "content-box", left: "-10000px", top: "-10000px" }), n && (fe(_, { width: n + "px", paddingLeft: r.left + "px", paddingRight: r.right + "px" }), fe(v, { overflow: "hidden" })), t.parentNode.insertBefore(_, t), _.appendChild(v), s.beforePageBreak ? setTimeout(function () { s.beforePageBreak(_, a) }, 15) : setTimeout(a, 15) } var o, r; if (t || (t = {}), o = at(), !e) return o.reject("No element to export"); if ("function" != typeof window.getComputedStyle) throw Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+."); return kendo.pdf.defineFont(ge(e.ownerDocument)), r = function (e) { return "number" == typeof e ? { x: e, y: e } : Array.isArray(e) ? { x: e[0], y: e[1] } : { x: e.x, y: e.y } }(t.scale || 1), xe(e, function () { var s, a = t && t.forcePageBreak, l = t && t.paperSize && "auto" != t.paperSize, c = kendo.pdf.getPaperOptions(function (e, i) { return "paperSize" == e ? l ? t[e] : "A4" : e in t ? t[e] : i }), d = l && c.paperSize[0], u = l && c.paperSize[1], h = t.margin && c.margin, f = !!h; a || u ? (h || (h = { left: 0, top: 0, right: 0, bottom: 0 }), d && (d /= r.x), u && (u /= r.y), h.left /= r.x, h.right /= r.x, h.top /= r.y, h.bottom /= r.y, s = new Zt({ pdf: { multiPage: !0, paperSize: l ? c.paperSize : "auto", _ignoreMargin: f } }), n(function (e) { if (t.progress) { var n = !1, r = 0; !function a() { if (r < e.pages.length) { var l = i(e.pages[r]); s.append(l), t.progress({ page: l, pageNum: ++r, totalPages: e.pages.length, cancel: function () { n = !0 } }), n ? e.container.parentNode.removeChild(e.container) : setTimeout(a) } else e.container.parentNode.removeChild(e.container), o.resolve(s) }() } else e.pages.forEach(function (e) { s.append(i(e)) }), e.container.parentNode.removeChild(e.container), o.resolve(s) }, e, a, d ? d - h.left - h.right : null, u ? u - h.top - h.bottom : null, h, t)) : o.resolve(i(e)) }), o } function ge(e) { function t(e) { if (e) { var t = null; try { t = e.cssRules } catch (e) { } t && n(e, t) } } function i(e) { var t, i = Ee(e.style, "src"); return i ? Sn(i).reduce(function (e, t) { var i = Tn(t); return i && e.push(i), e }, []) : (t = Tn(e.cssText)) ? [t] : [] } function n(e, n) { var r, s, a, l, c, d, u; for (r = 0; r < n.length; ++r)switch (s = n[r], s.type) { case 3: t(s.styleSheet); break; case 5: a = s.style, l = Sn(Ee(a, "font-family")), c = /^([56789]00|bold)$/i.test(Ee(a, "font-weight")), d = "italic" == Ee(a, "font-style"), (u = i(s)).length > 0 && o(e, l, c, d, u[0]) } } function o(e, t, i, n, o) { /^data:/i.test(o) || /^[^\/:]+:\/\//.test(o) || /^\//.test(o) || (o = (e.href + "").replace(/[^\/]*$/, "") + o), t.forEach(function (e) { e = e.replace(/^(['"]?)(.*?)\1$/, "$2"), i && (e += "|bold"), n && (e += "|italic"), r[e] = o }) } var r, s; for (null == e && (e = document), r = {}, s = 0; s < e.styleSheets.length; ++s)t(e.styleSheets[s]); return r } function ve(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } function _e(e, t) { var i = wn; for (e = "_counter_" + e; i && !ve(i, e);)i = Object.getPrototypeOf(i); i || (i = wn._root), i[e] = (i[e] || 0) + (null == t ? 1 : t) } function be(e, t) { wn[e = "_counter_" + e] = null == t ? 0 : t } function we(e, t, i) { var n, o, r; for (n = 0; n < e.length;)o = e[n++], r = parseFloat(e[n]), isNaN(r) ? t(o, i) : (t(o, r), ++n) } function ye(e) { var t, i = Ee(e, "counter-reset"); i && we(Sn(i, /^\s+/), be, 0), (t = Ee(e, "counter-increment")) && we(Sn(t, /^\s+/), _e, 1) } function ke(e, t) { var i = kendo.parseColor(e, !0); return i && (i = i.toRGB(), t ? i = i.toCssRgba() : 0 === i.a && (i = null)), i } function xe(e, t) { function i(e) { bn[e] || (bn[e] = !0, r.push(e)) } function n() { --o <= 0 && t() } var o, r = []; !function e(t) { /^img$/i.test(t.tagName) && i(t.src), Cn(Ee(Ae(t), "background-image")).forEach(function (e) { "url" == e.type && i(e.url) }), t.children && he(t.children).forEach(e) }(e), 0 === (o = r.length) && n(), r.forEach(function (e) { var t = bn[e] = new window.Image; /^data:/i.test(e) || (t.crossOrigin = "Anonymous"), t.src = e, t.complete ? n() : (t.onload = n, t.onerror = function () { bn[e] = null, n() }) }) } function Ce(e) { var t, i = ""; do { t = e % 26, i = String.fromCharCode(97 + t) + i, e = Math.floor(e / 26) } while (e > 0); return i } function Se(e, t, i) { var n, o; (wn = Object.create(wn))[e.tagName.toLowerCase()] = { element: e, style: t }, (n = Ee(t, "text-decoration")) && "none" != n && (o = Ee(t, "color"), n.split(/\s+/g).forEach(function (e) { wn[e] || (wn[e] = o) })), function (e) { function t(t) { return Ee(e, t) } if ("none" != t("transform") || "static" != t("position") || "auto" != t("z-index") || t("opacity") < 1) return !0 }(t) && (wn._stackingContext = { element: e, group: i }) } function Te() { wn = Object.getPrototypeOf(wn) } function De(e) { if (null != wn._clipbox) { var t = e.bbox(wn._matrix); wn._clipbox = wn._clipbox ? Ct.intersect(wn._clipbox, t) : t } } function Ae(e, t) { return window.getComputedStyle(e, t || null) } function Ee(e, t, i) { var n = e.getPropertyValue(t); return null != n && "" !== n || (vn.webkit ? n = e.getPropertyValue("-webkit-" + t) : vn.mozilla ? n = e.getPropertyValue("-moz-" + t) : vn.opera ? n = e.getPropertyValue("-o-" + t) : vn.msie && (n = e.getPropertyValue("-ms-" + t))), arguments.length > 2 && (null == n || "" === n) ? i : n } function Ie(e, t, i, n) { e.setProperty(t, i, n), vn.webkit ? e.setProperty("-webkit-" + t, i, n) : vn.mozilla ? e.setProperty("-moz-" + t, i, n) : vn.opera ? e.setProperty("-o-" + t, i, n) : vn.msie && (e.setProperty("-ms-" + t, i, n), t = "ms" + t.replace(/(^|-)([a-z])/g, function (e, t, i) { return t + i.toUpperCase() }), e[t] = i) } function Me(e, t) { return t = "border-" + t, { width: parseFloat(Ee(e, t + "-width")), style: Ee(e, t + "-style"), color: ke(Ee(e, t + "-color"), !0) } } function Re(e, t) { var i = e.style.cssText, n = t(); return e.style.cssText = i, n } function Fe(e, t) { var i = Ee(e, "border-" + t + "-radius").split(/\s+/g).map(parseFloat); return 1 == i.length && i.push(i[0]), Ne({ x: i[0], y: i[1] }) } function ze(e, t, i) { var n, o, r, s, a; return "string" == typeof t ? (n = Ae(i), o = parseFloat(Ee(n, t.replace("*", "top"))), r = parseFloat(Ee(n, t.replace("*", "right"))), s = parseFloat(Ee(n, t.replace("*", "bottom"))), a = parseFloat(Ee(n, t.replace("*", "left")))) : "number" == typeof t && (o = r = s = a = t), { top: e.top + o, right: e.right - r, bottom: e.bottom - s, left: e.left + a, width: e.right - e.left - r - a, height: e.bottom - e.top - s - o } } function Pe(e) { return 180 * e / Math.PI % 360 } function Be(e, t) { return t = new yt(t[0], t[1], t[2], t[3], t[4], t[5]), e.transform(t), t } function Le(e, t) { e.clip(t) } function He(e, t, i, n) { for (var o = new Pt([t, i], n).curvePoints(), r = 1; r < o.length;)e.curveTo(o[r++], o[r++], o[r++]) } function Ne(e) { return (e.x <= 0 || e.y <= 0) && (e.x = e.y = 0), e } function Oe(e, t, i, n, o) { var r = Math.max(0, t.x), s = Math.max(0, t.y), a = Math.max(0, i.x), l = Math.max(0, i.y), c = Math.max(0, n.x), d = Math.max(0, n.y), u = Math.max(0, o.x), h = Math.max(0, o.y), f = Math.min(e.width / (r + a), e.height / (l + d), e.width / (c + u), e.height / (h + s)); return f < 1 && (r *= f, s *= f, a *= f, l *= f, c *= f, d *= f, u *= f, h *= f), { tl: { x: r, y: s }, tr: { x: a, y: l }, br: { x: c, y: d }, bl: { x: u, y: h } } } function Ve(e, t, i) { var n, o, r, s, a, l, c, d, u = Ae(e), h = Fe(u, "top-left"), f = Fe(u, "top-right"), p = Fe(u, "bottom-left"), m = Fe(u, "bottom-right"); return "padding" != i && "content" != i || (n = Me(u, "top"), o = Me(u, "right"), r = Me(u, "bottom"), s = Me(u, "left"), h.x -= s.width, h.y -= n.width, f.x -= o.width, f.y -= n.width, m.x -= o.width, m.y -= r.width, p.x -= s.width, p.y -= r.width, "content" == i && (a = parseFloat(Ee(u, "padding-top")), l = parseFloat(Ee(u, "padding-right")), c = parseFloat(Ee(u, "padding-bottom")), d = parseFloat(Ee(u, "padding-left")), h.x -= d, h.y -= a, f.x -= l, f.y -= a, m.x -= l, m.y -= c, p.x -= d, p.y -= c)), "number" == typeof i && (h.x -= i, h.y -= i, f.x -= i, f.y -= i, m.x -= i, m.y -= i, p.x -= i, p.y -= i), Ue(t, h, f, m, p) } function Ue(e, t, i, n, o) { var r = Oe(e, t, i, n, o), s = r.tl, a = r.tr, l = r.br, c = r.bl, d = new Gt({ fill: null, stroke: null }); return d.moveTo(e.left, e.top + s.y), s.x && He(d, e.left + s.x, e.top + s.y, { startAngle: -180, endAngle: -90, radiusX: s.x, radiusY: s.y }), d.lineTo(e.right - a.x, e.top), a.x && He(d, e.right - a.x, e.top + a.y, { startAngle: -90, endAngle: 0, radiusX: a.x, radiusY: a.y }), d.lineTo(e.right, e.bottom - l.y), l.x && He(d, e.right - l.x, e.bottom - l.y, { startAngle: 0, endAngle: 90, radiusX: l.x, radiusY: l.y }), d.lineTo(e.left + c.x, e.bottom), c.x && He(d, e.left + c.x, e.bottom - c.y, { startAngle: 90, endAngle: 180, radiusX: c.x, radiusY: c.y }), d.close() } function We(e, t) { var n = parseFloat(e) + ""; switch (t) { case "decimal-leading-zero": return n.length < 2 && (n = "0" + n), n; case "lower-roman": return i(e).toLowerCase(); case "upper-roman": return i(e).toUpperCase(); case "lower-latin": case "lower-alpha": return Ce(e - 1); case "upper-latin": case "upper-alpha": return Ce(e - 1).toUpperCase(); default: return n } } function qe(e, t) { function i(e, t, i) { return i ? (i = i.replace(/^\s*(["'])(.*)\1\s*$/, "$2"), function (e) { var t = [], i = wn; for (e = "_counter_" + e; i;)ve(i, e) && t.push(i[e]), i = Object.getPrototypeOf(i); return t.reverse() }(e).map(function (e) { return We(e, t) }).join(i)) : We(function (e) { return wn[e = "_counter_" + e] }(e) || 0, t) } var n, o = Sn(t, /^\s+/), r = []; return o.forEach(function (t) { var o; (n = /^\s*(["'])(.*)\1\s*$/.exec(t)) ? r.push(n[2].replace(/\\([0-9a-f]{4})/gi, function (e, t) { return String.fromCharCode(parseInt(t, 16)) })) : (n = /^\s*counter\((.*?)\)\s*$/.exec(t)) ? (o = Sn(n[1]), r.push(i(o[0], o[1]))) : (n = /^\s*counters\((.*?)\)\s*$/.exec(t)) ? (o = Sn(n[1]), r.push(i(o[0], o[2], o[1]))) : r.push((n = /^\s*attr\((.*?)\)\s*$/.exec(t)) ? e.getAttribute(n[1]) || "" : t) }), r.join("") } function je(e) { var t, i; if (e.cssText) return e.cssText; for (t = [], i = 0; i < e.length; ++i)t.push(e[i] + ": " + Ee(e, e[i])); return t.join(";\n") } function Ge(e, t) { function i(t, i) { var o, r = Ae(e, t); ye(r), r.content && "normal" != r.content && "none" != r.content && "0px" != r.width && ((o = e.ownerDocument.createElement(_n)).style.cssText = je(r), o.textContent = qe(e, r.content), e.insertBefore(o, i), n.push(o)) } var n, o; return e.tagName == _n ? void $e(e, t) : (n = [], i(":before", e.firstChild), i(":after", null), o = e.className, e.className += " kendo-pdf-hide-pseudo-elements", $e(e, t), e.className = o, void n.forEach(function (t) { e.removeChild(t) })) } function $e(e, t) { function n(e, i, n, o, r, s, a, l) { function c(t, i, o) { var r = Math.PI / 2 * t / (t + n), s = { x: i.x - t, y: i.y - n }, a = new Gt({ fill: { color: e }, stroke: null }).moveTo(0, 0); Be(a, o), He(a, 0, i.y, { startAngle: -90, endAngle: -Pe(r), radiusX: i.x, radiusY: i.y }), s.x > 0 && s.y > 0 ? (a.lineTo(s.x * Math.cos(r), i.y - s.y * Math.sin(r)), He(a, 0, i.y, { startAngle: -Pe(r), endAngle: -90, radiusX: s.x, radiusY: s.y, anticlockwise: !0 })) : s.x > 0 ? a.lineTo(s.x, n).lineTo(0, n) : a.lineTo(s.x, n).lineTo(s.x, 0), u.append(a.close()) } if (!(n <= 0)) { var d, u = new Zt; Be(u, l), t.append(u), Ne(s), Ne(a), d = new Gt({ fill: { color: e }, stroke: null }), u.append(d), d.moveTo(s.x ? Math.max(s.x, o) : 0, 0).lineTo(i - (a.x ? Math.max(a.x, r) : 0), 0).lineTo(i - Math.max(a.x, r), n).lineTo(Math.max(s.x, o), n).close(), s.x && c(o, s, [-1, 0, 0, 1, s.x, 0]), a.x && c(r, a, [1, 0, 0, 1, i - a.x, 0]) } } function o(i) { var n, o, s = new Zt; for (Le(s, Ue(i, k, x, S, C)), t.append(s), "A" == e.tagName && e.href && !/^#?$/.test(e.getAttribute("href")) && (wn._avoidLinks && kn(e, wn._avoidLinks) || (s._pdfLink = { url: e.href, top: i.top, right: i.right, bottom: i.bottom, left: i.left })), D && ((n = new Gt({ fill: { color: D.toCssRgba() }, stroke: null })).moveTo(i.left, i.top).lineTo(i.right, i.top).lineTo(i.right, i.bottom).lineTo(i.left, i.bottom).close(), s.append(n)), o = a.length; --o >= 0;)r(s, i, a[o], l[o % l.length], c[o % c.length], d[o % d.length], u[o % u.length]) } function r(t, i, n, o, r, s, a) { function l(t, i, n, l, c) { function d() { for (; g.origin.x > i.left;)g.origin.x -= n } function u() { for (; g.origin.y > i.top;)g.origin.y -= l } function h() { for (; g.origin.x < i.right;)c(t, g.clone()), g.origin.x += n } var f, p, m, g, v, _ = n / l, b = i; switch ("content-box" == s ? b = ze(b = ze(b, "border-*-width", e), "padding-*", e) : "padding-box" == s && (b = ze(b, "border-*-width", e)), /^\s*auto(\s+auto)?\s*$/.test(a) || ("contain" == a ? (f = Math.min(b.width / n, b.height / l), n *= f, l *= f) : "cover" == a ? (f = Math.max(b.width / n, b.height / l), n *= f, l *= f) : (p = a.split(/\s+/g), n = /%$/.test(p[0]) ? b.width * parseFloat(p[0]) / 100 : parseFloat(p[0]), l = 1 == p.length || "auto" == p[1] ? n / _ : /%$/.test(p[1]) ? b.height * parseFloat(p[1]) / 100 : parseFloat(p[1]))), m = r + "") { case "bottom": m = "50% 100%"; break; case "top": m = "50% 0"; break; case "left": m = "0 50%"; break; case "right": m = "100% 50%"; break; case "center": m = "50% 50%" }if (1 == (m = m.split(/\s+/)).length && (m[1] = "50%"), m[0] = /%$/.test(m[0]) ? parseFloat(m[0]) / 100 * (b.width - n) : parseFloat(m[0]), m[1] = /%$/.test(m[1]) ? parseFloat(m[1]) / 100 * (b.height - l) : parseFloat(m[1]), g = new Ct([b.left + m[0], b.top + m[1]], [n, l]), "no-repeat" == o) c(t, g); else if ("repeat-x" == o) d(), h(); else if ("repeat-y" == o) for (u(); g.origin.y < i.bottom;)c(t, g.clone()), g.origin.y += l; else if ("repeat" == o) for (d(), u(), v = g.origin.clone(); g.origin.y < i.bottom;)g.origin.x = v.x, h(), g.origin.y += l } if (n && "none" != n) if ("url" == n.type) { if (/^url\(\"data:image\/svg/i.test(n.url)) return; var c = bn[n.url]; c && c.width > 0 && c.height > 0 && l(t, i, c.width, c.height, function (e, t) { e.append(new Qt(n.url, t)) }) } else { if ("linear" != n.type) return; l(t, i, i.width, i.height, function (e) { return function (t, i) { var n, o, r, s, a, l, c, d, u, h, f, p, m, g = i.width(), v = i.height(); switch (e.type) { case "linear": switch (n = null != e.angle ? e.angle : Math.PI, e.to) { case "top": n = 0; break; case "left": n = -Math.PI / 2; break; case "bottom": n = Math.PI; break; case "right": n = Math.PI / 2; break; case "top left": case "left top": n = -Math.atan2(v, g); break; case "top right": case "right top": n = Math.atan2(v, g); break; case "bottom left": case "left bottom": n = Math.PI + Math.atan2(v, g); break; case "bottom right": case "right bottom": n = Math.PI - Math.atan2(v, g) }e.reverse && (n -= Math.PI), (n %= 2 * Math.PI) < 0 && (n += 2 * Math.PI), o = Math.abs(g * Math.sin(n)) + Math.abs(v * Math.cos(n)), r = Math.atan(g * Math.tan(n) / v), s = Math.sin(r), a = Math.cos(r), l = Math.abs(s) + Math.abs(a), c = l / 2 * s, d = l / 2 * a, n > Math.PI / 2 && n <= 3 * Math.PI / 2 && (c = -c, d = -d), u = [], h = 0, f = e.stops.map(function (t, i) { var n, r = t.percent; return r ? r = parseFloat(r) / 100 : t.length ? r = parseFloat(t.length) / o : 0 === i ? r = 0 : i == e.stops.length - 1 && (r = 1), n = { color: t.color.toCssRgba(), offset: r }, null != r ? (h = r, u.forEach(function (e, t) { var i = e.stop; i.offset = e.left + (h - e.left) * (t + 1) / (u.length + 1) }), u = []) : u.push({ left: h, stop: n }), n }), p = [.5 - c, .5 + d], m = [.5 + c, .5 - d], t.append(Gt.fromRect(i).stroke(null).fill(new ri({ start: p, end: m, stops: f, userSpace: !1 }))); break; case "radial": window.console && window.console.log && window.console.log("Radial gradients are not yet supported in HTML renderer") } } }(n)) } } function s(i, r, s) { function a(e) { return { x: e.y, y: e.x } } var l, c, d, u, h, f, p, m; if (0 !== i.width && 0 !== i.height && (o(i), l = y.width > 0 && (r && "ltr" == T || s && "rtl" == T), c = b.width > 0 && (s && "ltr" == T || r && "rtl" == T), 0 !== _.width || 0 !== y.width || 0 !== b.width || 0 !== w.width)) { if (_.color == b.color && _.color == w.color && _.color == y.color && _.width == b.width && _.width == w.width && _.width == y.width && l && c) return i = ze(i, _.width / 2), (d = Ve(e, i, _.width / 2)).options.stroke = { color: _.color, width: _.width }, void t.append(d); if (0 === k.x && 0 === x.x && 0 === S.x && 0 === C.x && _.width < 2 && y.width < 2 && b.width < 2 && w.width < 2) return _.width > 0 && t.append(new Gt({ stroke: { width: _.width, color: _.color } }).moveTo(i.left, i.top + _.width / 2).lineTo(i.right, i.top + _.width / 2)), w.width > 0 && t.append(new Gt({ stroke: { width: w.width, color: w.color } }).moveTo(i.left, i.bottom - w.width / 2).lineTo(i.right, i.bottom - w.width / 2)), l && t.append(new Gt({ stroke: { width: y.width, color: y.color } }).moveTo(i.left + y.width / 2, i.top).lineTo(i.left + y.width / 2, i.bottom)), void (c && t.append(new Gt({ stroke: { width: b.width, color: b.color } }).moveTo(i.right - b.width / 2, i.top).lineTo(i.right - b.width / 2, i.bottom))); u = Oe(i, k, x, S, C), h = u.tl, f = u.tr, p = u.br, m = u.bl, n(_.color, i.width, _.width, y.width, b.width, h, f, [1, 0, 0, 1, i.left, i.top]), n(w.color, i.width, w.width, b.width, y.width, p, m, [-1, 0, 0, -1, i.right, i.bottom]), n(y.color, i.height, y.width, w.width, _.width, a(m), a(h), [0, -1, 1, 0, i.left, i.bottom]), n(b.color, i.height, b.width, _.width, w.width, a(f), a(p), [0, 1, -1, 0, i.right, i.top]) } } var a, l, c, d, u, h, f, p, m, g, v = Ae(e), _ = Me(v, "top"), b = Me(v, "right"), w = Me(v, "bottom"), y = Me(v, "left"), k = Fe(v, "top-left"), x = Fe(v, "top-right"), C = Fe(v, "bottom-left"), S = Fe(v, "bottom-right"), T = Ee(v, "direction"), D = Ee(v, "background-color"); if (D = ke(D), a = Cn(Ee(v, "background-image")), l = Sn(Ee(v, "background-repeat")), c = Sn(Ee(v, "background-position")), d = Sn(Ee(v, "background-origin")), u = Sn(Ee(v, "background-size")), vn.msie && vn.version < 10 && (c = Sn(e.currentStyle.backgroundPosition)), h = ze(e.getBoundingClientRect(), "border-*-width", e), function () { var e, i, n, o, r, s, a, l = Ee(v, "clip"), c = /^\s*rect\((.*)\)\s*$/.exec(l); c && (e = c[1].split(/[ ,]+/g), i = "auto" == e[0] ? h.top : parseFloat(e[0]) + h.top, n = "auto" == e[1] ? h.right : parseFloat(e[1]) + h.left, o = "auto" == e[2] ? h.bottom : parseFloat(e[2]) + h.top, r = "auto" == e[3] ? h.left : parseFloat(e[3]) + h.left, s = new Zt, a = (new Gt).moveTo(r, i).lineTo(n, i).lineTo(n, o).lineTo(r, o).close(), Le(s, a), t.append(s), t = s, De(a)) }(), "table-row" == (g = Ee(v, "display"))) for (f = [], p = 0, m = e.children; p < m.length; ++p)f.push(m[p].getBoundingClientRect()); else 1 == (f = e.getClientRects()).length && (f = [e.getBoundingClientRect()]); for (f = function (t) { var i, n, o, r, s, a; if (/^td$/i.test(e.tagName) && (i = wn.table) && "collapse" == Ee(i.style, "border-collapse")) { if (n = Me(i.style, "left").width, o = Me(i.style, "top").width, 0 === n && 0 === o) return t; if (r = i.element.getBoundingClientRect(), s = i.element.rows[0].cells[0], (a = s.getBoundingClientRect()).top == r.top || a.left == r.left) return he(t).map(function (e) { return { left: e.left + n, top: e.top + o, right: e.right + n, bottom: e.bottom + o, height: e.height, width: e.width } }) } return t }(f), p = 0; p < f.length; ++p)s(f[p], 0 === p, p == f.length - 1); return f.length > 0 && "list-item" == g && !e.getAttribute("kendo-no-bullet") && function () { function n(i) { Re(e, function () { e.style.position = "relative"; var n = e.ownerDocument.createElement(_n); n.style.position = "absolute", n.style.boxSizing = "border-box", "outside" == r ? (n.style.width = "6em", n.style.left = "-6.8em", n.style.textAlign = "right") : n.style.left = "0px", i(n), e.insertBefore(n, e.firstChild), et(n, t), e.removeChild(n) }) } function o(t) { var i, n = e.parentNode.children, o = e.getAttribute("kendo-split-index"); if (null != o) return t(0 | o, n.length); for (i = 0; i < n.length; ++i)if (n[i] === e) return t(i, n.length) } var r, s = Ee(v, "list-style-type"); if ("none" != s) switch (r = Ee(v, "list-style-position"), s) { case "circle": case "disc": case "square": n(function (e) { e.style.fontSize = "60%", e.style.lineHeight = "200%", e.style.paddingRight = "0.5em", e.style.fontFamily = "DejaVu Serif", e.innerHTML = { disc: "", circle: "", square: " " }[s] }); break; case "decimal": case "decimal-leading-zero": n(function (e) { o(function (t) { ++t, "decimal-leading-zero" == s && t < 10 && (t = "0" + t), e.innerHTML = t + "." }) }); break; case "lower-roman": case "upper-roman": n(function (e) { o(function (t) { t = i(t + 1), "upper-roman" == s && (t = t.toUpperCase()), e.innerHTML = t + "." }) }); break; case "lower-latin": case "lower-alpha": case "upper-latin": case "upper-alpha": n(function (e) { o(function (t) { t = Ce(t), /^upper/i.test(s) && (t = t.toUpperCase()), e.innerHTML = t + "." }) }) } }(f[0]), function () { function i() { var i = Ve(e, h, "padding"), n = new Zt; Le(n, i), t.append(n), t = n, De(i) } !function (e) { return /^(?:textarea|select|input)$/i.test(e.tagName) }(e) ? /^(hidden|auto|scroll)/.test(Ee(v, "overflow")) ? i() : /^(hidden|auto|scroll)/.test(Ee(v, "overflow-x")) ? i() : /^(hidden|auto|scroll)/.test(Ee(v, "overflow-y")) && i() : i() }(), Ye(e, t) || Ze(e, t), t } function Ye(e, t) { var i, n, o, r; if (window.kendo && window.kendo.jQuery && e.getAttribute(window.kendo.attr("role")) && ((i = window.kendo.widgetInstance(window.kendo.jQuery(e))) && (i.exportDOMVisual || i.exportVisual))) return !!(n = i.exportDOMVisual ? i.exportDOMVisual() : i.exportVisual()) && ((o = new Zt).children.push(n), r = e.getBoundingClientRect(), o.transform(T().translate(r.left, r.top)), t.append(o), !0) } function Ke(e, t, i) { var n = function (e) { var t = e.getBoundingClientRect(); return t = ze(t = ze(t, "border-*-width", e), "padding-*", e) }(e), o = new Ct([n.left, n.top], [n.width, n.height]), r = new Qt(t, o); Le(r, Ve(e, n, "content")), i.append(r) } function Qe(e, t) { var i = Ae(e), n = Ae(t), o = parseFloat(Ee(i, "z-index")), r = parseFloat(Ee(n, "z-index")), s = Ee(i, "position"), a = Ee(n, "position"); return isNaN(o) && isNaN(r) ? /static|absolute/.test(s) && /static|absolute/.test(a) ? 0 : "static" == s ? -1 : "static" == a ? 1 : 0 : isNaN(o) ? 0 === r ? 0 : r > 0 ? -1 : 1 : isNaN(r) ? 0 === o ? 0 : o > 0 ? 1 : -1 : parseFloat(o) - parseFloat(r) } function Xe(e, t) { var i, n, o, r, s, a = e.tagName.toLowerCase(); if ("input" == a && ("checkbox" == e.type || "radio" == e.type)) return function (e, t) { var i = Ee(Ae(e), "color"), n = e.getBoundingClientRect(); "checkbox" == e.type ? (t.append(Gt.fromRect(new Ct([n.left + 1, n.top + 1], [n.width - 2, n.height - 2])).stroke(i, 1)), e.checked && t.append((new Gt).stroke(i, 1.2).moveTo(n.left + .22 * n.width, n.top + .55 * n.height).lineTo(n.left + .45 * n.width, n.top + .75 * n.height).lineTo(n.left + .78 * n.width, n.top + .22 * n.width))) : (t.append(new Rt(new At([(n.left + n.right) / 2, (n.top + n.bottom) / 2], Math.min(n.width - 2, n.height - 2) / 2)).stroke(i, 1)), e.checked && t.append(new Rt(new At([(n.left + n.right) / 2, (n.top + n.bottom) / 2], Math.min(n.width - 8, n.height - 8) / 2)).fill(i).stroke(null))) }(e, t); if (i = e.parentNode, n = e.ownerDocument, (o = n.createElement(_n)).style.cssText = je(Ae(e)), "input" == a && (o.style.whiteSpace = "pre"), "select" != a && "textarea" != a || (o.style.overflow = "auto"), "select" == a) if (e.multiple) for (s = 0; s < e.options.length; ++s)(r = n.createElement(_n)).style.cssText = je(Ae(e.options[s])), r.style.display = "block", r.textContent = e.options[s].textContent, o.appendChild(r); else (r = function (e) { return e.selectedOptions && e.selectedOptions.length > 0 ? e.selectedOptions[0] : e.options[e.selectedIndex] }(e)) && (o.textContent = r.textContent); else o.textContent = e.value; i.insertBefore(o, e), o.scrollLeft = e.scrollLeft, o.scrollTop = e.scrollTop, e.style.display = "none", Ze(o, t), e.style.display = "", i.removeChild(o) } function Ze(e, t) { var i, n, o, r, s, a; switch (wn._stackingContext.element === e && (wn._stackingContext.group = t), e.tagName.toLowerCase()) { case "img": Ke(e, e.src, t); break; case "canvas": try { Ke(e, e.toDataURL("image/png"), t) } catch (e) { } break; case "textarea": case "input": case "select": Xe(e, t); break; default: for (i = [], n = [], o = [], r = e.firstChild; r; r = r.nextSibling)switch (r.nodeType) { case 3: /\S/.test(r.data) && Je(e, r, t); break; case 1: s = Ae(r), a = Ee(s, "float"), "static" != Ee(s, "position") ? o.push(r) : "none" != a ? n.push(r) : i.push(r) }h(i, Qe).forEach(function (e) { et(e, t) }), h(n, Qe).forEach(function (e) { et(e, t) }), h(o, Qe).forEach(function (e) { et(e, t) }) } } function Je(e, t, i) { function n(e) { var t, i, n, o; if (vn.msie || vn.chrome) { for (t = e.getClientRects(), i = { top: 1 / 0, right: -1 / 0, bottom: -1 / 0, left: 1 / 0 }, n = 0; n < t.length; ++n)(o = t[n]).width <= 1 || o.bottom === k || (i.left = Math.min(o.left, i.left), i.top = Math.min(o.top, i.top), i.right = Math.max(o.right, i.right), i.bottom = Math.max(o.bottom, i.bottom)); return i.width = i.right - i.left, i.height = i.bottom - i.top, i } return e.getBoundingClientRect() } function o() { var e, i, o, s, d, u, h, f = l, m = a.substr(l).search(/\S/); if (l += m, m < 0 || l >= c) return !0; if (p.setStart(t, l), p.setEnd(t, l + 1), e = n(p), i = !1, (g || v > 1) && ((m = a.substr(l).search(/\s/)) >= 0 && (p.setEnd(t, l + m), (o = n(p)).bottom == e.bottom && (e = o, i = !0, l += m))), !i) { if ((m = function i(o, r, s) { p.setEnd(t, r); var a = n(p); return a.bottom != e.bottom && o < r ? i(o, o + r >> 1, r) : a.right != e.right ? (e = a, r < s ? i(r, r + s >> 1, s) : r) : r }(l, Math.min(c, l + y), c)) == l) return !0; if (l = m, 0 === (m = ("" + p).search(/\s+$/))) return !1; m > 0 && (p.setEnd(t, p.startOffset + m), e = n(p)) } if (vn.msie && (e = p.getClientRects()[0]), s = "" + p, /^(?:pre|pre-wrap)$/i.test(_)) { if (/\t/.test(s)) { for (d = 0, m = f; m < p.startOffset; ++m)9 == (u = a.charCodeAt(m)) ? d += 8 - d % 8 : 10 == u || 13 == u ? d = 0 : d++; for (; (m = s.search("\t")) >= 0;)h = "        ".substr(0, 8 - (d + m) % 8), s = s.substr(0, m) + h + s.substr(m + 1) } } else s = s.replace(/\s+/g, " "); i || (k = e.bottom), r(s, e) } function r(e, t) { var n, o, r; vn.msie && !isNaN(u) && (n = Dn(h), o = (t.top + t.bottom - n) / 2, t = { top: o, right: t.right, bottom: o + n, left: t.left, height: n, width: t.right - t.left }), r = new yn(e, new Ct([t.left, t.top], [t.width, t.height]), { font: h, fill: { color: f } }), i.append(r) } var s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T; if (!function () { var e = wn._clipbox; return null == e || (e ? 0 === e.width() || 0 === e.height() : void 0) }() && (s = Ae(e), !(parseFloat(Ee(s, "text-indent")) < -500) && (a = t.data, l = 0, (c = a.search(/\S\s*$/) + 1) && (d = Ee(s, "font-size"), u = Ee(s, "line-height"), h = [Ee(s, "font-style"), Ee(s, "font-variant"), Ee(s, "font-weight"), d, Ee(s, "font-family")].join(" "), d = parseFloat(d), u = parseFloat(u), 0 !== d)))) { for (f = Ee(s, "color"), p = e.ownerDocument.createRange(), m = Ee(s, "text-align"), g = "justify" == m, v = Ee(s, "column-count", 1), _ = Ee(s, "white-space"), vn.msie && ("ellipsis" == (b = s.textOverflow) && (w = e.style.textOverflow, e.style.textOverflow = "clip")), 0 === (y = e.getBoundingClientRect().width / d * 5) && (y = 500), k = null, x = wn.underline, C = wn["line-through"], S = wn.overline, T = x || C || S; !o();); vn.msie && "ellipsis" == b && (e.style.textOverflow = w), T && (p.selectNode(t), he(p.getClientRects()).forEach(function (e) { function t(t, n) { var o, r; t && (r = new Gt({ stroke: { width: o = d / 12, color: t } }), n -= o, r.moveTo(e.left, n).lineTo(e.right, n), i.append(r)) } t(x, e.bottom), t(C, e.bottom - e.height / 2.7), t(S, e.top) })) } } function et(e, t) { var i, n, o, r, s, a, l = Ae(e); ye(l), /^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(e.tagName) || null != wn._clipbox && (i = parseFloat(Ee(l, "opacity")), n = Ee(l, "visibility"), o = Ee(l, "display"), 0 !== i && "hidden" != n && "none" != o && (r = function (e) { var t, i, n = Ee(e, "transform"); return "none" == n ? null : (t = /^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(n)) ? (i = Ee(e, "transform-origin"), t = t[1].split(/\s*,\s*/g).map(parseFloat), i = i.split(/\s+/g).map(parseFloat), { matrix: t, origin: i }) : void 0 }(l), a = Ee(l, "z-index"), (r || i < 1) && "auto" == a && (a = 0), s = function (e, t, i) { var n, o, r, s, a, l; for ("auto" != i ? (n = wn._stackingContext.group, i = parseFloat(i)) : (n = t, i = 0), o = n.children, r = 0; r < o.length && !(null != o[r]._dom_zIndex && o[r]._dom_zIndex > i); ++r); return s = new Zt, n.insert(r, s), s._dom_zIndex = i, n !== t && wn._clipbox && (a = wn._matrix.invert(), l = wn._clipbox.transformCopy(a), Le(s, Gt.fromRect(l))), s }(0, t, a), i < 1 && s.opacity(i * s.opacity()), Se(e, l, s), r ? Re(e, function () { var t, i, n, o; Ie(e.style, "transform", "none", "important"), Ie(e.style, "transition", "none", "important"), "static" == Ee(l, "position") && Ie(e.style, "position", "relative", "important"), t = e.getBoundingClientRect(), i = t.left + r.origin[0], n = t.top + r.origin[1], o = tt(o = tt(o = [1, 0, 0, 1, -i, -n], r.matrix), [1, 0, 0, 1, i, n]), o = Be(s, o), wn._matrix = wn._matrix.multiplyCopy(o), Ge(e, s) }) : Ge(e, s), Te())) } function tt(e, t) { var i = e[0], n = e[1], o = e[2], r = e[3], s = e[4], a = e[5], l = t[0], c = t[1], d = t[2], u = t[3], h = t[4], f = t[5]; return [i * l + n * d, i * c + n * u, o * l + r * d, o * c + r * u, s * l + a * d + h, s * c + a * u + f] } var it, nt, ot, rt, st, at, lt, ct, dt, ut, ht, ft, pt, mt, gt, vt, _t, bt, wt, yt, kt, xt, Ct, St, Tt, Dt, At, Et, It, Mt, Rt, Ft, zt, Pt, Bt, Lt, Ht, Nt, Ot, Vt, Ut, Wt, qt, jt, Gt, $t, Yt, Kt, Qt, Xt, Zt, Jt, ei, ti, ii, ni, oi, ri, si, ai, li, ci, di, ui, hi, fi, pi, mi, gi, vi, _i, bi, wi, yi, ki, xi, Ci, Si, Ti, Di, Ai, Ei, Ii, Mi, Ri, Fi, zi, Pi, Bi, Li, Hi, Ni, Oi, Vi, Ui, Wi, qi, ji, Gi, $i, Yi, Ki, Qi, Xi, Zi, Ji, en, tn, nn, on, rn, sn, an, ln, cn, dn, un, hn, fn, pn, mn, gn, vn, _n, bn, wn, yn, kn, xn, Cn, Sn, Tn, Dn, An; window.kendo = window.kendo || {}, it = kendo.drawing, nt = it.util, ot = kendo.Class, rt = kendo.util, st = kendo.support, at = nt.createPromise, lt = nt.promiseAll, ct = { extend: function (e) { var t; for (t in this) "extend" !== t && (e[t] = this[t]) }, observers: function () { return this._observers = this._observers || [] }, addObserver: function (e) { return this._observers ? this._observers.push(e) : this._observers = [e], this }, removeObserver: function (e) { var t = this.observers(), i = t.indexOf(e); return -1 !== i && t.splice(i, 1), this }, trigger: function (e, t) { var i, n, o = this._observers; if (o && !this._suspended) for (i = 0; i < o.length; i++)(n = o[i])[e] && n[e](t); return this }, optionsChange: function (e) { void 0 === e && (e = {}), e.element = this, this.trigger("optionsChange", e) }, geometryChange: function () { this.trigger("geometryChange", { element: this }) }, suspend: function () { return this._suspended = (this._suspended || 0) + 1, this }, resume: function () { return this._suspended = Math.max((this._suspended || 0) - 1, 0), this }, _observerField: function (e, t) { this[e] && this[e].removeObserver(this), this[e] = t, t.addObserver(this) } }, dt = { 1: "i", 10: "x", 100: "c", 2: "ii", 20: "xx", 200: "cc", 3: "iii", 30: "xxx", 300: "ccc", 4: "iv", 40: "xl", 400: "cd", 5: "v", 50: "l", 500: "d", 6: "vi", 60: "lx", 600: "dc", 7: "vii", 70: "lxx", 700: "dcc", 8: "viii", 80: "lxxx", 800: "dccc", 9: "ix", 90: "xc", 900: "cm", 1000: "m" }, ut = "undefined", ht = 1, ft = Math.PI / 180, pt = Number.MAX_VALUE, mt = -Number.MAX_VALUE, gt = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", vt = String.fromCharCode, _t = { append: t, arabicToRoman: i, createPromise: at, defined: n, definitionId: o, deg: r, encodeBase64: s, eventCoordinates: a, eventElement: l, isTransparent: c, last: d, limitValue: u, mergeSort: h, promiseAll: lt, rad: f, round: p, valueOrDefault: m, bindEvents: g, elementOffset: v, elementSize: w, elementStyles: _, unbindEvents: y, DEG_TO_RAD: ft, MAX_NUM: pt, MIN_NUM: mt }, bt = {}.toString, wt = ot.extend({ init: function (e, t) { var i, n; for (i in void 0 === t && (t = ""), this.prefix = t, e) n = e[i], n = this._wrap(n, i), this[i] = n }, get: function (e) { for (var t, i = e.split("."), n = this; i.length && n;)t = i.shift(), n = n[t]; return n }, set: function (e, t) { var i = this.get(e); i !== t && (this._set(e, this._wrap(t, e)), this.optionsChange({ field: this.prefix + e, value: t })) }, _set: function (e, t) { var i, n, o, r = e.indexOf(".") >= 0, s = this, a = e; if (r) { for (i = a.split("."), n = this.prefix; i.length > 1;)a = i.shift(), n += a + ".", (o = s[a]) || ((o = new wt({}, n)).addObserver(this), s[a] = o), s = o; a = i[0] } s._clear(a), s[a] = t }, _clear: function (e) { var t = this[e]; t && t.removeObserver && t.removeObserver(this) }, _wrap: function (e, t) { var i = bt.call(e), o = e; return null !== o && n(o) && "[object Object]" === i && (e instanceof wt || e instanceof ot || (o = new wt(o, this.prefix + t + ".")), o.addObserver(this)), o } }), ct.extend(wt.prototype), (yt = ot.extend({ init: function (e, t, i, n, o, r) { void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === o && (o = 0), void 0 === r && (r = 0), this.a = e, this.b = t, this.c = i, this.d = n, this.e = o, this.f = r }, multiplyCopy: function (e) { return new yt(this.a * e.a + this.c * e.b, this.b * e.a + this.d * e.b, this.a * e.c + this.c * e.d, this.b * e.c + this.d * e.d, this.a * e.e + this.c * e.f + this.e, this.b * e.e + this.d * e.f + this.f) }, invert: function () { var e = this, t = e.a, i = e.b, n = e.c, o = e.d, r = e.e, s = e.f, a = t * o - i * n; return 0 === a ? null : new yt(o / a, -i / a, -n / a, t / a, (n * s - o * r) / a, (i * r - t * s) / a) }, clone: function () { return new yt(this.a, this.b, this.c, this.d, this.e, this.f) }, equals: function (e) { return !!e && this.a === e.a && this.b === e.b && this.c === e.c && this.d === e.d && this.e === e.e && this.f === e.f }, round: function (e) { return this.a = p(this.a, e), this.b = p(this.b, e), this.c = p(this.c, e), this.d = p(this.d, e), this.e = p(this.e, e), this.f = p(this.f, e), this }, toArray: function (e) { var t, i = [this.a, this.b, this.c, this.d, this.e, this.f]; if (n(e)) for (t = 0; t < i.length; t++)i[t] = p(i[t], e); return i }, toString: function (e, t) { return void 0 === t && (t = ","), this.toArray(e).join(t) } })).translate = function (e, t) { return new yt(1, 0, 0, 1, e, t) }, yt.unit = function () { return new yt(1, 0, 0, 1, 0, 0) }, yt.rotate = function (e, t, i) { var n = new yt; return n.a = Math.cos(f(e)), n.b = Math.sin(f(e)), n.c = -n.b, n.d = n.a, n.e = t - t * n.a + i * n.b || 0, n.f = i - i * n.a - t * n.b || 0, n }, yt.scale = function (e, t) { return new yt(e, 0, 0, t, 0, 0) }, yt.IDENTITY = yt.unit(), (kt = ot.extend({ init: function (e, t) { this.x = e || 0, this.y = t || 0 }, equals: function (e) { return e && e.x === this.x && e.y === this.y }, clone: function () { return new kt(this.x, this.y) }, rotate: function (e, t) { var i = kt.create(t) || kt.ZERO; return this.transform(yt.rotate(e, i.x, i.y)) }, translate: function (e, t) { return this.x += e, this.y += t, this.geometryChange(), this }, translateWith: function (e) { return this.translate(e.x, e.y) }, move: function (e, t) { return this.x = this.y = 0, this.translate(e, t) }, scale: function (e, t) { return void 0 === t && (t = e), this.x *= e, this.y *= t, this.geometryChange(), this }, scaleCopy: function (e, t) { return this.clone().scale(e, t) }, transform: function (e) { var t = S(e), i = this.x, n = this.y; return this.x = t.a * i + t.c * n + t.e, this.y = t.b * i + t.d * n + t.f, this.geometryChange(), this }, transformCopy: function (e) { var t = this.clone(); return e && t.transform(e), t }, distanceTo: function (e) { var t = this.x - e.x, i = this.y - e.y; return Math.sqrt(t * t + i * i) }, round: function (e) { return this.x = p(this.x, e), this.y = p(this.y, e), this.geometryChange(), this }, toArray: function (e) { var t = n(e), i = t ? p(this.x, e) : this.x, o = t ? p(this.y, e) : this.y; return [i, o] }, toString: function (e, t) { var i, o; return void 0 === t && (t = " "), this, i = this.x, o = this.y, n(e) && (i = p(i, e), o = p(o, e)), i + t + o } })).create = function (e, t) { if (n(e)) return e instanceof kt ? e : 1 === arguments.length && 2 === e.length ? new kt(e[0], e[1]) : new kt(e, t) }, kt.min = function () { var e, t, i = arguments, n = pt, o = pt; for (e = 0; e < arguments.length; e++)t = i[e], n = Math.min(t.x, n), o = Math.min(t.y, o); return new kt(n, o) }, kt.max = function () { var e, t, i = arguments, n = mt, o = mt; for (e = 0; e < arguments.length; e++)t = i[e], n = Math.max(t.x, n), o = Math.max(t.y, o); return new kt(n, o) }, kt.minPoint = function () { return new kt(mt, mt) }, kt.maxPoint = function () { return new kt(pt, pt) }, Object.defineProperties && Object.defineProperties(kt, { ZERO: { get: function () { return new kt(0, 0) } } }), C(kt.prototype, ["x", "y"]), ct.extend(kt.prototype), (xt = ot.extend({ init: function (e, t) { this.width = e || 0, this.height = t || 0 }, equals: function (e) { return e && e.width === this.width && e.height === this.height }, clone: function () { return new xt(this.width, this.height) }, toArray: function (e) { var t = n(e), i = t ? p(this.width, e) : this.width, o = t ? p(this.height, e) : this.height; return [i, o] } })).create = function (e, t) { if (n(e)) return e instanceof xt ? e : 1 === arguments.length && 2 === e.length ? new xt(e[0], e[1]) : new xt(e, t) }, Object.defineProperties && Object.defineProperties(xt, { ZERO: { get: function () { return new xt(0, 0) } } }), C(xt.prototype, ["width", "height"]), ct.extend(xt.prototype), (Ct = ot.extend({ init: function (e, t) { void 0 === e && (e = new kt), void 0 === t && (t = new xt), this.setOrigin(e), this.setSize(t) }, clone: function () { return new Ct(this.origin.clone(), this.size.clone()) }, equals: function (e) { return e && e.origin.equals(this.origin) && e.size.equals(this.size) }, setOrigin: function (e) { return this._observerField("origin", kt.create(e)), this.geometryChange(), this }, getOrigin: function () { return this.origin }, setSize: function (e) { return this._observerField("size", xt.create(e)), this.geometryChange(), this }, getSize: function () { return this.size }, width: function () { return this.size.width }, height: function () { return this.size.height }, topLeft: function () { return this.origin.clone() }, bottomRight: function () { return this.origin.clone().translate(this.width(), this.height()) }, topRight: function () { return this.origin.clone().translate(this.width(), 0) }, bottomLeft: function () { return this.origin.clone().translate(0, this.height()) }, center: function () { return this.origin.clone().translate(this.width() / 2, this.height() / 2) }, bbox: function (e) { var t = this.topLeft().transformCopy(e), i = this.topRight().transformCopy(e), n = this.bottomRight().transformCopy(e), o = this.bottomLeft().transformCopy(e); return Ct.fromPoints(t, i, n, o) }, transformCopy: function (e) { return Ct.fromPoints(this.topLeft().transform(e), this.bottomRight().transform(e)) }, expand: function (e, t) { return void 0 === t && (t = e), this.size.width += 2 * e, this.size.height += 2 * t, this.origin.translate(-e, -t), this }, expandCopy: function (e, t) { return this.clone().expand(e, t) }, containsPoint: function (e) { var t = this.origin, i = this.bottomRight(); return !(e.x < t.x || e.y < t.y || i.x < e.x || i.y < e.y) }, _isOnPath: function (e, t) { var i = this.expandCopy(t, t), n = this.expandCopy(-t, -t); return i.containsPoint(e) && !n.containsPoint(e) } })).fromPoints = function () { var e = kt.min.apply(null, arguments), t = kt.max.apply(null, arguments), i = new xt(t.x - e.x, t.y - e.y); return new Ct(e, i) }, Ct.union = function (e, t) { return Ct.fromPoints(kt.min(e.topLeft(), t.topLeft()), kt.max(e.bottomRight(), t.bottomRight())) }, Ct.intersect = function (e, t) { var i = { left: e.topLeft().x, top: e.topLeft().y, right: e.bottomRight().x, bottom: e.bottomRight().y }, n = { left: t.topLeft().x, top: t.topLeft().y, right: t.bottomRight().x, bottom: t.bottomRight().y }; if (i.left <= n.right && n.left <= i.right && i.top <= n.bottom && n.top <= i.bottom) return Ct.fromPoints(new kt(Math.max(i.left, n.left), Math.max(i.top, n.top)), new kt(Math.min(i.right, n.right), Math.min(i.bottom, n.bottom))) }, ct.extend(Ct.prototype), St = ot.extend({ init: function (e) { void 0 === e && (e = yt.unit()), this._matrix = e }, clone: function () { return new St(this._matrix.clone()) }, equals: function (e) { return e && e._matrix.equals(this._matrix) }, translate: function (e, t) { return this._matrix = this._matrix.multiplyCopy(yt.translate(e, t)), this._optionsChange(), this }, scale: function (e, t, i) { void 0 === t && (t = e), void 0 === i && (i = null); var n = i; return n && (n = kt.create(n), this._matrix = this._matrix.multiplyCopy(yt.translate(n.x, n.y))), this._matrix = this._matrix.multiplyCopy(yt.scale(e, t)), n && (this._matrix = this._matrix.multiplyCopy(yt.translate(-n.x, -n.y))), this._optionsChange(), this }, rotate: function (e, t) { var i = kt.create(t) || kt.ZERO; return this._matrix = this._matrix.multiplyCopy(yt.rotate(e, i.x, i.y)), this._optionsChange(), this }, multiply: function (e) { var t = S(e); return this._matrix = this._matrix.multiplyCopy(t), this._optionsChange(), this }, matrix: function (e) { return e ? (this._matrix = e, this._optionsChange(), this) : this._matrix }, _optionsChange: function () { this.optionsChange({ field: "transform", value: this }) } }), ct.extend(St.prototype), (Tt = ot.extend({ init: function (e) { this._initOptions(e) }, _initOptions: function (e) { var t, i; void 0 === e && (e = {}), t = e.clip, (i = e.transform) && (e.transform = T(i)), t && !t.id && (t.id = o()), this.options = new wt(e), this.options.addObserver(this) }, transform: function (e) { return n(e) ? void this.options.set("transform", T(e)) : this.options.get("transform") }, parentTransform: function () { for (var e, t, i = this; i.parent;)i = i.parent, (t = i.transform()) && (e = t.matrix().multiplyCopy(e || yt.unit())); if (e) return T(e) }, currentTransform: function (e) { var t, i, n, o; if (void 0 === e && (e = this.parentTransform()), t = this.transform(), i = S(t), n = S(e), o = i && n ? n.multiplyCopy(i) : i || n) return T(o) }, visible: function (e) { return n(e) ? (this.options.set("visible", e), this) : !1 !== this.options.get("visible") }, clip: function (e) { var t = this.options; return n(e) ? (e && !e.id && (e.id = o()), t.set("clip", e), this) : t.get("clip") }, opacity: function (e) { return n(e) ? (this.options.set("opacity", e), this) : m(this.options.get("opacity"), 1) }, clippedBBox: function (e) { var t, i = this._clippedBBox(e); if (i) return (t = this.clip()) ? Ct.intersect(i, t.bbox(e)) : i }, containsPoint: function (e, t) { var i, n; return !!this.visible() && (i = this.currentTransform(t), n = e, i && (n = e.transformCopy(i.matrix().invert())), this._hasFill() && this._containsPoint(n) || this._isOnPath && this._hasStroke() && this._isOnPath(n)) }, _hasFill: function () { var e = this.options.fill; return e && !c(e.color) }, _hasStroke: function () { var e = this.options.stroke; return e && e.width > 0 && !c(e.color) }, _clippedBBox: function (e) { return this.bbox(e) } })).prototype.nodeType = "Element", ct.extend(Tt.prototype), Dt = Math.PI / 2, C((At = ot.extend({ init: function (e, t) { void 0 === e && (e = new kt), void 0 === t && (t = 0), this.setCenter(e), this.setRadius(t) }, setCenter: function (e) { return this._observerField("center", kt.create(e)), this.geometryChange(), this }, getCenter: function () { return this.center }, equals: function (e) { return e && e.center.equals(this.center) && e.radius === this.radius }, clone: function () { return new At(this.center.clone(), this.radius) }, pointAt: function (e) { return this._pointAt(f(e)) }, bbox: function (e) { var t, i, n, o, r = D(this.center, this.radius, this.radius, e), s = kt.maxPoint(), a = kt.minPoint(); for (t = 0; t < 4; t++)i = this._pointAt(r.x + t * Dt).transformCopy(e), n = this._pointAt(r.y + t * Dt).transformCopy(e), o = new kt(i.x, n.y), s = kt.min(s, o), a = kt.max(a, o); return Ct.fromPoints(s, a) }, _pointAt: function (e) { var t = this.center, i = this.radius; return new kt(t.x + i * Math.cos(e), t.y + i * Math.sin(e)) }, containsPoint: function (e) { var t = this.center, i = this.radius, n = Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2) <= Math.pow(i, 2); return n }, _isOnPath: function (e, t) { var i = this.center, n = this.radius, o = i.distanceTo(e); return n - t <= o && o <= n + t } })).prototype, ["radius"]), ct.extend(At.prototype), Et = { extend: function (e) { e.fill = this.fill, e.stroke = this.stroke }, fill: function (e, t) { var i, o = this.options; return n(e) ? (e && "Gradient" !== e.nodeType ? (i = { color: e }, n(t) && (i.opacity = t), o.set("fill", i)) : o.set("fill", e), this) : o.get("fill") }, stroke: function (e, t, i) { return n(e) ? (this.options.set("stroke.color", e), n(t) && this.options.set("stroke.width", t), n(i) && this.options.set("stroke.opacity", i), this) : this.options.get("stroke") } }, It = "" + yt.IDENTITY, Mt = { extend: function (e) { e.bbox = this.bbox, e.geometryChange = this.geometryChange }, bbox: function (e) { var t, i, n = S(this.currentTransform(e)), o = n ? "" + n : It; return this._bboxCache && this._matrixHash === o ? t = this._bboxCache.clone() : (t = this._bbox(n), this._bboxCache = t ? t.clone() : null, this._matrixHash = o), (i = this.options.get("stroke.width")) && t && t.expand(i / 2), t }, geometryChange: function () { delete this._bboxCache, this.trigger("geometryChange", { element: this }) } }, (Rt = Tt.extend({ init: function (e, t) { void 0 === e && (e = new At), void 0 === t && (t = {}), Tt.fn.init.call(this, t), this.geometry(e), n(this.options.stroke) || this.stroke("#000") }, rawBBox: function () { return this._geometry.bbox() }, _bbox: function (e) { return this._geometry.bbox(e) }, _containsPoint: function (e) { return this.geometry().containsPoint(e) }, _isOnPath: function (e) { return this.geometry()._isOnPath(e, this.options.stroke.width / 2) } })).prototype.nodeType = "Circle", Et.extend(Rt.prototype), Mt.extend(Rt.prototype), E(Rt.prototype, ["geometry"]), Ft = 10, zt = Math.pow, (Pt = ot.extend({ init: function (e, t) { void 0 === e && (e = new kt), void 0 === t && (t = {}), this.setCenter(e), this.radiusX = t.radiusX, this.radiusY = t.radiusY || t.radiusX, this.startAngle = t.startAngle, this.endAngle = t.endAngle, this.anticlockwise = t.anticlockwise || !1 }, clone: function () { return new Pt(this.center, { radiusX: this.radiusX, radiusY: this.radiusY, startAngle: this.startAngle, endAngle: this.endAngle, anticlockwise: this.anticlockwise }) }, setCenter: function (e) { return this._observerField("center", kt.create(e)), this.geometryChange(), this }, getCenter: function () { return this.center }, pointAt: function (e) { var t = this.center, i = f(e); return new kt(t.x + this.radiusX * Math.cos(i), t.y + this.radiusY * Math.sin(i)) }, curvePoints: function () { var e, t, i, n = this.startAngle, o = this.anticlockwise ? -1 : 1, r = [this.pointAt(n)], s = this._arcInterval(), a = s.endAngle - s.startAngle, l = Math.ceil(a / 45), c = a / l, d = n; for (e = 1; e <= l; e++)t = d + o * c, i = this._intervalCurvePoints(d, t), r.push(i.cp1, i.cp2, i.p2), d = t; return r }, bbox: function (e) { for (var t, i, n = this._arcInterval(), o = n.startAngle, s = n.endAngle, a = D(this.center, this.radiusX, this.radiusY, e), l = r(a.x), c = r(a.y), d = this.pointAt(s).transformCopy(e), u = z(l, o), h = z(c, o), f = this.pointAt(o).transformCopy(e), p = kt.min(f, d), m = kt.max(f, d); u < s || h < s;)t = void 0, u < s && (t = this.pointAt(u).transformCopy(e), u += 90), i = void 0, h < s && (i = this.pointAt(h).transformCopy(e), h += 90), f = new kt(t.x, i.y), p = kt.min(p, f), m = kt.max(m, f); return Ct.fromPoints(p, m) }, _arcInterval: function () { var e, t = this, i = t.startAngle, n = t.endAngle, o = t.anticlockwise; return o && (e = i, i = n, n = e), (i > n || o && i === n) && (n += 360), { startAngle: i, endAngle: n } }, _intervalCurvePoints: function (e, t) { var i = this.pointAt(e), n = this.pointAt(t), o = this._derivativeAt(e), r = this._derivativeAt(t), s = (f(t) - f(e)) / 3, a = new kt(i.x + s * o.x, i.y + s * o.y), l = new kt(n.x - s * r.x, n.y - s * r.y); return { p1: i, cp1: a, cp2: l, p2: n } }, _derivativeAt: function (e) { var t = f(e); return new kt(-this.radiusX * Math.sin(t), this.radiusY * Math.cos(t)) }, containsPoint: function (e) { var t, i, n, o = this._arcInterval(), r = o.endAngle - o.startAngle, s = this, a = s.center, l = s.radiusX, c = s.radiusY, d = a.distanceTo(e), u = Math.atan2(e.y - a.y, e.x - a.x), h = l * c / Math.sqrt(zt(l, 2) * zt(Math.sin(u), 2) + zt(c, 2) * zt(Math.cos(u), 2)), f = this.pointAt(this.startAngle).round(Ft), p = this.pointAt(this.endAngle).round(Ft), m = function (e, t, i, n) { var o = t.x - e.x, r = n.x - i.x, s = t.y - e.y, a = n.y - i.y, l = e.x - i.x, c = e.y - i.y, d = o * a - r * s, u = (o * c - s * l) / d, h = (r * c - a * l) / d; if (u >= 0 && u <= 1 && h >= 0 && h <= 1) return new kt(e.x + h * o, e.y + h * s) }(a, e.round(Ft), f, p); return r < 180 ? t = m && M(a.distanceTo(m), d) && M(d, h) : (360 !== (i = R(a.x, a.y, l, c, e.x, e.y)) && (i = (360 + i) % 360), n = o.startAngle <= i && i <= o.endAngle, t = n && M(d, h) || !n && (!m || m.equals(e))), t }, _isOnPath: function (e, t) { var i = this._arcInterval(), n = this.center, o = R(n.x, n.y, this.radiusX, this.radiusY, e.x, e.y); return 360 !== o && (o = (360 + o) % 360), i.startAngle <= o && o <= i.endAngle && this.pointAt(o).distanceTo(e) <= t } })).fromPoints = function (e, t, i, n, o, r) { var s = F({ x1: e.x, y1: e.y, x2: t.x, y2: t.y, rx: i, ry: n, largeArc: o, swipe: r }); return new Pt(s.center, { startAngle: s.startAngle, endAngle: s.endAngle, radiusX: i, radiusY: n, anticlockwise: 0 === r }) }, C(Pt.prototype, ["radiusX", "radiusY", "startAngle", "endAngle", "anticlockwise"]), ct.extend(Pt.prototype), Bt = [].push, Lt = [].pop, Ht = [].splice, Nt = [].shift, Ot = [].slice, Vt = [].unshift, Ut = ot.extend({ init: function (e) { void 0 === e && (e = []), this.length = 0, this._splice(0, e.length, e) }, elements: function (e) { return e ? (this._splice(0, this.length, e), this._change(), this) : this.slice(0) }, push: function () { var e = arguments, t = Bt.apply(this, e); return this._add(e), t }, slice: function () { return Ot.call(this) }, pop: function () { var e = this.length, t = Lt.apply(this); return e && this._remove([t]), t }, splice: function (e, t) { var i = Ot.call(arguments, 2), n = this._splice(e, t, i); return this._change(), n }, shift: function () { var e = this.length, t = Nt.apply(this); return e && this._remove([t]), t }, unshift: function () { var e = arguments, t = Vt.apply(this, e); return this._add(e), t }, indexOf: function (e) { var t, i = this.length; for (t = 0; t < i; t++)if (this[t] === e) return t; return -1 }, _splice: function (e, t, i) { var n = Ht.apply(this, [e, t].concat(i)); return this._clearObserver(n), this._setObserver(i), n }, _add: function (e) { this._setObserver(e), this._change() }, _remove: function (e) { this._clearObserver(e), this._change() }, _setObserver: function (e) { var t; for (t = 0; t < e.length; t++)e[t].addObserver(this) }, _clearObserver: function (e) { var t; for (t = 0; t < e.length; t++)e[t].removeObserver(this) }, _change: function () { } }), ct.extend(Ut.prototype), Wt = Ut.extend({ _change: function () { this.geometryChange() } }), qt = ot.extend({ init: function (e, t) { void 0 === e && (e = 0), void 0 === t && (t = 0), this.real = e, this.img = t }, add: function (e) { return new qt(p(this.real + e.real, Ft), p(this.img + e.img, Ft)) }, addConstant: function (e) { return new qt(this.real + e, this.img) }, negate: function () { return new qt(-this.real, -this.img) }, multiply: function (e) { return new qt(this.real * e.real - this.img * e.img, this.real * e.img + this.img * e.real) }, multiplyConstant: function (e) { return new qt(this.real * e, this.img * e) }, nthRoot: function (e) { var t = Math.atan2(this.img, this.real), i = Math.sqrt(Math.pow(this.img, 2) + Math.pow(this.real, 2)), n = Math.pow(i, 1 / e); return new qt(n * Math.cos(t / e), n * Math.sin(t / e)) }, equals: function (e) { return this.real === e.real && this.img === e.img }, isReal: function () { return 0 === this.img } }), B((jt = ot.extend({ init: function (e, t, i) { this.anchor(e || new kt), this.controlIn(t), this.controlOut(i) }, bboxTo: function (e, t) { var i = this.anchor().transformCopy(t), n = e.anchor().transformCopy(t); return this.controlOut() && e.controlIn() ? this._curveBoundingBox(i, this.controlOut().transformCopy(t), e.controlIn().transformCopy(t), n) : this._lineBoundingBox(i, n) }, _lineBoundingBox: function (e, t) { return Ct.fromPoints(e, t) }, _curveBoundingBox: function (e, t, i, n) { var o = [e, t, i, n], r = this._curveExtremesFor(o, "x"), s = this._curveExtremesFor(o, "y"), a = q([r.min, r.max, e.x, n.x]), l = q([s.min, s.max, e.y, n.y]); return Ct.fromPoints(new kt(a.min, l.min), new kt(a.max, l.max)) }, _curveExtremesFor: function (e, t) { var i = this._curveExtremes(e[0][t], e[1][t], e[2][t], e[3][t]); return { min: H(i.min, t, e), max: H(i.max, t, e) } }, _curveExtremes: function (e, t, i, n) { var o, r, s = e - 3 * t + 3 * i - n, a = -2 * (e - 2 * t + i), l = e - t, c = Math.sqrt(a * a - 4 * s * l), d = 0, u = 1; return 0 === s ? 0 !== a && (d = u = -l / a) : isNaN(c) || (d = (-a + c) / (2 * s), u = (-a - c) / (2 * s)), ((o = Math.max(Math.min(d, u), 0)) < 0 || o > 1) && (o = 0), ((r = Math.min(Math.max(d, u), 1)) > 1 || r < 0) && (r = 1), { min: o, max: r } }, _intersectionsTo: function (e, t) { return this.controlOut() && e.controlIn() ? function (e, t, i) { var n, o, r = N(e, "x"), s = V(r[0], r[1], r[2], r[3] - t.x), a = 0; for (o = 0; o < s.length; o++)n = H(s[o], "y", e), (I(n, t.y) || n > t.y) && ((0 === s[o] || 1 === s[o]) && i.bottomRight().x > t.x || 0 < s[o] && s[o] < 1) && a++; return a }([this.anchor(), this.controlOut(), e.controlIn(), e.anchor()], t, this.bboxTo(e)) : W(this.anchor(), e.anchor(), t) }, _isOnCurveTo: function (e, t, i, n) { var o, r, s, a, l, c, d, u = this.bboxTo(e).expand(i, i); if (u.containsPoint(t)) return o = this.anchor(), r = this.controlOut(), s = e.controlIn(), a = e.anchor(), "start" === n && o.distanceTo(t) <= i ? !L(o, r, t) : "end" === n && a.distanceTo(t) <= i ? !L(a, s, t) : !(!U(l = [o, r, s, a], t, "x", "y", i) && !U(l, t, "y", "x", i)) || (c = T().rotate(45, t), U(d = [o.transformCopy(c), r.transformCopy(c), s.transformCopy(c), a.transformCopy(c)], t, "x", "y", i) || U(d, t, "y", "x", i)) }, _isOnLineTo: function (e, t, i) { var n = this.anchor(), o = e.anchor(), s = r(Math.atan2(o.y - n.y, o.x - n.x)), a = new Ct([n.x, n.y - i / 2], [n.distanceTo(o), i]); return a.containsPoint(t.transformCopy(T().rotate(-s, n))) }, _isOnPathTo: function (e, t, i, n) { return this.controlOut() && e.controlIn() ? this._isOnCurveTo(e, t, i / 2, n) : this._isOnLineTo(e, t, i) } })).prototype, ["anchor", "controlIn", "controlOut"]), ct.extend(jt.prototype), (Gt = Tt.extend({ init: function (e) { Tt.fn.init.call(this, e), this.segments = new Wt, this.segments.addObserver(this), n(this.options.stroke) || (this.stroke("#000"), n(this.options.stroke.lineJoin) || this.options.set("stroke.lineJoin", "miter")) }, moveTo: function (e, t) { return this.suspend(), this.segments.elements([]), this.resume(), this.lineTo(e, t), this }, lineTo: function (e, t) { var i = n(t) ? new kt(e, t) : e, o = new jt(i); return this.segments.push(o), this }, curveTo: function (e, t, i) { var n, o; return this.segments.length > 0 && (n = d(this.segments), o = new jt(i, t), this.suspend(), n.controlOut(e), this.resume(), this.segments.push(o)), this }, arc: function (e, t, i, n, o) { var r, s, a, l, c; return this.segments.length > 0 && (r = d(this.segments), s = r.anchor(), a = f(e), l = new kt(s.x - i * Math.cos(a), s.y - n * Math.sin(a)), c = new Pt(l, { startAngle: e, endAngle: t, radiusX: i, radiusY: n, anticlockwise: o }), this._addArcSegments(c)), this }, arcTo: function (e, t, i, n, o) { var r, s, a; return this.segments.length > 0 && (r = d(this.segments), s = r.anchor(), a = Pt.fromPoints(s, e, t, i, n, o), this._addArcSegments(a)), this }, _addArcSegments: function (e) { var t, i; for (this.suspend(), t = e.curvePoints(), i = 1; i < t.length; i += 3)this.curveTo(t[i], t[i + 1], t[i + 2]); this.resume(), this.geometryChange() }, close: function () { return this.options.closed = !0, this.geometryChange(), this }, rawBBox: function () { return this._bbox() }, _containsPoint: function (e) { var t, i, n, o = this.segments, r = o.length, s = 0; for (n = 1; n < r; n++)t = o[n - 1], i = o[n], s += t._intersectionsTo(i, e); return !this.options.closed && o[0].anchor().equals(o[r - 1].anchor()) || (s += W(o[0].anchor(), o[r - 1].anchor(), e)), s % 2 != 0 }, _isOnPath: function (e, t) { var i, n = this.segments, o = n.length, r = t || this.options.stroke.width; if (o > 1) { if (n[0]._isOnPathTo(n[1], e, r, "start")) return !0; for (i = 2; i <= o - 2; i++)if (n[i - 1]._isOnPathTo(n[i], e, r)) return !0; if (n[o - 2]._isOnPathTo(n[o - 1], e, r, "end")) return !0 } return !1 }, _bbox: function (e) { var t, i, n, o, r = this.segments, s = r.length; if (1 === s) i = r[0].anchor().transformCopy(e), t = new Ct(i, xt.ZERO); else if (s > 0) for (n = 1; n < s; n++)o = r[n - 1].bboxTo(r[n], e), t = t ? Ct.union(t, o) : o; return t } })).fromRect = function (e, t) { return new Gt(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close() }, Gt.fromPoints = function (e, t) { var i, n, o; if (e) { for (i = new Gt(t), n = 0; n < e.length; n++)(o = kt.create(e[n])) && (0 === n ? i.moveTo(o) : i.lineTo(o)); return i } }, Gt.fromArc = function (e, t) { var i = new Gt(t), n = e.startAngle, o = e.pointAt(n); return i.moveTo(o.x, o.y), i.arc(n, e.endAngle, e.radiusX, e.radiusY, e.anticlockwise), i }, Gt.prototype.nodeType = "Path", Et.extend(Gt.prototype), Mt.extend(Gt.prototype), ($t = Tt.extend({ init: function (e, t) { void 0 === e && (e = new Pt), void 0 === t && (t = {}), Tt.fn.init.call(this, t), this.geometry(e), n(this.options.stroke) || this.stroke("#000") }, _bbox: function (e) { return this._geometry.bbox(e) }, rawBBox: function () { return this.geometry().bbox() }, toPath: function () { var e, t = new Gt, i = this.geometry().curvePoints(); if (i.length > 0) for (t.moveTo(i[0].x, i[0].y), e = 1; e < i.length; e += 3)t.curveTo(i[e], i[e + 1], i[e + 2]); return t }, _containsPoint: function (e) { return this.geometry().containsPoint(e) }, _isOnPath: function (e) { return this.geometry()._isOnPath(e, this.options.stroke.width / 2) } })).prototype.nodeType = "Arc", Et.extend($t.prototype), Mt.extend($t.prototype), E($t.prototype, ["geometry"]), (Yt = Tt.extend({ init: function (e) { Tt.fn.init.call(this, e), this.paths = new Wt, this.paths.addObserver(this), n(this.options.stroke) || this.stroke("#000") }, moveTo: function (e, t) { var i = new Gt; return i.moveTo(e, t), this.paths.push(i), this }, lineTo: function (e, t) { return this.paths.length > 0 && d(this.paths).lineTo(e, t), this }, curveTo: function (e, t, i) { return this.paths.length > 0 && d(this.paths).curveTo(e, t, i), this }, arc: function (e, t, i, n, o) { return this.paths.length > 0 && d(this.paths).arc(e, t, i, n, o), this }, arcTo: function (e, t, i, n, o) { return this.paths.length > 0 && d(this.paths).arcTo(e, t, i, n, o), this }, close: function () { return this.paths.length > 0 && d(this.paths).close(), this }, _bbox: function (e) { return j(this.paths, !0, e) }, rawBBox: function () { return j(this.paths, !1) }, _containsPoint: function (e) { var t, i = this.paths; for (t = 0; t < i.length; t++)if (i[t]._containsPoint(e)) return !0; return !1 }, _isOnPath: function (e) { var t, i = this.paths, n = this.options.stroke.width; for (t = 0; t < i.length; t++)if (i[t]._isOnPath(e, n)) return !0; return !1 }, _clippedBBox: function (e) { return G(this.paths, this.currentTransform(e)) } })).prototype.nodeType = "MultiPath", Et.extend(Yt.prototype), Mt.extend(Yt.prototype), (Kt = Tt.extend({ init: function (e, t, i) { void 0 === t && (t = new kt), void 0 === i && (i = {}), Tt.fn.init.call(this, i), this.content(e), this.position(t), this.options.font || (this.options.font = "12px sans-serif"), n(this.options.fill) || this.fill("#000") }, content: function (e) { return n(e) ? (this.options.set("content", e), this) : this.options.get("content") }, measure: function () { var e = rt.measureText(this.content(), { font: this.options.get("font") }); return e }, rect: function () { var e = this.measure(), t = this.position().clone(); return new Ct(t, [e.width, e.height]) }, bbox: function (e) { var t = S(this.currentTransform(e)); return this.rect().bbox(t) }, rawBBox: function () { return this.rect().bbox() }, _containsPoint: function (e) { return this.rect().containsPoint(e) } })).prototype.nodeType = "Text", Et.extend(Kt.prototype), B(Kt.prototype, ["position"]), (Qt = Tt.extend({ init: function (e, t, i) { void 0 === t && (t = new Ct), void 0 === i && (i = {}), Tt.fn.init.call(this, i), this.src(e), this.rect(t) }, src: function (e) { return n(e) ? (this.options.set("src", e), this) : this.options.get("src") }, bbox: function (e) { var t = S(this.currentTransform(e)); return this._rect.bbox(t) }, rawBBox: function () { return this._rect.bbox() }, _containsPoint: function (e) { return this._rect.containsPoint(e) }, _hasFill: function () { return this.src() } })).prototype.nodeType = "Image", E(Qt.prototype, ["rect"]), Xt = { extend: function (e, t) { e.traverse = function (e) { var i, n, o = this[t]; for (i = 0; i < o.length; i++)(n = o[i]).traverse ? n.traverse(e) : e(n); return this } } }, (Zt = Tt.extend({ init: function (e) { Tt.fn.init.call(this, e), this.children = [] }, childrenChange: function (e, t, i) { this.trigger("childrenChange", { action: e, items: t, index: i }) }, append: function () { return t(this.children, arguments), this._reparent(arguments, this), this.childrenChange("add", arguments), this }, insert: function (e, t) { return this.children.splice(e, 0, t), t.parent = this, this.childrenChange("add", [t], e), this }, insertAt: function (e, t) { return this.insert(t, e) }, remove: function (e) { var t = this.children.indexOf(e); return t >= 0 && (this.children.splice(t, 1), e.parent = null, this.childrenChange("remove", [e], t)), this }, removeAt: function (e) { if (0 <= e && e < this.children.length) { var t = this.children[e]; this.children.splice(e, 1), t.parent = null, this.childrenChange("remove", [t], e) } return this }, clear: function () { var e = this.children; return this.children = [], this._reparent(e, null), this.childrenChange("remove", e, 0), this }, bbox: function (e) { return j(this.children, !0, this.currentTransform(e)) }, rawBBox: function () { return j(this.children, !1) }, _clippedBBox: function (e) { return G(this.children, this.currentTransform(e)) }, currentTransform: function (e) { return Tt.prototype.currentTransform.call(this, e) || null }, containsPoint: function (e, t) { var i, n, o; if (this.visible()) for (i = this.children, n = this.currentTransform(t), o = 0; o < i.length; o++)if (i[o].containsPoint(e, n)) return !0; return !1 }, _reparent: function (e, t) { var i, n, o; for (i = 0; i < e.length; i++)n = e[i], (o = n.parent) && o !== this && o.remove && o.remove(n), n.parent = t } })).prototype.nodeType = "Group", Xt.extend(Zt.prototype, "children"), Jt = { alignContent: "start", justifyContent: "start", alignItems: "start", spacing: 0, orientation: "horizontal", lineSpacing: 0, wrap: !0 }, ei = Zt.extend({ init: function (t, i) { Zt.fn.init.call(this, e.extend({}, Jt, i)), this._rect = t, this._fieldMap = {} }, rect: function (e) { return e ? (this._rect = e, this) : this._rect }, _initMap: function () { var e = this.options, t = this._fieldMap; "horizontal" === e.orientation ? (t.sizeField = "width", t.groupsSizeField = "height", t.groupAxis = "x", t.groupsAxis = "y") : (t.sizeField = "height", t.groupsSizeField = "width", t.groupAxis = "y", t.groupsAxis = "x") }, reflow: function () { var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S; if (this._rect && 0 !== this.children.length) { for (this._initMap(), this.options.transform && this.transform(null), e = this.options, t = this._rect, i = this._initGroups(), n = i.groups, o = i.groupsSize, r = this._fieldMap, s = r.sizeField, a = r.groupsSizeField, l = r.groupAxis, c = r.groupsAxis, d = new kt, u = new kt, h = new xt, f = Y(o, t, e.alignContent, c, a), b = 0; b < n.length; b++) { for (v = n[b], d[l] = p = Y(v.size, t, e.justifyContent, l, s), d[c] = f, h[s] = v.size, h[a] = v.lineSize, _ = new Ct(d, h), w = 0; w < v.bboxes.length; w++)g = v.elements[w], m = v.bboxes[w], u[l] = p, u[c] = Y(m.size[a], _, e.alignItems, c, a), $(u, m, g), p += m.size[s] + e.spacing; f += v.lineSize + e.lineSpacing } !e.wrap && v.size > t.size[s] && (y = t.size[s] / _.size[s], k = _.topLeft().scale(y, y), x = _.size[a] * y, C = Y(x, t, e.alignContent, c, a), S = T(), "x" === l ? S.translate(t.origin.x - k.x, C - k.y) : S.translate(C - k.x, t.origin.y - k.y), S.scale(y, y), this.transform(S)) } }, _initGroups: function () { var e, t, i, n = this, o = this.options, r = this.children, s = o.lineSpacing, a = o.wrap, l = o.spacing, c = this._fieldMap.sizeField, d = this._newGroup(), u = [], h = function () { u.push(d), f += d.lineSize + s }, f = -s; for (e = 0; e < r.length; e++)t = r[e], i = r[e].clippedBBox(), t.visible() && i && (a && d.size + i.size[c] + l > n._rect.size[c] ? 0 === d.bboxes.length ? (n._addToGroup(d, i, t), h(), d = n._newGroup()) : (h(), d = n._newGroup(), n._addToGroup(d, i, t)) : n._addToGroup(d, i, t)); return d.bboxes.length && h(), { groups: u, groupsSize: f } }, _addToGroup: function (e, t, i) { e.size += t.size[this._fieldMap.sizeField] + this.options.spacing, e.lineSize = Math.max(t.size[this._fieldMap.groupsSizeField], e.lineSize), e.bboxes.push(t), e.elements.push(i) }, _newGroup: function () { return { lineSize: 0, size: -this.options.spacing, bboxes: [], elements: [] } } }), (ti = Tt.extend({ init: function (e, t) { void 0 === e && (e = new Ct), void 0 === t && (t = {}), Tt.fn.init.call(this, t), this.geometry(e), n(this.options.stroke) || this.stroke("#000") }, _bbox: function (e) { return this._geometry.bbox(e) }, rawBBox: function () { return this._geometry.bbox() }, _containsPoint: function (e) { return this._geometry.containsPoint(e) }, _isOnPath: function (e) { return this.geometry()._isOnPath(e, this.options.stroke.width / 2) } })).prototype.nodeType = "Rect", Et.extend(ti.prototype), Mt.extend(ti.prototype), E(ti.prototype, ["geometry"]), ii = Ut.extend({ _change: function () { this.optionsChange({ field: "stops" }) } }), (ni = ot.extend({ init: function (e, t, i) { this.options = new wt({ offset: e, color: t, opacity: n(i) ? i : 1 }), this.options.addObserver(this) } })).create = function (e) { if (n(e)) return e instanceof ni ? e : e.length > 1 ? new ni(e[0], e[1], e[2]) : new ni(e.offset, e.color, e.opacity) }, function (e, t) { for (var i = 0; i < t.length; i++)e[t[i]] = J(t[i]) }(ni.prototype, ["offset", "color", "opacity"]), ct.extend(ni.prototype), (oi = ot.extend({ init: function (e) { void 0 === e && (e = {}), this.stops = new ii(this._createStops(e.stops)), this.stops.addObserver(this), this._userSpace = e.userSpace, this.id = o() }, userSpace: function (e) { return n(e) ? (this._userSpace = e, this.optionsChange(), this) : this._userSpace }, _createStops: function (e) { var t, i; for (void 0 === e && (e = []), t = [], i = 0; i < e.length; i++)t.push(ni.create(e[i])); return t }, addStop: function (e, t, i) { this.stops.push(new ni(e, t, i)) }, removeStop: function (e) { var t = this.stops.indexOf(e); t >= 0 && this.stops.splice(t, 1) } })).prototype.nodeType = "Gradient", ct.extend(oi.prototype), e.extend(oi.prototype, { optionsChange: function (e) { this.trigger("optionsChange", { field: "gradient" + (e ? "." + e.field : ""), value: this }) }, geometryChange: function () { this.optionsChange() } }), B((ri = oi.extend({ init: function (e) { void 0 === e && (e = {}), oi.fn.init.call(this, e), this.start(e.start || new kt), this.end(e.end || new kt(1, 0)) } })).prototype, ["start", "end"]), B((si = oi.extend({ init: function (e) { void 0 === e && (e = {}), oi.fn.init.call(this, e), this.center(e.center || new kt), this._radius = n(e.radius) ? e.radius : 1, this._fallbackFill = e.fallbackFill }, radius: function (e) { return n(e) ? (this._radius = e, this.geometryChange(), this) : this._radius }, fallbackFill: function (e) { return n(e) ? (this._fallbackFill = e, this.optionsChange(), this) : this._fallbackFill } })).prototype, ["center"]), ai = { swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 }, linear: function (e) { return e }, easeOutElastic: function (e, t, i, n) { var o = 1.70158, r = 0, s = n; return 0 === e ? i : 1 === e ? i + n : (r || (r = .5), s < Math.abs(n) ? (s = n, o = r / 4) : o = r / (2 * Math.PI) * Math.asin(n / s), s * Math.pow(2, -10 * e) * Math.sin((+e - o) * (1.1 * Math.PI) / r) + n + i) } }, li = Date.now || function () { return (new Date).getTime() }, (ci = ot.extend({ init: function (t, i) { this.options = e.extend({}, this.options, i), this.element = t }, setup: function () { }, step: function () { }, play: function () { var e, t, i, n = this, o = this.options, r = o.duration, s = o.delay; void 0 === s && (s = 0), e = ai[o.easing], t = li() + s, i = t + r, 0 === r ? (this.step(1), this.abort()) : setTimeout(function () { var o = function () { var s, a, l; n._stopped || (s = li(), a = u(s - t, 0, r), l = e(a / r, a, 0, 1, r), n.step(l), s < i ? kendo.animationFrame(o) : n.abort()) }; o() }, s) }, abort: function () { this._stopped = !0 }, destroy: function () { this.abort() } })).prototype.options = { duration: 500, easing: "swing" }, (di = ot.extend({ init: function () { this._items = [] }, register: function (e, t) { this._items.push({ name: e, type: t }) }, create: function (e, t) { var i, n, o, r = this._items; if (t && t.type) for (n = t.type.toLowerCase(), o = 0; o < r.length; o++)if (r[o].name.toLowerCase() === n) { i = r[o]; break } if (i) return new i.type(e, t) } })).current = new di, ci.create = function (e, t, i) { return di.current.create(e, t, i) }, ui = { l: function (e, t) { var i, n, o = t.parameters, r = t.position; for (i = 0; i < o.length; i += 2)n = new kt(o[i], o[i + 1]), t.isRelative && n.translateWith(r), e.lineTo(n.x, n.y), r.x = n.x, r.y = n.y }, c: function (e, t) { var i, n, o, r, s = t.parameters, a = t.position; for (i = 0; i < s.length; i += 6)n = new kt(s[i], s[i + 1]), o = new kt(s[i + 2], s[i + 3]), r = new kt(s[i + 4], s[i + 5]), t.isRelative && (o.translateWith(a), n.translateWith(a), r.translateWith(a)), e.curveTo(n, o, r), a.x = r.x, a.y = r.y }, v: function (e, t) { var i = t.isRelative ? 0 : t.position.x; ee(t.parameters, !0, i), this.l(e, t) }, h: function (e, t) { var i = t.isRelative ? 0 : t.position.y; ee(t.parameters, !1, i), this.l(e, t) }, a: function (e, t) { var i, n, o, r, s, a, l = t.parameters, c = t.position; for (i = 0; i < l.length; i += 7)n = l[i], o = l[i + 1], r = l[i + 3], s = l[i + 4], a = new kt(l[i + 5], l[i + 6]), t.isRelative && a.translateWith(c), e.arcTo(a, n, o, r, s), c.x = a.x, c.y = a.y }, s: function (e, t) { var i, n, o, r, s, a = t.parameters, l = t.position, c = t.previousCommand; for ("s" !== c && "c" !== c || (i = d(d(e.paths).segments).controlIn()), n = 0; n < a.length; n += 4)o = new kt(a[n], a[n + 1]), r = new kt(a[n + 2], a[n + 3]), s = void 0, t.isRelative && (o.translateWith(l), r.translateWith(l)), s = i ? te(i, l) : l.clone(), i = o, e.curveTo(s, o, r), l.x = r.x, l.y = r.y }, q: function (e, t) { var i, n, o, r, s = t.parameters, a = t.position; for (i = 0; i < s.length; i += 4)n = new kt(s[i], s[i + 1]), o = new kt(s[i + 2], s[i + 3]), t.isRelative && (n.translateWith(a), o.translateWith(a)), r = ie(a, n, o), e.curveTo(r.controlOut, r.controlIn, o), a.x = o.x, a.y = o.y }, t: function (e, t) { var i, n, o, r, s, a = t.parameters, l = t.position, c = t.previousCommand; for ("q" !== c && "t" !== c || (n = d(d(e.paths).segments), i = n.controlIn().clone().translateWith(l.scaleCopy(-1 / 3)).scale(1.5)), o = 0; o < a.length; o += 2)r = new kt(a[o], a[o + 1]), t.isRelative && r.translateWith(l), i = i ? te(i, l) : l.clone(), s = ie(l, i, r), e.curveTo(s.controlOut, s.controlIn, r), l.x = r.x, l.y = r.y } }, hi = 1 / 3, fi = /([a-df-z]{1})([^a-df-z]*)(z)?/gi, pi = /[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g, (mi = ot.extend({ parse: function (e, t) { var i, n = new Yt(t), o = new kt; return e.replace(fi, function (e, t, r, s) { var a = t.toLowerCase(), l = a === t, c = function (e) { var t = []; return e.replace(pi, function (e, i) { t.push(parseFloat(i)) }), t }(r.trim()); if ("m" === a && (l ? (o.x += c[0], o.y += c[1]) : (o.x = c[0], o.y = c[1]), n.moveTo(o.x, o.y), c.length > 2 && (a = "l", c.splice(0, 2))), ui[a]) ui[a](n, { parameters: c, position: o, isRelative: l, previousCommand: i }), s && "z" === s.toLowerCase() && n.close(); else if ("m" !== a) throw Error("Error while parsing SVG path. Unsupported command: " + a); i = a }), n } })).current = new mi, Gt.parse = function (e, t) { return mi.current.parse(e, t) }, (gi = ot.extend({ init: function () { this._items = [] }, register: function (e, t, i) { var n = this._items, o = n[0], r = { name: e, type: t, order: i }; !o || i < o.order ? n.unshift(r) : n.push(r) }, create: function (e, t) { var i, n, o = this._items, r = o[0]; if (t && t.type) for (i = t.type.toLowerCase(), n = 0; n < o.length; n++)if (o[n].name === i) { r = o[n]; break } return r ? new r.type(e, t) : void kendo.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: " + navigator.userAgent) } })).current = new gi, vi = ["click", "mouseenter", "mouseleave", "mousemove", "resize", "tooltipOpen", "tooltipClose"], (_i = kendo.Observable.extend({ init: function (t, i) { kendo.Observable.fn.init.call(this), this.options = e.extend({}, i), this.element = t, this._click = this._handler("click"), this._mouseenter = this._handler("mouseenter"), this._mouseleave = this._handler("mouseleave"), this._mousemove = this._handler("mousemove"), this._visual = new Zt, w(t, this.options), this.bind(vi, this.options), this._enableTracking() }, draw: function (e) { this._visual.children.push(e) }, clear: function () { this._visual.children = [] }, destroy: function () { this._visual = null, this.unbind() }, eventTarget: function (e) { for (var t, i = l(e); !t && i && (t = i._kendoNode, i !== this.element);)i = i.parentElement; if (t) return t.srcElement }, exportVisual: function () { return this._visual }, getSize: function () { return w(this.element) }, currentSize: function (e) { return e ? void (this._size = e) : this._size }, setSize: function (e) { w(this.element, e), this.currentSize(e), this._resize() }, resize: function (e) { var t = this.getSize(), i = this.currentSize(); (e || (t.width > 0 || t.height > 0) && (!i || t.width !== i.width || t.height !== i.height)) && (this.currentSize(t), this._resize(t, e), this.trigger("resize", t)) }, size: function (e) { return e ? void this.setSize(e) : this.getSize() }, suspendTracking: function () { this._suspendedTracking = !0 }, resumeTracking: function () { this._suspendedTracking = !1 }, _enableTracking: function () { }, _resize: function () { }, _handler: function (e) { var t = this; return function (i) { var n = t.eventTarget(i); n && !t._suspendedTracking && t.trigger(e, { element: n, originalEvent: i, type: e }) } }, _elementOffset: function () { var e = this.element, t = _(e, ["paddingLeft", "paddingTop"]), i = t.paddingLeft, n = t.paddingTop, o = v(e), r = o.left, s = o.top; return { left: r + parseInt(i, 10), top: s + parseInt(n, 10) } }, _surfacePoint: function (e) { var t = this._elementOffset(), i = a(e), n = i.x - t.left, o = i.y - t.top; return new kt(n, o) } })).create = function (e, t) { return gi.current.create(e, t) }, _i.support = {}, bi = ot.extend({ init: function (e) { this.childNodes = [], this.parent = null, e && (this.srcElement = e, this.observe()) }, destroy: function () { var e, t; for (this.srcElement && this.srcElement.removeObserver(this), e = this.childNodes, t = 0; t < e.length; t++)this.childNodes[t].destroy(); this.parent = null }, load: function () { }, observe: function () { this.srcElement && this.srcElement.addObserver(this) }, append: function (e) { this.childNodes.push(e), e.parent = this }, insertAt: function (e, t) { this.childNodes.splice(t, 0, e), e.parent = this }, remove: function (e, t) { var i, n = e + t; for (i = e; i < n; i++)this.childNodes[i].removeSelf(); this.childNodes.splice(e, t) }, removeSelf: function () { this.clear(), this.destroy() }, clear: function () { this.remove(0, this.childNodes.length) }, invalidate: function () { this.parent && this.parent.invalidate() }, geometryChange: function () { this.invalidate() }, optionsChange: function () { this.invalidate() }, childrenChange: function (e) { "add" === e.action ? this.load(e.items, e.index) : "remove" === e.action && this.remove(e.index, e.items.length), this.invalidate() } }), wi = {}, yi = "http://www.w3.org/2000/svg", ki = "none", xi = function (e, t) { e.innerHTML = t }, "undefined" != typeof document && (Ci = "<svg xmlns='" + yi + "'></svg>", Si = document.createElement("div"), Ti = "undefined" != typeof DOMParser, Si.innerHTML = Ci, Ti && Si.firstChild.namespaceURI !== yi && (xi = function (e, t) { var i = new DOMParser, n = i.parseFromString(t, "text/xml"), o = document.adoptNode(n.documentElement); e.innerHTML = "", e.appendChild(o) })), Di = xi, Ai = "transform", Ei = { clip: "clip-path", fill: "fill" }, Ii = bi.extend({ init: function (e) { bi.fn.init.call(this, e), this.definitions = {} }, destroy: function () { this.element && (this.element._kendoNode = null, this.element = null), this.clearDefinitions(), bi.fn.destroy.call(this) }, load: function (e, t) { var i, o, r, s, a, l = this; for (i = 0; i < e.length; i++)o = e[i], r = o.children, s = new wi[o.nodeType](o), n(t) ? l.insertAt(s, t) : l.append(s), s.createDefinitions(), r && r.length > 0 && s.load(r), (a = l.element) && s.attachTo(a, t) }, root: function () { for (var e = this; e.parent;)e = e.parent; return e }, attachTo: function (e, t) { var i, o = document.createElement("div"); Di(o, "<svg xmlns='" + yi + "' version='1.1'>" + this.render() + "</svg>"), (i = o.firstChild.firstChild) && (n(t) ? e.insertBefore(i, e.childNodes[t] || null) : e.appendChild(i), this.setElement(i)) }, setElement: function (e) { var t, i, n; for (this.element && (this.element._kendoNode = null), this.element = e, this.element._kendoNode = this, t = this.childNodes, i = 0; i < t.length; i++)n = e.childNodes[i], t[i].setElement(n) }, clear: function () { var e, t; for (this.clearDefinitions(), this.element && (this.element.innerHTML = ""), e = this.childNodes, t = 0; t < e.length; t++)e[t].destroy(); this.childNodes = [] }, removeSelf: function () { if (this.element) { var e = this.element.parentNode; e && e.removeChild(this.element), this.element = null } bi.fn.removeSelf.call(this) }, template: function () { return this.renderChildren() }, render: function () { return this.template() }, renderChildren: function () { var e, t = this.childNodes, i = ""; for (e = 0; e < t.length; e++)i += t[e].render(); return i }, optionsChange: function (e) { var t = e.field, i = e.value; "visible" === t ? this.css("display", i ? "" : ki) : Ei[t] && se(t, i) ? this.updateDefinition(t, i) : "opacity" === t ? this.attr("opacity", i) : "cursor" === t && this.css("cursor", i), bi.fn.optionsChange.call(this, e) }, attr: function (e, t) { this.element && this.element.setAttribute(e, t) }, allAttr: function (e) { var t; for (t = 0; t < e.length; t++)this.attr(e[t][0], e[t][1]) }, css: function (e, t) { this.element && (this.element.style[e] = t) }, allCss: function (e) { var t; for (t = 0; t < e.length; t++)this.css(e[t][0], e[t][1]) }, removeAttr: function (e) { this.element && this.element.removeAttribute(e) }, mapTransform: function (e) { var t = []; return e && t.push([Ai, "matrix(" + e.matrix().toString(6) + ")"]), t }, renderTransform: function () { return oe(this.mapTransform(this.srcElement.transform())) }, transformChange: function (e) { e ? this.allAttr(this.mapTransform(e)) : this.removeAttr(Ai) }, mapStyle: function () { var e = this.srcElement.options, t = [["cursor", e.cursor]]; return !1 === e.visible && t.push(["display", ki]), t }, renderStyle: function () { return ne("style", re(this.mapStyle(!0))) }, renderOpacity: function () { return ne("opacity", this.srcElement.options.opacity) }, createDefinitions: function () { var e, t, i, n, o = this.srcElement, r = this.definitions; if (o) { for (i in e = o.options, Ei) (n = e.get(i)) && se(i, n) && (r[i] = n, t = !0); t && this.definitionChange({ action: "add", definitions: r }) } }, definitionChange: function (e) { this.parent && this.parent.definitionChange(e) }, updateDefinition: function (e, t) { var i = this.definitions, n = i[e], o = Ei[e], r = {}; n && (r[e] = n, this.definitionChange({ action: "remove", definitions: r }), delete i[e]), t ? (r[e] = t, this.definitionChange({ action: "add", definitions: r }), i[e] = t, this.attr(o, ae(t.id))) : n && this.removeAttr(o) }, clearDefinitions: function () { var e = this.definitions; this.definitionChange({ action: "remove", definitions: e }), this.definitions = {} }, renderDefinitions: function () { return oe(this.mapDefinitions()) }, mapDefinitions: function () { var e, t = this.definitions, i = []; for (e in t) i.push([Ei[e], ae(t[e].id)]); return i } }), Mi = Ii.extend({ template: function () { return "<stop " + this.renderOffset() + " " + this.renderStyle() + " />" }, renderOffset: function () { return ne("offset", this.srcElement.offset()) }, mapStyle: function () { var e = this.srcElement; return [["stop-color", e.color()], ["stop-opacity", e.opacity()]] }, optionsChange: function (e) { "offset" === e.field ? this.attr(e.field, e.value) : "color" !== e.field && "opacity" !== e.field || this.css("stop-" + e.field, e.value) } }), Ri = Ii.extend({ init: function (e) { Ii.fn.init.call(this, e), this.id = e.id, this.loadStops() }, loadStops: function () { var e, t, i = this.srcElement.stops, n = this.element; for (e = 0; e < i.length; e++)t = new Mi(i[e]), this.append(t), n && t.attachTo(n) }, optionsChange: function (e) { "gradient.stops" === e.field ? (bi.prototype.clear.call(this), this.loadStops()) : "gradient" === e.field && this.allAttr(this.mapCoordinates()) }, renderCoordinates: function () { return oe(this.mapCoordinates()) }, mapSpace: function () { return ["gradientUnits", this.srcElement.userSpace() ? "userSpaceOnUse" : "objectBoundingBox"] } }), Fi = Ri.extend({ template: function () { return "<linearGradient id='" + this.id + "' " + this.renderCoordinates() + ">" + this.renderChildren() + "</linearGradient>" }, mapCoordinates: function () { var e = this.srcElement, t = e.start(), i = e.end(), n = [["x1", t.x], ["y1", t.y], ["x2", i.x], ["y2", i.y], this.mapSpace()]; return n } }), zi = Ri.extend({ template: function () { return "<radialGradient id='" + this.id + "' " + this.renderCoordinates() + ">" + this.renderChildren() + "</radialGradient>" }, mapCoordinates: function () { var e = this.srcElement, t = e.center(), i = e.radius(), n = [["cx", t.x], ["cy", t.y], ["r", i], this.mapSpace()]; return n } }), Pi = Ii.extend({ init: function (e) { Ii.fn.init.call(this), this.srcElement = e, this.id = e.id, this.load([e]) }, template: function () { return "<clipPath id='" + this.id + "'>" + this.renderChildren() + "</clipPath>" } }), Bi = Ii.extend({ init: function () { Ii.fn.init.call(this), this.definitionMap = {} }, attachTo: function (e) { this.element = e }, template: function () { return "<defs>" + this.renderChildren() + "</defs>" }, definitionChange: function (e) { var t = e.definitions, i = e.action; "add" === i ? this.addDefinitions(t) : "remove" === i && this.removeDefinitions(t) }, createDefinition: function (e, t) { var i; return "clip" === e ? i = Pi : "fill" === e && (t instanceof ri ? i = Fi : t instanceof si && (i = zi)), new i(t) }, addDefinitions: function (e) { var t; for (t in e) this.addDefinition(t, e[t]) }, addDefinition: function (e, t) { var i, n = this.element, o = this.definitionMap, r = t.id, s = o[r]; s ? s.count++ : (i = this.createDefinition(e, t), o[r] = { element: i, count: 1 }, this.append(i), n && i.attachTo(this.element)) }, removeDefinitions: function (e) { var t; for (t in e) this.removeDefinition(e[t]) }, removeDefinition: function (e) { var t = this.definitionMap, i = e.id, n = t[i]; n && (n.count--, 0 === n.count && (this.remove(this.childNodes.indexOf(n.element), 1), delete t[i])) } }), Li = Ii.extend({ init: function (e) { Ii.fn.init.call(this), this.options = e, this.defs = new Bi }, attachTo: function (e) { this.element = e, this.defs.attachTo(e.firstElementChild) }, clear: function () { bi.prototype.clear.call(this) }, template: function () { return this.defs.render() + this.renderChildren() }, definitionChange: function (e) { this.defs.definitionChange(e) } }), (Hi = _i.extend({ init: function (e, t) { _i.fn.init.call(this, e, t), this._root = new Li(this.options), Di(this.element, this._template()), this._rootElement = this.element.firstElementChild, function (e) { var t, i, n, o; try { t = e.getScreenCTM ? e.getScreenCTM() : null } catch (e) { } t && (i = -t.e % 1, n = -t.f % 1, o = e.style, 0 === i && 0 === n || (o.left = i + "px", o.top = n + "px")) }(this._rootElement), this._root.attachTo(this._rootElement), g(this.element, { click: this._click, mouseover: this._mouseenter, mouseout: this._mouseleave, mousemove: this._mousemove }), this.resize() }, destroy: function () { this._root && (this._root.destroy(), this._root = null, this._rootElement = null, y(this.element, { click: this._click, mouseover: this._mouseenter, mouseout: this._mouseleave, mousemove: this._mousemove })), _i.fn.destroy.call(this) }, translate: function (e) { var t = Math.round(e.x) + " " + Math.round(e.y) + " " + this._size.width + " " + this._size.height; this._offset = e, this._rootElement.setAttribute("viewBox", t) }, draw: function (e) { _i.fn.draw.call(this, e), this._root.load([e]) }, clear: function () { _i.fn.clear.call(this), this._root.clear() }, svg: function () { return "<?xml version='1.0' ?>" + this._template() }, exportVisual: function () { var e, t = this._visual, i = this._offset; return i && ((e = new Zt).children.push(t), e.transform(T().translate(-i.x, -i.y)), t = e), t }, _resize: function () { this._offset && this.translate(this._offset) }, _template: function () { return "<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='" + yi + "' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>" + this._root.render() + "</svg>" } })).prototype.type = "svg", "undefined" != typeof document && document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") && (_i.support.svg = !0, gi.current.register("svg", Hi, 10)), Ni = Ii.extend({ template: function () { return "<g" + (this.renderTransform() + this.renderStyle() + this.renderOpacity() + this.renderDefinitions()) + ">" + this.renderChildren() + "</g>" }, optionsChange: function (e) { "transform" === e.field && this.transformChange(e.value), Ii.fn.optionsChange.call(this, e) } }), wi.Group = Ni, Oi = { dot: [1.5, 3.5], dash: [4, 3.5], longdash: [8, 3.5], dashdot: [3.5, 3.5, 1.5, 3.5], longdashdot: [8, 3.5, 1.5, 3.5], longdashdotdot: [8, 3.5, 1.5, 3.5, 1.5, 3.5] }, Vi = "solid", Ui = { "fill.opacity": "fill-opacity", "stroke.color": "stroke", "stroke.width": "stroke-width", "stroke.opacity": "stroke-opacity" }, Wi = Ii.extend({ geometryChange: function () { this.attr("d", this.renderData()), this.invalidate() }, optionsChange: function (e) { switch (e.field) { case "fill": e.value ? this.allAttr(this.mapFill(e.value)) : this.removeAttr("fill"); break; case "fill.color": this.allAttr(this.mapFill({ color: e.value })); break; case "stroke": e.value ? this.allAttr(this.mapStroke(e.value)) : this.removeAttr("stroke"); break; case "transform": this.transformChange(e.value); break; default: var t = Ui[e.field]; t && this.attr(t, e.value) }Ii.fn.optionsChange.call(this, e) }, content: function () { this.element && (this.element.textContent = this.srcElement.content()) }, renderData: function () { return this.printPath(this.srcElement) }, printPath: function (e) { var t, i, n, o, r, s = this, a = e.segments, l = a.length; if (l > 0) { for (t = [], o = 1; o < l; o++)(r = s.segmentType(a[o - 1], a[o])) !== n && (n = r, t.push(r)), t.push("L" === r ? s.printPoints(a[o].anchor()) : s.printPoints(a[o - 1].controlOut(), a[o].controlIn(), a[o].anchor())); return i = "M" + this.printPoints(a[0].anchor()) + " " + t.join(" "), e.options.closed && (i += "Z"), i } }, printPoints: function () { var e, t = arguments, i = t.length, n = []; for (e = 0; e < i; e++)n.push(t[e].toString(3)); return n.join(" ") }, segmentType: function (e, t) { return e.controlOut() && t.controlIn() ? "C" : "L" }, mapStroke: function (e) { var t = []; return e && !c(e.color) ? (t.push(["stroke", e.color]), t.push(["stroke-width", e.width]), t.push(["stroke-linecap", this.renderLinecap(e)]), t.push(["stroke-linejoin", e.lineJoin]), n(e.opacity) && t.push(["stroke-opacity", e.opacity]), n(e.dashType) && t.push(["stroke-dasharray", this.renderDashType(e)])) : t.push(["stroke", ki]), t }, renderStroke: function () { return oe(this.mapStroke(this.srcElement.options.stroke)) }, renderDashType: function (e) { var t, i, n, o = e.dashType, r = e.width; if (void 0 === r && (r = 1), o && o !== Vi) { for (t = Oi[o.toLowerCase()], i = [], n = 0; n < t.length; n++)i.push(t[n] * r); return i.join(" ") } }, renderLinecap: function (e) { var t = e.dashType, i = e.lineCap; return t && "solid" !== t ? "butt" : i }, mapFill: function (e) { var t = []; return e && "Gradient" === e.nodeType || (e && !c(e.color) ? (t.push(["fill", e.color]), n(e.opacity) && t.push(["fill-opacity", e.opacity])) : t.push(["fill", ki])), t }, renderFill: function () { return oe(this.mapFill(this.srcElement.options.fill)) }, template: function () { return "<path " + this.renderStyle() + " " + this.renderOpacity() + " " + ne("d", this.renderData()) + this.renderStroke() + this.renderFill() + this.renderDefinitions() + this.renderTransform() + "></path>" } }), wi.Path = Wi, qi = Wi.extend({ renderData: function () { return this.printPath(this.srcElement.toPath()) } }), wi.Arc = qi, ji = Wi.extend({ geometryChange: function () { var e = this.center(); this.attr("cx", e.x), this.attr("cy", e.y), this.attr("r", this.radius()), this.invalidate() }, center: function () { return this.srcElement.geometry().center }, radius: function () { return this.srcElement.geometry().radius }, template: function () { return "<circle " + this.renderStyle() + " " + this.renderOpacity() + "cx='" + this.center().x + "' cy='" + this.center().y + "' r='" + this.radius() + "'" + this.renderStroke() + " " + this.renderFill() + " " + this.renderDefinitions() + this.renderTransform() + " ></circle>" } }), wi.Circle = ji, Gi = Wi.extend({ geometryChange: function () { var e = this.srcElement.geometry(); this.attr("x", e.origin.x), this.attr("y", e.origin.y), this.attr("width", e.size.width), this.attr("height", e.size.height), this.invalidate() }, size: function () { return this.srcElement.geometry().size }, origin: function () { return this.srcElement.geometry().origin }, template: function () { return "<rect " + this.renderStyle() + " " + this.renderOpacity() + " x='" + this.origin().x + "' y='" + this.origin().y + "' width='" + this.size().width + "' height='" + this.size().height + "' " + this.renderStroke() + " " + this.renderFill() + " " + this.renderDefinitions() + " " + this.renderTransform() + " />" } }), wi.Rect = Gi, $i = Wi.extend({ geometryChange: function () { this.allAttr(this.mapPosition()), this.invalidate() }, optionsChange: function (e) { "src" === e.field && this.allAttr(this.mapSource()), Wi.fn.optionsChange.call(this, e) }, mapPosition: function () { var e = this.srcElement.rect(), t = e.topLeft(); return [["x", t.x], ["y", t.y], ["width", e.width() + "px"], ["height", e.height() + "px"]] }, renderPosition: function () { return oe(this.mapPosition()) }, mapSource: function (e) { var t = this.srcElement.src(); return e && (t = kendo.htmlEncode(t)), [["xlink:href", t]] }, renderSource: function () { return oe(this.mapSource(!0)) }, template: function () { return "<image preserveAspectRatio='none' " + this.renderStyle() + " " + this.renderTransform() + " " + this.renderOpacity() + this.renderPosition() + " " + this.renderSource() + " " + this.renderDefinitions() + "></image>" } }), wi.Image = $i, "undefined" != typeof document && (le._element = document.createElement("span")), Yi = Wi.extend({ geometryChange: function () { var e = this.pos(); this.attr("x", e.x), this.attr("y", e.y), this.invalidate() }, optionsChange: function (e) { "font" === e.field ? (this.attr("style", re(this.mapStyle())), this.geometryChange()) : "content" === e.field && Wi.fn.content.call(this, this.srcElement.content()), Wi.fn.optionsChange.call(this, e) }, mapStyle: function (e) { var t = Wi.fn.mapStyle.call(this, e), i = this.srcElement.options.font; return e && (i = kendo.htmlEncode(i)), t.push(["font", i]), t }, pos: function () { var e = this.srcElement.position(), t = this.srcElement.measure(); return e.clone().setY(e.y + t.baseline) }, renderContent: function () { var e = this.srcElement.content(); return e = le(e), e = kendo.htmlEncode(e) }, template: function () { return "<text " + this.renderStyle() + " " + this.renderOpacity() + " x='" + this.pos().x + "' y='" + this.pos().y + "'" + this.renderStroke() + " " + this.renderTransform() + " " + this.renderDefinitions() + this.renderFill() + ">" + this.renderContent() + "</text>" } }), wi.Text = Yi, Ki = Wi.extend({ renderData: function () { var e, t, i = this.srcElement.paths; if (i.length > 0) { for (e = [], t = 0; t < i.length; t++)e.push(this.printPath(i[t])); return e.join(" ") } } }), wi.MultiPath = Ki, Qi = { Circle: At, Arc: Pt, Rect: Ct, Point: kt, Segment: jt, Matrix: yt, Size: xt, toMatrix: S, Transformation: St, transform: T }, Xi = { Surface: Hi, RootNode: Li, Node: Ii, GroupNode: Ni, ArcNode: qi, CircleNode: ji, RectNode: Gi, ImageNode: $i, TextNode: Yi, PathNode: Wi, MultiPathNode: Ki, DefinitionNode: Bi, ClipNode: Pi, GradientStopNode: Mi, LinearGradientNode: Fi, RadialGradientNode: zi, exportGroup: ce }, Zi = {}, Ji = bi.extend({ init: function (e) { bi.fn.init.call(this, e), e && this.initClip() }, initClip: function () { var e = this.srcElement.clip(); e && (this.clip = e, e.addObserver(this)) }, clear: function () { this.srcElement && this.srcElement.removeObserver(this), this.clearClip(), bi.fn.clear.call(this) }, clearClip: function () { this.clip && (this.clip.removeObserver(this), delete this.clip) }, setClip: function (e) { this.clip && (e.beginPath(), de(e, this.clip), e.clip()) }, optionsChange: function (e) { "clip" === e.field && (this.clearClip(), this.initClip()), bi.fn.optionsChange.call(this, e) }, setTransform: function (e) { if (this.srcElement) { var t = this.srcElement.transform(); t && e.transform.apply(e, t.matrix().toArray(6)) } }, loadElements: function (e, t, i) { var o, r, s, a; for (o = 0; o < e.length; o++)r = e[o], s = r.children, a = new Zi[r.nodeType](r, i), s && s.length > 0 && a.load(s, t, i), n(t) ? this.insertAt(a, t) : this.append(a) }, load: function (e, t, i) { this.loadElements(e, t, i), this.invalidate() }, setOpacity: function (e) { if (this.srcElement) { var t = this.srcElement.opacity(); n(t) && this.globalAlpha(e, t) } }, globalAlpha: function (e, t) { var i = t; i && e.globalAlpha && (i *= e.globalAlpha), e.globalAlpha = i }, visible: function () { var e = this.srcElement; return !e || e && !1 !== e.options.visible } }), en = Ji.extend({ renderTo: function (e) { var t, i, n; if (this.visible()) { for (e.save(), this.setTransform(e), this.setClip(e), this.setOpacity(e), t = this.childNodes, i = 0; i < t.length; i++)(n = t[i]).visible() && n.renderTo(e); e.restore() } } }), Xt.extend(en.prototype, "childNodes"), Zi.Group = en, tn = en.extend({ init: function (e) { en.fn.init.call(this), this.canvas = e, this.ctx = e.getContext("2d"); var t = this._invalidate.bind(this); this.invalidate = kendo.throttle(function () { kendo.animationFrame(t) }, 1e3 / 60) }, destroy: function () { en.fn.destroy.call(this), this.canvas = null, this.ctx = null }, load: function (e, t, i) { this.loadElements(e, t, i), this._invalidate() }, _invalidate: function () { this.ctx && (this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.renderTo(this.ctx)) } }), Xt.extend(tn.prototype, "childNodes"), nn = ot.extend({ init: function () { this.shapes = [] }, _add: function (e, t) { this.shapes.push({ bbox: t, shape: e }), e._quadNode = this }, pointShapes: function (e) { var t, i = this.shapes, n = i.length, o = []; for (t = 0; t < n; t++)i[t].bbox.containsPoint(e) && o.push(i[t].shape); return o }, insert: function (e, t) { this._add(e, t) }, remove: function (e) { var t, i = this.shapes, n = i.length; for (t = 0; t < n; t++)if (i[t].shape === e) { i.splice(t, 1); break } } }), on = nn.extend({ init: function (e) { nn.fn.init.call(this), this.children = [], this.rect = e }, inBounds: function (e) { var t = this.rect, i = t.bottomRight(), n = e.bottomRight(), o = t.origin.x <= e.origin.x && t.origin.y <= e.origin.y && n.x <= i.x && n.y <= i.y; return o }, pointShapes: function (e) { var i, n = this.children, o = n.length, r = nn.fn.pointShapes.call(this, e); for (i = 0; i < o; i++)t(r, n[i].pointShapes(e)); return r }, insert: function (e, t) { var i, n = this.children, o = !1; if (this.inBounds(t)) { if (this.shapes.length < 4) this._add(e, t); else { for (n.length || this._initChildren(), i = 0; i < n.length; i++)if (n[i].insert(e, t)) { o = !0; break } o || this._add(e, t) } o = !0 } return o }, _initChildren: function () { var e = this.rect, t = this.children, i = e.center(), n = e.width() / 2, o = e.height() / 2; t.push(new on(new Ct([e.origin.x, e.origin.y], [n, o])), new on(new Ct([i.x, e.origin.y], [n, o])), new on(new Ct([e.origin.x, i.y], [n, o])), new on(new Ct([i.x, i.y], [n, o]))) } }), rn = 3e3, sn = ot.extend({ init: function () { this.initRoots() }, initRoots: function () { this.rootMap = {}, this.root = new nn, this.rootElements = [] }, clear: function () { var e, t = this.rootElements; for (e = 0; e < t.length; e++)this.remove(t[e]); this.initRoots() }, pointShape: function (e) { var t, i = (this.rootMap[Math.floor(e.x / rn)] || {})[Math.floor(e.y / rn)], n = this.root.pointShapes(e); for (i && (n = n.concat(i.pointShapes(e))), this.assignZindex(n), n.sort(ue), t = 0; t < n.length; t++)if (n[t].containsPoint(e)) return n[t] }, assignZindex: function (e) { var t, i, n, o, r; for (t = 0; t < e.length; t++) { for (i = e[t], n = 0, o = Math.pow(1e4, 75), r = []; i;)r.push(i), i = i.parent; for (; r.length;)i = r.pop(), n += ((i.parent ? i.parent.children : this.rootElements).indexOf(i) + 1) * o, o /= 1e4; e[t]._zIndex = n } }, optionsChange: function (e) { "transform" !== e.field && "stroke.width" !== e.field || this.bboxChange(e.element) }, geometryChange: function (e) { this.bboxChange(e.element) }, bboxChange: function (e) { var t; if ("Group" === e.nodeType) for (t = 0; t < e.children.length; t++)this.bboxChange(e.children[t]); else e._quadNode && e._quadNode.remove(e), this._insertShape(e) }, add: function (e) { var i = Array.isArray(e) ? e.slice(0) : [e]; t(this.rootElements, i), this._insert(i) }, childrenChange: function (e) { var t; if ("remove" === e.action) for (t = 0; t < e.items.length; t++)this.remove(e.items[t]); else this._insert(Array.prototype.slice.call(e.items, 0)) }, _insert: function (e) { for (var i; e.length > 0;)(i = e.pop()).addObserver(this), "Group" === i.nodeType ? t(e, i.children) : this._insertShape(i) }, _insertShape: function (e) { var t, i, n, o, r = e.bbox(); r && (t = this.getSectors(r), i = t[0][0], n = t[1][0], this.inRoot(t) ? this.root.insert(e, r) : ((o = this.rootMap)[i] || (o[i] = {}), o[i][n] || (o[i][n] = new on(new Ct([i * rn, n * rn], [rn, rn]))), o[i][n].insert(e, r))) }, remove: function (e) { var t, i; if (e.removeObserver(this), "Group" === e.nodeType) for (t = e.children, i = 0; i < t.length; i++)this.remove(t[i]); else e._quadNode && (e._quadNode.remove(e), delete e._quadNode) }, inRoot: function (e) { return e[0].length > 1 || e[1].length > 1 }, getSectors: function (e) { var t, i, n = e.bottomRight(), o = Math.floor(n.x / rn), r = Math.floor(n.y / rn), s = [[], []]; for (t = Math.floor(e.origin.x / rn); t <= o; t++)s[0].push(t); for (i = Math.floor(e.origin.y / rn); i <= r; i++)s[1].push(i); return s } }), an = ot.extend({ init: function (e) { e.bind("mouseenter", this._mouseenter.bind(this)), e.bind("mouseleave", this._mouseleave.bind(this)), this.element = e.element }, clear: function () { this._resetCursor() }, destroy: function () { this._resetCursor(), delete this.element }, _mouseenter: function (e) { var t = this._shapeCursor(e); t ? (this._current || (this._defaultCursor = this._getCursor()), this._setCursor(t)) : this._resetCursor() }, _mouseleave: function () { this._resetCursor() }, _shapeCursor: function (e) { for (var t = e.element; t && !n(t.options.cursor);)t = t.parent; if (t) return t.options.cursor }, _getCursor: function () { if (this.element) return this.element.style.cursor }, _setCursor: function (e) { this.element && (this.element.style.cursor = e, this._current = e) }, _resetCursor: function () { this._current && (this._setCursor(this._defaultCursor || ""), delete this._current) } }), (ln = _i.extend({ init: function (e, t) { var i, n; _i.fn.init.call(this, e, t), this.element.innerHTML = this._template(this), i = this.element.firstElementChild, n = w(e), i.width = n.width, i.height = n.height, this._rootElement = i, this._root = new tn(i), this._mouseTrackHandler = this._trackMouse.bind(this), g(this.element, { click: this._mouseTrackHandler, mousemove: this._mouseTrackHandler }) }, destroy: function () { _i.fn.destroy.call(this), this._root && (this._root.destroy(), this._root = null), this._searchTree && (this._searchTree.clear(), delete this._searchTree), this._cursor && (this._cursor.destroy(), delete this._cursor), y(this.element, { click: this._mouseTrackHandler, mousemove: this._mouseTrackHandler }) }, draw: function (e) { _i.fn.draw.call(this, e), this._root.load([e], void 0, this.options.cors), this._searchTree && this._searchTree.add([e]) }, clear: function () { _i.fn.clear.call(this), this._root.clear(), this._searchTree && this._searchTree.clear(), this._cursor && this._cursor.clear() }, eventTarget: function (e) { var t; if (this._searchTree) return t = this._surfacePoint(e), this._searchTree.pointShape(t) }, image: function () { var e, t, i = this._root, n = this._rootElement, o = []; return i.traverse(function (e) { e.loading && o.push(e.loading) }), e = at(), t = function () { i._invalidate(); try { var t = n.toDataURL(); e.resolve(t) } catch (t) { e.reject(t) } }, lt(o).then(t, t), e }, suspendTracking: function () { _i.fn.suspendTracking.call(this), this._searchTree && (this._searchTree.clear(), delete this._searchTree) }, resumeTracking: function () { var e, t, i; if (_i.fn.resumeTracking.call(this), !this._searchTree) { for (this._searchTree = new sn, e = this._root.childNodes, t = [], i = 0; i < e.length; i++)t.push(e[i].srcElement); this._searchTree.add(t) } }, _resize: function () { this._rootElement.width = this._size.width, this._rootElement.height = this._size.height, this._root.invalidate() }, _template: function () { return "<canvas style='width: 100%; height: 100%;'></canvas>" }, _enableTracking: function () { this._searchTree = new sn, this._cursor = new an(this), _i.fn._enableTracking.call(this) }, _trackMouse: function (e) { var t, i; this._suspendedTracking || (t = this.eventTarget(e), "click" !== e.type ? ((i = this._currentShape) && i !== t && this.trigger("mouseleave", { element: i, originalEvent: e, type: "mouseleave" }), t && i !== t && this.trigger("mouseenter", { element: t, originalEvent: e, type: "mouseenter" }), this.trigger("mousemove", { element: t, originalEvent: e, type: "mousemove" }), this._currentShape = t) : t && this.trigger("click", { element: t, originalEvent: e, type: "click" })) } })).prototype.type = "canvas", "undefined" != typeof document && document.createElement("canvas").getContext && (_i.support.canvas = !0, gi.current.register("canvas", ln, 20)), cn = Ji.extend({ renderTo: function (e) { e.save(), this.setTransform(e), this.setClip(e), this.setOpacity(e), e.beginPath(), this.renderPoints(e, this.srcElement), this.setLineDash(e), this.setLineCap(e), this.setLineJoin(e), this.setFill(e), this.setStroke(e), e.restore() }, setFill: function (e) { var t = this.srcElement.options.fill, i = !1; return t && ("Gradient" === t.nodeType ? (this.setGradientFill(e, t), i = !0) : c(t.color) || (e.fillStyle = t.color, e.save(), this.globalAlpha(e, t.opacity), e.fill(), e.restore(), i = !0)), i }, setGradientFill: function (e, t) { var i, n, o, r, s = this.srcElement.rawBBox(); t instanceof ri ? (n = t.start(), o = t.end(), i = e.createLinearGradient(n.x, n.y, o.x, o.y)) : t instanceof si && (r = t.center(), i = e.createRadialGradient(r.x, r.y, 0, r.x, r.y, t.radius())), function (e, t) { var i, n, o; for (i = 0; i < t.length; i++)n = t[i], (o = kendo.parseColor(n.color())).a *= n.opacity(), e.addColorStop(n.offset(), o.toCssRgba()) }(i, t.stops), e.save(), t.userSpace() || e.transform(s.width(), 0, 0, s.height(), s.origin.x, s.origin.y), e.fillStyle = i, e.fill(), e.restore() }, setStroke: function (e) { var t = this.srcElement.options.stroke; if (t && !c(t.color) && t.width > 0) return e.strokeStyle = t.color, e.lineWidth = m(t.width, 1), e.save(), this.globalAlpha(e, t.opacity), e.stroke(), e.restore(), !0 }, dashType: function () { var e = this.srcElement.options.stroke; if (e && e.dashType) return e.dashType.toLowerCase() }, setLineDash: function (e) { var t, i = this.dashType(); i && i !== Vi && (t = Oi[i], e.setLineDash ? e.setLineDash(t) : (e.mozDash = t, e.webkitLineDash = t)) }, setLineCap: function (e) { var t = this.dashType(), i = this.srcElement.options.stroke; t && t !== Vi ? e.lineCap = "butt" : i && i.lineCap && (e.lineCap = i.lineCap) }, setLineJoin: function (e) { var t = this.srcElement.options.stroke; t && t.lineJoin && (e.lineJoin = t.lineJoin) }, renderPoints: function (e, t) { de(e, t) } }), Zi.Path = cn, dn = cn.extend({ renderPoints: function (e) { var t = this.srcElement.toPath(); de(e, t) } }), Zi.Arc = dn, un = cn.extend({ renderPoints: function (e) { var t = this.srcElement.geometry(), i = t.center, n = t.radius; e.arc(i.x, i.y, n, 0, 2 * Math.PI) } }), Zi.Circle = un, hn = cn.extend({ renderPoints: function (e) { var t = this.srcElement.geometry(), i = t.origin, n = t.size; e.rect(i.x, i.y, n.width, n.height) } }), Zi.Rect = hn, fn = cn.extend({ init: function (e, t) { cn.fn.init.call(this, e), this.onLoad = this.onLoad.bind(this), this.onError = this.onError.bind(this), this.loading = at(); var i = this.img = new Image; t && !/^data:/i.test(e.src()) && (i.crossOrigin = t), i.src = e.src(), i.complete ? this.onLoad() : (i.onload = this.onLoad, i.onerror = this.onError) }, renderTo: function (e) { "resolved" === this.loading.state() && (e.save(), this.setTransform(e), this.setClip(e), this.drawImage(e), e.restore()) }, optionsChange: function (e) { "src" === e.field ? (this.loading = at(), this.img.src = this.srcElement.src()) : cn.fn.optionsChange.call(this, e) }, onLoad: function () { this.loading.resolve(), this.invalidate() }, onError: function () { this.loading.reject(Error("Unable to load image '" + this.img.src + "'. Check for connectivity and verify CORS headers.")) }, drawImage: function (e) { var t = this.srcElement.rect(), i = t.topLeft(); e.drawImage(this.img, i.x, i.y, t.width(), t.height()) } }), Zi.Image = fn, pn = cn.extend({ renderTo: function (e) { var t = this.srcElement, i = t.position(), n = t.measure(); e.save(), this.setTransform(e), this.setClip(e), this.setOpacity(e), e.beginPath(), e.font = t.options.font, this.setFill(e) && e.fillText(t.content(), i.x, i.y + n.baseline), this.setStroke(e) && (this.setLineDash(e), e.strokeText(t.content(), i.x, i.y + n.baseline)), e.restore() } }), Zi.Text = pn, mn = cn.extend({ renderPoints: function (e) { var t, i = this.srcElement.paths; for (t = 0; t < i.length; t++)de(e, i[t]) } }), Zi.MultiPath = mn, gn = { Surface: ln, RootNode: tn, Node: Ji, GroupNode: en, ArcNode: dn, CircleNode: un, RectNode: hn, ImageNode: fn, TextNode: pn, PathNode: cn, MultiPathNode: mn }, vn = st.browser, _n = "KENDO-PSEUDO-ELEMENT", bn = {}, (wn = {})._root = wn, yn = Kt.extend({ init: function (e, t, i) { Kt.fn.init.call(this, e, t.getOrigin(), i), this._pdfRect = t }, rect: function () { return this._pdfRect }, rawBBox: function () { return this._pdfRect } }), kn = "undefined" != typeof Element && Element.prototype && function (e) { return e.matches ? function (e, t) { return e.matches(t) } : e.webkitMatchesSelector ? function (e, t) { return e.webkitMatchesSelector(t) } : e.mozMatchesSelector ? function (e, t) { return e.mozMatchesSelector(t) } : e.msMatchesSelector ? function (e, t) { return e.msMatchesSelector(t) } : function (e) { return -1 !== [].indexOf.call(document.querySelectorAll(e), this) } }(Element.prototype), xn = function (e) { return e ? function t(i) { var n, o, r, s, a = i.cloneNode(!1); if (1 == i.nodeType) { for (r in n = e(i), o = e(a), s = n.data()) o.data(r, s[r]); for (/^canvas$/i.test(i.tagName) ? a.getContext("2d").drawImage(i, 0, 0) : /^(?:input|select|textarea|option)$/i.test(i.tagName) && (a.removeAttribute("id"), a.removeAttribute("name"), a.value = i.value, a.checked = i.checked, a.selected = i.selected), r = i.firstChild; r; r = r.nextSibling)a.appendChild(t(r)) } return a } : function (e) { var t, i = e.cloneNode(!0), n = e.querySelectorAll("canvas"); return n.length && he(i.querySelectorAll("canvas")).forEach(function (e, t) { e.getContext("2d").drawImage(n[t], 0, 0) }), t = e.querySelectorAll("input, select, textarea, option"), he(i.querySelectorAll("input, select, textarea, option")).forEach(function (e, i) { e.removeAttribute("id"), e.removeAttribute("name"), e.value = t[i].value, e.checked = t[i].checked, e.selected = t[i].selected }), i } }("undefined" != typeof window && window.kendo && window.kendo.jQuery), me.getFontFaces = ge, me.drawText = function (e) { var t = new Zt; return wn._clipbox = !1, wn._matrix = yt.unit(), wn._stackingContext = { element: e, group: t }, Se(e, Ae(e), t), 3 == e.firstChild.nodeType ? Je(e, e.firstChild, t) : $e(e, t), Te(), t }, Cn = function () { function e(e) { function f(t) { !function () { var t = s.exec(e); t && (e = e.substr(t[1].length)) }(); var i = t.exec(e); if (i) return e = e.substr(i[1].length), i[1] } function p() { var t, o, r, s = kendo.parseColor(e, !0); if (s) return r = /^#[0-9a-f]+/i.exec(e) || /^rgba?\(.*?\)/i.exec(e) || /^..*?\b/.exec(e), e = e.substr(r[0].length), s = s.toRGB(), (t = f(n)) || (o = f(i)), { color: s, length: t, percent: o } } var m, g = e; return ve(h, g) ? h[g] : ((m = f(t)) ? m = function (t) { var n, s, d, u, h, m, g = [], v = !1; if (f(a)) { for ((n = f(r)) ? (n = function (e) { var t = parseFloat(e); return /grad$/.test(e) ? Math.PI * t / 200 : /rad$/.test(e) ? t : /turn$/.test(e) ? Math.PI * t * 2 : /deg$/.test(e) ? Math.PI * t / 180 : void 0 }(n), f(c)) : ("to" == (s = f(o)) ? s = f(o) : s && /^-/.test(t) && (v = !0), d = f(o), f(c)), /-moz-/.test(t) && null == n && null == s && (u = f(i), h = f(i), v = !0, "0%" == u ? s = "left" : "100%" == u && (s = "right"), "0%" == h ? d = "top" : "100%" == h && (d = "bottom"), f(c)); e && !f(l) && (m = p());)g.push(m), f(c); return { type: "linear", angle: n, to: s && d ? s + " " + d : s || (d || null), stops: g, reverse: v } } }(m) : (m = f(d)) && (m = function () { if (f(a)) { var e = f(u); return e = e.replace(/^['"]+|["']+$/g, ""), f(l), { type: "url", url: e } } }()), h[g] = m || { type: "none" }) } var t = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/, i = /^([-0-9.]+%)/, n = /^([-0-9.]+px)/, o = /^(left|right|top|bottom|to|center)\W/, r = /^([-0-9.]+(deg|grad|rad|turn))/, s = /^(\s+)/, a = /^(\()/, l = /^(\))/, c = /^(,)/, d = /^(url)\(/, u = /^(.*?)\)/, h = {}, f = {}; return function (t) { return ve(f, t) ? f[t] : f[t] = Sn(t).map(e) } }(), Sn = function () { var e = {}; return function (t, i) { function n(e) { return u = e.exec(t.substr(l)) } function o(e) { return e.replace(/^\s+|\s+$/g, "") } var r, s, a, l, c, d, u; if (i || (i = /^\s*,\s*/), ve(e, r = t + i)) return e[r]; for (s = [], a = 0, l = 0, c = 0, d = !1; l < t.length;)!d && n(/^[\(\[\{]/) ? (c++, l++) : !d && n(/^[\)\]\}]/) ? (c--, l++) : !d && n(/^[\"\']/) ? (d = u[0], l++) : "'" == d && n(/^\\\'/) ? l += 2 : '"' == d && n(/^\\\"/) ? l += 2 : "'" == d && n(/^\'/) ? (d = !1, l++) : '"' == d && n(/^\"/) ? (d = !1, l++) : n(i) ? (!d && !c && l > a && (s.push(o(t.substring(a, l))), a = l + u[0].length), l += u[0].length) : l++; return a < l && s.push(o(t.substring(a, l))), e[r] = s } }(), Tn = function (e) { return function (t) { var i, n = e[t]; return n || ((i = /url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(t)) ? n = e[t] = i[2] : (i = /url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(t)) && (n = e[t] = i[2])), n } }(Object.create ? Object.create(null) : {}), Dn = function (e) { return function (t) { var i = e[t]; return null == i && (i = e[t] = rt.measureText("Mapq", { font: t }).height), i } }(Object.create ? Object.create(null) : {}), An = { svg: Xi, canvas: gn, util: _t, PathParser: mi, Surface: _i, BaseNode: bi, SurfaceFactory: gi, OptionsStore: wt, exportImage: function (t, i) { var n, o, r, s, a, l, c, d, u = { width: "800px", height: "600px", cors: "Anonymous" }, h = t, f = t.clippedBBox(); return f && (n = f.getOrigin(), (h = new Zt).transform(T().translate(-n.x, -n.y)), h.children.push(t), o = f.getSize(), u.width = o.width + "px", u.height = o.height + "px"), r = e.extend(u, i), s = document.createElement("div"), (a = s.style).display = "none", a.width = r.width, a.height = r.height, document.body.appendChild(s), (l = new ln(s, r)).suspendTracking(), l.draw(h), c = l.image(), d = function () { l.destroy(), document.body.removeChild(s) }, c.then(d, d), c }, exportSVG: function (e, t) { var i = ce(e); return t && t.raw || (i = "data:image/svg+xml;base64," + s(i)), at().resolve(i) }, QuadNode: on, ShapesQuadTree: sn, ObserversMixin: ct, Element: Tt, Circle: Rt, Arc: $t, Path: Gt, MultiPath: Yt, Text: Kt, Image: Qt, Group: Zt, Layout: ei, Rect: ti, align: function (e, t, i) { K(e, t, i, "x", "width") }, vAlign: function (e, t, i) { K(e, t, i, "y", "height") }, stack: function (e) { Q(X(e), "x", "y", "width") }, vStack: function (e) { Q(X(e), "y", "x", "height") }, wrap: function (e, t) { return Z(e, t, "x", "y", "width") }, vWrap: function (e, t) { return Z(e, t, "y", "x", "height") }, fit: function (e, t) { var i, n, o, r, s = e.clippedBBox(); s && (i = s.size, ((n = t.size).width < i.width || n.height < i.height) && (o = Math.min(n.width / i.width, n.height / i.height), (r = e.transform() || T()).scale(o, o), e.transform(r))) }, LinearGradient: ri, RadialGradient: si, GradientStop: ni, Gradient: oi, Animation: ci, AnimationFactory: di, drawDOM: me }, kendo.deepExtend(kendo, { drawing: An, geometry: Qi }), kendo.drawing.Segment = kendo.geometry.Segment, kendo.dataviz.drawing = kendo.drawing, kendo.dataviz.geometry = kendo.geometry, kendo.drawing.util.measureText = kendo.util.measureText, kendo.drawing.util.objectKey = kendo.util.objectKey, kendo.drawing.Color = kendo.Color, kendo.util.encodeBase64 = kendo.drawing.util.encodeBase64 }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.popup.min", ["kendo.core.min"], function () { return function (e, t) { function i(t, i) { return !(!t || !i) && (t === i || e.contains(t, i)) } var n, o, r = window.kendo, s = r.ui, a = s.Widget, l = r.Class, c = r.support, d = r.getOffset, u = r._outerWidth, h = r._outerHeight, f = "open", p = "close", m = "deactivate", g = "activate", v = "center", _ = "left", b = "right", w = "top", y = "bottom", k = "absolute", x = "hidden", C = "body", S = "location", T = "position", D = "visible", A = "effects", E = "k-state-active", I = "k-state-border", M = /k-state-border-(\w+)/, R = ".k-picker-wrap, .k-dropdown-wrap, .k-link", F = e(document.documentElement), z = e.proxy, P = e(window), B = "scroll", L = c.transitions.css, H = L + "transform", N = e.extend, O = ".kendoPopup", V = ["font-size", "font-family", "font-stretch", "font-style", "font-weight", "line-height"], U = a.extend({ init: function (t, i) { var n, o = this; (i = i || {}).isRtl && (i.origin = i.origin || y + " " + b, i.position = i.position || w + " " + b), a.fn.init.call(o, t, i), t = o.element, i = o.options, o.collisions = i.collision ? i.collision.split(" ") : [], o.downEvent = r.applyEventMap("down", r.guid()), 1 === o.collisions.length && o.collisions.push(o.collisions[0]), n = e(o.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"), i.appendTo = e(e(i.appendTo)[0] || n[0] || document.body), o.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl", !!i.isRtl).css({ position: k }).appendTo(i.appendTo).on("mouseenter" + O, function () { o._hovered = !0 }).on("mouseleave" + O, function () { o._hovered = !1 }), o.wrapper = e(), !1 === i.animation && (i.animation = { open: { effects: {} }, close: { hide: !0, effects: {} } }), N(i.animation.open, { complete: function () { o.wrapper.css({ overflow: D }), o._activated = !0, o._trigger(g) } }), N(i.animation.close, { complete: function () { o._animationClose() } }), o._mousedownProxy = function (e) { o._mousedown(e) }, o._resizeProxy = c.mobileOS.android ? function (e) { setTimeout(function () { o._resize(e) }, 600) } : function (e) { o._resize(e) }, i.toggleTarget && e(i.toggleTarget).on(i.toggleEvent + O, e.proxy(o.toggle, o)) }, events: [f, g, p, m], options: { name: "Popup", toggleEvent: "click", origin: y + " " + _, position: w + " " + _, anchor: C, appendTo: null, collision: "flip fit", viewport: window, copyAnchorStyles: !0, autosize: !1, modal: !1, adjustSize: { width: 0, height: 0 }, animation: { open: { effects: "slideIn:down", transition: !0, duration: 200 }, close: { duration: 100, hide: !0 } } }, _animationClose: function () { var e = this, t = e.wrapper.data(S); e.wrapper.hide(), t && e.wrapper.css(t), e.options.anchor != C && e._hideDirClass(), e._closing = !1, e._trigger(m) }, destroy: function () { var t, i = this, n = i.options, o = i.element.off(O); a.fn.destroy.call(i), n.toggleTarget && e(n.toggleTarget).off(O), n.modal || (F.unbind(i.downEvent, i._mousedownProxy), i._toggleResize(!1)), r.destroy(i.element.children()), o.removeData(), n.appendTo[0] === document.body && ((t = o.parent(".k-animation-container"))[0] ? t.remove() : o.remove()) }, open: function (t, i) { var n, o, s = this, a = { isFixed: !isNaN(parseInt(i, 10)), x: t, y: i }, l = s.element, d = s.options, u = e(d.anchor), h = l[0] && l.hasClass("km-widget"); if (!s.visible()) { if (d.copyAnchorStyles && (h && "font-size" == V[0] && V.shift(), l.css(r.getComputedStyles(u[0], V))), l.data("animating") || s._trigger(f)) return; s._activated = !1, d.modal || (F.unbind(s.downEvent, s._mousedownProxy).bind(s.downEvent, s._mousedownProxy), s._toggleResize(!1), s._toggleResize(!0)), s.wrapper = o = r.wrap(l, d.autosize).css({ overflow: x, display: "block", position: k }), c.mobileOS.android && o.css(H, "translatez(0)"), o.css(T), e(d.appendTo)[0] == document.body && o.css(w, "-10000px"), s.flipped = s._position(a), n = s._openAnimation(), d.anchor != C && s._showDirClass(n), l.data(A, n.effects).kendoStop(!0).kendoAnimate(n) } }, _location: function (t) { var i, n, o = this, s = o.element, a = o.options, l = e(a.anchor), d = s[0] && s.hasClass("km-widget"); return a.copyAnchorStyles && (d && "font-size" == V[0] && V.shift(), s.css(r.getComputedStyles(l[0], V))), o.wrapper = i = r.wrap(s, a.autosize).css({ overflow: x, display: "block", position: k }), c.mobileOS.android && i.css(H, "translatez(0)"), i.css(T), e(a.appendTo)[0] == document.body && i.css(w, "-10000px"), o._position(t || {}), n = i.offset(), { width: r._outerWidth(i), height: r._outerHeight(i), left: n.left, top: n.top } }, _openAnimation: function () { var e = N(!0, {}, this.options.animation.open); return e.effects = r.parseEffects(e.effects, this.flipped), e }, _hideDirClass: function () { var t = e(this.options.anchor), i = ((t.attr("class") || "").match(M) || ["", "down"])[1], n = I + "-" + i; t.removeClass(n).children(R).removeClass(E).removeClass(n), this.element.removeClass(I + "-" + r.directions[i].reverse) }, _showDirClass: function (t) { var i = t.effects.slideIn ? t.effects.slideIn.direction : "down", n = I + "-" + i; e(this.options.anchor).addClass(n).children(R).addClass(E).addClass(n), this.element.addClass(I + "-" + r.directions[i].reverse) }, position: function () { this.visible() && (this.flipped = this._position()) }, toggle: function () { this[this.visible() ? p : f]() }, visible: function () { return this.element.is(":" + D) }, close: function (i) { var n, o, s, a, l = this, c = l.options; if (l.visible()) { if (n = l.wrapper[0] ? l.wrapper : r.wrap(l.element).hide(), l._toggleResize(!1), l._closing || l._trigger(p)) return l._toggleResize(!0), t; l.element.find(".k-popup").each(function () { var t = e(this), n = t.data("kendoPopup"); n && n.close(i) }), F.unbind(l.downEvent, l._mousedownProxy), i ? o = { hide: !0, effects: {} } : (o = N(!0, {}, c.animation.close), s = l.element.data(A), !(a = o.effects) && !r.size(a) && s && r.size(s) && (o.effects = s, o.reverse = !0), l._closing = !0), l.element.kendoStop(!0), n.css({ overflow: x }), l.element.kendoAnimate(o), i && l._animationClose() } }, _trigger: function (e) { return this.trigger(e, { type: e }) }, _resize: function (e) { var t = this; -1 !== c.resize.indexOf(e.type) ? (clearTimeout(t._resizeTimeout), t._resizeTimeout = setTimeout(function () { t._position(), t._resizeTimeout = null }, 50)) : (!t._hovered || t._activated && t.element.hasClass("k-list-container")) && t.close() }, _toggleResize: function (e) { var t = e ? "on" : "off", i = c.resize; c.mobileOS.ios || c.mobileOS.android || (i += " " + B), this._scrollableParents()[t](B, this._resizeProxy), P[t](i, this._resizeProxy) }, _mousedown: function (t) { var n = this, o = n.element[0], s = n.options, a = e(s.anchor)[0], l = s.toggleTarget, c = r.eventTarget(t), d = e(c).closest(".k-popup"), u = d.parent().parent(".km-shim").length; d = d[0], !u && d && d !== n.element[0] || "popover" !== e(t.target).closest("a").data("rel") && (i(o, c) || i(a, c) || l && i(e(l)[0], c) || n.close()) }, _fit: function (e, t, i) { var n = 0; return e + t > i && (n = i - (e + t)), e < 0 && (n = -e), n }, _flip: function (e, t, i, n, o, r, s) { var a = 0; return s = s || t, r !== o && r !== v && o !== v && (e + s > n && (a += -(i + t)), e + a < 0 && (a += i + t)), a }, _scrollableParents: function () { return e(this.options.anchor).parentsUntil("body").filter(function (e, t) { return r.isScrollable(t) }) }, _position: function (t) { var i, n, o, s, a, l, f, p, m, g, v, _, b, w, y, x = this, C = x.element, D = x.wrapper, A = x.options, E = e(A.viewport), I = c.zoomLevel(), M = !!(E[0] == window && window.innerWidth && I <= 1.02), R = e(A.anchor), F = A.origin.toLowerCase().split(" "), z = A.position.toLowerCase().split(" "), P = x.collisions, B = 10002, L = 0, H = document.documentElement; if (a = A.viewport === window ? { top: window.pageYOffset || document.documentElement.scrollTop || 0, left: window.pageXOffset || document.documentElement.scrollLeft || 0 } : E.offset(), M ? (l = window.innerWidth, f = window.innerHeight) : (l = E.width(), f = E.height()), M && H.scrollHeight - H.clientHeight > 0 && (l -= r.support.scrollbar()), (i = R.parents().filter(D.siblings()))[0]) if (o = Math.max(+i.css("zIndex"), 0)) B = o + 10; else for (n = R.parentsUntil(i), s = n.length; L < s; L++)(o = +e(n[L]).css("zIndex")) && B < o && (B = o + 10); return D.css("zIndex", B), D.css(t && t.isFixed ? { left: t.x, top: t.y } : x._align(F, z)), p = d(D, T, R[0] === D.offsetParent()[0]), m = d(D), R.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length && (p = d(D, T, !0), m = d(D)), m.top -= a.top, m.left -= a.left, x.wrapper.data(S) || D.data(S, N({}, p)), g = N({}, m), v = N({}, p), _ = A.adjustSize, "fit" === P[0] && (v.top += x._fit(g.top, h(D) + _.height, f / I)), "fit" === P[1] && (v.left += x._fit(g.left, u(D) + _.width, l / I)), b = N({}, v), w = h(C), y = h(D), !D.height() && w && (y += w), "flip" === P[0] && (v.top += x._flip(g.top, w, h(R), f / I, F[0], z[0], y)), "flip" === P[1] && (v.left += x._flip(g.left, u(C), u(R), l / I, F[1], z[1], u(D))), C.css(T, k), D.css(v), v.left != b.left || v.top != b.top }, _align: function (t, i) { var n, o = this, r = o.wrapper, s = e(o.options.anchor), a = t[0], l = t[1], c = i[0], f = i[1], p = d(s), m = e(o.options.appendTo), g = u(r), _ = h(r), w = u(s), k = h(s), x = p.top, C = p.left, S = Math.round; return m[0] != document.body && (n = d(m), x -= n.top, C -= n.left), a === y && (x += k), a === v && (x += S(k / 2)), c === y && (x -= _), c === v && (x -= S(_ / 2)), l === b && (C += w), l === v && (C += S(w / 2)), f === b && (C -= g), f === v && (C -= S(g / 2)), { top: x, left: C } } }); s.plugin(U), n = "kendoTabKeyTrap", o = l.extend({ init: function (t) { this.element = e(t), this.element.autoApplyNS(n) }, trap: function () { this.element.on("keydown", z(this._keepInTrap, this)) }, removeTrap: function () { this.element.kendoDestroy(n) }, destroy: function () { this.element.kendoDestroy(n), this.element = t }, shouldTrap: function () { return !0 }, _keepInTrap: function (e) { var t, i, n, o, r, s; 9 === e.which && this.shouldTrap() && (t = e.target, i = this.element.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]").filter(":visible[tabindex!=-1]"), n = i.sort(function (e, t) { return e.tabIndex - t.tabIndex }), o = n.length, r = o - 1, s = n.index(t), e.shiftKey ? 0 === s ? n.get(r).focus() : n.get(s - 1).focus() : s === r ? n.get(0).focus() : n.get(s + 1).focus(), e.preventDefault()) } }), s.Popup.TabKeyTrap = o }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("drawing/surface-tooltip.min", ["kendo.popup.min", "drawing/kendo-drawing.min"], function () { e = window.kendo.jQuery, t = ".kendo", i = window.kendo, n = i.deepExtend, o = i.drawing.util, r = o.defined, s = o.limitValue, a = o.eventCoordinates, l = i._outerWidth, c = i._outerHeight, d = e.proxy, u = i.Class.extend({ init: function (t, i) { this.element = e('<div class="k-tooltip"><div class="k-tooltip-content"></div></div>'), this.content = this.element.children(".k-tooltip-content"), i = i || {}, this.options = n({}, this.options, this._tooltipOptions(i)), this.popupOptions = { appendTo: i.appendTo, animation: i.animation, copyAnchorStyles: !1, collision: "fit fit" }, this._openPopupHandler = e.proxy(this._openPopup, this), this.surface = t, this._bindEvents() }, options: { position: "top", showOn: "mouseenter", offset: 7, autoHide: !0, hideDelay: 0, showAfter: 100 }, _bindEvents: function () { this._showHandler = d(this._showEvent, this), this._surfaceLeaveHandler = d(this._surfaceLeave, this), this._mouseleaveHandler = d(this._mouseleave, this), this._mousemoveHandler = d(this._mousemove, this), this.surface.bind("click", this._showHandler), this.surface.bind("mouseenter", this._showHandler), this.surface.bind("mouseleave", this._mouseleaveHandler), this.surface.bind("mousemove", this._mousemoveHandler), this.surface.element.on("mouseleave" + t, this._surfaceLeaveHandler), this.element.on("click" + t, ".k-tooltip-button", d(this._hideClick, this)) }, getPopup: function () { return this.popup || (this.popup = new i.ui.Popup(this.element, this.popupOptions)), this.popup }, destroy: function () { var e = this.popup; this.surface.unbind("click", this._showHandler), this.surface.unbind("mouseenter", this._showHandler), this.surface.unbind("mouseleave", this._mouseleaveHandler), this.surface.unbind("mousemove", this._mousemoveHandler), this.surface.element.off("mouseleave" + t, this._surfaceLeaveHandler), this.element.off("click" + t), e && (e.destroy(), delete this.popup), delete this.popupOptions, clearTimeout(this._timeout), delete this.element, delete this.content, delete this.surface }, _tooltipOptions: function (e) { return { position: (e = e || {}).position, showOn: e.showOn, offset: e.offset, autoHide: e.autoHide, width: e.width, height: e.height, content: e.content, shared: e.shared, hideDelay: e.hideDelay, showAfter: e.showAfter } }, _tooltipShape: function (e) { for (; e && !e.options.tooltip;)e = e.parent; return e }, _updateContent: function (e, t, n) { var o = n.content; if (i.isFunction(o) && (o = o({ element: t, target: e })), o) return this.content.html(o), !0 }, _position: function (e, t, i, n) { var o, r = t.position, l = t.offset || 0, c = this.surface, d = c._instance._elementOffset(), u = c.getSize(), h = c._instance._offset, f = e.bbox(), p = i.width, m = i.height, g = 0, v = 0; return f.origin.translate(d.left, d.top), h && f.origin.translate(-h.x, -h.y), "cursor" == r && n ? (o = a(n), g = o.x - p / 2, v = o.y - m - l) : "left" == r ? (g = f.origin.x - p - l, v = f.center().y - m / 2) : "right" == r ? (g = f.bottomRight().x + l, v = f.center().y - m / 2) : "bottom" == r ? (g = f.center().x - p / 2, v = f.bottomRight().y + l) : (g = f.center().x - p / 2, v = f.origin.y - m - l), { left: s(g, d.left, d.left + u.width), top: s(v, d.top, d.top + u.height) } }, show: function (e, t) { this._show(e, e, n({}, this.options, this._tooltipOptions(e.options.tooltip), t)) }, hide: function () { var e = this.popup, t = this._current; delete this._current, clearTimeout(this._showTimeout), e && e.visible() && t && !this.surface.trigger("tooltipClose", { element: t.shape, target: t.target, popup: e }) && e.close() }, _hideClick: function (e) { e.preventDefault(), this.hide() }, _show: function (e, t, i, n, o) { var r, s, a = this._current; clearTimeout(this._timeout), a && (a.shape === t && i.shared || a.target === e) || (clearTimeout(this._showTimeout), r = this.getPopup(), !this.surface.trigger("tooltipOpen", { element: t, target: e, popup: r }) && this._updateContent(e, t, i) && (this._autoHide(i), s = this._measure(i), r.visible() && r.close(!0), this._current = { options: i, elementSize: s, shape: t, target: e, position: this._position(i.shared ? t : e, i, s, n) }, o ? this._showTimeout = setTimeout(this._openPopupHandler, i.showAfter || 0) : this._openPopup())) }, _openPopup: function () { var e = this._current, t = e.position; this.getPopup().open(t.left, t.top) }, _autoHide: function (t) { t.autoHide && this._closeButton && (this.element.removeClass("k-tooltip-closable"), this._closeButton.remove(), delete this._closeButton), t.autoHide || this._closeButton || (this.element.addClass("k-tooltip-closable"), this._closeButton = e('<div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div>').prependTo(this.element)) }, _showEvent: function (e) { var t, i = this._tooltipShape(e.element); i && ((t = n({}, this.options, this._tooltipOptions(i.options.tooltip))) && t.showOn == e.type && this._show(e.element, i, t, e.originalEvent, !0)) }, _measure: function (e) { var t, i, n, o = this.getPopup(); return this.element.css({ width: "auto", height: "auto" }), (n = o.visible()) || o.wrapper.show(), this.element.css({ width: r(e.width) ? e.width : "auto", height: r(e.height) ? e.height : "auto" }), t = l(this.element), i = c(this.element), n || o.wrapper.hide(), { width: t, height: i } }, _mouseleave: function (e) { var t, i; this.popup && !this._popupRelatedTarget(e.originalEvent) && ((i = (t = this)._current) && i.options.autoHide && (t._timeout = setTimeout(function () { clearTimeout(t._showTimeout), t.hide() }, i.options.hideDelay || 0))) }, _mousemove: function (e) { var t, i, n = this._current; n && e.element && ("cursor" == (t = n.options).position && (i = this._position(e.element, t, n.elementSize, e.originalEvent), n.position = i, this.getPopup().wrapper.css({ left: i.left, top: i.top }))) }, _surfaceLeave: function (e) { this.popup && !this._popupRelatedTarget(e) && (clearTimeout(this._showTimeout), this.hide()) }, _popupRelatedTarget: function (t) { return t.relatedTarget && e(t.relatedTarget).closest(this.popup.wrapper).length } }), i.drawing.SurfaceTooltip = u; var e, t, i, n, o, r, s, a, l, c, d, u }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("drawing/surface.min", ["drawing/kendo-drawing.min", "drawing/surface-tooltip.min"], function () { !function (e) { function t(e) { this._instance.translate(e) } var i, n = window.kendo, o = n.drawing, r = o.Surface, s = n.ui.Widget, a = n.deepExtend, l = e.proxy; n.support.svg = r.support.svg, n.support.canvas = r.support.canvas, i = s.extend({ init: function (e, i) { this.options = a({}, this.options, i), s.fn.init.call(this, e, this.options), this._instance = r.create(this.element[0], i), this._instance.translate && (this.translate = t), this._triggerInstanceHandler = l(this._triggerInstanceEvent, this), this._bindHandler("click"), this._bindHandler("mouseenter"), this._bindHandler("mouseleave"), this._bindHandler("mousemove"), this._enableTracking() }, options: { name: "Surface", tooltip: {} }, events: ["click", "mouseenter", "mouseleave", "mousemove", "resize", "tooltipOpen", "tooltipClose"], _triggerInstanceEvent: function (e) { this.trigger(e.type, e) }, _bindHandler: function (e) { this._instance.bind(e, this._triggerInstanceHandler) }, draw: function (e) { this._instance.draw(e) }, clear: function () { this._instance && this._instance.clear(), this.hideTooltip() }, destroy: function () { this._instance && (this._instance.destroy(), delete this._instance), this._tooltip && (this._tooltip.destroy(), delete this._tooltip), s.fn.destroy.call(this) }, exportVisual: function () { return this._instance.exportVisual() }, eventTarget: function (e) { return this._instance.eventTarget(e) }, showTooltip: function (e, t) { this._tooltip && this._tooltip.show(e, t) }, hideTooltip: function () { this._tooltip && this._tooltip.hide() }, suspendTracking: function () { this._instance.suspendTracking(), this.hideTooltip() }, resumeTracking: function () { this._instance.resumeTracking() }, getSize: function () { return { width: this.element.width(), height: this.element.height() } }, setSize: function (e) { this.element.css({ width: e.width, height: e.height }), this._size = e, this._instance.currentSize(e), this._resize() }, _resize: function () { this._instance.currentSize(this._size), this._instance._resize() }, _enableTracking: function () { n.ui.Popup && (this._tooltip = new o.SurfaceTooltip(this, this.options.tooltip || {})) } }), n.ui.plugin(i), i.create = function (e, t) { return new i(e, t) }, n.drawing.Surface = i }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("drawing/html.min", ["drawing/kendo-drawing.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = t.drawing, n = i.drawDOM, i.drawDOM = function (t, i) { return n(e(t)[0], i) }, i.drawDOM.drawText = n.drawText, i.drawDOM.getFontFaces = n.getFontFaces; var e, t, i, n }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.drawing.min", ["drawing/util.min", "drawing/kendo-drawing.min", "drawing/surface-tooltip.min", "drawing/surface.min", "drawing/html.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.validator.min", ["kendo.core.min"], function () { return function (e, t) { function i(t, i) { var n, r, s, a = e(); for (r = 0, s = t.length; r < s; r++)n = t[r], l.test(n.className) && (n.getAttribute(o.attr("for")) === i && (a = a.add(n))); return a } var n, o = window.kendo, r = o.ui.Widget, s = ".kendoValidator", a = "k-invalid-msg", l = RegExp(a, "i"), c = /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i, d = /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i, u = ":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])", h = ":checkbox:not([disabled],[readonly])", f = "[type=number],[type=range]", p = "blur", m = "name", g = "form", v = "novalidate", _ = "validate", b = "change", w = "validateInput", y = e.proxy, k = function (e, t) { return "string" == typeof t && (t = RegExp("^(?:" + t + ")$")), t.test(e) }, x = function (e, t, i) { var n = e.val(); return !e.filter(t).length || "" === n || k(n, i) }; o.ui.validator || (o.ui.validator = { rules: {}, messages: {} }), n = r.extend({ init: function (t, i) { var n = this, s = function (t) { var i, n = o.ui.validator.ruleResolvers || {}, r = {}; for (i in n) e.extend(!0, r, n[i].resolve(t)); return r }(t), a = "[" + o.attr("validate") + "!=false]"; (i = i || {}).rules = e.extend({}, o.ui.validator.rules, s.rules, i.rules), i.messages = e.extend({}, o.ui.validator.messages, s.messages, i.messages), r.fn.init.call(n, t, i), n._errorTemplate = o.template(n.options.errorTemplate), n.element.is(g) && n.element.attr(v, v), n._inputSelector = u + a, n._checkboxSelector = h + a, n._errors = {}, n._attachEvents(), n._isValidated = !1 }, events: [_, b, w], options: { name: "Validator", errorTemplate: '<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-i-warning"> </span> #=message#</span>', messages: { required: "{0} is required", pattern: "{0} is not valid", min: "{0} should be greater than or equal to {1}", max: "{0} should be smaller than or equal to {1}", step: "{0} is not valid", email: "{0} is not valid email", url: "{0} is not valid URL", date: "{0} is not valid date", dateCompare: "End date should be greater than or equal to the start date" }, rules: { required: function (e) { var t = e.filter("[type=checkbox]").length && !e.is(":checked"), i = e.val(); return !(function (e, t) { return !!e.length && null != e[0].attributes[t] }(e, "required") && (!i || "" === i || 0 === i.length || t)) }, pattern: function (e) { return !e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length || "" === e.val() || k(e.val(), e.attr("pattern")) }, min: function (e) { if (e.filter(f + ",[" + o.attr("type") + "=number]").filter("[min]").length && "" !== e.val()) { var t = parseFloat(e.attr("min")) || 0, i = o.parseFloat(e.val()); return t <= i } return !0 }, max: function (e) { if (e.filter(f + ",[" + o.attr("type") + "=number]").filter("[max]").length && "" !== e.val()) { var t = parseFloat(e.attr("max")) || 0, i = o.parseFloat(e.val()); return t >= i } return !0 }, step: function (e) { if (e.filter(f + ",[" + o.attr("type") + "=number]").filter("[step]").length && "" !== e.val()) { var t, i = parseFloat(e.attr("min")) || 0, n = parseFloat(e.attr("step")) || 1, r = parseFloat(e.val()), s = function (e) { return (e = (e + "").split(".")).length > 1 ? e[1].length : 0 }(n); return s ? (t = Math.pow(10, s), Math.floor((r - i) * t) % (n * t) / Math.pow(100, s) == 0) : (r - i) % n == 0 } return !0 }, email: function (e) { return x(e, "[type=email],[" + o.attr("type") + "=email]", c) }, url: function (e) { return x(e, "[type=url],[" + o.attr("type") + "=url]", d) }, date: function (e) { return !e.filter("[type^=date],[" + o.attr("type") + "=date]").length || "" === e.val() || null !== o.parseDate(e.val(), e.attr(o.attr("format"))) } }, validateOnBlur: !0 }, destroy: function () { r.fn.destroy.call(this), this.element.off(s) }, value: function () { return !!this._isValidated && 0 === this.errors().length }, _submit: function (e) { return !!this.validate() || (e.stopPropagation(), e.stopImmediatePropagation(), e.preventDefault(), !1) }, _checkElement: function (e) { var t = this.value(); this.validateInput(e), this.value() !== t && this.trigger(b) }, _attachEvents: function () { var t = this; t.element.is(g) && t.element.on("submit" + s, y(t._submit, t)), t.options.validateOnBlur && (t.element.is(u) ? (t.element.on(p + s, function () { t._checkElement(t.element) }), t.element.is(h) && t.element.on("click" + s, function () { t._checkElement(t.element) })) : (t.element.on(p + s, t._inputSelector, function () { t._checkElement(e(this)) }), t.element.on("click" + s, t._checkboxSelector, function () { t._checkElement(e(this)) }))) }, validate: function () { var e, t, i, n, o = !1, r = this.value(); if (this._errors = {}, this.element.is(u)) o = this.validateInput(this.element); else { for (n = !1, e = this.element.find(this._inputSelector), t = 0, i = e.length; t < i; t++)this.validateInput(e.eq(t)) || (n = !0); o = !n } return this.trigger(_, { valid: o }), r !== o && this.trigger(b), o }, validateInput: function (t) { var i, n, r, s, l, c, d, u, h, f; return t = e(t), this._isValidated = !0, n = (i = this)._errorTemplate, r = i._checkValidity(t), s = r.valid, "." + a, l = t.attr(m) || "", c = i._findMessageContainer(l).add(t.next(".k-invalid-msg").filter(function () { var t = e(this); return !t.filter("[" + o.attr("for") + "]").length || t.attr(o.attr("for")) === l })).hide(), u = !t.attr("aria-invalid"), t.removeAttr("aria-invalid"), s ? delete i._errors[l] : (d = i._extractMessage(t, r.key), i._errors[l] = d, h = function (t) { return e(e.parseHTML ? e.parseHTML(t) : t) }(n({ message: function (e) { return e.replace(/&amp/g, "&amp;").replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&lt;/g, "<").replace(/&gt;/g, ">") }(d) })), f = c.attr("id"), i._decorateMessageContainer(h, l), f && h.attr("id", f), c.replaceWith(h).length || h.insertAfter(t), h.show(), t.attr("aria-invalid", !0)), u !== s && this.trigger(w, { valid: s, input: t }), t.toggleClass("k-invalid", !s), t.toggleClass("k-valid", s), s }, hideMessages: function () { var e = "." + a, t = this.element; t.is(u) ? t.next(e).hide() : t.find(e).hide() }, _findMessageContainer: function (t) { var n, r, s, a = o.ui.validator.messageLocators, l = e(); for (r = 0, s = this.element.length; r < s; r++)l = l.add(i(this.element[r].getElementsByTagName("*"), t)); for (n in a) l = l.add(a[n].locate(this.element, t)); return l }, _decorateMessageContainer: function (e, t) { var i, n = o.ui.validator.messageLocators; for (i in e.addClass(a).attr(o.attr("for"), t || ""), n) n[i].decorate(e, t); e.attr("role", "alert") }, _extractMessage: function (e, t) { var i = this.options.messages[t], n = e.attr(m); return i = o.isFunction(i) ? i(e) : i, o.format(e.attr(o.attr(t + "-msg")) || e.attr("validationMessage") || e.attr("title") || i || "", n, e.attr(t) || e.attr(o.attr(t))) }, _checkValidity: function (e) { var t, i = this.options.rules; for (t in i) if (!i[t].call(this, e)) return { valid: !1, key: t }; return { valid: !0 } }, errors: function () { var e, t = [], i = this._errors; for (e in i) t.push(i[e]); return t } }), o.ui.plugin(n) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.userevents.min", ["kendo.core.min"], function () { return function (e, t) { function i(e, t) { var i = e.x.location, n = e.y.location, o = t.x.location, r = t.y.location, s = i - o, a = n - r; return { center: { x: (i + o) / 2, y: (n + r) / 2 }, distance: Math.sqrt(s * s + a * a) } } function n(e) { var t, i, n, o = [], r = e.originalEvent, a = e.currentTarget, l = 0; if (e.api) o.push({ id: 2, event: e, target: e.target, currentTarget: e.target, location: e, type: "api" }); else if (e.type.match(/touch/)) for (i = r ? r.changedTouches : [], t = i.length; l < t; l++)n = i[l], o.push({ location: n, event: e, target: n.target, currentTarget: a, id: n.identifier, type: "touch" }); else o.push(s.pointers || s.msPointers ? { location: r, event: e, target: e.target, currentTarget: a, id: r.pointerId, type: "pointer" } : { id: 1, event: e, target: e.target, currentTarget: a, location: e, type: "mouse" }); return o } function o(e) { for (var t = r.eventMap.up.split(" "), i = 0, n = t.length; i < n; i++)e(t[i]) } var r = window.kendo, s = r.support, a = r.Class, l = r.Observable, c = e.now, d = e.extend, u = s.mobileOS, h = u && u.android, f = 800, p = s.browser.msie ? 5 : 0, m = "press", g = "hold", v = "select", _ = "start", b = "move", w = "end", y = "cancel", k = "tap", x = "release", C = "gesturechange", S = "gestureend", T = "gesturetap", D = { api: 0, touch: 0, mouse: 9, pointer: 9 }, A = !s.touch || s.mouseAndTouchPresent, E = a.extend({ init: function (e, t) { var i = this; i.axis = e, i._updateLocationData(t), i.startLocation = i.location, i.velocity = i.delta = 0, i.timeStamp = c() }, move: function (e) { var t = this, i = e["page" + t.axis], n = c(), o = n - t.timeStamp || 1; !i && h || (t.delta = i - t.location, t._updateLocationData(e), t.initialDelta = i - t.startLocation, t.velocity = t.delta / o, t.timeStamp = n) }, _updateLocationData: function (e) { var t = this, i = t.axis; t.location = e["page" + i], t.client = e["client" + i], t.screen = e["screen" + i] } }), I = a.extend({ init: function (e, t, i) { d(this, { x: new E("X", i.location), y: new E("Y", i.location), type: i.type, useClickAsTap: e.useClickAsTap, threshold: e.threshold || D[i.type], userEvents: e, target: t, currentTarget: i.currentTarget, initialTouch: i.target, id: i.id, pressEvent: i, _moved: !1, _finished: !1 }) }, press: function () { this._holdTimeout = setTimeout(e.proxy(this, "_hold"), this.userEvents.minHold), this._trigger(m, this.pressEvent) }, _hold: function () { this._trigger(g, this.pressEvent) }, move: function (e) { var t = this; if (!t._finished) { if (t.x.move(e.location), t.y.move(e.location), !t._moved) { if (t._withinIgnoreThreshold()) return; if (M.current && M.current !== t.userEvents) return t.dispose(); t._start(e) } t._finished || t._trigger(b, e) } }, end: function (e) { this.endTime = c(), this._finished || (this._finished = !0, this._trigger(x, e), this._moved ? this._trigger(w, e) : this.useClickAsTap || this._trigger(k, e), clearTimeout(this._holdTimeout), this.dispose()) }, dispose: function () { var t = this.userEvents, i = t.touches; this._finished = !0, this.pressEvent = null, clearTimeout(this._holdTimeout), i.splice(e.inArray(this, i), 1) }, skip: function () { this.dispose() }, cancel: function () { this.dispose() }, isMoved: function () { return this._moved }, _start: function (e) { clearTimeout(this._holdTimeout), this.startTime = c(), this._moved = !0, this._trigger(_, e) }, _trigger: function (e, t) { var i = this, n = t.event, o = { touch: i, x: i.x, y: i.y, target: i.target, event: n }; i.userEvents.notify(e, o) && n.preventDefault() }, _withinIgnoreThreshold: function () { var e = this.x.initialDelta, t = this.y.initialDelta; return Math.sqrt(e * e + t * t) <= this.threshold } }), M = l.extend({ init: function (t, i) { var n, a, c, u = this, h = r.guid(); i = i || {}, n = u.filter = i.filter, u.threshold = i.threshold || p, u.minHold = i.minHold || f, u.touches = [], u._maxTouches = i.multiTouch ? 2 : 1, u.allowSelection = i.allowSelection, u.captureUpIfMoved = i.captureUpIfMoved, u.useClickAsTap = !i.fastTap && !s.delayedClick(), u.eventNS = h, t = e(t).handler(u), l.fn.init.call(u), d(u, { element: t, surface: e(i.global && A ? t[0].ownerDocument.documentElement : i.surface || t), stopPropagation: i.stopPropagation, pressed: !1 }), u.surface.handler(u).on(r.applyEventMap("move", h), "_move").on(r.applyEventMap("up cancel", h), "_end"), t.on(r.applyEventMap("down", h), n, "_start"), u.useClickAsTap && t.on(r.applyEventMap("click", h), n, "_click"), (s.pointers || s.msPointers) && (s.browser.version < 11 ? t.css("-ms-touch-action", "pinch-zoom double-tap-zoom") : t.css("touch-action", i.touchAction || "none")), i.preventDragEvent && t.on(r.applyEventMap("dragstart", h), r.preventDefault), t.on(r.applyEventMap("mousedown", h), n, { root: t }, "_select"), u.captureUpIfMoved && s.eventCapture && (a = u.surface[0], c = e.proxy(u.preventIfMoving, u), o(function (e) { a.addEventListener(e, c, !0) })), u.bind([m, g, k, _, b, w, x, y, "gesturestart", C, S, T, v], i) }, preventIfMoving: function (e) { this._isMoved() && e.preventDefault() }, destroy: function () { var e, t = this; t._destroyed || (t._destroyed = !0, t.captureUpIfMoved && s.eventCapture && (e = t.surface[0], o(function (i) { e.removeEventListener(i, t.preventIfMoving) })), t.element.kendoDestroy(t.eventNS), t.surface.kendoDestroy(t.eventNS), t.element.removeData("handler"), t.surface.removeData("handler"), t._disposeAll(), t.unbind(), delete t.surface, delete t.element, delete t.currentTarget) }, capture: function () { M.current = this }, cancel: function () { this._disposeAll(), this.trigger(y) }, notify: function (e, t) { var n = this.touches; if (this._isMultiTouch()) { switch (e) { case b: e = C; break; case w: e = S; break; case k: e = T }d(t, { touches: n }, i(n[0], n[1])) } return this.trigger(e, d(t, { type: e })) }, press: function (e, t, i) { this._apiCall("_start", e, t, i) }, move: function (e, t) { this._apiCall("_move", e, t) }, end: function (e, t) { this._apiCall("_end", e, t) }, _isMultiTouch: function () { return this.touches.length > 1 }, _maxTouchesReached: function () { return this.touches.length >= this._maxTouches }, _disposeAll: function () { for (var e = this.touches; e.length > 0;)e.pop().dispose() }, _isMoved: function () { return e.grep(this.touches, function (e) { return e.isMoved() }).length }, _select: function (e) { this.allowSelection && !this.trigger(v, { event: e }) || e.preventDefault() }, _start: function (t) { var i, o, r = this, s = 0, a = r.filter, l = n(t), c = l.length, d = t.which; if (!(d && d > 1 || r._maxTouchesReached())) for (M.current = null, r.currentTarget = t.currentTarget, r.stopPropagation && t.stopPropagation(); s < c && !r._maxTouchesReached(); s++)o = l[s], (i = a ? e(o.currentTarget) : r.element).length && (o = new I(r, i, o), r.touches.push(o), o.press(), r._isMultiTouch() && r.notify("gesturestart", {})) }, _move: function (e) { this._eachTouch("move", e) }, _end: function (e) { this._eachTouch("end", e) }, _click: function (t) { var i = { touch: { initialTouch: t.target, target: e(t.currentTarget), endTime: c(), x: { location: t.pageX, client: t.clientX }, y: { location: t.pageY, client: t.clientY } }, x: t.pageX, y: t.pageY, target: e(t.currentTarget), event: t, type: "tap" }; this.trigger("tap", i) && t.preventDefault() }, _eachTouch: function (e, t) { var i, o, r, s, a = {}, l = n(t), c = this.touches; for (i = 0; i < c.length; i++)o = c[i], a[o.id] = o; for (i = 0; i < l.length; i++)r = l[i], (s = a[r.id]) && s[e](r) }, _apiCall: function (t, i, n, o) { this[t]({ api: !0, pageX: i, pageY: n, clientX: i, clientY: n, target: e(o || this.element)[0], stopPropagation: e.noop, preventDefault: e.noop }) } }); M.defaultThreshold = function (e) { p = e }, M.minHold = function (e) { f = e }, r.getTouches = n, r.touchDelta = i, r.UserEvents = M }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.draganddrop.min", ["kendo.core.min", "kendo.userevents.min"], function () { return function (e, t) { function i(t, i) { try { return e.contains(t, i) || t == i } catch (e) { return !1 } } function n(e, t) { return parseInt(e.css(t), 10) || 0 } function o(e, t) { return Math.min(Math.max(e, t.min), t.max) } function r(e, t) { var i = A(e), o = _._outerWidth, r = _._outerHeight, s = i.left + n(e, "borderLeftWidth") + n(e, "paddingLeft"), a = i.top + n(e, "borderTopWidth") + n(e, "paddingTop"), l = s + e.width() - o(t, !0), c = a + e.height() - r(t, !0); return { x: { min: s, max: l }, y: { min: a, max: c } } } function s(i, n, o) { for (var r, s, a = 0, l = n && n.length, c = o && o.length; i && i.parentNode;) { for (a = 0; a < l; a++)if ((r = n[a]).element[0] === i) return { target: r, targetElement: i }; for (a = 0; a < c; a++)if (s = o[a], e.contains(s.element[0], i) && b.matchesSelector.call(i, s.options.filter)) return { target: s, targetElement: i }; i = i.parentNode } return t } function a(e, t) { var i, n = t.options.group, o = e[n]; if (x.fn.destroy.call(t), o.length > 1) { for (i = 0; i < o.length; i++)if (o[i] == t) { o.splice(i, 1); break } } else o.length = 0, delete e[n] } function l(e) { var t, i, n, o = c()[0]; return e[0] === o ? (i = o.scrollTop, n = o.scrollLeft, { top: i, left: n, bottom: i + y.height(), right: n + y.width() }) : ((t = e.offset()).bottom = t.top + e.height(), t.right = t.left + e.width(), t) } function c() { return e(_.support.browser.chrome ? w.body : w.documentElement) } function d(t) { var i, n = c(); if (!t || t === w.body || t === w.documentElement) return n; for (i = e(t)[0]; i && !_.isScrollable(i) && i !== w.body;)i = i.parentNode; return i === w.body ? n : e(i) } function u(e, t, i) { var n = { x: 0, y: 0 }, o = 50; return e - i.left < o ? n.x = -(o - (e - i.left)) : i.right - e < o && (n.x = o - (i.right - e)), t - i.top < o ? n.y = -(o - (t - i.top)) : i.bottom - t < o && (n.y = o - (i.bottom - t)), n } var h, f, p, m, g, v, _ = window.kendo, b = _.support, w = window.document, y = e(window), k = _.Class, x = _.ui.Widget, C = _.Observable, S = _.UserEvents, T = e.proxy, D = e.extend, A = _.getOffset, E = {}, I = {}, M = {}, R = _.elementUnderCursor, F = "keyup", z = "change", P = "dragstart", B = "hold", L = "drag", H = "dragend", N = "dragcancel", O = "hintDestroyed", V = "dragenter", U = "dragleave", W = "drop", q = C.extend({ init: function (t, i) { var n = this, o = t[0]; n.capture = !1, o.addEventListener ? (e.each(_.eventMap.down.split(" "), function () { o.addEventListener(this, T(n._press, n), !0) }), e.each(_.eventMap.up.split(" "), function () { o.addEventListener(this, T(n._release, n), !0) })) : (e.each(_.eventMap.down.split(" "), function () { o.attachEvent(this, T(n._press, n)) }), e.each(_.eventMap.up.split(" "), function () { o.attachEvent(this, T(n._release, n)) })), C.fn.init.call(n), n.bind(["press", "release"], i || {}) }, captureNext: function () { this.capture = !0 }, cancelCapture: function () { this.capture = !1 }, _press: function (e) { this.trigger("press"), this.capture && e.preventDefault() }, _release: function (e) { var t = this; t.trigger("release"), t.capture && (e.preventDefault(), t.cancelCapture()) } }), j = C.extend({ init: function (t) { var i = this; C.fn.init.call(i), i.forcedEnabled = !1, e.extend(i, t), i.scale = 1, i.horizontal ? (i.measure = "offsetWidth", i.scrollSize = "scrollWidth", i.axis = "x") : (i.measure = "offsetHeight", i.scrollSize = "scrollHeight", i.axis = "y") }, makeVirtual: function () { e.extend(this, { virtual: !0, forcedEnabled: !0, _virtualMin: 0, _virtualMax: 0 }) }, virtualSize: function (e, t) { this._virtualMin === e && this._virtualMax === t || (this._virtualMin = e, this._virtualMax = t, this.update()) }, outOfBounds: function (e) { return e > this.max || e < this.min }, forceEnabled: function () { this.forcedEnabled = !0 }, getSize: function () { return this.container[0][this.measure] }, getTotal: function () { return this.element[0][this.scrollSize] }, rescale: function (e) { this.scale = e }, update: function (e) { var t = this, i = t.virtual ? t._virtualMax : t.getTotal(), n = i * t.scale, o = t.getSize(); (0 !== i || t.forcedEnabled) && (t.max = t.virtual ? -t._virtualMin : 0, t.size = o, t.total = n, t.min = Math.min(t.max, o - n), t.minScale = o / i, t.centerOffset = (n - o) / 2, t.enabled = t.forcedEnabled || n > o, e || t.trigger(z, t)) } }), G = C.extend({ init: function (e) { var t = this; C.fn.init.call(t), t.x = new j(D({ horizontal: !0 }, e)), t.y = new j(D({ horizontal: !1 }, e)), t.container = e.container, t.forcedMinScale = e.minScale, t.maxScale = e.maxScale || 100, t.bind(z, e) }, rescale: function (e) { this.x.rescale(e), this.y.rescale(e), this.refresh() }, centerCoordinates: function () { return { x: Math.min(0, -this.x.centerOffset), y: Math.min(0, -this.y.centerOffset) } }, refresh: function () { var e = this; e.x.update(), e.y.update(), e.enabled = e.x.enabled || e.y.enabled, e.minScale = e.forcedMinScale || Math.min(e.x.minScale, e.y.minScale), e.fitScale = Math.max(e.x.minScale, e.y.minScale), e.trigger(z) } }), $ = C.extend({ init: function (e) { D(this, e), C.fn.init.call(this) }, outOfBounds: function () { return this.dimension.outOfBounds(this.movable[this.axis]) }, dragMove: function (e) { var t = this, i = t.dimension, n = t.axis, o = t.movable, r = o[n] + e; i.enabled && ((r < i.min && e < 0 || r > i.max && e > 0) && (e *= t.resistance), o.translateAxis(n, e), t.trigger(z, t)) } }), Y = k.extend({ init: function (t) { var i, n, o, r, s = this; D(s, { elastic: !0 }, t), o = s.elastic ? .5 : 0, r = s.movable, s.x = i = new $({ axis: "x", dimension: s.dimensions.x, resistance: o, movable: r }), s.y = n = new $({ axis: "y", dimension: s.dimensions.y, resistance: o, movable: r }), s.userEvents.bind(["press", "move", "end", "gesturestart", "gesturechange"], { gesturestart: function (e) { s.gesture = e, s.offset = s.dimensions.container.offset() }, press: function (t) { e(t.event.target).closest("a").is("[data-navigate-on-press=true]") && t.sender.cancel() }, gesturechange: function (e) { var t, o, a, l = s.gesture, c = l.center, d = e.center, u = e.distance / l.distance, h = s.dimensions.minScale, f = s.dimensions.maxScale; r.scale <= h && u < 1 && (u += .8 * (1 - u)), r.scale * u >= f && (u = f / r.scale), o = r.x + s.offset.left, a = r.y + s.offset.top, t = { x: (o - c.x) * u + d.x - o, y: (a - c.y) * u + d.y - a }, r.scaleWith(u), i.dragMove(t.x), n.dragMove(t.y), s.dimensions.rescale(r.scale), s.gesture = e, e.preventDefault() }, move: function (e) { e.event.target.tagName.match(/textarea|input/i) || (i.dimension.enabled || n.dimension.enabled ? (i.dragMove(e.x.delta), n.dragMove(e.y.delta), e.preventDefault()) : e.touch.skip()) }, end: function (e) { e.preventDefault() } }) } }), K = b.transitions.prefix + "Transform"; f = b.hasHW3D ? function (e, t, i) { return "translate3d(" + e + "px," + t + "px,0) scale(" + i + ")" } : function (e, t, i) { return "translate(" + e + "px," + t + "px) scale(" + i + ")" }, p = C.extend({ init: function (t) { var i = this; C.fn.init.call(i), i.element = e(t), i.element[0].style.webkitTransformOrigin = "left top", i.x = 0, i.y = 0, i.scale = 1, i._saveCoordinates(f(i.x, i.y, i.scale)) }, translateAxis: function (e, t) { this[e] += t, this.refresh() }, scaleTo: function (e) { this.scale = e, this.refresh() }, scaleWith: function (e) { this.scale *= e, this.refresh() }, translate: function (e) { this.x += e.x, this.y += e.y, this.refresh() }, moveAxis: function (e, t) { this[e] = t, this.refresh() }, moveTo: function (e) { D(this, e), this.refresh() }, refresh: function () { var e, t = this, i = t.x, n = t.y; t.round && (i = Math.round(i), n = Math.round(n)), (e = f(i, n, t.scale)) != t.coordinates && (_.support.browser.msie && _.support.browser.version < 10 ? (t.element[0].style.position = "absolute", t.element[0].style.left = t.x + "px", t.element[0].style.top = t.y + "px") : t.element[0].style[K] = e, t._saveCoordinates(e), t.trigger(z)) }, _saveCoordinates: function (e) { this.coordinates = e } }), (m = x.extend({ init: function (e, t) { var i, n = this; x.fn.init.call(n, e, t), (i = n.options.group) in I ? I[i].push(n) : I[i] = [n] }, events: [V, U, W], options: { name: "DropTarget", group: "default" }, destroy: function () { a(I, this) }, _trigger: function (e, t) { var i = E[this.options.group]; if (i) return this.trigger(e, D({}, t.event, { draggable: i, dropTarget: t.dropTarget })) }, _over: function (e) { this._trigger(V, e) }, _out: function (e) { this._trigger(U, e) }, _drop: function (e) { var t = E[this.options.group]; t && (t.dropped = !this._trigger(W, e)) } })).destroyGroup = function (e) { var t, i = I[e] || M[e]; if (i) { for (t = 0; t < i.length; t++)x.fn.destroy.call(i[t]); i.length = 0, delete I[e], delete M[e] } }, m._cache = I, g = m.extend({ init: function (e, t) { var i, n = this; x.fn.init.call(n, e, t), (i = n.options.group) in M ? M[i].push(n) : M[i] = [n] }, destroy: function () { a(M, this) }, options: { name: "DropTargetArea", group: "default", filter: null } }), v = x.extend({ init: function (e, t) { var i = this; x.fn.init.call(i, e, t), i._activated = !1, i.userEvents = new S(i.element, { global: !0, allowSelection: !0, filter: i.options.filter, threshold: i.options.distance, start: T(i._start, i), hold: T(i._hold, i), move: T(i._drag, i), end: T(i._end, i), cancel: T(i._cancel, i), select: T(i._select, i) }), i._afterEndHandler = T(i._afterEnd, i), i._captureEscape = T(i._captureEscape, i) }, events: [B, P, L, H, N, O], options: { name: "Draggable", distance: _.support.touch ? 0 : 5, group: "default", cursorOffset: null, axis: null, container: null, filter: null, ignore: null, holdToDrag: !1, autoScroll: !1, dropped: !1 }, cancelHold: function () { this._activated = !1 }, _captureEscape: function (e) { e.keyCode === _.keys.ESC && (this._trigger(N, { event: e }), this.userEvents.cancel()) }, _updateHint: function (t) { var i, n = this, r = n.options, s = n.boundaries, a = r.axis, l = n.options.cursorOffset; l ? i = { left: t.x.location + l.left, top: t.y.location + l.top } : (n.hintOffset.left += t.x.delta, n.hintOffset.top += t.y.delta, i = e.extend({}, n.hintOffset)), s && (i.top = o(i.top, s.y), i.left = o(i.left, s.x)), "x" === a ? delete i.top : "y" === a && delete i.left, n.hint.css(i) }, _shouldIgnoreTarget: function (t) { var i = this.options.ignore; return i && e(t).is(i) }, _select: function (e) { this._shouldIgnoreTarget(e.event.target) || e.preventDefault() }, _start: function (i) { var n, o = this, s = o.options, a = s.container, l = s.hint; return this._shouldIgnoreTarget(i.touch.initialTouch) || s.holdToDrag && !o._activated ? (o.userEvents.cancel(), t) : (o.currentTarget = i.target, o.currentTargetOffset = A(o.currentTarget), l && (o.hint && o.hint.stop(!0, !0).remove(), o.hint = _.isFunction(l) ? e(l.call(o, o.currentTarget)) : l, n = A(o.currentTarget), o.hintOffset = n, o.hint.css({ position: "absolute", zIndex: 2e4, left: n.left, top: n.top }).appendTo(w.body), o.angular("compile", function () { o.hint.removeAttr("ng-repeat"); for (var t = e(i.target); !t.data("$$kendoScope") && t.length;)t = t.parent(); return { elements: o.hint.get(), scopeFrom: t.data("$$kendoScope") } })), E[s.group] = o, o.dropped = !1, a && (o.boundaries = r(a, o.hint)), e(w).on(F, o._captureEscape), o._trigger(P, i) && (o.userEvents.cancel(), o._afterEnd()), o.userEvents.capture(), t) }, _hold: function (e) { this.currentTarget = e.target, this._trigger(B, e) ? this.userEvents.cancel() : this._activated = !0 }, _drag: function (t) { var i, n; t.preventDefault(), i = this._elementUnderCursor(t), this.options.autoScroll && this._cursorElement !== i && (this._scrollableParent = d(i), this._cursorElement = i), this._lastEvent = t, this._processMovement(t, i), this.options.autoScroll && this._scrollableParent[0] && (n = u(t.x.location, t.y.location, l(this._scrollableParent)), this._scrollCompenstation = e.extend({}, this.hintOffset), this._scrollVelocity = n, 0 === n.y && 0 === n.x ? (clearInterval(this._scrollInterval), this._scrollInterval = null) : this._scrollInterval || (this._scrollInterval = setInterval(e.proxy(this, "_autoScroll"), 50))), this.hint && this._updateHint(t) }, _processMovement: function (i, n) { this._withDropTarget(n, function (n, o) { if (!n) return h && (h._trigger(U, D(i, { dropTarget: e(h.targetElement) })), h = null), t; if (h) { if (o === h.targetElement) return; h._trigger(U, D(i, { dropTarget: e(h.targetElement) })) } n._trigger(V, D(i, { dropTarget: e(o) })), h = D(n, { targetElement: o }) }), this._trigger(L, D(i, { dropTarget: h, elementUnderCursor: n })) }, _autoScroll: function () { var e, t, i, n, o, r, s, a, l = this._scrollableParent[0], d = this._scrollVelocity, u = this._scrollCompenstation; l && (e = this._elementUnderCursor(this._lastEvent), this._processMovement(this._lastEvent, e), (n = l === c()[0]) ? (t = w.body.scrollHeight > y.height(), i = w.body.scrollWidth > y.width()) : (t = l.offsetHeight <= l.scrollHeight, i = l.offsetWidth <= l.scrollWidth), o = l.scrollTop + d.y, r = t && o > 0 && o < l.scrollHeight, s = l.scrollLeft + d.x, a = i && s > 0 && s < l.scrollWidth, r && (l.scrollTop += d.y), a && (l.scrollLeft += d.x), this.hint && n && (a || r) && (r && (u.top += d.y), a && (u.left += d.x), this.hint.css(u))) }, _end: function (t) { this._withDropTarget(this._elementUnderCursor(t), function (i, n) { i && (i._drop(D({}, t, { dropTarget: e(n) })), h = null) }), this._cancel(this._trigger(H, t)) }, _cancel: function (e) { var t = this; t._scrollableParent = null, this._cursorElement = null, clearInterval(this._scrollInterval), t._activated = !1, t.hint && !t.dropped ? setTimeout(function () { t.hint.stop(!0, !0), e ? t._afterEndHandler() : t.hint.animate(t.currentTargetOffset, "fast", t._afterEndHandler) }, 0) : t._afterEnd() }, _trigger: function (e, t) { return this.trigger(e, D({}, t.event, { x: t.x, y: t.y, currentTarget: this.currentTarget, initialTarget: t.touch ? t.touch.initialTouch : null, dropTarget: t.dropTarget, elementUnderCursor: t.elementUnderCursor })) }, _elementUnderCursor: function (e) { var t = R(e), n = this.hint; return n && i(n[0], t) && (n.hide(), (t = R(e)) || (t = R(e)), n.show()), t }, _withDropTarget: function (e, t) { var i, n = this.options.group, o = I[n], r = M[n]; (o && o.length || r && r.length) && ((i = s(e, o, r)) ? t(i.target, i.targetElement) : t()) }, destroy: function () { var e = this; x.fn.destroy.call(e), e._afterEnd(), e.userEvents.destroy(), this._scrollableParent = null, this._cursorElement = null, clearInterval(this._scrollInterval), e.currentTarget = null }, _afterEnd: function () { var t = this; t.hint && t.hint.remove(), delete E[t.options.group], t.trigger("destroy"), t.trigger(O), e(w).off(F, t._captureEscape) } }), _.ui.plugin(m), _.ui.plugin(g), _.ui.plugin(v), _.TapCapture = q, _.containerBoundaries = r, D(_.ui, { Pane: Y, PaneDimensions: G, Movable: p }), _.ui.Draggable.utils = { autoScrollVelocity: u, scrollableViewPort: l, findScrollableParent: d } }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.scroller.min", ["kendo.fx.min", "kendo.draganddrop.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.mobile, o = i.effects, r = n.ui, s = e.proxy, a = e.extend, l = r.Widget, c = i.Class, d = i.ui.Movable, u = i.ui.Pane, h = i.ui.PaneDimensions, f = o.Transition, p = o.Animation, m = Math.abs, g = "km-scroller-release", v = "km-scroller-refresh", _ = "change", b = "scroll", w = p.extend({ init: function (e) { var t = this; p.fn.init.call(t), a(t, e), t.userEvents.bind("gestureend", s(t.start, t)), t.tapCapture.bind("press", s(t.cancel, t)) }, enabled: function () { return this.movable.scale < this.dimensions.minScale }, done: function () { return this.dimensions.minScale - this.movable.scale < .01 }, tick: function () { var e = this.movable; e.scaleWith(1.1), this.dimensions.rescale(e.scale) }, onEnd: function () { var e = this.movable; e.scaleTo(this.dimensions.minScale), this.dimensions.rescale(e.scale) } }), y = p.extend({ init: function (e) { var t = this; p.fn.init.call(t), a(t, e, { transition: new f({ axis: e.axis, movable: e.movable, onEnd: function () { t._end() } }) }), t.tapCapture.bind("press", function () { t.cancel() }), t.userEvents.bind("end", s(t.start, t)), t.userEvents.bind("gestureend", s(t.start, t)), t.userEvents.bind("tap", s(t.onEnd, t)) }, onCancel: function () { this.transition.cancel() }, freeze: function (e) { this.cancel(), this._moveTo(e) }, onEnd: function () { var e = this; e.paneAxis.outOfBounds() ? e._snapBack() : e._end() }, done: function () { return m(this.velocity) < 1 }, start: function (e) { var t, i = this; i.dimension.enabled && (i.paneAxis.outOfBounds() ? i._snapBack() : (t = 2 === e.touch.id ? 0 : e.touch[i.axis].velocity, i.velocity = Math.max(Math.min(t * i.velocityMultiplier, 55), -55), i.tapCapture.captureNext(), p.fn.start.call(i))) }, tick: function () { var e = this, t = e.dimension, i = e.paneAxis.outOfBounds() ? .5 : e.friction, n = e.velocity *= i, o = e.movable[e.axis] + n; !e.elastic && t.outOfBounds(o) && (o = Math.max(Math.min(o, t.max), t.min), e.velocity = 0), e.movable.moveAxis(e.axis, o) }, _end: function () { this.tapCapture.cancelCapture(), this.end() }, _snapBack: function () { var e = this, t = e.dimension, i = e.movable[e.axis] > t.max ? t.max : t.min; e._moveTo(i) }, _moveTo: function (e) { this.transition.moveTo({ location: e, duration: 500, ease: f.easeOutExpo }) } }), k = p.extend({ init: function (e) { i.effects.Animation.fn.init.call(this), a(this, e, { origin: {}, destination: {}, offset: {} }) }, tick: function () { this._updateCoordinates(), this.moveTo(this.origin) }, done: function () { return m(this.offset.y) < 5 && m(this.offset.x) < 5 }, onEnd: function () { this.moveTo(this.destination), this.callback && this.callback.call() }, setCoordinates: function (e, t) { this.offset = {}, this.origin = e, this.destination = t }, setCallback: function (e) { e && i.isFunction(e) ? this.callback = e : e = t }, _updateCoordinates: function () { this.offset = { x: (this.destination.x - this.origin.x) / 4, y: (this.destination.y - this.origin.y) / 4 }, this.origin = { y: this.origin.y + this.offset.y, x: this.origin.x + this.offset.x } } }), x = c.extend({ init: function (t) { var i = this, n = "x" === t.axis, o = e('<div class="km-touch-scrollbar km-' + (n ? "horizontal" : "vertical") + '-scrollbar" />'); a(i, t, { element: o, elementSize: 0, movable: new d(o), scrollMovable: t.movable, alwaysVisible: t.alwaysVisible, size: n ? "width" : "height" }), i.scrollMovable.bind(_, s(i.refresh, i)), i.container.append(o), t.alwaysVisible && i.show() }, refresh: function () { var e = this, t = e.axis, i = e.dimension, n = i.size, o = e.scrollMovable, r = n / i.total, s = Math.round(-o[t] * r), a = Math.round(n * r); r >= 1 ? this.element.css("display", "none") : this.element.css("display", ""), s + a > n ? a = n - s : s < 0 && (a += s, s = 0), e.elementSize != a && (e.element.css(e.size, a + "px"), e.elementSize = a), e.movable.moveAxis(t, s) }, show: function () { this.element.css({ opacity: .7, visibility: "visible" }) }, hide: function () { this.alwaysVisible || this.element.css({ opacity: 0 }) } }), C = l.extend({ init: function (n, o) { var r, c, f, p, g, v, y, x, C, S = this; return l.fn.init.call(S, n, o), n = S.element, (S._native = S.options.useNative && i.support.hasNativeScrolling) ? (n.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'), a(S, { scrollElement: n, fixedContainer: n.children().first() }), t) : (n.css("overflow", "hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'), r = n.children().eq(1), c = new i.TapCapture(n), f = new d(r), p = new h({ element: r, container: n, forcedEnabled: S.options.zoom }), g = this.options.avoidScrolling, v = new i.UserEvents(n, { touchAction: "pan-y", fastTap: !0, allowSelection: !0, preventDragEvent: !0, captureUpIfMoved: !0, multiTouch: S.options.zoom, start: function (t) { p.refresh(); var i = m(t.x.velocity), n = m(t.y.velocity), o = 2 * i >= n, r = e.contains(S.fixedContainer[0], t.event.target), s = 2 * n >= i; !r && !g(t) && S.enabled && (p.x.enabled && o || p.y.enabled && s) ? v.capture() : v.cancel() } }), y = new u({ movable: f, dimensions: p, userEvents: v, elastic: S.options.elastic }), x = new w({ movable: f, dimensions: p, userEvents: v, tapCapture: c }), C = new k({ moveTo: function (e) { S.scrollTo(e.x, e.y) } }), f.bind(_, function () { S.scrollTop = -f.y, S.scrollLeft = -f.x, S.trigger(b, { scrollTop: S.scrollTop, scrollLeft: S.scrollLeft }) }), S.options.mousewheelScrolling && n.on("DOMMouseScroll mousewheel", s(this, "_wheelScroll")), a(S, { movable: f, dimensions: p, zoomSnapBack: x, animatedScroller: C, userEvents: v, pane: y, tapCapture: c, pulled: !1, enabled: !0, scrollElement: r, scrollTop: 0, scrollLeft: 0, fixedContainer: n.children().first() }), S._initAxis("x"), S._initAxis("y"), S._wheelEnd = function () { S._wheel = !1, S.userEvents.end(0, S._wheelY) }, p.refresh(), S.options.pullToRefresh && S._initPullToRefresh(), t) }, _wheelScroll: function (e) { this._wheel || (this._wheel = !0, this._wheelY = 0, this.userEvents.press(0, this._wheelY)), clearTimeout(this._wheelTimeout), this._wheelTimeout = setTimeout(this._wheelEnd, 50); var t = i.wheelDeltaY(e); t && (this._wheelY += t, this.userEvents.move(0, this._wheelY)), e.preventDefault() }, makeVirtual: function () { this.dimensions.y.makeVirtual() }, virtualSize: function (e, t) { this.dimensions.y.virtualSize(e, t) }, height: function () { return this.dimensions.y.size }, scrollHeight: function () { return this.scrollElement[0].scrollHeight }, scrollWidth: function () { return this.scrollElement[0].scrollWidth }, options: { name: "Scroller", zoom: !1, pullOffset: 140, visibleScrollHints: !1, elastic: !0, useNative: !1, mousewheelScrolling: !0, avoidScrolling: function () { return !1 }, pullToRefresh: !1, messages: { pullTemplate: "Pull to refresh", releaseTemplate: "Release to refresh", refreshTemplate: "Refreshing" } }, events: ["pull", b, "resize"], _resize: function () { this._native || this.contentResized() }, setOptions: function (e) { l.fn.setOptions.call(this, e), e.pullToRefresh && this._initPullToRefresh() }, reset: function () { this._native ? this.scrollElement.scrollTop(0) : (this.movable.moveTo({ x: 0, y: 0 }), this._scale(1)) }, contentResized: function () { this.dimensions.refresh(), this.pane.x.outOfBounds() && this.movable.moveAxis("x", this.dimensions.x.min), this.pane.y.outOfBounds() && this.movable.moveAxis("y", this.dimensions.y.min) }, zoomOut: function () { var e = this.dimensions; e.refresh(), this._scale(e.fitScale), this.movable.moveTo(e.centerCoordinates()) }, enable: function () { this.enabled = !0 }, disable: function () { this.enabled = !1 }, scrollTo: function (e, t) { this._native ? (this.scrollElement.scrollLeft(m(e)), this.scrollElement.scrollTop(m(t))) : (this.dimensions.refresh(), this.movable.moveTo({ x: e, y: t })) }, animatedScrollTo: function (e, t, i) { var n, o; this._native ? this.scrollTo(e, t) : (n = { x: this.movable.x, y: this.movable.y }, o = { x: e, y: t }, this.animatedScroller.setCoordinates(n, o), this.animatedScroller.setCallback(i), this.animatedScroller.start()) }, pullHandled: function () { var e = this; e.refreshHint.removeClass(v), e.hintContainer.html(e.pullTemplate({})), e.yinertia.onEnd(), e.xinertia.onEnd(), e.userEvents.cancel() }, destroy: function () { l.fn.destroy.call(this), this.userEvents && this.userEvents.destroy() }, _scale: function (e) { this.dimensions.rescale(e), this.movable.scaleTo(e) }, _initPullToRefresh: function () { var e = this; e.dimensions.y.forceEnabled(), e.pullTemplate = i.template(e.options.messages.pullTemplate), e.releaseTemplate = i.template(e.options.messages.releaseTemplate), e.refreshTemplate = i.template(e.options.messages.refreshTemplate), e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">' + e.pullTemplate({}) + "</span></span>"), e.refreshHint = e.scrollElement.children().first(), e.hintContainer = e.refreshHint.children(".km-template"), e.pane.y.bind("change", s(e._paneChange, e)), e.userEvents.bind("end", s(e._dragEnd, e)) }, _dragEnd: function () { var e = this; e.pulled && (e.pulled = !1, e.refreshHint.removeClass(g).addClass(v), e.hintContainer.html(e.refreshTemplate({})), e.yinertia.freeze(e.options.pullOffset / 2), e.trigger("pull")) }, _paneChange: function () { var e = this; e.movable.y / .5 > e.options.pullOffset ? e.pulled || (e.pulled = !0, e.refreshHint.removeClass(v).addClass(g), e.hintContainer.html(e.releaseTemplate({}))) : e.pulled && (e.pulled = !1, e.refreshHint.removeClass(g), e.hintContainer.html(e.pullTemplate({}))) }, _initAxis: function (e) { var t = this, i = t.movable, n = t.dimensions[e], o = t.tapCapture, r = t.pane[e], s = new x({ axis: e, movable: i, dimension: n, container: t.element, alwaysVisible: t.options.visibleScrollHints }); n.bind(_, function () { s.refresh() }), r.bind(_, function () { s.show() }), t[e + "inertia"] = new y({ axis: e, paneAxis: r, movable: i, tapCapture: o, userEvents: t.userEvents, dimension: n, elastic: t.options.elastic, friction: t.options.friction || .96, velocityMultiplier: t.options.velocityMultiplier || 10, end: function () { s.hide(), t.trigger("scrollEnd", { axis: e, scrollTop: t.scrollTop, scrollLeft: t.scrollLeft }) } }) } }), r.plugin(C), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.groupable.min", ["kendo.core.min", "kendo.draganddrop.min"], function () { return function (e, t) { function i(e) { return e.position().top + 3 } var n = window.kendo, o = n.ui.Widget, r = n._outerWidth, s = e.proxy, a = !1, l = ".kendoGroupable", c = n.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-i-sort-${(data.dir || "asc") == "asc" ? "asc-sm" : "desc-sm"}" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})"></span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-bare"><span class="k-icon k-i-close"></span></a></div>', { useWithBlock: !1 }), d = function (t) { var i = t.attr(n.attr("title")); return i && (i = n.htmlEncode(i)), e('<div class="k-header k-drag-clue" />').css({ width: t.width(), paddingLeft: t.css("paddingLeft"), paddingRight: t.css("paddingRight"), lineHeight: t.height() + "px", paddingTop: t.css("paddingTop"), paddingBottom: t.css("paddingBottom") }).html(i || t.attr(n.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-cancel" />') }, u = e('<div class="k-grouping-dropclue"/>'), h = o.extend({ init: function (c, h) { var f, p, m = this, g = n.guid(), v = s(m._intializePositions, m), _ = m._dropCuePositions = []; o.fn.init.call(m, c, h), a = n.support.isRtl(c), p = a ? "right" : "left", m.draggable = f = m.options.draggable || new n.ui.Draggable(m.element, { filter: m.options.draggableElements, hint: d, group: g }), m.groupContainer = e(m.options.groupContainer, m.element).kendoDropTarget({ group: f.options.group, dragenter: function (e) { m._canDrag(e.draggable.currentTarget) && (e.draggable.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus"), u.css("top", i(m.groupContainer)).css(p, 0).appendTo(m.groupContainer)) }, dragleave: function (e) { e.draggable.hint.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel"), u.remove() }, drop: function (t) { var i, o = t.draggable.currentTarget, r = o.attr(n.attr("field")), s = o.attr(n.attr("title")), l = m.indicator(r), c = m._dropCuePositions, d = c[c.length - 1]; (o.hasClass("k-group-indicator") || m._canDrag(o)) && (d ? (i = m._dropCuePosition(n.getOffset(u).left + parseInt(d.element.css("marginLeft"), 10) * (a ? -1 : 1) + parseInt(d.element.css("marginRight"), 10))) && m._canDrop(e(l), i.element, i.left) && (i.before ? i.element.before(l || m.buildIndicator(r, s)) : i.element.after(l || m.buildIndicator(r, s)), m._change()) : (m.groupContainer.append(m.buildIndicator(r, s)), m._change())) } }).kendoDraggable({ filter: "div.k-group-indicator", hint: d, group: f.options.group, dragcancel: s(m._dragCancel, m), dragstart: function (e) { var t = e.currentTarget, n = parseInt(t.css("marginLeft"), 10), o = t.position(), s = a ? o.left - n : o.left + r(t); v(), u.css({ top: i(m.groupContainer), left: s }).appendTo(m.groupContainer), this.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus") }, dragend: function () { m._dragEnd(this) }, drag: s(m._drag, m) }).on("click" + l, ".k-button", function (t) { t.preventDefault(), m._removeIndicator(e(this).parent()) }).on("click" + l, ".k-link", function (t) { var i = e(this).parent(), o = m.buildIndicator(i.attr(n.attr("field")), i.attr(n.attr("title")), "asc" == i.attr(n.attr("dir")) ? "desc" : "asc"); i.before(o).remove(), m._change(), t.preventDefault() }), f.bind(["dragend", "dragcancel", "dragstart", "drag"], { dragend: function () { m._dragEnd(this) }, dragcancel: s(m._dragCancel, m), dragstart: function (e) { var i, n; return m.options.allowDrag || m._canDrag(e.currentTarget) ? (v(), _.length ? (i = _[_.length - 1].element, n = parseInt(i.css("marginRight"), 10), i.position().left + r(i) + n) : 0, t) : (e.preventDefault(), t) }, drag: s(m._drag, m) }), m.dataSource = m.options.dataSource, m.dataSource && m._refreshHandler ? m.dataSource.unbind("change", m._refreshHandler) : m._refreshHandler = s(m.refresh, m), m.dataSource && (m.dataSource.bind("change", m._refreshHandler), m.refresh()) }, refresh: function () { var t = this, i = t.dataSource; t.groupContainer && t.groupContainer.empty().append(e.map(i.group() || [], function (i) { var o = i.field, r = n.attr("field"), s = t.element.find(t.options.filter).filter(function () { return e(this).attr(r) === o }); return t.buildIndicator(i.field, s.attr(n.attr("title")), i.dir) }).join("")), t._invalidateGroupContainer() }, destroy: function () { var e = this; o.fn.destroy.call(e), e.groupContainer.off(l), e.groupContainer.data("kendoDropTarget") && e.groupContainer.data("kendoDropTarget").destroy(), e.groupContainer.data("kendoDraggable") && e.groupContainer.data("kendoDraggable").destroy(), e.options.draggable || e.draggable.destroy(), e.dataSource && e._refreshHandler && (e.dataSource.unbind("change", e._refreshHandler), e._refreshHandler = null), e.groupContainer = e.element = e.draggable = null }, events: ["change"], options: { name: "Groupable", filter: "th", draggableElements: "th", messages: { empty: "Drag a column header and drop it here to group by that column" } }, indicator: function (t) { var i = e(".k-group-indicator", this.groupContainer); return e.grep(i, function (i) { return e(i).attr(n.attr("field")) === t })[0] }, buildIndicator: function (e, t, i) { return c({ field: e.replace(/"/g, "'"), dir: i, title: t, ns: n.ns }) }, descriptors: function () { var t, i, o, r, s = this, a = e(".k-group-indicator", s.groupContainer); return t = s.element.find(s.options.filter).map(function () { var t = e(this), s = t.attr(n.attr("aggregates")), a = t.attr(n.attr("field")); if (s && "" !== s) for (i = s.split(","), s = [], o = 0, r = i.length; o < r; o++)s.push({ field: a, aggregate: i[o] }); return s }).toArray(), e.map(a, function (i) { return i = e(i), { field: i.attr(n.attr("field")), dir: i.attr(n.attr("dir")), aggregates: t || [] } }) }, _removeIndicator: function (e) { e.remove(), this._invalidateGroupContainer(), this._change() }, _change: function () { var e, i = this; if (i.dataSource) { if (e = i.descriptors(), i.trigger("change", { groups: e })) return i.refresh(), t; i.dataSource.group(e) } }, _dropCuePosition: function (t) { var i, n, o, s, l, c = this._dropCuePositions; if (u.is(":visible") && 0 !== c.length) return t = Math.ceil(t), i = c[c.length - 1], n = i.left, o = i.right, s = parseInt(i.element.css("marginLeft"), 10), l = parseInt(i.element.css("marginRight"), 10), t >= o && !a || t < n && a ? t = { left: i.element.position().left + (a ? -s : r(i.element) + l), element: i.element, before: !1 } : (t = e.grep(c, function (e) { return e.left <= t && t <= e.right || a && t > e.right })[0]) && (t = { left: a ? t.element.position().left + r(t.element) + l : t.element.position().left - s, element: t.element, before: !0 }), t }, _drag: function (e) { var t = this._dropCuePosition(e.x.location); t && u.css({ left: t.left, right: "auto" }) }, _canDrag: function (e) { var t = e.attr(n.attr("field")); return "false" != e.attr(n.attr("groupable")) && t && (e.hasClass("k-group-indicator") || !this.indicator(t)) }, _canDrop: function (e, t, i) { var n = e.next(), o = e[0] !== t[0] && (!n[0] || t[0] !== n[0] || !a && i > n.position().left || a && i < n.position().left); return o }, _dragEnd: function (t) { var i = this, o = t.currentTarget.attr(n.attr("field")), r = i.indicator(o); t !== i.options.draggable && !t.dropped && r && i._removeIndicator(e(r)), i._dragCancel() }, _dragCancel: function () { u.remove(), this._dropCuePositions = [] }, _intializePositions: function () { var t, i = e(".k-group-indicator", this.groupContainer); this._dropCuePositions = e.map(i, function (i) { return i = e(i), t = n.getOffset(i).left, { left: parseInt(t, 10), right: parseInt(t + r(i), 10), element: i } }) }, _invalidateGroupContainer: function () { var e = this.groupContainer; e && e.is(":empty") && e.html(this.options.messages.empty) } }); n.ui.plugin(h) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.reorderable.min", ["kendo.core.min", "kendo.draganddrop.min"], function () { return function (e, t) { function i(t, i) { t = e(t), i ? t.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel") : t.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus") } var n = window.kendo, o = n._outerWidth, r = n._outerHeight, s = n.getOffset, a = n.ui.Widget, l = "change", c = a.extend({ init: function (t, c) { var d, u = this, h = n.guid() + "-reorderable"; a.fn.init.call(u, t, c), t = u.element.addClass("k-reorderable"), c = u.options, u.draggable = d = c.draggable || new n.ui.Draggable(t, { group: h, autoScroll: !0, filter: c.filter, hint: c.hint }), u.reorderDropCue = e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-60-down"></div><div class="k-icon k-i-arrow-60-up"></div></div>'), t.find(d.options.filter).kendoDropTarget({ group: d.options.group, dragenter: function (e) { var t, n, a, l; u._draggable && (t = this.element, a = !u._dropTargetAllowed(t) || u._isLastDraggable(), i(e.draggable.hint, a), a || (n = s(t), l = n.left, c.inSameContainer && !c.inSameContainer({ source: t, target: u._draggable, sourceIndex: u._index(t), targetIndex: u._index(u._draggable) }) ? u._dropTarget = t : u._index(t) > u._index(u._draggable) && (l += o(t)), u.reorderDropCue.css({ height: r(t), top: n.top, left: l }).appendTo(document.body))) }, dragleave: function (e) { i(e.draggable.hint, !0), u.reorderDropCue.remove(), u._dropTarget = null }, drop: function () { var e, t; u._dropTarget = null, u._draggable && (e = this.element, t = u._draggable, u._dropTargetAllowed(e) && !u._isLastDraggable() && u.trigger(l, { element: u._draggable, target: e, oldIndex: u._index(t), newIndex: u._index(e), position: s(u.reorderDropCue).left > s(e).left ? "after" : "before" })) } }), d.bind(["dragcancel", "dragend", "dragstart", "drag"], { dragcancel: function () { u.reorderDropCue.remove(), u._draggable = null, u._elements = null }, dragend: function () { u.reorderDropCue.remove(), u._draggable = null, u._elements = null }, dragstart: function (e) { u._draggable = e.currentTarget, u._elements = u.element.find(u.draggable.options.filter) }, drag: function (e) { var t, i; u._dropTarget && !this.hint.find(".k-drag-status").hasClass("k-i-cancel") && (t = s(u._dropTarget).left, i = o(u._dropTarget), u.reorderDropCue.css(e.pageX > t + i / 2 ? { left: t + i } : { left: t })) } }) }, options: { name: "Reorderable", filter: "*" }, events: [l], _isLastDraggable: function () { var e, t = this.options.inSameContainer, i = this._draggable[0], n = this._elements.get(), o = !1; if (!t) return !1; for (; !o && n.length > 0;)e = n.pop(), o = i !== e && t({ source: i, target: e, sourceIndex: this._index(i), targetIndex: this._index(e) }); return !o }, _dropTargetAllowed: function (e) { var t = this.options.inSameContainer, i = this.options.dragOverContainers, n = this._draggable; return n[0] !== e[0] && (!t || !i || !!t({ source: n, target: e, sourceIndex: this._index(n), targetIndex: this._index(e) }) || i(this._index(n), this._index(e))) }, _index: function (e) { return this._elements.index(e) }, destroy: function () { var t = this; a.fn.destroy.call(t), t.element.find(t.draggable.options.filter).each(function () { var t = e(this); t.data("kendoDropTarget") && t.data("kendoDropTarget").destroy() }), t.draggable && (t.draggable.destroy(), t.draggable.element = t.draggable = null), t.elements = t.reorderDropCue = t._elements = t._draggable = null } }); n.ui.plugin(c) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.resizable.min", ["kendo.core.min", "kendo.draganddrop.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.ui, o = n.Widget, r = e.proxy, s = i.isFunction, a = e.extend, l = "horizontal", c = "vertical", d = "start", u = "resize", h = "resizeend", f = o.extend({ init: function (e, t) { var i = this; o.fn.init.call(i, e, t), i.orientation = i.options.orientation.toLowerCase() != c ? l : c, i._positionMouse = i.orientation == l ? "x" : "y", i._position = i.orientation == l ? "left" : "top", i._sizingDom = i.orientation == l ? "outerWidth" : "outerHeight", i.draggable = new n.Draggable(t.draggableElement || e, { distance: 1, filter: t.handle, drag: r(i._resize, i), dragcancel: r(i._cancel, i), dragstart: r(i._start, i), dragend: r(i._stop, i) }), i.userEvents = i.draggable.userEvents }, events: [u, h, d], options: { name: "Resizable", orientation: l }, resize: function () { }, _max: function (e) { var i = this, n = i.hint ? i.hint[i._sizingDom]() : 0, o = i.options.max; return s(o) ? o(e) : o !== t ? i._initialElementPosition + o - n : o }, _min: function (e) { var i = this.options.min; return s(i) ? i(e) : i !== t ? this._initialElementPosition + i : i }, _start: function (t) { var i = this, n = i.options.hint, o = e(t.currentTarget); i._initialElementPosition = o.position()[i._position], i._initialMousePosition = t[i._positionMouse].startLocation, n && (i.hint = s(n) ? e(n(o)) : n, i.hint.css({ position: "absolute" }).css(i._position, i._initialElementPosition).appendTo(i.element)), i.trigger(d, t), i._maxPosition = i._max(t), i._minPosition = i._min(t), e(document.body).css("cursor", o.css("cursor")) }, _resize: function (e) { var i, n = this, o = n._maxPosition, r = n._minPosition, s = n._initialElementPosition + (e[n._positionMouse].location - n._initialMousePosition); i = r !== t ? Math.max(r, s) : s, n.position = i = o !== t ? Math.min(o, i) : i, n.hint && n.hint.toggleClass(n.options.invalidClass || "", i == o || i == r).css(n._position, i), n.resizing = !0, n.trigger(u, a(e, { position: i })) }, _stop: function (t) { var i = this; i.hint && i.hint.remove(), i.resizing = !1, i.trigger(h, a(t, { position: i.position })), e(document.body).css("cursor", "") }, _cancel: function (e) { var i = this; i.hint && (i.position = t, i.hint.css(i._position, i._initialElementPosition), i._stop(e)) }, destroy: function () { var e = this; o.fn.destroy.call(e), e.draggable && e.draggable.destroy() }, press: function (e) { if (e) { var t = e.position(), i = this; i.userEvents.press(t.left, t.top, e[0]), i.targetPosition = t, i.target = e } }, move: function (e) { var i = this, n = i._position, o = i.targetPosition, r = i.position; r === t && (r = o[n]), o[n] = r + e, i.userEvents.move(o.left, o.top) }, end: function () { this.userEvents.end(), this.target = this.position = t } }), i.ui.plugin(f), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.sortable.min", ["kendo.draganddrop.min"], function () { return function (e, t) { function i(t, i) { try { return e.contains(t, i) || t == i } catch (e) { return !1 } } function n(e) { return e.clone() } function o(e) { return e.clone().removeAttr("id").css("visibility", "hidden") } var r = window.kendo, s = r.ui.Widget, a = r._outerWidth, l = r._outerHeight, c = "start", d = "beforeMove", u = "move", h = "end", f = "change", p = "cancel", m = "sort", g = "remove", v = "receive", _ = s.extend({ init: function (e, t) { var i = this; s.fn.init.call(i, e, t), i.options.placeholder || (i.options.placeholder = o), i.options.hint || (i.options.hint = n), i.draggable = i._createDraggable() }, events: [c, d, u, h, f, p], options: { name: "Sortable", hint: null, placeholder: null, filter: ">*", holdToDrag: !1, disabled: null, container: null, connectWith: null, handler: null, cursorOffset: null, axis: null, ignore: null, autoScroll: !1, cursor: "auto", moveOnDragEnter: !1 }, destroy: function () { this.draggable.destroy(), s.fn.destroy.call(this) }, _createDraggable: function () { var t = this, i = t.element, n = t.options; return new r.ui.Draggable(i, { filter: n.filter, hint: r.isFunction(n.hint) ? n.hint : e(n.hint), holdToDrag: n.holdToDrag, container: n.container ? e(n.container) : null, cursorOffset: n.cursorOffset, axis: n.axis, ignore: n.ignore, autoScroll: n.autoScroll, dragstart: e.proxy(t._dragstart, t), dragcancel: e.proxy(t._dragcancel, t), drag: e.proxy(t._drag, t), dragend: e.proxy(t._dragend, t) }) }, _dragstart: function (t) { var i = this.draggedElement = t.currentTarget, n = this.options.disabled, o = this.options.handler, s = this.options.placeholder, a = this.placeholder = e(r.isFunction(s) ? s.call(this, i) : s); n && i.is(n) ? t.preventDefault() : o && !e(t.initialTarget).is(o) ? t.preventDefault() : this.trigger(c, { item: i, draggableEvent: t }) ? t.preventDefault() : (i.css("display", "none"), i.before(a), this._setCursor()) }, _dragcancel: function () { this._cancel(), this.trigger(p, { item: this.draggedElement }), this._resetCursor() }, _drag: function (i) { var n, o, r, s, a, l = this.draggedElement, c = this._findTarget(i), d = { left: i.x.location, top: i.y.location }, u = { x: i.x.delta, y: i.y.delta }, h = this.options.axis, f = this.options.moveOnDragEnter, p = { item: l, list: this, draggableEvent: i }; if ("x" === h || "y" === h) return this._movementByAxis(h, d, u[h], p), t; if (c) { if (n = this._getElementCenter(c.element), o = { left: Math.round(d.left - n.left), top: Math.round(d.top - n.top) }, e.extend(p, { target: c.element }), c.appendToBottom) return this._movePlaceholder(c, null, p), t; if (c.appendAfterHidden && this._movePlaceholder(c, "next", p), this._isFloating(c.element) ? u.x < 0 && f || !f && o.left < 0 ? r = "prev" : (u.x > 0 && f || !f && o.left > 0) && (r = "next") : u.y < 0 && f || !f && o.top < 0 ? r = "prev" : (u.y > 0 && f || !f && o.top > 0) && (r = "next"), r) { for (a = "prev" === r ? jQuery.fn.prev : jQuery.fn.next, s = a.call(c.element); s.length && !s.is(":visible");)s = a.call(s); s[0] != this.placeholder[0] && this._movePlaceholder(c, r, p) } } }, _dragend: function (i) { var n, o, r, s, a = this.placeholder, l = this.draggedElement, c = this.indexOf(l), d = this.indexOf(a), u = this.options.connectWith; return this._resetCursor(), r = { action: m, item: l, oldIndex: c, newIndex: d, draggableEvent: i }, d >= 0 ? o = this.trigger(h, r) : (n = a.parents(u).getKendoSortable(), r.action = g, s = e.extend({}, r, { action: v, oldIndex: -1, newIndex: n.indexOf(a) }), o = !(!this.trigger(h, r) && !n.trigger(h, s))), o || d === c ? (this._cancel(), t) : (a.replaceWith(l), l.show(), this.draggable.dropped = !0, r = { action: -1 != this.indexOf(l) ? m : g, item: l, oldIndex: c, newIndex: this.indexOf(l), draggableEvent: i }, this.trigger(f, r), n && (s = e.extend({}, r, { action: v, oldIndex: -1, newIndex: n.indexOf(l) }), n.trigger(f, s)), t) }, _findTarget: function (i) { var n, o, r = this._findElementUnderCursor(i), s = this.options.connectWith; return e.contains(this.element[0], r) ? (n = this.items(), (o = n.filter(r)[0] || n.has(r)[0]) ? { element: e(o), sortable: this } : null) : this.element[0] == r && this._isEmpty() ? { element: this.element, sortable: this, appendToBottom: !0 } : this.element[0] == r && this._isLastHidden() ? { element: o = this.items().eq(0), sortable: this, appendAfterHidden: !0 } : s ? this._searchConnectedTargets(r, i) : t }, _findElementUnderCursor: function (e) { var t = r.elementUnderCursor(e), n = e.sender; return i(n.hint[0], t) && (n.hint.hide(), (t = r.elementUnderCursor(e)) || (t = r.elementUnderCursor(e)), n.hint.show()), t }, _searchConnectedTargets: function (t, i) { var n, o, r, s, a = e(this.options.connectWith); for (s = 0; s < a.length; s++)if (n = a.eq(s).getKendoSortable(), e.contains(a[s], t)) { if (n) return o = n.items(), (r = o.filter(t)[0] || o.has(t)[0]) ? (n.placeholder = this.placeholder, { element: e(r), sortable: n }) : null } else if (a[s] == t) { if (n && n._isEmpty()) return { element: a.eq(s), sortable: n, appendToBottom: !0 }; if (this._isCursorAfterLast(n, i)) return { element: r = n.items().last(), sortable: n } } }, _isCursorAfterLast: function (e, t) { var i, n = e.items().last(), o = { left: t.x.location, top: t.y.location }; return (i = r.getOffset(n)).top += l(n), i.left += a(n), (this._isFloating(n) ? i.left - o.left : i.top - o.top) < 0 }, _movementByAxis: function (t, i, n, o) { var r, s = "x" === t ? i.left : i.top, a = n < 0 ? this.placeholder.prev() : this.placeholder.next(); a.length && !a.is(":visible") && (a = n < 0 ? a.prev() : a.next()), e.extend(o, { target: a }), (r = this._getElementCenter(a)) && (r = "x" === t ? r.left : r.top), a.length && n < 0 && s - r < 0 ? this._movePlaceholder({ element: a, sortable: this }, "prev", o) : a.length && n > 0 && s - r > 0 && this._movePlaceholder({ element: a, sortable: this }, "next", o) }, _movePlaceholder: function (e, t, i) { var n = this.placeholder; e.sortable.trigger(d, i) || (t ? "prev" === t ? e.element.before(n) : "next" === t && e.element.after(n) : e.element.append(n), e.sortable.trigger(u, i)) }, _setCursor: function () { var t, i = this.options.cursor; i && "auto" !== i && (t = e(document.body), this._originalCursorType = t.css("cursor"), t.css({ cursor: i }), this._cursorStylesheet || (this._cursorStylesheet = e("<style>* { cursor: " + i + " !important; }</style>")), this._cursorStylesheet.appendTo(t)) }, _resetCursor: function () { this._originalCursorType && (e(document.body).css("cursor", this._originalCursorType), this._originalCursorType = null, this._cursorStylesheet.remove()) }, _getElementCenter: function (e) { var t = e.length ? r.getOffset(e) : null; return t && (t.top += l(e) / 2, t.left += a(e) / 2), t }, _isFloating: function (e) { return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display")) }, _cancel: function () { this.draggedElement.show(), this.placeholder.remove() }, _items: function () { var e = this.options.filter; return e ? this.element.find(e) : this.element.children() }, indexOf: function (e) { var t = this._items(), i = this.placeholder, n = this.draggedElement; return i && e[0] == i[0] ? t.not(n).index(e) : t.not(i).index(e) }, items: function () { var e = this.placeholder, t = this._items(); return e && (t = t.not(e)), t }, _isEmpty: function () { return !this.items().length }, _isLastHidden: function () { return 1 === this.items().length && this.items().is(":hidden") } }); r.ui.plugin(_) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.selectable.min", ["kendo.core.min", "kendo.userevents.min"], function () { return function (e, t) { function i(e, t) { if (!e.is(":visible")) return !1; var i = o.getOffset(e), n = t.left + t.width, r = t.top + t.height; return i.right = i.left + o._outerWidth(e), i.bottom = i.top + o._outerHeight(e), !(i.left > n || i.right < t.left || i.top > r || i.bottom < t.top) } var n, o = window.kendo, r = o.ui.Widget, s = e.proxy, a = Math.abs, l = "aria-selected", c = "k-state-selected", d = "k-state-selecting", u = "k-selectable", h = "change", f = "k-state-unselecting", p = "input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up", m = o.support.browser.msie, g = !1; !function (e) { e('<div class="parent"><span /></div>').on("click", ">*", function () { g = !0 }).find("span").click().end().off() }(e), (n = r.extend({ init: function (t, i) { var n, a = this; r.fn.init.call(a, t, i), a._marquee = e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"), a._lastActive = null, a.element.addClass(u), a.relatedTarget = a.options.relatedTarget, n = a.options.multiple, this.options.aria && n && a.element.attr("aria-multiselectable", !0), a.userEvents = new o.UserEvents(a.element, { global: !0, allowSelection: !0, filter: (g ? "" : "." + u + " ") + a.options.filter, tap: s(a._tap, a) }), n && a.userEvents.bind("start", s(a._start, a)).bind("move", s(a._move, a)).bind("end", s(a._end, a)).bind("select", s(a._select, a)) }, events: [h], options: { name: "Selectable", filter: ">*", multiple: !1, relatedTarget: e.noop }, _isElement: function (e) { var t, i = this.element, n = i.length, o = !1; for (e = e[0], t = 0; t < n; t++)if (i[t] === e) { o = !0; break } return o }, _tap: function (t) { var i, n = e(t.target), o = this, r = t.event.ctrlKey || t.event.metaKey, s = o.options.multiple, a = s && t.event.shiftKey, l = t.event.which, d = t.event.button; !o._isElement(n.closest("." + u)) || l && 3 == l || d && 2 == d || this._allowSelection(t.event.target) && (i = n.hasClass(c), s && r || o.clear(), n = n.add(o.relatedTarget(n)), a ? o.selectRange(o._firstSelectee(), n) : (i && r ? (o._unselect(n), o._notify(h)) : o.value(n), o._lastActive = o._downTarget = n)) }, _start: function (i) { var n, o = this, r = e(i.target), s = r.hasClass(c), a = i.event.ctrlKey || i.event.metaKey; if (this._allowSelection(i.event.target)) { if (o._downTarget = r, !o._isElement(r.closest("." + u))) return o.userEvents.cancel(), t; o.options.useAllItems ? o._items = o.element.find(o.options.filter) : (n = r.closest(o.element), o._items = n.find(o.options.filter)), i.sender.capture(), o._marquee.appendTo(document.body).css({ left: i.x.client + 1, top: i.y.client + 1, width: 0, height: 0 }), a || o.clear(), r = r.add(o.relatedTarget(r)), s && (o._selectElement(r, !0), a && r.addClass(f)) } }, _move: function (e) { var t = { left: e.x.startLocation > e.x.location ? e.x.location : e.x.startLocation, top: e.y.startLocation > e.y.location ? e.y.location : e.y.startLocation, width: a(e.x.initialDelta), height: a(e.y.initialDelta) }; this._marquee.css(t), this._invalidateSelectables(t, e.event.ctrlKey || e.event.metaKey), e.preventDefault() }, _end: function () { var e, t = this; t._marquee.remove(), t._unselect(t.element.find(t.options.filter + "." + f)).removeClass(f), e = (e = t.element.find(t.options.filter + "." + d)).add(t.relatedTarget(e)), t.value(e), t._lastActive = t._downTarget, t._items = null }, _invalidateSelectables: function (e, t) { var n, o, r, s, a = this._downTarget[0], l = this._items; for (n = 0, o = l.length; n < o; n++)s = l.eq(n), r = s.add(this.relatedTarget(s)), i(s, e) ? s.hasClass(c) ? t && a !== s[0] && r.removeClass(c).addClass(f) : s.hasClass(d) || s.hasClass(f) || r.addClass(d) : s.hasClass(d) ? r.removeClass(d) : t && s.hasClass(f) && r.removeClass(f).addClass(c) }, value: function (e) { var i = this, n = s(i._selectElement, i); return e ? (e.each(function () { n(this) }), i._notify(h), t) : i.element.find(i.options.filter + "." + c) }, _firstSelectee: function () { var e, t = this; return null !== t._lastActive ? t._lastActive : (e = t.value()).length > 0 ? e[0] : t.element.find(t.options.filter)[0] }, _selectElement: function (t, i) { var n = e(t), o = !i && this._notify("select", { element: t }); n.removeClass(d), o || (n.addClass(c), this.options.aria && n.attr(l, !0)) }, _notify: function (e, t) { return t = t || {}, this.trigger(e, t) }, _unselect: function (e) { return e.removeClass(c), this.options.aria && e.attr(l, !1), e }, _select: function (t) { this._allowSelection(t.event.target) && (!m || m && !e(o._activeElement()).is(p)) && t.preventDefault() }, _allowSelection: function (t) { return !e(t).is(p) || (this.userEvents.cancel(), this._downTarget = null, !1) }, resetTouchEvents: function () { this.userEvents.cancel() }, clear: function () { var e = this.element.find(this.options.filter + "." + c); this._unselect(e) }, selectRange: function (t, i) { var n, o, r, s = this; for (s.clear(), s.element.length > 1 && (r = s.options.continuousItems()), r && r.length || (r = s.element.find(s.options.filter)), t = e.inArray(e(t)[0], r), i = e.inArray(e(i)[0], r), t > i && (o = t, t = i, i = o), s.options.useAllItems || (i += s.element.length - 1), n = t; n <= i; n++)s._selectElement(r[n]); s._notify(h) }, destroy: function () { var e = this; r.fn.destroy.call(e), e.element.off(".kendoSelectable"), e.userEvents.destroy(), e._marquee = e._lastActive = e.element = e.userEvents = null } })).parseOptions = function (e) { var t = "string" == typeof e && e.toLowerCase(); return { multiple: t && t.indexOf("multiple") > -1, cell: t && t.indexOf("cell") > -1 } }, o.ui.plugin(n) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.button.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.ui.Widget, n = e.proxy, o = t.keys, r = "click", s = ".kendoButton", a = "disabled", l = "k-state-focused", c = "k-state-selected", d = i.extend({ init: function (e, o) { var l = this; i.fn.init.call(l, e, o), e = l.wrapper = l.element, o = l.options, e.addClass("k-button").attr("role", "button"), o.enable = o.enable && !e.attr(a), l.enable(o.enable), l._tabindex(), l._graphics(), e.on(r + s, n(l._click, l)).on("focus" + s, n(l._focus, l)).on("blur" + s, n(l._blur, l)).on("keydown" + s, n(l._keydown, l)).on("keyup" + s, n(l._keyup, l)), t.notify(l) }, destroy: function () { this.wrapper.off(s), i.fn.destroy.call(this) }, events: [r], options: { name: "Button", icon: "", spriteCssClass: "", imageUrl: "", enable: !0 }, _isNativeButton: function () { return "button" == this.element.prop("tagName").toLowerCase() }, _click: function (e) { this.options.enable && this.trigger(r, { event: e }) && e.preventDefault() }, _focus: function () { this.options.enable && this.element.addClass(l) }, _blur: function () { this.element.removeClass(l) }, _keydown: function (e) { var t = this; t._isNativeButton() || e.keyCode != o.ENTER && e.keyCode != o.SPACEBAR || (e.keyCode == o.SPACEBAR && (e.preventDefault(), t.options.enable && t.element.addClass(c)), t._click(e)) }, _keyup: function () { this.element.removeClass(c) }, _graphics: function () { var t, i, n, o = this.element, r = this.options, s = r.icon, a = r.spriteCssClass, l = r.imageUrl; (a || l || s) && (n = !0, o.contents().filter(function () { return !e(this).hasClass("k-sprite") && !e(this).hasClass("k-icon") && !e(this).hasClass("k-image") }).each(function (t, i) { (1 == i.nodeType || 3 == i.nodeType && e.trim(i.nodeValue).length > 0) && (n = !1) }), o.addClass(n ? "k-button-icon" : "k-button-icontext")), s ? ((t = o.children("span.k-icon").first())[0] || (t = e('<span class="k-icon"></span>').prependTo(o)), t.addClass("k-i-" + s)) : a ? ((t = o.children("span.k-sprite").first())[0] || (t = e('<span class="k-sprite"></span>').prependTo(o)), t.addClass(a)) : l && ((i = o.children("img.k-image").first())[0] || (i = e('<img alt="icon" class="k-image" />').prependTo(o)), i.attr("src", l)) }, enable: function (e) { var t = this.element; void 0 === e && (e = !0), e = !!e, this.options.enable = e, t.toggleClass("k-state-disabled", !e).attr("aria-disabled", !e).attr(a, !e); try { t.blur() } catch (e) { } } }), t.ui.plugin(d), window.kendo; var e, t, i, n, o, r, s, a, l, c, d }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.pager.min", ["kendo.data.min"], function () { return function (e, t) { function i(e, t, i, n, o) { return e({ idx: t, text: i, ns: c.ns, numeric: n, title: o || "" }) } function n(e, t, i) { return w({ className: e.substring(1), text: t, wrapClassName: i || "" }) } function o(e, t, i, n) { e.find(t).parent().attr(c.attr("page"), i).attr("tabindex", -1).toggleClass("k-state-disabled", n) } function r(e, t) { o(e, f, 1, t <= 1) } function s(e, t) { o(e, m, Math.max(1, t - 1), t <= 1) } function a(e, t, i) { o(e, g, Math.min(i, t + 1), t >= i) } function l(e, t, i) { o(e, p, i, t >= i) } var c = window.kendo, d = c.ui, u = d.Widget, h = e.proxy, f = ".k-i-seek-w", p = ".k-i-seek-e", m = ".k-i-arrow-w", g = ".k-i-arrow-e", v = "change", _ = ".kendoPager", b = "click", w = c.template('<a href="\\#" aria-label="#=text#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #"></span></a>'), y = u.extend({ init: function (t, i) { var o, d, w, y, k = this; u.fn.init.call(k, t, i), i = k.options, k.dataSource = c.data.DataSource.create(i.dataSource), k.linkTemplate = c.template(k.options.linkTemplate), k.selectTemplate = c.template(k.options.selectTemplate), k.currentPageTemplate = c.template(k.options.currentPageTemplate), o = k.page(), d = k.totalPages(), k._refreshHandler = h(k.refresh, k), k.dataSource.bind(v, k._refreshHandler), i.previousNext && (k.element.find(f).length || (k.element.append(n(f, i.messages.first, "k-pager-first")), r(k.element, o)), k.element.find(m).length || (k.element.append(n(m, i.messages.previous)), s(k.element, o))), i.numeric && (k.list = k.element.find(".k-pager-numbers"), k.list.length || (k.list = e('<ul class="k-pager-numbers k-reset" />').appendTo(k.element))), i.input && (k.element.find(".k-pager-input").length || k.element.append('<span class="k-pager-input k-label">' + i.messages.page + '<input class="k-textbox">' + c.format(i.messages.of, d) + "</span>"), k.element.on("keydown" + _, ".k-pager-input input", h(k._keydown, k))), i.previousNext && (k.element.find(g).length || (k.element.append(n(g, i.messages.next)), a(k.element, o, d)), k.element.find(p).length || (k.element.append(n(p, i.messages.last, "k-pager-last")), l(k.element, o, d))), i.pageSizes && (k.element.find(".k-pager-sizes").length || (w = i.pageSizes.length ? i.pageSizes : ["all", 5, 10, 20], y = e.map(w, function (e) { return e.toLowerCase && "all" === e.toLowerCase() ? "<option value='all'>" + i.messages.allPages + "</option>" : "<option>" + e + "</option>" }), e('<span class="k-pager-sizes k-label"><select/>' + i.messages.itemsPerPage + "</span>").appendTo(k.element).find("select").html(y.join("")).end().appendTo(k.element)), k.element.find(".k-pager-sizes select").val(k.pageSize()), c.ui.DropDownList && k.element.find(".k-pager-sizes select").show().kendoDropDownList(), k.element.on(v + _, ".k-pager-sizes select", h(k._change, k))), i.refresh && (k.element.find(".k-pager-refresh").length || k.element.append('<a href="#" class="k-pager-refresh k-link" title="' + i.messages.refresh + '" aria-label="' + i.messages.refresh + '"><span class="k-icon k-i-reload"></span></a>'), k.element.on(b + _, ".k-pager-refresh", h(k._refreshClick, k))), i.info && (k.element.find(".k-pager-info").length || k.element.append('<span class="k-pager-info k-label" />')), k.element.on(b + _, "a", h(k._click, k)).addClass("k-pager-wrap k-widget k-floatwrap"), k.element.on(b + _, ".k-current-page", h(k._toggleActive, k)), i.autoBind && k.refresh(), c.notify(k) }, destroy: function () { var e = this; u.fn.destroy.call(e), e.element.off(_), e.dataSource.unbind(v, e._refreshHandler), e._refreshHandler = null, c.destroy(e.element), e.element = e.list = null }, events: [v], options: { name: "Pager", selectTemplate: '<li><span class="k-state-selected">#=text#</span></li>', currentPageTemplate: '<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>', linkTemplate: '<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>', buttonCount: 10, autoBind: !0, numeric: !0, info: !0, input: !1, previousNext: !0, pageSizes: !1, refresh: !1, messages: { allPages: "All", display: "{0} - {1} of {2} items", empty: "No items to display", page: "Page", of: "of {0}", itemsPerPage: "items per page", first: "Go to the first page", previous: "Go to the previous page", next: "Go to the next page", last: "Go to the last page", refresh: "Refresh", morePages: "More pages" } }, setDataSource: function (e) { var t = this; t.dataSource.unbind(v, t._refreshHandler), t.dataSource = t.options.dataSource = e, e.bind(v, t._refreshHandler), t.options.autoBind && e.fetch() }, refresh: function (e) { var t, n, o, d, u, h, f = this, p = 1, m = f.page(), g = "", v = f.options, _ = f.pageSize(), b = f.dataSource.total(), w = f.totalPages(), y = f.linkTemplate, k = v.buttonCount; if (!e || "itemchange" != e.action) { if (v.numeric) { for (m > k && (p = 0 === (o = m % k) ? m - k + 1 : m - o + 1), n = Math.min(p + k - 1, w), p > 1 && (g += i(y, p - 1, "...", !1, v.messages.morePages)), t = p; t <= n; t++)g += i(t == m ? f.selectTemplate : y, t, t, !0); n < w && (g += i(y, t, "...", !1, v.messages.morePages)), "" === g && (g = f.selectTemplate({ text: 0 })), g = this.currentPageTemplate({ text: m }) + g, f.list.removeClass("k-state-expanded").html(g) } v.info && (g = b > 0 ? c.format(v.messages.display, Math.min((m - 1) * _ + 1, b), Math.min(m * _, b), b) : v.messages.empty, f.element.find(".k-pager-info").html(g)), v.input && f.element.find(".k-pager-input").html(f.options.messages.page + '<input class="k-textbox" aria-label="' + m + '">' + c.format(v.messages.of, w)).find("input").val(m).attr("disabled", b < 1).toggleClass("k-state-disabled", b < 1), v.previousNext && (r(f.element, m), s(f.element, m), a(f.element, m, w), l(f.element, m, w)), v.pageSizes && (d = f.element.find(".k-pager-sizes option[value='all']").length > 0, u = d && _ === this.dataSource.total(), h = _, u && (_ = "all", h = v.messages.allPages), f.element.find(".k-pager-sizes select").val(_).attr("aria-label", _).filter("[" + c.attr("role") + "=dropdownlist]").kendoDropDownList("value", _).kendoDropDownList("text", h)) } }, _keydown: function (e) { if (e.keyCode === c.keys.ENTER) { var t = this.element.find(".k-pager-input").find("input"), i = parseInt(t.val(), 10); (isNaN(i) || i < 1 || i > this.totalPages()) && (i = this.page()), t.val(i), this.page(i) } }, _refreshClick: function (e) { e.preventDefault(), this.dataSource.read() }, _change: function (e) { var t = e.currentTarget.value, i = parseInt(t, 10), n = this.dataSource; isNaN(i) ? "all" == (t + "").toLowerCase() && n.pageSize(n.total()) : n.pageSize(i) }, _toggleActive: function () { this.list.toggleClass("k-state-expanded") }, _click: function (t) { var i = e(t.currentTarget); t.preventDefault(), i.is(".k-state-disabled") || this.page(i.attr(c.attr("page"))) }, totalPages: function () { return Math.ceil((this.dataSource.total() || 0) / (this.pageSize() || 1)) }, pageSize: function () { return this.dataSource.pageSize() || this.dataSource.total() }, page: function (e) { return e === t ? this.dataSource.total() > 0 ? this.dataSource.page() : 0 : (this.trigger("pageChange", { index: e }) || (this.dataSource.page(e), this.trigger(v, { index: e })), t) } }); d.plugin(y) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.notification.min", ["kendo.core.min", "kendo.popup.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.ui.Widget, o = e.proxy, r = e.extend, s = window.setTimeout, a = "click", l = "show", c = "hide", d = "k-notification", u = ".k-notification-wrap .k-i-close", h = "k-hiding", f = "info", p = "top", m = "left", g = "bottom", v = "right", _ = ".kendoNotification", b = '<div class="k-notification-wrap"><span class="k-icon k-i-#=typeIcon#" title="#=typeIcon#"></span>#=content#<span class="k-icon k-i-close" title="Hide"></span></div>', w = b.replace("#=content#", "#:content#"), y = n.extend({ init: function (t, o) { var r = this; n.fn.init.call(r, t, o), (o = r.options).appendTo && e(o.appendTo).is(t) || r.element.hide(), r._compileTemplates(o.templates), r._guid = "_" + i.guid(), r._isRtl = i.support.isRtl(t), r._compileStacking(o.stacking, o.position.top, o.position.left), i.notify(r) }, events: [l, c], options: { name: "Notification", position: { pinned: !0, top: null, left: null, bottom: 20, right: 20 }, stacking: "default", hideOnClick: !0, button: !1, allowHideAfter: 0, autoHideAfter: 5e3, appendTo: null, width: null, height: null, templates: [], animation: { open: { effects: "fade:in", duration: 300 }, close: { effects: "fade:out", duration: 600, hide: !0 } } }, _compileTemplates: function (t) { var n = this, o = i.template; n._compiled = {}, e.each(t, function (t, i) { n._compiled[i.type] = o(i.template || e("#" + i.templateId).html()) }), n._defaultCompiled = o(b), n._safeCompiled = o(w) }, _getCompiled: function (e, t) { var i = t ? this._safeCompiled : this._defaultCompiled; return e && this._compiled[e] || i }, _compileStacking: function (e, t, i) { var n, o, r = this, s = { paddingTop: 0, paddingRight: 0, paddingBottom: 0, paddingLeft: 0 }, a = null !== i ? m : v; switch (e) { case "down": n = g + " " + a, o = p + " " + a, delete s.paddingBottom; break; case v: n = p + " " + v, o = p + " " + m, delete s.paddingRight; break; case m: n = p + " " + m, o = p + " " + v, delete s.paddingLeft; break; case "up": n = p + " " + a, o = g + " " + a, delete s.paddingTop; break; default: null !== t ? (n = g + " " + a, o = p + " " + a, delete s.paddingBottom) : (n = p + " " + a, o = g + " " + a, delete s.paddingTop) }r._popupOrigin = n, r._popupPosition = o, r._popupPaddings = s }, _attachPopupEvents: function (e, t) { function i(e) { e.on(a + _, function () { o._hidePopup(t) }) } var n, o = this, r = e.allowHideAfter, l = !isNaN(r) && r > 0; e.hideOnClick ? t.bind("activate", function () { l ? s(function () { i(t.element) }, r) : i(t.element) }) : e.button && (n = t.element.find(u), l ? s(function () { i(n) }, r) : i(n)) }, _showPopup: function (t, n) { var o, a, l = this, c = n.autoHideAfter, d = n.position.left, f = n.position.top; a = e("." + l._guid + ":not(." + h + ")").last(), o = new i.ui.Popup(t, { anchor: a[0] ? a : document.body, origin: l._popupOrigin, position: l._popupPosition, animation: n.animation, modal: !0, collision: "", isRtl: l._isRtl, close: function () { l._triggerHide(this.element) }, deactivate: function (e) { e.sender.element.off(_), e.sender.element.find(u).off(_), e.sender.destroy() } }), l._attachPopupEvents(n, o), a[0] ? o.open() : (null === d && (d = e(window).width() - t.width() - n.position.right), null === f && (f = e(window).height() - t.height() - n.position.bottom), o.open(d, f)), o.wrapper.addClass(l._guid).css(r({ margin: 0, zIndex: 10050 }, l._popupPaddings)), n.position.pinned ? (o.wrapper.css("position", "fixed"), a[0] && l._togglePin(o.wrapper, !0)) : a[0] || l._togglePin(o.wrapper, !1), c > 0 && s(function () { l._hidePopup(o) }, c) }, _hidePopup: function (e) { e.wrapper.addClass(h), e.close() }, _togglePin: function (t, i) { var n = e(window), o = i ? -1 : 1; t.css({ top: parseInt(t.css(p), 10) + o * n.scrollTop(), left: parseInt(t.css(m), 10) + o * n.scrollLeft() }) }, _attachStaticEvents: function (e, t) { function i(e) { e.on(a + _, o(n._hideStatic, n, t)) } var n = this, r = e.allowHideAfter, l = !isNaN(r) && r > 0; e.hideOnClick ? l ? s(function () { i(t) }, r) : i(t) : e.button && (l ? s(function () { i(t.find(u)) }, r) : i(t.find(u))) }, _showStatic: function (e, t) { var i = this, n = t.autoHideAfter, o = t.animation, r = "up" == t.stacking || t.stacking == m ? "prependTo" : "appendTo"; e.addClass(i._guid)[r](t.appendTo).hide().kendoAnimate(o.open || !1), i._attachStaticEvents(t, e), n > 0 && s(function () { i._hideStatic(e) }, n) }, _hideStatic: function (e) { e.kendoAnimate(r(this.options.animation.close || !1, { complete: function () { e.off(_).find(u).off(_), e.remove() } })), this._triggerHide(e) }, _triggerHide: function (e) { this.trigger(c, { element: e }), this.angular("cleanup", function () { return { elements: e } }) }, show: function (n, o, s) { var a, c, u = this, h = u.options, p = e('<div class="k-widget k-notification"></div>'); return o || (o = f), null !== n && n !== t && "" !== n && (i.isFunction(n) && (n = n()), c = { typeIcon: o, content: "" }, a = e.isPlainObject(n) ? r(c, n) : r(c, { content: n }), p.addClass(d + "-" + o).toggleClass(d + "-button", h.button).attr("data-role", "alert").css({ width: h.width, height: h.height }).append(u._getCompiled(o, s)(a)), u.angular("compile", function () { return { elements: p, data: [{ dataItem: a }] } }), e(h.appendTo)[0] ? u._showStatic(p, h) : u._showPopup(p, h), u.trigger(l, { element: p })), u }, showText: function (e, t) { this.show(e, t, !0) }, info: function (e) { return this.show(e, f) }, success: function (e) { return this.show(e, "success") }, warning: function (e) { return this.show(e, "warning") }, error: function (e) { return this.show(e, "error") }, hide: function () { var t = this, i = t.getNotifications(); return i.each(t.options.appendTo ? function (i, n) { t._hideStatic(e(n)) } : function (i, n) { var o = e(n).data("kendoPopup"); o && t._hidePopup(o) }), t }, getNotifications: function () { var t = e("." + this._guid + ":not(." + h + ")"); return this.options.appendTo ? t : t.children("." + d) }, setOptions: function (e) { var i, o = this; n.fn.setOptions.call(o, e), i = o.options, e.templates !== t && o._compileTemplates(i.templates), e.stacking === t && e.position === t || o._compileStacking(i.stacking, i.position.top, i.position.left) }, destroy: function () { n.fn.destroy.call(this), this.getNotifications().off(_).find(u).off(_) } }), i.ui.plugin(y), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.tooltip.min", ["kendo.core.min", "kendo.popup.min"], function () { return function (e, t) { function i(e) { for (; e.length;)n(e), e = e.parent() } function n(e) { var t = e.data(s.ns + "title"); t && (e.attr("title", t), e.removeData(s.ns + "title")) } function o(e) { var t = e.attr("title"); t && (e.data(s.ns + "title", t), e.attr("title", "")) } function r(e) { for (; e.length && !e.is("body");)o(e), e = e.parent() } var s = window.kendo, a = s.ui.Widget, l = s.ui.Popup, c = s.isFunction, d = e.isPlainObject, u = e.extend, h = e.proxy, f = e(document), p = s.isLocalUrl, m = "_tt_active", g = "aria-describedby", v = "show", _ = "hide", b = "error", w = "contentLoad", y = "requestStart", k = "k-content-frame", x = s.template("<iframe frameborder='0' class='" + k + "' src='#= content.url #'>This page requires frames in order to show content</iframe>"), C = ".kendoTooltip", S = { bottom: { origin: "bottom center", position: "top center" }, top: { origin: "top center", position: "bottom center" }, left: { origin: "center left", position: "center right", collision: "fit flip" }, right: { origin: "center right", position: "center left", collision: "fit flip" }, center: { position: "center center", origin: "center center" } }, T = { top: "bottom", bottom: "top", left: "right", right: "left", center: "center" }, D = { bottom: "n", top: "s", left: "e", right: "w", center: "n" }, A = { horizontal: { offset: "top", size: "outerHeight" }, vertical: { offset: "left", size: "outerWidth" } }, E = a.extend({ init: function (e, t) { var i, n = this; a.fn.init.call(n, e, t), i = n.options.position.match(/left|right/) ? "horizontal" : "vertical", n.dimensions = A[i], n._documentKeyDownHandler = h(n._documentKeyDown, n), n.element.on(n.options.showOn + C, n.options.filter, h(n._showOn, n)).on("mouseenter" + C, n.options.filter, h(n._mouseenter, n)), this.options.autoHide && n.element.on("mouseleave" + C, n.options.filter, h(n._mouseleave, n)) }, options: { name: "Tooltip", filter: "", content: function (e) { return e.target.data(s.ns + "title") }, showAfter: 100, callout: !0, position: "bottom", showOn: "mouseenter", autoHide: !0, width: null, height: null, animation: { open: { effects: "fade:in", duration: 0 }, close: { effects: "fade:out", duration: 40, hide: !0 } } }, events: [v, _, w, b, y], _mouseenter: function (t) { r(e(t.currentTarget)) }, _showOn: function (t) { var i = this, n = e(t.currentTarget); i.options.showOn && i.options.showOn.match(/click|focus/) ? i._show(n) : (clearTimeout(i.timeout), i.timeout = setTimeout(function () { i._show(n) }, i.options.showAfter)) }, _appendContent: function (e) { var t, i = this, n = i.options.content, o = i.content, r = i.options.iframe; d(n) && n.url ? ("iframe" in i.options || (r = !p(n.url)), i.trigger(y, { options: n, target: e }), r ? (o.hide(), (t = o.find("." + k)[0]) ? t.src = n.url || t.src : o.html(x({ content: n })), o.find("." + k).off("load" + C).on("load" + C, function () { i.trigger(w), o.show() })) : (o.empty(), s.ui.progress(o, !0), i._ajaxRequest(n))) : n && c(n) ? (n = n({ sender: this, target: e }), o.html(n || "")) : o.html(n), i.angular("compile", function () { return { elements: o } }) }, _ajaxRequest: function (e) { var t = this; jQuery.ajax(u({ type: "GET", dataType: "html", cache: !1, error: function (e, i) { s.ui.progress(t.content, !1), t.trigger(b, { status: i, xhr: e }) }, success: h(function (e) { s.ui.progress(t.content, !1), t.content.html(e), t.trigger(w) }, t) }, e)) }, _documentKeyDown: function (e) { e.keyCode === s.keys.ESC && this.hide() }, refresh: function () { var e = this.popup; e && e.options.anchor && this._appendContent(e.options.anchor) }, hide: function () { this.popup && this.popup.close() }, show: function (e) { r(e = e || this.element), this._show(e) }, _show: function (e) { var t = this, n = t.target(); t.popup || t._initPopup(), n && n[0] != e[0] && (t.popup.close(), t.popup.element.kendoStop(!0, !0)), n && n[0] == e[0] || (t._appendContent(e), t.popup.options.anchor = e), t.popup.one("deactivate", function () { i(e), e.removeAttr(g), this.element.removeAttr("id").attr("aria-hidden", !0), f.off("keydown" + C, t._documentKeyDownHandler) }), t.popup.open() }, _initPopup: function () { var t = this, i = t.options, n = e(s.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({ callout: i.callout && "center" !== i.position, dir: D[i.position], autoHide: i.autoHide })); t.popup = new l(n, u({ activate: function () { var e = this.options.anchor, n = e[0].id || t.element[0].id; n && (e.attr(g, n + m), this.element.attr("id", n + m)), i.callout && t._positionCallout(), this.element.removeAttr("aria-hidden"), f.on("keydown" + C, t._documentKeyDownHandler), t.trigger(v) }, close: function () { t.trigger(_) }, copyAnchorStyles: !1, animation: i.animation }, S[i.position])), n.css({ width: i.width, height: i.height }), t.content = n.find(".k-tooltip-content"), t.arrow = n.find(".k-callout"), i.autoHide ? n.on("mouseleave" + C, h(t._mouseleave, t)) : n.on("click" + C, ".k-tooltip-button", h(t._closeButtonClick, t)) }, _closeButtonClick: function (e) { e.preventDefault(), this.hide() }, _mouseleave: function (t) { if (this.popup) { var n = e(t.currentTarget), o = n.offset(), r = t.pageX, a = t.pageY; if (o.right = o.left + s._outerWidth(n), o.bottom = o.top + s._outerHeight(n), r > o.left && r < o.right && a > o.top && a < o.bottom) return; this.popup.close() } else i(e(t.currentTarget)); clearTimeout(this.timeout) }, _positionCallout: function () { var t = this, i = t.options.position, n = t.dimensions, o = n.offset, r = t.popup, s = r.options.anchor, a = e(s).offset(), l = parseInt(t.arrow.css("border-top-width"), 10), c = e(r.element).offset(), d = D[r.flipped ? T[i] : i], u = a[o] - c[o] + e(s)[n.size]() / 2 - l; t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-" + d).css(o, u) }, target: function () { return this.popup ? this.popup.options.anchor : null }, destroy: function () { var e = this.popup; e && (e.element.off(C), e.destroy()), clearTimeout(this.timeout), this.element.off(C), f.off("keydown" + C, this._documentKeyDownHandler), a.fn.destroy.call(this) } }); s.ui.plugin(E) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.list.min", ["kendo.data.min", "kendo.popup.min"], function () { return function (e, t) { function i(e, i) { return e !== t && "" !== e && null !== e && ("boolean" === i ? e = !!e : "number" === i ? e = +e : "string" === i && (e = "" + e)), e } function n(e) { return e[e.length - 1] } function o(e) { var t = e.selectedIndex; return t > -1 ? e.options[t] : {} } function r(t) { return !(!t || e.isEmptyObject(t) || t.filters && !t.filters.length) } function s(t, i) { var n, o = !1; return t.filters && (n = e.grep(t.filters, function (e) { return o = s(e, i), e.filters ? e.filters.length : e.field != i }), o || t.filters.length === n.length || (o = !0), t.filters = n), o } var a, l, c = window.kendo, d = c.ui, u = c._outerWidth, h = c._outerHeight, f = d.Widget, p = c.keys, m = c.support, g = c.htmlEncode, v = c._activeElement, _ = c.data.ObservableArray, b = "id", w = "change", y = "k-state-focused", k = "k-state-hover", x = "k-i-loading", C = "k-hidden", S = ".k-group-header", T = "open", D = "close", A = "cascade", E = "select", I = "selected", M = "requestStart", R = "requestEnd", F = "width", z = e.extend, P = e.proxy, B = e.isArray, L = m.browser, H = L.msie, N = H && L.version < 9, O = /"/g, V = { ComboBox: "DropDownList", DropDownList: "ComboBox" }, U = c.ui.DataBoundWidget.extend({ init: function (t, i) { var n, o = this, r = o.ns; f.fn.init.call(o, t, i), t = o.element, i = o.options, o._isSelect = t.is(E), o._isSelect && o.element[0].length && (i.dataSource || (i.dataTextField = i.dataTextField || "text", i.dataValueField = i.dataValueField || "value")), o.ul = e('<ul unselectable="on" class="k-list k-reset"/>').attr({ tabIndex: -1, "aria-hidden": !0 }), o.list = e("<div class='k-list-container'/>").append(o.ul).on("mousedown" + r, P(o._listMousedown, o)), (n = t.attr(b)) && (o.list.attr(b, n + "-list"), o.ul.attr(b, n + "_listbox")), o._header(), o._noData(), o._footer(), o._accessors(), o._initValue() }, options: { valuePrimitive: !1, footerTemplate: "", headerTemplate: "", noDataTemplate: "No data found." }, setOptions: function (e) { f.fn.setOptions.call(this, e), e && e.enable !== t && (e.enabled = e.enable), this._header(), this._noData(), this._footer(), this._renderFooter(), this._renderNoData() }, focus: function () { this._focused.focus() }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, _listOptions: function (t) { var i = this, n = i.options, o = n.virtual, r = P(i._listBound, i); return o = "object" == typeof o ? o : {}, (t = e.extend({ autoBind: !1, selectable: !0, dataSource: i.dataSource, click: P(i._click, i), change: P(i._listChange, i), activate: P(i._activateItem, i), deactivate: P(i._deactivateItem, i), dataBinding: function () { i.trigger("dataBinding") }, dataBound: r, height: n.height, dataValueField: n.dataValueField, dataTextField: n.dataTextField, groupTemplate: n.groupTemplate, fixedGroupTemplate: n.fixedGroupTemplate, template: n.template }, t, o)).template || (t.template = "#:" + c.expr(t.dataTextField, "data") + "#"), n.$angular && (t.$angular = n.$angular), t }, _initList: function () { var e = this, t = e._listOptions({ selectedItemChange: P(e._listChange, e) }); e.listView = e.options.virtual ? new c.ui.VirtualList(e.ul, t) : new c.ui.StaticList(e.ul, t), e.listView.bind("listBound", P(e._listBound, e)), e._setListValue() }, _setListValue: function (e) { (e = e || this.options.value) !== t && this.listView.value(e).done(P(this._updateSelectionState, this)) }, _updateSelectionState: e.noop, _listMousedown: function (e) { this.filterInput && this.filterInput[0] === e.target || e.preventDefault() }, _isFilterEnabled: function () { var e = this.options.filter; return e && "none" !== e }, _hideClear: function () { this._clear && this._clear.addClass(C) }, _showClear: function () { this._clear && this._clear.removeClass(C) }, _clearValue: function () { this._clearText(), this._accessor(""), this.listView.value([]), this._isFilterEnabled() && !this.options.enforceMinLength && this._filter({ word: "", open: !1 }), this._change() }, _clearText: function () { this.text("") }, _clearFilter: function () { this.options.virtual || this.listView.bound(!1), this._filterSource() }, _filterSource: function (e, t) { var i, n, o = this, a = o.options, l = o.dataSource, c = z({}, l.filter() || {}), d = e || c.filters && c.filters.length && !e, u = s(c, a.dataTextField); (e || u) && o.trigger("filtering", { filter: e }) || (i = { filters: [], logic: "and" }, r(e) && i.filters.push(e), r(c) && (i.logic === c.logic ? i.filters = i.filters.concat(c.filters) : i.filters.push(c)), o._cascading && this.listView.setDSFilter(i), n = z({}, { page: d ? 1 : l.page(), pageSize: d ? l.options.pageSize : l.pageSize(), sort: l.sort(), filter: l.filter(), group: l.group(), aggregate: l.aggregate() }, { filter: i }), l[t ? "read" : "query"](l._mergeState(n))) }, _angularElement: function (e, t) { e && this.angular(t, function () { return { elements: e } }) }, _noData: function () { var i = e(this.noData), n = this.options.noDataTemplate; return this.angular("cleanup", function () { return { elements: i } }), c.destroy(i), i.remove(), n ? (this.noData = e('<div class="k-nodata" style="display:none"><div></div></div>').appendTo(this.list), this.noDataTemplate = "function" != typeof n ? c.template(n) : n, t) : (this.noData = null, t) }, _renderNoData: function () { var e = this.noData; e && (this._angularElement(e, "cleanup"), e.children(":first").html(this.noDataTemplate({ instance: this })), this._angularElement(e, "compile")) }, _toggleNoData: function (t) { e(this.noData).toggle(t) }, _toggleHeader: function (e) { var t = this.listView.content.prev(S); t.toggle(e) }, _footer: function () { var i = e(this.footer), n = this.options.footerTemplate; return this._angularElement(i, "cleanup"), c.destroy(i), i.remove(), n ? (this.footer = e('<div class="k-footer"></div>').appendTo(this.list), this.footerTemplate = "function" != typeof n ? c.template(n) : n, t) : (this.footer = null, t) }, _renderFooter: function () { var e = this.footer; e && (this._angularElement(e, "cleanup"), e.html(this.footerTemplate({ instance: this })), this._angularElement(e, "compile")) }, _header: function () { var i, n = e(this.header), o = this.options.headerTemplate; return this._angularElement(n, "cleanup"), c.destroy(n), n.remove(), o ? (i = "function" != typeof o ? c.template(o) : o, n = e(i({})), this.header = n[0] ? n : null, this.list.prepend(n), this._angularElement(this.header, "compile"), t) : (this.header = null, t) }, _allowOpening: function () { return this.options.noDataTemplate || this.dataSource.flatView().length }, _initValue: function () { var e = this, t = e.options.value; null !== t ? e.element.val(t) : (t = e._accessor(), e.options.value = t), e._old = t }, _ignoreCase: function () { var e, t = this, i = t.dataSource.reader.model; i && i.fields && ((e = i.fields[t.options.dataTextField]) && e.type && "string" !== e.type && (t.options.ignoreCase = !1)) }, _focus: function (e) { return this.listView.focus(e) }, _filter: function (e) { var t = this, i = t.options, n = i.ignoreCase, o = i.dataTextField, r = { value: n ? e.word.toLowerCase() : e.word, field: o, operator: i.filter, ignoreCase: n }; t._open = e.open, t._filterSource(r) }, search: function (e) { var t = this.options; e = "string" == typeof e ? e : this._inputValue(), clearTimeout(this._typingTimeout), (!t.enforceMinLength && !e.length || e.length >= t.minLength) && (this._state = "filter", this._isFilterEnabled() ? this._filter({ word: e, open: !0 }) : this._searchByWord(e)) }, current: function (e) { return this._focus(e) }, items: function () { return this.ul[0].children }, destroy: function () { var e = this, t = e.ns; f.fn.destroy.call(e), e._unbindDataSource(), e.listView.destroy(), e.list.off(t), e.popup.destroy(), e._form && e._form.off("reset", e._resetHandler) }, dataItem: function (i) { var n = this; if (i === t) return n.listView.selectedDataItems()[0]; if ("number" != typeof i) { if (n.options.virtual) return n.dataSource.getByUid(e(i).data("uid")); i = e(n.items()).index(i) } return n.dataSource.flatView()[i] }, _activateItem: function () { var e = this.listView.focus(); e && this._focused.add(this.filterInput).attr("aria-activedescendant", e.attr("id")) }, _deactivateItem: function () { this._focused.add(this.filterInput).removeAttr("aria-activedescendant") }, _accessors: function () { var e = this, t = e.element, i = e.options, n = c.getter, o = t.attr(c.attr("text-field")), r = t.attr(c.attr("value-field")); !i.dataTextField && o && (i.dataTextField = o), !i.dataValueField && r && (i.dataValueField = r), e._text = n(i.dataTextField), e._value = n(i.dataValueField) }, _aria: function (e) { var i = this, n = i.options, o = i._focused.add(i.filterInput); n.suggest !== t && o.attr("aria-autocomplete", n.suggest ? "both" : "list"), e = e ? e + " " + i.ul[0].id : i.ul[0].id, o.attr("aria-owns", e), i.ul.attr("aria-live", i._isFilterEnabled() ? "polite" : "off"), i._ariaLabel() }, _ariaLabel: function () { var t, i = this, n = i._focused, o = i.element, r = o.attr("id"), s = e("label[for='" + r + "']"), a = o.attr("aria-label"), l = o.attr("aria-labelledby"); n !== o && (a ? n.attr("aria-label", a) : l ? n.attr("aria-labelledby", l) : s.length && (t = s.attr("id") || i._generateLabelId(s, r), n.attr("aria-labelledby", t))) }, _generateLabelId: function (e, t) { var i = t + "_label"; return e.attr("id", i), i }, _blur: function () { this._change(), this.close() }, _change: function () { var e, n = this, o = n.selectedIndex, r = n.options.value, s = n.value(); n._isSelect && !n.listView.bound() && r && (s = r), s !== i(n._old, typeof s) ? e = !0 : o !== t && o !== n._oldIndex && (e = !0), e && (n._old = s, n._oldIndex = o, n._typing || n.element.trigger(w), n.trigger(w)), n.typing = !1 }, _data: function () { return this.dataSource.view() }, _enable: function () { var e = this, i = e.options, n = e.element.is("[disabled]"); i.enable !== t && (i.enabled = i.enable), !i.enabled || n ? e.enable(!1) : e.readonly(e.element.is("[readonly]")) }, _dataValue: function (e) { var i = this._value(e); return i === t && (i = this._text(e)), i }, _offsetHeight: function () { var t = 0, i = this.listView.content.prevAll(":visible"); return i.each(function () { var i = e(this); t += h(i) }), t }, _height: function (i) { var n, o, r, s = this, a = s.list, l = s.options.height, c = s.popup.visible(); if (i || s.options.noDataTemplate) { if (o = a.add(a.parent(".k-animation-container")).show(), !a.is(":visible")) return o.hide(), t; l = s.listView.content[0].scrollHeight > l ? l : "auto", o.height(l), "auto" !== l && (n = s._offsetHeight(), r = h(e(s.footer)) || 0, l = l - n - r), s.listView.content.height(l), c || o.hide() } return l }, _adjustListWidth: function () { var e, t, i = this.list, n = i[0].style.width, o = this.wrapper; if (i.data(F) || !n) return e = window.getComputedStyle ? window.getComputedStyle(o[0], null) : 0, t = parseFloat(e && e.width) || u(o), e && L.msie && (t += parseFloat(e.paddingLeft) + parseFloat(e.paddingRight) + parseFloat(e.borderLeftWidth) + parseFloat(e.borderRightWidth)), n = "border-box" !== i.css("box-sizing") ? t - (u(i) - i.width()) : t, i.css({ fontFamily: o.css("font-family"), width: this.options.autoWidth ? "auto" : n, minWidth: n }).data(F, n), !0 }, _openHandler: function (e) { this._adjustListWidth(), this.trigger(T) ? e.preventDefault() : (this._focused.attr("aria-expanded", !0), this.ul.attr("aria-hidden", !1)) }, _closeHandler: function (e) { this.trigger(D) ? e.preventDefault() : (this._focused.attr("aria-expanded", !1), this.ul.attr("aria-hidden", !0)) }, _focusItem: function () { var e = this.listView, i = !e.focus(), o = n(e.select()); o === t && this.options.highlightFirst && i && (o = 0), o !== t ? e.focus(o) : i && e.scrollToIndex(0) }, _calculateGroupPadding: function (e) { var t = this.ul.children(".k-first:first"), i = this.listView.content.prev(S), n = 0; i[0] && "none" !== i[0].style.display && ("auto" !== e && (n = c.support.scrollbar()), n += parseFloat(t.css("border-right-width"), 10) + parseFloat(t.children(".k-group").css("padding-right"), 10), i.css("padding-right", n)) }, _calculatePopupHeight: function (e) { var t = this._height(this.dataSource.flatView().length || e); this._calculateGroupPadding(t) }, _resizePopup: function (e) { this.options.virtual || (this.popup.element.is(":visible") ? this._calculatePopupHeight(e) : this.popup.one("open", function (e) { return P(function () { this._calculatePopupHeight(e) }, this) }.call(this, e))) }, _popup: function () { var e = this; e.popup = new d.Popup(e.list, z({}, e.options.popup, { anchor: e.wrapper, open: P(e._openHandler, e), close: P(e._closeHandler, e), animation: e.options.animation, isRtl: m.isRtl(e.wrapper) })) }, _makeUnselectable: function () { N && this.list.find("*").not(".k-textbox").attr("unselectable", "on") }, _toggleHover: function (t) { e(t.currentTarget).toggleClass(k, "mouseenter" === t.type) }, _toggle: function (e, i) { var n = this, o = m.mobileOS && (m.touch || m.MSPointers || m.pointers); e = e !== t ? e : !n.popup.visible(), i || o || n._focused[0] === v() || (n._prevent = !0, n._focused.focus(), n._prevent = !1), n[e ? T : D]() }, _triggerCascade: function () { var e = this; e._cascadeTriggered && e._old === e.value() && e._oldIndex === e.selectedIndex || (e._cascadeTriggered = !0, e.trigger(A, { userTriggered: e._userTriggered })) }, _triggerChange: function () { this._valueBeforeCascade !== this.value() && this.trigger(w) }, _unbindDataSource: function () { var e = this; e.dataSource.unbind(M, e._requestStartHandler).unbind(R, e._requestEndHandler).unbind("error", e._errorHandler) }, requireValueMapper: function (e, t) { var i = (e.value instanceof Array ? e.value.length : e.value) || (t instanceof Array ? t.length : t); if (i && e.virtual && "function" != typeof e.virtual.valueMapper) throw Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function") } }); z(U, { inArray: function (e, t) { var i, n, o = t.children; if (!e || e.parentNode !== t) return -1; for (i = 0, n = o.length; i < n; i++)if (e === o[i]) return i; return -1 }, unifyType: i }), c.ui.List = U, d.Select = U.extend({ init: function (e, t) { U.fn.init.call(this, e, t), this._initial = this.element.val() }, setDataSource: function (e) { var t, i = this; i.options.dataSource = e, i._dataSource(), i.listView.bound() && (i._initialIndex = null), i.listView.setDataSource(i.dataSource), i.options.autoBind && i.dataSource.fetch(), (t = i._parentWidget()) && i._cascadeSelect(t) }, close: function () { this.popup.close() }, select: function (e) { var i = this; return e === t ? i.selectedIndex : i._select(e).done(function () { i._old = i._accessor(), i._oldIndex = i.selectedIndex }) }, _accessor: function (e, t) { return this[this._isSelect ? "_accessorSelect" : "_accessorInput"](e, t) }, _accessorInput: function (e) { var i = this.element[0]; return e === t ? i.value : (null === e && (e = ""), i.value = e, t) }, _accessorSelect: function (e, i) { var n = this.element[0]; return e === t ? o(n).value || "" : (o(n).selected = !1, i === t && (i = -1), null !== e && "" !== e && -1 == i ? this._custom(e) : e ? n.value = e : n.selectedIndex = i, t) }, _custom: function (t) { var i = this, n = i.element, o = i._customOption; o || (o = e("<option/>"), i._customOption = o, n.append(o)), o.text(t), o[0].selected = !0 }, _hideBusy: function () { var e = this; clearTimeout(e._busy), e._arrowIcon.removeClass(x), e._focused.attr("aria-busy", !1), e._busy = null, e._showClear() }, _showBusy: function () { var e = this; e._request = !0, e._busy || (e._busy = setTimeout(function () { e._arrowIcon && (e._focused.attr("aria-busy", !0), e._arrowIcon.addClass(x), e._hideClear()) }, 100)) }, _requestEnd: function () { this._request = !1, this._hideBusy() }, _dataSource: function () { var t, i = this, n = i.element, o = i.options, r = o.dataSource || {}; r = e.isArray(r) ? { data: r } : r, i._isSelect && ((t = n[0].selectedIndex) > -1 && (o.index = t), r.select = n, r.fields = [{ field: o.dataTextField }, { field: o.dataValueField }]), i.dataSource ? i._unbindDataSource() : (i._requestStartHandler = P(i._showBusy, i), i._requestEndHandler = P(i._requestEnd, i), i._errorHandler = P(i._hideBusy, i)), i.dataSource = c.data.DataSource.create(r).bind(M, i._requestStartHandler).bind(R, i._requestEndHandler).bind("error", i._errorHandler) }, _firstItem: function () { this.listView.focusFirst() }, _lastItem: function () { this.listView.focusLast() }, _nextItem: function () { this.listView.focusNext() }, _prevItem: function () { this.listView.focusPrev() }, _move: function (e) { var i, n, o, r, s, a, l = this, c = l.listView, d = e.keyCode, u = d === p.DOWN; if (d === p.UP || u) { if (e.altKey) l.toggle(u); else { if (!c.bound()) return l._fetch || (l.dataSource.one(w, function () { l._fetch = !1, l._move(e) }), l._fetch = !0, l._filterSource()), e.preventDefault(), !0; if (o = l._focus(), l._fetch || o && !o.hasClass("k-state-selected") || (u ? (l._nextItem(), l._focus() || l._lastItem()) : (l._prevItem(), l._focus() || l._firstItem())), i = c.dataItemByIndex(c.getElementIndex(l._focus())), l.trigger(E, { dataItem: i, item: l._focus() })) return l._focus(o), t; l._select(l._focus(), !0).done(function () { l.popup.visible() || l._blur() }) } e.preventDefault(), n = !0 } else if (d === p.ENTER || d === p.TAB) { if (l.popup.visible() && e.preventDefault(), o = l._focus(), i = l.dataItem(), l.popup.visible() || i && l.text() === l._text(i) || (o = null), r = l.filterInput && l.filterInput[0] === v(), o) { if (i = c.dataItemByIndex(c.getElementIndex(o)), s = !0, i && (s = l._value(i) !== U.unifyType(l.value(), typeof l._value(i))), s && l.trigger(E, { dataItem: i, item: o })) return; l._select(o) } else l.input && (l._accessor(l.input.val()), l.listView.value(l.input.val())); l._focusElement && l._focusElement(l.wrapper), r && d === p.TAB ? l.wrapper.focusout() : l._blur(), l.close(), n = !0 } else d === p.ESC ? (l.popup.visible() && e.preventDefault(), l.close(), n = !0) : !l.popup.visible() || d !== p.PAGEDOWN && d !== p.PAGEUP || (e.preventDefault(), a = d === p.PAGEDOWN ? 1 : -1, c.scrollWith(a * c.screenHeight()), n = !0); return n }, _fetchData: function () { var e = this, t = !!e.dataSource.view().length; e._request || e.options.cascadeFrom || e.listView.bound() || e._fetch || t || (e._fetch = !0, e.dataSource.fetch().done(function () { e._fetch = !1 })) }, _options: function (e, i, n) { var r, s, a, l, c = this, d = c.element, u = d[0], h = e.length, f = "", p = 0; for (i && (f = i); p < h; p++)r = "<option", s = e[p], a = c._text(s), (l = c._value(s)) !== t && (-1 !== (l += "").indexOf('"') && (l = l.replace(O, "&quot;")), r += ' value="' + l + '"'), r += ">", a !== t && (r += g(a)), f += r += "</option>"; d.html(f), n !== t && (u.value = n, u.value && !n && (u.selectedIndex = -1)), -1 !== u.selectedIndex && ((r = o(u)) && r.setAttribute(I, I)) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { setTimeout(function () { t.value(t._initial) }) }, t._form = o.on("reset", t._resetHandler)) }, _parentWidget: function () { var t, i, n = this.options.name; if (this.options.cascadeFrom) return t = e("#" + this.options.cascadeFrom), (i = t.data("kendo" + n)) || (i = t.data("kendo" + V[n])), i }, _cascade: function () { var e, t = this, i = t.options, n = i.cascadeFrom; if (n) { if (!(e = t._parentWidget())) return; t._cascadeHandlerProxy = P(t._cascadeHandler, t), t._cascadeFilterRequests = [], i.autoBind = !1, e.bind("set", function () { t.one("set", function (e) { t._selectedValue = e.value }) }), e.first(A, t._cascadeHandlerProxy), e.listView.bound() ? (t._toggleCascadeOnFocus(), t._cascadeSelect(e)) : (e.one("dataBound", function () { t._toggleCascadeOnFocus() }), e.value() || t.enable(!1)) } }, _toggleCascadeOnFocus: function () { var e = this, t = e._parentWidget(), i = H ? "blur" : "focusout"; t._focused.add(t.filterInput).bind("focus", function () { t.unbind(A, e._cascadeHandlerProxy), t.first(w, e._cascadeHandlerProxy) }), t._focused.add(t.filterInput).bind(i, function () { t.unbind(w, e._cascadeHandlerProxy), t.first(A, e._cascadeHandlerProxy) }) }, _cascadeHandler: function (e) { var t = this._parentWidget(), i = this.value(); this._userTriggered = e.userTriggered, this.listView.bound() && this._clearSelection(t, !0), this._cascadeSelect(t, i) }, _cascadeChange: function (e) { var t = this, i = t._accessor() || t._selectedValue; t._cascadeFilterRequests.length || (t._selectedValue = null), t._userTriggered ? t._clearSelection(e, !0) : i ? (i !== t.listView.value()[0] && t.value(i), t.dataSource.view()[0] && -1 !== t.selectedIndex || t._clearSelection(e, !0)) : t.dataSource.flatView().length && t.select(t.options.index), t.enable(), t._triggerCascade(), t._triggerChange(), t._userTriggered = !1 }, _cascadeSelect: function (e, i) { var n, o = this, r = e.dataItem(), a = r ? e._value(r) : null, l = o.options.cascadeFromField || e.options.dataValueField; o._valueBeforeCascade = i !== t ? i : o.value(), a || 0 === a ? (s(o.dataSource.filter() || {}, l), n = function () { var t = o._cascadeFilterRequests.shift(); t && o.unbind("dataBound", t), (t = o._cascadeFilterRequests[0]) && o.first("dataBound", t), o._cascadeChange(e) }, o._cascadeFilterRequests.push(n), 1 === o._cascadeFilterRequests.length && o.first("dataBound", n), o._cascading = !0, o._filterSource({ field: l, operator: "eq", value: a }), o._cascading = !1) : (o.enable(!1), o._clearSelection(e), o._triggerCascade(), o._triggerChange(), o._userTriggered = !1) } }), a = ".StaticList", l = c.ui.DataBoundWidget.extend({ init: function (t, i) { f.fn.init.call(this, t, i), this.element.attr("role", "listbox").on("click" + a, "li", P(this._click, this)).on("mouseenter" + a, "li", function () { e(this).addClass(k) }).on("mouseleave" + a, "li", function () { e(this).removeClass(k) }), this.content = this.element.wrap("<div class='k-list-scroller' unselectable='on'></div>").parent(), this.header = this.content.before('<div class="k-group-header" style="display:none"></div>').prev(), this.bound(!1), this._optionID = c.guid(), this._selectedIndices = [], this._view = [], this._dataItems = [], this._values = []; var n = this.options.value; n && (this._values = e.isArray(n) ? n.slice(0) : [n]), this._getter(), this._templates(), this.setDataSource(this.options.dataSource), this._onScroll = P(function () { var e = this; clearTimeout(e._scrollId), e._scrollId = setTimeout(function () { e._renderHeader() }, 50) }, this) }, options: { name: "StaticList", dataValueField: null, valuePrimitive: !1, selectable: !0, template: null, groupTemplate: null, fixedGroupTemplate: null }, events: ["click", w, "activate", "deactivate", "dataBinding", "dataBound", "selectedItemChange"], setDataSource: function (t) { var i, n = this, o = t || {}; o = e.isArray(o) ? { data: o } : o, o = c.data.DataSource.create(o), n.dataSource ? (n.dataSource.unbind(w, n._refreshHandler), i = n.value(), n.value([]), n.bound(!1), n.value(i)) : n._refreshHandler = P(n.refresh, n), n.setDSFilter(o.filter()), n.dataSource = o.bind(w, n._refreshHandler), n._fixedHeader() }, skip: function () { return this.dataSource.skip() }, setOptions: function (e) { f.fn.setOptions.call(this, e), this._getter(), this._templates(), this._render() }, destroy: function () { this.element.off(a), this._refreshHandler && this.dataSource.unbind(w, this._refreshHandler), clearTimeout(this._scrollId), f.fn.destroy.call(this) }, dataItemByIndex: function (e) { return this.dataSource.flatView()[e] }, screenHeight: function () { return this.content[0].clientHeight }, scrollToIndex: function (e) { var t = this.element[0].children[e]; t && this.scroll(t) }, scrollWith: function (e) { this.content.scrollTop(this.content.scrollTop() + e) }, scroll: function (e) { if (e) { e[0] && (e = e[0]); var t = this.content[0], i = e.offsetTop, n = e.offsetHeight, o = t.scrollTop, r = t.clientHeight, s = i + n; o > i ? o = i : s > o + r && (o = s - r), t.scrollTop = o } }, selectedDataItems: function (e) { return e === t ? this._dataItems.slice() : (this._dataItems = e, this._values = this._getValues(e), t) }, _getValues: function (t) { var i = this._valueGetter; return e.map(t, function (e) { return i(e) }) }, focusNext: function () { var e = this.focus(); e = e ? e.next() : 0, this.focus(e) }, focusPrev: function () { var e = this.focus(); e = e ? e.prev() : this.element[0].children.length - 1, this.focus(e) }, focusFirst: function () { this.focus(this.element[0].children[0]) }, focusLast: function () { this.focus(n(this.element[0].children)) }, focus: function (i) { var o, r = this, s = r._optionID; return i === t ? r._current : (i = n(r._get(i)), i = e(this.element[0].children[i]), r._current && (r._current.removeClass(y).removeAttr("aria-selected").removeAttr(b), r.trigger("deactivate")), (o = !!i[0]) && (i.addClass(y), r.scroll(i), i.attr("id", s)), r._current = o ? i : null, r.trigger("activate"), t) }, focusIndex: function () { return this.focus() ? this.focus().index() : t }, skipUpdate: function (e) { this._skipUpdate = e }, select: function (i) { var o, r, s, a = this, l = a.options.selectable, c = "multiple" !== l && !1 !== l, d = a._selectedIndices, u = [], h = []; return i === t ? d.slice() : (1 === (i = a._get(i)).length && -1 === i[0] && (i = []), r = e.Deferred().resolve(), (s = a.isFiltered()) && !c && a._deselectFiltered(i) ? r : c && !s && -1 !== e.inArray(n(i), d) ? (a._dataItems.length && a._view.length && (a._dataItems = [a._view[d[0]].item]), r) : (o = a._deselect(i), h = o.removed, (i = o.indices).length && (c && (i = [n(i)]), u = a._select(i)), (u.length || h.length) && (a._valueComparer = null, a.trigger(w, { added: u, removed: h })), r)) }, removeAt: function (e) { return this._selectedIndices.splice(e, 1), this._values.splice(e, 1), this._valueComparer = null, { position: e, dataItem: this._dataItems.splice(e, 1)[0] } }, setValue: function (t) { t = e.isArray(t) || t instanceof _ ? t.slice(0) : [t], this._values = t, this._valueComparer = null }, value: function (i) { var n, o = this, r = o._valueDeferred; return i === t ? o._values.slice() : (o.setValue(i), r && "resolved" !== r.state() || (o._valueDeferred = r = e.Deferred()), o.bound() && (n = o._valueIndices(o._values), "multiple" === o.options.selectable && o.select(-1), o.select(n), r.resolve()), o._skipUpdate = !1, r) }, items: function () { return this.element.children(".k-item") }, _click: function (t) { t.isDefaultPrevented() || this.trigger("click", { item: e(t.currentTarget) }) || this.select(t.currentTarget) }, _valueExpr: function (e, t) { var n, o, r = this, s = 0, a = []; if (!r._valueComparer || r._valueType !== e) { for (r._valueType = e; s < t.length; s++)a.push(i(t[s], e)); n = "for (var idx = 0; idx < " + a.length + "; idx++) { if (current === values[idx]) {   return idx; }} return -1;", o = Function("current", "values", n), r._valueComparer = function (e) { return o(e, a) } } return r._valueComparer }, _dataItemPosition: function (e, t) { var i = this._valueGetter(e), n = this._valueExpr(typeof i, t); return n(i) }, _getter: function () { this._valueGetter = c.getter(this.options.dataValueField) }, _deselect: function (t) { var i, n, o, r = this, s = r.element[0].children, a = r.options.selectable, l = r._selectedIndices, c = r._dataItems, d = r._values, u = [], h = 0, f = 0; if (t = t.slice(), !0 !== a && t.length) { if ("multiple" === a) for (; h < t.length; h++)if (n = t[h], e(s[n]).hasClass("k-state-selected")) for (i = 0; i < l.length; i++)if ((o = l[i]) === n) { e(s[o]).removeClass("k-state-selected"), u.push({ position: i + f, dataItem: c.splice(i, 1)[0] }), l.splice(i, 1), t.splice(h, 1), d.splice(i, 1), f += 1, h -= 1, i -= 1; break } } else { for (; h < l.length; h++)e(s[l[h]]).removeClass("k-state-selected"), u.push({ position: h, dataItem: c[h] }); r._values = [], r._dataItems = [], r._selectedIndices = [] } return { indices: t, removed: u } }, _deselectFiltered: function (t) { for (var i, n, o, r = this.element[0].children, s = [], a = 0; a < t.length; a++)n = t[a], i = this._view[n].item, (o = this._dataItemPosition(i, this._values)) > -1 && (s.push(this.removeAt(o)), e(r[n]).removeClass("k-state-selected")); return !!s.length && (this.trigger(w, { added: [], removed: s }), !0) }, _select: function (t) { var i, o, r = this, s = r.element[0].children, a = r._view, l = [], c = 0; for (-1 !== n(t) && r.focus(t); c < t.length; c++)o = t[c], i = a[o], -1 !== o && i && (i = i.item, r._selectedIndices.push(o), r._dataItems.push(i), r._values.push(r._valueGetter(i)), e(s[o]).addClass("k-state-selected").attr("aria-selected", !0), l.push({ dataItem: i })); return l }, getElementIndex: function (t) { return e(t).data("offset-index") }, _get: function (e) { return "number" == typeof e ? e = [e] : B(e) || (e = [(e = this.getElementIndex(e)) !== t ? e : -1]), e }, _template: function () { var e = this.options, t = e.template; return t ? (t = c.template(t), t = function (e) { return '<li tabindex="-1" role="option" unselectable="on" class="k-item">' + t(e) + "</li>" }) : t = c.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${' + c.expr(e.dataTextField, "data") + "}</li>", { useWithBlock: !1 }), t }, _templates: function () { var e, t, i = this.options, n = { template: i.template, groupTemplate: i.groupTemplate, fixedGroupTemplate: i.fixedGroupTemplate }; for (t in n) (e = n[t]) && "function" != typeof e && (n[t] = c.template(e)); this.templates = n }, _normalizeIndices: function (e) { for (var i = [], n = 0; n < e.length; n++)e[n] !== t && i.push(e[n]); return i }, _valueIndices: function (e, t) { var i, n = this._view, o = 0; if (t = t ? t.slice() : [], !e.length) return []; for (; o < n.length; o++)-1 !== (i = this._dataItemPosition(n[o].item, e)) && (t[i] = o); return this._normalizeIndices(t) }, _firstVisibleItem: function () { for (var t = this.element[0], i = this.content[0], n = i.scrollTop, o = e(t.children[0]).height(), r = Math.floor(n / o) || 0, s = t.children[r] || t.lastChild, a = s.offsetTop < n; s;)if (a) { if (s.offsetTop + o > n || !s.nextSibling) break; s = s.nextSibling } else { if (s.offsetTop <= n || !s.previousSibling) break; s = s.previousSibling } return this._view[e(s).data("offset-index")] }, _fixedHeader: function () { this.isGrouped() && this.templates.fixedGroupTemplate ? (this.header.show(), this.content.scroll(this._onScroll)) : (this.header.hide(), this.content.off("scroll", this._onScroll)) }, _renderHeader: function () { var e, t = this.templates.fixedGroupTemplate; t && ((e = this._firstVisibleItem()) && this.header.html(t(e.group))) }, _renderItem: function (e) { var t = '<li tabindex="-1" role="option" unselectable="on" class="k-item', i = e.item, n = 0 !== e.index, o = e.selected; return n && e.newGroup && (t += " k-first"), o && (t += " k-state-selected"), t += '"' + (o ? ' aria-selected="true"' : "") + ' data-offset-index="' + e.index + '">', t += this.templates.template(i), n && e.newGroup && (t += '<div class="k-group">' + this.templates.groupTemplate(e.group) + "</div>"), t + "</li>" }, _render: function () { var e, t, i, n, o = "", r = 0, s = 0, a = [], l = this.dataSource.view(), c = this.value(), d = this.isGrouped(); if (d) for (r = 0; r < l.length; r++)for (t = l[r], i = !0, n = 0; n < t.items.length; n++)e = { selected: this._selected(t.items[n], c), item: t.items[n], group: t.value, newGroup: i, index: s }, a[s] = e, s += 1, o += this._renderItem(e), i = !1; else for (r = 0; r < l.length; r++)e = { selected: this._selected(l[r], c), item: l[r], index: r }, a[r] = e, o += this._renderItem(e); this._view = a, this.element[0].innerHTML = o, d && a.length && this._renderHeader() }, _selected: function (e, t) { var i = !this.isFiltered() || "multiple" === this.options.selectable; return i && -1 !== this._dataItemPosition(e, t) }, setDSFilter: function (e) { this._lastDSFilter = z({}, e) }, isFiltered: function () { return this._lastDSFilter || this.setDSFilter(this.dataSource.filter()), !c.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter) }, refresh: function (e) { var t, i = this, n = e && e.action, o = i.options.skipUpdateOnBind, r = "itemchange" === n; i.trigger("dataBinding"), i._angularItems("cleanup"), i._fixedHeader(), i._render(), i.bound(!0), r || "remove" === n ? (t = function (e, t) { var i, n, o, r, s = t.length, a = e.length, l = [], c = []; if (a) for (o = 0; o < a; o++) { for (i = e[o], n = !1, r = 0; r < s; r++)if (i === t[r]) { n = !0, l.push({ index: o, item: i }); break } n || c.push(i) } return { changed: l, unchanged: c } }(i._dataItems, e.items)).changed.length && (r ? i.trigger("selectedItemChange", { items: t.changed }) : i.value(i._getValues(t.unchanged))) : i.isFiltered() || i._skipUpdate ? (i.focus(0), i._skipUpdate && (i._skipUpdate = !1, i._selectedIndices = i._valueIndices(i._values, i._selectedIndices))) : o || n && "add" !== n || i.value(i._values), i._valueDeferred && i._valueDeferred.resolve(), i._angularItems("compile"), i.trigger("dataBound") }, bound: function (e) { return e === t ? this._bound : (this._bound = e, t) }, isGrouped: function () { return (this.dataSource.group() || []).length } }), d.plugin(l) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.calendar.min", ["kendo.core.min"], function () { return function (e, t) { function i(e, t, i, n) { var o, r = e.getFullYear(), s = t.getFullYear(), a = i.getFullYear(); return o = (r -= r % n) + (n - 1), r < s && (r = s), o > a && (o = a), r + "-" + o } function n(e) { var t, i = 0, n = e.min, o = e.max, r = e.start, s = e.setter, l = e.build, c = e.weekNumberBuild, d = e.cells || 12, u = e.isWeekColumnVisible, h = e.perRow || 4, f = e.weekNumber || P, p = e.content || F, m = e.empty || z, g = e.html || '<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">'; for (u && (g += f(c(r))); i < d; i++)i > 0 && i % h == 0 && (g += '</tr><tr role="row">', u && (g += f(c(r)))), r = new ge(r.getFullYear(), r.getMonth(), r.getDate(), 0, 0, 0), S(r, 0), t = l(r, i, e.disableDates), g += a(r, n, o) ? p(t) : m(t), s(r, 1); return g + "</tr></tbody></table>" } function o(e, t, i) { var n = e.getFullYear(), o = t.getFullYear(), r = o, s = 0; return i && (r = (o -= o % i) - o % i + i - 1), n > r ? s = 1 : n < o && (s = -1), s } function r() { var e = new ge; return new ge(e.getFullYear(), e.getMonth(), e.getDate()) } function s(e, t, i) { var n = r(); return e && (n = new ge(+e)), t > n ? n = new ge(+t) : i < n && (n = new ge(+i)), n } function a(e, t, i) { return +e >= +t && +e <= +i } function l(e, t) { return e.slice(t).concat(e.slice(0, t)) } function c(e, t, i) { t = t instanceof ge ? t.getFullYear() : e.getFullYear() + i * t, e.setFullYear(t) } function d(t) { var i = e(this).hasClass("k-state-disabled"); i || e(this).toggleClass(Q, se.indexOf(t.type) > -1 || t.type == oe) } function u(e) { e.preventDefault() } function h(e) { return I(e).calendars.standard } function f(e) { var i = ve[e.start], n = ve[e.depth], o = I(e.culture); e.format = A(e.format || o.calendars.standard.patterns.d), isNaN(i) && (i = 0, e.start = j), (n === t || n > i) && (e.depth = j), null === e.dates && (e.dates = []) } function p(e) { L && e.find("*").attr("unselectable", "on") } function m(e, t) { e.addClass("k-" + t) } function g(t) { return b.isFunction(t) ? t : e.isArray(t) ? function (t) { var i, n, o, r, s = [], a = ["su", "mo", "tu", "we", "th", "fr", "sa"], l = "if (found) { return true } else {return false}"; if (t[0] instanceof ge) s = function (e) { var t, i = []; for (t = 0; t < e.length; t++)i.push(e[t].setHours(0, 0, 0, 0)); return i }(t), i = "var found = date && $.inArray(date.setHours(0, 0, 0, 0),[" + s + "]) > -1;" + l; else { for (n = 0; n < t.length; n++)o = t[n].slice(0, 2).toLowerCase(), (r = e.inArray(o, a)) > -1 && s.push(r); i = "var found = date && $.inArray(date.getDay(),[" + s + "]) > -1;" + l } return Function("date", i) }(t) : e.noop } function v(e, t) { return e instanceof Date && t instanceof Date && (e = e.getTime(), t = t.getTime()), e === t } var _, b = window.kendo, w = b.support, y = b.ui, k = y.Widget, x = b.keys, C = b.parseDate, S = b.date.adjustDST, T = b.date.getDate, D = b.date.weekInYear, A = b._extractFormat, E = b.template, I = b.getCulture, M = b.support.transitions, R = M ? M.css + "transform-origin" : "", F = E('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>', { useWithBlock: !1 }), z = E('<td role="gridcell">&nbsp;</td>', { useWithBlock: !1 }), P = E('<td class="k-alt">#= data.weekNumber #</td>', { useWithBlock: !1 }), B = b.support.browser, L = B.msie && B.version < 9, H = b._outerHeight, N = b._outerWidth, O = ".kendoCalendar", V = "click" + O, U = "id", W = "left", q = "slideIn", j = "month", G = "century", $ = "change", Y = "navigate", K = "value", Q = "k-state-hover", X = "k-state-disabled", Z = "k-state-focused", J = "k-other-month", ee = ' class="' + J + '"', te = "k-nav-today", ie = "td:has(.k-link)", ne = "blur" + O, oe = "focus", re = oe + O, se = w.touch ? "touchstart" : "mouseenter", ae = w.touch ? "touchstart" + O : "mouseenter" + O, le = w.touch ? "touchend" + O + " touchmove" + O : "mouseleave" + O, ce = "_prevArrow", de = "_nextArrow", ue = "aria-disabled", he = "aria-selected", fe = "aria-label", pe = e.proxy, me = e.extend, ge = Date, ve = { month: 0, year: 1, decade: 2, century: 3 }, _e = k.extend({ init: function (t, i) { var n, o, a = this; k.fn.init.call(a, t, i), t = a.wrapper = a.element, (i = a.options).url = window.unescape(i.url), a.options.disableDates = g(a.options.disableDates), a._templates(), a._header(), a._footer(a.footer), (o = t.addClass("k-widget k-calendar " + (i.weekNumber ? " k-week-number" : "")).on(ae + " " + le, ie, d).on("keydown.kendoCalendar", "table.k-content", pe(a._move, a)).on(V, ie, function (t) { var i = t.currentTarget.firstChild, n = a._toDateObject(i); -1 != i.href.indexOf("#") && t.preventDefault(), "month" == a._view.name && a.options.disableDates(n) || a._click(e(i)) }).on("mouseup" + O, "table.k-content, .k-footer", function () { a._focusView(!1 !== a.options.focusOnNav) }).attr(U)) && (a._cellID = o + "_cell_selected"), f(i), n = C(i.value, i.format, i.culture), a._index = ve[i.start], a._current = new ge(+s(n, i.min, i.max)), a._addClassProxy = function () { if (a._active = !0, a._cell.hasClass(X)) { var e = a._view.toDateString(r()); a._cell = a._cellByDate(e) } a._cell.addClass(Z) }, a._removeClassProxy = function () { a._active = !1, a._cell.removeClass(Z) }, a.value(n), b.notify(a) }, options: { name: "Calendar", value: null, min: new ge(1900, 0, 1), max: new ge(2099, 11, 31), dates: [], url: "", culture: "", footer: "", format: "", month: {}, weekNumber: !1, start: j, depth: j, animation: { horizontal: { effects: q, reverse: !0, duration: 500, divisor: 2 }, vertical: { effects: "zoomIn", duration: 400 } }, messages: { weekColumnHeader: "" } }, events: [$, Y], setOptions: function (e) { var t = this; f(e), e.disableDates = g(e.disableDates), k.fn.setOptions.call(t, e), t._templates(), t._footer(t.footer), t._index = ve[t.options.start], t.navigate() }, destroy: function () { var e = this, t = e._today; e.element.off(O), e._title.off(O), e[ce].off(O), e[de].off(O), b.destroy(e._table), t && b.destroy(t.off(O)), k.fn.destroy.call(e) }, current: function () { return this._current }, view: function () { return this._view }, focus: function (e) { e = e || this._table, this._bindTable(e), e.focus() }, min: function (e) { return this._option("min", e) }, max: function (e) { return this._option("max", e) }, navigateToPast: function () { this._navigate(ce, -1) }, navigateToFuture: function () { this._navigate(de, 1) }, navigateUp: function () { var e = this, t = e._index; e._title.hasClass(X) || e.navigate(e._current, ++t) }, navigateDown: function (e) { var i = this, n = i._index, o = i.options.depth; if (e) return n === ve[o] ? (v(i._value, i._current) && v(i._value, e) || (i.value(e), i.trigger($)), t) : (i.navigate(e, --n), t) }, navigate: function (i, n) { var o, r, a, l, c, d, u, h, f, g, v, b, w, y, k, x, C; n = isNaN(n) ? ve[n] : n, r = (o = this).options, a = r.culture, l = r.min, c = r.max, d = o._title, u = o._table, h = o._oldTable, f = o._value, g = o._current, v = i && +i > +g, b = n !== t && n !== o._index, i || (i = g), o._current = i = new ge(+s(i, l, c)), n === t ? n = o._index : o._index = n, o._view = y = _.views[n], k = y.compare, x = n === ve[G], d.toggleClass(X, x).attr(ue, x), x = k(i, l) < 1, o[ce].toggleClass(X, x).attr(ue, x), x = k(i, c) > -1, o[de].toggleClass(X, x).attr(ue, x), u && h && h.data("animating") && (h.kendoStop(!0, !0), u.kendoStop(!0, !0)), o._oldTable = u, u && !o._changeView || (d.html(y.title(i, l, c, a)), o._table = w = e(y.content(me({ min: l, max: c, date: i, url: r.url, dates: r.dates, format: r.format, culture: a, disableDates: r.disableDates, isWeekColumnVisible: r.weekNumber, messages: r.messages }, o[y.name]))), m(w, y.name), p(w), C = u && u.data("start") === w.data("start"), o._animate({ from: u, to: w, vertical: b, future: v, replace: C }), o.trigger(Y), o._focus(i)), n === ve[r.depth] && f && !o.options.disableDates(f) && o._class("k-state-selected", f), o._class(Z, i), !u && o._cell && o._cell.removeClass(Z), o._changeView = !0 }, value: function (e) { var i = this, n = i._view, o = i.options, r = i._view, s = o.min, l = o.max; return e === t ? i._value : (null === e && (i._current = new Date(i._current.getFullYear(), i._current.getMonth(), i._current.getDate())), null !== (e = C(e, o.format, o.culture)) && (a(e = new ge(+e), s, l) || (e = null)), null !== e && i.options.disableDates(e) ? i._value === t && (i._value = null) : i._value = e, r && null === e && i._cell ? i._cell.removeClass("k-state-selected") : (i._changeView = !e || n && 0 !== n.compare(e, i._current), i.navigate(e)), t) }, _move: function (t) { var i, n, o, r, l = this, c = l.options, d = t.keyCode, u = l._view, h = l._index, f = l.options.min, p = l.options.max, m = new ge(+l._current), g = b.support.isRtl(l.wrapper), v = l.options.disableDates; return t.target === l._table[0] && (l._active = !0), t.ctrlKey ? d == x.RIGHT && !g || d == x.LEFT && g ? (l.navigateToFuture(), n = !0) : d == x.LEFT && !g || d == x.RIGHT && g ? (l.navigateToPast(), n = !0) : d == x.UP ? (l.navigateUp(), n = !0) : d == x.DOWN && (l._click(e(l._cell[0].firstChild)), n = !0) : (d == x.RIGHT && !g || d == x.LEFT && g ? (i = 1, n = !0) : d == x.LEFT && !g || d == x.RIGHT && g ? (i = -1, n = !0) : d == x.UP ? (i = 0 === h ? -7 : -4, n = !0) : d == x.DOWN ? (i = 0 === h ? 7 : 4, n = !0) : d == x.ENTER ? (l._click(e(l._cell[0].firstChild)), n = !0) : d == x.HOME || d == x.END ? (o = d == x.HOME ? "first" : "last", r = u[o](m), m = new ge(r.getFullYear(), r.getMonth(), r.getDate(), m.getHours(), m.getMinutes(), m.getSeconds(), m.getMilliseconds()), n = !0) : d == x.PAGEUP ? (n = !0, l.navigateToPast()) : d == x.PAGEDOWN && (n = !0, l.navigateToFuture()), (i || o) && (o || u.setDate(m, i), v(m) && (m = l._nextNavigatable(m, i)), f = T(f), a(m, f, p) && l._focus(s(m, c.min, c.max)))), n && t.preventDefault(), l._current }, _nextNavigatable: function (e, t) { var i = this, n = !0, o = i._view, r = i.options.min, s = i.options.max, l = i.options.disableDates, c = new Date(e.getTime()); for (o.setDate(c, -t); n;) { if (o.setDate(e, t), !a(e, r, s)) { e = c; break } n = l(e) } return e }, _animate: function (e) { var t = this, i = e.from, n = e.to, o = t._active; i ? i.parent().data("animating") ? (i.off(O), i.parent().kendoStop(!0, !0).remove(), i.remove(), n.insertAfter(t.element[0].firstChild), t._focusView(o)) : !i.is(":visible") || !1 === t.options.animation || e.replace ? (n.insertAfter(i), i.off(O).remove(), t._focusView(o)) : t[e.vertical ? "_vertical" : "_horizontal"](i, n, e.future) : (n.insertAfter(t.element[0].firstChild), t._bindTable(n)) }, _horizontal: function (e, t, i) { var n = this, o = n._active, r = n.options.animation.horizontal, s = r.effects, a = N(e); s && -1 != s.indexOf(q) && (e.add(t).css({ width: a }), e.wrap("<div/>"), n._focusView(o, e), e.parent().css({ position: "relative", width: 2 * a, float: W, "margin-left": i ? 0 : -a }), t[i ? "insertAfter" : "insertBefore"](e), me(r, { effects: q + ":" + (i ? "right" : W), complete: function () { e.off(O).remove(), n._oldTable = null, t.unwrap(), n._focusView(o) } }), e.parent().kendoStop(!0, !0).kendoAnimate(r)) }, _vertical: function (e, t) { var i, n, o = this, r = o.options.animation.vertical, s = r.effects, a = o._active; s && -1 != s.indexOf("zoom") && (t.css({ position: "absolute", top: H(e.prev()), left: 0 }).insertBefore(e), R && (i = o._cellByDate(o._view.toDateString(o._current)), n = (n = i.position()).left + parseInt(i.width() / 2, 10) + "px " + (n.top + parseInt(i.height() / 2, 10)) + "px", t.css(R, n)), e.kendoStop(!0, !0).kendoAnimate({ effects: "fadeOut", duration: 600, complete: function () { e.off(O).remove(), o._oldTable = null, t.css({ position: "static", top: 0, left: 0 }), o._focusView(a) } }), t.kendoStop(!0, !0).kendoAnimate(r)) }, _cellByDate: function (t) { return this._table.find("td:not(." + J + ")").filter(function () { return e(this.firstChild).attr(b.attr(K)) === t }) }, _class: function (t, i) { var n, o = this, r = o._cellID, s = o._cell, a = o._view.toDateString(i); s && s.removeAttr(he).removeAttr(fe).removeAttr(U), i && "month" == o._view.name && (n = o.options.disableDates(i)), s = o._table.find("td:not(." + J + ")").removeClass(t).filter(function () { return e(this.firstChild).attr(b.attr(K)) === a }).attr(he, !0), (t === Z && !o._active && !1 !== o.options.focusOnNav || n) && (t = ""), s.addClass(t), s[0] && (o._cell = s), r && (s.attr(U, r), o._table.removeAttr("aria-activedescendant").attr("aria-activedescendant", r)) }, _bindTable: function (e) { e.on(re, this._addClassProxy).on(ne, this._removeClassProxy) }, _click: function (e) { var t = this, i = t.options, n = new Date(+t._current), o = t._toDateObject(e); S(o, 0), "month" == t._view.name && t.options.disableDates(o) && (o = t._value), t._view.setDate(n, o), t.navigateDown(s(n, i.min, i.max)) }, _focus: function (e) { var t = this, i = t._view; 0 !== i.compare(e, t._current) ? t.navigate(e) : (t._current = e, t._class(Z, e)) }, _focusView: function (e, t) { e && this.focus(t) }, _footer: function (i) { var n = this, o = r(), s = n.element, a = s.find(".k-footer"); return i ? (a[0] || (a = e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(s)), n._today = a.show().find(".k-link").html(i(o)).attr("title", b.toString(o, "D", n.options.culture)), n._toggle(), t) : (n._toggle(!1), a.hide(), t) }, _header: function () { var e, t = this, i = t.element; i.find(".k-header")[0] || i.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev" ' + fe + '="Previous"><span class="k-icon k-i-arrow-60-left"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next" ' + fe + '="Next"><span class="k-icon k-i-arrow-60-right"></span></a></div>'), e = i.find(".k-link").on(ae + " " + le + " " + re + " " + ne, d).click(!1), t._title = e.eq(1).on(V, function () { t._active = !1 !== t.options.focusOnNav, t.navigateUp() }), t[ce] = e.eq(0).on(V, function () { t._active = !1 !== t.options.focusOnNav, t.navigateToPast() }), t[de] = e.eq(2).on(V, function () { t._active = !1 !== t.options.focusOnNav, t.navigateToFuture() }) }, _navigate: function (e, t) { var i = this, n = i._index + 1, o = new ge(+i._current); (e = i[e]).hasClass(X) || (n > 3 ? o.setFullYear(o.getFullYear() + 100 * t) : _.views[n].setDate(o, t), i.navigate(o)) }, _option: function (e, i) { var n, o = this, r = o.options, s = o._value || o._current; return i === t ? r[e] : ((i = C(i, r.format, r.culture)) && (r[e] = new ge(+i), ((n = "min" === e ? i > s : s > i) || function (e, t) { return !!e && e.getFullYear() === t.getFullYear() && e.getMonth() === t.getMonth() }(s, i)) && (n && (o._value = null), o._changeView = !0), o._changeView || (o._changeView = !(!r.month.content && !r.month.empty)), o.navigate(o._value), o._toggle()), t) }, _toggle: function (e) { var i = this, n = i.options, o = i.options.disableDates(r()), s = i._today; e === t && (e = a(r(), n.min, n.max)), s && (s.off(V), e && !o ? s.addClass(te).removeClass(X).on(V, pe(i._todayClick, i)) : s.removeClass(te).addClass(X).on(V, u)) }, _todayClick: function (e) { var t = this, i = ve[t.options.depth], n = t.options.disableDates, o = r(); e.preventDefault(), n(o) || (0 === t._view.compare(t._current, o) && t._index == i && (t._changeView = !1), t._value = o, t.navigate(o, i), t.trigger($)) }, _toDateObject: function (t) { var i = e(t).attr(b.attr(K)).split("/"); return i = new ge(i[0], i[1], i[2]) }, _templates: function () { var e = this, t = e.options, i = t.footer, n = t.month, o = n.content, r = n.weekNumber, s = n.empty; e.month = { content: E('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" ' + b.attr("value") + '="#=data.dateString#" title="#=data.title#">' + (o || "#=data.value#") + "</a></td>", { useWithBlock: !!o }), empty: E('<td role="gridcell">' + (s || "&nbsp;") + "</td>", { useWithBlock: !!s }), weekNumber: E('<td class="k-alt">' + (r || "#= data.weekNumber #") + "</td>", { useWithBlock: !!r }) }, e.footer = !1 !== i ? E(i || '#= kendo.toString(data,"D","' + t.culture + '") #', { useWithBlock: !1 }) : null } }); y.plugin(_e), (_ = { firstDayOfMonth: function (e) { return new ge(e.getFullYear(), e.getMonth(), 1) }, firstVisibleDay: function (e, t) { for (var i = (t = t || b.culture().calendar).firstDay, n = new ge(e.getFullYear(), e.getMonth(), 0, e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds()); n.getDay() != i;)_.setTime(n, -864e5); return n }, setTime: function (e, t) { var i = e.getTimezoneOffset(), n = new ge(e.getTime() + t), o = n.getTimezoneOffset() - i; e.setTime(n.getTime() + 6e4 * o) }, views: [{ name: j, title: function (e, t, i, n) { return h(n).months.names[e.getMonth()] + " " + e.getFullYear() }, content: function (e) { var t = this, i = 0, o = e.min, r = e.max, s = e.date, a = e.dates, c = e.format, d = e.culture, u = e.url, f = e.isWeekColumnVisible, p = u && a[0], m = h(d), g = m.firstDay, v = m.days, w = l(v.names, g), y = l(v.namesShort, g), k = _.firstVisibleDay(s, m), x = t.first(s), C = t.last(s), T = t.toDateString, A = new ge, E = '<table tabindex="0" role="grid" class="k-content" cellspacing="0" data-start="' + T(k) + '"><thead><tr role="row">'; for (f && (E += '<th scope="col" class="k-alt">' + e.messages.weekColumnHeader + "</th>"); i < 7; i++)E += '<th scope="col" title="' + w[i] + '">' + y[i] + "</th>"; return A = new ge(A.getFullYear(), A.getMonth(), A.getDate()), S(A, 0), A = +A, n({ cells: 42, perRow: 7, html: E += '</tr></thead><tbody><tr role="row">', start: k, isWeekColumnVisible: f, weekNumber: e.weekNumber, min: new ge(o.getFullYear(), o.getMonth(), o.getDate()), max: new ge(r.getFullYear(), r.getMonth(), r.getDate()), content: e.content, empty: e.empty, setter: t.setDate, disableDates: e.disableDates, build: function (e, t, i) { var n = [], o = e.getDay(), r = "", s = "#"; return (e < x || e > C) && n.push(J), i(e) && n.push(X), +e === A && n.push("k-today"), 0 !== o && 6 !== o || n.push("k-weekend"), p && function (e, t) { for (var i = 0, n = t.length; i < n; i++)if (e === +t[i]) return !0; return !1 }(+e, a) && (s = u.replace("{0}", b.toString(e, c, d)), r = " k-action-link"), { date: e, dates: a, ns: b.ns, title: b.toString(e, "D", d), value: e.getDate(), dateString: T(e), cssClass: n[0] ? ' class="' + n.join(" ") + '"' : "", linkClass: r, url: s } }, weekNumberBuild: function (e) { return { weekNumber: D(e, b.culture().calendar.firstDay), currentDate: e } } }) }, first: function (e) { return _.firstDayOfMonth(e) }, last: function (e) { var t = new ge(e.getFullYear(), e.getMonth() + 1, 0), i = _.firstDayOfMonth(e), n = Math.abs(t.getTimezoneOffset() - i.getTimezoneOffset()); return n && t.setHours(i.getHours() + n / 60), t }, compare: function (e, t) { var i = e.getMonth(), n = e.getFullYear(), o = t.getMonth(), r = t.getFullYear(); return n > r ? 1 : n < r ? -1 : i == o ? 0 : i > o ? 1 : -1 }, setDate: function (e, t) { var i = e.getHours(); t instanceof ge ? e.setFullYear(t.getFullYear(), t.getMonth(), t.getDate()) : _.setTime(e, 864e5 * t), S(e, i) }, toDateString: function (e) { return e.getFullYear() + "/" + e.getMonth() + "/" + e.getDate() } }, { name: "year", title: function (e) { return e.getFullYear() }, content: function (e) { var t = h(e.culture).months.namesAbbr, i = this.toDateString, o = e.min, r = e.max; return n({ min: new ge(o.getFullYear(), o.getMonth(), 1), max: new ge(r.getFullYear(), r.getMonth(), 1), start: new ge(e.date.getFullYear(), 0, 1), setter: this.setDate, build: function (e) { return { value: t[e.getMonth()], ns: b.ns, dateString: i(e), cssClass: "" } } }) }, first: function (e) { return new ge(e.getFullYear(), 0, e.getDate()) }, last: function (e) { return new ge(e.getFullYear(), 11, e.getDate()) }, compare: function (e, t) { return o(e, t) }, setDate: function (e, t) { var i, n = e.getHours(); t instanceof ge ? (i = t.getMonth(), e.setFullYear(t.getFullYear(), i, e.getDate()), i !== e.getMonth() && e.setDate(0)) : (i = e.getMonth() + t, e.setMonth(i), i > 11 && (i -= 12), i > 0 && e.getMonth() != i && e.setDate(0)), S(e, n) }, toDateString: function (e) { return e.getFullYear() + "/" + e.getMonth() + "/1" } }, { name: "decade", title: function (e, t, n) { return i(e, t, n, 10) }, content: function (e) { var t = e.date.getFullYear(), i = this.toDateString; return n({ start: new ge(t - t % 10 - 1, 0, 1), min: new ge(e.min.getFullYear(), 0, 1), max: new ge(e.max.getFullYear(), 0, 1), setter: this.setDate, build: function (e, t) { return { value: e.getFullYear(), ns: b.ns, dateString: i(e), cssClass: 0 === t || 11 == t ? ee : "" } } }) }, first: function (e) { var t = e.getFullYear(); return new ge(t - t % 10, e.getMonth(), e.getDate()) }, last: function (e) { var t = e.getFullYear(); return new ge(t - t % 10 + 9, e.getMonth(), e.getDate()) }, compare: function (e, t) { return o(e, t, 10) }, setDate: function (e, t) { c(e, t, 1) }, toDateString: function (e) { return e.getFullYear() + "/0/1" } }, { name: G, title: function (e, t, n) { return i(e, t, n, 100) }, content: function (e) { var t = e.date.getFullYear(), i = e.min.getFullYear(), o = e.max.getFullYear(), r = this.toDateString, s = i, a = o; return (a -= a % 10) - (s -= s % 10) < 10 && (a = s + 9), n({ start: new ge(t - t % 100 - 10, 0, 1), min: new ge(s, 0, 1), max: new ge(a, 0, 1), setter: this.setDate, build: function (e, t) { var n = e.getFullYear(), s = n + 9; return n < i && (n = i), s > o && (s = o), { ns: b.ns, value: n + " - " + s, dateString: r(e), cssClass: 0 === t || 11 == t ? ee : "" } } }) }, first: function (e) { var t = e.getFullYear(); return new ge(t - t % 100, e.getMonth(), e.getDate()) }, last: function (e) { var t = e.getFullYear(); return new ge(t - t % 100 + 99, e.getMonth(), e.getDate()) }, compare: function (e, t) { return o(e, t, 100) }, setDate: function (e, t) { c(e, t, 10) }, toDateString: function (e) { var t = e.getFullYear(); return t - t % 10 + "/0/1" } }] }).isEqualDatePart = function (e, t) { return !!e && e.getFullYear() === t.getFullYear() && e.getMonth() === t.getMonth() && e.getDate() === t.getDate() }, _.isEqualDate = v, _.makeUnselectable = p, _.restrictValue = s, _.isInRange = a, _.addClassToViewContainer = m, _.normalize = f, _.viewsEnum = ve, _.disabled = g, b.calendar = _ }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.datepicker.min", ["kendo.calendar.min", "kendo.popup.min"], function () { return function (e, t) { function i(t) { var i = t.parseFormats, n = t.format; M.normalize(t), (i = e.isArray(i) ? i : [i]).length || i.push("yyyy-MM-dd"), -1 === e.inArray(n, i) && i.splice(0, 0, t.format), t.parseFormats = i } function n(e) { e.preventDefault() } var o, r = window.kendo, s = r.ui, a = s.Widget, l = r.parseDate, c = r.keys, d = r.template, u = r._activeElement, h = "<div />", f = "<span />", p = ".kendoDatePicker", m = "click" + p, g = "open", v = "close", _ = "change", b = "disabled", w = "readonly", y = "k-state-default", k = "k-state-focused", x = "k-state-selected", C = "k-state-disabled", S = "mousedown" + p, T = "id", D = "month", A = "aria-disabled", E = "aria-expanded", I = "aria-hidden", M = r.calendar, R = M.isInRange, F = M.restrictValue, z = M.isEqualDatePart, P = e.extend, B = e.proxy, L = Date, H = function (t) { var i, n = this, o = document.body, a = e(h).attr(I, "true").addClass("k-calendar-container").appendTo(o); n.options = t = t || {}, (i = t.id) && (i += "_dateview", a.attr(T, i), n._dateViewID = i), n.popup = new s.Popup(a, P(t.popup, t, { name: "Popup", isRtl: r.support.isRtl(t.anchor) })), n.div = a, n.value(t.value) }; H.prototype = { _calendar: function () { var t, i = this, o = i.calendar, a = i.options; o || (t = e(h).attr(T, r.guid()).appendTo(i.popup.element).on(S, n).on(m, "td:has(.k-link)", B(i._click, i)), i.calendar = o = new s.Calendar(t), i._setOptions(a), r.calendar.makeUnselectable(o.element), o.navigate(i._value || i._current, a.start), i.value(i._value)) }, _setOptions: function (e) { this.calendar.setOptions({ focusOnNav: !1, change: e.change, culture: e.culture, dates: e.dates, depth: e.depth, footer: e.footer, format: e.format, max: e.max, min: e.min, month: e.month, weekNumber: e.weekNumber, start: e.start, disableDates: e.disableDates }) }, setOptions: function (e) { var t = this.options, i = e.disableDates; i && (e.disableDates = M.disabled(i)), this.options = P(t, e, { change: t.change, close: t.close, open: t.open }), this.calendar && this._setOptions(this.options) }, destroy: function () { this.popup.destroy() }, open: function () { this._calendar(), this.popup.open() }, close: function () { this.popup.close() }, min: function (e) { this._option("min", e) }, max: function (e) { this._option("max", e) }, toggle: function () { this[this.popup.visible() ? v : g]() }, move: function (e) { var t = this, i = e.keyCode, n = t.calendar, o = e.ctrlKey && i == c.DOWN || i == c.ENTER, r = !1; if (e.altKey) i == c.DOWN ? (t.open(), e.preventDefault(), r = !0) : i == c.UP && (t.close(), e.preventDefault(), r = !0); else if (t.popup.visible()) { if (i == c.ESC || o && n._cell.hasClass(x)) return t.close(), e.preventDefault(), !0; t._current = n._move(e), r = !0 } return r }, current: function (e) { this._current = e, this.calendar._focus(e) }, value: function (e) { var t = this, i = t.calendar, n = t.options, o = n.disableDates; o && o(e) && (e = null), t._value = e, t._current = new L(+F(e, n.min, n.max)), i && i.value(e) }, _click: function (e) { -1 !== e.currentTarget.className.indexOf(x) && this.close() }, _option: function (e, t) { var i = this.calendar; this.options[e] = t, i && i[e](t) } }, H.normalize = i, r.DateView = H, o = a.extend({ init: function (t, n) { var o, c = this; a.fn.init.call(c, t, n), t = c.element, (n = c.options).disableDates = r.calendar.disabled(n.disableDates), n.min = l(t.attr("min")) || l(n.min), n.max = l(t.attr("max")) || l(n.max), i(n), c._initialOptions = P({}, n), c._wrapper(), c.dateView = new H(P({}, n, { id: t.attr(T), anchor: c.wrapper, change: function () { c._change(this.value()), c.close() }, close: function (e) { c.trigger(v) ? e.preventDefault() : (t.attr(E, !1), o.attr(I, !0)) }, open: function (e) { var i, n = c.options; c.trigger(g) ? e.preventDefault() : (c.element.val() !== c._oldText && (i = l(t.val(), n.parseFormats, n.culture), c.dateView[i ? "current" : "value"](i)), t.attr(E, !0), o.attr(I, !1), c._updateARIA(i)) } })), o = c.dateView.div, c._icon(); try { t[0].setAttribute("type", "text") } catch (e) { t[0].type = "text" } t.addClass("k-input").attr({ role: "combobox", "aria-expanded": !1, "aria-owns": c.dateView._dateViewID }), c._reset(), c._template(), t.is("[disabled]") || e(c.element).parents("fieldset").is(":disabled") ? c.enable(!1) : c.readonly(t.is("[readonly]")), n.dateInput && (c._dateInput = new s.DateInput(t, { culture: n.culture, format: n.format, min: n.min, max: n.max, value: n.value })), c._old = c._update(n.value || c.element.val()), c._oldText = t.val(), r.notify(c) }, events: [g, v, _], options: { name: "DatePicker", value: null, footer: "", format: "", culture: "", parseFormats: [], min: new Date(1900, 0, 1), max: new Date(2099, 11, 31), start: D, depth: D, animation: {}, month: {}, dates: [], ARIATemplate: 'Current focused date is #=kendo.toString(data.current, "D")#', dateInput: !1 }, setOptions: function (e) { var t = this, n = t._value; a.fn.setOptions.call(t, e), (e = t.options).min = l(e.min), e.max = l(e.max), i(e), t.dateView.setOptions(e), t._dateInput && t._dateInput.setOptions({ culture: e.culture, format: e.format, min: e.min, max: e.max, value: e.value }), n && (t.element.val(r.toString(n, e.format, e.culture)), t._updateARIA(n)) }, _editable: function (e) { var t = this, i = t._dateIcon.off(p), o = t.element.off(p), r = t._inputWrapper.off(p), s = e.readonly, a = e.disable; s || a ? (r.addClass(a ? C : y).removeClass(a ? y : C), o.attr(b, a).attr(w, s).attr(A, a)) : (r.addClass(y).removeClass(C).on("mouseenter.kendoDatePicker mouseleave.kendoDatePicker", t._toggleHover), o.removeAttr(b).removeAttr(w).attr(A, !1).on("keydown" + p, B(t._keydown, t)).on("focusout" + p, B(t._blur, t)).on("focus" + p, function () { t._inputWrapper.addClass(k) }), i.on(m, B(t._click, t)).on(S, n)) }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, destroy: function () { var e = this; a.fn.destroy.call(e), e.dateView.destroy(), e.element.off(p), e._dateIcon.off(p), e._inputWrapper.off(p), e._form && e._form.off("reset", e._resetHandler) }, open: function () { this.dateView.open() }, close: function () { this.dateView.close() }, min: function (e) { return this._option("min", e) }, max: function (e) { return this._option("max", e) }, value: function (e) { var i = this; return e === t ? i._value : (i._old = i._update(e), null === i._old && i.element.val(""), i._oldText = i.element.val(), t) }, _toggleHover: function (t) { e(t.currentTarget).toggleClass("k-state-hover", "mouseenter" === t.type) }, _blur: function () { var e = this, t = e.element.val(); e.close(), t !== e._oldText && e._change(t), e._inputWrapper.removeClass(k) }, _click: function () { var e = this.element; this.dateView.toggle(), r.support.touch || e[0] === u() || e.focus() }, _change: function (e) { var t, i, n, o = this, s = o.element.val(); e = o._update(e), t = !r.calendar.isEqualDate(o._old, e), i = t && !o._typing, n = s !== o.element.val(), (i || n) && o.element.trigger(_), t && (o._old = e, o._oldText = o.element.val(), o.trigger(_)), o._typing = !1 }, _keydown: function (e) { var t = this, i = t.dateView, n = t.element.val(), o = !1; i.popup.visible() || e.keyCode != c.ENTER || n === t._oldText ? (o = i.move(e), t._updateARIA(i._current), o ? t._dateInput && e.stopImmediatePropagation && e.stopImmediatePropagation() : t._typing = !0) : t._change(n) }, _icon: function () { var t, i = this, n = i.element; (t = n.next("span.k-select"))[0] || (t = e('<span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-calendar"></span></span>').insertAfter(n)), i._dateIcon = t.attr({ role: "button", "aria-controls": i.dateView._dateViewID }) }, _option: function (e, i) { var n = this.options; return i === t ? n[e] : ((i = l(i, n.parseFormats, n.culture)) && (n[e] = new L(+i), this.dateView[e](i)), t) }, _update: function (e) { var t, i = this, n = i.options, o = n.min, s = n.max, a = i._value, c = l(e, n.parseFormats, n.culture), d = null === c && null === a || c instanceof Date && a instanceof Date; return n.disableDates(c) && (c = null, i._old || i.element.val() || (e = null)), +c == +a && d ? ((t = r.toString(c, n.format, n.culture)) !== e && i.element.val(null === c ? e : t), c) : (null !== c && z(c, o) ? c = F(c, o, s) : R(c, o, s) || (c = null), i._value = c, i.dateView.value(c), i._dateInput ? i._dateInput.value(c || e) : i.element.val(r.toString(c || e, n.format, n.culture)), i._updateARIA(c), c) }, _wrapper: function () { var t, i = this, n = i.element; (t = n.parents(".k-datepicker"))[0] || (t = (t = n.wrap(f).parent().addClass("k-picker-wrap k-state-default")).wrap(f).parent()), t[0].style.cssText = n[0].style.cssText, n.css({ width: "100%", height: n[0].style.height }), i.wrapper = t.addClass("k-widget k-datepicker k-header").addClass(n[0].className), i._inputWrapper = e(t[0].firstChild) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { t.value(i[0].defaultValue), t.max(t._initialOptions.max), t.min(t._initialOptions.min) }, t._form = o.on("reset", t._resetHandler)) }, _template: function () { this._ariaTemplate = d(this.options.ARIATemplate) }, _updateARIA: function (e) { var t, i = this, n = i.dateView.calendar; i.element.removeAttr("aria-activedescendant"), n && ((t = n._cell).attr("aria-label", i._ariaTemplate({ current: e || n.current() })), i.element.attr("aria-activedescendant", t.attr("id"))) } }), s.plugin(o) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dateinput.min", ["kendo.core.min"], function () { return function (e, t) { var i, n = window, o = n.kendo, r = o.caret, s = o.ui, a = s.Widget, l = o.keys, c = ".kendoDateInput", d = e.proxy, u = {}.toString, h = (o.support.propertyChangeEvent ? "propertychange.kendoDateInput input" : "input") + c, f = "k-state-disabled", p = "k-state-default", m = "k-state-invalid", g = "disabled", v = "readonly", _ = "change", b = "dMyHhmftsz", w = a.extend({ init: function (t, i) { var n, r = this; a.fn.init.call(r, t, i), t = r.element, (i = r.options).format = o._extractFormat(i.format || o.getCulture(i.culture).calendars.standard.patterns.d), i.min = o.parseDate(t.attr("min")) || o.parseDate(i.min), i.max = o.parseDate(t.attr("max")) || o.parseDate(i.max), (n = (t.parent().attr("class") || "").indexOf("k-picker-wrap") >= 0) ? r.wrapper = t.parent() : (r.wrapper = t.wrap("<span class='k-widget k-dateinput'></span>").parent(), r.wrapper.addClass(t[0].className), r.wrapper[0].style.cssText = t[0].style.cssText, t.css({ width: "100%", height: t[0].style.height })), e("<span class='k-icon k-i-warning'></span>").insertAfter(t), r._form(), r.element.addClass(n ? " " : "k-textbox").attr("autocomplete", "off").on("focusout" + c, function () { r._change() }); try { t[0].setAttribute("type", "text") } catch (e) { t[0].type = "text" } t.is("[disabled]") || e(r.element).parents("fieldset").is(":disabled") ? r.enable(!1) : r.readonly(t.is("[readonly]")), r.value(r.options.value || t.val()), o.notify(r) }, options: { name: "DateInput", culture: "", value: "", format: "", min: new Date(1900, 0, 1), max: new Date(2099, 11, 31), messages: { year: "year", month: "month", day: "day", weekday: "day of the week", hour: "hours", minute: "minutes", second: "seconds", dayperiod: "AM/PM" } }, events: [_], min: function (e) { return e === t ? this.options.min : (this.options.min = e, t) }, max: function (e) { return e === t ? this.options.max : (this.options.max = e, t) }, setOptions: function (e) { a.fn.setOptions.call(this, e), this._unbindInput(), this._bindInput(), this._updateElementValue() }, destroy: function () { var e = this; e.element.off(c), e._formElement && e._formElement.off("reset", e._resetHandler), a.fn.destroy.call(e) }, value: function (e) { return e === t ? this._dateTime.getDateObject() : (null === e && (e = ""), "[object Date]" !== u.call(e) && (e = o.parseDate(e, this.options.format, this.options.culture)), e && !e.getTime() && (e = null), this._dateTime = new i(e, this.options.format, this.options.culture, this.options.messages), this._updateElementValue(), this._oldValue = e, t) }, _updateElementValue: function () { var e = this._dateTime.toPair(this.options.format, this.options.culture, this.options.messages); this.element.val(e[0]), this._oldText = e[0], this._format = e[1] }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, _bindInput: function () { var e = this; e.element.on("keydown" + c, d(e._keydown, e)).on(h, d(e._input, e)).on("mouseup" + c, d(e._mouseUp, e)).on("DOMMouseScroll" + c + " mousewheel" + c, d(e._scroll, e)) }, _unbindInput: function () { this.element.off("keydown" + c).off("paste" + c).off(h).off("mouseup" + c).off("DOMMouseScroll" + c + " mousewheel" + c) }, _editable: function (e) { var t = this, i = t.element, n = e.disable, o = e.readonly, r = t.wrapper; t._unbindInput(), o || n ? (r.addClass(f).removeClass(p), i.attr(g, n).attr(v, o)) : (r.addClass(p).removeClass(f), i.removeAttr(g).removeAttr(v), t._bindInput()) }, _change: function () { var e = this, t = e._oldValue, i = e.value(); i && e.min() && i < e.min() && (e.value(e.min()), i = e.value()), i && e.max() && i > e.max() && (e.value(e.max()), i = e.value()), (t && i && i.getTime() !== t.getTime() || t && !i || !t && i) && (e._oldValue = i, e.trigger(_), e.element.trigger(_)) }, _input: function () { var e, t, i, n, s, a, l = this, c = l.element[0], d = !1; if (o._activeElement() === c) { if (e = function (e, t, i, n) { var o, r, s, a, l = e[n + e.length - i.length]; if (e = e.substring(0, n + e.length - i.length), i = i.substring(0, n), o = [], e === i && n > 0) return o.push([t[n - 1], i[n - 1]]), o; if (0 === e.indexOf(i) && (0 === i.length || t[i.length - 1] !== t[i.length])) { for (s = "", r = i.length; r < e.length; r++)t[r] !== s && b.indexOf(t[r]) >= 0 && (s = t[r], o.push([s, ""])); return o } if (" " === i[i.length - 1] || i[i.length - 1] === l) return [[t[n - 1], " "]]; if (0 === i.indexOf(e) || -1 === b.indexOf(t[n - 1])) { for (a = t[0], r = Math.max(0, e.length - 1); r < t.length; r++)if (b.indexOf(t[r]) >= 0) { a = t[r]; break } return [[a, i[n - 1]]] } return [[t[n - 1], i[n - 1]]] }(this._oldText, this._format, this.element[0].value, r(this.element[0])[0]), !(t = 1 === e.length && " " === e[0][1])) for (i = 0; i < e.length; i++)n = this._dateTime.parsePart(e[i][0], e[i][1]), d = d || !n; this._updateElementValue(), e.length && " " !== e[0][0] && (this._selectSegment(e[0][0]), t || (s = e[0][0], setTimeout(function () { l._selectSegment(s) }))), t && (a = { keyCode: 39, preventDefault: function () { } }, this._keydown(a)), d && (clearTimeout(l._blinkInvalidTimeout), m, l.wrapper.addClass(m), l._blinkInvalidTimeout = setTimeout(function () { l.wrapper.removeClass("k-state-invalid") }, 100)) } }, _mouseUp: function () { var e = r(this.element[0]); e[0] === e[1] && this._selectNearestSegment() }, _scroll: function (e) { if (o._activeElement() === this.element[0] && !this.element.is("[readonly]")) { e = window.event || e; var t = { keyCode: 37, preventDefault: function () { } }; t.keyCode = e.shiftKey ? (e.wheelDelta || -e.detail) > 0 ? 37 : 39 : (e.wheelDelta || -e.detail) > 0 ? 38 : 40, this._keydown(t), e.returnValue = !1, e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation() } }, _form: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { setTimeout(function () { t.value(i[0].value) }) }, t._formElement = o.on("reset", t._resetHandler)) }, _keydown: function (e) { var t, i, n, s, a, c, d = e.keyCode; if (37 == d || 39 == d) for (e.preventDefault(), (t = r(this.element[0]))[0] != t[1] && this._selectNearestSegment(), n = -1 == (i = 37 == d ? -1 : 1) ? r(this.element[0])[0] - 1 : r(this.element[0])[1] + 1; n >= 0 && n < this._format.length;) { if (b.indexOf(this._format[n]) >= 0) { this._selectSegment(this._format[n]); break } n += i } 38 != d && 40 != d || (e.preventDefault(), t = r(this.element[0]), s = this._format[t[0]], b.indexOf(s) >= 0 && (this._dateTime.modifyPart(s, 38 == d ? 1 : -1), this._updateElementValue(), this._selectSegment(s))), o.support.browser.msie && o.support.browser.version < 10 && (8 !== (a = e.keyCode ? e.keyCode : e.which) && 46 !== a || (c = this, setTimeout(function () { c._input() }, 0))), d === l.ENTER && this._change() }, _selectNearestSegment: function () { var e, i, n = r(this.element[0]), o = n[0]; for (e = o, i = o - 1; e < this._format.length || i >= 0; e++, i--) { if (e < this._format.length && -1 !== b.indexOf(this._format[e])) return this._selectSegment(this._format[e]), t; if (i >= 0 && -1 !== b.indexOf(this._format[i])) return this._selectSegment(this._format[i]), t } }, _selectSegment: function (e) { var t, i = -1, n = 0; for (t = 0; t < this._format.length; t++)this._format[t] === e && (n = t + 1, -1 === i && (i = t)); i < 0 && (i = 0), r(this.element, i, n) } }); s.plugin(w), i = function (e, i, n, r) { function s(e, t, i) { return (i = (t = t || 2) - (e += "").length) ? y[t].substring(0, i) + e : e } function a(e) { return T = e, D } function l(e, t) { switch (e) { case "y": h = t; break; case "M": f = t, t || (u.setMonth(0), _ = ""); break; case "d": p = t; break; case "H": case "h": m = t, t || (b = ""); break; case "m": g = t; break; case "s": v = t; break; default: return } } var c, d, u = null, h = !0, f = !0, p = !0, m = !0, g = !0, v = !0, _ = "", b = "", w = {}, y = ["", "0", "00", "000", "0000"], k = /dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g, x = null, C = null, S = null, T = !1, D = function (e) { var i, n, o, r, a; switch (e) { case "d": o = p ? u.getDate() : w.day; break; case "dd": o = p ? s(u.getDate()) : w.day; break; case "ddd": o = p && f && h ? S.namesAbbr[u.getDay()] : w.weekday; break; case "dddd": o = p && f && h ? S.names[u.getDay()] : w.weekday; break; case "M": o = f ? u.getMonth() + 1 : w.month; break; case "MM": o = f ? s(u.getMonth() + 1) : w.month; break; case "MMM": o = f ? x.namesAbbr[u.getMonth()] : w.month; break; case "MMMM": o = f ? x.names[u.getMonth()] : w.month; break; case "yy": o = h ? s(u.getFullYear() % 100) : w.year; break; case "yyyy": o = h ? s(u.getFullYear(), 4) : w.year; break; case "h": o = m ? u.getHours() % 12 || 12 : w.hour; break; case "hh": o = m ? s(u.getHours() % 12 || 12) : w.hour; break; case "H": o = m ? u.getHours() : w.hour; break; case "HH": o = m ? s(u.getHours()) : w.hour; break; case "m": o = g ? u.getMinutes() : w.minute; break; case "mm": o = g ? s(u.getMinutes()) : w.minute; break; case "s": o = v ? u.getSeconds() : w.second; break; case "ss": o = v ? s(u.getSeconds()) : w.second; break; case "f": o = Math.floor(u.getMilliseconds() / 100); break; case "ff": (o = u.getMilliseconds()) > 99 && (o = Math.floor(o / 10)), o = s(o); break; case "fff": o = s(u.getMilliseconds(), 3); break; case "tt": o = m ? u.getHours() < 12 ? C.AM[0] : C.PM[0] : w.dayperiod; break; case "zzz": i = u.getTimezoneOffset(), n = i < 0, o = ("" + Math.abs(i / 60)).split(".")[0], i = Math.abs(i) - 60 * o, o = (n ? "+" : "-") + s(o), o += ":" + s(i); break; case "z": case "zz": o = u.getTimezoneOffset() / 60, n = o < 0, o = ("" + Math.abs(o)).split(".")[0], o = (n ? "+" : "-") + ("zz" === e ? s(o) : o) }if (o = o !== t ? o : e.slice(1, e.length - 1), T) { for (o = "" + o, r = "", "ddd" == e && (e = "EEE"), "dddd" == e && (e = "EEEE"), a = 0; a < o.length; a++)r += e[0]; return r } return o }; if (this.setValue = function (e) { p = e }, this.getValue = function () { return p }, this.modifyPart = function (e, t) { var i, n = new Date(u && u.getTime ? u.getTime() : u); switch (e) { case "y": n.setFullYear(n.getFullYear() + t); break; case "M": i = n.getMonth() + t, n.setMonth(i), n.getMonth() % 12 != (i + 12) % 12 && (n.setDate(1), n.setMonth(i)); break; case "d": case "E": n.setDate(n.getDate() + t); break; case "H": case "h": n.setHours(n.getHours() + t); break; case "m": n.setMinutes(n.getMinutes() + t); break; case "s": n.setSeconds(n.getSeconds() + t); break; case "t": n.setHours((n.getHours() + 12) % 24) }n.getFullYear() > 0 && (l(e, !0), u = n) }, this.parsePart = function (e, t) { var i, n, o, r, s, a, c, d, w; if (!t) return l(e, !1), !0; switch (i = new Date(u && u.getTime ? u.getTime() : u), e) { case "d": if (o = (p ? 10 * i.getDate() : 0) + parseInt(t, 10), isNaN(o)) return; for (; o > 31;)o = parseInt(("" + o).slice(1), 10); if (o < 1) p = !1; else { if (i.setDate(o), i.getMonth() !== u.getMonth()) return; p = !0 } break; case "M": if (r = (f ? 10 * (i.getMonth() + 1) : 0) + parseInt(t, 10), isNaN(r)) { for (s = C.months.names, _ += t.toLowerCase(); _.length > 0;) { for (a = 0; a < s.length; a++)if (0 === s[a].toLowerCase().indexOf(_)) return i.setMonth(a), f = !0, u = i, !0; _ = _.substring(1, _.length) } return !1 } for (; r > 12;)r = parseInt(("" + r).slice(1), 10); r < 1 ? f = !1 : (i.setMonth(r - 1), i.getMonth() !== r - 1 && (i.setDate(1), i.setMonth(r - 1)), f = !0); break; case "y": if (c = (h ? 10 * i.getFullYear() : 0) + parseInt(t, 10), isNaN(c)) return; for (; c > 9999;)c = parseInt(("" + c).slice(1), 10); c < 1 ? h = !1 : (i.setFullYear(c), h = !0); break; case "h": if (n = (m ? 10 * (i.getHours() % 12 || 12) : 0) + parseInt(t, 10), isNaN(n)) return; for (; n > 12;)n = parseInt(("" + n).slice(1), 10); i.setHours(12 * Math.floor(i.getHours() / 12) + n % 12), m = !0; break; case "H": if (n = (m ? 10 * i.getHours() : 0) + parseInt(t, 10), isNaN(n)) return; for (; n > 23;)n = parseInt(("" + n).slice(1), 10); i.setHours(n), m = !0; break; case "m": if (d = (g ? 10 * i.getMinutes() : 0) + parseInt(t, 10), isNaN(d)) return; for (; d > 59;)d = parseInt(("" + d).slice(1), 10); i.setMinutes(d), g = !0; break; case "s": if (w = (v ? 10 * i.getSeconds() : 0) + parseInt(t, 10), isNaN(w)) return; for (; w > 59;)w = parseInt(("" + w).slice(1), 10); i.setSeconds(w), v = !0; break; case "t": if (m) { for (b += t.toLowerCase(); b.length > 0;) { if (0 === C.AM[0].toLowerCase().indexOf(b) && i.getHours() >= 12 || 0 === C.PM[0].toLowerCase().indexOf(b) && i.getHours() < 12) return i.setHours((i.getHours() + 12) % 24), u = i, !0; b = b.substring(1, b.length) } return !1 } }return u = i, !0 }, this.toPair = function (e, t, i) { return e ? (t = o.getCulture(t), C = t.calendars.standard, e = C.patterns[e] || e, S = C.days, x = C.months, w = i, [e.replace(k, a(!1)), e.replace(k, a(!0))]) : ["", ""] }, this.getDateObject = function () { return h && f && p && m && g && v ? new Date(u.getTime()) : null }, e) u = new Date(e.getTime()); else for (u = new Date, c = this.toPair(i, n, r)[1], d = 0; d < c.length; d++)l(c[d], !1) } }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.autocomplete.min", ["kendo.list.min", "kendo.mobile.scroller.min"], function () { return function (e, t) { function i(e, t, i) { return i ? t.substring(0, e).split(i).length - 1 : 0 } function n(e, t, n) { return t.split(n)[i(e, t, n)] } function o(e, t, n, o, r) { var s = t.split(o); return s.splice(i(e, t, o), 1, n), o && "" !== s[s.length - 1] && s.push(""), s.join(r) } var r = window.kendo, s = r.support, a = r.caret, l = r._activeElement, c = s.placeholder, d = r.ui, u = d.List, h = r.keys, f = r.data.DataSource, p = "aria-disabled", m = "aria-readonly", g = "change", v = "k-state-default", _ = "disabled", b = "readonly", w = "k-state-focused", y = "k-state-disabled", k = ".kendoAutoComplete", x = e.proxy, C = u.extend({ init: function (t, i) { var n, o = this; o.ns = k, i = e.isArray(i) ? { dataSource: i } : i, u.fn.init.call(o, t, i), t = o.element, (i = o.options).placeholder = i.placeholder || t.attr("placeholder"), c && t.attr("placeholder", i.placeholder), o._wrapper(), o._loader(), o._clearButton(), o._dataSource(), o._ignoreCase(), t[0].type = "text", n = o.wrapper, o._popup(), t.addClass("k-input").on("keydown" + k, x(o._keydown, o)).on("keypress" + k, x(o._keypress, o)).on("paste" + k, x(o._search, o)).on("focus" + k, function () { o._prev = o._accessor(), o._oldText = o._prev, o._placeholder(!1), n.addClass(w) }).on("focusout" + k, function () { o._change(), o._placeholder(), n.removeClass(w) }).attr({ autocomplete: "off", role: "textbox", "aria-haspopup": !0 }), o._clear.on("click" + k, x(o._clearValue, o)), o._enable(), o._old = o._accessor(), t[0].id && t.attr("aria-owns", o.ul[0].id), o._aria(), o._placeholder(), o._initList(), e(o.element).parents("fieldset").is(":disabled") && o.enable(!1), o.listView.bind("click", function (e) { e.preventDefault() }), o._resetFocusItemHandler = e.proxy(o._resetFocusItem, o), r.notify(o), o._toggleCloseVisibility() }, options: { name: "AutoComplete", enabled: !0, suggest: !1, template: "", groupTemplate: "#:data#", fixedGroupTemplate: "#:data#", dataTextField: "", minLength: 1, enforceMinLength: !1, delay: 200, height: 200, filter: "startswith", ignoreCase: !0, highlightFirst: !1, separator: null, placeholder: "", animation: {}, virtual: !1, value: null, clearButton: !0 }, _dataSource: function () { var e = this; e.dataSource && e._refreshHandler ? e._unbindDataSource() : (e._progressHandler = x(e._showBusy, e), e._errorHandler = x(e._hideBusy, e)), e.dataSource = f.create(e.options.dataSource).bind("progress", e._progressHandler).bind("error", e._errorHandler) }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.listView.setDataSource(this.dataSource) }, events: ["open", "close", g, "select", "filtering", "dataBinding", "dataBound"], setOptions: function (e) { var t = this._listOptions(e); u.fn.setOptions.call(this, e), this.listView.setOptions(t), this._accessors(), this._aria() }, _listOptions: function (t) { var i = u.fn._listOptions.call(this, e.extend(t, { skipUpdateOnBind: !0 })); return i.dataValueField = i.dataTextField, i.selectedItemChange = null, i }, _editable: function (e) { var t = this, i = t.element, n = t.wrapper.off(k), o = e.readonly, r = e.disable; o || r ? (n.addClass(r ? y : v).removeClass(r ? v : y), i.attr(_, r).attr(b, o).attr(p, r).attr(m, o)) : (n.addClass(v).removeClass(y).on("mouseenter.kendoAutoComplete mouseleave.kendoAutoComplete", t._toggleHover), i.removeAttr(_).removeAttr(b).attr(p, !1).attr(m, !1)) }, close: function () { var e = this.listView.focus(); e && e.removeClass("k-state-selected"), this.popup.close() }, destroy: function () { var e = this; e.element.off(k), e._clear.off(k), e.wrapper.off(k), u.fn.destroy.call(e) }, refresh: function () { this.listView.refresh() }, select: function (e) { this._select(e) }, search: function (t) { var i, o = this, r = o.options, s = r.ignoreCase, l = o._separator(); t = t || o._accessor(), clearTimeout(o._typingTimeout), l && (t = n(a(o.element)[0], t, l)), i = t.length, (!r.enforceMinLength && !i || i >= r.minLength) && (o._open = !0, o._mute(function () { this.listView.value([]) }), o._filterSource({ value: s ? t.toLowerCase() : t, operator: r.filter, field: r.dataTextField, ignoreCase: s }), o.one("close", e.proxy(o._unifySeparators, o))), o._toggleCloseVisibility() }, suggest: function (e) { var n, o = this, r = o._last, s = o._accessor(), c = o.element[0], d = a(c)[0], f = o._separator(), p = s.split(f), m = i(d, s, f), g = d; return r == h.BACKSPACE || r == h.DELETE ? (o._last = t, t) : ("string" != typeof (e = e || "") && (e[0] && (e = o.dataSource.view()[u.inArray(e[0], o.ul[0])]), e = e ? o._text(e) : ""), d <= 0 && (d = s.toLowerCase().indexOf(e.toLowerCase()) + 1), n = (n = s.substring(0, d).lastIndexOf(f)) > -1 ? d - (n + f.length) : d, s = p[m].substring(0, n), e && ((n = (e = "" + e).toLowerCase().indexOf(s.toLowerCase())) > -1 && (e = e.substring(n + s.length), g = d + e.length, s += e), f && "" !== p[p.length - 1] && p.push("")), p[m] = s, o._accessor(p.join(f || "")), c === l() && a(c, d, g), t) }, value: function (e) { return e === t ? this._accessor() : (this.listView.value(e), this._accessor(e), this._old = this._accessor(), this._oldText = this._accessor(), t) }, _click: function (e) { var i = e.item, n = this, o = n.element, r = n.listView.dataItemByIndex(n.listView.getElementIndex(i)); return e.preventDefault(), n._active = !0, n.trigger("select", { dataItem: r, item: i }) ? (n.close(), t) : (n._oldText = o.val(), n._select(i).done(function () { n._blur(), a(o, o.val().length) }), t) }, _clearText: e.noop, _resetFocusItem: function () { var e = this.options.highlightFirst ? 0 : -1; this.options.virtual && this.listView.scrollTo(0), this.listView.focus(e) }, _listBound: function () { var e, i = this, n = i.popup, o = i.options, r = i.dataSource.flatView(), s = r.length, a = i.dataSource._group.length, c = i.element[0] === l(); i._renderFooter(), i._renderNoData(), i._toggleNoData(!s), i._toggleHeader(!!a && !!s), i._resizePopup(), n.position(), s && o.suggest && c && i.suggest(r[0]), i._open && (i._open = !1, e = i._allowOpening() ? "open" : "close", i._typingTimeout && !c && (e = "close"), s && (i._resetFocusItem(), o.virtual && i.popup.unbind("activate", i._resetFocusItemHandler).one("activate", i._resetFocusItemHandler)), n[e](), i._typingTimeout = t), i._touchScroller && i._touchScroller.reset(), i._hideBusy(), i._makeUnselectable(), i.trigger("dataBound") }, _mute: function (e) { this._muted = !0, e.call(this), this._muted = !1 }, _listChange: function () { var e = this._active || this.element[0] === l(); e && !this._muted && this._selectValue(this.listView.selectedDataItems()[0]) }, _selectValue: function (e) { var t = this._separator(), i = ""; e && (i = this._text(e)), null === i && (i = ""), t && (i = o(a(this.element)[0], this._accessor(), i, t, this._defaultSeparator())), this._prev = i, this._accessor(i), this._placeholder() }, _unifySeparators: function () { return this._accessor(this.value().split(this._separator()).join(this._defaultSeparator())), this }, _change: function () { var e = this, t = e._unifySeparators().value(), i = t !== u.unifyType(e._old, typeof t), n = i && !e._typing, o = e._oldText !== t; e._old = t, e._oldText = t, (n || o) && e.element.trigger(g), i && e.trigger(g), e.typing = !1, e._toggleCloseVisibility() }, _accessor: function (e) { var i = this, n = i.element[0]; return e === t ? (e = n.value, n.className.indexOf("k-readonly") > -1 && e === i.options.placeholder ? "" : e) : (n.value = null === e ? "" : e, i._placeholder(), t) }, _keydown: function (e) { var t, i, n = this, o = e.keyCode, r = n.listView, s = n.popup.visible(), a = r.focus(); if (n._last = o, o === h.DOWN) s && this._move(a ? "focusNext" : "focusFirst"), e.preventDefault(); else if (o === h.UP) s && this._move(a ? "focusPrev" : "focusLast"), e.preventDefault(); else if (o === h.ENTER || o === h.TAB) { if (o === h.ENTER && s && e.preventDefault(), s && a) { if (t = r.dataItemByIndex(r.getElementIndex(a)), n.trigger("select", { dataItem: t, item: a })) return; this._select(a) } this._blur() } else o === h.ESC ? (s && e.preventDefault(), n.close()) : !n.popup.visible() || o !== h.PAGEDOWN && o !== h.PAGEUP ? n._search() : (e.preventDefault(), i = o === h.PAGEDOWN ? 1 : -1, r.scrollWith(i * r.screenHeight())) }, _keypress: function () { this._oldText = this.element.val(), this._typing = !0 }, _move: function (e) { this.listView[e](), this.options.suggest && this.suggest(this.listView.focus()) }, _hideBusy: function () { var e = this; clearTimeout(e._busy), e._loading.hide(), e.element.attr("aria-busy", !1), e._busy = null, e._showClear() }, _showBusy: function () { var e = this; e._busy || (e._busy = setTimeout(function () { e.element.attr("aria-busy", !0), e._loading.show(), e._hideClear() }, 100)) }, _placeholder: function (e) { if (!c) { var i, n = this, o = n.element, r = n.options.placeholder; if (r) { if (i = o.val(), e === t && (e = !i), e || (r = i !== r ? i : ""), i === n._old && !e) return; o.toggleClass("k-readonly", e).val(r), r || o[0] !== document.activeElement || a(o[0], 0, 0) } } }, _separator: function () { var e = this.options.separator; return e instanceof Array ? RegExp(e.join("|"), "gi") : e }, _defaultSeparator: function () { var e = this.options.separator; return e instanceof Array ? e[0] : e }, _inputValue: function () { return this.element.val() }, _search: function () { var e = this; clearTimeout(e._typingTimeout), e._typingTimeout = setTimeout(function () { e._prev !== e._accessor() && (e._prev = e._accessor(), e.search()) }, e.options.delay) }, _select: function (e) { var t = this; return t._active = !0, t.listView.select(e).done(function () { t._active = !1 }) }, _loader: function () { this._loading = e('<span class="k-icon k-i-loading" style="display:none"></span>').insertAfter(this.element) }, _clearButton: function () { this._clear = e('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({ role: "button", tabIndex: -1 }), this.options.clearButton && this._clear.insertAfter(this.element) }, _toggleHover: function (t) { e(t.currentTarget).toggleClass("k-state-hover", "mouseenter" === t.type) }, _toggleCloseVisibility: function () { this.value() ? this._showClear() : this._hideClear() }, _wrapper: function () { var e, t = this, i = t.element, n = i[0]; (e = i.parent()).is("span.k-widget") || (e = i.wrap("<span />").parent()), e.attr("tabindex", -1), e.attr("role", "presentation"), e[0].style.cssText = n.style.cssText, i.css({ width: "100%", height: n.style.height }), t._focused = t.element, t.wrapper = e.addClass("k-widget k-autocomplete k-header").addClass(n.className) } }); d.plugin(C) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dropdownlist.min", ["kendo.list.min", "kendo.mobile.scroller.min"], function () { return function (e, t) { function i(e, t, i) { for (var n, o = 0, r = t.length - 1; o < r; ++o)(n = t[o]) in e || (e[n] = {}), e = e[n]; e[t[r]] = i } function n(e, t) { return e >= t && (e -= t), e } var o = window.kendo, r = o.ui, s = r.List, a = r.Select, l = o.support, c = o._activeElement, d = o.data.ObservableObject, u = o.keys, h = ".kendoDropDownList", f = "disabled", p = "readonly", m = "change", g = "k-state-focused", v = "k-state-default", _ = "k-state-disabled", b = "aria-disabled", w = "mouseenter" + h + " mouseleave" + h, y = "tabindex", k = "filter", x = "accept", C = e.proxy, S = a.extend({ init: function (i, n) { var r, s, l = this, c = n && n.index; l.ns = h, n = e.isArray(n) ? { dataSource: n } : n, a.fn.init.call(l, i, n), n = l.options, i = l.element.on("focus" + h, C(l._focusHandler, l)), l._focusInputHandler = e.proxy(l._focusInput, l), l.optionLabel = e(), l._optionLabel(), l._inputTemplate(), l._reset(), l._prev = "", l._word = "", l._wrapper(), l._tabindex(), l.wrapper.data(y, l.wrapper.attr(y)), l._span(), l._popup(), l._mobile(), l._dataSource(), l._ignoreCase(), l._filterHeader(), l._aria(), l._enable(), l._oldIndex = l.selectedIndex = -1, c !== t && (n.index = c), l._initialIndex = n.index, l.requireValueMapper(l.options), l._initList(), l._cascade(), n.autoBind ? l.dataSource.fetch() : -1 === l.selectedIndex && ((s = n.text || "") || ((r = n.optionLabel) && 0 === n.index ? s = r : l._isSelect && (s = i.children(":selected").text())), l._textAccessor(s)), e(l.element).parents("fieldset").is(":disabled") && l.enable(!1), l.listView.bind("click", function (e) { e.preventDefault() }), o.notify(l) }, options: { name: "DropDownList", enabled: !0, autoBind: !0, index: 0, text: null, value: null, delay: 500, height: 200, dataTextField: "", dataValueField: "", optionLabel: "", cascadeFrom: "", cascadeFromField: "", ignoreCase: !0, animation: {}, filter: "none", minLength: 1, enforceMinLength: !1, virtual: !1, template: null, valueTemplate: null, optionLabelTemplate: null, groupTemplate: "#:data#", fixedGroupTemplate: "#:data#" }, events: ["open", "close", m, "select", "filtering", "dataBinding", "dataBound", "cascade", "set"], setOptions: function (e) { a.fn.setOptions.call(this, e), this.listView.setOptions(this._listOptions(e)), this._optionLabel(), this._inputTemplate(), this._accessors(), this._filterHeader(), this._enable(), this._aria(), !this.value() && this.hasOptionLabel() && this.select(0) }, destroy: function () { var e = this; a.fn.destroy.call(e), e.wrapper.off(h), e.element.off(h), e._inputWrapper.off(h), e._arrow.off(), e._arrow = null, e._arrowIcon = null, e.optionLabel.off() }, open: function () { var e = this; e.popup.visible() || (e.listView.bound() && e._state !== x ? e._allowOpening() && (e.popup.one("activate", e._focusInputHandler), e.popup.open(), e._resizeFilterInput(), e._focusItem()) : (e._open = !0, e._state = "rebind", e.filterInput && (e.filterInput.val(""), e._prev = ""), e.filterInput && 1 !== e.options.minLength ? (e.refresh(), e.popup.one("activate", e._focusInputHandler), e.popup.open(), e._resizeFilterInput()) : e._filterSource())) }, _focusInput: function () { this._focusElement(this.filterInput) }, _resizeFilterInput: function () { var e, t, i = this.filterInput, n = this._prevent; i && (e = this.filterInput[0] === c(), t = o.caret(this.filterInput[0])[0], this._prevent = !0, i.css("display", "none").css("width", this.popup.element.css("width")).css("display", "inline-block"), e && (i.focus(), o.caret(i[0], t)), this._prevent = n) }, _allowOpening: function () { return this.hasOptionLabel() || this.filterInput || a.fn._allowOpening.call(this) }, toggle: function (e) { this._toggle(e, !0) }, current: function (e) { var i; return e === t ? !(i = this.listView.focus()) && 0 === this.selectedIndex && this.hasOptionLabel() ? this.optionLabel : i : (this._focus(e), t) }, dataItem: function (i) { var n = this, o = null; if (null === i) return i; if (i === t) o = n.listView.selectedDataItems()[0]; else { if ("number" != typeof i) { if (n.options.virtual) return n.dataSource.getByUid(e(i).data("uid")); i = i.hasClass("k-list-optionlabel") ? -1 : e(n.items()).index(i) } else n.hasOptionLabel() && (i -= 1); o = n.dataSource.flatView()[i] } return o || (o = n._optionLabelDataItem()), o }, refresh: function () { this.listView.refresh() }, text: function (e) { var i, n = this, o = n.options.ignoreCase; return (e = null === e ? "" : e) === t ? n._textAccessor() : "string" != typeof e ? (n._textAccessor(e), t) : (i = o ? e.toLowerCase() : e, n._select(function (e) { return e = n._text(e), o && (e = (e + "").toLowerCase()), e === i }).done(function () { n._textAccessor(n.dataItem() || e) }), t) }, _clearFilter: function () { e(this.filterInput).val(""), a.fn._clearFilter.call(this) }, value: function (e) { var i = this, n = i.listView, o = i.dataSource; return e === t ? (e = i._accessor() || i.listView.value()[0]) === t || null === e ? "" : e : (i.requireValueMapper(i.options, e), !e && i.hasOptionLabel() || (i._initialIndex = null), this.trigger("set", { value: e }), i._request && i.options.cascadeFrom && i.listView.bound() ? (i._valueSetter && o.unbind(m, i._valueSetter), i._valueSetter = C(function () { i.value(e) }, i), o.one(m, i._valueSetter), t) : (i._isFilterEnabled() && n.bound() && n.isFiltered() ? i._clearFilter() : i._fetchData(), n.value(e).done(function () { i._old = i._accessor(), i._oldIndex = i.selectedIndex }), t)) }, hasOptionLabel: function () { return this.optionLabel && !!this.optionLabel[0] }, _optionLabel: function () { var i = this, n = i.options, r = n.optionLabel, s = n.optionLabelTemplate; return r ? (s || (s = "#:", s += "string" == typeof r ? "data" : o.expr(n.dataTextField, "data"), s += "#"), "function" != typeof s && (s = o.template(s)), i.optionLabelTemplate = s, i.hasOptionLabel() || (i.optionLabel = e('<div class="k-list-optionlabel"></div>').prependTo(i.list)), i.optionLabel.html(s(r)).off().click(C(i._click, i)).on(w, i._toggleHover), i.angular("compile", function () { return { elements: i.optionLabel, data: [{ dataItem: i._optionLabelDataItem() }] } }), t) : (i.optionLabel.off().remove(), i.optionLabel = e(), t) }, _optionLabelText: function () { var e = this.options.optionLabel; return "string" == typeof e ? e : this._text(e) }, _optionLabelDataItem: function () { var t = this, i = t.options.optionLabel; return t.hasOptionLabel() ? e.isPlainObject(i) ? new d(i) : t._assignInstance(t._optionLabelText(), "") : null }, _buildOptions: function (e) { var i, n, o, r = this; r._isSelect && (i = r.listView.value()[0], n = r._optionLabelDataItem(), o = n && r._value(n), i !== t && null !== i || (i = ""), n && (o !== t && null !== o || (o = ""), n = '<option value="' + o + '">' + r._text(n) + "</option>"), r._options(e, n, i), i !== s.unifyType(r._accessor(), typeof i) && (r._customOption = null, r._custom(i))) }, _listBound: function () { var e, t = this, i = t._initialIndex, n = t._state === k, o = t.dataSource.flatView(); t._presetValue = !1, t._renderFooter(), t._renderNoData(), t._toggleNoData(!o.length), t._resizePopup(!0), t.popup.position(), t._buildOptions(o), t._makeUnselectable(), n || (t._open && t.toggle(t._allowOpening()), t._open = !1, t._fetch || (o.length ? (!t.listView.value().length && i > -1 && null !== i && t.select(i), t._initialIndex = null, (e = t.listView.selectedDataItems()[0]) && t.text() !== t._text(e) && t._selectValue(e)) : t._textAccessor() !== t._optionLabelText() && (t.listView.value(""), t._selectValue(null), t._oldIndex = t.selectedIndex))), t._hideBusy(), t.trigger("dataBound") }, _listChange: function () { this._selectValue(this.listView.selectedDataItems()[0]), (this._presetValue || this._old && -1 === this._oldIndex) && (this._oldIndex = this.selectedIndex) }, _filterPaste: function () { this._search() }, _focusHandler: function () { this.wrapper.focus() }, _focusinHandler: function () { this._inputWrapper.addClass(g), this._prevent = !1 }, _focusoutHandler: function () { var e = this, t = window.self !== window.top; e._prevent || (clearTimeout(e._typingTimeout), l.mobileOS.ios && t ? e._change() : e._blur(), e._inputWrapper.removeClass(g), e._prevent = !0, e._open = !1, e.element.blur()) }, _wrapperMousedown: function () { this._prevent = !!this.filterInput }, _wrapperClick: function (e) { e.preventDefault(), this.popup.unbind("activate", this._focusInputHandler), this._focused = this.wrapper, this._toggle() }, _editable: function (e) { var t = this, i = t.element, n = e.disable, o = e.readonly, r = t.wrapper.add(t.filterInput).off(h), s = t._inputWrapper.off(w); o || n ? n ? (r.removeAttr(y), s.addClass(_).removeClass(v)) : (s.addClass(v).removeClass(_), r.on("focusin" + h, C(t._focusinHandler, t)).on("focusout" + h, C(t._focusoutHandler, t))) : (i.removeAttr(f).removeAttr(p), s.addClass(v).removeClass(_).on(w, t._toggleHover), r.attr(y, r.data(y)).attr(b, !1).on("keydown" + h, C(t._keydown, t)).on("focusin" + h, C(t._focusinHandler, t)).on("focusout" + h, C(t._focusoutHandler, t)).on("mousedown" + h, C(t._wrapperMousedown, t)).on("paste" + h, C(t._filterPaste, t)), t.wrapper.on("click" + h, C(t._wrapperClick, t)), t.filterInput || r.on("keypress" + h, C(t._keypress, t))), i.attr(f, n).attr(p, o), r.attr(b, n) }, _keydown: function (e) { var i, n, o, r = this, s = e.keyCode, a = e.altKey, l = r.popup.visible(); if (r.filterInput && (i = r.filterInput[0] === c()), s === u.LEFT ? (s = u.UP, n = !0) : s === u.RIGHT && (s = u.DOWN, n = !0), !n || !i) { if (e.keyCode = s, (a && s === u.UP || s === u.ESC) && r._focusElement(r.wrapper), r._state === k && s === u.ESC && r._clearFilter(), s === u.ENTER && r._typingTimeout && r.filterInput && l) return e.preventDefault(), t; if (!(n = r._move(e))) { if ((!l || !r.filterInput) && (o = r._focus(), s === u.HOME ? (n = !0, r._firstItem()) : s === u.END && (n = !0, r._lastItem()), n)) { if (r.trigger("select", { dataItem: r._getElementDataItem(r._focus()), item: r._focus() })) return r._focus(o), t; r._select(r._focus(), !0).done(function () { l || r._blur() }), e.preventDefault() } a || n || !r.filterInput || r._search() } } }, _matchText: function (e, i) { var n = this.options.ignoreCase; return e !== t && null !== e && (e += "", n && (e = e.toLowerCase()), 0 === e.indexOf(i)) }, _shuffleData: function (e, t) { var i = this._optionLabelDataItem(); return i && (e = [i].concat(e)), e.slice(t).concat(e.slice(0, t)) }, _selectNext: function () { var e, t, i, o = this, r = o.dataSource.flatView(), s = r.length + (o.hasOptionLabel() ? 1 : 0), a = function (e, t) { for (var i = 0; i < e.length; i++)if (e.charAt(i) !== t) return !1; return !0 }(o._word, o._last), l = o.selectedIndex; for (-1 === l ? l = 0 : l = n(l += a ? 1 : 0, s), r = r.toJSON ? r.toJSON() : r.slice(), r = o._shuffleData(r, l), i = 0; i < s && (t = o._text(r[i]), !a || !o._matchText(t, o._last)) && !o._matchText(t, o._word); i++); i !== s && (e = o._focus(), o._select(n(l + i, s)).done(function () { var t = function () { o.popup.visible() || o._change() }; o.trigger("select", { dataItem: o._getElementDataItem(o._focus()), item: o._focus() }) ? o._select(e).done(t) : t() })) }, _keypress: function (e) { var t, i = this; 0 !== e.which && e.keyCode !== o.keys.ENTER && (t = String.fromCharCode(e.charCode || e.keyCode), i.options.ignoreCase && (t = t.toLowerCase()), " " === t && e.preventDefault(), i._word += t, i._last = t, i._search()) }, _popupOpen: function () { var e = this.popup; e.wrapper = o.wrap(e.element), e.element.closest(".km-root")[0] && (e.wrapper.addClass("km-popup km-widget"), this.wrapper.addClass("km-widget")) }, _popup: function () { a.fn._popup.call(this), this.popup.one("open", C(this._popupOpen, this)) }, _getElementDataItem: function (e) { return e && e[0] ? e[0] === this.optionLabel[0] ? this._optionLabelDataItem() : this.listView.dataItemByIndex(this.listView.getElementIndex(e)) : null }, _click: function (i) { var n = this, o = i.item || e(i.currentTarget); return i.preventDefault(), n.trigger("select", { dataItem: n._getElementDataItem(o), item: o }) ? (n.close(), t) : (n._userTriggered = !0, n._select(o).done(function () { n._focusElement(n.wrapper), n._blur() }), t) }, _focusElement: function (e) { var t = c(), i = this.wrapper, n = this.filterInput, o = e === n ? i : n, r = l.mobileOS && (l.touch || l.MSPointers || l.pointers); n && n[0] === e[0] && r || n && o[0] === t && (this._prevent = !0, this._focused = e.focus()) }, _searchByWord: function (e) { var t; e && ((t = this).options.ignoreCase && (e = e.toLowerCase()), t._select(function (i) { return t._matchText(t._text(i), e) })) }, _inputValue: function () { return this.text() }, _search: function () { var e = this, i = e.dataSource; if (clearTimeout(e._typingTimeout), e._isFilterEnabled()) e._typingTimeout = setTimeout(function () { var t = e.filterInput.val(); e._prev !== t && (e._prev = t, e.search(t), e._resizeFilterInput()), e._typingTimeout = null }, e.options.delay); else { if (e._typingTimeout = setTimeout(function () { e._word = "" }, e.options.delay), !e.listView.bound()) return i.fetch().done(function () { e._selectNext() }), t; e._selectNext() } }, _get: function (t) { var i, n, o, r = "function" == typeof t, s = r ? e() : e(t); if (this.hasOptionLabel() && ("number" == typeof t ? t > -1 && (t -= 1) : s.hasClass("k-list-optionlabel") && (t = -1)), r) { for (i = this.dataSource.flatView(), o = 0; o < i.length; o++)if (t(i[o])) { t = o, n = !0; break } n || (t = -1) } return t }, _firstItem: function () { this.hasOptionLabel() ? this._focus(this.optionLabel) : this.listView.focusFirst() }, _lastItem: function () { this._resetOptionLabel(), this.listView.focusLast() }, _nextItem: function () { this.optionLabel.hasClass("k-state-focused") ? (this._resetOptionLabel(), this.listView.focusFirst()) : this.listView.focusNext() }, _prevItem: function () { this.optionLabel.hasClass("k-state-focused") || (this.listView.focusPrev(), this.listView.focus() || this._focus(this.optionLabel)) }, _focusItem: function () { var e = this.options, i = this.listView, n = i.focus(), o = i.select(); (o = o[o.length - 1]) === t && e.highlightFirst && !n && (o = 0), o !== t ? i.focus(o) : !e.optionLabel || e.virtual && "dataItem" === e.virtual.mapValueTo ? i.scrollToIndex(0) : (this._focus(this.optionLabel), this._select(this.optionLabel)) }, _resetOptionLabel: function (e) { this.optionLabel.removeClass("k-state-focused" + (e || "")).removeAttr("id") }, _focus: function (e) { var i = this.listView, n = this.optionLabel; return e === t ? (!(e = i.focus()) && n.hasClass("k-state-focused") && (e = n), e) : (this._resetOptionLabel(), e = this._get(e), i.focus(e), -1 === e && (n.addClass("k-state-focused").attr("id", i._optionID), this._focused.add(this.filterInput).removeAttr("aria-activedescendant").attr("aria-activedescendant", i._optionID)), t) }, _select: function (e, t) { var i = this; return e = i._get(e), i.listView.select(e).done(function () { t || i._state !== k || (i._state = x), -1 === e && i._selectValue(null) }) }, _selectValue: function (e) { var i = this, n = i.options.optionLabel, o = i.listView.select(), r = "", s = ""; (o = o[o.length - 1]) === t && (o = -1), this._resetOptionLabel(" k-state-selected"), e ? (s = e, r = i._dataValue(e), n && (o += 1)) : n && (i._focus(i.optionLabel.addClass("k-state-selected")), s = i._optionLabelText(), r = "string" == typeof n ? "" : i._value(n), o = 0), i.selectedIndex = o, null === r && (r = ""), i._textAccessor(s), i._accessor(r, o), i._triggerCascade() }, _mobile: function () { var e = this.popup, t = l.mobileOS, i = e.element.parents(".km-root").eq(0); i.length && t && (e.options.animation.open.effects = t.android || t.meego ? "fadeIn" : t.ios || t.wp ? "slideIn:up" : e.options.animation.open.effects) }, _filterHeader: function () { this.filterInput && (this.filterInput.off(h).parent().remove(), this.filterInput = null), this._isFilterEnabled() && ('<span class="k-icon k-i-zoom"></span>', this.filterInput = e('<input class="k-textbox"/>').attr({ placeholder: this.element.attr("placeholder"), title: this.element.attr("title"), role: "listbox", "aria-haspopup": !0, "aria-expanded": !1 }), this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add('<span class="k-icon k-i-zoom"></span>')))) }, _span: function () { var t, i = this, n = i.wrapper, o = "span.k-input"; (t = n.find(o))[0] || (n.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(i.element), t = n.find(o)), i.span = t, i._inputWrapper = e(n[0].firstChild), i._arrow = n.find(".k-select"), i._arrowIcon = i._arrow.find(".k-icon") }, _wrapper: function () { var e, t = this, i = t.element, n = i[0]; (e = i.parent()).is("span.k-widget") || ((e = i.wrap("<span />").parent())[0].style.cssText = n.style.cssText, e[0].title = n.title), t._focused = t.wrapper = e.addClass("k-widget k-dropdown k-header").addClass(n.className).css("display", "").attr({ accesskey: i.attr("accesskey"), unselectable: "on", role: "listbox", "aria-haspopup": !0, "aria-expanded": !1 }), i.hide().removeAttr("accesskey") }, _clearSelection: function (e) { this.select(e.value() ? 0 : -1) }, _inputTemplate: function () { var t = this, i = t.options.valueTemplate; if (i = i ? o.template(i) : e.proxy(o.template("#:this._text(data)#", { useWithBlock: !1 }), t), t.valueTemplate = i, t.hasOptionLabel() && !t.options.optionLabelTemplate) try { t.valueTemplate(t._optionLabelDataItem()) } catch (e) { throw Error("The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel") } }, _textAccessor: function (i) { var n, o = null, r = this.valueTemplate, s = this._optionLabelText(), a = this.span; if (i === t) return a.text(); e.isPlainObject(i) || i instanceof d ? o = i : s && s === i && (o = this.options.optionLabel), o || (o = this._assignInstance(i, this._accessor())), this.hasOptionLabel() && (o !== s && this._text(o) !== s || (r = this.optionLabelTemplate, "string" != typeof this.options.optionLabel || this.options.optionLabelTemplate || (o = s))), n = function () { return { elements: a.get(), data: [{ dataItem: o }] } }, this.angular("cleanup", n); try { a.html(r(o)) } catch (e) { a.html("") } this.angular("compile", n) }, _preselect: function (e, t) { e || t || (t = this._optionLabelText()), this._accessor(e), this._textAccessor(t), this._old = this._accessor(), this._oldIndex = this.selectedIndex, this.listView.setValue(e), this._initialIndex = null, this._presetValue = !0 }, _assignInstance: function (e, t) { var n = this.options.dataTextField, o = {}; return n ? (i(o, n.split("."), e), i(o, this.options.dataValueField.split("."), t), o = new d(o)) : o = e, o } }); r.plugin(S) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.combobox.min", ["kendo.list.min", "kendo.mobile.scroller.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.ui, o = n.List, r = n.Select, s = i.caret, a = i.support, l = a.placeholder, c = i._activeElement, d = i.keys, u = ".kendoComboBox", h = "click" + u, f = "mousedown" + u, p = "disabled", m = "readonly", g = "change", v = "k-state-default", _ = "k-state-focused", b = "k-state-disabled", w = "aria-disabled", y = "filter", k = "accept", x = "rebind", C = e.proxy, S = r.extend({ init: function (t, n) { var o, s = this; s.ns = u, n = e.isArray(n) ? { dataSource: n } : n, r.fn.init.call(s, t, n), n = s.options, t = s.element.on("focus" + u, C(s._focusHandler, s)), n.placeholder = n.placeholder || t.attr("placeholder"), s._reset(), s._wrapper(), s._input(), s._clearButton(), s._tabindex(s.input), s._popup(), s._dataSource(), s._ignoreCase(), s._enable(), s._oldIndex = s.selectedIndex = -1, s._aria(), s._initialIndex = n.index, s.requireValueMapper(s.options), s._initList(), s._cascade(), n.autoBind ? s._filterSource() : (!(o = n.text) && s._isSelect && (o = t.children(":selected").text()), o && s._setText(o)), o || s._placeholder(), e(s.element).parents("fieldset").is(":disabled") && s.enable(!1), i.notify(s), s._toggleCloseVisibility() }, options: { name: "ComboBox", enabled: !0, index: -1, text: null, value: null, autoBind: !0, delay: 200, dataTextField: "", dataValueField: "", minLength: 1, enforceMinLength: !1, height: 200, highlightFirst: !0, filter: "none", placeholder: "", suggest: !1, cascadeFrom: "", cascadeFromField: "", ignoreCase: !0, animation: {}, virtual: !1, template: null, groupTemplate: "#:data#", fixedGroupTemplate: "#:data#", clearButton: !0, syncValueAndText: !0 }, events: ["open", "close", g, "select", "filtering", "dataBinding", "dataBound", "cascade", "set"], setOptions: function (e) { r.fn.setOptions.call(this, e), this.listView.setOptions(e), this._accessors(), this._aria() }, destroy: function () { var e = this; e.input.off(u), e.element.off(u), e._inputWrapper.off(u), clearTimeout(e._pasteTimeout), e._arrow.off(h + " " + f), e._clear.off(h + " " + f), r.fn.destroy.call(e) }, _change: function () { var e = this, i = e.text(), n = i && i !== e._oldText && i !== e.options.placeholder, o = e.selectedIndex, s = -1 === o; return !e.options.syncValueAndText && !e.value() && s && n ? (e._old = "", e._oldIndex = o, e._oldText = i, e._typing || e.element.trigger(g), e.trigger(g), e._typing = !1, t) : (r.fn._change.call(e), e._toggleCloseVisibility(), t) }, _focusHandler: function () { this.input.focus() }, _arrowClick: function () { this._toggle() }, _inputFocus: function () { this._inputWrapper.addClass(_), this._placeholder(!1) }, _inputFocusout: function () { var e, i, n = this, o = n.value(); return n._inputWrapper.removeClass(_), clearTimeout(n._typingTimeout), n._typingTimeout = null, n.text(n.text()), e = n._focus(), i = this.listView.dataItemByIndex(this.listView.getElementIndex(e)), o !== n.value() && n.trigger("select", { dataItem: i, item: e }) ? (n.value(o), t) : (n._placeholder(), n._blur(), n.element.blur(), t) }, _inputPaste: function () { var e = this; clearTimeout(e._pasteTimeout), e._pasteTimeout = null, e._pasteTimeout = setTimeout(function () { e.search() }) }, _editable: function (e) { var t = this, i = e.disable, n = e.readonly, o = t._inputWrapper.off(u), r = t.element.add(t.input.off(u)), s = t._arrow.off(h + " " + f), a = t._clear; n || i ? (o.addClass(i ? b : v).removeClass(i ? v : b), r.attr(p, i).attr(m, n).attr(w, i)) : (o.addClass(v).removeClass(b).on("mouseenter.kendoComboBox mouseleave.kendoComboBox", t._toggleHover), r.removeAttr(p).removeAttr(m).attr(w, !1), s.on(h, C(t._arrowClick, t)).on(f, function (e) { e.preventDefault() }), a.on(h, C(t._clearValue, t)).on(f, function (e) { e.preventDefault() }), t.input.on("keydown" + u, C(t._keydown, t)).on("focus" + u, C(t._inputFocus, t)).on("focusout" + u, C(t._inputFocusout, t)).on("paste" + u, C(t._inputPaste, t))) }, open: function () { var e = this, t = e._state; e.popup.visible() || (!e.listView.bound() && t !== y || t === k ? (e._open = !0, e._state = x, 1 !== e.options.minLength ? (e.refresh(), e._openPopup()) : e._filterSource()) : e._allowOpening() && (e._openPopup(), e._focusItem())) }, _scrollToFocusedItem: function () { var e = this.listView; e.scrollToIndex(e.getElementIndex(e.focus())) }, _openPopup: function () { this.popup.one("activate", C(this._scrollToFocusedItem, this)), this.popup.open() }, _updateSelectionState: function () { var e = this, i = e.options.text, n = e.options.value; e.listView.isFiltered() || (-1 === e.selectedIndex ? (i !== t && null !== i || (i = n), e._accessor(n), e.input.val(i || e.input.val()), e._placeholder()) : -1 === e._oldIndex && (e._oldIndex = e.selectedIndex)) }, _buildOptions: function (e) { var i, n = this; n._isSelect && (i = n._customOption, n._state === x && (n._state = ""), n._customOption = t, n._options(e, "", n.value()), i && i[0].selected && n._custom(i.val())) }, _updateSelection: function () { var i, n = this, o = n.listView, r = n._initialIndex, s = null !== r && r > -1, a = n._state === y; return a ? (e(o.focus()).removeClass("k-state-selected"), t) : (n._fetch || (o.value().length || (s ? n.select(r) : n._accessor() && o.value(n._accessor())), n._initialIndex = null, (i = o.selectedDataItems()[0]) && (n._value(i) !== n.value() && n._custom(n._value(i)), n.text() && n.text() !== n._text(i) && n._selectValue(i))), t) }, _updateItemFocus: function () { var e = this.listView; this.options.highlightFirst ? e.focus() || e.focusIndex() || e.focus(0) : e.focus(-1) }, _listBound: function () { var e = this, i = e.input[0] === c(), n = e.dataSource.flatView(), o = e.listView.skip(), r = o === t || 0 === o; e._presetValue = !1, e._renderFooter(), e._renderNoData(), e._toggleNoData(!n.length), e._resizePopup(), e.popup.position(), e._buildOptions(n), e._makeUnselectable(), e._updateSelection(), n.length && r && (e._updateItemFocus(), e.options.suggest && i && e.input.val() && e.suggest(n[0])), e._open && (e._open = !1, e._typingTimeout && !i ? e.popup.close() : e.toggle(e._allowOpening()), e._typingTimeout = null), e._hideBusy(), e.trigger("dataBound") }, _listChange: function () { this._selectValue(this.listView.selectedDataItems()[0]), this._presetValue && (this._oldIndex = this.selectedIndex) }, _get: function (e) { var t, i, n; if ("function" == typeof e) { for (t = this.dataSource.flatView(), n = 0; n < t.length; n++)if (e(t[n])) { e = n, i = !0; break } i || (e = -1) } return e }, _select: function (e, t) { var i = this; return -1 === (e = i._get(e)) && (i.input[0].value = "", i._accessor("")), i.listView.select(e).done(function () { t || i._state !== y || (i._state = k) }) }, _selectValue: function (e) { var i = this.listView.select(), n = "", o = ""; (i = i[i.length - 1]) === t && (i = -1), this.selectedIndex = i, -1 !== i || e ? (e && (n = this._dataValue(e), o = this._text(e)), null === n && (n = "")) : (o = this.input[0].value, this.options.syncValueAndText && (n = o), this.listView.focus(-1)), this._prev = this.input[0].value = o, this._accessor(n !== t ? n : o, i), this._placeholder(), this._triggerCascade() }, refresh: function () { this.listView.refresh() }, _toggleCloseVisibility: function () { this.text() ? this._showClear() : this._hideClear() }, suggest: function (e) { var i, n = this, r = n.input[0], a = n.text(), l = s(r)[0], u = n._last; return u == d.BACKSPACE || u == d.DELETE ? (n._last = t, t) : ("string" != typeof (e = e || "") && (e[0] && (e = n.dataSource.view()[o.inArray(e[0], n.ul[0])]), e = e ? n._text(e) : ""), l <= 0 && (l = a.toLowerCase().indexOf(e.toLowerCase()) + 1), e ? (i = (e = "" + e).toLowerCase().indexOf(a.toLowerCase())) > -1 && (a += e.substring(i + a.length)) : a = a.substring(0, l), a.length === l && e || (r.value = a, r === c() && s(r, l, a.length)), t) }, text: function (e) { var i, n, r, s, a, l; return e = null === e ? "" : e, n = (i = this).input[0], r = i.options.ignoreCase, s = e, e === t ? n.value : !1 !== i.options.autoBind || i.listView.bound() ? (a = i.dataItem()) && i._text(a) === e && (l = i._value(a)) === o.unifyType(i._old, typeof l) ? (i._triggerCascade(), t) : (r && !i.listView.value().length && (s = s.toLowerCase()), i._select(function (e) { return e = i._text(e), r && !i.listView.value().length && (e = (e + "").toLowerCase()), e === s }).done(function () { i.selectedIndex < 0 && (n.value = e, i.options.syncValueAndText && i._accessor(e), i._triggerCascade()), i._prev = n.value }), t) : (i._setText(e), t) }, toggle: function (e) { this._toggle(e, !0) }, value: function (e) { var i = this, n = i.options, o = i.listView; return e === t ? (e = i._accessor() || i.listView.value()[0]) === t || null === e ? "" : e : (i.requireValueMapper(i.options, e), i.trigger("set", { value: e }), e === n.value && i.input.val() === n.text || (i._accessor(e), i._isFilterEnabled() && o.bound() && o.isFiltered() ? i._clearFilter() : i._fetchData(), o.value(e).done(function () { -1 === i.selectedIndex && (i._accessor(e), i.input.val(e), i._placeholder(!0)), i._old = i._accessor(), i._oldIndex = i.selectedIndex, i._prev = i.input.val(), i._state === y && (i._state = k) })), t) }, _click: function (e) { var i = this, n = e.item, o = i.listView.dataItemByIndex(i.listView.getElementIndex(n)); return e.preventDefault(), i.trigger("select", { dataItem: o, item: n }) ? (i.close(), t) : (i._userTriggered = !0, i._select(n).done(function () { i._blur() }), t) }, _inputValue: function () { return this.text() }, _searchByWord: function (e) { var i, n = this, o = n.options, r = n.dataSource, s = o.ignoreCase; return s && (e = e.toLowerCase()), n.ul[0].firstChild ? (this.listView.focus(this._get(function (i) { var o = n._text(i); if (o !== t) return ("" == (o += "") || "" !== e) && (s && (o = o.toLowerCase()), 0 === o.indexOf(e)) })), (i = this.listView.focus()) && (o.suggest && n.suggest(i), this.open()), this.options.highlightFirst && !e && this.listView.focusFirst(), t) : (r.one(g, function () { r.view()[0] && n.search(e) }).fetch(), t) }, _input: function () { var t, i, n = this, o = n.element.removeClass("k-input")[0], r = o.accessKey, s = n.wrapper, a = "input.k-input", c = o.name || ""; c && (c = 'name="' + c + '_input" '), (t = s.find(a))[0] || (s.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input ' + c + 'class="k-input" type="text" autocomplete="off"/><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(n.element), t = s.find(a)), t[0].style.cssText = o.style.cssText, t[0].title = o.title, (i = parseInt(this.element.prop("maxlength") || this.element.attr("maxlength"), 10)) > -1 && (t[0].maxLength = i), t.addClass(o.className).css({ width: "100%", height: o.style.height }).attr({ role: "combobox", "aria-expanded": !1 }).show(), l && t.attr("placeholder", n.options.placeholder), r && (o.accessKey = "", t[0].accessKey = r), n._focused = n.input = t, n._inputWrapper = e(s[0].firstChild), n._arrow = s.find(".k-select").attr({ role: "button", tabIndex: -1 }), n._arrowIcon = n._arrow.find(".k-icon"), o.id && n._arrow.attr("aria-controls", n.ul[0].id) }, _clearButton: function () { this._clear = e('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({ role: "button", tabIndex: -1 }), this.options.clearButton && (this._clear.insertAfter(this.input), this.wrapper.addClass("k-combobox-clearable")) }, _keydown: function (e) { var t = this, i = e.keyCode; t._last = i, clearTimeout(t._typingTimeout), t._typingTimeout = null, i == d.TAB || t._move(e) || t._search() }, _placeholder: function (e) { if (!l) { var i, n = this, o = n.input, r = n.options.placeholder; if (r) { if (i = n.value(), e === t && (e = !i), o.toggleClass("k-readonly", e), !e) { if (i) return; r = "" } o.val(r), r || o[0] !== c() || s(o[0], 0, 0) } } }, _search: function () { var e = this; e._typingTimeout = setTimeout(function () { var t = e.text(); e._prev !== t && (e._prev = t, "none" === e.options.filter && e.listView.select(-1), e.search(t), e._toggleCloseVisibility()), e._typingTimeout = null }, e.options.delay) }, _setText: function (e) { this.input.val(e), this._prev = e }, _wrapper: function () { var e = this.element, t = e.parent(); t.is("span.k-widget") || ((t = e.hide().wrap("<span />").parent())[0].style.cssText = e[0].style.cssText), this.wrapper = t.addClass("k-widget k-combobox k-header").addClass(e[0].className).css("display", "") }, _clearSelection: function (e, t) { var i = e.value(), n = i && -1 === e.selectedIndex; -1 == this.selectedIndex && this.value() || (t || !i || n) && (this.options.value = "", this.value("")) }, _preselect: function (e, t) { this.input.val(t), this._accessor(e), this._old = this._accessor(), this._oldIndex = this.selectedIndex, this.listView.setValue(e), this._placeholder(), this._initialIndex = null, this._presetValue = !0 } }), n.plugin(S), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.multiselect.min", ["kendo.list.min", "kendo.mobile.scroller.min"], function () { return function (e, t) { var i = window.kendo, n = i.ui, o = n.List, r = i.keys, s = i._activeElement, a = i.data.ObservableArray, l = e.proxy, c = "id", d = "li", u = "accept", h = "filter", f = "rebind", p = "open", m = "close", g = "change", v = "select", _ = "deselect", b = "aria-disabled", w = "k-state-focused", y = "k-hidden", k = "k-state-hover", x = "k-state-disabled", C = "disabled", S = "readonly", T = ".kendoMultiSelect", D = "mouseenter" + T, A = "mouseleave" + T, E = /"/g, I = e.isArray, M = ["font-family", "font-size", "font-stretch", "font-style", "font-weight", "letter-spacing", "text-transform", "line-height"], R = o.extend({ init: function (t, n) { var r, s = this; s.ns = T, o.fn.init.call(s, t, n), s._optionsMap = {}, s._customOptions = {}, s._wrapper(), s._tagList(), s._input(), s._textContainer(), s._loader(), s._clearButton(), s._tabindex(s.input), t = s.element.attr("multiple", "multiple").hide(), (n = s.options).placeholder || (n.placeholder = t.data("placeholder")), (r = t.attr(c)) && (s._tagID = r + "_tag_active", r += "_taglist", s.tagList.attr(c, r)), s._aria(r), s._dataSource(), s._ignoreCase(), s._popup(), s._tagTemplate(), s.requireValueMapper(s.options), s._initList(), s._reset(), s._enable(), s._placeholder(), n.autoBind ? s.dataSource.fetch() : n.value && s._preselect(n.value), e(s.element).parents("fieldset").is(":disabled") && s.enable(!1), i.notify(s), s._toggleCloseVisibility() }, options: { name: "MultiSelect", tagMode: "multiple", enabled: !0, autoBind: !0, autoClose: !0, highlightFirst: !0, dataTextField: "", dataValueField: "", filter: "startswith", ignoreCase: !0, minLength: 1, enforceMinLength: !1, delay: 100, value: null, maxSelectedItems: null, placeholder: "", height: 200, animation: {}, virtual: !1, itemTemplate: "", tagTemplate: "", groupTemplate: "#:data#", fixedGroupTemplate: "#:data#", clearButton: !0 }, events: [p, m, g, v, _, "filtering", "dataBinding", "dataBound"], setDataSource: function (e) { this.options.dataSource = e, this._state = "", this._dataSource(), this.listView.setDataSource(this.dataSource), this.options.autoBind && this.dataSource.fetch() }, setOptions: function (e) { var t = this._listOptions(e); o.fn.setOptions.call(this, e), this.listView.setOptions(t), this._accessors(), this._aria(this.tagList.attr(c)), this._tagTemplate() }, currentTag: function (e) { var i = this; return e === t ? i._currentTag : (i._currentTag && (i._currentTag.removeClass(w).removeAttr(c), i.input.removeAttr("aria-activedescendant")), e && (e.addClass(w).attr(c, i._tagID), i.input.attr("aria-activedescendant", i._tagID)), i._currentTag = e, t) }, dataItems: function () { return this.listView.selectedDataItems() }, destroy: function () { var e = this, t = e.ns; clearTimeout(e._busy), clearTimeout(e._typingTimeout), e.wrapper.off(t), e.tagList.off(t), e.input.off(t), e._clear.off(t), o.fn.destroy.call(e) }, _activateItem: function () { o.fn._activateItem.call(this), this.currentTag(null) }, _listOptions: function (t) { var n = this, r = o.fn._listOptions.call(n, e.extend(t, { selectedItemChange: l(n._selectedItemChange, n), selectable: "multiple" })), s = this.options.itemTemplate || this.options.template, a = r.itemTemplate || s || r.template; return a || (a = "#:" + i.expr(r.dataTextField, "data") + "#"), r.template = a, r }, _setListValue: function () { o.fn._setListValue.call(this, this._initialValues.slice(0)) }, _listChange: function (e) { var i, n = this.dataSource.flatView(), o = this._optionsMap, r = this._value; for (this._state === f && (this._state = ""), i = 0; i < e.added.length; i++)if (o[r(e.added[i].dataItem)] === t) { this._render(n); break } this._selectValue(e.added, e.removed) }, _selectedItemChange: function (e) { var t, i, n = e.items; for (i = 0; i < n.length; i++)t = n[i], this.tagList.children().eq(t.index).children("span:first").html(this.tagTextTemplate(t.item)) }, _wrapperMousedown: function (t) { var n = this, o = "input" !== t.target.nodeName.toLowerCase(), r = e(t.target), a = r.hasClass("k-select") || r.hasClass("k-icon"); a && (a = !r.closest(".k-select").children(".k-i-arrow-60-down").length), !o || a && i.support.mobileOS || t.preventDefault(), a || (n.input[0] !== s() && o && n.input.focus(), 1 === n.options.minLength && n.open()) }, _inputFocus: function () { this._placeholder(!1), this.wrapper.addClass(w) }, _inputFocusout: function () { var e = this; clearTimeout(e._typingTimeout), e.wrapper.removeClass(w), e._placeholder(!e.listView.selectedDataItems()[0], !0), e.close(), e._state === h && (e._state = u, e.listView.skipUpdate(!0)), e.element.blur() }, _removeTag: function (e) { var i, n = this, o = n._state, r = e.index(), s = n.listView, a = s.value()[r], l = n.listView.selectedDataItems()[r], c = n._customOptions[a]; return n.trigger(_, { dataItem: l, item: e }) ? (n._close(), t) : (c !== t || o !== u && o !== h || (c = n._optionsMap[a]), i = function () { n.currentTag(null), n._change(), n._close() }, c === t ? s.select(s.select()[r]).done(i) : (n.element[0].children[c].selected = !1, s.removeAt(r), e.remove(), i()), t) }, _tagListClick: function (t) { var i = e(t.currentTarget); i.children(".k-i-arrow-60-down").length || this._removeTag(i.closest(d)) }, _clearClick: function () { var t = this; t.tagList.children().each(function (i, n) { t._removeTag(e(n)) }), t.input.val(""), t._search(), t.trigger("change"), t.focus() }, _editable: function (t) { var i = this, n = t.disable, o = t.readonly, r = i.wrapper.off(T), s = i.tagList.off(T), a = i.element.add(i.input.off(T)); o || n ? (n ? r.addClass(x) : r.removeClass(x), a.attr(C, n).attr(S, o).attr(b, n)) : (r.removeClass(x).on("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect", i._toggleHover).on("mousedown" + T + " touchend" + T, l(i._wrapperMousedown, i)), i.input.on("keydown.kendoMultiSelect", l(i._keydown, i)).on("paste" + T, l(i._search, i)).on("focus" + T, l(i._inputFocus, i)).on("focusout" + T, l(i._inputFocusout, i)), i._clear.on("click" + T, l(i._clearClick, i)), a.removeAttr(C).removeAttr(S).attr(b, !1), s.on(D, d, function () { e(this).addClass(k) }).on(A, d, function () { e(this).removeClass(k) }).on("click.kendoMultiSelect", "li.k-button .k-select", l(i._tagListClick, i))) }, _close: function () { var e = this; e.options.autoClose ? e.close() : e.popup.position() }, _filterSource: function (e, t) { t || (t = this._retrieveData), this._retrieveData = !1, o.fn._filterSource.call(this, e, t) }, close: function () { this.popup.close() }, open: function () { var e = this; e._request && (e._retrieveData = !1), e._retrieveData || !e.listView.bound() || e._state === u ? (e._open = !0, e._state = f, e.listView.skipUpdate(!0), e._filterSource()) : e._allowOpening() && (e.popup.open(), e._focusItem()) }, toggle: function (e) { this[(e = e !== t ? e : !this.popup.visible()) ? p : m]() }, refresh: function () { this.listView.refresh() }, _listBound: function () { var e = this, i = e.dataSource.flatView(), n = e.listView.skip(); e._render(i), e._renderFooter(), e._renderNoData(), e._toggleNoData(!i.length), e._resizePopup(), e._open && (e._open = !1, e.toggle(e._allowOpening())), e.popup.position(), !e.options.highlightFirst || n !== t && 0 !== n || e.listView.focusFirst(), e._touchScroller && e._touchScroller.reset(), e._hideBusy(), e._makeUnselectable(), e.trigger("dataBound") }, _inputValue: function () { var e = this.input.val(); return this.options.placeholder === e && (e = ""), e }, value: function (e) { var i = this, n = i.listView, o = n.value().slice(), r = i.options.maxSelectedItems, s = n.bound() && n.isFiltered(); return e === t ? o : (i.requireValueMapper(i.options, e), e = i._normalizeValues(e), null !== r && e.length > r && (e = e.slice(0, r)), s && i._clearFilter(), n.value(e), i._old = n.value(), s || i._fetchData(), t) }, _preselect: function (t, n) { var o = this; I(t) || t instanceof i.data.ObservableArray || (t = [t]), (e.isPlainObject(t[0]) || t[0] instanceof i.data.ObservableObject || !o.options.dataValueField) && (o.dataSource.data(t), o.value(n || o._initialValues), o._retrieveData = !0) }, _setOption: function (e, t) { var i = this.element[0].children[this._optionsMap[e]]; i && (i.selected = t) }, _fetchData: function () { var e = this, t = !!e.dataSource.view().length, i = 0 === e.listView.value().length; i || e._request || (e._retrieveData || !e._fetch && !t) && (e._fetch = !0, e._retrieveData = !1, e.dataSource.read().done(function () { e._fetch = !1 })) }, _isBound: function () { return this.listView.bound() && !this._retrieveData }, _dataSource: function () { var e = this, t = e.element, n = e.options, o = n.dataSource || {}; (o = I(o) ? { data: o } : o).select = t, o.fields = [{ field: n.dataTextField }, { field: n.dataValueField }], e.dataSource && e._refreshHandler ? e._unbindDataSource() : (e._progressHandler = l(e._showBusy, e), e._errorHandler = l(e._hideBusy, e)), e.dataSource = i.data.DataSource.create(o).bind("progress", e._progressHandler).bind("error", e._errorHandler) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { setTimeout(function () { t.value(t._initialValues), t._placeholder() }) }, t._form = o.on("reset", t._resetHandler)) }, _initValue: function () { var e = this.options.value || this.element.val(); this._old = this._initialValues = this._normalizeValues(e) }, _normalizeValues: function (t) { var i = this; return null === t ? t = [] : t && e.isPlainObject(t) ? t = [i._value(t)] : t && e.isPlainObject(t[0]) ? t = e.map(t, function (e) { return i._value(e) }) : I(t) || t instanceof a ? I(t) && (t = t.slice()) : t = [t], t }, _change: function () { var e = this, t = e.value(); (function (e, t) { var i; if (null === e && null !== t || null !== e && null === t) return !1; if ((i = e.length) !== t.length) return !1; for (; i--;)if (e[i] !== t[i]) return !1; return !0 })(t, e._old) || (e._old = t.slice(), e.trigger(g), e.element.trigger(g)), e._toggleCloseVisibility() }, _click: function (e) { var t = this, i = e.item; e.preventDefault(), t._select(i).done(function () { t._change(), t._close() }) }, _keydown: function (n) { var o, s = this, a = n.keyCode, l = s._currentTag, c = s.listView, d = c.focus(), u = s.input.val(), h = i.support.isRtl(s.wrapper), f = s.popup.visible(); if (a === r.DOWN) { if (n.preventDefault(), !f) return s.open(), d || c.focusFirst(), t; d ? (c.focusNext(), c.focus() || c.focusLast()) : c.focusFirst() } else if (a === r.UP) f && (d && c.focusPrev(), c.focus() || s.close()), n.preventDefault(); else if (a === r.LEFT && !h || a === r.RIGHT && h) u || (l = l ? l.prev() : e(s.tagList[0].lastChild))[0] && s.currentTag(l); else if (a === r.RIGHT && !h || a === r.LEFT && h) !u && l && (l = l.next(), s.currentTag(l[0] ? l : null)); else if (a === r.ENTER && f) s._select(d).done(function () { s._change(), s._close() }), n.preventDefault(); else if (a === r.ESC) f ? n.preventDefault() : s.currentTag(null), s.close(); else if (a === r.HOME) f ? c.focusFirst() : u || (l = s.tagList[0].firstChild) && s.currentTag(e(l)); else if (a === r.END) f ? c.focusLast() : u || (l = s.tagList[0].lastChild) && s.currentTag(e(l)); else if (a !== r.DELETE && a !== r.BACKSPACE || u) !s.popup.visible() || a !== r.PAGEDOWN && a !== r.PAGEUP ? (clearTimeout(s._typingTimeout), setTimeout(function () { s._scale() }), s._search()) : (n.preventDefault(), o = a === r.PAGEDOWN ? 1 : -1, c.scrollWith(o * c.screenHeight())); else { if ("single" === s.options.tagMode) return c.value([]), s._change(), s._close(), t; a !== r.BACKSPACE || l || (l = e(s.tagList[0].lastChild)), l && l[0] && s._removeTag(l) } }, _hideBusy: function () { var e = this; clearTimeout(e._busy), e.input.attr("aria-busy", !1), e._loading.addClass(y), e._request = !1, e._busy = null, e._showClear() }, _showBusyHandler: function () { this.input.attr("aria-busy", !0), this._loading.removeClass(y), this._hideClear() }, _showBusy: function () { var e = this; e._request = !0, e._busy || (e._busy = setTimeout(l(e._showBusyHandler, e), 100)) }, _placeholder: function (e, n) { var o = this, r = o.input, a = s(), l = o.options.placeholder, c = r.val(), d = r[0] === a, u = c.length; d && !o.options.autoClose && c !== l || (u = 0, c = ""), e === t && (e = !1, r[0] !== a && (e = !o.listView.selectedDataItems()[0])), o._prev = c, r.toggleClass("k-readonly", e).val(e ? l : c), d && !n && i.caret(r[0], u, u), o._scale() }, _scale: function () { var e, t = this, i = t.wrapper, n = i.width(), o = t._span.text(t.input.val()); i.is(":visible") ? e = o.width() + 25 : (o.appendTo(document.documentElement), n = e = o.width() + 25, o.appendTo(i)), t.input.width(e > n ? n : e) }, _option: function (e, n, o) { var r = "<option"; return e !== t && (-1 !== (e += "").indexOf('"') && (e = e.replace(E, "&quot;")), r += ' value="' + e + '"'), o && (r += " selected"), r += ">", n !== t && (r += i.htmlEncode(n)), r += "</option>" }, _render: function (e) { var t, i, n, o, r, s, a = this.listView.selectedDataItems(), l = this.listView.value(), c = e.length, d = ""; for (l.length !== a.length && (a = this._buildSelectedItems(l)), r = {}, s = {}, o = 0; o < c; o++)i = e[o], n = this._value(i), -1 !== (t = this._selectedItemIndex(n, a)) && a.splice(t, 1), s[n] = o, d += this._option(n, this._text(i), -1 !== t); if (a.length) for (o = 0; o < a.length; o++)i = a[o], n = this._value(i), r[n] = c, s[n] = c, c += 1, d += this._option(n, this._text(i), !0); this._customOptions = r, this._optionsMap = s, this.element.html(d) }, _buildSelectedItems: function (e) { var t, i, n = this.options.dataValueField, o = this.options.dataTextField, r = []; for (i = 0; i < e.length; i++)(t = {})[n] = e[i], t[o] = e[i], r.push(t); return r }, _selectedItemIndex: function (e, t) { for (var i = this._value, n = 0; n < t.length; n++)if (e === i(t[n])) return n; return -1 }, _search: function () { var e = this; e._typingTimeout = setTimeout(function () { var t = e._inputValue(); e._prev !== t && (e._prev = t, e.search(t), e._toggleCloseVisibility()) }, e.options.delay) }, _toggleCloseVisibility: function () { this.value().length || this.input.val() && this.input.val() !== this.options.placeholder ? this._showClear() : this._hideClear() }, _allowOpening: function () { return this._allowSelection() && o.fn._allowOpening.call(this) }, _allowSelection: function () { var e = this.options.maxSelectedItems; return null === e || e > this.listView.value().length }, _angularTagItems: function (t) { var i = this; i.angular(t, function () { return { elements: i.tagList[0].children, data: e.map(i.dataItems(), function (e) { return { dataItem: e } }) } }) }, _selectValue: function (e, t) { var i, n, o, r = this, s = r.value(), a = r.dataSource.total(), l = r.tagList, c = r._value; if (r._angularTagItems("cleanup"), "multiple" === r.options.tagMode) { for (o = t.length - 1; o > -1; o--)i = t[o], l[0].removeChild(l[0].children[i.position]), r._setOption(c(i.dataItem), !1); for (o = 0; o < e.length; o++)n = e[o], l.append(r.tagTemplate(n.dataItem)), r._setOption(c(n.dataItem), !0) } else { for ((!r._maxTotal || r._maxTotal < a) && (r._maxTotal = a), l.html(""), s.length && l.append(r.tagTemplate({ values: s, dataItems: r.dataItems(), maxTotal: r._maxTotal, currentTotal: a })), o = t.length - 1; o > -1; o--)r._setOption(c(t[o].dataItem), !1); for (o = 0; o < e.length; o++)r._setOption(c(e[o].dataItem), !0) } r._angularTagItems("compile"), r._placeholder() }, _select: function (t) { var i, n, o, r, s = e.Deferred().resolve(); return t ? (n = (i = this).listView, o = n.dataItemByIndex(n.getElementIndex(t)), r = t.hasClass("k-state-selected"), i._state === f && (i._state = ""), i._allowSelection() ? i.trigger(r ? _ : v, { dataItem: o, item: t }) ? (i._close(), s) : n.select(t).done(function () { i._placeholder(), i._state === h && (i._state = u, n.skipUpdate(!0)) }) : s) : s }, _input: function () { var t = this, i = t.element, n = i[0].accessKey, o = t._innerWrapper.children("input.k-input"); o[0] || (o = e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)), i.removeAttr("accesskey"), t._focused = t.input = o.attr({ accesskey: n, autocomplete: "off", role: "listbox", title: i[0].title, "aria-expanded": !1 }) }, _tagList: function () { var t = this, i = t._innerWrapper.children("ul"); i[0] || (i = e('<ul role="listbox" deselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)), t.tagList = i }, _tagTemplate: function () { var e, t = this, n = t.options, o = n.tagTemplate, r = n.dataSource, s = "multiple" === n.tagMode; t.element[0].length && !r && (n.dataTextField = n.dataTextField || "text", n.dataValueField = n.dataValueField || "value"), e = s ? i.template("#:" + i.expr(n.dataTextField, "data") + "#", { useWithBlock: !1 }) : i.template("#:values.length# item(s) selected"), t.tagTextTemplate = o = o ? i.template(o) : e, t.tagTemplate = function (e) { return '<li class="k-button" deselectable="on"><span deselectable="on">' + o(e) + '</span><span unselectable="on" aria-label="' + (s ? "delete" : "open") + '" class="k-select"><span class="k-icon ' + (s ? "k-i-close" : "k-i-arrow-60-down") + '"></span></span></li>' } }, _loader: function () { this._loading = e('<span class="k-icon k-i-loading ' + y + '"></span>').insertAfter(this.input) }, _clearButton: function () { this._clear = e('<span deselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({ role: "button", tabIndex: -1 }), this.options.clearButton && this._clear.insertAfter(this.input) }, _textContainer: function () { var t = i.getComputedStyles(this.input[0], M); t.position = "absolute", t.visibility = "hidden", t.top = -3333, t.left = -3333, this._span = e("<span/>").css(t).appendTo(this.wrapper) }, _wrapper: function () { var t = this, i = t.element, n = i.parent("span.k-multiselect"); n[0] || ((n = i.wrap('<div class="k-widget k-multiselect k-header" deselectable="on" />').parent())[0].style.cssText = i[0].style.cssText, n[0].title = i[0].title, e('<div class="k-multiselect-wrap k-floatwrap" deselectable="on" />').insertBefore(i)), t.wrapper = n.addClass(i[0].className).css("display", ""), t._innerWrapper = e(n[0].firstChild) } }); n.plugin(R) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.slider.min", ["kendo.draganddrop.min"], function () { return function (e, t) { function i(e, t, i, n) { var o = ""; return o = i ? !n && "increase" == t || n && "increase" != t ? "k-i-arrow-60-right" : "k-i-arrow-60-left" : "increase" == t ? "k-i-arrow-60-up" : "k-i-arrow-60-down", "<a class='k-button k-button-" + t + "' title='" + e[t + "ButtonTitle"] + "' aria-label='" + e[t + "ButtonTitle"] + "'><span class='k-icon " + o + "'></span></a>" } function n(e) { return function (t) { return t + e } } function o(e) { return function () { return e } } function r(e) { return (e + "").replace(".", u.cultures.current.numberFormat["."]) } function s(e) { var t, i; return e = parseFloat(e, 10), t = function (e) { var t = "" + e, i = 0; return (t = t.split("."))[1] && (i = t[1].length), i = i > 10 ? 10 : i }(e), i = y.pow(10, t || 0), y.round(e * i) / i } function a(e, i) { var n = _(e.getAttribute(i)); return null === n && (n = t), n } function l(e) { return typeof e !== G } function c(e) { return 1e4 * e } var d, u = window.kendo, h = u.ui.Widget, f = u.ui.Draggable, p = u._outerWidth, m = u._outerHeight, g = e.extend, v = u.format, _ = u.parseFloat, b = e.proxy, w = e.isArray, y = Math, k = u.support, x = k.pointers, C = k.msPointers, S = "change", T = "slide", D = ".slider", A = "touchstart" + D + " mousedown" + D, E = x ? "pointerdown" + D : C ? "MSPointerDown" + D : A, I = "touchend" + D + " mouseup" + D, M = x ? "pointerup" : C ? "MSPointerUp" + D : I, R = "moveSelection", F = "keydown" + D, z = "click" + D, P = "mouseover" + D, B = "focus" + D, L = "blur" + D, H = ".k-draghandle", N = ".k-slider-track", O = ".k-tick", V = "k-state-selected", U = "k-state-focused", W = "k-state-default", q = "k-state-disabled", j = "disabled", G = "undefined", $ = "tabindex", Y = u.getTouches, K = h.extend({ init: function (e, t) { var i, r = this; if (h.fn.init.call(r, e, t), t = r.options, r._isHorizontal = "horizontal" == t.orientation, r._isRtl = r._isHorizontal && u.support.isRtl(e), r._position = r._isHorizontal ? "left" : "bottom", r._sizeFn = r._isHorizontal ? "width" : "height", r._outerSize = r._isHorizontal ? p : m, t.tooltip.format = t.tooltip.enabled && t.tooltip.format || "{0}", t.smallStep <= 0) throw Error("Kendo UI Slider smallStep must be a positive number."); r._createHtml(), r.wrapper = r.element.closest(".k-slider"), r._trackDiv = r.wrapper.find(N), r._setTrackDivWidth(), r._maxSelection = r._trackDiv[r._sizeFn](), r._sliderItemsInit(), r._reset(), r._tabindex(r.wrapper.find(H)), r[t.enabled ? "enable" : "disable"](), i = u.support.isRtl(r.wrapper) ? -1 : 1, r._keyMap = { 37: n(-1 * i * t.smallStep), 40: n(-t.smallStep), 39: n(1 * i * t.smallStep), 38: n(+t.smallStep), 35: o(t.max), 36: o(t.min), 33: n(+t.largeStep), 34: n(-t.largeStep) }, u.notify(r) }, events: [S, T], options: { enabled: !0, min: 0, max: 10, smallStep: 1, largeStep: 5, orientation: "horizontal", tickPlacement: "both", tooltip: { enabled: !0, format: "{0}" } }, _distance: function () { return s(this.options.max - this.options.min) }, _resize: function () { this._setTrackDivWidth(), this.wrapper.find(".k-slider-items").remove(), this._maxSelection = this._trackDiv[this._sizeFn](), this._sliderItemsInit(), this._refresh(), this.options.enabled && this.enable(!0) }, _sliderItemsInit: function () { var t = this, i = t.options, n = t._maxSelection / ((i.max - i.min) / i.smallStep), o = t._calculateItemsWidth(y.floor(t._distance() / i.smallStep)); "none" != i.tickPlacement && n >= 2 && (e(this.element).parent().find(".k-slider-items").remove(), t._trackDiv.before(function (e, t) { var i, n = "<ul class='k-reset k-slider-items'>", o = y.floor(s(t / e.smallStep)) + 1; for (i = 0; i < o; i++)n += "<li class='k-tick' role='presentation'>&nbsp;</li>"; return n += "</ul>" }(i, t._distance())), t._setItemsWidth(o), t._setItemsTitle()), t._calculateSteps(o), "none" != i.tickPlacement && n >= 2 && i.largeStep >= i.smallStep && t._setItemsLargeTick() }, getSize: function () { return u.dimensions(this.wrapper) }, _setTrackDivWidth: function () { var e = this, t = 2 * parseFloat(e._trackDiv.css(e._isRtl ? "right" : e._position), 10); e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]() - 2 - t) }, _setItemsWidth: function (t) { var i, n = this, o = n.options, r = t.length - 1, s = n.wrapper.find(O), a = 0, l = s.length, c = 0; for (i = 0; i < l - 2; i++)e(s[i + 1])[n._sizeFn](t[i]); if (n._isHorizontal ? (e(s[0]).addClass("k-first")[n._sizeFn](t[r - 1]), e(s[r]).addClass("k-last")[n._sizeFn](t[r])) : (e(s[r]).addClass("k-first")[n._sizeFn](t[r]), e(s[0]).addClass("k-last")[n._sizeFn](t[r - 1])), n._distance() % o.smallStep != 0 && !n._isHorizontal) { for (i = 0; i < t.length; i++)c += t[i]; a = n._maxSelection - c, a += parseFloat(n._trackDiv.css(n._position), 10) + 2, n.wrapper.find(".k-slider-items").css("padding-top", a) } }, _setItemsTitle: function () { for (var t = this, i = t.options, n = t.wrapper.find(O), o = i.min, r = n.length, a = t._isHorizontal && !t._isRtl ? 0 : r - 1, l = t._isHorizontal && !t._isRtl ? r : -1, c = t._isHorizontal && !t._isRtl ? 1 : -1; a - l != 0; a += c)e(n[a]).attr("title", v(i.tooltip.format, s(o))), o += i.smallStep }, _setItemsLargeTick: function () { var t, i, n, o = this, r = o.options, a = o.wrapper.find(O), l = 0; if (c(r.largeStep) % c(r.smallStep) == 0 || o._distance() / r.largeStep >= 3) for (o._isHorizontal || o._isRtl || (a = e.makeArray(a).reverse()), l = 0; l < a.length; l++)t = e(a[l]), i = o._values[l], (n = s(c(i - this.options.min))) % c(r.smallStep) == 0 && n % c(r.largeStep) == 0 && (t.addClass("k-tick-large").html("<span class='k-label'>" + t.attr("title") + "</span>"), 0 !== l && l !== a.length - 1 && t.css("line-height", t[o._sizeFn]() + "px")) }, _calculateItemsWidth: function (e) { var t, i, n, o = this, r = o.options, s = parseFloat(o._trackDiv.css(o._sizeFn)) + 1, a = o._distance(), l = s / a; for (a / r.smallStep - y.floor(a / r.smallStep) > 0 && (s -= a % r.smallStep * l), t = s / e, i = [], n = 0; n < e - 1; n++)i[n] = t; return i[e - 1] = i[e] = t / 2, o._roundWidths(i) }, _roundWidths: function (e) { var t, i = 0, n = e.length; for (t = 0; t < n; t++)i += e[t] - y.floor(e[t]), e[t] = y.floor(e[t]); return i = y.round(i), this._addAdditionalSize(i, e) }, _addAdditionalSize: function (e, t) { if (0 === e) return t; var i, n = parseFloat(t.length - 1) / parseFloat(1 == e ? e : e - 1); for (i = 0; i < e; i++)t[parseInt(y.round(n * i), 10)] += 1; return t }, _calculateSteps: function (e) { var t, i = this, n = i.options, o = n.min, r = 0, a = i._distance(), l = y.ceil(a / n.smallStep), c = 1; if (l += a / n.smallStep % 1 == 0 ? 1 : 0, e.splice(0, 0, 2 * e[l - 2]), e.splice(l - 1, 1, 2 * e.pop()), i._pixelSteps = [r], i._values = [o], 0 !== l) { for (; c < l;)r += (e[c - 1] + e[c]) / 2, i._pixelSteps[c] = r, o += n.smallStep, i._values[c] = s(o), c++; t = a % n.smallStep == 0 ? l - 1 : l, i._pixelSteps[t] = i._maxSelection, i._values[t] = n.max, i._isRtl && (i._pixelSteps.reverse(), i._values.reverse()) } }, _getValueFromPosition: function (e, t) { var i, n = this, o = n.options, r = y.max(o.smallStep * (n._maxSelection / n._distance()), 0), a = 0, l = r / 2; if (n._isHorizontal ? (a = e - t.startPoint, n._isRtl && (a = n._maxSelection - a)) : a = t.startPoint - e, n._maxSelection - (parseInt(n._maxSelection % r, 10) - 3) / 2 < a) return o.max; for (i = 0; i < n._pixelSteps.length; i++)if (y.abs(n._pixelSteps[i] - a) - 1 <= l) return s(n._values[i]) }, _getFormattedValue: function (e, t) { var i, n, o, r = "", s = this.options.tooltip; return w(e) ? (n = e[0], o = e[1]) : t && t.type && (n = t.selectionStart, o = t.selectionEnd), t && (i = t.tooltipTemplate), !i && s.template && (i = u.template(s.template)), w(e) || t && t.type ? i ? r = i({ selectionStart: n, selectionEnd: o }) : (n = v(s.format, n), o = v(s.format, o), r = n + " - " + o) : (t && (t.val = e), r = i ? i({ value: e }) : v(s.format, e)), r }, _getDraggableArea: function () { var e = this, t = u.getOffset(e._trackDiv); return { startPoint: e._isHorizontal ? t.left : t.top + e._maxSelection, endPoint: e._isHorizontal ? t.left + e._maxSelection : t.top } }, _createHtml: function () { var e = this, t = e.element, n = e.options, o = t.find("input"); 2 == o.length ? (o.eq(0).prop("value", r(n.selectionStart)), o.eq(1).prop("value", r(n.selectionEnd))) : t.prop("value", r(n.value)), t.wrap(function (e, t, i) { var n = i ? " k-slider-horizontal" : " k-slider-vertical", o = e.style ? e.style : t.attr("style"), r = t.attr("class") ? " " + t.attr("class") : "", s = ""; return "bottomRight" == e.tickPlacement ? s = " k-slider-bottomright" : "topLeft" == e.tickPlacement && (s = " k-slider-topleft"), "<div class='k-widget k-slider" + n + r + "'" + (o = o ? " style='" + o + "'" : "") + "><div class='k-slider-wrap" + (e.showButtons ? " k-slider-buttons" : "") + s + "'></div></div>" }(n, t, e._isHorizontal)).hide(), n.showButtons && t.before(i(n, "increase", e._isHorizontal, e._isRtl)).before(i(n, "decrease", e._isHorizontal, e._isRtl)), t.before(function (e, t) { var i = t.is("input") ? 1 : 2; return "<div class='k-slider-track'><div class='k-slider-selection'>\x3c!-- --\x3e</div><a href='#' class='k-draghandle' title='" + (2 == i ? e.leftDragHandleTitle : e.dragHandleTitle) + "' role='slider' aria-valuemin='" + e.min + "' aria-valuemax='" + e.max + "' aria-valuenow='" + (i > 1 ? e.selectionStart || e.min : e.value || e.min) + "'>Drag</a>" + (i > 1 ? "<a href='#' class='k-draghandle' title='" + e.rightDragHandleTitle + "'role='slider' aria-valuemin='" + e.min + "' aria-valuemax='" + e.max + "' aria-valuenow='" + (e.selectionEnd || e.max) + "'>Drag</a>" : "") + "</div>" }(n, t)) }, _focus: function (t) { var i = this, n = t.target, o = i.value(), r = i._drag; r || (n == i.wrapper.find(H).eq(0)[0] ? (r = i._firstHandleDrag, i._activeHandle = 0) : (r = i._lastHandleDrag, i._activeHandle = 1), o = o[i._activeHandle]), e(n).addClass(U + " " + V), r && (i._activeHandleDrag = r, r.selectionStart = i.options.selectionStart, r.selectionEnd = i.options.selectionEnd, r._updateTooltip(o)) }, _focusWithMouse: function (t) { t = e(t); var i = this, n = t.is(H) ? t.index() : 0; window.setTimeout(function () { i.wrapper.find(H)[2 == n ? 1 : 0].focus() }, 1), i._setTooltipTimeout() }, _blur: function (t) { var i = this, n = i._activeHandleDrag; e(t.target).removeClass(U + " " + V), n && (n._removeTooltip(), delete i._activeHandleDrag, delete i._activeHandle) }, _setTooltipTimeout: function () { var e = this; e._tooltipTimeout = window.setTimeout(function () { var t = e._drag || e._activeHandleDrag; t && t._removeTooltip() }, 300) }, _clearTooltipTimeout: function () { var e; window.clearTimeout(this._tooltipTimeout), (e = this._drag || this._activeHandleDrag) && e.tooltipDiv && e.tooltipDiv.stop(!0, !1).css("opacity", 1) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._form = o.on("reset", b(t._formResetHandler, t))) }, min: function (e) { return e ? (this.setOptions({ min: e }), t) : this.options.min }, max: function (e) { return e ? (this.setOptions({ max: e }), t) : this.options.max }, setOptions: function (e) { h.fn.setOptions.call(this, e), this._sliderItemsInit(), this._refresh() }, destroy: function () { this._form && this._form.off("reset", this._formResetHandler), h.fn.destroy.call(this) } }), Q = K.extend({ init: function (i, n) { var o, s = this; i.type = "text", n = g({}, { value: a(i, "value"), min: a(i, "min"), max: a(i, "max"), smallStep: a(i, "step") }, n), i = e(i), n && n.enabled === t && (n.enabled = !i.is("[disabled]")), K.fn.init.call(s, i, n), l((n = s.options).value) && null !== n.value || (n.value = n.min, i.prop("value", r(n.min))), n.value = y.max(y.min(n.value, n.max), n.min), o = s.wrapper.find(H), this._selection = new Q.Selection(o, s, n), s._drag = new Q.Drag(o, "", s, n) }, options: { name: "Slider", showButtons: !0, increaseButtonTitle: "Increase", decreaseButtonTitle: "Decrease", dragHandleTitle: "drag", tooltip: { format: "{0:#,#.##}" }, value: null }, enable: function (i) { var n, o, r, s = this, a = s.options; s.disable(), !1 !== i && (s.wrapper.removeClass(q).addClass(W), s.wrapper.find("input").removeAttr(j), n = function (i) { var n, o, r, a = Y(i)[0]; if (a) { if (n = s._isHorizontal ? a.location.pageX : a.location.pageY, o = s._getDraggableArea(), (r = e(i.target)).hasClass("k-draghandle")) return r.addClass(U + " " + V), t; s._update(s._getValueFromPosition(n, o)), s._focusWithMouse(i.target), s._drag.dragstart(i), i.preventDefault() } }, s.wrapper.find(O + ", " + N).on(E, n).end().on(E, function () { e(document.documentElement).one("selectstart", u.preventDefault) }).on(M, function () { s._drag._end() }), s.wrapper.find(H).attr($, 0).on(I, function () { s._setTooltipTimeout() }).on(z, function (e) { s._focusWithMouse(e.target), e.preventDefault() }).on(B, b(s._focus, s)).on(L, b(s._blur, s)), o = b(function (e) { var t = s._nextValueByIndex(s._valueIndex + 1 * e); s._setValueInRange(t), s._drag._updateTooltip(t) }, s), a.showButtons && (r = b(function (e, t) { this._clearTooltipTimeout(), (1 === e.which || k.touch && 0 === e.which) && (o(t), this.timeout = setTimeout(b(function () { this.timer = setInterval(function () { o(t) }, 60) }, this), 200)) }, s), s.wrapper.find(".k-button").on(I, b(function (e) { this._clearTimer(), s._focusWithMouse(e.target) }, s)).on(P, function (t) { e(t.currentTarget).addClass("k-state-hover") }).on("mouseout" + D, b(function (t) { e(t.currentTarget).removeClass("k-state-hover"), this._clearTimer() }, s)).eq(0).on(A, b(function (e) { r(e, 1) }, s)).click(!1).end().eq(1).on(A, b(function (e) { r(e, -1) }, s)).click(u.preventDefault)), s.wrapper.find(H).off(F, !1).on(F, b(this._keydown, s)), a.enabled = !0) }, disable: function () { var t = this; t.wrapper.removeClass(W).addClass(q), e(t.element).prop(j, j), t.wrapper.find(".k-button").off(A).on(A, function (t) { t.preventDefault(), e(this).addClass("k-state-active") }).off(I).on(I, function (t) { t.preventDefault(), e(this).removeClass("k-state-active") }).off("mouseleave" + D).on("mouseleave" + D, u.preventDefault).off(P).on(P, u.preventDefault), t.wrapper.find(O + ", " + N).off(E).off(M), t.wrapper.find(H).attr($, -1).off(I).off(F).off(z).off(B).off(L), t.options.enabled = !1 }, _update: function (e) { var t = this, i = t.value() != e; t.value(e), i && t.trigger(S, { value: t.options.value }) }, value: function (e) { var i = this, n = i.options; return e = s(e), isNaN(e) ? n.value : (e >= n.min && e <= n.max && n.value != e && (i.element.prop("value", r(e)), n.value = e, i._refreshAriaAttr(e), i._refresh()), t) }, _refresh: function () { this.trigger(R, { value: this.options.value }) }, _refreshAriaAttr: function (e) { var t, i = this._drag; t = i && i._tooltipDiv ? i._tooltipDiv.text() : this._getFormattedValue(e, null), this.wrapper.find(H).attr("aria-valuenow", e).attr("aria-valuetext", t) }, _clearTimer: function () { clearTimeout(this.timeout), clearInterval(this.timer) }, _keydown: function (e) { var t = this; e.keyCode in t._keyMap && (t._clearTooltipTimeout(), t._setValueInRange(t._keyMap[e.keyCode](t.options.value)), t._drag._updateTooltip(t.value()), e.preventDefault()) }, _setValueInRange: function (e) { var i = this, n = i.options; return e = s(e), isNaN(e) ? (i._update(n.min), t) : (e = y.max(y.min(e, n.max), n.min), i._update(e), t) }, _nextValueByIndex: function (e) { var t = this._values.length; return this._isRtl && (e = t - 1 - e), this._values[y.max(0, y.min(e, t - 1))] }, _formResetHandler: function () { var e = this, t = e.options.min; setTimeout(function () { var i = e.element[0].value; e.value("" === i || isNaN(i) ? t : i) }) }, destroy: function () { var e = this; K.fn.destroy.call(e), e.wrapper.off(D).find(".k-button").off(D).end().find(H).off(D).end().find(O + ", " + N).off(D).end(), e._drag.draggable.destroy(), e._drag._removeTooltip(!0) } }); Q.Selection = function (e, t, i) { function n(n) { var o = n - i.min, r = t._valueIndex = y.ceil(s(o / i.smallStep)), a = parseInt(t._pixelSteps[r], 10), l = t._trackDiv.find(".k-slider-selection"), c = parseInt(t._outerSize(e) / 2, 10), d = t._isRtl ? 2 : 0; l[t._sizeFn](t._isRtl ? t._maxSelection - a : a), e.css(t._position, a - c - d) } n(i.value), t.bind([T, R], function (e) { n(parseFloat(e.value, 10)) }), t.bind(S, function (e) { n(parseFloat(e.sender.value(), 10)) }) }, Q.Drag = function (e, t, i, n) { var o = this; o.owner = i, o.options = n, o.element = e, o.type = t, o.draggable = new f(e, { distance: 0, dragstart: b(o._dragstart, o), drag: b(o.drag, o), dragend: b(o.dragend, o), dragcancel: b(o.dragcancel, o) }), e.click(!1) }, Q.Drag.prototype = { dragstart: function (e) { this.owner._activeDragHandle = this, this.draggable.userEvents.cancel(), this._dragstart(e), this.dragend() }, _dragstart: function (i) { var n = this, o = n.owner, r = n.options; return r.enabled ? (this.owner._activeDragHandle = this, o.element.off(P), o.wrapper.find("." + U).removeClass(U + " " + V), n.element.addClass(U + " " + V), e(document.documentElement).css("cursor", "pointer"), n.dragableArea = o._getDraggableArea(), n.step = y.max(r.smallStep * (o._maxSelection / o._distance()), 0), n.type ? (n.selectionStart = r.selectionStart, n.selectionEnd = r.selectionEnd, o._setZIndex(n.type)) : n.oldVal = n.val = r.value, n._removeTooltip(!0), n._createTooltip(), t) : (i.preventDefault(), t) }, _createTooltip: function () { var t, i = this, n = i.owner, o = i.options.tooltip, r = "", s = e(window); o.enabled && (o.template && (i.tooltipTemplate = u.template(o.template)), e(".k-slider-tooltip").remove(), i.tooltipDiv = e("<div class='k-widget k-tooltip k-slider-tooltip'>\x3c!-- --\x3e</div>").appendTo(document.body), r = n._getFormattedValue(i.val || n.value(), i), i.type || (t = "k-callout-" + (n._isHorizontal ? "s" : "e"), i.tooltipInnerDiv = "<div class='k-callout " + t + "'>\x3c!-- --\x3e</div>", r += i.tooltipInnerDiv), i.tooltipDiv.html(r), i._scrollOffset = { top: s.scrollTop(), left: s.scrollLeft() }, i.moveTooltip()) }, drag: function (e) { var t, i = this, n = i.owner, o = e.x.location, r = e.y.location, s = i.dragableArea.startPoint, a = i.dragableArea.endPoint; e.preventDefault(), i.val = n._isHorizontal ? n._isRtl ? i.constrainValue(o, s, a, o < a) : i.constrainValue(o, s, a, o >= a) : i.constrainValue(r, a, s, r <= a), i.oldVal != i.val && (i.oldVal = i.val, i.type ? ("firstHandle" == i.type ? i.selectionStart = i.val < i.selectionEnd ? i.val : i.selectionEnd = i.val : i.val > i.selectionStart ? i.selectionEnd = i.val : i.selectionStart = i.selectionEnd = i.val, t = { values: [i.selectionStart, i.selectionEnd], value: [i.selectionStart, i.selectionEnd] }) : t = { value: i.val }, n.trigger(T, t)), i._updateTooltip(i.val) }, _updateTooltip: function (e) { var t = this, i = t.options, n = i.tooltip, o = ""; n.enabled && (t.tooltipDiv || t._createTooltip(), o = t.owner._getFormattedValue(s(e), t), t.type || (o += t.tooltipInnerDiv), t.tooltipDiv.html(o), t.moveTooltip()) }, dragcancel: function () { return this.owner._refresh(), e(document.documentElement).css("cursor", ""), this._end() }, dragend: function () { var t = this, i = t.owner; return e(document.documentElement).css("cursor", ""), t.type ? i._update(t.selectionStart, t.selectionEnd) : (i._update(t.val), t.draggable.userEvents._disposeAll()), t.draggable.userEvents.cancel(), t._end() }, _end: function () { var e = this.owner; return e._focusWithMouse(this.element), e.element.on(P), !1 }, _removeTooltip: function (t) { var i = this, n = i.owner; i.tooltipDiv && n.options.tooltip.enabled && n.options.enabled && (t ? (i.tooltipDiv.remove(), i.tooltipDiv = null) : i.tooltipDiv.fadeOut("slow", function () { e(this).remove(), i.tooltipDiv = null })) }, moveTooltip: function () { var t, i, n, o, r = this, s = r.owner, a = 0, l = 0, c = r.element, d = u.getOffset(c), h = e(window), f = r.tooltipDiv.find(".k-callout"), g = p(r.tooltipDiv), v = m(r.tooltipDiv); r.type ? (t = s.wrapper.find(H), d = u.getOffset(t.eq(0)), i = u.getOffset(t.eq(1)), s._isHorizontal ? (a = i.top, l = d.left + (i.left - d.left) / 2) : (a = d.top + (i.top - d.top) / 2, l = i.left), o = p(t.eq(0)) + 16) : (a = d.top, l = d.left, o = p(c) + 16), s._isHorizontal ? (l -= parseInt((g - s._outerSize(c)) / 2, 10), a -= v + f.height() + 8) : (a -= parseInt((v - s._outerSize(c)) / 2, 10), l -= g + f.width() + 8), s._isHorizontal ? (n = r._flip(a, v, o, m(h) + r._scrollOffset.top), a += n, l += r._fit(l, g, p(h) + r._scrollOffset.left)) : (n = r._flip(l, g, o, p(h) + r._scrollOffset.left), a += r._fit(a, v, m(h) + r._scrollOffset.top), l += n), n > 0 && f && (f.removeClass(), f.addClass("k-callout k-callout-" + (s._isHorizontal ? "n" : "w"))), r.tooltipDiv.css({ top: a, left: l }) }, _fit: function (e, t, i) { var n = 0; return e + t > i && (n = i - (e + t)), e < 0 && (n = -e), n }, _flip: function (e, t, i, n) { var o = 0; return e + t > n && (o += -(i + t)), e + o < 0 && (o += i + t), o }, constrainValue: function (e, t, i, n) { var o = this; return t < e && e < i ? o.owner._getValueFromPosition(e, o.dragableArea) : n ? o.options.max : o.options.min } }, u.ui.plugin(Q), (d = K.extend({ init: function (i, n) { var o, s = this, c = e(i).find("input"), u = c.eq(0)[0], h = c.eq(1)[0]; u.type = "text", h.type = "text", n && n.showButtons && (window.console && window.console.warn("showbuttons option is not supported for the range slider, ignoring"), n.showButtons = !1), (n = g({}, { selectionStart: a(u, "value"), min: a(u, "min"), max: a(u, "max"), smallStep: a(u, "step") }, { selectionEnd: a(h, "value"), min: a(h, "min"), max: a(h, "max"), smallStep: a(h, "step") }, n)) && n.enabled === t && (n.enabled = !c.is("[disabled]")), K.fn.init.call(s, i, n), l((n = s.options).selectionStart) && null !== n.selectionStart || (n.selectionStart = n.min, c.eq(0).prop("value", r(n.min))), l(n.selectionEnd) && null !== n.selectionEnd || (n.selectionEnd = n.max, c.eq(1).prop("value", r(n.max))), o = s.wrapper.find(H), this._selection = new d.Selection(o, s, n), s._firstHandleDrag = new Q.Drag(o.eq(0), "firstHandle", s, n), s._lastHandleDrag = new Q.Drag(o.eq(1), "lastHandle", s, n) }, options: { name: "RangeSlider", leftDragHandleTitle: "drag", rightDragHandleTitle: "drag", tooltip: { format: "{0:#,#.##}" }, selectionStart: null, selectionEnd: null }, enable: function (i) { var n, o = this, r = o.options; o.disable(), !1 !== i && (o.wrapper.removeClass(q).addClass(W), o.wrapper.find("input").removeAttr(j), n = function (i) { var n, s, a, l, c, d, u, h = Y(i)[0]; if (h) { if (n = o._isHorizontal ? h.location.pageX : h.location.pageY, s = o._getDraggableArea(), a = o._getValueFromPosition(n, s), (l = e(i.target)).hasClass("k-draghandle")) return o.wrapper.find("." + U).removeClass(U + " " + V), l.addClass(U + " " + V), t; a < r.selectionStart ? (c = a, d = r.selectionEnd, u = o._firstHandleDrag) : a > o.selectionEnd ? (c = r.selectionStart, d = a, u = o._lastHandleDrag) : a - r.selectionStart <= r.selectionEnd - a ? (c = a, d = r.selectionEnd, u = o._firstHandleDrag) : (c = r.selectionStart, d = a, u = o._lastHandleDrag), u.dragstart(i), o._setValueInRange(c, d), o._focusWithMouse(u.element) } }, o.wrapper.find(O + ", " + N).on(E, n).end().on(E, function () { e(document.documentElement).one("selectstart", u.preventDefault) }).on(M, function () { o._activeDragHandle && o._activeDragHandle._end() }), o.wrapper.find(H).attr($, 0).on(I, function () { o._setTooltipTimeout() }).on(z, function (e) { o._focusWithMouse(e.target), e.preventDefault() }).on(B, b(o._focus, o)).on(L, b(o._blur, o)), o.wrapper.find(H).off(F, u.preventDefault).eq(0).on(F, b(function (e) { this._keydown(e, "firstHandle") }, o)).end().eq(1).on(F, b(function (e) { this._keydown(e, "lastHandle") }, o)), o.options.enabled = !0) }, disable: function () { var e = this; e.wrapper.removeClass(W).addClass(q), e.wrapper.find("input").prop(j, j), e.wrapper.find(O + ", " + N).off(E).off(M), e.wrapper.find(H).attr($, -1).off(I).off(F).off(z).off(B).off(L), e.options.enabled = !1 }, _keydown: function (e, t) { var i, n, o, r = this, a = r.options.selectionStart, l = r.options.selectionEnd; e.keyCode in r._keyMap && (r._clearTooltipTimeout(), "firstHandle" == t ? (o = r._activeHandleDrag = r._firstHandleDrag, (a = r._keyMap[e.keyCode](a)) > l && (l = a)) : (o = r._activeHandleDrag = r._lastHandleDrag, l = r._keyMap[e.keyCode](l), a > l && (a = l)), r._setValueInRange(s(a), s(l)), i = Math.max(a, r.options.selectionStart), n = Math.min(l, r.options.selectionEnd), o.selectionEnd = Math.max(n, r.options.selectionStart), o.selectionStart = Math.min(i, r.options.selectionEnd), o._updateTooltip(r.value()[r._activeHandle]), e.preventDefault()) }, _update: function (e, t) { var i = this, n = i.value(), o = n[0] != e || n[1] != t; i.value([e, t]), o && i.trigger(S, { values: [e, t], value: [e, t] }) }, value: function (e) { return e && e.length ? this._value(e[0], e[1]) : this._value() }, _value: function (e, i) { var n = this, o = n.options, a = o.selectionStart, l = o.selectionEnd; return isNaN(e) && isNaN(i) ? [a, l] : (e = s(e), i = s(i), e >= o.min && e <= o.max && i >= o.min && i <= o.max && e <= i && (a == e && l == i || (n.element.find("input").eq(0).prop("value", r(e)).end().eq(1).prop("value", r(i)), o.selectionStart = e, o.selectionEnd = i, n._refresh(), n._refreshAriaAttr(e, i))), t) }, values: function (e, t) { return w(e) ? this._value(e[0], e[1]) : this._value(e, t) }, _refresh: function () { var e = this, t = e.options; e.trigger(R, { values: [t.selectionStart, t.selectionEnd], value: [t.selectionStart, t.selectionEnd] }), t.selectionStart == t.max && t.selectionEnd == t.max && e._setZIndex("firstHandle") }, _refreshAriaAttr: function (e, t) { var i, n = this, o = n.wrapper.find(H), r = n._activeHandleDrag; i = n._getFormattedValue([e, t], r), o.eq(0).attr("aria-valuenow", e), o.eq(1).attr("aria-valuenow", t), o.attr("aria-valuetext", i) }, _setValueInRange: function (e, t) { var i = this.options; e = y.max(y.min(e, i.max), i.min), t = y.max(y.min(t, i.max), i.min), e == i.max && t == i.max && this._setZIndex("firstHandle"), this._update(y.min(e, t), y.max(e, t)) }, _setZIndex: function (t) { this.wrapper.find(H).each(function (i) { e(this).css("z-index", "firstHandle" == t ? 1 - i : i) }) }, _formResetHandler: function () { var e = this, t = e.options; setTimeout(function () { var i = e.element.find("input"), n = i[0].value, o = i[1].value; e.values("" === n || isNaN(n) ? t.min : n, "" === o || isNaN(o) ? t.max : o) }) }, destroy: function () { var e = this; K.fn.destroy.call(e), e.wrapper.off(D).find(O + ", " + N).off(D).end().find(H).off(D), e._firstHandleDrag.draggable.destroy(), e._lastHandleDrag.draggable.destroy() } })).Selection = function (e, t, i) { function n(n) { var o = (n = n || [])[0] - i.min, r = n[1] - i.min, a = y.ceil(s(o / i.smallStep)), l = y.ceil(s(r / i.smallStep)), c = t._pixelSteps[a], d = t._pixelSteps[l], u = parseInt(t._outerSize(e.eq(0)) / 2, 10), h = t._isRtl ? 2 : 0; e.eq(0).css(t._position, c - u - h).end().eq(1).css(t._position, d - u - h), function (e, i) { var n, o, r = t._trackDiv.find(".k-slider-selection"); n = y.abs(e - i), r[t._sizeFn](n), t._isRtl ? (o = y.max(e, i), r.css("right", t._maxSelection - o - 1)) : (o = y.min(e, i), r.css(t._position, o - 1)) }(c, d) } n(t.value()), t.bind([S, T, R], function (e) { n(e.values) }) }, u.ui.plugin(d) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.colorpicker.min", ["kendo.core.min", "kendo.color.min", "kendo.popup.min", "kendo.slider.min", "kendo.userevents.min", "kendo.button.min"], function () { return function (e, t, i) { function n(e, t, i) { (i = d(i)) && !i.equals(e.color()) && ("change" == t && (e._value = i), i = 1 != i.a ? i.toCssRgba() : i.toCss(), e.trigger(t, { value: i })) } function o(e, t, i) { var n, o; return e = Array.prototype.slice.call(e), n = e.length, (o = e.indexOf(t)) < 0 ? i < 0 ? e[n - 1] : e[0] : ((o += i) < 0 ? o += n : o %= n, e[o]) } function r(e) { e.preventDefault() } function s(e, t) { return function () { return e.apply(t, arguments) } } var a = window.kendo, l = a.ui, c = l.Widget, d = a.parseColor, u = a.Color, h = a.keys, f = "background-color", p = "k-state-selected", m = "#ffffff", g = { apply: "Apply", cancel: "Cancel", noColor: "no color", clearColor: "Clear color", previewInput: "Color Hexadecimal Code" }, v = ".kendoColorTools", _ = "click" + v, b = "keydown" + v, w = a.support.browser, y = w.msie && w.version < 9, k = c.extend({ init: function (e, t) { var i, n = this; c.fn.init.call(n, e, t), e = n.element, t = n.options, n._value = t.value = d(t.value), n._tabIndex = e.attr("tabIndex") || 0, (i = n._ariaId = t.ariaId) && e.attr("aria-labelledby", i), t._standalone && (n._triggerSelect = n._triggerChange) }, options: { name: "ColorSelector", value: null, _standalone: !0 }, events: ["change", "select", "cancel"], color: function (e) { return e !== i && (this._value = d(e), this._updateUI(this._value)), this._value }, value: function (e) { return (e = this.color(e)) && (e = this.options.opacity ? e.toCssRgba() : e.toCss()), e || null }, enable: function (t) { 0 === arguments.length && (t = !0), e(".k-disabled-overlay", this.wrapper).remove(), t || this.wrapper.append("<div class='k-disabled-overlay'></div>"), this._onEnable(t) }, _select: function (e, t) { var i = this._value; e = this.color(e), t || (this.element.trigger("change"), e.equals(i) ? this._standalone || this.trigger("cancel") : this.trigger("change", { value: this.value() })) }, _triggerSelect: function (e) { n(this, "select", e) }, _triggerChange: function (e) { n(this, "change", e) }, destroy: function () { this.element && this.element.off(v), this.wrapper && this.wrapper.off(v).find("*").off(v), this.wrapper = null, c.fn.destroy.call(this) }, _updateUI: e.noop, _selectOnHide: function () { return null }, _cancel: function () { this.trigger("cancel") } }), x = k.extend({ init: function (t, i) { var n, o, r, l, c = this; if (k.fn.init.call(c, t, i), t = c.wrapper = c.element, i = c.options, "websafe" == (n = i.palette) ? (n = "FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000", i.columns = 18) : "basic" == n && (n = "000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7"), "string" == typeof n && (n = n.split(",")), e.isArray(n) && (n = e.map(n, function (e) { return d(e) })), c._selectedID = (i.ariaId || a.guid()) + "_selected", t.addClass("k-widget k-colorpalette").attr("role", "grid").attr("aria-readonly", "true").append(e(c._template({ colors: n, columns: i.columns, tileSize: i.tileSize, value: c._value, id: i.ariaId }))).on(_, ".k-item", function (t) { c._select(e(t.currentTarget).css(f)) }).attr("tabIndex", c._tabIndex).on(b, s(c._keydown, c)), o = i.tileSize) { if (/number|string/.test(typeof o)) r = l = parseFloat(o); else { if ("object" != typeof o) throw Error("Unsupported value for the 'tileSize' argument"); r = parseFloat(o.width), l = parseFloat(o.height) } t.find(".k-item").css({ width: r, height: l }) } }, focus: function () { this.wrapper.focus() }, options: { name: "ColorPalette", columns: 10, tileSize: null, palette: "basic" }, _onEnable: function (e) { e ? this.wrapper.attr("tabIndex", this._tabIndex) : this.wrapper.removeAttr("tabIndex") }, _keydown: function (t) { var i, n, s = this.wrapper, a = s.find(".k-item"), l = a.filter("." + p).get(0), c = t.keyCode; if (c == h.LEFT ? i = o(a, l, -1) : c == h.RIGHT ? i = o(a, l, 1) : c == h.DOWN ? i = o(a, l, this.options.columns) : c == h.UP ? i = o(a, l, -this.options.columns) : c == h.ENTER ? (r(t), l && this._select(e(l).css(f))) : c == h.ESC && this._cancel(), i) { r(t), this._current(i); try { n = d(i.css(f)), this._triggerSelect(n) } catch (e) { } } }, _current: function (t) { this.wrapper.find("." + p).removeClass(p).attr("aria-selected", !1).removeAttr("id"), e(t).addClass(p).attr("aria-selected", !0).attr("id", this._selectedID), this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant", this._selectedID) }, _updateUI: function (t) { var i = null; this.wrapper.find(".k-item").each(function () { var n = d(e(this).css(f)); if (n && n.equals(t)) return i = this, !1 }), this._current(i) }, _template: a.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " ' + p + '" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>') }), C = k.extend({ init: function (t, i) { var n = this; k.fn.init.call(n, t, i), (i = n.options).messages = i.options ? e.extend(n.options.messages, i.options.messages) : n.options.messages, t = n.element, n.wrapper = t.addClass("k-widget k-flatcolorpicker").append(n._template(i)), n._hueElements = e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track", t), n._selectedColor = e(".k-selected-color-display", t), n._colorAsText = e("input.k-color-value", t), n._sliders(), n._hsvArea(), n._updateUI(n._value || d("#f00")), t.find("input.k-color-value").on(b, function (t) { var i, o, r = this; if (t.keyCode == h.ENTER) try { i = d(r.value), o = n.color(), n._select(i, i.equals(o)) } catch (t) { e(r).addClass("k-state-error") } else n.options.autoupdate && setTimeout(function () { var e = d(r.value, !0); e && n._updateUI(e, !0) }, 10) }).end().on(_, ".k-controls button.apply", function () { n.options._clearedColor ? n.trigger("change") : n._select(n._getHSV()) }).on(_, ".k-controls button.cancel", function () { n._updateUI(n.color()), n._cancel() }), y && n._applyIEFilter() }, destroy: function () { this._hueSlider.destroy(), this._opacitySlider && this._opacitySlider.destroy(), this._hueSlider = this._opacitySlider = this._hsvRect = this._hsvHandle = this._hueElements = this._selectedColor = this._colorAsText = null, k.fn.destroy.call(this) }, options: { name: "FlatColorPicker", opacity: !1, buttons: !1, input: !0, preview: !0, clearButton: !1, autoupdate: !0, messages: g }, _applyIEFilter: function () { var e = this.element.find(".k-hue-slider .k-slider-track")[0], t = e.currentStyle.backgroundImage; t = t.replace(/^url\([\'\"]?|[\'\"]?\)$/g, ""), e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + t + "', sizingMethod='scale')" }, _sliders: function () { function e(e) { i._updateUI(i._getHSV(e.value, null, null, null)) } function t(e) { i._updateUI(i._getHSV(null, null, null, e.value / 100)) } var i = this, n = i.element, o = n.find(".k-hue-slider"), r = n.find(".k-transparency-slider"); o.attr("aria-label", "hue saturation"), i._hueSlider = o.kendoSlider({ min: 0, max: 360, tickPlacement: "none", showButtons: !1, slide: e, change: e }).data("kendoSlider"), r.attr("aria-label", "opacity"), i._opacitySlider = r.kendoSlider({ min: 0, max: 100, tickPlacement: "none", showButtons: !1, slide: t, change: t }).data("kendoSlider") }, _hsvArea: function () { function e(e, i) { var n = this.offset, o = e - n.left, r = i - n.top, s = this.width, a = this.height; o = o < 0 ? 0 : o > s ? s : o, r = r < 0 ? 0 : r > a ? a : r, t._svChange(o / s, 1 - r / a) } var t = this, i = t.element, n = i.find(".k-hsv-rectangle"), o = n.find(".k-draghandle").attr("tabIndex", 0).on(b, s(t._keydown, t)); t._hsvEvents = new a.UserEvents(n, { global: !0, press: function (t) { this.offset = a.getOffset(n), this.width = n.width(), this.height = n.height(), o.focus(), e.call(this, t.x.location, t.y.location) }, start: function () { n.addClass("k-dragging"), o.focus() }, move: function (t) { t.preventDefault(), e.call(this, t.x.location, t.y.location) }, end: function () { n.removeClass("k-dragging") } }), t._hsvRect = n, t._hsvHandle = o }, _onEnable: function (e) { this._hueSlider.enable(e), this._opacitySlider && this._opacitySlider.enable(e), this.wrapper.find("input").attr("disabled", !e); var t = this._hsvRect.find(".k-draghandle"); e ? t.attr("tabIndex", this._tabIndex) : t.removeAttr("tabIndex") }, _keydown: function (e) { function t(t, i) { var o = n._getHSV(); o[t] += i * (e.shiftKey ? .01 : .05), o[t] < 0 && (o[t] = 0), o[t] > 1 && (o[t] = 1), n._updateUI(o), r(e) } function i(t) { var i = n._getHSV(); i.h += t * (e.shiftKey ? 1 : 5), i.h < 0 && (i.h = 0), i.h > 359 && (i.h = 359), n._updateUI(i), r(e) } var n = this; switch (e.keyCode) { case h.LEFT: e.ctrlKey ? i(-1) : t("s", -1); break; case h.RIGHT: e.ctrlKey ? i(1) : t("s", 1); break; case h.UP: t(e.ctrlKey && n._opacitySlider ? "a" : "v", 1); break; case h.DOWN: t(e.ctrlKey && n._opacitySlider ? "a" : "v", -1); break; case h.ENTER: n._select(n._getHSV()); break; case h.F2: n.wrapper.find("input.k-color-value").focus().select(); break; case h.ESC: n._cancel() } }, focus: function () { this._hsvHandle.focus() }, _getHSV: function (e, t, i, n) { var o = this._hsvRect, r = o.width(), s = o.height(), a = this._hsvHandle.position(); return null == e && (e = this._hueSlider.value()), null == t && (t = a.left / r), null == i && (i = 1 - a.top / s), null == n && (n = this._opacitySlider ? this._opacitySlider.value() / 100 : 1), u.fromHSV(e, t, i, n) }, _svChange: function (e, t) { var i = this._getHSV(null, e, t, null); this._updateUI(i) }, _updateUI: function (e, t) { var i = this, n = i._hsvRect; e && (this._colorAsText.attr("title", i.options.messages.previewInput), this._colorAsText.removeClass("k-state-error"), i._selectedColor.css(f, e.toDisplay()), t || i._colorAsText.val(i._opacitySlider ? e.toCssRgba() : e.toCss()), i._triggerSelect(e), e = e.toHSV(), i._hsvHandle.css({ left: e.s * n.width() + "px", top: (1 - e.v) * n.height() + "px" }), i._hueElements.css(f, u.fromHSV(e.h, 1, 1, 1).toCss()), i._hueSlider.value(e.h), i._opacitySlider && i._opacitySlider.value(100 * e.a)) }, _selectOnHide: function () { return this.options.buttons ? null : this._getHSV() }, _template: a.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><div class="k-color-input"><input class="k-color-value" # if (clearButton && !_standalone) { #placeholder="#: messages.noColor #" # } ##= !data.input ? \'style="visibility: hidden;"\' : "" #># if (clearButton && !_standalone) { #<span class="k-clear-color k-button k-bare" title="#: messages.clearColor #"></span># } #</div></div></div># } ## if (clearButton && !_standalone && !preview) { #<div class="k-clear-color-container"><span class="k-clear-color k-button k-bare">#: messages.clearColor #</span></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #') }), S = c.extend({ init: function (t, i) { var n, o, r, s, a, l = this; c.fn.init.call(l, t, i), i = l.options, t = l.element, n = t.attr("value") || t.val(), n = d(n || i.value, !0), l._value = i.value = n, o = l.wrapper = e(l._template(i)), t.hide().after(o), t.is("input") && (t.appendTo(o), r = t.closest("label"), (s = t.attr("id")) && (r = r.add('label[for="' + s + '"]')), r.click(function (e) { l.open(), e.preventDefault() })), l._tabIndex = t.attr("tabIndex") || 0, l.enable(!t.attr("disabled")), (a = t.attr("accesskey")) && (t.attr("accesskey", null), o.attr("accesskey", a)), l.bind("activate", function (e) { e.isDefaultPrevented() || l.toggle() }), l._updateUI(n) }, destroy: function () { this.wrapper.off(v).find("*").off(v), this._popup && (this._selector.destroy(), this._popup.destroy()), this._selector = this._popup = this.wrapper = null, c.fn.destroy.call(this) }, enable: function (e) { var t = this, i = t.wrapper, n = i.children(".k-picker-wrap"), o = n.find(".k-select"); 0 === arguments.length && (e = !0), t.element.attr("disabled", !e), i.attr("aria-disabled", !e), o.off(v).on("mousedown" + v, r), i.addClass("k-state-disabled").removeAttr("tabIndex").add("*", i).off(v), e ? i.removeClass("k-state-disabled").attr("tabIndex", t._tabIndex).on("mouseenter" + v, function () { n.addClass("k-state-hover") }).on("mouseleave" + v, function () { n.removeClass("k-state-hover") }).on("focus" + v, function () { n.addClass("k-state-focused") }).on("blur" + v, function () { n.removeClass("k-state-focused") }).on(b, s(t._keydown, t)).on(_, ".k-select", s(t.toggle, t)).on(_, t.options.toolIcon ? ".k-tool-icon" : ".k-selected-color", function () { t.trigger("activate") }) : t.close() }, _template: a.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-icon k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"><span class="k-icon k-i-line" style="display: none;"></span></span># } #<span class="k-select" unselectable="on" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span></span>'), options: { name: "ColorPicker", palette: null, columns: 10, toolIcon: null, value: null, messages: g, opacity: !1, buttons: !0, preview: !0, clearButton: !1, ARIATemplate: 'Current selected color is #=data || ""#' }, events: ["activate", "change", "select", "open", "close"], open: function () { this.element.prop("disabled") || this._getPopup().open() }, close: function () { var e = this._selector && this._selector.options || {}; e._closing = !0, this._getPopup().close(), delete e._closing }, toggle: function () { this.element.prop("disabled") || this._getPopup().toggle() }, _noColorIcon: function () { return this.wrapper.find(".k-picker-wrap > .k-selected-color > .k-icon.k-i-line") }, color: k.fn.color, value: k.fn.value, _select: k.fn._select, _triggerSelect: k.fn._triggerSelect, _isInputTypeColor: function () { var e = this.element[0]; return /^input$/i.test(e.tagName) && /^color$/i.test(e.type) }, _updateUI: function (e) { var t = ""; e && (t = this._isInputTypeColor() || 1 == e.a ? e.toCss() : e.toCssRgba(), this.element.val(t)), this._ariaTemplate || (this._ariaTemplate = a.template(this.options.ARIATemplate)), this.wrapper.attr("aria-label", this._ariaTemplate(t)), this._triggerSelect(e), this.wrapper.find(".k-selected-color").css(f, e ? e.toDisplay() : m), this._noColorIcon()[t ? "hide" : "show"]() }, _keydown: function (e) { var t = e.keyCode; this._getPopup().visible() ? (t == h.ESC ? this._selector._cancel() : this._selector._keydown(e), r(e)) : t != h.ENTER && t != h.DOWN || (this.open(), r(e)) }, _getPopup: function () { var t, n, o, r, s = this, l = s._popup; return l || (t = s.options, n = t.palette ? x : C, t._standalone = !1, delete t.select, delete t.change, delete t.cancel, o = a.guid(), r = s._selector = new n(e('<div id="' + o + '"/>').appendTo(document.body), t), s.wrapper.attr("aria-owns", o), s._popup = l = r.wrapper.kendoPopup({ anchor: s.wrapper, adjustSize: { width: 5, height: 0 } }).data("kendoPopup"), r.element.find(".k-clear-color").kendoButton({ icon: "reset-color", click: function (e) { r.options._clearedColor = !0, s.value(null), s.element.val(null), s._updateUI(null), r._colorAsText.val(""), r._hsvHandle.css({ top: "0px", left: "0px" }), r._selectedColor.css(f, m), s.trigger("change", { value: s.value() }), e.preventDefault() } }), r.bind({ select: function (e) { s._updateUI(d(e.value)), delete r.options._clearedColor }, change: function () { r.options._clearedColor || s._select(r.color()), s.close() }, cancel: function () { r.options._clearedColor && !s.value() && r.value() && s._select(r.color(), !0), s.close() } }), l.bind({ close: function (e) { var t, n, o, a; return s.trigger("close") ? (e.preventDefault(), i) : (s.wrapper.children(".k-picker-wrap").removeClass("k-state-focused"), t = r._selectOnHide(), n = r.value(), o = s.value(), a = r.options, t ? a._clearedColor && !o || s._select(t) : (setTimeout(function () { s.wrapper && s.wrapper.focus() }), !a._closing && a._clearedColor && !o && n ? s._select(n, !0) : s._updateUI(s.color())), i) }, open: function (e) { s.trigger("open") ? e.preventDefault() : s.wrapper.children(".k-picker-wrap").addClass("k-state-focused") }, activate: function () { r._select(s.color(), !0), r.focus(), s.wrapper.children(".k-picker-wrap").addClass("k-state-focused") } })), l } }); l.plugin(x), l.plugin(C), l.plugin(S) }(jQuery, parseInt), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.numerictextbox.min", ["kendo.core.min", "kendo.userevents.min"], function () { return function (e, t) { function i(e, t) { var i = "k-i-arrow-" + ("increase" === e ? "60-up" : "60-down"); return '<span unselectable="on" class="k-link k-link-' + e + '" aria-label="' + t + '" title="' + t + '"><span unselectable="on" class="' + S + " " + i + '"></span></span>' } function n(e, t) { var i = ("" + parseFloat(e, 10)).split(C); return i[1] && (i[1] = i[1].substring(0, t)), i.join(C) } var o = window.kendo, r = o.caret, s = o.keys, a = o.ui, l = a.Widget, c = o._activeElement, d = o._extractFormat, u = o.parseFloat, h = o.support.placeholder, f = o.getCulture, p = "change", m = "disabled", g = "readonly", v = "spin", _ = ".kendoNumericTextBox", b = "mouseenter" + _ + " mouseleave.kendoNumericTextBox", w = "k-state-default", y = "k-state-focused", k = "k-state-hover", x = "focus", C = ".", S = "k-icon", T = "k-state-selected", D = "k-state-disabled", A = "k-state-invalid", E = "aria-disabled", I = /^(-)?(\d*)$/, M = null, R = e.proxy, F = e.extend, z = l.extend({ init: function (i, n) { var r, s, a, c, u = this, h = n && n.step !== t; l.fn.init.call(u, i, n), n = u.options, i = u.element.on("focusout" + _, R(u._focusout, u)).attr("role", "spinbutton"), n.placeholder = n.placeholder || i.attr("placeholder"), u._initialOptions = F({}, n), r = u.min(i.attr("min")), s = u.max(i.attr("max")), a = u._parse(i.attr("step")), n.min === M && r !== M && (n.min = r), n.max === M && s !== M && (n.max = s), h || a === M || (n.step = a), u._reset(), u._wrapper(), u._arrows(), u._validation(), u._input(), o.support.mobileOS ? u._text.on("touchend" + _ + " " + x + _, function () { o.support.browser.edge ? u._text.one(x + _, function () { u._toggleText(!1), i.focus() }) : (u._toggleText(!1), i.focus()) }) : u._text.on(x + _, R(u._click, u)), i.attr("aria-valuemin", n.min !== M ? n.min * n.factor : n.min).attr("aria-valuemax", n.max !== M ? n.max * n.factor : n.max), n.format = d(n.format), c = n.value, u.value(c !== M ? c : i.val()), i.is("[disabled]") || e(u.element).parents("fieldset").is(":disabled") ? u.enable(!1) : u.readonly(i.is("[readonly]")), o.notify(u) }, options: { name: "NumericTextBox", decimals: M, restrictDecimals: !1, min: M, max: M, value: M, step: 1, round: !0, culture: "", format: "n", spinners: !0, placeholder: "", factor: 1, upArrowText: "Increase value", downArrowText: "Decrease value" }, events: [p, v], _editable: function (e) { var t = this, i = t.element, n = e.disable, o = e.readonly, r = t._text.add(i), s = t._inputWrapper.off(b); t._toggleText(!0), t._upArrowEventHandler.unbind("press"), t._downArrowEventHandler.unbind("press"), i.off("keydown" + _).off("keypress" + _).off("keyup" + _).off("paste" + _), o || n ? (s.addClass(n ? D : w).removeClass(n ? w : D), r.attr(m, n).attr(g, o).attr(E, n)) : (s.addClass(w).removeClass(D).on(b, t._toggleHover), r.removeAttr(m).removeAttr(g).attr(E, !1), t._upArrowEventHandler.bind("press", function (e) { e.preventDefault(), t._spin(1), t._upArrow.addClass(T) }), t._downArrowEventHandler.bind("press", function (e) { e.preventDefault(), t._spin(-1), t._downArrow.addClass(T) }), t.element.on("keydown" + _, R(t._keydown, t)).on("keypress" + _, R(t._keypress, t)).on("keyup" + _, R(t._keyup, t)).on("paste" + _, R(t._paste, t))) }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, destroy: function () { var e = this; e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(_), e._upArrowEventHandler.destroy(), e._downArrowEventHandler.destroy(), e._form && e._form.off("reset", e._resetHandler), l.fn.destroy.call(e) }, min: function (e) { return this._option("min", e) }, max: function (e) { return this._option("max", e) }, step: function (e) { return this._option("step", e) }, value: function (e) { var i, n = this; return e === t ? n._value : (e = n._parse(e), i = n._adjust(e), e === i && (n._update(e), n._old = n._value), t) }, focus: function () { this._focusin() }, _adjust: function (e) { var t = this.options, i = t.min, n = t.max; return e === M ? e : (i !== M && e < i ? e = i : n !== M && e > n && (e = n), e) }, _arrows: function () { var t, n = this, r = function () { clearTimeout(n._spinning), t.removeClass(T) }, s = n.options, a = s.spinners, l = n.element; (t = l.siblings("." + S))[0] || (t = e(i("increase", s.upArrowText) + i("decrease", s.downArrowText)).insertAfter(l)).wrapAll('<span class="k-select"/>'), a || (t.parent().toggle(a), n._inputWrapper.addClass("k-expand-padding")), n._upArrow = t.eq(0), n._upArrowEventHandler = new o.UserEvents(n._upArrow, { release: r }), n._downArrow = t.eq(1), n._downArrowEventHandler = new o.UserEvents(n._downArrow, { release: r }) }, _validation: function () { var t = this.element; this._validationIcon = e("<span class='" + S + " k-i-warning'></span>").hide().insertAfter(t) }, _blur: function () { var e = this; e._toggleText(!0), e._change(e.element.val()) }, _click: function (e) { var t = this; clearTimeout(t._focusing), t._focusing = setTimeout(function () { var i, n, o, s = e.target, a = r(s)[0], l = s.value.substring(0, a), c = t._format(t.options.format), d = c[","], u = 0; d && (n = RegExp("\\" + d, "g"), o = RegExp("([\\d\\" + d + "]+)(\\" + c[C] + ")?(\\d+)?")), o && (i = o.exec(l)), i && (u = i[0].replace(n, "").length, -1 != l.indexOf("(") && t._value < 0 && u++), t._focusin(), r(t.element[0], u) }) }, _change: function (e) { var t = this, i = t.options.factor; i && 1 !== i && (null !== (e = parseFloat(e)) && (e /= i)), t._update(e), e = t._value, t._old != e && (t._old = e, t._typing || t.element.trigger(p), t.trigger(p)), t._typing = !1 }, _culture: function (e) { return e || f(this.options.culture) }, _focusin: function () { var e = this; e._inputWrapper.addClass(y), e._toggleText(!1), e.element[0].focus() }, _focusout: function () { var e = this; clearTimeout(e._focusing), e._inputWrapper.removeClass(y).removeClass(k), e._blur(), e._removeInvalidState() }, _format: function (e, t) { var i = this._culture(t).numberFormat; return (e = e.toLowerCase()).indexOf("c") > -1 ? i = i.currency : e.indexOf("p") > -1 && (i = i.percent), i }, _input: function () { var t, i = this, n = i.options, o = "k-formatted-value", r = i.element.addClass("k-input").show()[0], s = r.accessKey, a = i.wrapper; (t = a.find(C + o))[0] || (t = e('<input type="text"/>').insertBefore(r).addClass(o)); try { r.setAttribute("type", "text") } catch (e) { r.type = "text" } i._initialTitle = r.title, t[0].title = r.title, t[0].tabIndex = r.tabIndex, t[0].style.cssText = r.style.cssText, t.prop("placeholder", n.placeholder), s && (t.attr("accesskey", s), r.accessKey = ""), i._text = t.addClass(r.className).attr({ role: "spinbutton", "aria-valuemin": n.min !== M ? n.min * n.factor : n.min, "aria-valuemax": n.max !== M ? n.max * n.factor : n.max }) }, _keydown: function (e) { var t = this, i = e.keyCode; t._key = i, i == s.DOWN ? t._step(-1) : i == s.UP ? t._step(1) : i == s.ENTER ? t._change(t.element.val()) : t._typing = !0 }, _keypress: function (e) { var t, i, n, o, a, l, c, d, u, h, f; 0 === e.which || e.metaKey || e.ctrlKey || e.keyCode === s.BACKSPACE || e.keyCode === s.ENTER || (i = (t = this).options.min, n = t.element, o = r(n), a = o[0], l = o[1], c = String.fromCharCode(e.which), d = t._format(t.options.format), u = t._key === s.NUMPAD_DOT, h = n.val(), u && (c = d[C]), h = h.substring(0, a) + c + h.substring(l), (f = t._numericRegex(d).test(h)) && u ? (n.val(h), r(n, a + c.length), e.preventDefault()) : (null !== i && i >= 0 && "-" === h.charAt(0) || !f) && (t._addInvalidState(), e.preventDefault()), t._key = 0) }, _keyup: function () { this._removeInvalidState() }, _addInvalidState: function () { this._inputWrapper.addClass(A), this._validationIcon.show() }, _removeInvalidState: function () { this._inputWrapper.removeClass(A), this._validationIcon.hide() }, _numericRegex: function (e) { var t = this, i = e[C], n = t.options.decimals, o = "*"; return i === C && (i = "\\" + i), n === M && (n = e.decimals), 0 === n ? I : (t.options.restrictDecimals && (o = "{0," + n + "}"), t._separator !== i && (t._separator = i, t._floatRegExp = RegExp("^(-)?(((\\d+(" + i + "\\d" + o + ")?)|(" + i + "\\d" + o + ")))?$")), t._floatRegExp) }, _paste: function (e) { var t = this, i = e.target, n = i.value, o = t._format(t.options.format); setTimeout(function () { var e = t._parse(i.value), r = t._numericRegex(o).test(i.value); e !== M && t._adjust(e) === e && r || t._update(n) }) }, _option: function (e, i) { var n = this, o = n.element, r = n.options; return i === t ? r[e] : (((i = n._parse(i)) || "step" !== e) && (r[e] = i, o.add(n._text).attr("aria-value" + e, i), o.attr(e, i)), t) }, _spin: function (e, t) { var i = this; t = t || 500, clearTimeout(i._spinning), i._spinning = setTimeout(function () { i._spin(e, 50) }, t), i._step(e) }, _step: function (e) { var t = this, i = t.element, n = t._parse(i.val()) || 0; c() != i[0] && t._focusin(), t.options.factor && n && (n /= t.options.factor), n += t.options.step * e, t._update(t._adjust(n)), t._typing = !1, t.trigger(v) }, _toggleHover: function (t) { e(t.currentTarget).toggleClass(k, "mouseenter" === t.type) }, _toggleText: function (e) { this._text.toggle(e), this.element.toggle(!e) }, _parse: function (e, t) { return u(e, this._culture(t), this.options.format) }, _round: function (e, t) { var i = this.options.round ? o._round : n; return i(e, t) }, _update: function (e) { var t, i = this, n = i.options, r = n.factor, s = n.format, a = n.decimals, l = i._culture(), c = i._format(s, l); a === M && (a = c.decimals), e = i._parse(e, l), (t = e !== M) && (e = parseFloat(i._round(e, a), 10)), i._value = e = i._adjust(e), i._placeholder(o.toString(e, s, l)), t ? (r && (e = parseFloat(i._round(e * r, a), 10)), -1 !== (e = "" + e).indexOf("e") && (e = i._round(+e, a)), e = e.replace(C, c[C])) : e = null, i.element.val(e), i.element.add(i._text).attr("aria-valuenow", e) }, _placeholder: function (e) { var t = this._text; t.val(e), h || e || t.val(this.options.placeholder), t.attr("title", this._initialTitle || t.val()) }, _wrapper: function () { var t, i = this, n = i.element, o = n[0]; (t = n.parents(".k-numerictextbox")).is("span.k-numerictextbox") || (t = (t = n.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent()).wrap("<span/>").parent()), t[0].style.cssText = o.style.cssText, o.style.width = "", i.wrapper = t.addClass("k-widget k-numerictextbox").addClass(o.className).css("display", ""), i._inputWrapper = e(t[0].firstChild) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { setTimeout(function () { t.value(i[0].value), t.max(t._initialOptions.max), t.min(t._initialOptions.min) }) }, t._form = o.on("reset", t._resetHandler)) } }); a.plugin(z) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.filtermenu.min", ["kendo.datepicker.min", "kendo.numerictextbox.min", "kendo.dropdownlist.min", "kendo.binder.min"], function () { return function (e, t) { function i(t, n) { t.filters && (t.filters = e.grep(t.filters, function (e) { return i(e, n), e.filters ? e.filters.length : e.field != n })) } function n(e) { var t, i, n, o, r, s; if (e && e.length) for (s = [], t = 0, i = e.length; t < i; t++)n = e[t], r = "" !== n.text ? n.text || n.value || n : n.text, o = null == n.value ? n.text || n : n.value, s[t] = { text: r, value: o }; return s } function o(t, i) { return e.grep(t, function (t) { return t.filters ? (t.filters = e.grep(t.filters, function (e) { return e.field != i }), t.filters.length) : t.field != i }) } function r(i) { return "and" == i.logic && i.filters.length > 1 ? [] : i.filters ? e.map(i.filters, function (e) { return r(e) }) : null !== i.value && i.value !== t ? [i.value] : [] } function s(e, i) { for (var n, o, r = a.getter(i, !0), s = [], l = 0, c = {}; l < e.length;)n = e[l++], (o = r(n)) === t || null === o || c.hasOwnProperty(o) || (s.push(n), c[o] = !0); return s } var a = window.kendo, l = a.ui, c = e.proxy, d = "kendoPopup", u = "init", h = "open", f = "refresh", p = "change", m = ".kendoFilterMenu", g = "Is equal to", v = "Is not equal to", _ = { number: "numerictextbox", date: "datepicker" }, b = { string: "text", number: "number", date: "date" }, w = a.isFunction, y = l.Widget, k = y.extend({ init: function (t, i) { var n, o, r, s, l = this, d = "string"; for (o in y.fn.init.call(l, t, i), n = l.operators = i.operators || {}, t = l.element, (i = l.options).appendToElement || ((r = t.addClass("k-with-icon k-filterable").find(".k-grid-filter"))[0] || (r = t.prepend('<a class="k-grid-filter" href="#" title="' + i.messages.filter + '" aria-label="' + i.messages.filter + '"><span class="k-icon k-i-filter"></span></a>').find(".k-grid-filter")), r.attr("tabindex", -1).on("click" + m, c(l._click, l))), l.link = r || e(), l.dataSource = C.create(i.dataSource), l.field = i.field || t.attr(a.attr("field")), l.model = l.dataSource.reader.model, l._parse = function (e) { return null != e ? e + "" : e }, l.model && l.model.fields && ((s = l.model.fields[l.field]) && (d = s.type || "string", s.parse && (l._parse = c(s.parse, s)))), i.values && (d = "enums"), l.type = d, n = n[d] || i.operators[d]) break; l._defaultFilter = function () { return { field: l.field, operator: o || "eq", value: "" } }, l._refreshHandler = c(l.refresh, l), l.dataSource.bind(p, l._refreshHandler), i.appendToElement ? l._init() : l.refresh() }, _init: function () { var t, i = this, n = i.options.ui, o = w(n); i.pane = i.options.pane, i.pane && (i._isMobile = !0), o || (t = n || _[i.type]), i._isMobile ? i._createMobileForm(t) : i._createForm(t), i.form.on("submit" + m, c(i._submit, i)).on("reset" + m, c(i._reset, i)), o && i.form.find(".k-textbox").removeClass("k-textbox").each(function () { n(e(this)) }), i.form.find("[" + a.attr("role") + "=numerictextbox]").removeClass("k-textbox").end().find("[" + a.attr("role") + "=datetimepicker]").removeClass("k-textbox").end().find("[" + a.attr("role") + "=timepicker]").removeClass("k-textbox").end().find("[" + a.attr("role") + "=datepicker]").removeClass("k-textbox"), i.refresh(), i.trigger(u, { field: i.field, container: i.form }), a.cycleForm(i.form) }, _createForm: function (t) { var i = this, o = i.options, r = i.operators || {}, s = i.type; r = r[s] || o.operators[s], i.form = e('<form title="' + i.options.messages.info + '" class="k-filter-menu"/>').html(a.template("boolean" === s ? '<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>' : '<div><div class="k-filter-help-text">#=messages.info#</div><select title="#=messages.operator#" data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select title="#=messages.value#" data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input title="#=messages.value#" data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select title="#=messages.logic#" class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select title="#=messages.additionalOperator#" data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input title="#=messages.additionalValue#" data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>')({ field: i.field, format: o.format, ns: a.ns, messages: o.messages, extra: o.extra, operators: r, type: s, role: t, values: n(o.values) })), o.appendToElement ? (i.element.append(i.form), i.popup = i.element.closest(".k-popup").data(d)) : i.popup = i.form[d]({ anchor: i.link, open: c(i._open, i), activate: c(i._activate, i), close: function () { i.options.closeCallback && i.options.closeCallback(i.element) } }).data(d), i.form.on("keydown" + m, c(i._keydown, i)) }, _createMobileForm: function (t) { var i = this, o = i.options, r = i.operators || {}, s = i.type; r = r[s] || o.operators[s], i.form = e("<div />").html(a.template("boolean" === s ? '<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-i-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form title="#=messages.info#" class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>' : '<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-i-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form title="#=messages.info#" class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.additionalOperator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.additionalValue##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>')({ field: i.field, title: o.title || i.field, format: o.format, ns: a.ns, messages: o.messages, extra: o.extra, operators: r, type: s, role: t, useRole: !a.support.input.date && "date" === s || "number" === s, inputType: b[s], values: n(o.values) })), i.view = i.pane.append(i.form.html()), i.form = i.view.element.find("form"), i.view.element.on("click", ".k-submit", function (e) { i.form.submit(), e.preventDefault() }).on("click", ".k-i-cancel", function (e) { i._closeForm(), e.preventDefault() }) }, refresh: function () { var e = this, t = e.dataSource.filter() || { filters: [], logic: "and" }, i = [e._defaultFilter()], n = e._defaultFilter().operator; (e.options.extra || "isnull" !== n && "isnotnull" !== n) && i.push(e._defaultFilter()), e.filterModel = a.observable({ logic: "and", filters: i }), e.form && a.bind(e.form.children().first(), e.filterModel), e._bind(t) ? e.link.addClass("k-state-active") : e.link.removeClass("k-state-active") }, destroy: function () { var e = this; y.fn.destroy.call(e), e.form && (a.unbind(e.form), a.destroy(e.form), e.form.unbind(m), e.popup && (e.popup.destroy(), e.popup = null), e.form = null), e.view && (e.view.purge(), e.view = null), e.link.unbind(m), e._refreshHandler && (e.dataSource.unbind(p, e._refreshHandler), e.dataSource = null), e.element = e.link = e._refreshHandler = e.filterModel = null }, _bind: function (e) { var t, i, n, o, r = this, s = e.filters, a = !1, l = 0, c = r.filterModel; for (t = 0, i = s.length; t < i; t++)(o = s[t]).field == r.field ? (c.set("logic", e.logic), (n = c.filters[l]) || (c.filters.push({ field: r.field }), n = c.filters[l]), n.set("value", r._parse(o.value)), n.set("operator", o.operator), l++, a = !0) : o.filters && (a = a || r._bind(o)); return a }, _stripFilters: function (t) { return e.grep(t, function (e) { return "" !== e.value && null != e.value || "isnull" === e.operator || "isnotnull" === e.operator || "isempty" === e.operator || "isnotempty" === e.operator }) }, _merge: function (e) { var t, n, o, r = this, s = e.logic || "and", a = this._stripFilters(e.filters), l = r.dataSource.filter() || { filters: [], logic: "and" }; for (i(l, r.field), n = 0, o = a.length; n < o; n++)(t = a[n]).value = r._parse(t.value); return a.length && (l.filters.length ? (e.filters = a, "and" !== l.logic && (l.filters = [{ logic: l.logic, filters: l.filters }], l.logic = "and"), l.filters.push(a.length > 1 ? e : a[0])) : (l.filters = a, l.logic = s)), l }, filter: function (e) { var t = this._stripFilters(e.filters); t.length && this.trigger("change", { filter: { logic: e.logic, filters: t }, field: this.field }) || (e = this._merge(e)).filters.length && this.dataSource.filter(e) }, clear: function () { var t = this, i = t.dataSource.filter() || { filters: [] }; this.trigger("change", { filter: null, field: t.field }) || (i.filters = e.grep(i.filters, function (e) { return e.filters ? (e.filters = o(e.filters, t.field), e.filters.length) : e.field != t.field }), i.filters.length || (i = null), t.dataSource.filter(i)) }, _submit: function (e) { e.preventDefault(), e.stopPropagation(), this.filter(this.filterModel.toJSON()), this._closeForm() }, _reset: function () { this.clear(), this.options.search && this.container && this.container.find("label").parent().show(), this._closeForm() }, _closeForm: function () { this._isMobile ? this.pane.navigate("", this.options.animations.right) : this.popup.close() }, _click: function (e) { e.preventDefault(), e.stopPropagation(), this.popup || this.pane || this._init(), this._isMobile ? this.pane.navigate(this.view, this.options.animations.left) : this.popup.toggle() }, _open: function () { var t; e(".k-filter-menu").not(this.form).each(function () { (t = e(this).data(d)) && t.close() }) }, _activate: function () { this.form.find(":kendoFocusable:first").focus(), this.trigger(h, { field: this.field, container: this.form }) }, _keydown: function (e) { e.keyCode == a.keys.ESC && this.popup.close() }, events: [u, "change", h], options: { name: "FilterMenu", extra: !0, appendToElement: !1, type: "string", operators: { string: { eq: g, neq: v, startswith: "Starts with", contains: "Contains", doesnotcontain: "Does not contain", endswith: "Ends with", isnull: "Is null", isnotnull: "Is not null", isempty: "Is empty", isnotempty: "Is not empty" }, number: { eq: g, neq: v, gte: "Is greater than or equal to", gt: "Is greater than", lte: "Is less than or equal to", lt: "Is less than", isnull: "Is null", isnotnull: "Is not null" }, date: { eq: g, neq: v, gte: "Is after or equal to", gt: "Is after", lte: "Is before or equal to", lt: "Is before", isnull: "Is null", isnotnull: "Is not null" }, enums: { eq: g, neq: v, isnull: "Is null", isnotnull: "Is not null" } }, messages: { info: "Show items with value that:", isTrue: "is true", isFalse: "is false", filter: "Filter", clear: "Clear", and: "And", or: "Or", selectValue: "-Select value-", operator: "Operator", value: "Value", additionalValue: "Additional value", additionalOperator: "Additional operator", logic: "Filters logic", cancel: "Cancel" }, animations: { left: "slide", right: "slide:right" } } }), x = ".kendoFilterMultiCheck", C = a.data.DataSource, S = y.extend({ init: function (t, i) { var n, o; y.fn.init.call(this, t, i), i = this.options, this.element = e(t), n = this.field = this.options.field || this.element.attr(a.attr("field")), o = i.checkSource, this._foreignKeyValues() ? (this.checkSource = C.create(i.values), this.checkSource.fetch()) : i.forceUnique ? (delete (o = i.dataSource.options).pageSize, this.checkSource = C.create(o), this.checkSource.reader.data = function (e, t) { return function (i) { var n = e(i); return s(n, t) } }(this.checkSource.reader.data, this.field)) : this.checkSource = C.create(o), this.dataSource = i.dataSource, this.model = this.dataSource.reader.model, this._parse = function (e) { return e + "" }, this.model && this.model.fields && ((n = this.model.fields[this.field]) && ("number" == n.type ? this._parse = parseFloat : n.parse && (this._parse = c(n.parse, n)), this.type = n.type || "string")), i.appendToElement ? this._init() : this._createLink(), this._refreshHandler = c(this.refresh, this), this.dataSource.bind(p, this._refreshHandler) }, _createLink: function () { var e = this.element, t = e.addClass("k-with-icon k-filterable").find(".k-grid-filter"); t[0] || (t = e.prepend('<a class="k-grid-filter" href="#" aria-label="' + this.options.messages.filter + '"><span class="k-icon k-i-filter"/></a>').find(".k-grid-filter")), this._link = t.attr("tabindex", -1).on("click" + m, c(this._click, this)) }, _init: function () { var e = this, t = this.options.forceUnique, i = this.options; this.pane = i.pane, this.pane && (this._isMobile = !0), this._createForm(), this._foreignKeyValues() ? this.refresh() : t && !this.checkSource.options.serverPaging && this.dataSource.data().length ? (this.checkSource.data(s(this.dataSource.data(), this.field)), this.refresh()) : (this._attachProgress(), this.checkSource.fetch(function () { e.refresh.call(e) })), this.options.forceUnique || (this.checkChangeHandler = function () { e.container.empty(), e.refresh() }, this.checkSource.bind(p, this.checkChangeHandler)), this.form.on("keydown" + x, c(this._keydown, this)).on("submit" + x, c(this._filter, this)).on("reset" + x, c(this._reset, this)), this.trigger(u, { field: this.field, container: this.form }) }, _attachProgress: function () { var e = this; this._progressHandler = function () { l.progress(e.container, !0) }, this._progressHideHandler = function () { l.progress(e.container, !1) }, this.checkSource.bind("progress", this._progressHandler).bind("change", this._progressHideHandler) }, _input: function () { var e = this; e._clearTypingTimeout(), e._typingTimeout = setTimeout(function () { e.search() }, 100) }, _clearTypingTimeout: function () { this._typingTimeout && (clearTimeout(this._typingTimeout), this._typingTimeout = null) }, search: function () { var e, t, i, n = this.options.ignoreCase, o = this.searchTextBox[0].value, r = this.container.find("label"); for (n && (o = o.toLowerCase()), e = 0, this.options.checkAll && r.length && (r[0].parentNode.style.display = o ? "none" : "", e++); e < r.length;)t = r[e], i = t.textContent || t.innerText, n && (i = i.toLowerCase()), t.parentNode.style.display = i.indexOf(o) >= 0 ? "" : "none", e++ }, _activate: function () { this.form.find(":kendoFocusable:first").focus(), this.trigger(h, { field: this.field, container: this.form }) }, _createForm: function () { var t, i, n = this.options, o = ""; this._isMobile || (n.search && (o += "<div class='k-textbox k-space-right'><input placeholder='" + n.messages.search + "'/><span class='k-icon k-i-zoom' /></div>"), o += "<ul class='k-reset k-multicheck-wrap'></ul>", n.messages.selectedItemsFormat && (o += "<div class='k-filter-selected-items'>" + a.format(n.messages.selectedItemsFormat, 0) + "</div>"), o += "<button type='submit' class='k-button k-primary'>" + n.messages.filter + "</button>", o += "<button type='reset' class='k-button'>" + n.messages.clear + "</button>", this.form = e('<form class="k-filter-menu"/>').html(o), this.container = this.form.find(".k-multicheck-wrap")), this._isMobile ? ((t = this).form = e("<div />").html(a.template('<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-i-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list">#if(search){#<div class=\'k-textbox k-space-right\'><input placeholder=\'#=messages.search#\'/><span class=\'k-icon k-i-zoom\' /></div>#}#<ul class="k-multicheck-wrap"></ul></li><li class="k-button-container">#if(messages.selectedItemsFormat){#<div class=\'k-filter-selected-items\'></div>#}#<button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>')({ field: t.field, title: n.title || t.field, ns: a.ns, messages: n.messages, search: n.search })), t.view = t.pane.append(t.form.html()), t.form = t.view.element.find("form"), i = this.view.element, this.container = i.find(".k-multicheck-wrap"), i.on("click", ".k-submit", function (e) { t.form.submit(), e.preventDefault() }).on("click", ".k-i-cancel", function (e) { t._closeForm(), e.preventDefault() })) : n.appendToElement ? (this.popup = this.element.closest(".k-popup").data(d), this.element.append(this.form)) : this.popup = this.form.kendoPopup({ anchor: this._link, activate: c(this._activate, this) }).data(d), n.search && (this.searchTextBox = this.form.find(".k-textbox > input"), this.searchTextBox.on("input", c(this._input, this))) }, createCheckAllItem: function () { var t = this.options, i = a.template(t.itemTemplate({ field: "all", mobile: this._isMobile })), n = e(i({ all: t.messages.checkAll })); this.container.prepend(n), this.checkBoxAll = n.find(":checkbox").eq(0).addClass("k-check-all"), this.checkAllHandler = c(this.checkAll, this), this.checkBoxAll.on(p + x, this.checkAllHandler) }, updateCheckAllState: function () { if (this.options.messages.selectedItemsFormat && this.form.find(".k-filter-selected-items").text(a.format(this.options.messages.selectedItemsFormat, this.container.find(":checked:not(.k-check-all)").length)), this.checkBoxAll) { var e = this.container.find(":checkbox:not(.k-check-all)").length == this.container.find(":checked:not(.k-check-all)").length; this.checkBoxAll.prop("checked", e) } }, refresh: function (e) { var t = this.options.forceUnique, i = this.dataSource, n = this.getFilterArray(); this._link && this._link.toggleClass("k-state-active", 0 !== n.length), this.form && (e && t && e.sender === i && !i.options.serverPaging && ("itemchange" == e.action || "add" == e.action || "remove" == e.action || i.options.autoSync && "sync" === e.action) && !this._foreignKeyValues() && (this.checkSource.data(s(this.dataSource.data(), this.field)), this.container.empty()), this.container.is(":empty") && this.createCheckBoxes(), this.checkValues(n), this.trigger(f)) }, getFilterArray: function () { var t = e.extend(!0, {}, { filters: [], logic: "and" }, this.dataSource.filter()); return function t(i, n) { i.filters && (i.filters = e.grep(i.filters, function (e) { return t(e, n), e.filters ? e.filters.length : e.field == n && "eq" == e.operator })) }(t, this.field), r(t) }, createCheckBoxes: function () { var e, t, i, n = this.options, o = { field: this.field, format: n.format, mobile: this._isMobile, type: this.type }; this.options.forceUnique ? this._foreignKeyValues() ? (e = this.checkSource.data(), o.valueField = "value", o.field = "text") : e = this.checkSource.data() : e = this.checkSource.view(), t = a.template(n.itemTemplate(o)), i = a.render(t, e), n.checkAll && this.createCheckAllItem(), this.container.on(p + x, ":checkbox", c(this.updateCheckAllState, this)), this.container.append(i) }, checkAll: function () { var e = this.checkBoxAll.is(":checked"); this.container.find(":checkbox").prop("checked", e) }, checkValues: function (t) { var i = this; e(e.grep(this.container.find(":checkbox").prop("checked", !1), function (n) { var o, r, s = !1; if (!e(n).is(".k-check-all")) for (o = i._parse(e(n).val()), r = 0; r < t.length; r++)if (s = "date" == i.type ? t[r].getTime() == o.getTime() : t[r] == o) return s })).prop("checked", !0), this.updateCheckAllState() }, _filter: function (t) { var i, n; t.preventDefault(), t.stopPropagation(), n = this, (i = { logic: "or" }).filters = e.map(this.form.find(":checkbox:checked:not(.k-check-all)"), function (t) { return { value: e(t).val(), operator: "eq", field: n.field } }), i.filters.length && this.trigger("change", { filter: i, field: n.field }) || ((i = this._merge(i)).filters.length && this.dataSource.filter(i), this._closeForm()) }, _stripFilters: function (t) { return e.grep(t, function (e) { return null != e.value }) }, _foreignKeyValues: function () { var e = this.options; return e.values && !e.checkSource }, destroy: function () { var e = this; y.fn.destroy.call(e), e.form && (a.unbind(e.form), a.destroy(e.form), e.form.unbind(x), e.popup && (e.popup.destroy(), e.popup = null), e.form = null, e.container && (e.container.unbind(x), e.container = null), e.checkBoxAll && e.checkBoxAll.unbind(x)), e.view && (e.view.purge(), e.view = null), e._link && e._link.unbind(m), e._refreshHandler && (e.dataSource.unbind(p, e._refreshHandler), e.dataSource = null), e.checkChangeHandler && e.checkSource.unbind(p, e.checkChangeHandler), e._progressHandler && e.checkSource.unbind("progress", e._progressHandler), e._progressHideHandler && e.checkSource.unbind("change", e._progressHideHandler), this._clearTypingTimeout(), this.searchTextBox = null, e.element = e.checkSource = e.container = e.checkBoxAll = e._link = e._refreshHandler = e.checkAllHandler = null }, options: { name: "FilterMultiCheck", itemTemplate: function (e) { var i = e.field, n = e.format, o = e.valueField, r = e.mobile, s = ""; return o === t && (o = i), "date" == e.type && (s = ":yyyy-MM-ddTHH:mm:sszzz"), "<li class='k-item'><label class='k-label'><input type='checkbox' class='" + (r ? "k-check" : "") + "'  value='#:kendo.format('{0" + s + "}'," + o + ")#'/>#:kendo.format('" + (n || "{0}") + "', " + i + ")#</label></li>" }, checkAll: !0, search: !1, ignoreCase: !0, appendToElement: !1, messages: { checkAll: "Select All", clear: "Clear", filter: "Filter", search: "Search", cancel: "Cancel", selectedItemsFormat: "{0} items selected" }, forceUnique: !0, animations: { left: "slide", right: "slide:right" } }, events: [u, f, "change", h] }); e.extend(S.fn, { _click: k.fn._click, _keydown: k.fn._keydown, _reset: k.fn._reset, _closeForm: k.fn._closeForm, clear: k.fn.clear, _merge: k.fn._merge }), l.plugin(k), l.plugin(S) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.menu.min", ["kendo.popup.min"], function () { return function (e, t) { function i(t, i) { try { return e.contains(t, i) } catch (e) { return !1 } } function n(t) { (t = e(t)).addClass("k-item").children(I).addClass(H), t.children("a").addClass(F).children(I).addClass(H), t.filter(":not([disabled])").addClass(te), t.filter(".k-separator").empty().append("&nbsp;"), t.filter("li[disabled]").addClass(oe).removeAttr("disabled").attr("aria-disabled", !0), t.filter("[role]").length || t.attr("role", "menuitem"), t.children("." + F).length || t.contents().filter(function () { return !(this.nodeName.match(A) || 3 == this.nodeType && !e.trim(this.nodeValue)) }).wrapAll("<span class='" + F + "'/>"), o(t), r(t) } function o(t) { (t = e(t)).find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(), t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function () { var t = e(this), i = function (e) { var t = e.parent().parent(), i = g.support.isRtl(t); return t.hasClass(R + "-horizontal") ? " k-i-arrow-60-down" : i ? " k-i-arrow-60-left" : " k-i-arrow-60-right" }(t); t.append("<span class='k-icon " + i + "'/>") }) } function r(t) { (t = e(t)).filter(".k-first:not(:first-child)").removeClass(L), t.filter(".k-last:not(:last-child)").removeClass(z), t.filter(":first-child").addClass(L), t.filter(":last-child").addClass(z) } function s(t, i) { var n = function (e) { var t = e.select, i = g.isFunction; return t && i(t) ? t : null }(i); n && function (t, i) { e(t).children(".k-link").data({ selectHandler: i }) }(t, n), i.items && e(t).children("ul").children("li").each(function (e) { s(this, i.items[e]) }) } function a(e) { return e ? "li[data-groupparent='" + e + "']" : "li[data-groupparent]" } function l(e) { return e ? "ul[data-group='" + e + "']" : "ul[data-group]" } function c(t, i) { var n = t.find(a()), o = []; return n.each(function (n, r) { var s, c; for (r = e(r), s = r.data(Z), c = t; s;)(c = i.find(l(s) + ":visible")).length && o.push(c), r = c.find(a()), s = r.data(Z) }), o } function d(t, i) { var n = t.data(X); return n ? i.find(a(n)) : e([]) } function u(t, i) { var n = t.data(Z); return n ? i.children(ae).children(l(n)) : e([]) } function h(e, t) { for (var i = 0, n = e.parentNode; n && !isNaN(n[t]);)i += n[t], n = n.parentNode; return i } function f(e) { return G && e.originalEvent.pointerType in me } function p(e) { e.contents().filter(function () { return "LI" != this.nodeName }).remove() } var m, g = window.kendo, v = g.ui, _ = g._activeElement, b = g.support.touch && g.support.mobileOS, w = "mousedown", y = "click", k = e.extend, x = e.proxy, C = e.each, S = g.template, T = g.keys, D = v.Widget, A = /^(ul|a|div)$/i, E = ".kendoMenu", I = "img", M = "open", R = "k-menu", F = "k-link", z = "k-last", P = "close", B = "timer", L = "k-first", H = "k-image", N = "select", O = "zIndex", V = "activate", U = "deactivate", W = "touchstart" + E + " MSPointerDown" + E + " pointerdown" + E, q = g.support.pointers, j = g.support.msPointers, G = j || q, $ = q ? "pointerenter" : j ? "MSPointerEnter" : "mouseenter", Y = q ? "pointerleave" : j ? "MSPointerLeave" : "mouseleave", K = "DOMMouseScroll" + E + " mousewheel" + E, Q = g.support.resize + E, X = "group", Z = "groupparent", J = e(document.documentElement), ee = "kendoPopup", te = "k-state-default", ie = "k-state-hover", ne = "k-state-focused", oe = "k-state-disabled", re = ".k-menu", se = ".k-menu-group", ae = ".k-animation-container", le = se + "," + ae, ce = ":not(.k-list) > .k-item", de = ".k-item:not(.k-state-disabled)", ue = ":not(.k-item.k-separator)", he = ue + ":eq(0)", fe = ue + ":last", pe = ".k-menu-scroll-button", me = { 2: 1, touch: 1 }, ge = { content: S("<div #= contentCssAttributes(item) # tabindex='-1'>#= content(item) #</div>"), group: S("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"), itemWrapper: S("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(data) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"), item: S("<li class='#= wrapperCssClass(group, item) #' #= itemCssAttributes(item) # role='menuitem'  #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"), scrollButton: S("<span class='k-button k-button-icon k-menu-scroll-button k-scroll-#= direction #' unselectable='on'><span class='k-icon k-i-arrow-60-#= direction #'></span></span>"), image: S("<img #= imageCssAttributes(item) # alt='' src='#= item.imageUrl #' />"), arrow: S("<span class='#= arrowClass(item, group) #'></span>"), sprite: S("<span class='k-sprite #= spriteCssClass #'></span>"), empty: S("") }, ve = { wrapperCssClass: function (e, t) { var i = "k-item", n = t.index; return i += !1 === t.enabled ? " k-state-disabled" : " k-state-default", e.firstLevel && 0 === n && (i += " k-first"), n == e.length - 1 && (i += " k-last"), t.cssClass && (i += " " + t.cssClass), t.attr && t.attr.hasOwnProperty("class") && (i += " " + t.attr.class), t.selected && (i += " k-state-selected"), i }, itemCssAttributes: function (e) { var t, i = "", n = e.attr || {}; for (t in n) n.hasOwnProperty(t) && "class" !== t && (i += t + '="' + n[t] + '" '); return i }, imageCssAttributes: function (e) { var t, i = "", n = e.imageAttr || {}; for (t in n.class ? n.class += " " + H : n.class = H, n) n.hasOwnProperty(t) && (i += t + '="' + n[t] + '" '); return i }, contentCssAttributes: function (e) { var t, i = "", n = e.contentAttr || {}, o = "k-content k-group k-menu-group"; for (t in n.class ? n.class += " " + o : n.class = o, n) n.hasOwnProperty(t) && (i += t + '="' + n[t] + '" '); return i }, textClass: function () { return F }, textAttributes: function (e) { return e.url ? " href='" + e.url + "'" : "" }, arrowClass: function (e, t) { var i = "k-icon"; return i += t.horizontal ? " k-i-arrow-60-down" : " k-i-arrow-60-right" }, text: function (e) { return !1 === e.encoded ? e.text : g.htmlEncode(e.text) }, tag: function (e) { return e.url ? "a" : "span" }, groupAttributes: function (e) { return !0 !== e.expanded ? " style='display:none'" : "" }, groupCssClass: function () { return "k-group k-menu-group" }, content: function (e) { return e.content ? e.content : "&nbsp;" } }, _e = D.extend({ init: function (e, t) { var i = this; D.fn.init.call(i, e, t), e = i.wrapper = i.element, t = i.options, i._initData(t), i._updateClasses(), i._animations(t), i.nextItemZIndex = 100, i._tabindex(), i._initOverflow(t), i._attachMenuEventsHandlers(), t.openOnClick && (i.clicked = !1), e.attr("role", "menubar"), e[0].id && (i._ariaId = g.format("{0}_mn_active", e[0].id)), g.notify(i) }, events: [M, P, V, U, N], options: { name: "Menu", animation: { open: { duration: 200 }, close: { duration: 100 } }, orientation: "horizontal", direction: "default", openOnClick: !1, closeOnClick: !0, hoverDelay: 100, scrollable: !1, popupCollision: t }, _initData: function (e) { var t = this; e.dataSource && (t.angular("cleanup", function () { return { elements: t.element.children() } }), t.element.empty(), t.append(e.dataSource, t.element), t.angular("compile", function () { return { elements: t.element.children() } })) }, _attachMenuEventsHandlers: function () { var t = this, i = t.element, n = t.options, o = t._overflowWrapper(); (o || i).on(W, de, x(t._focusHandler, t)).on(y + E, ".k-item.k-state-disabled", !1).on(y + E, de, x(t._click, t)).on(W + " " + w + E, ".k-content", x(t._preventClose, t)).on($ + E, de, x(t._mouseenter, t)).on(Y + E, de, x(t._mouseleave, t)).on($ + E + " " + Y + E + " " + w + E + " " + y + E, ".k-item:not(.k-state-disabled) > .k-link", x(t._toggleHover, t)), i.on("keydown" + E, x(t._keydown, t)).on("focus" + E, x(t._focus, t)).on("focus" + E, ".k-content", x(t._focus, t)).on("blur" + E, x(t._removeHoverItem, t)).on("blur" + E, "[tabindex]", x(t._checkActiveElement, t)), o && o.on(Y + E, le, x(t._mouseleavePopup, t)).on($ + E, le, x(t._mouseenterPopup, t)), n.openOnClick && (t._documentClickHandler = x(t._documentClick, t), e(document).click(t._documentClickHandler)) }, _detachMenuEventsHandlers: function () { var t = this, i = t._overflowWrapper(); i && i.off(E), t.element.off(E), t._documentClickHandler && e(document).unbind("click", t._documentClickHandler) }, _initOverflow: function (t) { var i, n, o, r, s = this, a = "horizontal" == t.orientation; t.scrollable && (s._openedPopups = {}, s._scrollWrapper = s.element.wrap("<div class='k-menu-scroll-wrapper " + t.orientation + "'></div>").parent(), a && p(s.element), i = e(ge.scrollButton({ direction: a ? "left" : "up" })), n = e(ge.scrollButton({ direction: a ? "right" : "down" })), i.add(n).appendTo(s._scrollWrapper), s._initScrolling(s.element, i, n, a), o = s.element.outerWidth(), r = "auto" === (r = s.element[0].style.width) ? "" : r, a && e(window).on(Q, g.throttle(function () { s._setOverflowWrapperWidth(o, r), s._toggleScrollButtons(s.element, i, n, a) }, 100)), s._setOverflowWrapperWidth(o, r), s._toggleScrollButtons(s.element, i, n, a)) }, _overflowWrapper: function () { return this._scrollWrapper || this._popupsWrapper }, _setOverflowWrapperWidth: function (e, t) { var i, n, o, r, s = this, a = s._scrollWrapper.css("width"); s._scrollWrapper.css({ width: "" }), i = s._scrollWrapper.outerWidth(), s._scrollWrapper.css({ width: a }), n = s.element.outerWidth(), o = s.element[0].offsetWidth - s.element[0].clientWidth, n != i && (r = t ? Math.min(e, i) : i, s.element.width(r - o), s._scrollWrapper.width(r)) }, _reinitOverflow: function (e) { var t = this, i = e.scrollable && !t.options.scrollable || !e.scrollable && t.options.scrollable || e.scrollable && t.options.scrollable && e.scrollable.distance != t.options.scrollable.distance || e.orientation != t.options.orientation; i && (t._detachMenuEventsHandlers(), t._destroyOverflow(), t._initOverflow(e), t._attachMenuEventsHandlers()) }, _destroyOverflow: function () { var i = this, n = i._overflowWrapper(); n && (n.off(E), n.find(pe).off(E).remove(), n.children(ae).each(function (t, i) { var o, r = e(i).children(se); r.off(K), (o = d(r, n)).length && o.append(i) }), n.find(a()).removeAttr("data-groupparent"), n.find(l()).removeAttr("data-group"), i.element.off(K), e(window).off(Q), n.contents().unwrap(), i._scrollWrapper = i._popupsWrapper = i._openedPopups = t) }, _initScrolling: function (t, i, n, o) { var r = this, s = r.options.scrollable, a = e.isNumeric(s.distance) ? s.distance : 50, l = a / 2, c = "-=" + a, d = "+=" + a, u = "-=" + 2 * a, h = "+=" + 2 * a, p = !1, m = !1, v = function (e) { var s = o ? { scrollLeft: e } : { scrollTop: e }; t.finish().animate(s, "fast", "linear", function () { p && v(e) }), r._toggleScrollButtons(t, i, n, o) }, _ = function (e) { p || m || (v(e.data.direction), p = !0) }, w = function (s) { var a = o ? { scrollLeft: s.data.direction } : { scrollTop: s.data.direction }; m = function (e) { var t = e.originalEvent; return b && /touch/i.test(t.type || "") }(s) || f(s), t.stop().animate(a, "fast", "linear", function () { m ? (r._toggleScrollButtons(t, i, n, o), p = !0) : e(s.currentTarget).trigger($) }), p = !1, s.stopPropagation(), s.preventDefault() }; i.on($ + E, { direction: c }, _).on(g.eventMap.down + E, { direction: u }, w), n.on($ + E, { direction: d }, _).on(g.eventMap.down + E, { direction: h }, w), i.add(n).on(Y + E, function () { t.stop(), p = !1, r._toggleScrollButtons(t, i, n, o) }), t.on(K, function (e) { var s, a, c, d; e.ctrlKey || e.shiftKey || e.altKey || (s = function (e) { var t = 0; return e.wheelDelta && (t = (t = -e.wheelDelta / 120) > 0 ? Math.ceil(t) : Math.floor(t)), e.detail && (t = Math.round(e.detail / 3)), t }(e.originalEvent), a = Math.abs(s) * l, c = (s > 0 ? "+=" : "-=") + a, d = o ? { scrollLeft: c } : { scrollTop: c }, r._closeChildPopups(t), t.finish().animate(d, "fast", "linear", function () { r._toggleScrollButtons(t, i, n, o) }), e.preventDefault()) }) }, _toggleScrollButtons: function (e, t, i, n) { var o = n ? e.scrollLeft() : e.scrollTop(), r = n ? "scrollWidth" : "scrollHeight", s = n ? "offsetWidth" : "offsetHeight"; t.toggle(0 !== o), i.toggle(o < e[0][r] - e[0][s] - 1) }, setOptions: function (e) { var t = this.options.animation; this._animations(e), e.animation = k(!0, t, e.animation), "dataSource" in e && this._initData(e), this._updateClasses(), this._reinitOverflow(e), D.fn.setOptions.call(this, e) }, destroy: function () { var e = this; D.fn.destroy.call(e), e._detachMenuEventsHandlers(), e._destroyOverflow(), g.destroy(e.element) }, enable: function (e, t) { return this._toggleDisabled(e, !1 !== t), this }, disable: function (e) { return this._toggleDisabled(e, !1), this }, append: function (e, t) { t = this.element.find(t); var i = this._insert(e, t, t.length ? t.find("> .k-menu-group, > .k-animation-container > .k-menu-group") : null); return C(i.items, function (t) { i.group.append(this), o(this), s(this, e[t] || e) }), o(t), r(i.group.find(".k-first, .k-last").add(i.items)), this }, insertBefore: function (e, t) { t = this.element.find(t); var i = this._insert(e, t, t.parent()); return C(i.items, function (i) { t.before(this), o(this), r(this), s(this, e[i] || e) }), r(t), this }, insertAfter: function (e, t) { t = this.element.find(t); var i = this._insert(e, t, t.parent()); return C(i.items, function (i) { t.after(this), o(this), r(this), s(this, e[i] || e) }), r(t), this }, _insert: function (t, i, o) { var r, s, a, l; return i && i.length || (o = this.element), a = e.isPlainObject(t), l = { firstLevel: o.hasClass(R), horizontal: o.hasClass(R + "-horizontal"), expanded: !0, length: o.children().length }, i && !o.length && (o = e(_e.renderGroup({ group: l })).appendTo(i)), a || e.isArray(t) ? r = e(e.map(a ? [t] : t, function (t, i) { return "string" == typeof t ? e(t).get() : e(_e.renderItem({ group: l, item: k(t, { index: i }) })).get() })) : (r = "string" == typeof t && "<" != t.charAt(0) ? this.element.find(t) : e(t), s = r.find("> ul").addClass("k-menu-group").attr("role", "menu"), (r = r.filter("li")).add(s.find("> li")).each(function () { n(this) })), { items: r, group: o } }, remove: function (e) { var t, i, n; return e = this.element.find(e), this, t = e.parentsUntil(this.element, ce), i = e.parent("ul:not(.k-menu)"), e.remove(), i && !i.children(ce).length && ((n = i.parent(ae)).length ? n.remove() : i.remove()), t.length && (o(t = t.eq(0)), r(t)), this }, open: function (i) { var n, o, r = this, s = r.options, l = "horizontal" == s.orientation, c = s.direction, d = g.support.isRtl(r.wrapper), u = r._overflowWrapper(); return i = (u || r.element).find(i), /^(top|bottom|default)$/.test(c) && (c = d ? l ? (c + " left").replace("default", "bottom") : "left" : l ? (c + " right").replace("default", "bottom") : "right"), n = ">.k-popup:visible,>.k-animation-container>.k-popup:visible", o = function () { var t = e(this).data(ee); t && t.close(!0) }, i.siblings().find(n).each(o), u && (i.find(n).each(o), u.find("." + ne).removeClass(ne)), i.each(function () { var i = e(this); clearTimeout(i.data(B)), i.data(B, setTimeout(function () { var n, o, h, f, p, m, v, _, w, y, C = i.find(".k-menu-group:first:hidden"); !C[0] && u && (o = r._getPopup(i), C = o && o.element), C.is(":visible") || C[0] && !1 === r._triggerEvent({ item: i[0], type: M }) && (!C.find(".k-menu-group")[0] && C.children(".k-item").length > 1 ? (h = e(window).height(), f = function () { C.css({ maxHeight: h - (g._outerHeight(C) - C.height()) - g.getShadows(C).bottom, overflow: "auto" }) }, g.support.browser.msie && g.support.browser.version <= 7 ? setTimeout(f, 0) : f()) : C.css({ maxHeight: "", overflow: "" }), i.data(O, i.css(O)), p = r.nextItemZIndex++, i.css(O, p), r.options.scrollable && i.parent().siblings(pe).css({ zIndex: ++p }), n = C.data(ee), m = i.parent().hasClass(R), v = m && l, _ = function (e, t, i) { e = e.split(" ")[!t + 0] || e; var n = { origin: ["bottom", i ? "right" : "left"], position: ["top", i ? "right" : "left"] }; return /left|right/.test(e) ? (n.origin = ["top", e], n.position[1] = g.directions[e].reverse) : (n.origin[0] = e, n.position[0] = g.directions[e].reverse), n.origin = n.origin.join(" "), n.position = n.position.join(" "), n }(c, m, d), w = s.animation.open.effects, y = w !== t ? w : "slideIn:" + function (e, t) { return (e = e.split(" ")[!t + 0] || e).replace("top", "up").replace("bottom", "down") }(c, m), n ? ((n = C.data(ee)).options.origin = _.origin, n.options.position = _.position, n.options.animation.open.effects = y) : n = C.kendoPopup({ activate: function () { r._triggerEvent({ item: this.wrapper.parent(), type: V }) }, deactivate: function (e) { e.sender.element.removeData("targetTransform").css({ opacity: "" }), r._triggerEvent({ item: this.wrapper.parent(), type: U }) }, origin: _.origin, position: _.position, collision: s.popupCollision !== t ? s.popupCollision : v ? "fit" : "fit flip", anchor: i, appendTo: u || i, animation: { open: k(!0, { effects: y }, s.animation.open), close: s.animation.close }, open: x(r._popupOpen, r), close: function (e) { var t, i = e.sender.wrapper.parent(); u && ((t = e.sender.element.data(X)) && (i = (u || r.element).find(a(t))), e.sender.wrapper.children(pe).hide()), r._triggerEvent({ item: i[0], type: P }) ? e.preventDefault() : (i.css(O, i.data(O)), i.removeData(O), r.options.scrollable && i.parent().siblings(pe).css({ zIndex: "" }), (b || G) && (i.removeClass(ie), r._removeHoverItem())) } }).data(ee), C.removeAttr("aria-hidden"), r._configurePopupOverflow(n, i), n.open(), r._initPopupScrolling(n)) }, r.options.hoverDelay)) }), r }, _configurePopupOverflow: function (e, t) { var i; this.options.scrollable && (this._wrapPopupElement(e), t.attr("data-groupparent") || (i = (new Date).getTime(), t.attr("data-groupparent", i), e.element.attr("data-group", i))) }, _wrapPopupElement: function (e) { e.element.parent().is(ae) || (e.wrapper = g.wrap(e.element, e.options.autosize).css({ overflow: "hidden", display: "block", position: "absolute" })) }, _initPopupScrolling: function (e, t, i) { this.options.scrollable && e.element[0].scrollHeight > e.element[0].offsetHeight && this._initPopupScrollButtons(e, t, i) }, _initPopupScrollButtons: function (t, i, n) { var o = this, r = t.wrapper.children(pe), s = o.options.animation, l = (s && s.open && s.open.duration || 0) + 30; setTimeout(function () { var s, l; r.length || (s = e(ge.scrollButton({ direction: i ? "left" : "up" })), l = e(ge.scrollButton({ direction: i ? "right" : "down" })), r = s.add(l).appendTo(t.wrapper), o._initScrolling(t.element, s, l, i), n || r.on($ + E, function () { var i = o._overflowWrapper(); e(c(t.element, i)).each(function (e, t) { var n = i.find(a(t.data(X))); o.close(n) }) }).on(Y + E, function () { setTimeout(function () { e.isEmptyObject(o._openedPopups) && o._closeParentPopups(t.element) }, 30) })), o._toggleScrollButtons(t.element, r.first(), r.last(), i) }, l) }, _popupOpen: function (e) { this.options.scrollable && this._setPopupHeight(e.sender) }, _setPopupHeight: function (t, i) { var n, o, r, s, a, l, c, d, u = t.element, f = u.add(u.parent(ae)); f.height(u.hasClass(R) && this._initialHeight || ""), n = t._location(i), o = e(window).height(), r = n.height, s = i ? 0 : Math.max(n.top, 0), a = i ? 0 : h(this._overflowWrapper()[0], "scrollTop"), l = window.innerHeight - o, c = o - g.getShadows(u).bottom + l, c + a > r + s || (d = Math.min(c, c - s + a), f.css({ overflow: "hidden", height: d + "px" })) }, close: function (t, i) { var n, o, r = this, s = r._overflowWrapper(), a = s || r.element; return (t = a.find(t)).length || (t = a.find(">.k-item")), n = function (t) { var i = !1; return e.isEmptyObject(r._openedPopups) ? i : (e(c(t, s)).each(function (e, t) { return !(i = !!r._openedPopups["" + t.data(X)]) }), i) }, o = function (e) { var t = e.data(Z); return !s || !t || !r._openedPopups["" + t] }, t.each(function () { var a = e(this); !i && r._isRootItem(a) && (r.clicked = !1), clearTimeout(a.data(B)), a.data(B, setTimeout(function () { var e = r._getPopup(a); if (e && (o(a) || r._forceClose)) { if (!r._forceClose && n(e.element)) return; e.close(), e.element.attr("aria-hidden", !0), s && r._forceClose && t.last().is(a[0]) && delete r._forceClose } }, r.options.hoverDelay)) }), r }, _getPopup: function (e) { var t, i, n = e.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(ee), o = this._overflowWrapper(); return !n && o && ((t = e.data(Z)) && (i = o.find(l(t)), n = i.data(ee))), n }, _toggleDisabled: function (t, i) { this.element.find(t).each(function () { e(this).toggleClass(te, i).toggleClass(oe, !i).attr("aria-disabled", !i) }) }, _toggleHover: function (t) { var i = e(g.eventTarget(t) || t.target).closest(ce), n = t.type == $ || -1 !== w.indexOf(t.type); i.parents("li." + oe).length || i.toggleClass(ie, n || "mousedown" == t.type || "click" == t.type), this._removeHoverItem() }, _preventClose: function () { this.options.closeOnClick || (this._closurePrevented = !0) }, _checkActiveElement: function (t) { var n = this, o = e(t ? t.currentTarget : this._hoverItem()), r = n._findRootParent(o)[0]; this._closurePrevented || setTimeout(function () { document.hasFocus() && (i(r, g._activeElement()) || !t || i(r, t.currentTarget)) || n.close(r) }, 0), this._closurePrevented = !1 }, _removeHoverItem: function () { var e = this._hoverItem(); e && e.hasClass(ne) && (e.removeClass(ne), this._oldHoverItem = null) }, _updateClasses: function () { var e, t = this.element; t.removeClass("k-menu-horizontal k-menu-vertical"), t.addClass("k-widget k-reset k-header k-menu-init " + R).addClass(R + "-" + this.options.orientation), t.find("li > ul").filter(function () { return !g.support.matchesSelector.call(this, ".k-menu-init div ul") }).addClass("k-group k-menu-group").attr("role", "menu").attr("aria-hidden", t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex", "-1"), e = t.find("> li,.k-menu-group > li"), t.removeClass("k-menu-init"), e.each(function () { n(this) }) }, _mouseenter: function (t) { var n = this, o = e(t.currentTarget), r = n._itemHasChildren(o), s = o.data(Z) || o.parent().data(X), a = f(t); s && (n._openedPopups["" + s] = !0), t.delegateTarget != o.parents(re)[0] && t.delegateTarget != o.parents(".k-menu-scroll-wrapper,.k-popups-wrapper")[0] || (n.options.openOnClick && !n.clicked || b || a && n._isRootItem(o.closest(ce)) || !i(t.currentTarget, t.relatedTarget) && r && n.open(o), (n.options.openOnClick && n.clicked || b) && o.siblings().each(x(function (e, t) { n.close(t, !0) }, n))) }, _mouseleave: function (n) { var o = this, r = e(n.currentTarget), s = r.data(Z), a = r.children(ae).length || r.children(se).length || s, l = e(window); return s && delete o._openedPopups["" + s], r.parentsUntil(ae, ".k-list-container,.k-calendar-container")[0] ? (n.stopImmediatePropagation(), t) : o.options.openOnClick || b || f(n) || i(n.currentTarget, n.relatedTarget || n.target) || !a || i(n.currentTarget, g._activeElement()) ? ((!n.toElement && !n.relatedTarget || n.clientX < 0 || n.clientY < 0 || n.clientY > l.height() || n.clientX > l.width()) && o.close(r), t) : (o.close(r), t) }, _mouseenterPopup: function (t) { var i, n = e(t.currentTarget); n.parent().is(ae) || (n = n.children("ul"), (i = n.data(X)) && (this._openedPopups["" + i] = !0)) }, _mouseleavePopup: function (t) { var i = e(t.currentTarget); !f(t) && i.is(ae) && this._closePopups(i.children("ul")) }, _closePopups: function (t) { var i, n = this, o = n._overflowWrapper(), r = t.data(X); r && (delete n._openedPopups["" + r], i = o.find(a(r)), setTimeout(function () { if (n.options.openOnClick) n._closeChildPopups(t); else if (e.isEmptyObject(n._openedPopups)) { var o = n._innerPopup(t); n._closeParentPopups(o) } else n.close(i, !0) }, 0)) }, _closeChildPopups: function (t) { var i = this, n = i._overflowWrapper(); e(c(t, n)).each(function () { var e = n.find(a(this.data(X))); i.close(e, !0) }) }, _innerPopup: function (e) { var t = this._overflowWrapper(), i = c(e, t); return i[i.length - 1] || e }, _closeParentPopups: function (e) { var t = this, i = t._overflowWrapper(), n = e.data(X), o = i.find(a(n)); for (n = o.parent().data(X), t.close(o, !0); n && !t._openedPopups[n] && !o.parent().is(re);)o = i.find(a(n)), t.close(o, !0), n = o.parent().data(X) }, _click: function (i) { for (var n, o, r, s, a, c, d = this, u = d.options, h = e(g.eventTarget(i)), f = h[0], p = h[0] ? h[0].nodeName.toUpperCase() : "", m = "INPUT" == p || "SELECT" == p || "BUTTON" == p || "LABEL" == p, v = h.closest("." + F), _ = h.closest(ce), b = _[0], w = v.attr("href"), y = h.attr("href"), k = e("<a href='#' />").attr("href"), x = !!w && w !== k, C = x && !!w.match(/^#/), S = !!y && y !== k, T = d._overflowWrapper(); f && f.parentNode != b;)f = f.parentNode; if (!e(f).is("div:not(.k-animation-container,.k-list-container)")) { if (_.hasClass(oe)) return i.preventDefault(), t; if (i.handled || !d._triggerSelect(h, b) || m || i.preventDefault(), i.handled = !0, o = _.children(le), T && ((a = _.data(Z)) && (o = T.find(l(a)))), r = o.is(":visible"), s = u.openOnClick && r && d._isRootItem(_), u.closeOnClick && (!x || C) && (!o.length || s)) return _.removeClass(ie).css("height"), d._oldHoverItem = d._findRootParent(_), c = d._parentsUntil(v, d.element, ce), d._forceClose = !!T, d.close(c), d.clicked = !1, -1 != "MSPointerUp".indexOf(i.type) && i.preventDefault(), t; x && i.enterKey && v[0].click(), (d._isRootItem(_) && u.openOnClick || g.support.touch || G && d._isRootItem(_.closest(ce))) && (x || m || S || i.preventDefault(), d.clicked = !0, n = o.is(":visible") ? P : M, (u.closeOnClick || n != P) && d[n](_)) } }, _parentsUntil: function (i, n, o) { var r, s, a = this._overflowWrapper(); return a ? (r = function (t, i) { var n, o, r = [], s = function (e) { for (; e.parentNode && !i.is(e.parentNode);)r.push(e.parentNode), e = e.parentNode }, a = t[0] || t; for (s(a), n = r[r.length - 1]; e(n).is(ae) && (o = e(n).children("ul"), a = d(o, i)[0]);)r.push(a), s(a), n = r[r.length - 1]; return r }(i, a), s = [], e(r).each(function () { var i = e(this); return !i.is(n) && (i.is(o) && s.push(this), t) }), e(s)) : i.parentsUntil(n, o) }, _triggerSelect: function (e, t) { var i, n, o, r = e.data("selectHandler"); return r && (i = this._getEventData(e), r.call(this, i)), n = i && i.isDefaultPrevented(), o = this._triggerEvent({ item: t, type: N }), n || o }, _getEventData: function (e) { var t = { sender: this, target: e, _defaultPrevented: !1, preventDefault: function () { this._defaultPrevented = !0 }, isDefaultPrevented: function () { return this._defaultPrevented } }; return t }, _documentClick: function (e) { var t = this; i((t._overflowWrapper() || t.element)[0], e.target) || (t.clicked = !1) }, _focus: function (i) { var n = this, o = i.target, r = n._hoverItem(), s = _(); return o == n.wrapper[0] || e(o).is(":kendoFocusable") ? (s === i.currentTarget && (r.length ? n._moveHover([], r) : n._oldHoverItem || n._moveHover([], n.wrapper.children().first())), t) : (i.stopPropagation(), e(o).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(ne), n.wrapper.focus(), t) }, _keydown: function (e) { var i, n, o, r = this, s = e.keyCode, a = r._oldHoverItem, l = g.support.isRtl(r.wrapper); if (e.target == e.currentTarget || s == T.ESC) { if (a || (a = r._oldHoverItem = r._hoverItem()), n = r._itemBelongsToVertival(a), o = r._itemHasChildren(a), s == T.RIGHT) i = r[l ? "_itemLeft" : "_itemRight"](a, n, o); else if (s == T.LEFT) i = r[l ? "_itemRight" : "_itemLeft"](a, n, o); else if (s == T.DOWN) i = r._itemDown(a, n, o); else if (s == T.UP) i = r._itemUp(a, n, o); else if (s == T.ESC) i = r._itemEsc(a, n); else if (s == T.ENTER || s == T.SPACEBAR) (i = a.children(".k-link")).length > 0 && (r._click({ target: i[0], preventDefault: function () { }, enterKey: !0 }), r._moveHover(a, r._findRootParent(a))); else if (s == T.TAB) return i = r._findRootParent(a), r._moveHover(a, i), r._checkActiveElement(), t; i && i[0] && (e.preventDefault(), e.stopPropagation()) } }, _hoverItem: function () { return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible") }, _itemBelongsToVertival: function (e) { var t = this.wrapper.hasClass("k-menu-vertical"); return e.length && e.parent().hasClass("k-menu-group") || t }, _itemHasChildren: function (e) { return !!(e && e.length && e[0].nodeType) && (e.children("ul.k-menu-group, div.k-animation-container").length > 0 || !!e.data(Z) && !!this._overflowWrapper().children(l(e.data(Z)))) }, _moveHover: function (t, i) { var n = this, o = n._ariaId; t.length && i.length && t.removeClass(ne), i.length && (i[0].id && (o = i[0].id), i.addClass(ne), n._oldHoverItem = i, o && (n.element.removeAttr("aria-activedescendant"), e("#" + o).removeAttr("id"), i.attr("id", o), n.element.attr("aria-activedescendant", o)), n._scrollToItem(i)) }, _findRootParent: function (e) { return this._isRootItem(e) ? e : this._parentsUntil(e, re, "li.k-item").last() }, _isRootItem: function (e) { return e.parent().hasClass(R) }, _itemRight: function (e, t, i) { var n, o, r, s, a = this; if (!e.hasClass(oe)) return t ? i ? (a.open(e), n = a._childPopupElement(e).children().first()) : "horizontal" == a.options.orientation && (o = a._findRootParent(e), (r = a._overflowWrapper()) && (s = u(o, r), a._closeChildPopups(s)), a.close(o), n = o.nextAll(he)) : (n = e.nextAll(he)).length || (n = e.prevAll(fe)), n && !n.length ? n = a.wrapper.children(".k-item").first() : n || (n = []), a._moveHover(e, n), n }, _itemLeft: function (e, t) { var i, n, o = this; return t ? (i = e.parent().closest(".k-item"), n = o._overflowWrapper(), !i.length && n && (i = d(e.parent(), n)), o.close(i), o._isRootItem(i) && "horizontal" == o.options.orientation && (i = i.prevAll(he))) : (i = e.prevAll(he)).length || (i = e.nextAll(fe)), i.length || (i = o.wrapper.children(".k-item").last()), o._moveHover(e, i), i }, _itemDown: function (e, t, i) { var n, o = this; if (t) n = e.nextAll(he); else { if (!i || e.hasClass(oe)) return; o.open(e), n = o._childPopupElement(e).children().first() } return !n.length && e.length ? n = e.parent().children().first() : e.length || (n = o.wrapper.children(".k-item").first()), o._moveHover(e, n), n }, _itemUp: function (e, t) { var i; if (t) return !(i = e.prevAll(he)).length && e.length ? i = e.parent().children().last() : e.length || (i = this.wrapper.children(".k-item").last()), this._moveHover(e, i), i }, _scrollToItem: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f = this; f.options.scrollable && e && e.length && (t = e.parent(), i = !!t.hasClass(R) && "horizontal" == f.options.orientation, n = i ? "scrollLeft" : "scrollTop", o = i ? g._outerWidth : g._outerHeight, r = t[n](), s = o(e), a = e[0][i ? "offsetLeft" : "offsetTop"], l = o(t), c = t.siblings(pe), d = c.length ? o(c.first()) : 0, r + l < a + s + d ? u = a + s - l + d : r > a - d && (u = a - d), isNaN(u) || ((h = {})[n] = u, t.finish().animate(h, "fast", "linear", function () { f._toggleScrollButtons(t, c.first(), c.last(), i) }))) }, _itemEsc: function (e, t) { var i; return t ? (i = e.parent().closest(".k-item"), this.close(i), this._moveHover(e, i), i) : e }, _childPopupElement: function (e) { var t = e.find(".k-menu-group"), i = this._overflowWrapper(); return !t.length && i && (t = u(e, i)), t }, _triggerEvent: function (e) { return this.trigger(e.type, { type: e.type, item: e.item }) }, _focusHandler: function (t) { var i = this, n = e(g.eventTarget(t)).closest(ce); n.hasClass(oe) || setTimeout(function () { i._moveHover([], n), n.children(".k-content")[0] && n.parent().closest(".k-item").removeClass(ne) }, 200) }, _animations: function (e) { e && "animation" in e && !e.animation && (e.animation = { open: { effects: {} }, close: { hide: !0, effects: {} } }) } }); k(_e, { renderItem: function (e) { e = k({ menu: {}, group: {} }, e); var t = ge.empty, i = e.item; return ge.item(k(e, { image: i.imageUrl ? ge.image : t, sprite: i.spriteCssClass ? ge.sprite : t, itemWrapper: ge.itemWrapper, renderContent: _e.renderContent, arrow: i.items || i.content ? ge.arrow : t, subGroup: _e.renderGroup }, ve)) }, renderGroup: function (e) { return ge.group(k({ renderItems: function (e) { for (var t = "", i = 0, n = e.items, o = n ? n.length : 0, r = k({ length: o }, e.group); i < o; i++)t += _e.renderItem(k(e, { group: r, item: k({ index: i }, n[i]) })); return t } }, e, ve)) }, renderContent: function (e) { return ge.content(k(e, ve)) } }), m = _e.extend({ init: function (t, i) { var n = this; _e.fn.init.call(n, t, i), n._marker = g.guid().substring(0, 8), n.target = e(n.options.target), n._popup(), n._wire() }, _initOverflow: function (e) { var t = this; e.scrollable && !t._overflowWrapper() && (t._openedPopups = {}, t._popupsWrapper = (t.element.parent().is(ae) ? t.element.parent() : t.element).wrap("<div class='k-popups-wrapper " + e.orientation + "'></div>").parent(), "horizontal" == t.options.orientation && p(t.element), e.appendTo && e.appendTo.append(t._popupsWrapper), t._initialHeight = t.element[0].style.height, t._initialWidth = t.element[0].style.width) }, options: { name: "ContextMenu", filter: null, showOn: "contextmenu", orientation: "vertical", alignToAnchor: !1, target: "body" }, events: [M, P, V, U, N], setOptions: function (t) { var i = this; _e.fn.setOptions.call(i, t), i.target.off(i.showOn + E + i._marker, i._showProxy), i.userEvents && i.userEvents.destroy(), i.target = e(i.options.target), t.orientation && i.popup.wrapper[0] && i.popup.element.unwrap(), i._wire(), _e.fn.setOptions.call(this, t) }, destroy: function () { var e = this; e.target.off(e.options.showOn + E + e._marker), J.off(g.support.mousedown + E + e._marker, e._closeProxy), e.userEvents && e.userEvents.destroy(), _e.fn.destroy.call(e) }, open: function (n, o) { var r, s, a = this; return n = e(n)[0], i(a.element[0], e(n)[0]) || a._itemHasChildren(e(n)) ? _e.fn.open.call(a, n) : !1 === a._triggerEvent({ item: a.element, type: M }) && (a.popup.visible() && a.options.filter && (a.popup.close(!0), a.popup.element.kendoStop(!0)), o !== t ? ((r = a._overflowWrapper()) && (s = r.offset(), n -= s.left, o -= s.top), a.popup.wrapper.hide(), a._configurePopupScrolling(n, o), a.popup.open(n, o)) : (a.popup.options.anchor = n || a.popup.anchor || a.target, a.popup.element.kendoStop(!0), a._configurePopupScrolling(), a.popup.open()), J.off(a.popup.downEvent, a.popup._mousedownProxy), J.on(g.support.mousedown + E + a._marker, a._closeProxy)), a }, _configurePopupScrolling: function (e, i) { var n = this, o = n.popup, r = "horizontal" == n.options.orientation; n.options.scrollable && (n._wrapPopupElement(o), o.element.parent().css({ position: "", height: "" }), o.element.css({ visibility: "hidden", display: "", position: "" }), r ? n._setPopupWidth(o, isNaN(e) ? t : { isFixed: !0, x: e, y: i }) : n._setPopupHeight(o, isNaN(e) ? t : { isFixed: !0, x: e, y: i }), o.element.css({ visibility: "", display: "none", position: "absolute" }), n._initPopupScrollButtons(o, r, !0), o.element.siblings(pe).hide()) }, _setPopupWidth: function (t, i) { var n, o, r, s, a, l, c, d = t.element, u = d.add(d.parent(ae)); u.width(this._initialWidth || ""), n = t._location(i), o = e(window).width(), r = n.width, s = Math.max(n.left, 0), a = i ? 0 : h(this._overflowWrapper()[0], "scrollLeft"), l = g.getShadows(d), c = o - l.left - l.right, c + a > r + s || u.css({ overflow: "hidden", width: c - s + a + "px" }) }, close: function () { var t = this; i(t.element[0], e(arguments[0])[0]) || t._itemHasChildren(arguments[0]) ? _e.fn.close.call(t, arguments[0]) : t.popup.visible() && !1 === t._triggerEvent({ item: t.element, type: P }) && (t.popup.close(), J.off(g.support.mousedown + E, t._closeProxy), t.unbind(N, t._closeTimeoutProxy)) }, _showHandler: function (e) { var t, n = e, o = this, r = o.options; e.event && ((n = e.event).pageX = e.x.location, n.pageY = e.y.location), i(o.element[0], e.relatedTarget || e.target) || (o._eventOrigin = n, n.preventDefault(), n.stopImmediatePropagation(), o.element.find("." + ne).removeClass(ne), (r.filter && g.support.matchesSelector.call(n.currentTarget, r.filter) || !r.filter) && (r.alignToAnchor ? (o.popup.options.anchor = n.currentTarget, o.open(n.currentTarget)) : (o.popup.options.anchor = n.currentTarget, o._targetChild ? (t = o.target.offset(), o.open(n.pageX - t.left, n.pageY - t.top)) : o.open(n.pageX, n.pageY)))) }, _closeHandler: function (t) { var n, o = this, r = e(t.relatedTarget || t.target), s = r.closest(o.target.selector)[0] == o.target[0], a = r.closest(de), l = o._itemHasChildren(a), c = o._overflowWrapper(), d = i(o.element[0], r[0]) || c && i(c[0], r[0]); o._eventOrigin = t, n = 3 !== t.which, o.popup.visible() && (n && s || !s) && (o.options.closeOnClick && !l && d || !d) && (d ? (this.unbind(N, this._closeTimeoutProxy), o.bind(N, o._closeTimeoutProxy)) : o.close()) }, _wire: function () { var e = this, t = e.options, i = e.target; e._showProxy = x(e._showHandler, e), e._closeProxy = x(e._closeHandler, e), e._closeTimeoutProxy = x(e.close, e), i[0] && (g.support.mobileOS && "contextmenu" == t.showOn ? (e.userEvents = new g.UserEvents(i, { filter: t.filter, allowSelection: !1 }), i.on(t.showOn + E + e._marker, !1), e.userEvents.bind("hold", e._showProxy)) : t.filter ? i.on(t.showOn + E + e._marker, t.filter, e._showProxy) : i.on(t.showOn + E + e._marker, e._showProxy)) }, _triggerEvent: function (i) { var n = this, o = e(n.popup.options.anchor)[0], r = n._eventOrigin; return n._eventOrigin = t, n.trigger(i.type, k({ type: i.type, item: i.item || this.element[0], target: o }, r ? { event: r } : {})) }, _popup: function () { var t = this, n = t._overflowWrapper(); t._triggerProxy = x(t._triggerEvent, t), t.popup = t.element.addClass("k-context-menu").kendoPopup({ anchor: t.target || "body", copyAnchorStyles: t.options.copyAnchorStyles, collision: t.options.popupCollision || "fit", animation: t.options.animation, activate: t._triggerProxy, deactivate: t._triggerProxy, appendTo: n || t.options.appendTo, close: n ? function (t) { e(c(t.sender.element, n)).each(function (e, t) { var i = t.data(ee); i && i.close(!0) }) } : e.noop }).data(ee), t._targetChild = i(t.target[0], t.popup.element[0]) } }), v.plugin(_e), v.plugin(m) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.columnmenu.min", ["kendo.popup.min", "kendo.filtermenu.min", "kendo.menu.min"], function () { return function (e, t) { function i(t) { return e.trim(t).replace(/&nbsp;/gi, "") } function n(e) { var t, i = []; for (t = 0; t < e.length; t++)e[t].columns ? i = i.concat(n(e[t].columns)) : i.push(e[t]); return i } var o = window.kendo, r = o.ui, s = e.proxy, a = e.extend, l = e.grep, c = e.map, d = e.inArray, u = "k-state-selected", h = "asc", f = "desc", p = "change", m = "init", g = "open", v = "select", _ = "kendoPopup", b = "kendoMenu", w = ".kendoColumnMenu", y = r.Widget, k = y.extend({ init: function (t, i) { var n, r = this; y.fn.init.call(r, t, i), t = r.element, i = r.options, r.owner = i.owner, r.dataSource = i.dataSource, r.field = t.attr(o.attr("field")), r.title = t.attr(o.attr("title")), (n = t.find(".k-header-column-menu"))[0] || (n = t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#" title="' + i.messages.settings + '" aria-label="' + i.messages.settings + '"><span class="k-icon k-i-more-vertical"></span></a>').find(".k-header-column-menu")), r.link = n.attr("tabindex", -1).on("click" + w, s(r._click, r)), r.wrapper = e('<div class="k-column-menu"/>'), r._refreshHandler = s(r.refresh, r), r.dataSource.bind(p, r._refreshHandler) }, _init: function () { var e = this; e.pane = e.options.pane, e.pane && (e._isMobile = !0), e._isMobile ? e._createMobileMenu() : e._createMenu(), e.owner._muteAngularRebind(function () { e._angularItems("compile") }), e._sort(), e._columns(), e._filter(), e._lockColumns(), e.trigger(m, { field: e.field, container: e.wrapper }) }, events: [m, g, "sort", "filtering"], options: { name: "ColumnMenu", messages: { sortAscending: "Sort Ascending", sortDescending: "Sort Descending", filter: "Filter", columns: "Columns", done: "Done", settings: "Column Settings", lock: "Lock", unlock: "Unlock" }, filter: "", columns: !0, sortable: !0, filterable: !0, animations: { left: "slide" } }, _createMenu: function () { var e = this, t = e.options; e.wrapper.html(o.template(x)({ uid: o.guid(), ns: o.ns, messages: t.messages, sortable: t.sortable, filterable: t.filterable, columns: e._ownerColumns(), showColumns: t.columns, lockedColumns: t.lockedColumns })), e.popup = e.wrapper[_]({ anchor: e.link, open: s(e._open, e), activate: s(e._activate, e), close: function () { e.options.closeCallback && e.options.closeCallback(e.element) } }).data(_), e.menu = e.wrapper.children()[b]({ orientation: "vertical", closeOnClick: !1 }).data(b) }, _createMobileMenu: function () { var e = this, t = e.options, i = o.template(C)({ ns: o.ns, field: e.field, title: e.title || e.field, messages: t.messages, sortable: t.sortable, filterable: t.filterable, columns: e._ownerColumns(), showColumns: t.columns, lockedColumns: t.lockedColumns }); e.view = e.pane.append(i), e.wrapper = e.view.element.find(".k-column-menu"), e.menu = new S(e.wrapper.children(), { pane: e.pane }), e.view.element.on("click", ".k-done", function (t) { e.close(), t.preventDefault() }), e.options.lockedColumns && e.view.bind("show", function () { e._updateLockedColumns() }) }, _angularItems: function (t) { var i = this; i.angular(t, function () { var t = i.wrapper.find(".k-columns-item input[" + o.attr("field") + "]").map(function () { return e(this).closest("li") }), n = c(i._ownerColumns(), function (e) { return { column: e._originalObject } }); return { elements: t, data: n } }) }, destroy: function () { var e = this; e._angularItems("cleanup"), y.fn.destroy.call(e), e.filterMenu && e.filterMenu.destroy(), e._refreshHandler && e.dataSource.unbind(p, e._refreshHandler), e.options.columns && e.owner && (e._updateColumnsMenuHandler && (e.owner.unbind("columnShow", e._updateColumnsMenuHandler), e.owner.unbind("columnHide", e._updateColumnsMenuHandler)), e._updateColumnsLockedStateHandler && (e.owner.unbind("columnLock", e._updateColumnsLockedStateHandler), e.owner.unbind("columnUnlock", e._updateColumnsLockedStateHandler))), e.menu && (e.menu.element.off(w), e.menu.destroy()), e.wrapper.off(w), e.popup && e.popup.destroy(), e.view && e.view.purge(), e.link.off(w), e.owner = null, e.wrapper = null, e.element = null }, close: function () { this.menu.close(), this.popup && (this.popup.close(), this.popup.element.off("keydown" + w)) }, _click: function (e) { e.preventDefault(), e.stopPropagation(); var t = this.options; t.filter && this.element.is(!t.filter) || (this.popup || this.pane || this._init(), this._isMobile ? this.pane.navigate(this.view, this.options.animations.left) : this.popup.toggle()) }, _open: function () { var t = this; e(".k-column-menu").not(t.wrapper).each(function () { e(this).data(_).close() }), t.popup.element.on("keydown" + w, function (e) { e.keyCode == o.keys.ESC && t.close() }), t.options.lockedColumns && t._updateLockedColumns() }, _activate: function () { this.menu.element.focus(), this.trigger(g, { field: this.field, container: this.wrapper }) }, _ownerColumns: function () { var e = n(this.owner.columns), t = l(e, function (e) { var t = !0, n = i(e.title || ""); return !1 !== e.menu && (e.field || n.length) || (t = !1), t }); return c(t, function (t) { return { originalField: t.field, field: t.field || t.title, title: t.title || t.field, hidden: t.hidden, index: d(t, e), locked: !!t.locked, _originalObject: t } }) }, _sort: function () { var t = this; t.options.sortable && (t.refresh(), t.menu.bind(v, function (i) { var n, o = e(i.item); o.hasClass("k-sort-asc") ? n = h : o.hasClass("k-sort-desc") && (n = f), n && (o.parent().find(".k-sort-" + (n == h ? f : h)).removeClass(u), t._sortDataSource(o, n), t.close()) })) }, _sortDataSource: function (e, i) { var n, o, r = this, s = r.options.sortable, a = null === s.compare ? t : s.compare, l = r.dataSource, c = l.sort() || [], d = e.hasClass(u) && s && !1 !== s.allowUnsort; if (i = d ? t : i, !r.trigger("sort", { sort: { field: r.field, dir: i, compare: a } })) { if (d ? e.removeClass(u) : e.addClass(u), "multiple" === s.mode) { for (n = 0, o = c.length; n < o; n++)if (c[n].field === r.field) { c.splice(n, 1); break } c.push({ field: r.field, dir: i, compare: a }) } else c = [{ field: r.field, dir: i, compare: a }]; l.sort(c) } }, _columns: function () { var t = this; t.options.columns && (t._updateColumnsMenu(), t._updateColumnsMenuHandler = s(t._updateColumnsMenu, t), t.owner.bind(["columnHide", "columnShow"], t._updateColumnsMenuHandler), t._updateColumnsLockedStateHandler = s(t._updateColumnsLockedState, t), t.owner.bind(["columnUnlock", "columnLock"], t._updateColumnsLockedStateHandler), t.menu.bind(v, function (i) { var r, s, a, c = e(i.item), d = n(t.owner.columns); t._isMobile && i.preventDefault(), c.parent().closest("li.k-columns-item")[0] && ((r = c.find(":checkbox")).attr("disabled") || (a = r.attr(o.attr("field")), !0 === (s = l(d, function (e) { return e.field == a || e.title == a })[0]).hidden ? t.owner.showColumn(s) : t.owner.hideColumn(s))) })) }, _updateColumnsMenu: function () { var e, t, i, n, r, s, a = o.attr("field"), u = o.attr("locked"), h = l(this._ownerColumns(), function (e) { return !e.hidden }), f = l(h, function (e) { return e.originalField }), p = l(f, function (e) { return !0 === e.locked }).length, m = l(f, function (e) { return !0 !== e.locked }).length; for (h = c(h, function (e) { return e.field }), this.wrapper.find("[role='menuitemcheckbox']").attr("aria-checked", !1), s = this.wrapper.find(".k-columns-item input[" + a + "]").prop("disabled", !1).prop("checked", !1), e = 0, t = s.length; e < t; e++)i = s.eq(e), r = "true" === i.attr(u), n = !1, d(i.attr(a), h) > -1 && (n = !0, i.prop("checked", n)), i.closest("[role='menuitemcheckbox']").attr("aria-checked", n), n && (1 == p && r && i.prop("disabled", !0), 1 != m || r || i.prop("disabled", !0)) }, _updateColumnsLockedState: function () { var e, t, i, n, r = o.attr("field"), s = o.attr("locked"), a = function (e, t) { var i, n, o, r = {}; for (i = 0, n = e.length; i < n; i++)o = e[i], r[o[t]] = o; return r }(this._ownerColumns(), "field"), l = this.wrapper.find(".k-columns-item input[type=checkbox]"); for (e = 0, t = l.length; e < t; e++)i = l.eq(e), (n = a[i.attr(r)]) && i.attr(s, n.locked); this._updateColumnsMenu() }, _filter: function () { var t = this, i = "kendoFilterMenu", n = t.options; !1 !== n.filterable && (n.filterable.multi && (i = "kendoFilterMultiCheck", n.filterable.dataSource && (n.filterable.checkSource = n.filterable.dataSource, delete n.filterable.dataSource)), t.filterMenu = t.wrapper.find(".k-filterable")[i](a(!0, {}, { appendToElement: !0, dataSource: n.dataSource, values: n.values, field: t.field, title: t.title, change: function (e) { t.trigger("filtering", { filter: e.filter, field: e.field }) && e.preventDefault() } }, n.filterable)).data(i), t._isMobile && t.menu.bind(v, function (i) { var n = e(i.item); n.hasClass("k-filter-item") && t.pane.navigate(t.filterMenu.view, t.options.animations.left) })) }, _lockColumns: function () { var t = this; t.menu.bind(v, function (i) { var n = e(i.item); n.hasClass("k-lock") ? (t.owner.lockColumn(t.field), t.close()) : n.hasClass("k-unlock") && (t.owner.unlockColumn(t.field), t.close()) }) }, _updateLockedColumns: function () { var e, t, i, n, o = this.field, r = this.owner.columns, s = l(r, function (e) { return e.field == o || e.title == o })[0]; s && (e = !0 === s.locked, t = l(r, function (t) { return !t.hidden && (t.locked && e || !t.locked && !e) }).length, i = this.wrapper.find(".k-lock").removeClass("k-state-disabled"), n = this.wrapper.find(".k-unlock").removeClass("k-state-disabled"), (e || 1 == t) && i.addClass("k-state-disabled"), e && 1 != t || n.addClass("k-state-disabled"), this._updateColumnsLockedState()) }, refresh: function () { var e, t, i, n = this, o = n.options.dataSource.sort() || [], r = n.field; for (n.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(u), t = 0, i = o.length; t < i; t++)e = o[t], r == e.field && n.wrapper.find(".k-sort-" + e.dir).addClass(u); n.link[n._filterExist(n.dataSource.filter()) ? "addClass" : "removeClass"]("k-state-active") }, _filterExist: function (e) { var t, i, n, o = !1; if (e) { for (e = e.filters, i = 0, n = e.length; i < n; i++)(t = e[i]).field == this.field ? o = !0 : t.filters && (o = o || this._filterExist(t)); return o } } }), x = '<ul id="#=uid#">#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator" role="presentation"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item" aria-haspopup="true"><span class="k-link"><span class="k-icon k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li role="menuitemcheckbox" aria-checked="false"><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator" role="presentation"></li>#}##}##if(filterable){#<li class="k-item k-filter-item" aria-haspopup="true"><span class="k-link"><span class="k-icon k-i-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator" role="presentation"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-icon k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-icon k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>', C = '<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-icon k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-icon k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-icon k-i-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>', S = y.extend({ init: function (e, t) { y.fn.init.call(this, e, t), this.element.on("click" + w, "li.k-item:not(.k-separator):not(.k-state-disabled)", "_click") }, events: [v], _click: function (t) { e(t.target).is("[type=checkbox]") || t.preventDefault(), this.trigger(v, { item: t.currentTarget }) }, close: function () { this.options.pane.navigate("") }, destroy: function () { y.fn.destroy.call(this), this.element.off(w) } }); r.plugin(k) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.columnsorter.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.ui, o = n.Widget, r = "dir", s = "asc", a = "single", l = "field", c = "desc", d = ".kendoColumnSorter", u = ".k-link", h = "aria-sort", f = e.proxy, p = o.extend({ init: function (e, t) { var i, n = this; o.fn.init.call(n, e, t), n._refreshHandler = f(n.refresh, n), n.dataSource = n.options.dataSource.bind("change", n._refreshHandler), n.directions = n.options.initialDirection === s ? [s, c] : [c, s], (i = n.element.find(u))[0] || (i = n.element.wrapInner('<a class="k-link" href="#"/>').find(u)), n.link = i, n.element.on("click" + d, f(n._click, n)) }, options: { name: "ColumnSorter", mode: a, allowUnsort: !0, compare: null, filter: "", initialDirection: s, showIndexes: !1 }, events: ["change"], destroy: function () { var e = this; o.fn.destroy.call(e), e.element.off(d), e.dataSource.unbind("change", e._refreshHandler), e._refreshHandler = e.element = e.link = e.dataSource = null }, refresh: function () { var t, n, o, a, d, u = this, f = u.dataSource.sort() || [], p = u.element, m = p.attr(i.attr(l)); for (p.removeAttr(i.attr(r)), p.removeAttr(h), t = 0, n = f.length; t < n; t++)o = f[t], m == o.field && (p.attr(i.attr(r), o.dir), d = t + 1); a = p.attr(i.attr(r)), p.find(".k-i-sort-asc-sm,.k-i-sort-desc-sm,.k-sort-order").remove(), a === s ? (e('<span class="k-icon k-i-sort-asc-sm" />').appendTo(u.link), p.attr(h, "ascending")) : a === c && (e('<span class="k-icon k-i-sort-desc-sm" />').appendTo(u.link), p.attr(h, "descending")), u.options.showIndexes && f.length > 1 && d && e('<span class="k-sort-order" />').html(d).appendTo(u.link) }, _toggleSortDirection: function (e) { var i = this.directions; return e === i[i.length - 1] && this.options.allowUnsort ? t : i[0] === e ? i[1] : i[0] }, _click: function (e) { var n, o, s = this, c = s.element, d = c.attr(i.attr(l)), u = c.attr(i.attr(r)), h = s.options, f = null === s.options.compare ? t : s.options.compare, p = s.dataSource.sort() || []; if (e.preventDefault(), (!h.filter || c.is(h.filter)) && (u = this._toggleSortDirection(u), !this.trigger("change", { sort: { field: d, dir: u, compare: f } }))) { if (h.mode === a) p = [{ field: d, dir: u, compare: f }]; else if ("multiple" === h.mode) { for (n = 0, o = p.length; n < o; n++)if (p[n].field === d) { p.splice(n, 1); break } p.push({ field: d, dir: u, compare: f }) } this.dataSource.sort(p) } } }), n.plugin(p), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.editable.min", ["kendo.datepicker.min", "kendo.numerictextbox.min", "kendo.validator.min", "kendo.binder.min"], function () { return function (e, t) { function i(t) { return (t = null != t ? t : "").type || e.type(t) || "string" } function n(e) { var t, n, o = (e.model.fields || e.model)[e.field], s = i(o), a = o ? o.validation : {}, l = r.attr("type"), c = r.attr("bind"), f = { name: e.field, title: e.title }; for (t in a) n = a[t], h(t, m) >= 0 ? f[l] = t : d(n) || (f[t] = u(n) ? n.value || t : n), f[r.attr(t + "-msg")] = n.message; return h(s, m) >= 0 && (f[l] = s), f[c] = ("boolean" === s ? "checked:" : "value:") + e.field, f } function o(e, t) { var i, n, o = e && e.validation || {}; for (i in o) n = o[i], u(n) && n.value && (n = n.value), d(n) && (t[i] = n) } var r = window.kendo, s = r.ui, a = s.Widget, l = e.extend, c = r.support.browser.msie && r.support.browser.version < 9, d = r.isFunction, u = e.isPlainObject, h = e.inArray, f = /("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g, p = "change", m = ["url", "email", "number", "date", "boolean"], g = { number: function (t, i) { var o = n(i); e('<input type="text"/>').attr(o).appendTo(t).kendoNumericTextBox({ format: i.format }), e("<span " + r.attr("for") + '="' + i.field + '" class="k-invalid-msg"/>').hide().appendTo(t) }, date: function (t, i) { var o = n(i), s = i.format; s && (s = r._extractFormat(s)), o[r.attr("format")] = s, e('<input type="text"/>').attr(o).appendTo(t).kendoDatePicker({ format: i.format }), e("<span " + r.attr("for") + '="' + i.field + '" class="k-invalid-msg"/>').hide().appendTo(t) }, string: function (t, i) { var o = n(i); e('<input type="text" class="k-input k-textbox"/>').attr(o).appendTo(t) }, boolean: function (t, i) { var o = n(i); e('<input type="checkbox" />').attr(o).appendTo(t) }, values: function (t, i) { var o = n(i), s = r.stringify(function (e) { var t, i, n, o, r, s; if (e && e.length) for (s = [], t = 0, i = e.length; t < i; t++)n = e[t], r = n.text || n.value || n, o = null == n.value ? n.text || n : n.value, s[t] = { text: r, value: o }; return s }(i.values)); e("<select " + r.attr("text-field") + '="text"' + r.attr("value-field") + '="value"' + r.attr("source") + "='" + (s ? s.replace(/\'/g, "&apos;") : s) + "'" + r.attr("role") + '="dropdownlist"/>').attr(o).appendTo(t), e("<span " + r.attr("for") + '="' + i.field + '" class="k-invalid-msg"/>').hide().appendTo(t) } }, v = a.extend({ init: function (t, i) { var n = this; i.target && (i.$angular = i.target.options.$angular), a.fn.init.call(n, t, i), n._validateProxy = e.proxy(n._validate, n), n.refresh() }, events: [p], options: { name: "Editable", editors: g, clearContainer: !0, errorTemplate: '<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-i-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>' }, editor: function (e, t) { var n = this, o = n.options.editors, s = u(e), a = s ? e.field : e, c = n.options.model || {}, d = s && e.values, h = d ? "values" : i(t), p = s && e.editor, m = p ? e.editor : o[h], g = n.element.find("[" + r.attr("container-for") + "=" + a.replace(f, "\\$1") + "]"); m = m || o.string, p && "string" == typeof e.editor && (m = function (t) { t.append(e.editor) }), g = g.length ? g : n.element, m(g, l(!0, {}, s ? e : { field: a }, { model: c })) }, _validate: function (t) { var i, n = this, o = t.value, s = n._validationEventInProgress, a = {}, l = r.attr("bind"), c = t.field.replace(f, "\\$1"), d = RegExp("(value|checked)\\s*:\\s*" + c + "\\s*(,|$)"); a[t.field] = t.value, (i = e(":input[" + l + '*="' + c + '"]', n.element).filter("[" + r.attr("validate") + "!='false']").filter(function () { return d.test(e(this).attr(l)) })).length > 1 && (i = i.filter(function () { var t = e(this); return !t.is(":radio") || t.val() == o })); try { n._validationEventInProgress = !0, (!n.validatable.validateInput(i) || !s && n.trigger(p, { values: a })) && t.preventDefault() } finally { n._validationEventInProgress = !1 } }, end: function () { return this.validatable.validate() }, destroy: function () { var e = this; e.angular("cleanup", function () { return { elements: e.element } }), a.fn.destroy.call(e), e.options.model.unbind("set", e._validateProxy), r.unbind(e.element), e.validatable && e.validatable.destroy(), r.destroy(e.element), e.element.removeData("kendoValidator"), e.element.is("[" + r.attr("role") + "=editable]") && e.element.removeAttr(r.attr("role")) }, refresh: function () { var t, i, n, s, a, l, d, h, f = this, p = f.options.fields || [], m = f.options.clearContainer ? f.element.empty() : f.element, g = f.options.model || {}, v = {}; for (e.isArray(p) || (p = [p]), t = 0, i = p.length; t < i; t++)n = p[t], s = u(n), a = s ? n.field : n, o(l = (g.fields || g)[a], v), f.editor(n, l); if (f.options.target && f.angular("compile", function () { return { elements: m, data: m.map(function () { return { dataItem: g } }) } }), !i) for (a in d = g.fields || g) o(d[a], v); (function (t) { t.find(":input:not(:button, [" + r.attr("role") + "=upload], [" + r.attr("skip") + "], [type=file]), select").each(function () { var t = r.attr("bind"), i = this.getAttribute(t) || "", n = "checkbox" === this.type || "radio" === this.type ? "checked:" : "value:", o = this.name; -1 === i.indexOf(n) && o && (i += (i.length ? "," : "") + n + o, e(this).attr(t, i)) }) })(m), f.validatable && f.validatable.destroy(), r.bind(m, f.options.model), f.options.model.unbind("set", f._validateProxy), f.options.model.bind("set", f._validateProxy), f.validatable = new r.ui.Validator(m, { validateOnBlur: !1, errorTemplate: f.options.errorTemplate || void 0, rules: v }), h = m.find(":kendoFocusable").eq(0).focus(), c && h.focus() } }); s.plugin(v) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.window.min", ["kendo.draganddrop.min", "kendo.popup.min"], function () { return function (e, t) { function i(e) { return t !== e } function n(e, t, i) { return Math.max(Math.min(parseInt(e, 10), i === 1 / 0 ? i : parseInt(i, 10)), parseInt(t, 10)) } function o() { return !this.type || this.type.toLowerCase().indexOf("script") >= 0 } function r(e) { var t = this; t.owner = e, t._preventDragging = !1, t._draggable = new d(e.wrapper, { filter: ">" + S, group: e.wrapper.id + "-resizing", dragstart: m(t.dragstart, t), drag: m(t.drag, t), dragend: m(t.dragend, t) }), t._draggable.userEvents.bind("press", m(t.addOverlay, t)), t._draggable.userEvents.bind("release", m(t.removeOverlay, t)) } function s(e, t) { var i = this; i.owner = e, i._preventDragging = !1, i._draggable = new d(e.wrapper, { filter: t, group: e.wrapper.id + "-moving", dragstart: m(i.dragstart, i), drag: m(i.drag, i), dragend: m(i.dragend, i), dragcancel: m(i.dragcancel, i) }), i._draggable.userEvents.stopPropagation = !1 } var a = window.kendo, l = a.ui.Widget, c = a.ui.Popup.TabKeyTrap, d = a.ui.Draggable, u = e.isPlainObject, h = a._activeElement, f = a._outerWidth, p = a._outerHeight, m = e.proxy, g = e.extend, v = e.each, _ = a.template, b = "body", w = ".kendoWindow", y = ".k-window", k = ".k-window-title", x = k + "bar", C = ".k-window-content", S = ".k-resize-handle", T = ".k-overlay", D = "k-content-frame", A = "k-i-loading", E = "k-state-hover", I = "k-state-focused", M = "k-window-maximized", R = ":visible", F = "hidden", z = "cursor", P = "open", B = "activate", L = "deactivate", H = "close", N = "refresh", O = "resizeStart", V = "resizeEnd", U = "dragstart", W = "dragend", q = "error", j = "overflow", G = "zIndex", $ = ".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize", Y = ".k-i-pin", K = ".k-i-unpin", Q = Y + "," + K, X = ".k-window-titlebar .k-window-action", Z = ".k-window-titlebar .k-i-refresh", J = a.isLocalUrl, ee = l.extend({ init: function (n, r) { var s, d, h, f, p, g, v, _ = this, b = {}, S = r && r.actions && !r.actions.length; l.fn.init.call(_, n, r), r = _.options, f = r.position, n = _.element, p = r.content, S && (r.actions = []), _.appendTo = e(r.appendTo), p && !u(p) && (p = r.content = { url: p }), n.find("script").filter(o).remove(), n.parent().is(_.appendTo) || f.top !== t && f.left !== t || (n.is(R) ? (b = n.offset(), !0) : (d = n.css("visibility"), h = n.css("display"), n.css({ visibility: F, display: "" }), b = n.offset(), n.css({ visibility: d, display: h })), f.top === t && (f.top = b.top), f.left === t && (f.left = b.left)), i(r.visible) && null !== r.visible || (r.visible = n.is(R)), s = _.wrapper = n.closest(y), n.is(".k-content") && s[0] || (n.addClass("k-window-content k-content"), _._createWindow(n, r), s = _.wrapper = n.closest(y), _._dimensions()), _._position(), r.pinned && _.pin(!0), p && _.refresh(p), r.visible && _.toFront(), g = s.children(C), _._tabindex(g), r.visible && r.modal && _._overlay(s.is(R)).css({ opacity: .5 }), s.on("mouseenter" + w, X, m(_._buttonEnter, _)).on("mouseleave" + w, X, m(_._buttonLeave, _)).on("click" + w, "> " + X, m(_._windowActionHandler, _)), g.on("keydown" + w, m(_._keydown, _)).on("focus" + w, m(_._focus, _)).on("blur" + w, m(_._blur, _)), this._resizable(), this._draggable(), (v = n.attr("id")) && (v += "_wnd_title", s.children(x).children(k).attr("id", v), g.attr({ role: "dialog", "aria-labelledby": v })), s.add(s.children(".k-resize-handle," + x)).on("mousedown" + w, m(_.toFront, _)), _.touchScroller = a.touchScroller(n), _._resizeHandler = m(_._onDocumentResize, _), _._marker = a.guid().substring(0, 8), e(window).on("resize" + w + _._marker, _._resizeHandler), r.visible && (_.trigger(P), _.trigger(B)), a.notify(_), this.options.modal && (this._tabKeyTrap = new c(s), this._tabKeyTrap.trap(), this._tabKeyTrap.shouldTrap = function () { return g.data("isFront") }) }, _buttonEnter: function (t) { e(t.currentTarget).addClass(E) }, _buttonLeave: function (t) { e(t.currentTarget).removeClass(E) }, _focus: function () { this.wrapper.addClass(I) }, _blur: function () { this.wrapper.removeClass(I) }, _dimensions: function () { var e, t, i = this.wrapper, o = this.options, r = o.width, s = o.height, a = o.maxHeight, l = ["minWidth", "minHeight", "maxWidth", "maxHeight"]; for (this.title(o.title), e = 0; e < l.length; e++)(t = o[l[e]] || "") != 1 / 0 && i.css(l[e], t); a != 1 / 0 && this.element.css("maxHeight", a), i.width(r ? ("" + r).indexOf("%") > 0 ? r : n(r, o.minWidth, o.maxWidth) : ""), i.height(s ? ("" + s).indexOf("%") > 0 ? s : n(s, o.minHeight, o.maxHeight) : ""), o.visible || i.hide() }, _position: function () { var e = this.wrapper, t = this.options.position; 0 === t.top && (t.top = "" + t.top), 0 === t.left && (t.left = "" + t.left), e.css({ top: t.top || "", left: t.left || "" }) }, _animationOptions: function (e) { var t = this.options.animation; return t && t[e] || { open: { effects: {} }, close: { hide: !0, effects: {} } }[e] }, _resize: function () { a.resize(this.element.children()) }, _resizable: function () { var t = this.options.resizable, i = this.wrapper; this.resizing && (i.off("dblclick" + w).children(S).remove(), this.resizing.destroy(), this.resizing = null), t && (i.on("dblclick" + w, x, m(function (t) { e(t.target).closest(".k-window-action").length || this.toggleMaximization() }, this)), v("n e s w se sw ne nw".split(" "), function (e, t) { i.append(te.resizeHandle(t)) }), this.resizing = new r(this)), i = null }, _draggable: function () { var e = this.options.draggable; this.dragging && (this.dragging.destroy(), this.dragging = null), e && (this.dragging = new s(this, e.dragHandle || x)) }, _actions: function () { var t = this.options.actions, i = this.wrapper.children(x), n = i.find(".k-window-actions"), o = ["maximize", "minimize"]; t = e.map(t, function (e) { return { name: o.indexOf(e.toLowerCase()) > -1 ? "window-" + e : e } }), n.html(a.render(te.action, t)) }, setOptions: function (e) { var i, n; l.fn.setOptions.call(this, e), i = !1 !== this.options.scrollable, this.restore(), this._dimensions(), this._position(), this._resizable(), this._draggable(), this._actions(), t !== e.modal && (n = !1 !== this.options.visible, this._overlay(e.modal && n)), this.element.css(j, i ? "" : "hidden") }, events: [P, B, L, H, "minimize", "maximize", N, O, "resize", V, U, W, q], options: { name: "Window", animation: { open: { effects: { zoom: { direction: "in" }, fade: { direction: "in" } }, duration: 350 }, close: { effects: { zoom: { direction: "out", properties: { scale: .7 } }, fade: { direction: "out" } }, duration: 350, hide: !0 } }, title: "", actions: ["Close"], autoFocus: !0, modal: !1, resizable: !0, draggable: !0, minWidth: 90, minHeight: 50, maxWidth: 1 / 0, maxHeight: 1 / 0, pinned: !1, scrollable: !0, position: {}, content: null, visible: null, height: null, width: null, appendTo: "body", isMaximized: !1, isMinimized: !1 }, _closable: function () { return e.inArray("close", e.map(this.options.actions, function (e) { return e.toLowerCase() })) > -1 }, _keydown: function (e) { var t, i, o, r, s, l, c = this, d = c.options, u = a.keys, h = e.keyCode, f = c.wrapper, p = 10, m = c.options.isMaximized; h == u.ESC && c._closable() && c._close(!1), e.target != e.currentTarget || c._closing || (!d.draggable || e.ctrlKey || m || (t = a.getOffset(f), h == u.UP ? i = f.css("top", t.top - p) : h == u.DOWN ? i = f.css("top", t.top + p) : h == u.LEFT ? i = f.css("left", t.left - p) : h == u.RIGHT && (i = f.css("left", t.left + p))), d.resizable && e.ctrlKey && !m && (h == u.UP ? (i = !0, r = f.height() - p) : h == u.DOWN && (i = !0, r = f.height() + p), h == u.LEFT ? (i = !0, o = f.width() - p) : h == u.RIGHT && (i = !0, o = f.width() + p), i && (s = n(o, d.minWidth, d.maxWidth), l = n(r, d.minHeight, d.maxHeight), isNaN(s) || (f.width(s), c.options.width = s + "px"), isNaN(l) || (f.height(l), c.options.height = l + "px"), c.resize())), i && e.preventDefault()) }, _overlay: function (t) { var i = this.appendTo.children(T), n = this.wrapper; return i.length || (i = e("<div class='k-overlay' />")), i.insertBefore(n[0]).toggle(t).css(G, parseInt(n.css(G), 10) - 1), i }, _actionForIcon: function (e) { var t = /\bk-i(-\w+)+\b/.exec(e[0].className)[0]; return { "k-i-close": "_close", "k-i-window-maximize": "maximize", "k-i-window-minimize": "minimize", "k-i-window-restore": "restore", "k-i-refresh": "refresh", "k-i-pin": "pin", "k-i-unpin": "unpin" }[t] }, _windowActionHandler: function (i) { var n, o; if (!this._closing) return n = e(i.target).closest(".k-window-action").find(".k-icon"), (o = this._actionForIcon(n)) ? (i.preventDefault(), this[o](), !1) : t }, _modals: function () { var t = this, i = e(y).filter(function () { var i = e(this), n = t._object(i), o = n && n.options; return o && o.modal && o.visible && o.appendTo === t.options.appendTo && i.is(R) }).sort(function (t, i) { return +e(t).css("zIndex") - +e(i).css("zIndex") }); return t = null, i }, _object: function (e) { var i = e.children(C), n = a.widgetInstance(i); return n || t }, center: function () { var t, i, n = this, o = n.options.position, r = n.wrapper, s = e(window), a = 0, l = 0; return n.options.isMaximized ? n : (n.options.pinned || (a = s.scrollTop(), l = s.scrollLeft()), i = l + Math.max(0, (s.width() - r.width()) / 2), t = a + Math.max(0, (s.height() - r.height() - parseInt(r.css("paddingTop"), 10)) / 2), r.css({ left: i, top: t }), o.top = t, o.left = i, n) }, title: function (e) { var t, i = this, n = i.wrapper, o = i.options, r = n.children(x), s = r.children(k); return arguments.length ? (!1 === e ? (n.addClass("k-window-titleless"), r.remove()) : (r.length ? s.html(a.htmlEncode(e)) : (n.prepend(te.titlebar(o)), i._actions(), r = n.children(x)), t = parseInt(p(r), 10), n.css("padding-top", t), r.css("margin-top", -t)), i.options.title = e, i) : s.html() }, content: function (e, t) { var n = this.wrapper.children(C), o = n.children(".km-scroll-container"); return n = o[0] ? o : n, i(e) ? (this.angular("cleanup", function () { return { elements: n.children() } }), a.destroy(this.element.children()), n.empty().html(e), this.angular("compile", function () { var e, i = []; for (e = n.length; --e >= 0;)i.push({ dataItem: t }); return { elements: n.children(), data: i } }), this) : n.html() }, open: function () { var t, i, n, o = this, r = o.wrapper, s = o.options, l = this._animationOptions("open"), c = r.children(C), d = e(document); return o.trigger(P) || (o._closing && r.kendoStop(!0, !0), o._closing = !1, o.toFront(), s.autoFocus && o.element.focus(), s.visible = !0, s.modal && (i = !!o._modals().length, (t = o._overlay(i)).kendoStop(!0, !0), l.duration && a.effects.Fade && !i ? ((n = a.fx(t).fadeIn()).duration(l.duration || 0), n.endValue(.5), n.play()) : t.css("opacity", .5), t.show(), e(window).on("focus", function () { c.data("isFront") && o.element.focus() })), r.is(R) || (c.css(j, F), r.show().kendoStop().kendoAnimate({ effects: l.effects, duration: l.duration, complete: m(this._activate, this) }))), s.isMaximized && (o._documentScrollTop = d.scrollTop(), o._documentScrollLeft = d.scrollLeft(), e("html, body").css(j, F)), o }, _activate: function () { var e = !1 !== this.options.scrollable; this.options.autoFocus && this.element.focus(), this.element.css(j, e ? "" : "hidden"), a.resize(this.element.children()), this.trigger(B) }, _removeOverlay: function (i) { var n, o = this._modals(), r = this.options, s = r.modal && !o.length, l = r.modal ? this._overlay(!0) : e(t), c = this._animationOptions("close"); s ? !i && c.duration && a.effects.Fade ? ((n = a.fx(l).fadeOut()).duration(c.duration || 0), n.startValue(.5), n.play()) : this._overlay(!1).remove() : o.length && this._object(o.last())._overlay(!0) }, _close: function (t) { var i = this, n = i.wrapper, o = i.options, r = this._animationOptions("open"), s = this._animationOptions("close"), a = e(document); if (n.is(R) && !i.trigger(H, { userTriggered: !t })) { if (i._closing) return; i._closing = !0, o.visible = !1, e(y).each(function (t, i) { var o = e(i).children(C); i != n && o.find("> ." + D).length > 0 && o.children(T).remove() }), this._removeOverlay(), n.kendoStop().kendoAnimate({ effects: s.effects || r.effects, reverse: !0 === s.reverse, duration: s.duration, complete: m(this._deactivate, this) }) } i.options.isMaximized && (e("html, body").css(j, ""), i._documentScrollTop && i._documentScrollTop > 0 && a.scrollTop(i._documentScrollTop), i._documentScrollLeft && i._documentScrollLeft > 0 && a.scrollLeft(i._documentScrollLeft)) }, _deactivate: function () { var e, t = this; t.wrapper.hide().css("opacity", ""), t.trigger(L), t.options.modal && ((e = t._object(t._modals().last())) && e.toFront()) }, close: function () { return this._close(!0), this }, _actionable: function (t) { return e(t).is(X + "," + X + " .k-icon,:input,a") }, _shouldFocus: function (t) { var i = h(), n = this.element; return this.options.autoFocus && !e(i).is(n) && !this._actionable(t) && (!n.find(i).length || !n.find(t).length) }, toFront: function (t) { var i, n, o = this, r = o.wrapper, s = r[0], a = +r.css(G), l = a, c = t && t.target || null; return e(y).each(function (t, i) { var n = e(i), o = n.css(G), r = n.children(C); isNaN(o) || (a = Math.max(+o, a)), r.data("isFront", i == s), i != s && r.find("> ." + D).length > 0 && r.append(te.overlay) }), (!r[0].style.zIndex || l < a) && r.css(G, a + 2), o.element.find("> .k-overlay").remove(), o._shouldFocus(c) && (o.element.focus(), i = e(window).scrollTop(), n = parseInt(r.position().top, 10), !o.options.pinned && n > 0 && n < i && (i > 0 ? e(window).scrollTop(n) : r.css("top", i))), r = null, o }, toggleMaximization: function () { return this._closing ? this : this[this.options.isMaximized ? "restore" : "maximize"]() }, restore: function () { var t = this, i = t.options, n = i.minHeight, o = t.restoreOptions, r = e(document); return i.isMaximized || i.isMinimized ? (n && n != 1 / 0 && t.wrapper.css("min-height", n), t.wrapper.css({ position: i.pinned ? "fixed" : "absolute", left: o.left, top: o.top, width: o.width, height: o.height }).removeClass(M).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find($).parent().show().end().end().find(Q).parent().show(), t.options.width = o.width, t.options.height = o.height, e("html, body").css(j, ""), this._documentScrollTop && this._documentScrollTop > 0 && r.scrollTop(this._documentScrollTop), this._documentScrollLeft && this._documentScrollLeft > 0 && r.scrollLeft(this._documentScrollLeft), i.isMaximized = i.isMinimized = !1, t.resize(), t) : t }, _sizingAction: function (e, t) { var i = this, n = i.wrapper, o = n[0].style, r = i.options; return r.isMaximized || r.isMinimized ? i : (i.restoreOptions = { width: o.width, height: o.height }, n.children(S).hide().end().children(x).find($).parent().hide().eq(0).before(te.action({ name: "window-restore" })), t.call(i), i.wrapper.children(x).find(Q).parent().toggle("maximize" !== e), i.trigger(e), i) }, maximize: function () { return this._sizingAction("maximize", function () { var t = this, i = t.wrapper, n = i.position(), o = e(document); g(t.restoreOptions, { left: n.left, top: n.top }), i.css({ left: 0, top: 0, position: "fixed" }).addClass(M), this._documentScrollTop = o.scrollTop(), this._documentScrollLeft = o.scrollLeft(), e("html, body").css(j, F), t.options.isMaximized = !0, t._onDocumentResize() }), this }, isMaximized: function () { return this.options.isMaximized }, minimize: function () { return this._sizingAction("minimize", function () { var e = this; e.wrapper.css({ height: "", minHeight: "" }), e.element.hide(), e.options.isMinimized = !0 }), this }, isMinimized: function () { return this.options.isMinimized }, pin: function (t) { var i = this, n = e(window), o = i.wrapper, r = parseInt(o.css("top"), 10), s = parseInt(o.css("left"), 10); (t || !i.options.pinned && !i.options.isMaximized) && (o.css({ position: "fixed", top: r - n.scrollTop(), left: s - n.scrollLeft() }), o.children(x).find(Y).addClass("k-i-unpin").removeClass("k-i-pin"), i.options.pinned = !0) }, unpin: function () { var t = this, i = e(window), n = t.wrapper, o = parseInt(n.css("top"), 10), r = parseInt(n.css("left"), 10); t.options.pinned && !t.options.isMaximized && (n.css({ position: "", top: o + i.scrollTop(), left: r + i.scrollLeft() }), n.children(x).find(K).addClass("k-i-pin").removeClass("k-i-unpin"), t.options.pinned = !1) }, _onDocumentResize: function () { var t, i, n = this, o = n.wrapper, r = e(window), s = a.support.zoomLevel(); n.options.isMaximized && (t = r.width() / s, i = r.height() / s - parseInt(o.css("padding-top"), 10), o.css({ width: t, height: i }), n.options.width = t, n.options.height = i, n.resize()) }, refresh: function (t) { var n, o, r, s = this, a = s.options, l = e(s.element); return u(t) || (t = { url: t }), t = g({}, a.content, t), o = i(a.iframe) ? a.iframe : t.iframe, (r = t.url) ? (i(o) || (o = !J(r)), o ? ((n = l.find("." + D)[0]) ? n.src = r || n.src : l.html(te.contentFrame(g({}, a, { content: t }))), l.find("." + D).unbind("load" + w).on("load" + w, m(this._triggerRefresh, this))) : s._ajaxRequest(t)) : (t.template && s.content(_(t.template)({})), s.trigger(N)), l.toggleClass("k-window-iframecontent", !!o), s }, _triggerRefresh: function () { this.trigger(N) }, _ajaxComplete: function () { clearTimeout(this._loadingIconTimeout), this.wrapper.find(Z).removeClass(A) }, _ajaxError: function (e, t) { this.trigger(q, { status: t, xhr: e }) }, _ajaxSuccess: function (e) { return function (t) { var i = t; e && (i = _(e)(t || {})), this.content(i, t), this.element.prop("scrollTop", 0), this.trigger(N) } }, _showLoading: function () { this.wrapper.find(Z).addClass(A) }, _ajaxRequest: function (t) { this._loadingIconTimeout = setTimeout(m(this._showLoading, this), 100), e.ajax(g({ type: "GET", dataType: "html", cache: !1, error: m(this._ajaxError, this), complete: m(this._ajaxComplete, this), success: m(this._ajaxSuccess(t.template), this) }, t)) }, _destroy: function () { this.resizing && this.resizing.destroy(), this.dragging && this.dragging.destroy(), this.wrapper.off(w).children(C).off(w).end().find(".k-resize-handle,.k-window-titlebar").off(w), e(window).off("resize" + w + this._marker), clearTimeout(this._loadingIconTimeout), l.fn.destroy.call(this), this.unbind(t), a.destroy(this.wrapper), this._removeOverlay(!0) }, destroy: function () { this._destroy(), this.wrapper.empty().remove(), this.wrapper = this.appendTo = this.element = e() }, _createWindow: function () { var t, i, n = this.element, o = this.options, r = a.support.isRtl(n); !1 === o.scrollable && n.css("overflow", "hidden"), i = e(te.wrapper(o)), t = n.find("iframe:not(.k-content)").map(function () { var e = this.getAttribute("src"); return this.src = "", e }), i.toggleClass("k-rtl", r).appendTo(this.appendTo).append(n).find("iframe:not(.k-content)").each(function (e) { this.src = t[e] }), i.find(".k-window-title").css(r ? "left" : "right", f(i.find(".k-window-actions")) + 10), n.css("visibility", "").show(), n.find("[data-role=editor]").each(function () { var t = e(this).data("kendoEditor"); t && t.refresh() }), i = n = null } }), te = { wrapper: _("<div class='k-widget k-window' />"), action: _("<a role='button' href='\\#' class='k-button k-bare k-button-icon k-window-action' aria-label='#= name #'><span class='k-icon k-i-#= name.toLowerCase() #'></span></a>"), titlebar: _("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#: title #</span><div class='k-window-actions' /></div>"), overlay: "<div class='k-overlay' />", contentFrame: _("<iframe frameborder='0' title='#= title #' class='" + D + "' src='#= content.url #'>This page requires frames in order to show content</iframe>"), resizeHandle: _("<div class='k-resize-handle k-resize-#= data #'></div>") }; r.prototype = { addOverlay: function () { this.owner.wrapper.append(te.overlay) }, removeOverlay: function () { this.owner.wrapper.find(T).remove() }, dragstart: function (t) { var i = this, n = i.owner, o = n.wrapper; i._preventDragging = n.trigger(O), i._preventDragging || (i.elementPadding = parseInt(o.css("padding-top"), 10), i.initialPosition = a.getOffset(o, "position"), i.resizeDirection = t.currentTarget.prop("className").replace("k-resize-handle k-resize-", ""), i.initialSize = { width: o.width(), height: o.height() }, i.containerOffset = a.getOffset(n.appendTo, "position"), o.children(S).not(t.currentTarget).hide(), e(b).css(z, t.currentTarget.css(z))) }, drag: function (t) { var i, o, r, s, a, l, c, d, u, h, f, p, m, g, v; this._preventDragging || (o = (i = this).owner, r = o.wrapper, s = o.options, a = i.resizeDirection, l = i.containerOffset, c = i.initialPosition, d = i.initialSize, m = Math.max(t.x.location, 0), g = Math.max(t.y.location, 0), a.indexOf("e") >= 0 ? (u = m - c.left - l.left, r.width(n(u, s.minWidth, s.maxWidth))) : a.indexOf("w") >= 0 && (p = c.left + d.width + l.left, u = n(p - m, s.minWidth, s.maxWidth), r.css({ left: p - u - l.left, width: u })), v = g, o.options.pinned && (v -= e(window).scrollTop()), a.indexOf("s") >= 0 ? (h = v - c.top - i.elementPadding - l.top, r.height(n(h, s.minHeight, s.maxHeight))) : a.indexOf("n") >= 0 && (f = c.top + d.height + l.top, h = n(f - v, s.minHeight, s.maxHeight), r.css({ top: f - h - l.top, height: h })), u && (o.options.width = u + "px"), h && (o.options.height = h + "px"), o.resize()) }, dragend: function (t) { if (!this._preventDragging) { var i = this, n = i.owner, o = n.wrapper; return o.children(S).not(t.currentTarget).show(), e(b).css(z, ""), n.touchScroller && n.touchScroller.reset(), 27 == t.keyCode && o.css(i.initialPosition).css(i.initialSize), n.trigger(V), !1 } }, destroy: function () { this._draggable && this._draggable.destroy(), this._draggable = this.owner = null } }, s.prototype = { dragstart: function (t) { var i = this.owner, n = i.element, o = n.find(".k-window-actions"), r = a.getOffset(i.appendTo); this._preventDragging = i.trigger(U), this._preventDragging || (i.initialWindowPosition = a.getOffset(i.wrapper, "position"), i.initialPointerPosition = { left: t.x.client, top: t.y.client }, i.startPosition = { left: t.x.client - i.initialWindowPosition.left, top: t.y.client - i.initialWindowPosition.top }, i.minLeftPosition = o.length > 0 ? f(o) + parseInt(o.css("right"), 10) - f(n) : 20 - f(n), i.minLeftPosition -= r.left, i.minTopPosition = -r.top, i.wrapper.append(te.overlay).children(S).hide(), e(b).css(z, t.currentTarget.css(z))) }, drag: function (t) { var i, n; this._preventDragging || (i = this.owner, (n = i.options.position).top = Math.max(t.y.client - i.startPosition.top, i.minTopPosition), n.left = Math.max(t.x.client - i.startPosition.left, i.minLeftPosition), a.support.transforms ? e(i.wrapper).css("transform", "translate(" + (t.x.client - i.initialPointerPosition.left) + "px, " + (t.y.client - i.initialPointerPosition.top) + "px)") : e(i.wrapper).css(n)) }, _finishDrag: function () { var t = this.owner; t.wrapper.children(S).toggle(!t.options.isMinimized).end().find(T).remove(), e(b).css(z, "") }, dragcancel: function (e) { this._preventDragging || (this._finishDrag(), e.currentTarget.closest(y).css(this.owner.initialWindowPosition)) }, dragend: function () { if (!this._preventDragging) return e(this.owner.wrapper).css(this.owner.options.position).css("transform", ""), this._finishDrag(), this.owner.trigger(W), !1 }, destroy: function () { this._draggable && this._draggable.destroy(), this._draggable = this.owner = null } }, a.ui.plugin(ee) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.view.min", ["kendo.core.min", "kendo.fx.min", "kendo.mobile.scroller.min", "kendo.view.min"], function () { return function (e, t) { function i(e) { var t, i, n = e.find(y("popover")), o = a.roles; for (t = 0, i = n.length; t < i; t++)r.initWidget(n[t], {}, o) } function n(e) { r.triggeredByInput(e) || e.preventDefault() } function o(t) { t.each(function () { r.initWidget(e(this), {}, a.roles) }) } var r = window.kendo, s = r.mobile, a = s.ui, l = r.attr, c = a.Widget, d = r.ViewClone, u = "init", h = "beforeShow", f = "show", p = "afterShow", m = "beforeHide", g = "transitionEnd", v = "transitionStart", _ = "hide", b = "destroy", w = r.attrValue, y = r.roleSelector, k = r.directiveSelector, x = r.compileMobileDirective, C = c.extend({ init: function (t, i) { c.fn.init.call(this, t, i), this.params = {}, e.extend(this, i), this.transition = this.transition || this.defaultTransition, this._id(), this.options.$angular ? this._overlay() : (this._layout(), this._overlay(), this._scroller(), this._model()) }, events: [u, h, f, p, m, _, b, v, g], options: { name: "View", title: "", layout: null, getLayout: e.noop, reload: !1, transition: "", defaultTransition: "", useNativeScrolling: !1, stretch: !1, zoom: !1, model: null, modelScope: window, scroller: {}, initWidgets: !0 }, enable: function (e) { void 0 === e && (e = !0), e ? this.overlay.hide() : this.overlay.show() }, destroy: function () { this.layout && this.layout.detach(this), this.trigger(b), c.fn.destroy.call(this), this.scroller && this.scroller.destroy(), this.options.$angular && this.element.scope().$destroy(), r.destroy(this.element) }, purge: function () { this.destroy(), this.element.remove() }, triggerBeforeShow: function () { return !this.trigger(h, { view: this }) }, triggerBeforeHide: function () { return !this.trigger(m, { view: this }) }, showStart: function () { var e = this.element; e.css("display", ""), this.inited ? this._invokeNgController() : (this.inited = !0, this.trigger(u, { view: this })), this.layout && this.layout.attach(this), this._padIfNativeScrolling(), this.trigger(f, { view: this }), r.resize(e) }, showEnd: function () { this.trigger(p, { view: this }), this._padIfNativeScrolling() }, hideEnd: function () { var e = this; e.element.hide(), e.trigger(_, { view: e }), e.layout && e.layout.trigger(_, { view: e, layout: e.layout }) }, beforeTransition: function (e) { this.trigger(v, { type: e }) }, afterTransition: function (e) { this.trigger(g, { type: e }) }, _padIfNativeScrolling: function () { if (s.appLevelNativeScrolling()) { var e = r.support.mobileOS && r.support.mobileOS.android, t = s.application.skin() || "", i = s.application.os.android || t.indexOf("android") > -1, n = "flat" === t || t.indexOf("material") > -1, o = !e && !i || n ? "header" : "footer", a = !e && !i || n ? "footer" : "header"; this.content.css({ paddingTop: this[o].height(), paddingBottom: this[a].height() }) } }, contentElement: function () { var e = this; return e.options.stretch ? e.content : e.scrollerContent }, clone: function () { return new d(this) }, _scroller: function () { var t = this; s.appLevelNativeScrolling() || (t.options.stretch ? t.content.addClass("km-stretched-view") : (t.content.kendoMobileScroller(e.extend(t.options.scroller, { zoom: t.options.zoom, useNative: t.options.useNativeScrolling })), t.scroller = t.content.data("kendoMobileScroller"), t.scrollerContent = t.scroller.scrollElement), r.support.kineticScrollNeeded && (e(t.element).on("touchmove", ".km-header", n), t.options.useNativeScrolling || t.options.stretch || e(t.element).on("touchmove", ".km-content", n))) }, _model: function () { var e = this, t = e.element, n = e.options.model; "string" == typeof n && (n = r.getter(n)(e.options.modelScope)), e.model = n, i(t), e.element.css("display", ""), e.options.initWidgets && (n ? r.bind(t, n, a, r.ui, r.dataviz.ui) : s.init(t.children())), e.element.css("display", "none") }, _id: function () { var e = this.element, t = e.attr("id") || ""; this.id = w(e, "url") || "#" + t, "#" == this.id && (this.id = r.guid(), e.attr("id", this.id)) }, _layout: function () { var e = y("content"), t = this.element; t.addClass("km-view"), this.header = t.children(y("header")).addClass("km-header"), this.footer = t.children(y("footer")).addClass("km-footer"), t.children(e)[0] || t.wrapInner("<div " + l("role") + '="content"></div>'), this.content = t.children(y("content")).addClass("km-content"), this.element.prepend(this.header).append(this.footer), this.layout = this.options.getLayout(this.layout), this.layout && this.layout.setup(this) }, _overlay: function () { this.overlay = e('<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />').appendTo(this.element) }, _invokeNgController: function () { var t, i, n; this.options.$angular && (t = this.element.controller(), i = this.options.$angular[0], t && (n = e.proxy(this, "_callController", t, i), /^\$(digest|apply)$/.test(i.$$phase) ? n() : i.$apply(n))) }, _callController: function (e, t) { this.element.injector().invoke(e.constructor, e, { $scope: t }) } }), S = c.extend({ init: function (e, t) { c.fn.init.call(this, e, t), e = this.element, this.header = e.children(this._locate("header")).addClass("km-header"), this.footer = e.children(this._locate("footer")).addClass("km-footer"), this.elements = this.header.add(this.footer), i(e), this.options.$angular || r.mobile.init(this.element.children()), this.element.detach(), this.trigger(u, { layout: this }) }, _locate: function (e) { return this.options.$angular ? k(e) : y(e) }, options: { name: "Layout", id: null, platform: null }, events: [u, f, _], setup: function (e) { e.header[0] || (e.header = this.header), e.footer[0] || (e.footer = this.footer) }, detach: function (e) { var t = this; e.header === t.header && t.header[0] && e.element.prepend(t.header.detach()[0].cloneNode(!0)), e.footer === t.footer && t.footer.length && e.element.append(t.footer.detach()[0].cloneNode(!0)) }, attach: function (e) { var t = this, i = t.currentView; i && t.detach(i), e.header === t.header && (t.header.detach(), e.element.children(y("header")).remove(), e.element.prepend(t.header)), e.footer === t.footer && (t.footer.detach(), e.element.children(y("footer")).remove(), e.element.append(t.footer)), t.trigger(f, { layout: t, view: e }), t.currentView = e } }), T = r.Observable, D = /<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i, A = "loadStart", E = "loadComplete", I = "showStart", M = "sameViewRequested", R = "viewShow", F = "viewTypeDetermined", z = "after", P = T.extend({ init: function (t) { var i, n, s, a, l = this; if (T.fn.init.call(l), e.extend(l, t), l.sandbox = e("<div />"), s = l.container, i = l._hideViews(s), l.rootView = i.first(), !l.rootView[0] && t.rootNeeded) throw n = s[0] == r.mobile.application.element[0] ? 'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.' : 'Your pane element does not contain any direct child elements with data-role="view" attribute set.', Error(n); l.layouts = {}, l.viewContainer = new r.ViewContainer(l.container), l.viewContainer.bind("accepted", function (e) { e.view.params = l.params }), l.viewContainer.bind("complete", function (e) { l.trigger(R, { view: e.view }) }), l.viewContainer.bind(z, function () { l.trigger(z) }), this.getLayoutProxy = e.proxy(this, "_getLayout"), l._setupLayouts(s), a = s.children(l._locate("modalview drawer")), l.$angular ? (l.$angular[0].viewOptions = { defaultTransition: l.transition, loader: l.loader, container: l.container, getLayout: l.getLayoutProxy }, a.each(function (i, n) { x(e(n), t.$angular[0]) })) : o(a), this.bind(this.events, t) }, events: [I, z, R, A, E, M, F], destroy: function () { for (var e in r.destroy(this.container), this.layouts) this.layouts[e].destroy() }, view: function () { return this.viewContainer.view }, showView: function (e, t, i) { if ("" === (e = e.replace(RegExp("^" + this.remoteViewURLPrefix), "")) && this.remoteViewURLPrefix && (e = "/"), e.replace(/^#/, "") === this.url) return this.trigger(M), !1; this.trigger(I); var n = this, o = function (i) { return n.viewContainer.show(i, t, e) }, s = n._findViewElement(e), a = r.widgetInstance(s); return n.url = e.replace(/^#/, ""), n.params = i, a && a.reload && (a.purge(), s = []), this.trigger(F, { remote: 0 === s.length, url: e }), s[0] ? (a || (a = n._createView(s)), o(a)) : (this.serverNavigation ? location.href = e : n._loadView(e, o), !0) }, append: function (e, t) { var i, n, r, s = this.sandbox, a = (t || "").split("?")[0], c = this.container; return D.test(e) && (e = RegExp.$1), s[0].innerHTML = e, c.append(s.children("script, style")), i = this._hideViews(s), (r = i.first()).length || (i = r = s.wrapInner("<div data-role=view />").children()), a && r.hide().attr(l("url"), a), this._setupLayouts(s), n = s.children(this._locate("modalview drawer")), c.append(s.children(this._locate("layout modalview drawer")).add(i)), o(n), this._createView(r) }, _locate: function (e) { return this.$angular ? k(e) : y(e) }, _findViewElement: function (e) { var t, i = e.split("?")[0]; return i ? ((t = this.container.children("[" + l("url") + "='" + i + "']"))[0] || -1 !== i.indexOf("/") || (t = this.container.children("#" === i.charAt(0) ? i : "#" + i)), t) : this.rootView }, _createView: function (e) { return this.$angular ? x(e, this.$angular[0]) : r.initWidget(e, { defaultTransition: this.transition, loader: this.loader, container: this.container, getLayout: this.getLayoutProxy, modelScope: this.modelScope, reload: w(e, "reload") }, a.roles) }, _getLayout: function (e) { return "" === e ? null : e ? this.layouts[e] : this.layouts[this.layout] }, _loadView: function (t, i) { this._xhr && this._xhr.abort(), this.trigger(A), this._xhr = e.get(r.absoluteURL(t, this.remoteViewURLPrefix), "html").always(e.proxy(this, "_xhrComplete", i, t)) }, _xhrComplete: function (e, t, i) { var n = !0; if ("object" == typeof i && 0 === i.status) { if (!(i.responseText && i.responseText.length > 0)) return; n = !0, i = i.responseText } this.trigger(E), n && e(this.append(i, t)) }, _hideViews: function (e) { return e.children(this._locate("view splitview")).hide() }, _setupLayouts: function (t) { var i, n = this; t.children(n._locate("layout")).each(function () { var t = (i = n.$angular ? x(e(this), n.$angular[0]) : r.initWidget(e(this), {}, a.roles)).options.platform; t && t !== s.application.os.name ? i.destroy() : n.layouts[i.options.id] = i }) } }); r.mobile.ViewEngine = P, a.plugin(C), a.plugin(S) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.loader.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.mobile.ui, n = i.Widget, o = e.map(t.eventMap, function (e) { return e }).join(" ").split(" "), r = n.extend({ init: function (t, i) { var o = this, r = e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>'); n.fn.init.call(o, r, i), o.container = t, o.captureEvents = !1, o._attachCapture(), r.append(o.options.loading).hide().appendTo(t) }, options: { name: "Loader", loading: "<h1>Loading...</h1>", timeout: 100 }, show: function () { var e = this; clearTimeout(e._loading), !1 !== e.options.loading && (e.captureEvents = !0, e._loading = setTimeout(function () { e.element.show() }, e.options.timeout)) }, hide: function () { this.captureEvents = !1, clearTimeout(this._loading), this.element.hide() }, changeMessage: function (e) { this.options.loading = e, this.element.find(">h1").html(e) }, transition: function () { this.captureEvents = !0, this.container.css("pointer-events", "none") }, transitionDone: function () { this.captureEvents = !1, this.container.css("pointer-events", "") }, _attachCapture: function () { function e(e) { i.captureEvents && e.preventDefault() } var t, i = this; for (i.captureEvents = !1, t = 0; t < o.length; t++)i.container[0].addEventListener(o[t], e, !0) } }), i.plugin(r), window.kendo; var e, t, i, n, o, r }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.pane.min", ["kendo.mobile.view.min", "kendo.mobile.loader.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.mobile, n = t.roleSelector, o = i.ui, r = o.Widget, s = i.ViewEngine, a = o.View, l = i.ui.Loader, c = "external", d = "href", u = "navigate", h = "viewShow", f = "sameViewRequested", p = t.support.mobileOS, m = p.ios && !p.appMode && p.flatVersion >= 700, g = /popover|actionsheet|modalview|drawer/, v = t.attrValue, _ = r.extend({ init: function (e, i) { var n = this; r.fn.init.call(n, e, i), i = n.options, (e = n.element).addClass("km-pane"), n.options.collapsible && e.addClass("km-collapsible-pane"), this.history = [], this.historyCallback = function (e, t, i) { var o = n.transition; return n.transition = null, m && i && (o = "none"), n.viewEngine.showView(e, o, t) }, this._historyNavigate = function (e) { if ("#:back" === e) { if (1 === n.history.length) return; n.history.pop(), e = n.history[n.history.length - 1] } else n.history.push(e); n.historyCallback(e, t.parseQueryStringParams(e)) }, this._historyReplace = function (e) { var i = t.parseQueryStringParams(e); n.history[n.history.length - 1] = e, n.historyCallback(e, i) }, n.loader = new l(e, { loading: n.options.loading }), n.viewEngine = new s({ container: e, transition: i.transition, modelScope: i.modelScope, rootNeeded: !i.initial, serverNavigation: i.serverNavigation, remoteViewURLPrefix: i.root || "", layout: i.layout, $angular: i.$angular, loader: n.loader, showStart: function () { n.loader.transition(), n.closeActiveDialogs() }, after: function () { n.loader.transitionDone() }, viewShow: function (e) { n.trigger(h, e) }, loadStart: function () { n.loader.show() }, loadComplete: function () { n.loader.hide() }, sameViewRequested: function () { n.trigger(f) }, viewTypeDetermined: function (e) { e.remote && n.options.serverNavigation || n.trigger(u, { url: e.url }) } }), this._setPortraitWidth(), t.onResize(function () { n._setPortraitWidth() }), n._setupAppLinks() }, closeActiveDialogs: function () { var i = this.element.find(n("actionsheet popover modalview")).filter(":visible"); i.each(function () { t.widgetInstance(e(this), o).close() }) }, navigateToInitial: function () { var e = this.options.initial; return e && this.navigate(e), e }, options: { name: "Pane", portraitWidth: "", transition: "", layout: "", collapsible: !1, initial: null, modelScope: window, loading: "<h1>Loading...</h1>" }, events: [u, h, f], append: function (e) { return this.viewEngine.append(e) }, destroy: function () { r.fn.destroy.call(this), this.viewEngine.destroy(), this.userEvents.destroy() }, navigate: function (e, t) { e instanceof a && (e = e.id), this.transition = t, this._historyNavigate(e) }, replace: function (e, t) { e instanceof a && (e = e.id), this.transition = t, this._historyReplace(e) }, bindToRouter: function (e) { var i = this, n = this.history, o = this.viewEngine; e.bind("init", function (i) { var r, s = i.url, a = e.pushState ? s : "/"; o.rootView.attr(t.attr("url"), a), r = n.length, "/" === s && r && (e.navigate(n[r - 1], !0), i.preventDefault()) }), e.bind("routeMissing", function (e) { i.historyCallback(e.url, e.params, e.backButtonPressed) || e.preventDefault() }), e.bind("same", function () { i.trigger(f) }), i._historyNavigate = function (t) { e.navigate(t) }, i._historyReplace = function (t) { e.replace(t) } }, hideLoading: function () { this.loader.hide() }, showLoading: function () { this.loader.show() }, changeLoadingMessage: function (e) { this.loader.changeMessage(e) }, view: function () { return this.viewEngine.view() }, _setPortraitWidth: function () { var e, i = this.options.portraitWidth; i && (e = t.mobile.application.element.is(".km-vertical") ? i : "auto", this.element.css("width", e)) }, _setupAppLinks: function () { var i = this, o = "[data-" + t.ns + "navigate-on-press]", r = e.map(["button", "backbutton", "detailbutton", "listview-link"], function (e) { return n(e) + ":not(" + o + ")" }).join(","); this.element.handler(this).on("down", n("tab") + "," + o, "_mouseup").on("click", n("tab") + "," + r + "," + o, "_appLinkClick"), this.userEvents = new t.UserEvents(this.element, { fastTap: !0, filter: r, tap: function (e) { e.event.currentTarget = e.touch.currentTarget, i._mouseup(e.event) } }), this.element.css("-ms-touch-action", "") }, _appLinkClick: function (t) { var i = e(t.currentTarget).attr("href"), n = i && "#" !== i[0] && this.options.serverNavigation; n || v(e(t.currentTarget), "rel") == c || t.preventDefault() }, _mouseup: function (n) { if (!(n.which > 1 || n.isDefaultPrevented())) { var r = this, s = e(n.currentTarget), a = v(s, "transition"), l = v(s, "rel") || "", u = v(s, "target"), h = s.attr(d), f = m && 0 === s[0].offsetHeight, p = h && "#" !== h[0] && this.options.serverNavigation; f || p || l === c || void 0 === h || "#!" === h || (s.attr(d, "#!"), setTimeout(function () { s.attr(d, h) }), l.match(g) ? (t.widgetInstance(e(h), o).openFor(s), "actionsheet" !== l && "drawer" !== l || n.stopPropagation()) : ("_top" === u ? r = i.application.pane : u && (r = e("#" + u).data("kendoMobilePane")), r.navigate(h, a)), n.preventDefault()) } } }), _.wrap = function (e) { e.is(n("view")) || (e = e.wrap("<div data-" + t.ns + 'role="view" data-stretch="true"></div>').parent()); var i = e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(), o = new _(i); return o.navigate(""), o }, o.plugin(_), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _ }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.popover.min", ["kendo.popup.min", "kendo.mobile.pane.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.mobile, n = i.ui, o = "hide", r = "open", s = "close", a = n.Widget, l = { down: { origin: "bottom center", position: "top center" }, up: { origin: "top center", position: "bottom center" }, left: { origin: "center left", position: "center right", collision: "fit flip" }, right: { origin: "center right", position: "center left", collision: "fit flip" } }, c = { animation: { open: { effects: "fade:in", duration: 0 }, close: { effects: "fade:out", duration: 400 } } }, d = { horizontal: { offset: "top", size: "height" }, vertical: { offset: "left", size: "width" } }, u = { up: "down", down: "up", left: "right", right: "left" }, h = a.extend({ init: function (i, n) { var r, s, u = this, h = i.closest(".km-modalview-wrapper"), f = i.closest(".km-root").children(".km-pane").first(), p = h[0] ? h : f; n.viewport ? f = n.viewport : f[0] || (f = window), n.container ? p = n.container : p[0] || (p = document.body), r = { viewport: f, copyAnchorStyles: !1, autosize: !0, open: function () { u.overlay.show() }, activate: e.proxy(u._activate, u), deactivate: function () { u.overlay.hide(), u._apiCall || u.trigger(o), u._apiCall = !1 } }, a.fn.init.call(u, i, n), i = u.element, n = u.options, i.wrap('<div class="km-popup-wrapper" />').addClass("km-popup").show(), s = u.options.direction.match(/left|right/) ? "horizontal" : "vertical", u.dimensions = d[s], u.wrapper = i.parent().css({ width: n.width, height: n.height }).addClass("km-popup-wrapper km-" + n.direction).hide(), u.arrow = e('<div class="km-popup-arrow" />').prependTo(u.wrapper).hide(), u.overlay = e('<div class="km-popup-overlay" />').appendTo(p).hide(), r.appendTo = u.overlay, n.className && u.overlay.addClass(n.className), u.popup = new t.ui.Popup(u.wrapper, e.extend(!0, r, c, l[n.direction])) }, options: { name: "Popup", width: 240, height: "", direction: "down", container: null, viewport: null }, events: [o], show: function (t) { this.popup.options.anchor = e(t), this.popup.open() }, hide: function () { this._apiCall = !0, this.popup.close() }, destroy: function () { a.fn.destroy.call(this), this.popup.destroy(), this.overlay.remove() }, target: function () { return this.popup.options.anchor }, _activate: function () { var t = this, i = t.options.direction, n = t.dimensions, o = n.offset, r = t.popup, s = r.options.anchor, a = e(s).offset(), l = e(r.element).offset(), c = r.flipped ? u[i] : i, d = 2 * t.arrow[n.size](), h = t.element[n.size]() - t.arrow[n.size](), f = e(s)[n.size](), p = a[o] - l[o] + f / 2; p < d && (p = d), p > h && (p = h), t.wrapper.removeClass("km-up km-down km-left km-right").addClass("km-" + c), t.arrow.css(o, p).show() } }), f = a.extend({ init: function (i, o) { var r, l = this; l.initialOpen = !1, a.fn.init.call(l, i, o), r = e.extend({ className: "km-popover-root", hide: function () { l.trigger(s) } }, this.options.popup), l.popup = new h(l.element, r), l.popup.overlay.on("move", function (e) { e.target == l.popup.overlay[0] && e.preventDefault() }), l.pane = new n.Pane(l.element, e.extend(this.options.pane, { $angular: this.options.$angular })), t.notify(l, n) }, options: { name: "PopOver", popup: {}, pane: {} }, events: [r, s], open: function (e) { this.popup.show(e), this.initialOpen ? this.pane.view()._invokeNgController() : (this.pane.navigateToInitial() || this.pane.navigate(""), this.popup.popup._position(), this.initialOpen = !0) }, openFor: function (e) { this.open(e), this.trigger(r, { target: this.popup.target() }) }, close: function () { this.popup.hide() }, destroy: function () { a.fn.destroy.call(this), this.pane.destroy(), this.popup.destroy(), t.destroy(this.element) } }), n.plugin(h), n.plugin(f), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.shim.min", ["kendo.popup.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.mobile.ui, o = i.ui.Popup, r = "hide", s = n.Widget, a = s.extend({ init: function (t, n) { var a = this, l = i.mobile.application, c = i.support.mobileOS, d = l ? l.os.name : c ? c.name : "ios", u = "ios" === d || "wp" === d || !!l && l.os.skin, h = "blackberry" === d, f = n.align || (u ? "bottom center" : h ? "center right" : "center center"), p = n.position || (u ? "bottom center" : h ? "center right" : "center center"), m = n.effect || (u ? "slideIn:up" : h ? "slideIn:left" : "fade:in"), g = e('<div class="km-shim"/>').handler(a).hide(); s.fn.init.call(a, t, n), a.shim = g, t = a.element, (n = a.options).className && a.shim.addClass(n.className), n.modal || a.shim.on("down", "_hide"), (l ? l.element : e(document.body)).append(g), a.popup = new o(a.element, { anchor: g, modal: !0, appendTo: g, origin: f, position: p, animation: { open: { effects: m, duration: n.duration }, close: { duration: n.duration } }, close: function (e) { var t = !1; a._apiCall || (t = a.trigger(r)), t && e.preventDefault(), a._apiCall = !1 }, deactivate: function () { g.hide() }, open: function () { g.show() } }), i.notify(a) }, events: [r], options: { name: "Shim", modal: !1, align: t, position: t, effect: t, duration: 200 }, show: function () { this.popup.open() }, hide: function () { this._apiCall = !0, this.popup.close() }, destroy: function () { s.fn.destroy.call(this), this.shim.kendoDestroy(), this.popup.destroy(), this.shim.remove() }, _hide: function (t) { t && e.contains(this.shim.children().children(".k-popup")[0], t.target) || this.popup.close() } }), n.plugin(a), window.kendo; var e, t, i, n, o, r, s, a }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.actionsheet.min", ["kendo.mobile.popover.min", "kendo.mobile.shim.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.support, n = t.mobile.ui, o = n.Shim, r = n.Popup, s = n.Widget, a = "open", l = "close", c = "command", d = "li>a", u = t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'), h = s.extend({ init: function (a, l) { var c, h, f, p = this, m = i.mobileOS; s.fn.init.call(p, a, l), l = p.options, f = l.type, a = p.element, h = "auto" === f ? m && m.tablet : "tablet" === f, c = h ? r : o, l.cancelTemplate && (u = t.template(l.cancelTemplate)), a.addClass("km-actionsheet").append(u({ cancel: p.options.cancel })).wrap('<div class="km-actionsheet-wrapper" />').on("up", d, "_click").on("click", d, t.preventDefault), p.view().bind("destroy", function () { p.destroy() }), p.wrapper = a.parent().addClass(f ? " km-actionsheet-" + f : ""), p.shim = new c(p.wrapper, e.extend({ modal: m.ios && m.majorVersion < 7, className: "km-actionsheet-root" }, p.options.popup)), p._closeProxy = e.proxy(p, "_close"), p._shimHideProxy = e.proxy(p, "_shimHide"), p.shim.bind("hide", p._shimHideProxy), h && t.onResize(p._closeProxy), t.notify(p, n) }, events: [a, l, c], options: { name: "ActionSheet", cancel: "Cancel", type: "auto", popup: { height: "auto" } }, open: function (t, i) { var n = this; n.target = e(t), n.context = i, n.shim.show(t) }, close: function () { this.context = this.target = null, this.shim.hide() }, openFor: function (e) { var t = e.data("actionsheetContext"); this.open(e, t), this.trigger(a, { target: e, context: t }) }, destroy: function () { s.fn.destroy.call(this), t.unbindResize(this._closeProxy), this.shim.destroy() }, _click: function (i) { var n, o, r, s; i.isDefaultPrevented() || (n = e(i.currentTarget), (o = n.data("action")) && (r = { target: this.target, context: this.context }, (s = this.options.$angular) ? this.element.injector().get("$parse")(o)(s[0])(r) : t.getter(o)(window)(r)), this.trigger(c, { target: this.target, context: this.context, currentTarget: n }), i.preventDefault(), this._close()) }, _shimHide: function (e) { this.trigger(l) ? e.preventDefault() : this.context = this.target = null }, _close: function (e) { this.trigger(l) ? e.preventDefault() : this.close() } }), n.plugin(h), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.progressbar.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.ui, o = n.Widget, r = "horizontal", s = "vertical", a = "k-progressbar", l = "k-progressbar-indeterminate", c = "k-complete", d = "k-state-selected", u = "k-progress-status", h = "k-state-selected", f = "k-state-default", p = "k-state-disabled", m = { VALUE: "value", PERCENT: "percent", CHUNK: "chunk" }, g = "change", v = "complete", _ = Math, b = e.extend, w = e.proxy, y = { progressStatus: "<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>" }, k = o.extend({ init: function (e, t) { var i = this; o.fn.init.call(this, e, t), t = i.options, i._progressProperty = t.orientation === r ? "width" : "height", i._fields(), t.value = i._validateValue(t.value), i._validateType(t.type), i._wrapper(), i._progressAnimation(), t.value !== t.min && !1 !== t.value && i._updateProgress() }, setOptions: function (e) { var t = this; o.fn.setOptions.call(t, e), e.hasOwnProperty("reverse") && t.wrapper.toggleClass("k-progressbar-reverse", e.reverse), e.hasOwnProperty("enable") && t.enable(e.enable), t._progressAnimation(), t._validateValue(), t._updateProgress() }, events: [g, v], options: { name: "ProgressBar", orientation: r, reverse: !1, min: 0, max: 100, value: 0, enable: !0, type: m.VALUE, chunkCount: 5, showStatus: !0, animation: {} }, _fields: function () { var t = this; t._isStarted = !1, t.progressWrapper = t.progressStatus = e() }, _validateType: function (t) { var n = !1; if (e.each(m, function (e, i) { if (i === t) return n = !0, !1 }), !n) throw Error(i.format("Invalid ProgressBar type '{0}'", t)) }, _wrapper: function () { var e, t = this, i = t.wrapper = t.element, n = t.options, o = n.orientation; i.addClass("k-widget " + a), i.addClass(a + "-" + (o === r ? r : s)), !1 === n.enable && i.addClass(p), n.reverse && i.addClass("k-progressbar-reverse"), !1 === n.value && i.addClass(l), n.type === m.CHUNK ? t._addChunkProgressWrapper() : n.showStatus && (t.progressStatus = t.wrapper.prepend(y.progressStatus).find("." + u), e = !1 !== n.value ? n.value : n.min, t.progressStatus.text(n.type === m.VALUE ? e : t._calculatePercentage(e).toFixed() + "%")) }, value: function (e) { return this._value(e) }, _value: function (e) { var i, n = this, o = n.options; return e === t ? o.value : ("boolean" != typeof e ? (e = n._roundValue(e), isNaN(e) || (i = n._validateValue(e)) !== o.value && (n.wrapper.removeClass(l), o.value = i, n._isStarted = !0, n._updateProgress())) : e || (n.wrapper.addClass(l), o.value = !1), t) }, _roundValue: function (e) { e = parseFloat(e); var t = _.pow(10, 3); return _.floor(e * t) / t }, _validateValue: function (e) { var t = this.options; if (!1 !== e) { if (e <= t.min || !0 === e) return t.min; if (e >= t.max) return t.max } else if (!1 === e) return !1; return isNaN(this._roundValue(e)) ? t.min : e }, _updateProgress: function () { var e = this, t = e.options, i = e._calculatePercentage(); t.type === m.CHUNK ? (e._updateChunks(i), e._onProgressUpdateAlways(t.value)) : e._updateProgressWrapper(i) }, _updateChunks: function (e) { var t, i = this, n = i.options, o = n.chunkCount, a = parseInt(100 / o * 100, 10) / 100, l = parseInt(100 * e, 10) / 100, c = _.floor(l / a); t = i.wrapper.find(n.orientation === r && !n.reverse || n.orientation === s && n.reverse ? "li.k-item:lt(" + c + ")" : "li.k-item:gt(-" + (c + 1) + ")"), i.wrapper.find("." + h).removeClass(h).addClass(f), t.removeClass(f).addClass(h) }, _updateProgressWrapper: function (e) { var t = this, i = t.options, n = t.wrapper.find("." + d), o = t._isStarted ? t._animation.duration : 0, r = {}; 0 === n.length && t._addRegularProgressWrapper(), r[t._progressProperty] = e + "%", t.progressWrapper.animate(r, { duration: o, start: w(t._onProgressAnimateStart, t), progress: w(t._onProgressAnimate, t), complete: w(t._onProgressAnimateComplete, t, i.value), always: w(t._onProgressUpdateAlways, t, i.value) }) }, _onProgressAnimateStart: function () { this.progressWrapper.show() }, _onProgressAnimate: function (e) { var t, i = this, n = i.options, o = parseFloat(e.elem.style[i._progressProperty], 10); n.showStatus && (t = 1e4 / parseFloat(i.progressWrapper[0].style[i._progressProperty]), i.progressWrapper.find(".k-progress-status-wrap").css(i._progressProperty, t + "%")), n.type !== m.CHUNK && o <= 98 && i.progressWrapper.removeClass(c) }, _onProgressAnimateComplete: function (e) { var t, i = this, n = i.options, o = parseFloat(i.progressWrapper[0].style[i._progressProperty]); n.type !== m.CHUNK && o > 98 && i.progressWrapper.addClass(c), n.showStatus && (t = n.type === m.VALUE ? e : n.type == m.PERCENT ? i._calculatePercentage(e).toFixed() + "%" : _.floor(i._calculatePercentage(e)) + "%", i.progressStatus.text(t)), e === n.min && i.progressWrapper.hide() }, _onProgressUpdateAlways: function (e) { var t = this, i = t.options; t._isStarted && t.trigger(g, { value: e }), e === i.max && t._isStarted && t.trigger(v, { value: i.max }) }, enable: function (e) { var i = this.options; i.enable = t === e || e, this.wrapper.toggleClass(p, !i.enable) }, destroy: function () { o.fn.destroy.call(this) }, _addChunkProgressWrapper: function () { var e, t = this, i = t.options, n = t.wrapper, o = 100 / i.chunkCount, r = ""; for (i.chunkCount <= 1 && (i.chunkCount = 1), r += "<ul class='k-reset'>", e = i.chunkCount - 1; e >= 0; e--)r += "<li class='k-item k-state-default'></li>"; r += "</ul>", n.append(r).find(".k-item").css(t._progressProperty, o + "%").first().addClass("k-first").end().last().addClass("k-last"), t._normalizeChunkSize() }, _normalizeChunkSize: function () { var e = this, t = e.options, i = e.wrapper.find(".k-item:last"), n = parseFloat(i[0].style[e._progressProperty]), o = 100 - t.chunkCount * n; o > 0 && i.css(e._progressProperty, n + o + "%") }, _addRegularProgressWrapper: function () { var t = this; t.progressWrapper = e("<div class='" + d + "'></div>").appendTo(t.wrapper), t.options.showStatus && (t.progressWrapper.append(y.progressStatus), t.progressStatus = t.wrapper.find("." + u)) }, _calculateChunkSize: function () { var e = this, t = e.options.chunkCount, i = e.wrapper.find("ul.k-reset"); return (parseInt(i.css(e._progressProperty), 10) - (t - 1)) / t }, _calculatePercentage: function (e) { var i = this, n = i.options, o = e !== t ? e : n.value, r = n.min, s = n.max; return i._onePercent = _.abs((s - r) / 100), _.abs((o - r) / i._onePercent) }, _progressAnimation: function () { var e = this.options, t = e.animation; this._animation = !1 === t ? { duration: 0 } : b({ duration: 400 }, e.animation) } }), i.ui.plugin(k), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("pdf/core.min", ["kendo.core.min", "kendo.color.min", "kendo.drawing.min"], function () { return function (e) { function t(e) { function t() { return g < v ? e[g++] : 0 } function i(t) { h(g), e[g++] = 255 & t, g > v && (v = g) } function n() { return t() << 8 | t() } function o(e) { i(e >> 8), i(e) } function r() { return 65536 * n() + n() } function s(e) { o(e >>> 16 & 65535), o(65535 & e) } function a() { var e = r(); return e >= 2147483648 ? e - 4294967296 : e } function l(e) { s(e < 0 ? e + 4294967296 : e) } function c(e) { return u(e, t) } function d(e) { for (var t = 0; t < e.length; ++t)i(e.charCodeAt(t)) } function u(e, t) { for (var i = Array(e), n = 0; n < e; ++n)i[n] = t(); return i } var h, f, p, m, g = 0, v = 0; return null == e ? e = ie ? new Uint8Array(256) : [] : v = e.length, h = ie ? function (t) { if (t >= e.length) { var i = new Uint8Array(Math.max(t + 256, 2 * e.length)); i.set(e, 0), e = i } } : function () { }, m = { eof: function () { return g >= v }, readByte: t, writeByte: i, readShort: n, writeShort: o, readLong: r, writeLong: s, readFixed: function () { return r() / 65536 }, writeFixed: function (e) { s(Math.round(65536 * e)) }, readShort_: function () { var e = n(); return e >= 32768 ? e - 65536 : e }, writeShort_: function (e) { o(e < 0 ? e + 65536 : e) }, readLong_: a, writeLong_: l, readFixed_: function () { return a() / 65536 }, writeFixed_: function (e) { l(Math.round(65536 * e)) }, read: c, write: p = ie ? function (t) { if ("string" == typeof t) return d(t); var i = t.length; h(g + i), e.set(t, g), (g += i) > v && (v = g) } : function (e) { if ("string" == typeof e) return d(e); for (var t = 0; t < e.length; ++t)i(e[t]) }, readString: function (e) { return String.fromCharCode.apply(String, c(e)) }, writeString: d, times: u, get: f = ie ? function () { return new Uint8Array(e.buffer, 0, v) } : function () { return e }, slice: ie ? function (t, i) { if (e.buffer.slice) return new Uint8Array(e.buffer.slice(t, t + i)); var n = new Uint8Array(i); return n.set(new Uint8Array(e.buffer, t, i)), n } : function (t, i) { return e.slice(t, t + i) }, offset: function (e) { return null != e ? (g = e, m) : g }, skip: function (e) { g += e }, toString: function () { throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!") }, length: function () { return v }, saveExcursion: function (e) { var t = g; try { return e() } finally { g = t } }, writeBase64: function (e) { window.atob ? d(window.atob(e)) : p(ne.decode(e)) }, base64: function () { return ne.encode(f()) } } } function i(e) { return e.map(function (e) { var t = ""; return e > 65535 && (e -= 65536, t += String.fromCharCode(e >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), t += String.fromCharCode(e) }).join("") } function n(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } function o(e) { return Object.keys(e).sort(function (e, t) { return e - t }).map(parseFloat) } function r(e) { var t, i, n; for (this.raw = e, this.scalerType = e.readLong(), this.tableCount = e.readShort(), this.searchRange = e.readShort(), this.entrySelector = e.readShort(), this.rangeShift = e.readShort(), t = this.tables = {}, i = 0; i < this.tableCount; ++i)n = { tag: e.readString(4), checksum: e.readLong(), offset: e.readLong(), length: e.readLong() }, t[n.tag] = n } function s(e) { function t(e, t) { this.definition = t, this.length = t.length, this.offset = t.offset, this.file = e, this.rawData = e.raw, this.parse(e.raw) } for (var i in t.prototype.raw = function () { return this.rawData.slice(this.offset, this.length) }, e) n(e, i) && (t[i] = t.prototype[i] = e[i]); return t } function a(e) { this.font = e, this.subset = {}, this.unicodes = {}, this.ogid2ngid = { 0: 0 }, this.ngid2ogid = { 0: 0 }, this.ncid2ogid = {}, this.next = this.firstChar = 1, this.nextGid = 1, this.psName = function () { var e, t = "", i = pe + ""; for (e = 0; e < i.length; ++e)t += String.fromCharCode(i.charCodeAt(e) - 48 + 65); return ++pe, t }() + "+" + this.font.psName } function l(e, i) { var n, o, r, s, a = this, l = a.contents = t(e); if ("ttcf" == l.readString(4)) { if (o = function () { l.offset(n), a.parse() }, !i) throw Error("Must specify a name for TTC files"); for (l.readLong(), r = l.readLong(), s = 0; s < r; ++s)if (n = l.readLong(), l.saveExcursion(o), a.psName == i) return; throw Error("Font " + i + " not found in collection") } l.offset(0), a.parse() } function c() { function e() { var t, i, o, r = arguments; for (t = 0; t < arguments.length; ++t) { if (void 0 === (i = r[t])) throw Error("Cannot output undefined to PDF"); if (i instanceof y) i.beforeRender(e), i.render(e); else if (Ce(i)) v(i, e); else if (g(i)) _(i, e); else if ("number" == typeof i) { if (isNaN(i)) throw Error("Cannot output NaN to PDF"); (o = i.toFixed(7)).indexOf(".") >= 0 && (o = o.replace(/\.?0+$/, "")), "-0" == o && (o = "0"), n.writeString(o) } else /string|boolean/.test(typeof i) ? n.writeString(i + "") : "function" == typeof i.get ? n.write(i.get()) : "object" == typeof i && (i ? e(new Ee(i)) : n.writeString("null")) } } var i = 0, n = t(); return e.writeData = function (e) { n.write(e) }, e.withIndent = function (t) { ++i, t(e), --i }, e.indent = function () { e(ve, f("", 2 * i, "  ")), e.apply(null, arguments) }, e.offset = function () { return n.offset() }, e.toString = function () { throw Error("FIX CALLER") }, e.get = function () { return n.get() }, e.stream = function () { return n }, e } function d(e) { var t, i, n; if ("function" != typeof e && (t = e, e = function (e, i) { return e in t ? t[e] : i }), !(i = e("paperSize", be.a4))) return {}; if ("string" == typeof i && null == (i = be[i.toLowerCase()])) throw Error("Unknown paper size"); return i[0] = w(i[0]), i[1] = w(i[1]), e("landscape", !1) && (i = [Math.max(i[0], i[1]), Math.min(i[0], i[1])]), (n = e("margin")) && ("string" == typeof n || "number" == typeof n ? n = { left: n = w(n, 0), top: n, right: n, bottom: n } : n = { left: w(n.left, 0), top: w(n.top, 0), right: w(n.right, 0), bottom: w(n.bottom, 0) }, e("addMargin") && (i[0] += n.left + n.right, i[1] += n.top + n.bottom)), { paperSize: i, margin: n } } function u(e) { function t(t, i) { return e && null != e[t] ? e[t] : i } var i, n, o = this, r = c(), s = 0, a = []; o.getOption = t, o.attach = function (e) { return a.indexOf(e) < 0 && (function (e, t) { var i = e.beforeRender, n = e.render; e.beforeRender = function () { }, e.render = function (e) { e(t, " 0 R") }, e.renderFull = function (o) { e._offset = o.offset(), o(t, " 0 obj "), i.call(e, o), n.call(e, o), o(" endobj") } }(e, ++s), a.push(e)), e }, o.pages = [], o.FONTS = {}, o.IMAGES = {}, o.GRAD_COL_FUNCTIONS = {}, o.GRAD_OPC_FUNCTIONS = {}, o.GRAD_COL = {}, o.GRAD_OPC = {}, i = o.attach(new Me), n = o.attach(new Re), i.setPages(n), o.addPage = function (e) { var t, i, r, s = d(function (t, i) { return e && null != e[t] ? e[t] : i }), a = s.paperSize, l = s.margin, u = a[0], h = a[1]; return l && (u -= l.left + l.right, h -= l.top + l.bottom), t = new Ie(c(), null, !0), i = { Contents: o.attach(t), Parent: n, MediaBox: [0, 0, a[0], a[1]] }, (r = new Le(o, i))._content = t, n.addPage(o.attach(r)), r.transform(1, 0, 0, -1, 0, a[1]), l && (r.translate(l.left, l.top), r.rect(0, 0, u, h), r.clip()), o.pages.push(r), r }, o.render = function () { var e, n; for (r("%PDF-1.4", ve, "%", ve, ve), e = 0; e < a.length; ++e)a[e].renderFull(r), r(ve, ve); for (n = r.offset(), r("xref", ve, 0, " ", a.length + 1, ve), r("0000000000 65535 f ", ve), e = 0; e < a.length; ++e)r(p(a[e]._offset, 10), " 00000 n ", ve); return r(ve), r("trailer", ve), r(new Ee({ Size: a.length + 1, Root: i, Info: new Ee({ Producer: new Se(t("producer", "Kendo UI PDF Generator")), Title: new Se(t("title", "")), Author: new Se(t("author", "")), Subject: new Se(t("subject", "")), Keywords: new Se(t("keywords", "")), Creator: new Se(t("creator", "Kendo UI PDF Generator")), CreationDate: t("date", new Date) }) }), ve, ve), r("startxref", ve, n, ve), r("%%EOF", ve), r.stream().offset(0) } } function h(e) { return function (t, i) { function n() { 0 == --o && i() } var o = t.length, r = o; if (0 === o) return i(); for (; r-- > 0;)e(t[r], n) } } function f(e, t, i) { for (; e.length < t;)e = i + e; return e } function p(e, t) { return f(e + "", t, "0") } function m(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } function g(e) { return e instanceof Date } function v(e, t) { t("["), e.length > 0 && t.withIndent(function () { for (var i = 0; i < e.length; ++i)i > 0 && i % 8 == 0 ? t.indent(e[i]) : t(" ", e[i]) }), t(" ]") } function _(e, t) { t("(D:", p(e.getUTCFullYear(), 4), p(e.getUTCMonth() + 1, 2), p(e.getUTCDate(), 2), p(e.getUTCHours(), 2), p(e.getUTCMinutes(), 2), p(e.getUTCSeconds(), 2), "Z)") } function b(e) { return e * (72 / 25.4) } function w(e, t) { var i, n; if ("number" == typeof e) return e; if ("string" == typeof e && ((i = /^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e)) && (n = parseFloat(i[1]), !isNaN(n)))) return "pt" == i[2] ? n : { mm: b, cm: function (e) { return b(10 * e) }, in: function (e) { return 72 * e } }[i[2]](n); if (null != t) return t; throw Error("Can't parse unit: " + e) } function y() { } function k(e, t, i) { for (var n in i || (i = y), e.prototype = new i, t) m(t, n) && (e.prototype[n] = t[n]); return e } function x(e) { return m(Ae, e) ? Ae[e] : Ae[e] = new De(e) } function C(e) { var t, i, n, o, r, s, a; if (e.offset(0), 65496 != e.readShort()) throw Error("Invalid JPEG image"); for (; !e.eof();) { if (255 != e.readByte()) throw Error("Invalid JPEG image"); if (r = e.readByte(), s = e.readShort(), Fe.indexOf(r) >= 0) { o = e.readByte(), i = e.readShort(), t = e.readShort(), n = e.readByte(); break } e.skip(s - 2) } if (null == n) throw Error("Invalid JPEG image"); switch (a = { Type: x("XObject"), Subtype: x("Image"), Width: t, Height: i, BitsPerComponent: o, Filter: x("DCTDecode") }, n) { case 1: a.ColorSpace = x("DeviceGray"); break; case 3: a.ColorSpace = x("DeviceRGB"); break; case 4: a.ColorSpace = x("DeviceCMYK"), a.Decode = [1, 0, 1, 0, 1, 0, 1, 0] }this.asStream = function () { e.offset(0); var t = new Ie(e, a); return t._resourceName = x("I" + ++_e), t } } function S(e) { return e.map(function (e) { return Ce(e) ? S(e) : "number" == typeof e ? (Math.round(1e3 * e) / 1e3).toFixed(3) : e }).join(" ") } function T(e, t, i, n, o, r, s) { var a = S([t, i, n, o, r, s]), l = e.GRAD_COL_FUNCTIONS[a]; return l || (l = e.GRAD_COL_FUNCTIONS[a] = e.attach(new Ee({ FunctionType: 2, Domain: [0, 1], Range: [0, 1, 0, 1, 0, 1], N: 1, C0: [t, i, n], C1: [o, r, s] }))), l } function D(e, t, i) { var n = S([t, i]), o = e.GRAD_OPC_FUNCTIONS[n]; return o || (o = e.GRAD_OPC_FUNCTIONS[n] = e.attach(new Ee({ FunctionType: 2, Domain: [0, 1], Range: [0, 1], N: 1, C0: [t], C1: [i] }))), o } function A(e, t, i) { var n = "radial" == t.type, o = function (e, t) { function i(e) { return 1 == e.length ? e[0] : { FunctionType: 3, Functions: e, Domain: [0, 1], Bounds: u, Encode: h } } var n, o, r, s, a, l = !1, c = [], d = [], u = [], h = []; for (n = 1; n < t.length; ++n)o = t[n - 1], r = t[n], s = o.color, a = r.color, d.push(T(e, s.r, s.g, s.b, a.r, a.g, a.b)), (s.a < 1 || a.a < 1) && (l = !0), u.push(r.offset), h.push(0, 1); if (l) for (n = 1; n < t.length; ++n)o = t[n - 1], r = t[n], s = o.color, a = r.color, c.push(D(e, s.a, a.a)); return u.pop(), { hasAlpha: l, colors: i(d), opacities: l ? i(c) : null } }(e, t.stops), r = n ? [t.start.x, t.start.y, t.start.r, t.end.x, t.end.y, t.end.r] : [t.start.x, t.start.y, t.end.x, t.end.y], s = function (e, t, i, n, o, r) { var s, a, l; return r || (l = [t].concat(n), i.forEach(function (e) { l.push(e.offset, e.color.r, e.color.g, e.color.b) }), a = S(l), s = e.GRAD_COL[a]), s || (s = new Ee({ Type: x("Shading"), ShadingType: t ? 3 : 2, ColorSpace: x("DeviceRGB"), Coords: n, Domain: [0, 1], Function: o, Extend: [!0, !0] }), e.attach(s), s._resourceName = "S" + ++_e, a && (e.GRAD_COL[a] = s)), s }(e, n, t.stops, r, o.colors, t.userSpace && i), a = o.hasAlpha ? function (e, t, i, n, o, r) { var s, a, l; return r || (l = [t].concat(n), i.forEach(function (e) { l.push(e.offset, e.color.a) }), a = S(l), s = e.GRAD_OPC[a]), s || (s = new Ee({ Type: x("ExtGState"), AIS: !1, CA: 1, ca: 1, SMask: { Type: x("Mask"), S: x("Luminosity"), G: e.attach(new Ie("/a0 gs /s0 sh", { Type: x("XObject"), Subtype: x("Form"), FormType: 1, BBox: r ? [r.left, r.top + r.height, r.left + r.width, r.top] : [0, 1, 1, 0], Group: { Type: x("Group"), S: x("Transparency"), CS: x("DeviceGray"), I: !0 }, Resources: { ExtGState: { a0: { CA: 1, ca: 1 } }, Shading: { s0: { ColorSpace: x("DeviceGray"), Coords: n, Domain: [0, 1], ShadingType: t ? 3 : 2, Function: o, Extend: [!0, !0] } } } })) } }), e.attach(s), s._resourceName = "O" + ++_e, a && (e.GRAD_OPC[a] = s)), s }(e, n, t.stops, r, o.opacities, t.userSpace && i) : null; return { hasAlpha: o.hasAlpha, shading: s, opacity: a } } function E(e) { return e.replace(/^\s*(['"])(.*)\1\s*$/, "$2") } function I(e) { var t, i = /^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i.exec(e); return i ? (t = i[8] ? parseInt(i[8], 10) : 12, { italic: i[2] && "italic" == i[2].toLowerCase(), variant: i[4], bold: i[6] && /bold|700/i.test(i[6]), fontSize: t, lineHeight: i[12] ? "normal" == i[12] ? t : parseInt(i[12], 10) : null, fontFamily: i[14].split(/\s*,\s*/g).map(E) }) : { fontSize: 12, fontFamily: "sans-serif" } } function M(e) { function t(t) { return e.bold && (t += "|bold"), e.italic && (t += "|italic"), t.toLowerCase() } var i, n, o, r = e.fontFamily; if (r instanceof Array) for (o = 0; o < r.length && (i = t(r[o]), !(n = He[i])); ++o); else n = He[r.toLowerCase()]; for (; "function" == typeof n;)n = n(); return n || (n = "Times-Roman"), n } function R(e, t) { e = e.toLowerCase(), He[e] = function () { return He[t] }, He[e + "|bold"] = function () { return He[t + "|bold"] }, He[e + "|italic"] = function () { return He[t + "|italic"] }, He[e + "|bold|italic"] = function () { return He[t + "|bold|italic"] } } function F(e, t) { function i(e, t, i) { return i || (i = a), i.pdf && null != i.pdf[e] ? i.pdf[e] : t } function n() { function n(e) { var t, n, o, s, a, l = e.options, c = function (e) { function t(e) { return r = !0, e } function i(e) { return e.visible() && e.opacity() > 0 && (H(e.fill()) || H(e.stroke())) } function n(e) { var t, i, n = []; for (t = 0; t < e.length; ++t)null != (i = o(e[t])) && n.push(i); return n } function o(o) { return function (e, t) { var i, n = s, o = a; e.transform() && (a = a.multiplyCopy(e.transform().matrix())), (i = e.clip()) && (i = i.bbox()) && (i = i.bbox(a), s = s ? te.Rect.intersect(s, i) : i); try { return t() } finally { s = n, a = o } }(o, function () { if (!(o instanceof J.Group || o instanceof J.MultiPath)) { var r = function (e) { if (null == s) return !1; var t = e.rawBBox().bbox(a); return s && t && (t = te.Rect.intersect(t, s)), t }(o); if (!r) return t(null); l = l ? te.Rect.union(l, r) : r } return B({ Path: function (e) { return 0 !== e.segments.length && i(e) ? e : t(null) }, MultiPath: function (e) { if (!i(e)) return t(null); var o = new J.MultiPath(e.options); return o.paths = n(e.paths), 0 === o.paths.length ? t(null) : o }, Circle: function (e) { return i(e) ? e : t(null) }, Arc: function (e) { return i(e) ? e : t(null) }, Text: function (e) { return /\S/.test(e.content()) && i(e) ? e : t(null) }, Image: function (e) { return e.visible() && e.opacity() > 0 ? e : t(null) }, Group: function (i) { var o = new J.Group(i.options); return o.children = n(i.children), o._pdfLink = i._pdfLink, i === e || 0 !== o.children.length || i._pdfLink ? o : t(null) }, Rect: function (e) { return i(e) ? e : t(null) } }, o) }) } var r, s = !1, a = te.Matrix.unit(), l = null; do { r = !1, e = o(e) } while (e && r); return { root: e, bbox: l } }(e), d = c.bbox; e = c.root, t = i("paperSize", i("paperSize", "auto"), l), n = !1, "auto" == t && (d ? (o = d.getSize(), t = [o.width, o.height], n = !0, s = d.getOrigin(), (c = new J.Group).transform(new te.Matrix(1, 0, 0, 1, -s.x, -s.y)), c.append(e), e = c) : t = "A4"), a = r.addPage({ paperSize: t, margin: i("margin", i("margin"), l), addMargin: n, landscape: i("landscape", i("landscape", !1), l) }), L(e, a, r) } if (!(--o > 0)) { var r = new u({ producer: i("producer"), title: i("title"), author: i("author"), subject: i("subject"), keywords: i("keywords"), creator: i("creator"), date: i("date") }); l ? e.children.forEach(n) : n(e), t(r.render(), r) } } var o, r = [], s = [], a = e.options, l = i("multiPage"); e.traverse(function (e) { B({ Image: function (e) { s.indexOf(e.src()) < 0 && s.push(e.src()) }, Text: function (e) { var t = I(e.options.font), i = M(t); r.indexOf(i) < 0 && r.push(i) } }, e) }), o = 2, ke(r, n), xe(s, n) } function z(e, t) { F(e, function (e) { t("data:application/pdf;base64," + e.base64()) }) } function P(e, t) { F(e, function (e) { t(new window.Blob([e.get()], { type: "application/pdf" })) }) } function B(e, t) { var i = e[t.nodeType]; return i ? i.call.apply(i, arguments) : t } function L(e, t, i) { var n, o, r; e.options._pdfDebug && t.comment("BEGIN: " + e.options._pdfDebug), n = e.transform(), o = e.opacity(), t.save(), null != o && o < 1 && t.setOpacity(o), function (e, t) { var i, n, o, r, s, a, l = e.stroke && e.stroke(); if (l) { if (i = l.color) { if (null == (i = Q(i))) return; t.setStrokeColor(i.r, i.g, i.b), 1 != i.a && t.setStrokeOpacity(i.a) } if (null != (n = l.width)) { if (0 === n) return; t.setLineWidth(n) } (o = l.dashType) && t.setDashPattern(Ve[o], 0), (r = l.lineCap) && t.setLineCap(Ue[r]), (s = l.lineJoin) && t.setLineJoin(We[s]), null != (a = l.opacity) && t.setStrokeOpacity(a) } }(e, t), function (e, t) { var i, n, o = e.fill && e.fill(); if (o && !(o instanceof J.Gradient)) { if (i = o.color) { if (null == (i = Q(i))) return; t.setFillColor(i.r, i.g, i.b), 1 != i.a && t.setFillOpacity(i.a) } null != (n = o.opacity) && t.setFillOpacity(n) } }(e, t), n && (r = n.matrix(), t.transform(r.a, r.b, r.c, r.d, r.e, r.f)), function (e, t, i) { var n = e.clip(); n && (V(n, t, i), t.clip()) }(e, t, i), B({ Path: U, MultiPath: W, Circle: q, Arc: j, Text: G, Image: Y, Group: $, Rect: K }, e, t, i), t.restore(), e.options._pdfDebug && t.comment("END: " + e.options._pdfDebug) } function H(e) { return e && (e instanceof J.Gradient || e.color && !/^(none|transparent)$/i.test(e.color) && (null == e.width || e.width > 0) && (null == e.opacity || e.opacity > 0)) } function N(e, t, i, n) { var o, r, s, a, l, c, d, u, h = e.fill(); if (h instanceof J.Gradient) return n ? t.clipStroke() : t.clip(), (o = h instanceof J.RadialGradient) ? (r = { x: h.center().x, y: h.center().y, r: 0 }, s = { x: h.center().x, y: h.center().y, r: h.radius() }) : (r = { x: h.start().x, y: h.start().y }, s = { x: h.end().x, y: h.end().y }), (a = h.stops.elements().map(function (e) { var t, i = e.offset(); return i = /%$/.test(i) ? parseFloat(i) / 100 : parseFloat(i), (t = Q(e.color())).a *= e.opacity(), { offset: i, color: t } })).unshift(a[0]), a.push(a[a.length - 1]), l = { userSpace: h.userSpace(), type: o ? "radial" : "linear", start: r, end: s, stops: a }, c = e.rawBBox(), d = c.topLeft(), u = c.getSize(), c = { left: d.x, top: d.y, width: u.width, height: u.height }, t.gradient(l, c), !0 } function O(e, t, i) { H(e.fill()) && H(e.stroke()) ? N(e, t, i, !0) || t.fillStroke() : H(e.fill()) ? N(e, t, i, !1) || t.fill() : H(e.stroke()) ? t.stroke() : t.nop() } function V(e, t, i) { var n, o, r, s, a, l, c = e.segments; if (0 !== c.length && !function (e, t) { var i, n, o = e.segments; if (4 == o.length && e.options.closed) { for (i = [], n = 0; n < o.length; ++n) { if (o[n].controlIn()) return !1; i[n] = o[n].anchor() } if (i[0].y == i[1].y && i[1].x == i[2].x && i[2].y == i[3].y && i[3].x == i[0].x || i[0].x == i[1].x && i[1].y == i[2].y && i[2].x == i[3].x && i[3].y == i[0].y) return t.rect(i[0].x, i[0].y, i[2].x - i[0].x, i[2].y - i[0].y), !0 } }(e, t)) { for (o = 0; o < c.length; ++o)r = c[o], s = r.anchor(), n ? (a = n.controlOut(), l = r.controlIn(), a && l ? t.bezier(a.x, a.y, l.x, l.y, s.x, s.y) : t.lineTo(s.x, s.y)) : t.moveTo(s.x, s.y), n = r; e.options.closed && t.close() } } function U(e, t, i) { V(e, t, i), O(e, t, i) } function W(e, t, i) { var n, o = e.paths; for (n = 0; n < o.length; ++n)V(o[n], t, i); O(e, t, i) } function q(e, t, i) { var n = e.geometry(); t.circle(n.center.x, n.center.y, n.radius), O(e, t, i) } function j(e, t, i) { var n, o = e.geometry().curvePoints(); for (t.moveTo(o[0].x, o[0].y), n = 1; n < o.length;)t.bezier(o[n].x, o[n++].y, o[n].x, o[n++].y, o[n].x, o[n++].y); O(e, t, i) } function G(e, t) { var i, n = I(e.options.font), o = e._position; e.fill() && e.stroke() ? i = Oe.fillAndStroke : e.fill() ? i = Oe.fill : e.stroke() && (i = Oe.stroke), t.transform(1, 0, 0, -1, o.x, o.y + n.fontSize), t.beginText(), t.setFont(M(n), n.fontSize), t.setTextRenderingMode(i), t.showText(e.content(), e._pdfRect ? e._pdfRect.width() : null), t.endText() } function $(e, t, i) { var n, o; for (e._pdfLink && t.addLink(e._pdfLink.url, e._pdfLink), n = e.children, o = 0; o < n.length; ++o)L(n[o], t, i) } function Y(e, t) { var i, n, o, r = e.src(); r && (i = e.rect(), n = i.getOrigin(), o = i.getSize(), t.transform(o.width, 0, 0, -o.height, n.x, n.y + o.height), t.drawImage(r)) } function K(e, t, i) { var n = e.geometry(); t.rect(n.origin.x, n.origin.y, n.size.width, n.size.height), O(e, t, i) } function Q(t) { var i = e.parseColor(t, !0); return i ? i.toRGB() : null } var X, Z, J, ee, te, ie, ne, oe, re, se, ae, le, ce, de, ue, he, fe, pe, me, ge, ve, _e, be, we, ye, ke, xe, Ce, Se, Te, De, Ae, Ee, Ie, Me, Re, Fe, ze, Pe, Be, Le, He, Ne, Oe, Ve, Ue, We; window.kendo.pdf = window.kendo.pdf || {}, X = e.support, Z = X.browser, J = e.drawing, ee = J.util, te = e.geometry, ie = "undefined" != typeof Uint8Array, ne = function () { var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="; return { decode: function (t) { for (var i, n, o, r, s, a, l, c = t.replace(/[^A-Za-z0-9\+\/\=]/g, ""), d = 0, u = c.length, h = []; d < u;)i = e.indexOf(c.charAt(d++)), n = e.indexOf(c.charAt(d++)), o = e.indexOf(c.charAt(d++)), r = e.indexOf(c.charAt(d++)), s = i << 2 | n >>> 4, a = (15 & n) << 4 | o >>> 2, l = (3 & o) << 6 | r, h.push(s), 64 != o && h.push(a), 64 != r && h.push(l); return h }, encode: function (t) { for (var i, n, o, r, s, a, l = 0, c = t.length, d = ""; l < c;)i = t[l++], n = t[l++], o = t[l++], r = (3 & i) << 4 | n >>> 4, s = (15 & n) << 2 | o >>> 6, a = 63 & o, l - c == 2 ? s = a = 64 : l - c == 1 && (a = 64), d += e.charAt(i >>> 2) + e.charAt(r) + e.charAt(s) + e.charAt(a); return d } } }(), r.prototype = { readTable: function (e, t) { var i = this.tables[e]; if (!i) throw Error("Table " + e + " not found in directory"); return this[e] = i.table = new t(this, i) }, render: function (e) { var i, o, r, s, a, l, c, d, u = Object.keys(e).length, h = Math.pow(2, Math.floor(Math.log(u) / Math.LN2)), f = 16 * h, p = Math.floor(Math.log(h) / Math.LN2), m = 16 * u - f, g = t(); for (a in g.writeLong(this.scalerType), g.writeShort(u), g.writeShort(f), g.writeShort(p), g.writeShort(m), i = 16 * u, o = g.offset() + i, r = null, s = t(), e) if (n(e, a)) for (l = e[a], g.writeString(a), g.writeLong(this.checksum(l)), g.writeLong(o), g.writeLong(l.length), s.write(l), "head" == a && (r = o), o += l.length; o % 4;)s.writeByte(0), o++; return g.write(s.get()), c = this.checksum(g.get()), d = 2981146554 - c, g.offset(r + 8), g.writeLong(d), g.get() }, checksum: function (e) { e = t(e); for (var i = 0; !e.eof();)i += e.readLong(); return 4294967295 & i } }, oe = s({ parse: function (e) { e.offset(this.offset), this.version = e.readLong(), this.revision = e.readLong(), this.checkSumAdjustment = e.readLong(), this.magicNumber = e.readLong(), this.flags = e.readShort(), this.unitsPerEm = e.readShort(), this.created = e.read(8), this.modified = e.read(8), this.xMin = e.readShort_(), this.yMin = e.readShort_(), this.xMax = e.readShort_(), this.yMax = e.readShort_(), this.macStyle = e.readShort(), this.lowestRecPPEM = e.readShort(), this.fontDirectionHint = e.readShort_(), this.indexToLocFormat = e.readShort_(), this.glyphDataFormat = e.readShort_() }, render: function (e) { var i = t(); return i.writeLong(this.version), i.writeLong(this.revision), i.writeLong(0), i.writeLong(this.magicNumber), i.writeShort(this.flags), i.writeShort(this.unitsPerEm), i.write(this.created), i.write(this.modified), i.writeShort_(this.xMin), i.writeShort_(this.yMin), i.writeShort_(this.xMax), i.writeShort_(this.yMax), i.writeShort(this.macStyle), i.writeShort(this.lowestRecPPEM), i.writeShort_(this.fontDirectionHint), i.writeShort_(e), i.writeShort_(this.glyphDataFormat), i.get() } }), re = s({ parse: function (e) { e.offset(this.offset); var t = this.file.head.indexToLocFormat; this.offsets = 0 === t ? e.times(this.length / 2, function () { return 2 * e.readShort() }) : e.times(this.length / 4, e.readLong) }, offsetOf: function (e) { return this.offsets[e] }, lengthOf: function (e) { return this.offsets[e + 1] - this.offsets[e] }, render: function (e) { var i, n = t(), o = e[e.length - 1] > 65535; for (i = 0; i < e.length; ++i)o ? n.writeLong(e[i]) : n.writeShort(e[i] / 2); return { format: o ? 1 : 0, table: n.get() } } }), se = s({ parse: function (e) { e.offset(this.offset), this.version = e.readLong(), this.ascent = e.readShort_(), this.descent = e.readShort_(), this.lineGap = e.readShort_(), this.advanceWidthMax = e.readShort(), this.minLeftSideBearing = e.readShort_(), this.minRightSideBearing = e.readShort_(), this.xMaxExtent = e.readShort_(), this.caretSlopeRise = e.readShort_(), this.caretSlopeRun = e.readShort_(), this.caretOffset = e.readShort_(), e.skip(8), this.metricDataFormat = e.readShort_(), this.numOfLongHorMetrics = e.readShort() }, render: function (e) { var i = t(); return i.writeLong(this.version), i.writeShort_(this.ascent), i.writeShort_(this.descent), i.writeShort_(this.lineGap), i.writeShort(this.advanceWidthMax), i.writeShort_(this.minLeftSideBearing), i.writeShort_(this.minRightSideBearing), i.writeShort_(this.xMaxExtent), i.writeShort_(this.caretSlopeRise), i.writeShort_(this.caretSlopeRun), i.writeShort_(this.caretOffset), i.write([0, 0, 0, 0, 0, 0, 0, 0]), i.writeShort_(this.metricDataFormat), i.writeShort(e.length), i.get() } }), ae = s({ parse: function (e) { e.offset(this.offset), this.version = e.readLong(), this.numGlyphs = e.readShort(), this.maxPoints = e.readShort(), this.maxContours = e.readShort(), this.maxComponentPoints = e.readShort(), this.maxComponentContours = e.readShort(), this.maxZones = e.readShort(), this.maxTwilightPoints = e.readShort(), this.maxStorage = e.readShort(), this.maxFunctionDefs = e.readShort(), this.maxInstructionDefs = e.readShort(), this.maxStackElements = e.readShort(), this.maxSizeOfInstructions = e.readShort(), this.maxComponentElements = e.readShort(), this.maxComponentDepth = e.readShort() }, render: function (e) { var i = t(); return i.writeLong(this.version), i.writeShort(e.length), i.writeShort(this.maxPoints), i.writeShort(this.maxContours), i.writeShort(this.maxComponentPoints), i.writeShort(this.maxComponentContours), i.writeShort(this.maxZones), i.writeShort(this.maxTwilightPoints), i.writeShort(this.maxStorage), i.writeShort(this.maxFunctionDefs), i.writeShort(this.maxInstructionDefs), i.writeShort(this.maxStackElements), i.writeShort(this.maxSizeOfInstructions), i.writeShort(this.maxComponentElements), i.writeShort(this.maxComponentDepth), i.get() } }), le = s({ parse: function (e) { var t, i, n; e.offset(this.offset), t = this.file, i = t.hhea, this.metrics = e.times(i.numOfLongHorMetrics, function () { return { advance: e.readShort(), lsb: e.readShort_() } }), n = t.maxp.numGlyphs - t.hhea.numOfLongHorMetrics, this.leftSideBearings = e.times(n, e.readShort_) }, forGlyph: function (e) { var t = this.metrics, i = t.length; return e < i ? t[e] : { advance: t[i - 1].advance, lsb: this.leftSideBearings[e - i] } }, render: function (e) { var i, n, o = t(); for (i = 0; i < e.length; ++i)n = this.forGlyph(e[i]), o.writeShort(n.advance), o.writeShort_(n.lsb); return o.get() } }), ce = function () { function e(e) { this.raw = e } function i(e) { var t, i, n; for (this.raw = e, t = this.glyphIds = [], i = this.idOffsets = []; n = e.readShort(), i.push(e.offset()), t.push(e.readShort()), n & a;)e.skip(n & o ? 4 : 2), n & c ? e.skip(8) : n & l ? e.skip(4) : n & r && e.skip(2) } var o, r, a, l, c; return e.prototype = { compound: !1, render: function () { return this.raw.get() } }, o = 1, r = 8, a = 32, l = 64, c = 128, i.prototype = { compound: !0, render: function (e) { var i, n, o = t(this.raw.get()); for (i = 0; i < this.glyphIds.length; ++i)n = this.glyphIds[i], o.offset(this.idOffsets[i]), o.writeShort(e[n]); return o.get() } }, s({ parse: function () { this.cache = {} }, glyphFor: function (o) { var r, s, a, l, c, d, u, h, f, p, m, g = this.cache; return n(g, o) ? g[o] : (r = this.file.loca, 0 === (s = r.lengthOf(o)) ? g[o] = null : (a = this.rawData, l = this.offset + r.offsetOf(o), c = t(a.slice(l, s)), d = c.readShort_(), u = c.readShort_(), h = c.readShort_(), f = c.readShort_(), p = c.readShort_(), (m = g[o] = -1 == d ? new i(c) : new e(c)).numberOfContours = d, m.xMin = u, m.yMin = h, m.xMax = f, m.yMax = p, m)) }, render: function (e, i, n) { var o, r, s, a = t(), l = []; for (o = 0; o < i.length; ++o)r = i[o], s = e[r], l.push(a.offset()), s && a.write(s.render(n)); return l.push(a.offset()), { table: a.get(), offsets: l } } }) }(), de = function () { function e(e, t) { this.text = e, this.length = e.length, this.platformID = t.platformID, this.platformSpecificID = t.platformSpecificID, this.languageID = t.languageID, this.nameID = t.nameID } return s({ parse: function (t) { var i, n, o, r, s, a, l; for (t.offset(this.offset), t.readShort(), i = t.readShort(), n = this.offset + t.readShort(), o = t.times(i, function () { return { platformID: t.readShort(), platformSpecificID: t.readShort(), languageID: t.readShort(), nameID: t.readShort(), length: t.readShort(), offset: t.readShort() + n } }), r = this.strings = {}, s = 0; s < o.length; ++s)a = o[s], t.offset(a.offset), l = t.readString(a.length), r[a.nameID] || (r[a.nameID] = []), r[a.nameID].push(new e(l, a)); this.postscriptEntry = r[6][0], this.postscriptName = this.postscriptEntry.text.replace(/[^\x20-\x7F]/g, "") }, render: function (i) { var o, r, s, a, l, c, d = this.strings, u = 0; for (o in d) n(d, o) && (u += d[o].length); for (o in r = t(), s = t(), r.writeShort(0), r.writeShort(u), r.writeShort(6 + 12 * u), d) if (n(d, o)) for (a = 6 == o ? [new e(i, this.postscriptEntry)] : d[o], l = 0; l < a.length; ++l)c = a[l], r.writeShort(c.platformID), r.writeShort(c.platformSpecificID), r.writeShort(c.languageID), r.writeShort(c.nameID), r.writeShort(c.length), r.writeShort(s.offset()), s.writeString(c.text); return r.write(s.get()), r.get() } }) }(), ue = function () { var e = ".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g); return s({ parse: function (e) { var t, i; switch (e.offset(this.offset), this.format = e.readLong(), this.italicAngle = e.readFixed_(), this.underlinePosition = e.readShort_(), this.underlineThickness = e.readShort_(), this.isFixedPitch = e.readLong(), this.minMemType42 = e.readLong(), this.maxMemType42 = e.readLong(), this.minMemType1 = e.readLong(), this.maxMemType1 = e.readLong(), this.format) { case 65536: case 196608: break; case 131072: for (t = e.readShort(), this.glyphNameIndex = e.times(t, e.readShort), this.names = [], i = this.offset + this.length; e.offset() < i;)this.names.push(e.readString(e.readByte())); break; case 151552: t = e.readShort(), this.offsets = e.read(t); break; case 262144: this.map = e.times(this.file.maxp.numGlyphs, e.readShort) } }, glyphFor: function (t) { switch (this.format) { case 65536: return e[t] || ".notdef"; case 131072: var i = this.glyphNameIndex[t]; return i < e.length ? e[i] : this.names[i - e.length] || ".notdef"; case 151552: case 196608: return ".notdef"; case 262144: return this.map[t] || 65535 } }, render: function (i) { var n, o, r, s, a, l, c; if (196608 == this.format) return this.raw(); for ((n = t(this.rawData.slice(this.offset, 32))).writeLong(131072), n.offset(32), o = [], r = [], s = 0; s < i.length; ++s)a = i[s], l = this.glyphFor(a), (c = e.indexOf(l)) >= 0 ? o.push(c) : (o.push(e.length + r.length), r.push(l)); for (n.writeShort(i.length), s = 0; s < o.length; ++s)n.writeShort(o[s]); for (s = 0; s < r.length; ++s)n.writeByte(r[s].length), n.writeString(r[s]); return n.get() } }) }(), he = function () { return s({ parse: function (e) { var t, i = this, n = i.offset; e.offset(n), i.codeMap = {}, i.version = e.readShort(), t = e.readShort(), i.tables = e.times(t, function () { return new function (e, t, i) { var n = this; n.platformID = e.readShort(), n.platformSpecificID = e.readShort(), n.offset = t + e.readLong(), e.saveExcursion(function () { var t, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b; switch (e.offset(n.offset), n.format = e.readShort()) { case 0: for (n.length = e.readShort(), n.language = e.readShort(), o = 0; o < 256; ++o)i[o] = e.readByte(); break; case 4: for (n.length = e.readShort(), n.language = e.readShort(), r = e.readShort() / 2, e.skip(6), s = e.times(r, e.readShort), e.skip(2), a = e.times(r, e.readShort), l = e.times(r, e.readShort_), c = e.times(r, e.readShort), d = (n.length + n.offset - e.offset()) / 2, u = e.times(d, e.readShort), o = 0; o < r; ++o)for (h = a[o], f = s[o], t = h; t <= f; ++t)0 === c[o] ? p = t + l[o] : (m = c[o] / 2 - (r - o) + (t - h), 0 !== (p = u[m] || 0) && (p += l[o])), i[t] = 65535 & p; break; case 6: for (n.length = e.readShort(), n.language = e.readShort(), t = e.readShort(), g = e.readShort(); g-- > 0;)i[t++] = e.readShort(); break; case 12: for (e.readShort(), n.length = e.readLong(), n.language = e.readLong(), v = e.readLong(); v-- > 0;)for (t = e.readLong(), _ = e.readLong(), b = e.readLong(); t <= _;)i[t++] = b++; break; default: window.console && window.console.error("Unhandled CMAP format: " + n.format) } }) }(e, n, i.codeMap) }) }, render: function (e, i) { var n = t(); return n.writeShort(0), n.writeShort(1), n.write(function (e, i) { function n(t) { return i[e[t]] } var r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k = o(e), x = [], C = [], S = null, T = null; for (r = 0; r < k.length; ++r)s = k[r], a = n(s), l = a - s, null != S && l === T || (S && C.push(S), x.push(s), T = l), S = s; for (S && C.push(S), C.push(65535), x.push(65535), c = x.length, d = 2 * c, u = 2 * Math.pow(2, Math.floor(Math.log(c) / Math.LN2)), h = Math.log(u / 2) / Math.LN2, f = d - u, p = [], m = [], g = [], r = 0; r < c; ++r) { if (v = x[r], _ = C[r], 65535 == v) { p.push(0), m.push(0); break } if (b = n(v), v - b >= 32768) for (p.push(0), m.push(2 * (g.length + c - r)), w = v; w <= _; ++w)g.push(n(w)); else p.push(b - v), m.push(0) } return (y = t()).writeShort(3), y.writeShort(1), y.writeLong(12), y.writeShort(4), y.writeShort(16 + 8 * c + 2 * g.length), y.writeShort(0), y.writeShort(d), y.writeShort(u), y.writeShort(h), y.writeShort(f), C.forEach(y.writeShort), y.writeShort(0), x.forEach(y.writeShort), p.forEach(y.writeShort_), m.forEach(y.writeShort), g.forEach(y.writeShort), y.get() }(e, i)), n.get() } }) }(), fe = s({ parse: function (e) { e.offset(this.offset), this.version = e.readShort(), this.averageCharWidth = e.readShort_(), this.weightClass = e.readShort(), this.widthClass = e.readShort(), this.type = e.readShort(), this.ySubscriptXSize = e.readShort_(), this.ySubscriptYSize = e.readShort_(), this.ySubscriptXOffset = e.readShort_(), this.ySubscriptYOffset = e.readShort_(), this.ySuperscriptXSize = e.readShort_(), this.ySuperscriptYSize = e.readShort_(), this.ySuperscriptXOffset = e.readShort_(), this.ySuperscriptYOffset = e.readShort_(), this.yStrikeoutSize = e.readShort_(), this.yStrikeoutPosition = e.readShort_(), this.familyClass = e.readShort_(), this.panose = e.times(10, e.readByte), this.charRange = e.times(4, e.readLong), this.vendorID = e.readString(4), this.selection = e.readShort(), this.firstCharIndex = e.readShort(), this.lastCharIndex = e.readShort(), this.version > 0 && (this.ascent = e.readShort_(), this.descent = e.readShort_(), this.lineGap = e.readShort_(), this.winAscent = e.readShort(), this.winDescent = e.readShort(), this.codePageRange = e.times(2, e.readLong), this.version > 1 && (this.xHeight = e.readShort(), this.capHeight = e.readShort(), this.defaultChar = e.readShort(), this.breakChar = e.readShort(), this.maxContext = e.readShort())) }, render: function () { return this.raw() } }), pe = 1e5, a.prototype = { use: function (e) { var t, i, n, o = this; return "string" == typeof e ? function (e) { for (var t, i, n = [], o = 0, r = e.length; o < r;)(t = e.charCodeAt(o++)) >= 55296 && t <= 56319 && o < r ? 56320 == (64512 & (i = e.charCodeAt(o++))) ? n.push(((1023 & t) << 10) + (1023 & i) + 65536) : (n.push(t), o--) : n.push(t); return n }(e).reduce(function (e, t) { return e + String.fromCharCode(o.use(t)) }, "") : ((t = o.unicodes[e]) || (t = o.next++, o.subset[t] = e, o.unicodes[e] = t, (i = o.font.cmap.codeMap[e]) && (o.ncid2ogid[t] = i, null == o.ogid2ngid[i] && (n = o.nextGid++, o.ogid2ngid[i] = n, o.ngid2ogid[n] = i))), t) }, encodeText: function (e) { return this.use(e) }, glyphIds: function () { return o(this.ogid2ngid) }, glyphsFor: function (e, t) { var i, n, o; for (t || (t = {}), i = 0; i < e.length; ++i)n = e[i], t[n] || (o = t[n] = this.font.glyf.glyphFor(n)) && o.compound && this.glyphsFor(o.glyphIds, t); return t }, render: function () { var e, t, i, r, s, a, l, c, d = this, u = this.glyphsFor(this.glyphIds()); for (e in u) n(u, e) && (e = parseInt(e, 10), null == d.ogid2ngid[e] && (t = d.nextGid++, d.ogid2ngid[e] = t, d.ngid2ogid[t] = e)); return i = o(this.ngid2ogid), r = i.map(function (e) { return this.ngid2ogid[e] }, this), s = this.font, a = s.glyf.render(u, r, this.ogid2ngid), l = s.loca.render(a.offsets), this.lastChar = this.next - 1, c = { cmap: he.render(this.ncid2ogid, this.ogid2ngid), glyf: a.table, loca: l.table, hmtx: s.hmtx.render(r), hhea: s.hhea.render(r), maxp: s.maxp.render(r), post: s.post.render(r), name: s.name.render(this.psName), head: s.head.render(l.format), "OS/2": s.os2.render() }, this.font.directory.render(c) }, cidToGidMap: function () { var e, i, n, o = t(), r = 0; for (e = this.firstChar; e < this.next; ++e) { for (; r < e;)o.writeShort(0), r++; (i = this.ncid2ogid[e]) ? (n = this.ogid2ngid[i], o.writeShort(n)) : o.writeShort(0), r++ } return o.get() } }, l.prototype = { parse: function () { var e = this.directory = new r(this.contents); this.head = e.readTable("head", oe), this.loca = e.readTable("loca", re), this.hhea = e.readTable("hhea", se), this.maxp = e.readTable("maxp", ae), this.hmtx = e.readTable("hmtx", le), this.glyf = e.readTable("glyf", ce), this.name = e.readTable("name", de), this.post = e.readTable("post", ue), this.cmap = e.readTable("cmap", he), this.os2 = e.readTable("OS/2", fe), this.psName = this.name.postscriptName, this.ascent = this.os2.ascent || this.hhea.ascent, this.descent = this.os2.descent || this.hhea.descent, this.lineGap = this.os2.lineGap || this.hhea.lineGap, this.scale = 1e3 / this.head.unitsPerEm }, widthOfGlyph: function (e) { return this.hmtx.forGlyph(e).advance * this.scale }, makeSubset: function () { return new a(this) } }, me = e.support.browser, ge = "undefined" != typeof Uint8Array, ve = "\n", _e = 0, be = { a0: [2383.94, 3370.39], a1: [1683.78, 2383.94], a2: [1190.55, 1683.78], a3: [841.89, 1190.55], a4: [595.28, 841.89], a5: [419.53, 595.28], a6: [297.64, 419.53], a7: [209.76, 297.64], a8: [147.4, 209.76], a9: [104.88, 147.4], a10: [73.7, 104.88], b0: [2834.65, 4008.19], b1: [2004.09, 2834.65], b2: [1417.32, 2004.09], b3: [1000.63, 1417.32], b4: [708.66, 1000.63], b5: [498.9, 708.66], b6: [354.33, 498.9], b7: [249.45, 354.33], b8: [175.75, 249.45], b9: [124.72, 175.75], b10: [87.87, 124.72], c0: [2599.37, 3676.54], c1: [1836.85, 2599.37], c2: [1298.27, 1836.85], c3: [918.43, 1298.27], c4: [649.13, 918.43], c5: [459.21, 649.13], c6: [323.15, 459.21], c7: [229.61, 323.15], c8: [161.57, 229.61], c9: [113.39, 161.57], c10: [79.37, 113.39], executive: [521.86, 756], folio: [612, 936], legal: [612, 1008], letter: [612, 792], tabloid: [792, 1224] }, we = { "Times-Roman": !0, "Times-Bold": !0, "Times-Italic": !0, "Times-BoldItalic": !0, Helvetica: !0, "Helvetica-Bold": !0, "Helvetica-Oblique": !0, "Helvetica-BoldOblique": !0, Courier: !0, "Courier-Bold": !0, "Courier-Oblique": !0, "Courier-BoldOblique": !0, Symbol: !0, ZapfDingbats: !0 }, ye = {}, ke = h(function (e, t) { var i = we[e]; i ? t(i) : function (e, t) { function i() { window.console && (window.console.error ? window.console.error("Cannot load URL: %s", e) : window.console.log("Cannot load URL: %s", e)), t(null) } var n = new XMLHttpRequest; n.open("GET", e, !0), ge && (n.responseType = "arraybuffer"), n.onload = function () { 200 == n.status || 304 == n.status ? t(ge ? new Uint8Array(n.response) : new window.VBArray(n.responseBody).toArray()) : i() }, n.onerror = i, n.send(null) }(e, function (i) { if (null == i) throw Error("Cannot load font from " + e); var n = new l(i); we[e] = n, t(n) }) }), xe = h(function (e, i) { function n(e) { c.src = e, c.complete && !me.msie ? r() : (c.onload = r, c.onerror = o) } function o() { i(ye[e] = "TAINTED") } function r() { var n, r, l, d, u, h, f, p, m, g, v, _; if (a && /^image\/jpe?g$/i.test(a.type)) return (n = new FileReader).onload = function () { c = new C(t(new Uint8Array(this.result))), URL.revokeObjectURL(s), i(ye[e] = c) }, void n.readAsArrayBuffer(a); (r = document.createElement("canvas")).width = c.width, r.height = c.height, (l = r.getContext("2d")).drawImage(c, 0, 0); try { d = l.getImageData(0, 0, c.width, c.height) } catch (e) { return void o() } finally { s && URL.revokeObjectURL(s) } for (u = !1, h = t(), f = t(), p = d.data, m = 0; m < p.length;)h.writeByte(p[m++]), h.writeByte(p[m++]), h.writeByte(p[m++]), (g = p[m++]) < 255 && (u = !0), f.writeByte(g); u ? c = new function (e, t, i, n) { this.asStream = function (o) { var r = new Ie(n, { Type: x("XObject"), Subtype: x("Image"), Width: e, Height: t, BitsPerComponent: 8, ColorSpace: x("DeviceGray") }, !0), s = new Ie(i, { Type: x("XObject"), Subtype: x("Image"), Width: e, Height: t, BitsPerComponent: 8, ColorSpace: x("DeviceRGB"), SMask: o.attach(r) }, !0); return s._resourceName = x("I" + ++_e), s } }(c.width, c.height, h, f) : (v = (v = r.toDataURL("image/jpeg")).substr(v.indexOf(";base64,") + 8), (_ = t()).writeBase64(v), c = new C(_)), i(ye[e] = c) } var s, a, l, c = ye[e]; c ? i(c) : (c = new Image, /^data:/i.test(e) || (c.crossOrigin = "Anonymous"), ge && !/^data:/i.test(e) ? ((l = new XMLHttpRequest).onload = function () { a = l.response, n(s = URL.createObjectURL(a)) }, l.onerror = o, l.open("GET", e, !0), l.responseType = "blob", l.send()) : n(e)) }), u.prototype = { loadFonts: ke, loadImages: xe, getFont: function (e) { var t = this.FONTS[e]; if (!t) { if (!(t = we[e])) throw Error("Font " + e + " has not been loaded"); t = this.attach(!0 === t ? new ze(e) : new Pe(this, t)), this.FONTS[e] = t } return t }, getImage: function (e) { var t = this.IMAGES[e]; if (!t) { if (!(t = ye[e])) throw Error("Image " + e + " has not been loaded"); if ("TAINTED" === t) return null; t = this.IMAGES[e] = this.attach(t.asStream(this)) } return t }, getOpacityGS: function (e, t) { var i, n, o, r = parseFloat(e).toFixed(3); return e = parseFloat(r), r += t ? "S" : "F", i = this._opacityGSCache || (this._opacityGSCache = {}), (n = i[r]) || (o = { Type: x("ExtGState") }, t ? o.CA = e : o.ca = e, (n = this.attach(new Ee(o)))._resourceName = x("GS" + ++_e), i[r] = n), n }, dict: function (e) { return new Ee(e) }, name: function (e) { return x(e) }, stream: function (e, t) { return new Ie(t, e) } }, Ce = Array.isArray || function (e) { return e instanceof Array }, y.prototype.beforeRender = function () { }, Se = k(function (e) { this.value = e }, { render: function (e) { var t, i = "", n = this.value; for (t = 0; t < n.length; ++t)i += String.fromCharCode(255 & n.charCodeAt(t)); e("(", i.replace(/([\(\)\\])/g, "\\$1"), ")") }, toString: function () { return this.value } }), Te = k(function (e) { this.value = e }, { render: function (e) { var t; for (e("<"), t = 0; t < this.value.length; ++t)e(p(this.value.charCodeAt(t).toString(16), 4)); e(">") } }, Se), De = k(function (e) { this.name = e }, { render: function (e) { e("/" + this.escape()) }, escape: function () { return this.name.replace(/[^\x21-\x7E]/g, function (e) { return "#" + p(e.charCodeAt(0).toString(16), 2) }) }, toString: function () { return this.name } }), Ae = {}, De.get = x, Ee = k(function (e) { this.props = e }, { render: function (e) { var t = this.props, i = !0; e("<<"), e.withIndent(function () { for (var n in t) m(t, n) && !/^_/.test(n) && (i = !1, e.indent(x(n), " ", t[n])) }), i || e.indent(), e(">>") } }), Ie = k(function (e, i, n) { if ("string" == typeof e) { var o = t(); o.write(e), e = o } this.data = e, this.props = i || {}, this.compress = n }, { render: function (e) { var t = this.data.get(), i = this.props; this.compress && window.pako && "function" == typeof window.pako.deflate && (i.Filter ? i.Filter instanceof Array || (i.Filter = [i.Filter]) : i.Filter = [], i.Filter.unshift(x("FlateDecode")), t = window.pako.deflate(t)), i.Length = t.length, e(new Ee(i), " stream", ve), e.writeData(t), e(ve, "endstream") } }), Me = k(function (e) { (e = this.props = e || {}).Type = x("Catalog") }, { setPages: function (e) { this.props.Pages = e } }, Ee), Re = k(function () { this.props = { Type: x("Pages"), Kids: [], Count: 0 } }, { addPage: function (e) { this.props.Kids.push(e), this.props.Count++ } }, Ee), Fe = [192, 193, 194, 195, 197, 198, 199, 201, 202, 203, 205, 206, 207], ze = k(function (e) { this.props = { Type: x("Font"), Subtype: x("Type1"), BaseFont: x(e) }, this._resourceName = x("F" + ++_e) }, { encodeText: function (e) { return new Se(e + "") } }, Ee), Pe = k(function (e, t, i) { var n, o; (i = this.props = i || {}).Type = x("Font"), i.Subtype = x("Type0"), i.Encoding = x("Identity-H"), this._pdf = e, this._font = t, this._sub = t.makeSubset(), this._resourceName = x("F" + ++_e), n = t.head, this.name = t.psName, o = this.scale = t.scale, this.bbox = [n.xMin * o, n.yMin * o, n.xMax * o, n.yMax * o], this.italicAngle = t.post.italicAngle, this.ascent = t.ascent * o, this.descent = t.descent * o, this.lineGap = t.lineGap * o, this.capHeight = t.os2.capHeight || this.ascent, this.xHeight = t.os2.xHeight || 0, this.stemV = 0, this.familyClass = (t.os2.familyClass || 0) >> 8, this.isSerif = this.familyClass >= 1 && this.familyClass <= 7, this.isScript = 10 == this.familyClass, this.flags = (t.post.isFixedPitch ? 1 : 0) | (this.isSerif ? 2 : 0) | (this.isScript ? 8 : 0) | (0 !== this.italicAngle ? 64 : 0) | 32 }, { encodeText: function (e) { return new Te(this._sub.encodeText(e + "")) }, getTextWidth: function (e, t) { var i, n, o = 0, r = this._font.cmap.codeMap; for (i = 0; i < t.length; ++i)n = r[t.charCodeAt(i)], o += this._font.widthOfGlyph(n || 0); return o * e / 1e3 }, beforeRender: function () { var e, i, n, o, r = this, s = r._sub, a = s.render(), l = new Ie(t(a), { Length1: a.length }, !0), d = r._pdf.attach(new Ee({ Type: x("FontDescriptor"), FontName: x(r._sub.psName), FontBBox: r.bbox, Flags: r.flags, StemV: r.stemV, ItalicAngle: r.italicAngle, Ascent: r.ascent, Descent: r.descent, CapHeight: r.capHeight, XHeight: r.xHeight, FontFile2: r._pdf.attach(l) })), u = s.ncid2ogid, h = s.firstChar, f = s.lastChar, p = []; !function e(t, i) { if (t <= f) { var n = u[t]; null == n ? e(t + 1) : (i || p.push(t, i = []), i.push(r._font.widthOfGlyph(n)), e(t + 1, i)) } }(h), e = new Ee({ Type: x("Font"), Subtype: x("CIDFontType2"), BaseFont: x(r._sub.psName), CIDSystemInfo: new Ee({ Registry: new Se("Adobe"), Ordering: new Se("Identity"), Supplement: 0 }), FontDescriptor: d, FirstChar: h, LastChar: f, DW: Math.round(r._font.widthOfGlyph(0)), W: p, CIDToGIDMap: r._pdf.attach(r._makeCidToGidMap()) }), (i = r.props).BaseFont = x(r._sub.psName), i.DescendantFonts = [r._pdf.attach(e)], n = new Be(h, f, s.subset), (o = new Ie(c(), null, !0)).data(n), i.ToUnicode = r._pdf.attach(o) }, _makeCidToGidMap: function () { return new Ie(t(this._sub.cidToGidMap()), null, !0) } }, Ee), Be = k(function (e, t, i) { this.firstChar = e, this.lastChar = t, this.map = i }, { render: function (e) { e.indent("/CIDInit /ProcSet findresource begin"), e.indent("12 dict begin"), e.indent("begincmap"), e.indent("/CIDSystemInfo <<"), e.indent("  /Registry (Adobe)"), e.indent("  /Ordering (UCS)"), e.indent("  /Supplement 0"), e.indent(">> def"), e.indent("/CMapName /Adobe-Identity-UCS def"), e.indent("/CMapType 2 def"), e.indent("1 begincodespacerange"), e.indent("  <0000><ffff>"), e.indent("endcodespacerange"); var t = this; e.indent(t.lastChar - t.firstChar + 1, " beginbfchar"), e.withIndent(function () { var n, o, r, s; for (n = t.firstChar; n <= t.lastChar; ++n) { for (o = t.map[n], r = i([o]), e.indent("<", p(n.toString(16), 4), ">", "<"), s = 0; s < r.length; ++s)e(p(r.charCodeAt(s).toString(16), 4)); e(">") } }), e.indent("endbfchar"), e.indent("endcmap"), e.indent("CMapName currentdict /CMap defineresource pop"), e.indent("end"), e.indent("end") } }), Le = k(function (e, t) { this._pdf = e, this._rcount = 0, this._textMode = !1, this._fontResources = {}, this._gsResources = {}, this._xResources = {}, this._patResources = {}, this._shResources = {}, this._opacity = 1, this._matrix = [1, 0, 0, 1, 0, 0], this._annotations = [], this._font = null, this._fontSize = null, this._contextStack = [], (t = this.props = t || {}).Type = x("Page"), t.ProcSet = [x("PDF"), x("Text"), x("ImageB"), x("ImageC"), x("ImageI")], t.Resources = new Ee({ Font: new Ee(this._fontResources), ExtGState: new Ee(this._gsResources), XObject: new Ee(this._xResources), Pattern: new Ee(this._patResources), Shading: new Ee(this._shResources) }), t.Annots = this._annotations }, { _out: function () { this._content.data.apply(null, arguments) }, transform: function (e, t, i, n, o, r) { (function (e) { return 1 === e[0] && 0 === e[1] && 0 === e[2] && 1 === e[3] && 0 === e[4] && 0 === e[5] })(arguments) || (this._matrix = function (e, t) { var i = e[0], n = e[1], o = e[2], r = e[3], s = e[4], a = e[5], l = t[0], c = t[1], d = t[2], u = t[3], h = t[4], f = t[5]; return [i * l + n * d, i * c + n * u, o * l + r * d, o * c + r * u, s * l + a * d + h, s * c + a * u + f] }(arguments, this._matrix), this._out(e, " ", t, " ", i, " ", n, " ", o, " ", r, " cm"), this._out(ve)) }, translate: function (e, t) { this.transform(1, 0, 0, 1, e, t) }, scale: function (e, t) { this.transform(e, 0, 0, t, 0, 0) }, rotate: function (e) { var t = Math.cos(e), i = Math.sin(e); this.transform(t, i, -i, t, 0, 0) }, beginText: function () { this._textMode = !0, this._out("BT", ve) }, endText: function () { this._textMode = !1, this._out("ET", ve) }, _requireTextMode: function () { if (!this._textMode) throw Error("Text mode required; call page.beginText() first") }, _requireFont: function () { if (!this._font) throw Error("No font selected; call page.setFont() first") }, setFont: function (e, t) { this._requireTextMode(), null == e ? e = this._font : e instanceof Pe || (e = this._pdf.getFont(e)), null == t && (t = this._fontSize), this._fontResources[e._resourceName] = e, this._font = e, this._fontSize = t, this._out(e._resourceName, " ", t, " Tf", ve) }, setTextLeading: function (e) { this._requireTextMode(), this._out(e, " TL", ve) }, setTextRenderingMode: function (e) { this._requireTextMode(), this._out(e, " Tr", ve) }, showText: function (e, t) { var i, n; this._requireFont(), e.length > 1 && t && this._font instanceof Pe && (i = this._font.getTextWidth(this._fontSize, e), n = t / i * 100, this._out(n, " Tz ")), this._out(this._font.encodeText(e), " Tj", ve) }, showTextNL: function (e) { this._requireFont(), this._out(this._font.encodeText(e), " '", ve) }, addLink: function (e, t) { var i = this._toPage({ x: t.left, y: t.bottom }), n = this._toPage({ x: t.right, y: t.top }); this._annotations.push(new Ee({ Type: x("Annot"), Subtype: x("Link"), Rect: [i.x, i.y, n.x, n.y], Border: [0, 0, 0], A: new Ee({ Type: x("Action"), S: x("URI"), URI: new Se(e) }) })) }, setStrokeColor: function (e, t, i) { this._out(e, " ", t, " ", i, " RG", ve) }, setOpacity: function (e) { this.setFillOpacity(e), this.setStrokeOpacity(e), this._opacity *= e }, setStrokeOpacity: function (e) { if (e < 1) { var t = this._pdf.getOpacityGS(this._opacity * e, !0); this._gsResources[t._resourceName] = t, this._out(t._resourceName, " gs", ve) } }, setFillColor: function (e, t, i) { this._out(e, " ", t, " ", i, " rg", ve) }, setFillOpacity: function (e) { if (e < 1) { var t = this._pdf.getOpacityGS(this._opacity * e, !1); this._gsResources[t._resourceName] = t, this._out(t._resourceName, " gs", ve) } }, gradient: function (e, t) { var i, n, o; this.save(), this.rect(t.left, t.top, t.width, t.height), this.clip(), e.userSpace || this.transform(t.width, 0, 0, t.height, t.left, t.top), i = A(this._pdf, e, t), n = i.shading._resourceName, this._shResources[n] = i.shading, i.hasAlpha && (o = i.opacity._resourceName, this._gsResources[o] = i.opacity, this._out("/" + o + " gs ")), this._out("/" + n + " sh", ve), this.restore() }, setDashPattern: function (e, t) { this._out(e, " ", t, " d", ve) }, setLineWidth: function (e) { this._out(e, " w", ve) }, setLineCap: function (e) { this._out(e, " J", ve) }, setLineJoin: function (e) { this._out(e, " j", ve) }, setMitterLimit: function (e) { this._out(e, " M", ve) }, save: function () { this._contextStack.push(this._context()), this._out("q", ve) }, restore: function () { this._out("Q", ve), this._context(this._contextStack.pop()) }, moveTo: function (e, t) { this._out(e, " ", t, " m", ve) }, lineTo: function (e, t) { this._out(e, " ", t, " l", ve) }, bezier: function (e, t, i, n, o, r) { this._out(e, " ", t, " ", i, " ", n, " ", o, " ", r, " c", ve) }, bezier1: function (e, t, i, n) { this._out(e, " ", t, " ", i, " ", n, " y", ve) }, bezier2: function (e, t, i, n) { this._out(e, " ", t, " ", i, " ", n, " v", ve) }, close: function () { this._out("h", ve) }, rect: function (e, t, i, n) { this._out(e, " ", t, " ", i, " ", n, " re", ve) }, ellipse: function (e, t, i, n) { function o(t) { return e + t } function r(e) { return t + e } var s = .5522847498307936; this.moveTo(o(0), r(n)), this.bezier(o(i * s), r(n), o(i), r(n * s), o(i), r(0)), this.bezier(o(i), r(-n * s), o(i * s), r(-n), o(0), r(-n)), this.bezier(o(-i * s), r(-n), o(-i), r(-n * s), o(-i), r(0)), this.bezier(o(-i), r(n * s), o(-i * s), r(n), o(0), r(n)) }, circle: function (e, t, i) { this.ellipse(e, t, i, i) }, stroke: function () { this._out("S", ve) }, nop: function () { this._out("n", ve) }, clip: function () { this._out("W n", ve) }, clipStroke: function () { this._out("W S", ve) }, closeStroke: function () { this._out("s", ve) }, fill: function () { this._out("f", ve) }, fillStroke: function () { this._out("B", ve) }, drawImage: function (e) { var t = this._pdf.getImage(e); t && (this._xResources[t._resourceName] = t, this._out(t._resourceName, " Do", ve)) }, comment: function (e) { var t = this; e.split(/\r?\n/g).forEach(function (e) { t._out("% ", e, ve) }) }, _context: function (e) { return null == e ? { opacity: this._opacity, matrix: this._matrix } : (this._opacity = e.opacity, void (this._matrix = e.matrix)) }, _toPage: function (e) { var t = this._matrix, i = t[0], n = t[1], o = t[2], r = t[3], s = t[4], a = t[5]; return { x: i * e.x + o * e.y + s, y: n * e.x + r * e.y + a } } }, Ee), He = { serif: "Times-Roman", "serif|bold": "Times-Bold", "serif|italic": "Times-Italic", "serif|bold|italic": "Times-BoldItalic", "sans-serif": "Helvetica", "sans-serif|bold": "Helvetica-Bold", "sans-serif|italic": "Helvetica-Oblique", "sans-serif|bold|italic": "Helvetica-BoldOblique", monospace: "Courier", "monospace|bold": "Courier-Bold", "monospace|italic": "Courier-Oblique", "monospace|bold|italic": "Courier-BoldOblique", zapfdingbats: "ZapfDingbats", "zapfdingbats|bold": "ZapfDingbats", "zapfdingbats|italic": "ZapfDingbats", "zapfdingbats|bold|italic": "ZapfDingbats" }, R("Times New Roman", "serif"), R("Courier New", "monospace"), R("Arial", "sans-serif"), R("Helvetica", "sans-serif"), R("Verdana", "sans-serif"), R("Tahoma", "sans-serif"), R("Georgia", "sans-serif"), R("Monaco", "monospace"), R("Andale Mono", "monospace"), Oe = Ne = { fill: 0, stroke: 1, fillAndStroke: 2, invisible: 3, fillAndClip: 4, strokeAndClip: 5, fillStrokeClip: 6, clip: 7 }, Ve = { dash: [4], dashDot: [4, 2, 1, 2], dot: [1, 2], longDash: [8, 2], longDashDot: [8, 2, 1, 2], longDashDotDot: [8, 2, 1, 2, 1, 2], solid: [] }, Ue = { butt: 0, round: 1, square: 2 }, We = { miter: 0, round: 1, bevel: 2 }, e.deepExtend(e.pdf, { Document: u, BinaryStream: t, defineFont: function e(t, i) { if (1 == arguments.length) for (var n in t) m(t, n) && e(n, t[n]); else switch (t = t.toLowerCase(), He[t] = i, t) { case "dejavu sans": He["sans-serif"] = i; break; case "dejavu sans|bold": He["sans-serif|bold"] = i; break; case "dejavu sans|italic": He["sans-serif|italic"] = i; break; case "dejavu sans|bold|italic": He["sans-serif|bold|italic"] = i; break; case "dejavu serif": He.serif = i; break; case "dejavu serif|bold": He["serif|bold"] = i; break; case "dejavu serif|italic": He["serif|italic"] = i; break; case "dejavu serif|bold|italic": He["serif|bold|italic"] = i; break; case "dejavu mono": He.monospace = i; break; case "dejavu mono|bold": He["monospace|bold"] = i; break; case "dejavu mono|italic": He["monospace|italic"] = i; break; case "dejavu mono|bold|italic": He["monospace|bold|italic"] = i } }, parseFontDef: I, getFontURL: M, loadFonts: ke, loadImages: xe, getPaperOptions: d, TEXT_RENDERING_MODE: Ne, exportPDF: function (e, t) { var i, n = ee.createPromise(); for (i in t) "margin" == i && e.options.pdf && e.options.pdf._ignoreMargin || e.options.set("pdf." + i, t[i]); return z(e, n.resolve), n }, saveAs: function (t, i, n, o) { window.Blob && !Z.safari ? P(t, function (t) { e.saveAs({ dataURI: t, fileName: i }), o && o(t) }) : z(t, function (t) { e.saveAs({ dataURI: t, fileName: i, proxyURL: n }), o && o(t) }) }, toDataURL: z, toBlob: P, render: F }), e.drawing.exportPDF = e.pdf.exportPDF, e.drawing.pdf = e.pdf }(kendo), kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("pdf/mixins.min", ["pdf/core.min"], function () { return e = window.kendo.jQuery, kendo.PDFMixin = { extend: function (e) { e.events.push("pdfExport"), e.options.pdf = this.options, e.saveAsPDF = this.saveAsPDF, e._drawPDF = this._drawPDF, e._drawPDFShadow = this._drawPDFShadow }, options: { fileName: "Export.pdf", proxyURL: "", paperSize: "auto", allPages: !1, landscape: !1, margin: null, title: null, author: null, subject: null, keywords: null, creator: "Kendo UI PDF Generator v." + kendo.version, date: null }, saveAsPDF: function () { var t, i = new e.Deferred, n = i.promise(), o = { promise: n }; if (!this.trigger("pdfExport", o)) return (t = this.options.pdf).multiPage = t.multiPage || t.allPages, this._drawPDF(i).then(function (e) { return kendo.drawing.exportPDF(e, t) }).done(function (e) { kendo.saveAs({ dataURI: e, fileName: t.fileName, proxyURL: t.proxyURL, forceProxy: t.forceProxy, proxyTarget: t.proxyTarget }), i.resolve() }).fail(function (e) { i.reject(e) }), n }, _drawPDF: function (t) { var i = new e.Deferred; return kendo.drawing.drawDOM(this.wrapper).done(function (e) { var n = { page: e, pageNumber: 1, progress: 1, totalPages: 1 }; t.notify(n), i.resolve(n.page) }).fail(function (e) { i.reject(e) }), i }, _drawPDFShadow: function (t, i) { var n, o, r; return t = t || {}, n = this.wrapper, o = e("<div class='k-pdf-export-shadow'>"), t.width && o.css({ width: t.width, overflow: "visible" }), n.before(o), o.append(t.content || n.clone(!0, !0)), r = e.Deferred(), setTimeout(function () { var e = kendo.drawing.drawDOM(o, i); e.always(function () { o.remove() }).then(function () { r.resolve.apply(r, arguments) }).fail(function () { r.reject.apply(r, arguments) }).progress(function () { r.progress.apply(r, arguments) }) }, 15), r.promise() } }, window.kendo; var e }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.pdf.min", ["kendo.core.min", "kendo.drawing.min", "pdf/core.min", "pdf/mixins.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.grid.min", ["kendo.data.min", "kendo.columnsorter.min", "kendo.editable.min", "kendo.window.min", "kendo.filtermenu.min", "kendo.columnmenu.min", "kendo.groupable.min", "kendo.pager.min", "kendo.selectable.min", "kendo.sortable.min", "kendo.reorderable.min", "kendo.resizable.min", "kendo.mobile.actionsheet.min", "kendo.mobile.pane.min", "kendo.ooxml.min", "kendo.excel.min", "kendo.progressbar.min", "kendo.pdf.min"], function () { return function (e, t) { function i(e) { return Array(e + 1).join('<td class="k-group-cell">&nbsp;</td>') } function n(e) { var t, i = " "; if (e) { if (typeof e === tt) return e; for (t in e) i += t + '="' + e[t] + '"' } return i } function o(t, i) { e("th, th .k-grid-filter, th .k-link", t).add(document.body).css("cursor", i) } function r(t, i, n, o, r) { var s, a = i; for (i = e(), r = r || 1, s = 0; s < r; s++)i = i.add(t.eq(a + s)); "number" == typeof n ? i[o ? "insertBefore" : "insertAfter"](t.eq(n)) : i.appendTo(n) } function s(t, i, n) { return e(t).add(i).find(n) } function a(e, t, i) { var n, o, r, s; for (i = he(i) ? i : [i], n = 0, o = i.length; n < o; n++)r = i[n], le(r) && r.click && (s = r.name || r.text, t.on(Xe + Te, "a.k-grid-" + (s || "").replace(/\s/g, ""), { commandName: s }, me(r.click, e))) } function l(e, t) { var i = []; return c(e, t, i), i[i.length - 1] } function c(e, t, i) { var n, o; for (i = i || [], n = 0; n < t.length; n++) { if (e === t[n]) return !0; if (t[n].columns) { if (o = i.length, i.push(t[n]), c(e, t[n].columns, i)) return !0; i.splice(o, i.length - o) } } return !1 } function d(e, t) { var i = t ? L : B; e.hidden = !t, e.attributes = i(e.attributes), e.footerAttributes = i(e.footerAttributes), e.headerAttributes = i(e.headerAttributes) } function u() { return "none" !== this.style.display } function h(e) { return f([e]).length > 0 } function f(e) { return ue(e, function (e) { var t = !e.hidden; return t && e.columns && (t = f(e.columns).length > 0), t }) } function p(t) { return e(t).map(function () { return this.toArray() }) } function m(t, i, n, o, r, s, a) { var l, c, d = v(t), u = v([i]); d > u && (l = Array(a + 1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'), c = s.children(":not(.k-filter-row)"), e(Array(d - u + 1).join("<tr>" + l + "</tr>")).insertAfter(c.last())), function (e, t) { var i, n = e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"); for (i = 0; i < n.length; i++)n[i].rowSpan += t }(s, d - u), function t(i, n, o, r) { var s, a, l = w(i[0], n), c = o.find(">tr:not(.k-filter-row):eq(" + l.row + ")>th.k-header"), d = e(), u = l.cell; for (s = 0; s < i.length; s++)d = d.add(c.eq(u + s)); for (r.find(">tr:not(.k-filter-row)").eq(l.row).append(d), a = [], s = 0; s < i.length; s++)i[s].columns && (a = a.concat(i[s].columns)); a.length && t(a, n, o, r) }(n, o, r, s) } function g(t, i, n) { var o, r, s, a, l, c, d; for (n = n || 0, r = i, i = R(i), s = {}, a = t.find(">tr:not(.k-filter-row)"), l = function () { var t = e(this); return !t.hasClass("k-group-cell") && !t.hasClass("k-hierarchy-cell") }, c = 0, d = i.length; c < d; c++)o = _(i[c], r), s[o.row] || (s[o.row] = a.eq(o.row).find(".k-header").filter(l)), s[o.row].eq(o.cell).attr(J.attr("index"), n + c); return i.length } function v(e) { var t, i, n = 0; for (t = 0; t < e.length; t++)e[t].columns && ((i = v(e[t].columns)) > n && (n = i)); return 1 + n } function _(e, t, i, n) { var o, r; for ((n = n || {})[i = i || 0] = n[i] || 0, r = 0; r < t.length; r++) { if (t[r] == e) { o = { cell: n[i], row: i }; break } if (t[r].columns && (o = _(e, t[r].columns, i + 1, n))) break; n[i]++ } return o } function b(e, t, i, n) { var o, r, s, a; return t.columns ? (t = t.columns)[n ? 0 : t.length - 1] : (o = l(t, e), r = o ? o.columns : e, 0 === (s = fe(t, r)) && n ? s++ : s != r.length - 1 || n ? (s > 0 || 0 === s && !n) && (s += n ? -1 : 1) : s--, a = fe(i, r), (t = function (e, t, i, n) { var o, r = i.locked; do { o = e[t], t += n ? 1 : -1 } while (o && t > -1 && t < e.length && o != i && !o.columns && o.locked == r); return o }(r, s, i, a > s)) && t != i && t.columns ? b(e, t, i, n) : null) } function w(e, t, i, n) { var o, r; for ((n = n || {})[i = i || 0] = n[i] || 0, r = 0; r < t.length; r++) { if (t[r] == e) { o = { cell: n[i], row: i }; break } if (t[r].columns && (o = w(e, t[r].columns, i + 1, n))) break; t[r].hidden || n[i]++ } return o } function y(e) { var t = k(D(e)); return t.concat(k(A(e))) } function k(e) { var t, i = [], n = []; for (t = 0; t < e.length; t++)i.push(e[t]), e[t].columns && (n = n.concat(e[t].columns)); return n.length && (i = i.concat(k(n))), i } function x(e) { var t, i, n = 0; for (i = 0; i < e.length; i++)(t = e[i]).columns ? n += x(t.columns) : t.hidden && n++; return n } function C(e) { var t, i, n, o = 0; for (i = 0, n = e.length; i < n; i++)(t = e[i].style.width) && -1 == t.indexOf("%") && (o += parseInt(t, 10)); return o } function S(t) { var i, n = t.find("tr:not(.k-filter-row)"), o = n.filter(function () { return !e(this).children().length }).remove().length, r = n.find("th:not(.k-group-cell,.k-hierarchy-cell)"); for (i = 0; i < r.length; i++)r[i].rowSpan > 1 && (r[i].rowSpan -= o); return n.length - o } function T(e, t, i, n, o) { var r, s, a, l = []; for (r = 0, a = e.length; r < a; r++)(s = i[n] || []).push(t.eq(o + r)), i[n] = s, e[r].columns && (l = l.concat(e[r].columns)); l.length && T(l, t, i, n + 1, o + e.length) } function D(e) { return ue(e, function (e) { return e.locked }) } function A(e) { return ue(e, function (e) { return !e.locked }) } function E(e) { return ue(e, function (e) { return !e.locked && h(e) }) } function I(e) { return ue(e, function (e) { return e.locked && h(e) }) } function M(e) { var t, i = []; for (t = 0; t < e.length; t++)e[t].hidden || (e[t].columns ? i = i.concat(M(e[t].columns)) : i.push(e[t])); return i } function R(e) { var t, i = []; for (t = 0; t < e.length; t++)e[t].columns ? i = i.concat(R(e[t].columns)) : i.push(e[t]); return i } function F(i) { var n, o = i.find(">tr:not(.k-filter-row)"), r = function () { var t = e(this); return !t.hasClass("k-group-cell") && !t.hasClass("k-hierarchy-cell") }, s = e(); return o.length > 1 && (s = o.find("th").filter(r).filter(function () { return this.rowSpan > 1 })), s = s.add(o.last().find("th").filter(r)), n = J.attr("index"), s.sort(function (i, o) { var r, s; return i = e(i), o = e(o), r = i.attr(n), s = o.attr(n), r === t && (r = e(i).index()), s === t && (s = e(o).index()), r = parseInt(r, 10), s = parseInt(s, 10), r > s ? 1 : r < s ? -1 : 0 }), s } function z(t) { var i, n, o, r, s, a, l, c = t.closest("thead"), d = e().add(t), u = t.closest("tr"), h = c.find("tr:not(.k-filter-row)"), f = h.index(u) + t[0].rowSpan, p = J.attr("colspan"); if (f <= h.length - 1) { for (i = u.next(), n = (n = t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)")).filter(function () { return !this.rowSpan || 1 === this.rowSpan }), r = 0, o = 0; o < n.length; o++)r += parseInt(n.eq(o).attr(p), 10) || 1; for (s = i.find("th:not(.k-group-cell,.k-hierarchy-cell)"), a = parseInt(t.attr(p), 10) || 1, o = 0; o < a;)i = s.eq(o + r), d = d.add(z(i)), (l = parseInt(i.attr(p), 10)) > 1 && (a -= l - 1), o++ } return d } function P(t, i, n, o) { var r, s = t; return o && t.empty(), ie ? t[0].innerHTML = n : ((r = document.createElement("div")).innerHTML = "<table><tbody>" + n + "</tbody></table>", t = r.firstChild.firstChild, i[0].replaceChild(t, s[0]), t = e(t)), t } function B(e) { var t = (e = e || {}).style; return t ? (t = t.replace(/((.*)?display)(.*)?:([^;]*)/i, "$1:none")) === e.style && (t = t.replace(/(.*)?/i, "display:none;$1")) : t = "display:none", ce({}, e, { style: t }) } function L(e) { var t = (e = e || {}).style; return t && (e.style = t.replace(/(display\s*:\s*none\s*;?)*/gi, "")), e } function H(t, i, n, o) { var r, s = t.find(">colgroup"), a = de(i, function (e) { return (r = e.width) && 0 !== parseInt(r, 10) ? J.format('<col style="width:{0}"/>', typeof r === tt ? r : r + "px") : "<col />" }); (n || s.find(".k-hierarchy-col").length) && a.splice(0, 0, '<col class="k-hierarchy-col" />'), s.length && s.remove(), (s = e(Array(o + 1).join('<col class="k-group-col">') + a.join(""))).is("colgroup") || (s = e("<colgroup/>").append(s)), t.prepend(s), ut.msie && 8 == ut.version && (t.css("display", "inline-table"), window.setTimeout(function () { t.css("display", "") }, 1)) } function N(e) { var t, i, n, o = {}; for (i = 0, n = e.length; i < n; i++)t = e[i], o[t.value] = t.text; return o } function O(e, t, i) { for (var n = 0, o = e[n]; o;) { if ((!!i || "none" !== o.style.display) && !lt.test(o.className) && --t < 0) { o.style.display = i ? "" : "none"; break } o = e[++n] } } function V(t, i) { for (var n, o, r = 0, s = t.length; r < s; r += 1)(o = t.eq(r)).is(".k-grouping-row,.k-detail-row") ? (n = o.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan", parseInt(n.attr("colspan"), 10) - 1) : (o.hasClass("k-grid-edit-row") && (n = o.children(".k-edit-container")[0]) && ((n = e(n)).attr("colspan", parseInt(n.attr("colspan"), 10) - 1), n.find("col").eq(i).remove(), o = n.find("tr:first")), O(o[0].cells, i, !1)) } function U(t, i) { for (var n, o, r = 0, s = t.length; r < s; r += 1)(o = t.eq(r)).is(".k-grouping-row,.k-detail-row") ? (n = o.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan", parseInt(n.attr("colspan"), 10) + 1) : (o.hasClass("k-grid-edit-row") && (n = o.children(".k-edit-container")[0]) && ((n = e(n)).attr("colspan", parseInt(n.attr("colspan"), 10) + 1), H(n.find(">form>table"), f(void 0), !1, 0), o = n.find("tr:first")), O(o[0].cells, i, !0)) } function W(e, t, i) { var n, o, r; for (i = i || 1, o = 0, r = e.length; o < r; o++)(n = e.eq(o).children().last()).attr("colspan", parseInt(n.attr("colspan"), 10) + i), (n = t.eq(o).children().last()).attr("colspan", parseInt(n.attr("colspan"), 10) - i) } function q(e) { var t, i, n = 0, o = e.find(">colgroup>col"); for (t = 0, i = o.length; t < i; t += 1)n += parseInt(o[t].style.width, 10); return n } function j(e, t) { var i, n = e.offsetHeight, o = t.offsetHeight; n > o ? i = n + "px" : n < o && (i = o + "px"), i && (e.style.height = t.style.height = i) } function G(e, t) { var i, n, o; if (typeof e === tt && e === t) return e; if (le(e) && e.name === t) return e; if (he(e)) for (i = 0, n = e.length; i < n; i++)if (typeof (o = e[i]) === tt && o === t || o.name === t) return o; return null } function $(t, i) { var n, o, r = ut.msie || ut.edge; if (!0 === i) { if (t = e(t), n = t.parent().scrollTop(), o = t.parent().scrollLeft(), r) try { t[0].setActive() } catch (e) { t[0].focus() } else t[0].focus(); t.parent().scrollTop(n).scrollLeft(o) } else e(t).one("focusin", function (e) { e.preventDefault() }).focus() } function Y(e, t) { return !(!e.field || t.editable && !t.editable(e.field) || e.editable && !e.editable(t)) } function K(t) { return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon") } function Q(i) { var n = e(i.currentTarget), o = n.is("th"), r = this.table.add(this.lockedTable), s = this.thead.parent().add(e(">table", this.lockedHeader)), a = K(i.target), l = n.closest("table")[0]; if (!J.support.touch) return a && n.find(J.roleSelector("filtercell")).length ? (this._setCurrent(n), t) : (l !== r[0] && l !== r[1] && l !== s[0] && l !== s[1] || e(i.target).is("a.k-i-expand, a.k-i-collapse") || (this.options.navigatable && this._setCurrent(n), !o && a || setTimeout(function () { ft && e(J._activeElement()).hasClass("k-widget") || K(J._activeElement()) || $(l, !0) }), o && i.preventDefault()), t) } function X(e, t, n) { return '<tr role="row" class="k-grouping-row">' + i(t) + '<td colspan="' + e + '" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1" ' + ot + '="' + it + '"></a>' + n + "</p></td></tr>" } function Z(e) { return '<tr role="row" class="k-grouping-row"><td colspan="' + e + '" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>' } var J = window.kendo, ee = J.ui, te = J.data.DataSource, ie = J.support.tbodyInnerHtml, ne = J._activeElement, oe = ee.Widget, re = J._outerWidth, se = J._outerHeight, ae = J.keys, le = e.isPlainObject, ce = e.extend, de = e.map, ue = e.grep, he = e.isArray, fe = e.inArray, pe = Array.prototype.push, me = e.proxy, ge = J.isFunction, ve = e.isEmptyObject, _e = Math, be = "progress", we = "error", ye = ":not(.k-group-cell):not(.k-hierarchy-cell):visible", ke = "tr:not(.k-footer-template):visible", xe = ":not(.k-group-cell):not(.k-hierarchy-cell):visible", Ce = ke + ":first>" + xe + ":first", Se = "th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)", Te = ".kendoGrid", De = "edit", Ae = "beforeEdit", Ee = "save", Ie = "detailInit", Me = "filterMenuInit", Re = "columnMenuInit", Fe = "filterMenuOpen", ze = "columnMenuOpen", Pe = "cellClose", Be = "change", Le = "columnHide", He = "columnShow", Ne = "saveChanges", Oe = "dataBound", Ve = "detailExpand", Ue = "detailCollapse", We = "k-state-focused", qe = "k-state-selected", je = "k-grid-norecords", Ge = "columnResize", $e = "columnReorder", Ye = "columnLock", Ke = "columnUnlock", Qe = "navigate", Xe = "click", Ze = "height", Je = "tabIndex", et = "function", tt = "string", it = "Collapse", nt = "Expand", ot = "aria-label", rt = /(\}|\#)/gi, st = /#/gi, at = "[\\x20\\t\\r\\n\\f]", lt = RegExp("(^|" + at + ")(k-group-cell|k-hierarchy-cell)(" + at + "|$)"), ct = RegExp("(^|" + at + ")(k-filter-row)(" + at + "|$)"), dt = !1, ut = J.support.browser, ht = ut.msie && 7 == ut.version, ft = ut.msie && 8 == ut.version, pt = oe.extend({ init: function (e, t) { var i = this; oe.fn.init.call(i, e, t), i._refreshHandler = me(i.refresh, i), i.setDataSource(t.dataSource), i.wrap() }, setDataSource: function (e) { var t = this; t.dataSource && t.dataSource.unbind(Be, t._refreshHandler), t.dataSource = e, t.dataSource.bind(Be, t._refreshHandler) }, options: { name: "VirtualScrollable", itemHeight: e.noop, prefetch: !0 }, destroy: function () { var e = this; oe.fn.destroy.call(e), e.dataSource.unbind(Be, e._refreshHandler), e.wrapper.add(e.verticalScrollbar).off(Te), e.drag && (e.drag.destroy(), e.drag = null), e.wrapper = e.element = e.verticalScrollbar = null, e._refreshHandler = null }, wrap: function () { var t, i = this, n = J.support.scrollbar() + 1, o = i.element; o.css({ width: "auto", overflow: "hidden" }).css(dt ? "padding-left" : "padding-right", n), i.content = o.children().first(), t = i.wrapper = i.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll" + Te + " mousewheel" + Te, me(i._wheelScroll, i)), J.support.kineticScrollNeeded && (i.drag = new J.UserEvents(i.wrapper, { global: !0, start: function (e) { e.sender.capture() }, move: function (e) { i.verticalScrollbar.scrollTop(i.verticalScrollbar.scrollTop() - e.y.delta), t.scrollLeft(t.scrollLeft() - e.x.delta), e.preventDefault() } })), i.verticalScrollbar = e('<div class="k-scrollbar k-scrollbar-vertical" />').css({ width: n }).appendTo(o).bind("scroll" + Te, me(i._scroll, i)) }, _wheelScroll: function (e) { if (!e.ctrlKey) { var t = this.verticalScrollbar, i = t.scrollTop(), n = J.wheelDeltaY(e); !n || n > 0 && 0 === i || n < 0 && i + t[0].clientHeight == t[0].scrollHeight || (e.preventDefault(), this.verticalScrollbar.scrollTop(i + -n)) } }, _scroll: function (e) { var t = this, i = !t.options.prefetch, n = e.currentTarget.scrollTop, o = t.dataSource, r = t.itemHeight, s = o.skip() || 0, a = t._rangeStart || s, l = t.element.innerHeight(), c = !!(t._scrollbarTop && t._scrollbarTop > n), d = _e.max(_e.floor(n / r), 0), u = _e.max(d + _e.floor(l / r), 0); t._scrollTop = n - a * r, t._scrollbarTop = n, t._scrolling = i, t._fetch(d, u, c) || (t.wrapper[0].scrollTop = t._scrollTop), i && (t._scrollingTimeout && clearTimeout(t._scrollingTimeout), t._scrollingTimeout = setTimeout(function () { t._scrolling = !1, t._page(t._rangeStart, t.dataSource.take()) }, 100)) }, itemIndex: function (e) { var t = this._rangeStart || this.dataSource.skip() || 0; return t + e }, position: function (e) { var t, i = this._rangeStart || this.dataSource.skip() || 0, n = this.dataSource.pageSize(); return (t = e > i ? e - i + 1 : i - e - 1) > n ? n : t }, scrollIntoView: function (e) { var t = this.wrapper[0], i = t.clientHeight, n = this._scrollTop || t.scrollTop, o = e[0].offsetTop, r = e[0].offsetHeight; n > o ? this.verticalScrollbar[0].scrollTop -= i / 2 : o + r >= n + i && (this.verticalScrollbar[0].scrollTop += i / 2) }, _fetch: function (t, i, n) { var o = this, r = o.dataSource, s = o.itemHeight, a = r.take(), l = o._rangeStart || r.skip() || 0, c = _e.floor(t / a) * a, d = !1; return t < l ? (d = !0, l = _e.max(0, i - a), o._scrollTop = (t - l) * s, o._page(l, a)) : i >= l + a && !n ? (d = !0, l = t, o._scrollTop = s, o._page(l, a)) : !o._fetching && o.options.prefetch && (t < c + a - .33 * a && t > a && r.prefetch(c - a, a, e.noop), i > c + .33 * a && r.prefetch(c + a, a, e.noop)), d }, fetching: function () { return this._fetching }, _page: function (e, t) { var i = this, n = !i.options.prefetch, o = i.dataSource; clearTimeout(i._timeout), i._fetching = !0, i._rangeStart = e, o.inRange(e, t) ? o.range(e, t) : (n || J.ui.progress(i.wrapper.parent(), !0), i._timeout = setTimeout(function () { i._scrolling || (n && J.ui.progress(i.wrapper.parent(), !0), o.range(e, t)) }, 100)) }, repaintScrollbar: function () { var e, t = this, i = "", n = 25e4, o = t.dataSource, r = J.support.kineticScrollNeeded ? 0 : J.support.scrollbar(), s = t.wrapper[0], a = t.itemHeight = t.options.itemHeight() || 0, l = s.scrollWidth > s.offsetWidth ? r : 0, c = o.total() * a + l; for (e = 0; e < _e.floor(c / n); e++)i += '<div style="width:1px;height:' + n + 'px"></div>'; c % n && (i += '<div style="width:1px;height:' + c % n + 'px"></div>'), t.verticalScrollbar.html(i), s.scrollTop = t._scrollTop }, refresh: function () { var e = this, t = e.dataSource, i = e._rangeStart; J.ui.progress(e.wrapper.parent(), !1), clearTimeout(e._timeout), e.repaintScrollbar(), e.drag && e.drag.cancel(), i && !e._fetching && (e._rangeStart = t.skip(), 1 === t.page() && (e.verticalScrollbar[0].scrollTop = 0)), e._fetching = !1 } }), mt = { create: { text: "Add new record", imageClass: "k-i-plus", className: "k-grid-add", iconClass: "k-icon" }, cancel: { text: "Cancel changes", imageClass: "k-i-cancel", className: "k-grid-cancel-changes", iconClass: "k-icon" }, save: { text: "Save changes", imageClass: "k-i-check", className: "k-grid-save-changes", iconClass: "k-icon" }, destroy: { text: "Delete", imageClass: "k-i-close", className: "k-grid-delete", iconClass: "k-icon" }, edit: { text: "Edit", imageClass: "k-i-edit", className: "k-grid-edit", iconClass: "k-icon" }, update: { text: "Update", imageClass: "k-i-check", className: "k-primary k-grid-update", iconClass: "k-icon" }, canceledit: { text: "Cancel", imageClass: "k-i-cancel", className: "k-grid-cancel", iconClass: "k-icon" }, excel: { text: "Export to Excel", imageClass: "k-i-file-excel", className: "k-grid-excel", iconClass: "k-icon" }, pdf: { text: "Export to PDF", imageClass: "k-i-file-pdf", className: "k-grid-pdf", iconClass: "k-icon" } }, gt = J.ui.DataBoundWidget.extend({ init: function (t, i, n) { var o = this; i = he(i) ? { dataSource: i } : i, oe.fn.init.call(o, t, i), n && (o._events = n), dt = J.support.isRtl(t), o._element(), o._aria(), o._columns(o.options.columns), o._dataSource(), o._tbody(), o._pageable(), o._thead(), o._groupable(), o._toolbar(), o._setContentHeight(), o._templates(), o._navigatable(), o._selectable(), o._clipboard(), o._details(), o._editable(), o._attachCustomCommandsEvent(), o._minScreenSupport(), o.options.autoBind ? o.dataSource.fetch() : (o._group = o._groups() > 0, o._footer()), o.lockedContent && (o.wrapper.addClass("k-grid-lockedcolumns"), o._resizeHandler = function () { o.resize() }, e(window).on("resize" + Te, o._resizeHandler)), J.notify(o) }, events: [Be, "dataBinding", "cancel", Oe, Ve, Ue, Ie, Me, Fe, Re, ze, De, Ae, Ee, "remove", Ne, Pe, Ge, $e, He, Le, Ye, Ke, Qe, "page", "sort", "filter", "group"], setDataSource: function (e) { var t = this, i = t.options.scrollable; t.options.dataSource = e, t._dataSource(), t._pageable(), t._thead(), i && (i.virtual ? t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0) : t.content.scrollLeft(0)), t.options.groupable && t._groupable(), t.virtualScrollable && t.virtualScrollable.setDataSource(t.options.dataSource), t.options.navigatable && t._navigatable(), t.options.selectable && t._selectable(), t.options.autoBind && e.fetch() }, options: { name: "Grid", columns: [], toolbar: null, autoBind: !0, filterable: !1, scrollable: !0, sortable: !1, selectable: !1, allowCopy: !1, navigatable: !1, pageable: !1, persistSelection: !1, editable: !1, groupable: !1, rowTemplate: "", altRowTemplate: "", noRecords: !1, dataSource: {}, height: null, resizable: !1, reorderable: !1, columnMenu: !1, detailTemplate: null, columnResizeHandleWidth: 3, mobile: "", messages: { editable: { cancelDelete: "Cancel", confirmation: "Are you sure you want to delete this record?", confirmDelete: "Delete" }, commands: { create: mt.create.text, cancel: mt.cancel.text, save: mt.save.text, destroy: mt.destroy.text, edit: mt.edit.text, update: mt.update.text, canceledit: mt.canceledit.text, excel: mt.excel.text, pdf: mt.pdf.text }, noRecords: "No records available.", expandCollapseColumnHeader: "" } }, destroy: function () { var t, i = this; i._angularItems("cleanup"), i._destroyColumnAttachments(), oe.fn.destroy.call(i), this._navigatableTables = null, i._resizeHandler && e(window).off("resize" + Te, i._resizeHandler), i.pager && i.pager.element && i.pager.destroy(), i.pager = null, i.groupable && i.groupable.element && i.groupable.element.kendoGroupable("destroy"), i.groupable = null, i.options.reorderable && i.wrapper.data("kendoReorderable").destroy(), i.selectable && i.selectable.element && (i.selectable.destroy(), i.clearArea(), !0 === i.options.persistSelection && (i._selectedIds = null), i.copyHandler && (i.wrapper.off("keydown", i.copyHandler), i.unbind(i.copyHandler)), i.updateClipBoardState && (i.unbind(i.updateClipBoardState), i.updateClipBoardState = null), i.clearAreaHandler && i.wrapper.off("keyup", i.clearAreaHandler)), i.selectable = null, i.resizable && (i.resizable.destroy(), i._resizeUserEvents && (i._resizeHandleDocumentClickHandler && e(document).off("click", i._resizeHandleDocumentClickHandler), i._resizeUserEvents.destroy(), i._resizeUserEvents = null), i.resizable = null), i.virtualScrollable && i.virtualScrollable.element && i.virtualScrollable.destroy(), i.virtualScrollable = null, i._destroyEditable(), i.dataSource && (i.dataSource.unbind(Be, i._refreshHandler).unbind(be, i._progressHandler).unbind(we, i._errorHandler), i._refreshHandler = i._progressHandler = i._errorHandler = null), t = i.element.add(i.wrapper).add(i.table).add(i.thead).add(i.wrapper.find(">.k-grid-toolbar")), i.content && (t = t.add(i.content).add(i.content.find(">.k-virtual-scrollable-wrap"))), i.lockedHeader && i._removeLockedContainers(), i.pane && i.pane.destroy(), i.minScreenResizeHandler && e(window).off("resize", i.minScreenResizeHandler), i._draggableInstance && i._draggableInstance.element && i._draggableInstance.destroy(), i._draggableInstance = null, t.off(Te), J.destroy(i.wrapper), i.rowTemplate = i.altRowTemplate = i.lockedRowTemplate = i.lockedAltRowTemplate = i.detailTemplate = i.footerTemplate = i.groupFooterTemplate = i.lockedGroupFooterTemplate = i.noRecordsTemplate = null, i.scrollables = i.thead = i.tbody = i.element = i.table = i.content = i.footer = i.wrapper = i.lockedTable = i.lockedContent = i.lockedHeader = i.lockedFooter = i._groupableClickHandler = i._setContentWidthHandler = null }, getOptions: function () { var i, n, o, r = this.options; return r.dataSource = null, (i = ce(!0, {}, this.options)).columns = J.deepExtend([], this.columns), n = this.dataSource, o = n.options.data && n._data, n.options.data = null, i.dataSource = e.extend(!0, {}, n.options), n.options.data = o, i.dataSource.data = o, i.dataSource.page = n.page(), i.dataSource.filter = n.filter(), i.dataSource.pageSize = n.pageSize(), i.dataSource.sort = n.sort(), i.dataSource.group = n.group(), i.dataSource.aggregate = n.aggregate(), i.dataSource.transport && (i.dataSource.transport.dataSource = null), i.pageable && i.pageable.pageSize && (i.pageable.pageSize = n.pageSize()), i.$angular = t, i }, setOptions: function (e) { var t, i, n, o, r = this.getOptions(); J.deepExtend(r, e), e.dataSource || (r.dataSource = this.dataSource), t = this.wrapper, i = this._events, n = this.element, this.destroy(), this.options = null, this._isMobile && ((o = t.closest(J.roleSelector("pane")).parent()).after(t), o.remove(), t.removeClass("k-grid-mobile")), t[0] !== n[0] && (t.before(n), t.remove()), n.empty(), this.init(n, r, i), this._setEvents(r) }, items: function () { return this.lockedContent ? this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))) : this._items(this.tbody) }, _items: function (t) { return t.children().filter(function () { var t = e(this); return !t.hasClass("k-grouping-row") && !t.hasClass("k-detail-row") && !t.hasClass("k-group-footer") }) }, dataItems: function () { var e, t, i, n = J.ui.DataBoundWidget.fn.dataItems.call(this); if (this.lockedContent) { for (e = n.length, t = Array(2 * e), i = e; --i >= 0;)t[i] = t[i + e] = n[i]; n = t } return n }, _destroyColumnAttachments: function () { var t = this; t.resizeHandle = null, t.thead && (this.angular("cleanup", function () { return { elements: t.thead.get() } }), t.thead.add(t.lockedHeader).find("th").each(function () { var t = e(this), i = t.data("kendoFilterMenu"), n = t.data("kendoColumnSorter"), o = t.data("kendoColumnMenu"); i && i.destroy(), n && n.destroy(), o && o.destroy() })) }, _attachCustomCommandsEvent: function () { var e, t, i, n = this, o = R(n.columns || []); for (t = 0, i = o.length; t < i; t++)(e = o[t].command) && a(n, n.wrapper, e) }, _aria: function () { var e = this.element.attr("id") || "aria"; e && (this._cellId = e + "_active_cell") }, _element: function () { var t = this, i = t.element; i.is("table") || ((i = t.options.scrollable ? t.element.find("> .k-grid-content > table") : t.element.children("table")).length || (i = e("<table />").appendTo(t.element))), ht && i.attr("cellspacing", 0), t.table = i.attr("role", t._hasDetails() ? "treegrid" : "grid"), t._wrapper() }, _createResizeHandle: function (t, i) { var n, o, r, s, a, l, c, d = this, u = d.options.columnResizeHandleWidth, h = d.options.scrollable, f = d.resizeHandle, p = this._groups(); if (f && d.lockedContent && f.data("th")[0] !== i[0] && (f.off(Te).remove(), f = null), f || (f = d.resizeHandle = e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'), t.append(f)), dt) n = i.position().left, h && (s = i.closest(".k-grid-header-wrap, .k-grid-header-locked"), a = ut.msie ? s.scrollLeft() : 0, l = ut.webkit ? s[0].scrollWidth - s[0].offsetWidth - s.scrollLeft() : 0, c = ut.mozilla ? s[0].scrollWidth - s[0].offsetWidth - (s[0].scrollWidth - s[0].offsetWidth - s.scrollLeft()) : 0, n -= l - c + a); else { for (n = i[0].offsetWidth, o = F(i.closest("thead")).filter(":visible"), r = 0; r < o.length && o[r] != i[0]; r++)n += o[r].offsetWidth; p > 0 && (n += re(t.find(".k-group-cell:first")) * p), d._hasDetails() && (n += re(t.find(".k-hierarchy-cell:first"))) } f.css({ top: i.position().top, left: n - u, height: se(i), width: 3 * u }).data("th", i).show(), f.off("dblclick" + Te).on("dblclick" + Te, function () { d._autoFitLeafColumn(i.data("index")) }) }, _positionColumnResizeHandle: function () { var t = this, i = t.options.columnResizeHandleWidth, n = t.lockedHeader ? t.lockedHeader.find("thead:first") : e(); t.thead.add(n).on("mousemove" + Te, "th", function (n) { var r, s, a, l = e(this); l.hasClass("k-group-cell") || l.hasClass("k-hierarchy-cell") || (r = n.clientX / function () { var t, i = parseFloat(e(document.documentElement).css("zoom")); return isNaN(i) && (i = 1), t = parseFloat(e(document.body).css("zoom")), isNaN(t) && (t = 1), i * t }(), s = e(window).scrollLeft(), a = l.offset().left + (dt ? 0 : this.offsetWidth), r + s > a - i && r + s < a + i ? t._createResizeHandle(l.closest("div"), l) : t.resizeHandle ? t.resizeHandle.hide() : o(t.wrapper, "")) }) }, _resizeHandleDocumentClick: function (t) { e(t.target).closest(".k-column-active").length || (e(document).off(t), this._hideResizeHandle()) }, _hideResizeHandle: function () { this.resizeHandle && (this.resizeHandle.data("th").removeClass("k-column-active"), this.lockedContent && !this._isMobile ? (this.resizeHandle.off(Te).remove(), this.resizeHandle = null) : this.resizeHandle.hide()) }, _positionColumnResizeHandleTouch: function () { var t = this, i = t.lockedHeader ? t.lockedHeader.find("thead:first") : e(); t._resizeUserEvents = new J.UserEvents(i.add(t.thead), { filter: "th:not(.k-group-cell):not(.k-hierarchy-cell)", threshold: 10, hold: function (i) { var n = e(i.target); i.preventDefault(), n.addClass("k-column-active"), t._createResizeHandle(n.closest("div"), n), t._resizeHandleDocumentClickHandler || (t._resizeHandleDocumentClickHandler = me(t._resizeHandleDocumentClick, t)), e(document).on("click", t._resizeHandleDocumentClickHandler) } }) }, _resizable: function () { var t, i, n, r, s, a, l, c, d = this, u = d.options, h = this._isMobile, f = J.support.mobileOS ? 0 : J.support.scrollbar(); u.resizable && (t = u.scrollable ? d.wrapper.find(".k-grid-header-wrap:first") : d.wrapper, h ? d._positionColumnResizeHandleTouch(t) : d._positionColumnResizeHandle(t), d.resizable && d.resizable.destroy(), d.resizable = new ee.Resizable(t.add(d.lockedHeader), { handle: (u.scrollable ? "" : ">") + ".k-resize-handle", hint: function (t) { return e('<div class="k-grid-resize-indicator" />').css({ height: se(t.data("th")) + d.tbody.attr("clientHeight") }) }, start: function (t) { var f, p, m, g; c = e(t.currentTarget).data("th"), h && d._hideResizeHandle(), f = c.closest("table"), p = e.inArray(c[0], F(c.closest("thead")).filter(":visible")), a = f.parent().hasClass("k-grid-header-locked"), m = a ? d.lockedTable : d.table, g = d.footer || e(), d.footer && d.lockedContent && (g = d.footer.children(a ? ".k-grid-footer-locked" : ".k-grid-footer-wrap")), o(d.wrapper, "col-resize"), l = u.scrollable ? f.find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + p + ")").add(m.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + p + ")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + p + ")")) : m.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + p + ")"), i = t.x.location, n = re(c), r = R(d.columns)[p].minResizableWidth || 10, s = re(a ? m.children("tbody") : d.tbody), ut.webkit && d.wrapper.addClass("k-grid-column-resizing") }, resize: function (t) { var o, h, p, m, g, v, _ = dt ? -1 : 1, b = n + t.x.location * _ - i * _; u.scrollable ? (a && d.lockedFooter ? o = d.lockedFooter.children("table") : d.footer && (o = d.footer.find(">.k-grid-footer-wrap>table")), o && o[0] || (o = e()), h = c.closest("table"), p = a ? d.lockedTable : d.table, m = !1, g = d.wrapper.width() - f, v = b, a && s - n + v > g && ((v = n + (g - s - 2 * f)) < 0 && (v = b), m = !0), v > 10 && v >= r && (l.css("width", v), s && (v = m ? g - 2 * f : s + t.x.location * _ - i * _, p.add(h).add(o).css("width", v), a || (d._footerWidth = v)))) : b > 10 && b >= r && l.css("width", b) }, resizeend: function () { var e, t, i, r = re(c); o(d.wrapper, ""), ut.webkit && d.wrapper.removeClass("k-grid-column-resizing"), n != r && (t = d.lockedHeader ? d.lockedHeader.find("thead:first tr:first").add(d.thead.find("tr:first")) : c.parent(), (i = c.attr(J.attr("index"))) || (i = t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(c)), (e = R(d.columns)[i]).width = r, d.trigger(Ge, { column: e, oldWidth: n, newWidth: r }), d._applyLockedContainersWidth(), d._syncLockedContentHeight(), d._syncLockedHeaderHeight()), d._hideResizeHandle(), c = null } })) }, _draggable: function () { var t, i = this; i.options.reorderable && (i._draggableInstance && i._draggableInstance.destroy(), t = i.wrapper.children(".k-grid-header"), i._draggableInstance = i.wrapper.kendoDraggable({ group: J.guid(), autoScroll: !0, filter: i.content ? ".k-grid-header:first " + Se : "table:first>.k-grid-header " + Se, dragstart: function () { t.children(".k-grid-header-wrap").unbind("scroll" + Te + "scrolling").bind("scroll" + Te + "scrolling", function (e) { i.virtualScrollable ? i.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft) : i.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft) }) }, dragend: function () { t.children(".k-grid-header-wrap").unbind("scroll" + Te + "scrolling") }, drag: function () { i._hideResizeHandle() }, hint: function (t) { var i = t.attr(J.attr("title")); return i && (i = J.htmlEncode(i)), e('<div class="k-header k-drag-clue" />').css({ width: t.width(), paddingLeft: t.css("paddingLeft"), paddingRight: t.css("paddingRight"), lineHeight: t.height() + "px", paddingTop: t.css("paddingTop"), paddingBottom: t.css("paddingBottom") }).html(i || t.attr(J.attr("field")) || t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />') } }).data("kendoDraggable")) }, _reorderable: function () { var t, i = this; i.options.reorderable && (i.wrapper.data("kendoReorderable") && i.wrapper.data("kendoReorderable").destroy(), t = function (e, t, n) { var o = e[t], r = e[n], s = l(o, i.columns); return e = s ? s.columns : i.columns, fe(r, e) }, i.wrapper.kendoReorderable({ draggable: i._draggableInstance, dragOverContainers: function (e, n) { var o = y(i.columns); return !1 !== o[e].lockable && t(o, e, n) > -1 }, inSameContainer: function (n) { return e(n.source).parent()[0] === e(n.target).parent()[0] && t(y(i.columns), n.sourceIndex, n.targetIndex) > -1 }, change: function (e) { var n = y(i.columns), o = n[e.oldIndex], r = t(n, e.oldIndex, e.newIndex); i.trigger($e, { newIndex: r, oldIndex: fe(o, n), column: o }), i.reorderColumn(r, o, "before" === e.position) } })) }, _reorderHeader: function (e, t, i) { var n, o, a, l, c = this, d = _(e[0], c.columns), u = _(t, c.columns), h = []; for (n = 0; n < e.length; n++)e[n].columns && (h = h.concat(e[n].columns)); o = s(c.lockedHeader, c.thead, "tr:eq(" + d.row + ")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"), a = D(e).length, l = D([t]).length, h.length ? (a > 0 && 0 === l ? m(e, t, h, c.columns, c.lockedHeader.find("thead"), c.thead, this._groups()) : 0 === a && l > 0 && m(e, t, h, c.columns, c.thead, c.lockedHeader.find("thead"), this._groups()), (t.columns || d.cell - u.cell > 1 || u.cell - d.cell > 1) && ((t = b(c.columns, t, e[0], i)) && c._reorderHeader(h, t, i))) : a !== l && function (e, t, i) { var n = v(D(t)), o = v(A(t)), r = e.rowSpan; e.rowSpan = i ? n > o ? r - (n - o) || 1 : r + (o - n) : n > o ? r + (n - o) : r - (o - n) || 1 }(o[d.cell], c.columns, a), r(o, d.cell, u.cell, i, e.length) }, _reorderContent: function (t, i, n) { var o, a, l, c, d = this, u = e(), h = t[0], p = f(t), m = fe(h, R(d.columns)), g = fe(i, R(d.columns)), v = fe(h, M(d.columns)), _ = fe(i, M(d.columns)), b = D(d.columns).length, w = !!i.locked, y = d.footer || d.wrapper.find(".k-grid-footer"), k = o = _; for (i.hidden && (w ? (_ = d.lockedTable.find("colgroup"), k = d.lockedHeader.find("colgroup"), o = e(d.lockedFooter).find(">table>colgroup")) : (_ = d.tbody.prev(), k = d.thead.prev(), o = y.find(".k-grid-footer-wrap").find(">table>colgroup"))), d._hasFilterRow() && r(d.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"), m, g, n, t.length), r(s(d.lockedHeader, d.thead.prev(), "col:not(.k-group-col,.k-hierarchy-col)"), v, k, n, p.length), d.options.scrollable && r(s(d.lockedTable, d.tbody.prev(), "col:not(.k-group-col,.k-hierarchy-col)"), v, _, n, p.length), y && y.length && (r(s(d.lockedFooter, y.find(".k-grid-footer-wrap"), ">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"), v, o, n, p.length), r(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"), m, g, n, t.length)), a = d.tbody.children(":not(.k-grouping-row,.k-detail-row)"), d.lockedTable && (b > g ? b <= m && W(d.lockedTable.find(">tbody>tr.k-grouping-row"), d.table.find(">tbody>tr.k-grouping-row"), t.length) : b > m && W(d.table.find(">tbody>tr.k-grouping-row"), d.lockedTable.find(">tbody>tr.k-grouping-row"), t.length), u = d.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")), l = 0, c = a.length; l < c; l += 1)r(s(u[l], a[l], ">td:not(.k-group-cell,.k-hierarchy-cell)"), m, g, n, t.length) }, _autoFitLeafColumn: function (e) { this.autoFitColumn(R(this.columns)[e]) }, autoFitColumn: function (t) { var i, n, o, r, s, a, l, c, d, f, p, m, g, v, _, b, w, y, x, C = this, S = C.options, T = C.columns, D = C.lockedHeader ? F(C.lockedHeader.find(">table>thead")).filter(u).length : 0, A = "col:not(.k-group-col):not(.k-hierarchy-col)", E = "td:visible:not(.k-group-cell):not(.k-hierarchy-cell)"; if ((t = "number" == typeof t ? T[t] : le(t) ? ue(k(T), function (e) { return e === t })[0] : ue(k(T), function (e) { return e.field === t })[0]) && h(t)) { for (i = fe(t, R(T)), r = t.locked, o = r ? C.lockedHeader.children("table") : C.thead.parent(), n = o.find("[data-index='" + i + "']"), c = r ? C.lockedTable : C.table, d = C.footer || e(), C.footer && C.lockedContent && (d = C.footer.children(r ? ".k-grid-footer-locked" : ".k-grid-footer-wrap")), f = d.find("table").first(), C.lockedHeader && !r && (i -= D), p = 0; p < T.length && T[p] !== t; p++)T[p].hidden && i--; if (S.scrollable ? (s = o.find(A).eq(i).add(c.children("colgroup").find(A).eq(i)).add(f.find("colgroup").find(A).eq(i)), r || (a = c.parent(), l = a.scrollLeft())) : s = c.children("colgroup").find(A).eq(i), m = o.add(c).add(f), g = re(n), s.width(""), m.css("table-layout", "fixed"), s.width("auto"), m.addClass("k-autofitting"), m.css("table-layout", ""), v = Math.ceil(Math.max(re(n), re(c.find("tr:not(.k-grouping-row)").eq(0).children(E).eq(i)), re(f.find("tr").eq(0).children(E).eq(i)))) + 1, s.width(v), t.width = v, S.scrollable) { for (_ = o.find("col"), w = 0, y = 0, x = _.length; y < x; y += 1) { if (!(b = _[y].style.width) || -1 != b.indexOf("%")) { w = 0; break } w += parseInt(b, 10) } w && m.each(function () { this.style.width = w + "px" }) } ut.msie && 8 == ut.version && (m.css("display", "inline-table"), setTimeout(function () { m.css("display", "table") }, 1)), m.removeClass("k-autofitting"), l && a.scrollLeft(l), C.trigger(Ge, { column: t, oldWidth: g, newWidth: v }), C._applyLockedContainersWidth(), C._syncLockedContentHeight(), C._syncLockedHeaderHeight() } }, reorderColumn: function (e, i, n) { var o, r, s = this, a = l(i, s.columns), c = a ? a.columns : s.columns, d = fe(i, c), u = c[e], h = !!u.locked, f = D(s.columns).length; d !== e && (!i.locked && h && 1 == A(s.columns).length || i.locked && !h && 1 == f || (s._hideResizeHandle(), n === t && (n = e < d), r = [i], s._reorderHeader(r, u, n), s.lockedHeader && (S(s.thead), S(s.lockedHeader)), u.columns && (u = (u = R(u.columns))[n ? 0 : u.length - 1]), i.columns && (r = R(i.columns)), s._reorderContent(r, u, n), o = (o = !!i.locked) != h, i.locked = h, c.splice(n ? e : e + 1, 0, i), c.splice(d < e ? d : d + 1, 1), s._templates(), s._updateColumnCellIndex(), s._updateTablesWidth(), s._applyLockedContainersWidth(), s._syncLockedHeaderHeight(), s._syncLockedContentHeight(), s._updateFirstColumnClass(), o && (h ? s.trigger(Ye, { column: i }) : s.trigger(Ke, { column: i })))) }, _updateColumnCellIndex: function () { var e, t = 0; this.lockedHeader && (e = this.lockedHeader.find("thead"), t = g(e, D(this.columns))), g(this.thead, A(this.columns), t) }, lockColumn: function (e) { var t, i = this.columns; !(e = "number" == typeof e ? i[e] : ue(i, function (t) { return t.field === e })[0]) || e.locked || e.hidden || (t = D(i).length - 1, this.reorderColumn(t, e, !1)) }, unlockColumn: function (e) { var t, i = this.columns; (e = "number" == typeof e ? i[e] : ue(i, function (t) { return t.field === e })[0]) && e.locked && !e.hidden && (t = D(i).length, this.reorderColumn(t, e, !0)) }, cellIndex: function (t) { var i = 0; return this.lockedTable && !e.contains(this.lockedTable[0], t[0]) && (i = R(D(this.columns)).length), e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t) + i }, _modelForContainer: function (t) { (t = e(t)).is("tr") || "popup" === this._editMode() || (t = t.closest("tr")); var i = t.attr(J.attr("uid")); return this.dataSource.getByUid(i) }, _editable: function () { var t = this, i = t.selectable && t.selectable.options.multiple, n = t.options.editable, o = function () { var i = ne(), n = t._editContainer; !n || e.contains(n[0], i) || n[0] === i || e(i).closest(".k-animation-container").length || t.editable.end() && t.closeCell() }; n && (this.wrapper.addClass("k-editable"), "incell" === t._editMode() ? !1 !== n.update && t.wrapper.on(Xe + Te, "tr:not(.k-grouping-row) > td", function (n) { var o = e(this), r = t.lockedTable && o.closest("table")[0] === t.lockedTable[0]; o.hasClass("k-hierarchy-cell") || o.hasClass("k-detail-cell") || o.hasClass("k-group-cell") || o.hasClass("k-edit-cell") || o.has("a.k-grid-delete").length || o.has("button.k-grid-delete").length || o.closest("tbody")[0] !== t.tbody[0] && !r || e(n.target).is(":input") || (t.editable ? t.editable.end() && (i && e(ne()).blur(), t.closeCell(), t.editCell(o)) : t.editCell(o)) }).on("focusin" + Te, function () { e.contains(this, ne()) || (clearTimeout(t.timer), t.timer = null) }).on("focusout" + Te, function () { t.timer = setTimeout(o, 1) }) : !1 !== n.update && t.wrapper.on(Xe + Te, "tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit", function (i) { i.preventDefault(), t.editRow(e(this).closest("tr")) }), !1 !== n.destroy ? t.wrapper.on(Xe + Te, "tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete", function (i) { i.preventDefault(), i.stopPropagation(), t.removeRow(e(this).closest("tr")) }) : t.wrapper.on(Xe + Te, "tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete", function (e) { e.stopPropagation(), t._confirmation() || e.preventDefault() })) }, editCell: function (t) { var i, n, o, r; if (t = e(t), n = R((i = this).columns)[i.cellIndex(t)], o = i._modelForContainer(t), i.closeCell(), o && Y(n, o) && !n.command) { if (i.trigger(Ae, { model: o })) return; i._attachModelChange(o), i._editContainer = t, i.editable = t.addClass("k-edit-cell").kendoEditable({ fields: { field: n.field, format: n.format, editor: n.editor, values: n.values }, model: o, target: i, change: function (e) { i.trigger(Ee, { values: e.values, container: t, model: o }) && e.preventDefault() } }).data("kendoEditable"), r = t.parent().addClass("k-grid-edit-row"), i.lockedContent && j(r[0], i._relatedRow(r).addClass("k-grid-edit-row")[0]), i.trigger(De, { container: t, model: o }) } }, _adjustLockedHorizontalScrollBar: function () { var e = this.table, t = e.parent(), i = e[0].offsetWidth > t[0].clientWidth ? J.support.scrollbar() : 0; this.lockedContent.height(t.height() - i) }, _syncLockedContentHeight: function () { this.lockedTable && (this.touchScroller || this._adjustLockedHorizontalScrollBar(), this._adjustRowsHeight(this.table, this.lockedTable)) }, _syncLockedHeaderHeight: function () { var e, t; this.lockedHeader && (e = this.lockedHeader.children("table"), t = this.thead.parent(), this._adjustRowsHeight(e, t), function (e, t) { var i, n, o, r; e = e[0], t = t[0], e.rows.length !== t.rows.length && (i = e.offsetHeight, n = t.offsetHeight, i > n ? (o = t.rows[t.rows.length - 1], ct.test(o.className) && (o = t.rows[t.rows.length - 2]), r = i - n) : (o = e.rows[e.rows.length - 1], ct.test(o.className) && (o = e.rows[e.rows.length - 2]), r = n - i), o.style.height = o.offsetHeight + r + "px") }(e, t)) }, _syncLockedFooterHeight: function () { this.lockedFooter && this.footer && this.footer.length && this._adjustRowsHeight(this.lockedFooter.children("table"), this.footer.find(".k-grid-footer-wrap > table")) }, _destroyEditable: function () { var e = this, t = function () { if (e.editable) { var t = e.editView ? e.editView.element : e._editContainer; t && (t.off(Xe + Te, "a.k-grid-cancel", e._editCancelClickHandler), t.off(Xe + Te, "a.k-grid-update", e._editUpdateClickHandler)), e._detachModelChange(), e.editable.destroy(), e.editable = null, e._editContainer = null, e._destroyEditView() } }; e.editable && ("popup" !== e._editMode() || e._isMobile ? t() : e._editContainer.data("kendoWindow").bind("deactivate", t).close()), e._actionSheet && (e._actionSheet.destroy(), e._actionSheet = null) }, _destroyEditView: function () { this.editView && (this.editView.purge(), this.editView = null, this.pane.navigate("")) }, _attachModelChange: function (e) { var t = this; t._modelChangeHandler = function (e) { t._modelChange({ field: e.field, model: this }) }, e.bind("change", t._modelChangeHandler) }, _detachModelChange: function () { var e = this, t = e._editContainer, i = e._modelForContainer(t); i && i.unbind(Be, e._modelChangeHandler) }, closeCell: function (t) { var i, n, o, r, s = this, a = s._editContainer; a && (i = a.closest("tr").attr(J.attr("uid")), r = s.dataSource.getByUid(i), t && s.trigger("cancel", { container: a, model: r }) || (s.trigger(Pe, { type: t ? "cancel" : "save", model: r, container: a }), a.removeClass("k-edit-cell"), n = R(s.columns)[s.cellIndex(a)], o = a.parent().removeClass("k-grid-edit-row"), s._destroyEditable(), s._displayCell(a, n, r), a.hasClass("k-dirty-cell") && e('<span class="k-dirty"/>').prependTo(a), s.trigger("itemChange", { item: o, data: r, ns: ee }), s.lockedContent && j(o.css("height", "")[0], s._relatedRow(o).css("height", "")[0]))) }, _displayCell: function (e, t, i) { var n = this, o = { storage: {}, count: 0 }, r = ce({}, J.Template, n.options.templateSettings), s = J.template(n._cellTmpl(t, o), r); o.count > 0 && (s = me(s, o.storage)), e.empty().html(s(i)), n.angular("compile", function () { return { elements: e, data: [{ dataItem: i }] } }) }, removeRow: function (e) { this._confirmation(e) && this._removeRow(e) }, _removeRow: function (t) { var i, n = this, o = n._editMode(); "incell" !== o && n.cancelRow(), t = e(t), n.lockedContent && (t = t.add(n._relatedRow(t))), t = t.hide(), (i = n._modelForContainer(t)) && !n.trigger("remove", { row: t, model: i }) ? (n.dataSource.remove(i), "inline" !== o && "popup" !== o || n.dataSource.sync()) : "incell" === o && n._destroyEditable() }, _editMode: function () { var e = "incell", t = this.options.editable; return !0 !== t && (e = "string" == typeof t ? t : t.mode || e), e }, editRow: function (t) { var i, n, o, r = this; t instanceof J.data.ObservableObject ? i = t : (t = e(t), i = r._modelForContainer(t)), n = r._editMode(), r.cancelRow(), i && (t = r.tbody.children("[" + J.attr("uid") + "=" + i.uid + "]"), r._attachModelChange(i), "popup" === n ? r._createPopupEditor(i) : "inline" === n ? r._createInlineEditor(t, i) : "incell" === n && e(t).children(ye).each(function () { var t = e(this), n = R(r.columns)[r.cellIndex(t)]; if ((i = r._modelForContainer(t)) && (!i.editable || i.editable(n.field)) && n.field) return r.editCell(t), !1 }), (o = r.editView ? r.editView.element : r._editContainer) && (this._editCancelClickHandler || (this._editCancelClickHandler = me(this._editCancelClick, this)), o.on(Xe + Te, "a.k-grid-cancel", this._editCancelClickHandler), this._editUpdateClickHandler || (this._editUpdateClickHandler = me(this._editUpdateClick, this)), o.on(Xe + Te, "a.k-grid-update", this._editUpdateClickHandler))) }, _editUpdateClick: function (e) { e.preventDefault(), e.stopPropagation(), this.saveRow() }, _editCancelClick: function (t) { var i, n = this, o = n.options.navigatable, r = n.editable.options.model, s = n.editView ? n.editView.element : n._editContainer; t.preventDefault(), t.stopPropagation(), n.trigger("cancel", { container: s, model: r }) || (i = n.items().index(e(n.current()).parent()), n.cancelRow(), o && (n._setCurrent(n.items().eq(i).children().filter(xe).first()), $(n.table, !0))) }, _createPopupEditor: function (i) { var n, o, r, s, a, l, c, d, u, h, f, p = this, m = "<div " + J.attr("uid") + '="' + i.uid + '" class="k-popup-edit-form' + (p._isMobile ? " k-mobile-list" : "") + '"><div class="k-edit-form-container">', g = [], v = R(p.columns), _ = p.options.editable, b = _.template, w = le(_) ? _.window : {}, y = ce({}, J.Template, p.options.templateSettings); if (!p.trigger(Ae, { model: i })) { if (w = w || {}, b) for (typeof b === tt && (b = window.unescape(b)), m += J.template(b, y)(i), r = 0, s = v.length; r < s; r++)(n = v[r]).command && ((d = G(n.command, "edit")) && (o = d)); else for (r = 0, s = v.length; r < s; r++)(n = v[r]).command ? n.command && ((d = G(n.command, "edit")) && (o = d)) : (m += '<div class="k-edit-label"><label for="' + n.field + '">' + (n.title || n.field || "") + "</label></div>", Y(n, i) ? (g.push({ field: n.field, format: n.format, editor: n.editor, values: n.values }), m += "<div " + J.attr("container-for") + '="' + n.field + '" class="k-edit-field"></div>') : (h = { storage: {}, count: 0 }, a = J.template(p._cellTmpl(n, h), y), h.count > 0 && (a = me(a, h.storage)), m += '<div class="k-edit-field">' + a(i) + "</div>")); o && le(o) && (o.text && le(o.text) && (l = o.text.update, c = o.text.cancel), o.attr && (u = o.attr)), p._isMobile ? (m += "</div></div>", p.editView = p.pane.append("<div data-" + J.ns + 'role="view" data-' + J.ns + 'use-native-scrolling="true" data-' + J.ns + 'init-widgets="false" class="k-grid-edit-form"><div data-' + J.ns + 'role="header" class="k-header">' + p._createButton({ name: "update", text: l, attr: u }) + (w.title || "Edit") + p._createButton({ name: "canceledit", text: c, attr: u }) + "</div>" + m + "</div>"), f = p._editContainer = p.editView.element.find(".k-popup-edit-form")) : (m += '<div class="k-edit-buttons k-state-default">', m += p._createButton({ name: "update", text: l, attr: u }) + p._createButton({ name: "canceledit", text: c, attr: u }), m += "</div></div></div>", f = p._editContainer = e(m).appendTo(p.wrapper).eq(0).kendoWindow(ce({ modal: !0, resizable: !1, draggable: !0, title: "Edit", visible: !1, close: function (n) { if (n.userTriggered) { if (n.sender.element.focus(), p.trigger("cancel", { container: f, model: i })) return n.preventDefault(), t; var o = p.items().index(e(p.current()).parent()); p.cancelRow(), p.options.navigatable && (p._setCurrent(p.items().eq(o).children().filter(xe).first()), $(p.table, !0)) } } }, w))), p.editable = p._editContainer.kendoEditable({ fields: g, model: i, clearContainer: !1, target: p }).data("kendoEditable"), p._isMobile && f.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function () { e(this).next().children("input").click() }), p._openPopUpEditor(), p.trigger(De, { container: f, model: i }) } }, _openPopUpEditor: function () { this._isMobile ? this.pane.navigate(this.editView, this._editAnimation) : this._editContainer.data("kendoWindow").center().open() }, _createInlineEditor: function (t, i) { var n, o, r, s = this, a = []; s.trigger(Ae, { model: i }) || (s.lockedContent && (t = t.add(s._relatedRow(t))), t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function () { if (o = e(this), !(n = R(s.columns)[s.cellIndex(o)]).command && Y(n, i)) a.push({ field: n.field, format: n.format, editor: n.editor, values: n.values }), o.attr(J.attr("container-for"), n.field), o.empty(); else if (n.command && (r = G(n.command, "edit"))) { var t, l, c; o.empty(), le(r) && (r.text && le(r.text) && (t = r.text.update, l = r.text.cancel), r.attr && (c = r.attr)), e(s._createButton({ name: "update", text: t, attr: c }) + s._createButton({ name: "canceledit", text: l, attr: c })).appendTo(o) } }), s._editContainer = t, s.editable = new J.ui.Editable(t.addClass("k-grid-edit-row"), { target: s, fields: a, model: i, clearContainer: !1 }), t.length > 1 && (j(t[0], t[1]), s._applyLockedContainersWidth()), s.trigger(De, { container: t, model: i })) }, cancelRow: function (e) { var t, i = this, n = i._editContainer; if (n) { if (t = i._modelForContainer(n), e && i.trigger("cancel", { container: n, model: t })) return; i._destroyEditable(), i.dataSource.cancelChanges(t), i._displayRow("popup" !== i._editMode() ? n : i.tbody.find("[" + J.attr("uid") + "=" + t.uid + "]")) } }, saveRow: function () { var t = this._editContainer, i = this._modelForContainer(t), n = e.Deferred(); return t && this.editable ? !this.editable.end() || this.trigger(Ee, { container: t, model: i }) ? n.reject().promise() : this.dataSource.sync() : n.resolve().promise() }, _displayRow: function (t) { var i, n, o, r, s, a = this, l = a._modelForContainer(t), c = t.hasClass("k-state-selected"), d = t.hasClass("k-alt"); l && (a.lockedContent && (i = e((d ? a.lockedAltRowTemplate : a.lockedRowTemplate)(l)), a._relatedRow(t.last()).replaceWith(i)), a.angular("cleanup", function () { return { elements: t.get() } }), n = e((d ? a.altRowTemplate : a.rowTemplate)(l)), t.replaceWith(n), a.trigger("itemChange", { item: n, data: l, ns: ee }), i && i.length && a.trigger("itemChange", { item: i, data: l, ns: ee }), r = n, s = [{ dataItem: l }], i && i.length && (r = n.add(i), s.push({ dataItem: l })), a.angular("compile", function () { return { elements: r.get(), data: s } }), c && a.options.selectable && a.select(n.add(i)), i && j(n[0], i[0]), (o = n.next()).hasClass("k-detail-row") && o.is(":visible") && n.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse")) }, _showMessage: function (t, i) { var n, o, r = this; return r._isMobile ? (n = J.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'), o = e(n(t)).appendTo(r.view.element), (r._actionSheet = new J.mobile.ui.ActionSheet(o, { cancel: t.cancelDelete, cancelTemplate: '<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>', close: function () { this.destroy() }, command: function (t) { var n = e(t.currentTarget).parent(); n.hasClass("km-actionsheet-cancel") || r._removeRow(i) }, popup: r._actionSheetPopupOptions })).open(i), !1) : window.confirm(t.title) }, _confirmation: function (e) { var t = this, i = t.options.editable, n = !0 === i || typeof i === tt ? t.options.messages.editable.confirmation : i.confirmation; return le(i) && typeof i.mode === tt && typeof n !== tt && !1 !== n && (n = t.options.messages.editable.confirmation), !1 === n || null == n || (typeof n === et && (n = n(t._modelForContainer(e))), t._showMessage({ confirmDelete: i.confirmDelete || t.options.messages.editable.confirmDelete, cancelDelete: i.cancelDelete || t.options.messages.editable.cancelDelete, title: !0 === n ? t.options.messages.editable.confirmation : n }, e)) }, cancelChanges: function () { this.dataSource.cancelChanges() }, saveChanges: function () { var e = this; (e.editable && e.editable.end() || !e.editable) && !e.trigger(Ne) && e.dataSource.sync() }, addRow: function () { var e, t, i, n, o, r, s = this, a = s.dataSource, l = s._editMode(), c = s.options.editable.createAt || "", d = a.pageSize(), u = a.view() || []; (s.editable && s.editable.end() || !s.editable) && ("incell" != l && s.cancelRow(), e = a.indexOf(u[0]), "bottom" == c.toLowerCase() && (e += u.length, d && !a.options.serverPaging && d <= u.length && (e -= 1)), e < 0 && (e = a.page() > a.totalPages() ? (a.page() - 1) * d : 0), t = a.insert(e, {}), i = t.uid, n = s.lockedContent ? s.lockedTable : s.table, o = n.find("tr[" + J.attr("uid") + "=" + i + "]"), r = o.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(s._firstEditableColumnIndex(o)), "inline" === l && o.length ? s.editRow(o) : "popup" === l ? s.editRow(t) : r.length && s.editCell(r), "bottom" == c.toLowerCase() && s.lockedContent && (s.lockedContent[0].scrollTop = s.content[0].scrollTop = s.table[0].offsetHeight)) }, _firstEditableColumnIndex: function (e) { var t, i, n, o = R(this.columns), r = this._modelForContainer(e); for (i = 0, n = o.length; i < n; i++)if (t = o[i], r && (!r.editable || r.editable(t.field)) && !t.command && t.field && !0 !== t.hidden) return i; return -1 }, _toolbar: function () { var t, i = this, n = i.wrapper, o = i.options.toolbar, r = i.options.editable; o && ((t = i.wrapper.find(".k-grid-toolbar")).length || (ge(o) || (o = typeof o === tt ? o : i._toolbarTmpl(o).replace(st, "\\#"), o = me(J.template(o), i)), t = e('<div class="k-header k-grid-toolbar" />').html(o({})).prependTo(n), i.angular("compile", function () { return { elements: t.get() } })), r && !1 !== r.create && t.on(Xe + Te, ".k-grid-add", function (e) { e.preventDefault(), i.addRow() }).on(Xe + Te, ".k-grid-cancel-changes", function (e) { e.preventDefault(), i.cancelChanges() }).on(Xe + Te, ".k-grid-save-changes", function (e) { e.preventDefault(), i.saveChanges() }), t.on(Xe + Te, ".k-grid-excel", function (e) { e.preventDefault(), i.saveAsExcel() }), t.on(Xe + Te, ".k-grid-pdf", function (e) { e.preventDefault(), i.saveAsPDF() })) }, _toolbarTmpl: function (e) { var t, i, n = ""; if (he(e)) for (t = 0, i = e.length; t < i; t++)n += this._createButton(e[t]); return n }, _createButton: function (e) { var i, o = e.template || '<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>', r = typeof e === tt ? e : e.name || e.text, s = mt[r] ? mt[r].className : "k-grid-" + (r || "").replace(/\s/g, ""), a = { className: s, text: r, imageClass: "", attr: "", iconClass: "" }, l = this.options.messages.commands; if (!(r || le(e) && e.template)) throw Error("Custom commands should have name specified"); return le(e) ? ((e = ce(!0, {}, e)).className && fe(a.className, e.className.split(" ")) < 0 ? e.className += " " + a.className : e.className === t && (e.className = a.className), "edit" === r && le(e.text) && ((e = ce(!0, {}, e)).text = e.text.edit), e.attr && (le(e.attr) && (e.attr = n(e.attr)), typeof e.attr === tt && ((i = e.attr.match(/class="(.+?)"/)) && fe(i[1], e.className.split(" ")) < 0 && (e.className += " " + i[1]))), a = ce(!0, a, mt[r], { text: l[r] }, e)) : a = ce(!0, a, mt[r], { text: l[r] }), J.template(o)(a) }, _hasFooters: function () { return !!this.footerTemplate || !!this.groupFooterTemplate || this.footer && this.footer.length > 0 || this.wrapper.find(".k-grid-footer").length > 0 }, _groupable: function () { var t = this; t._groupableClickHandler ? t.table.add(t.lockedTable).off(Xe + Te, t._groupableClickHandler) : t._groupableClickHandler = function (i) { var n = e(this), o = n.closest("tr"); n.hasClass("k-i-collapse") ? t.collapseGroup(o) : t.expandGroup(o), i.preventDefault(), i.stopPropagation() }, t._isLocked() ? t.lockedTable.on(Xe + Te, ".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse", t._groupableClickHandler) : t.table.on(Xe + Te, ".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse", t._groupableClickHandler), t._attachGroupable() }, _attachGroupable: function () { var t = this, i = t.wrapper, n = t.options.groupable, o = Se + "[" + J.attr("field") + "]", r = t.content ? ".k-grid-header:first " + o : "table:first>.k-grid-header " + o; n && !1 !== n.enabled && (i.has("div.k-grouping-header")[0] || e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(i), t.groupable && t.groupable.destroy(), t.groupable = new ee.Groupable(i, ce({}, n, { draggable: t._draggableInstance, groupContainer: ">div.k-grouping-header", dataSource: t.dataSource, draggableElements: r, filter: r, allowDrag: t.options.reorderable, change: function (e) { t.trigger("group", { groups: e.groups }) && e.preventDefault() } }))) }, _continuousItems: function (t, i) { var n, o, r, s, a, l, c, d; if (this.lockedContent) { for (o = (n = this).table.add(n.lockedTable), r = e(t, o[0]), s = e(t, o[1]), a = i ? D(n.columns).length : 1, l = i ? n.columns.length - a : 1, c = [], d = 0; d < r.length; d += a)pe.apply(c, r.slice(d, d + a)), pe.apply(c, s.splice(0, l)); return c } }, _selectable: function () { var i, n, o, r, s = this, a = [], l = s._isLocked(), c = s.options.selectable, d = s.dataSource.options; if (c) { if (s.selectable && s.selectable.destroy(), !0 === s.options.persistSelection) { if (!d.schema || !d.schema.model || !d.schema.model.id) throw Error("Selection persistence requires a data source with a model that has e defined id"); s._selectedIds = {} } c = J.ui.Selectable.parseOptions(c), i = c.multiple, n = c.cell, s._hasDetails() && (a[a.length] = ".k-detail-row"), (s.options.groupable || s._hasFooters()) && (a[a.length] = ".k-grouping-row,.k-group-footer"), "" !== (a = a.join(",")) && (a = ":not(" + a + ")"), o = s.table, l && (o = o.add(s.lockedTable)), r = ">" + (n ? "tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)" : "tbody>tr" + a), s.selectable = new J.ui.Selectable(o, { filter: r, aria: !0, multiple: i, change: function () { var e, t, i, o, r, a; if (s.options.persistSelection && !n) for (i = s.tbody.children(":not(.k-grouping-row,.k-detail-row)"), o = d.schema.model.id, r = {}, this.value().each(function () { t = s.dataItem(this), r[t[o]] = !0 }), a = 0; a < i.length; a++)t = s.dataItem(i[a]), e = t[o], r[e] ? s._selectedIds[e] = !0 : delete s._selectedIds[e]; s.trigger(Be) }, useAllItems: l && i && n, relatedTarget: function (t) { var i, o, r, a; if (!n && l) { for (o = e(), r = 0, a = t.length; r < a; r++)i = s._relatedRow(t[r]), fe(i[0], t) < 0 && (o = o.add(i)); return o } }, continuousItems: function () { return s._continuousItems(r, n) } }), s.options.navigatable && o.on("keydown" + Te, function (r) { var a = s.current(), c = r.target; if (r.keyCode === ae.SPACEBAR && e.inArray(c, o) > -1 && !a.is(".k-edit-cell,.k-header") && a.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")) { if (r.preventDefault(), r.stopPropagation(), a = n ? a : a.parent(), l && !n && (a = a.add(s._relatedRow(a))), i) if (r.ctrlKey) { if (a.hasClass(qe)) return a.removeClass(qe), s.trigger(Be), t } else s.selectable.clear(); else s.selectable.clear(); s.selectable.value(a) } }) } }, _clipboard: function () { var e, t = this.options, i = t.selectable; i && t.allowCopy && (e = this, t.navigatable || e.table.add(e.lockedTable).attr("tabindex", 0).on("mousedown" + Te + " keydown" + Te, ".k-detail-cell", function (e) { e.target !== e.currentTarget && e.stopImmediatePropagation() }).on("mousedown" + Te, ke + ">" + xe, me(Q, e)), e.copyHandler = me(e.copySelection, e), e.updateClipBoardState = function () { e.areaClipBoard && e.areaClipBoard.val(e.getTSV()).focus().select() }, e.bind("change", e.updateClipBoardState), e.wrapper.on("keydown", e.copyHandler), e.clearAreaHandler = me(e.clearArea, e), e.wrapper.on("keyup", e.clearAreaHandler)) }, copySelection: function (t) { t instanceof jQuery.Event && !t.ctrlKey && !t.metaKey || e(t.target).is("input:visible,textarea:visible") || window.getSelection && "" + window.getSelection() || document.selection && document.selection.createRange().text || (this.areaClipBoard || (this.areaClipBoard = e("<textarea />").css({ position: "fixed", top: "50%", left: "50%", opacity: 0, width: 0, height: 0 }).appendTo(this.wrapper)), this.areaClipBoard.val(this.getTSV()).focus().select()) }, getTSV: function () { var t, i, n, o, r, s, a = this, l = a.select(), c = "\t", d = a.options.allowCopy; return e.isPlainObject(d) && d.delimeter && (c = d.delimeter), t = "", l.length && (l.eq(0).is("tr") && (l = l.find("td:not(.k-group-cell)")), l.filter(":visible"), i = [], n = this.columns.length, o = a._isLocked() && D(a.columns).length, r = !0, e.each(l, function (t, s) { var l, c, d, u; s = e(s), l = s.closest("tr"), c = l.index(), d = s.index(), d -= s.prevAll(":hidden").length, o && r && (r = e.contains(a.lockedTable[0], s[0])), a._groups() && r && (d -= a._groups()), n > (d = r ? d : d + o) && (n = d), u = s.text(), i[c] || (i[c] = []), i[c][d] = u }), s = i.length, i = e.each(i, function (e, t) { t && (i[e] = t.slice(n), s > e && (s = e)) }), e.each(i.slice(s), function (e, i) { t += i ? i.join(c) + "\r\n" : "\r\n" })), t }, clearArea: function (t) { this.areaClipBoard && t && t.target === this.areaClipBoard[0] && $(this.options.navigatable ? e(this.current()).closest("table") : this.table, !0), this.areaClipBoard && (this.areaClipBoard.remove(), this.areaClipBoard = null) }, _minScreenSupport: function () { var t = this.hideMinScreenCols(); t && (this.minScreenResizeHandler = me(this.hideMinScreenCols, this), e(window).on("resize", this.minScreenResizeHandler)) }, hideMinScreenCols: function () { var e = this.columns, t = window.innerWidth > 0 ? window.innerWidth : screen.width; return this._iterateMinScreenCols(e, t) }, _iterateMinScreenCols: function (e, i) { var n, o, r, s = !1; for (n = 0; n < e.length; n++)o = e[n], (r = o.minScreenWidth) !== t && null !== r && (s = !0, r > i ? this.hideColumn(o) : this.showColumn(o)), !o.hidden && o.columns && (s = this._iterateMinScreenCols(o.columns, i) || s); return s }, _relatedRow: function (t) { var i, n, o = this.lockedTable; return t = e(t), o ? (i = t.closest(this.table.add(this.lockedTable)), n = i.find(">tbody>tr").index(t), (i = i[0] === this.table[0] ? o : this.table).find(">tbody>tr").eq(n)) : t }, clearSelection: function () { this.selectable.clear(), this.trigger(Be) }, select: function (e) { var i = this, n = i.selectable; return (e = i.table.add(i.lockedTable).find(e)).length ? (n.options.multiple || (n.clear(), e = e.first()), i._isLocked() && (e = e.add(e.map(function () { return i._relatedRow(this) }))), n.value(e), t) : n.value() }, selectedKeyNames: function () { var e, t = []; for (e in this._selectedIds) t.push(e); return t.sort(), t }, _updateCurrentAttr: function (t, i) { var n = e(t).data("headerId"); e(t).removeClass(We).closest("table").removeAttr("aria-activedescendant"), n ? (n = n.replace(this._cellId, ""), e(t).attr("id", n)) : e(t).removeAttr("id"), i.data("headerId", i.attr("id")).attr("id", this._cellId).addClass(We).closest("table").attr("aria-activedescendant", this._cellId), this._current = i }, _scrollCurrent: function () { var t, i, n, o, r, s, a = this._current, l = this.options.scrollable; a && l && (t = a.parent(), i = t.closest("table").parent(), n = i.is(".k-grid-content-locked,.k-grid-header-locked"), o = i.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"), r = e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0], o && (l.virtual ? (s = Math.max(fe(t[0], this._items(t.parent())), 0), this._rowVirtualIndex = this.virtualScrollable.itemIndex(s), this.virtualScrollable.scrollIntoView(t)) : this._scrollTo(this._relatedRow(t)[0], r)), this.lockedContent && (this.lockedContent[0].scrollTop = r.scrollTop), n || this._scrollTo(a[0], r)) }, current: function (e) { return this._setCurrent(e, !0) }, _setCurrent: function (t, i) { var n = this._current; return (t = e(t)).length && (n && n[0] === t[0] || (this._updateCurrentAttr(n, t), this._scrollCurrent(), i || this.trigger(Qe, { element: t }))), this._current }, _removeCurrent: function () { this._current && (this._current.removeClass(We), this._current = null) }, _scrollTo: function (t, i) { var n, o = t.tagName.toLowerCase(), r = "td" === o || "th" === o, s = t[r ? "offsetLeft" : "offsetTop"], a = t[r ? "offsetWidth" : "offsetHeight"], l = i[r ? "scrollLeft" : "scrollTop"], c = i[r ? "clientWidth" : "clientHeight"], d = s + a, u = 0, h = 0, f = 0; dt && r && (n = e(t).closest("table")[0], ut.msie ? h = n.offsetLeft : ut.mozilla && (f = n.offsetLeft - J.support.scrollbar())), l = Math.abs(l + h - f), u = l > s ? s : d > l + c ? a <= c ? d - c : s : l, u = Math.abs(u + h) + f, i[r ? "scrollLeft" : "scrollTop"] = u }, _navigatable: function () { var t, i, n, o = this; o.options.navigatable && (t = o.table.add(o.lockedTable), i = o.thead.parent().add(e(">table", o.lockedHeader)), n = t, o.options.scrollable && (n = n.add(i), i.attr(Je, -1)), this._navigatableTables = n, n.off("mousedown" + Te + " focus" + Te + " focusout" + Te + " keydown" + Te), i.on("keydown" + Te, me(o._openHeaderMenu, o)).find("a.k-link").attr("tabIndex", -1), t.attr(Je, _e.max(t.attr(Je) || 0, 0)).on("mousedown" + Te + " keydown" + Te, ".k-detail-cell", function (e) { e.target !== e.currentTarget && e.stopImmediatePropagation() }), n.on(J.support.touch ? "touchstart" + Te : "mousedown" + Te, ke + ">" + xe, me(Q, o)).on("focus" + Te, me(o._tableFocus, o)).on("focusout" + Te, me(o._tableBlur, o)).on("keydown" + Te, me(o._tableKeyDown, o))) }, _openHeaderMenu: function (e) { e.altKey && e.keyCode == ae.DOWN && (this.current().find(".k-grid-filter, .k-header-column-menu").click(), e.stopImmediatePropagation()) }, _setTabIndex: function (e) { this._navigatableTables.attr(Je, -1), e.attr(Je, 0) }, _tableFocus: function (t) { var i, n; J.support.touch || (i = this.current(), n = e(t.currentTarget), i && i.is(":visible") ? i.addClass(We) : this._setCurrent(n.find(Ce)), this._setTabIndex(n)) }, _tableBlur: function () { var e = this.current(); e && e.removeClass(We) }, _tableKeyDown: function (i) { var n, o = this.current(), r = this.virtualScrollable && this.virtualScrollable.fetching(), s = e(i.target), a = !i.isDefaultPrevented() && !s.is(":button,a,:input,a>.k-icon"); return r ? (i.preventDefault(), t) : ((o = o || e(this.lockedTable).add(this.table).find(Ce)).length && (n = !1, a && i.keyCode == ae.UP && (n = this._moveUp(o)), a && i.keyCode == ae.DOWN && (n = this._moveDown(o)), a && i.keyCode == (dt ? ae.LEFT : ae.RIGHT) && (n = this._moveRight(o, i.altKey)), a && i.keyCode == (dt ? ae.RIGHT : ae.LEFT) && (n = this._moveLeft(o, i.altKey)), a && i.keyCode == ae.PAGEDOWN && (n = this._handlePageDown()), a && i.keyCode == ae.PAGEUP && (n = this._handlePageUp()), i.keyCode != ae.ENTER && i.keyCode != ae.F2 || (n = this._handleEnterKey(o, i.currentTarget, s)), i.keyCode == ae.ESC && (n = this._handleEscKey(o, i.currentTarget)), i.keyCode == ae.TAB && (n = this._handleTabKey(o, i.currentTarget, i.shiftKey)), n && (i.preventDefault(), i.stopPropagation())), t) }, _moveLeft: function (e, t) { var i, n, o = e.parent(), r = o.parent(); return t ? this.collapseRow(o) : (n = r.find(ke).index(o), (i = this._prevHorizontalCell(r, e, n))[0] || (r = this._horizontalContainer(r), (i = this._prevHorizontalCell(r, e, n))[0] !== e[0] && $(r.parent(), !0)), this._setCurrent(i)), !0 }, _moveRight: function (e, t) { var i, n, o = e.parent(), r = o.parent(); return t ? this.expandRow(o) : (n = r.find(ke).index(o), (i = this._nextHorizontalCell(r, e, n))[0] || (r = this._horizontalContainer(r, !0), (i = this._nextHorizontalCell(r, e, n))[0] !== e[0] && $(r.parent(), !0)), this._setCurrent(i)), !0 }, _moveUp: function (e) { var t = e.parent().parent(), i = this._prevVerticalCell(t, e); return i[0] || (t = this._verticalContainer(t, !0), (i = this._prevVerticalCell(t, e))[0] && $(t.parent(), !0)), this._setCurrent(i), !0 }, _moveDown: function (e) { var t = e.parent().parent(), i = this._nextVerticalCell(t, e); return i[0] || (t = this._verticalContainer(t), (i = this._nextVerticalCell(t, e))[0] && $(t.parent(), !0)), this._setCurrent(i), !0 }, _handlePageDown: function () { return !!this.options.pageable && (this.dataSource.page(this.dataSource.page() + 1), !0) }, _handlePageUp: function () { return !!this.options.pageable && (this.dataSource.page(this.dataSource.page() - 1), !0) }, _handleTabKey: function (t, i, n) { var o, r = this.options.editable && "incell" == this._editMode(); return !(!r || t.is("th") || (o = e(ne()).closest(".k-edit-cell"), o[0] && o[0] !== t[0] && (t = o), o = this._tabNext(t, i, n), !o.length || (this._handleEditing(t, o, o.closest("table")), 0))) }, _handleEscKey: function (t, i) { var n, o = ne(), r = "incell" == this._editMode(); return function (e) { return e && (e.hasClass("k-edit-cell") || e.parent().hasClass("k-grid-edit-row")) }(t) ? (r ? this.closeCell(!0) : (n = e(t).parent().index(), o && o.blur(), this.cancelRow(!0), n >= 0 && this._setCurrent(this.items().eq(n).children(xe).first())), ut.msie && ut.version < 9 && document.body.focus(), $(i, !0), !0) : !!t.has(o).length && ($(i, !0), !0) }, _toggleCurrent: function (e, t) { var i = e.parent(); return i.is(".k-grouping-row") ? (i.find(".k-icon:first").click(), !0) : !(t || !i.is(".k-master-row") || (i.find(".k-icon:first").click(), 0)) }, _handleEnterKey: function (t, i, n) { var o, r = this.options.editable && !1 !== this.options.editable.update, s = n.closest("[role=gridcell]"); return n.is("table") || e.contains(t[0], n[0]) || (t = s), t.is("th") ? (t.find(".k-link").click(), !0) : !(!this._toggleCurrent(t, r) && (o = t.find(":kendoFocusable:first"), o[0] && !t.hasClass("k-edit-cell") && t.hasClass("k-state-focused") ? (o.focus(), 0) : !r || n.is(":button,.k-button,textarea") || (s[0] || (s = t), this._handleEditing(s, !1, i), 0))) }, _nextHorizontalCell: function (e, t, i) { var n, o, r = t.nextAll(ye); return r.length || (n = e.find(ke), -1 != n.index(t.parent())) ? r.first() : t.hasClass("k-header") ? (o = [], T([D(this.columns)[0]], z(n.eq(0).children().first()), o, 0, 0), o[i] ? o[i][0] : t) : t.parent().hasClass("k-filter-row") ? n.last().children(ye).first() : n.eq(i).children(ye).first() }, _prevHorizontalCell: function (e, t, i) { var n, o, r, s = t.prevAll(ye); return s.length || (n = e.find(ke), -1 != n.index(t.parent())) ? s.first() : t.hasClass("k-header") ? (o = [], T([(r = D(this.columns))[r.length - 1]], z(n.eq(0).children().last()), o, 0, 0), o[i] ? o[i][0] : t) : t.parent().hasClass("k-filter-row") ? n.last().children(ye).last() : n.eq(i).children(ye).last() }, _currentDataIndex: function (e, i) { var n, o = i.attr("data-index"); return o ? (n = D(this.columns).length) && !e.closest("div").hasClass("k-grid-content-locked")[0] ? o - n : o : t }, _prevVerticalCell: function (t, i) { var n, o = i.parent(), r = t.children(ke), s = r.index(o), a = this._currentDataIndex(t, i); if (a || i.hasClass("k-header")) return (n = function t(i) { var n, o, r, s, a, l, c, d = i.closest("table"), u = e().add(i), h = i.closest("tr"), f = d.find("tr:not(.k-filter-row)"), p = f.index(h); if (p > 0) { for (n = f.eq(p - 1), o = n.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function () { return !e(this).attr("rowspan") }), r = 0, s = h.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(i), a = i.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function () { return this.colSpan > 1 }), l = 0; l < a.length; l++)r += a[l].colSpan || 1; for (s += Math.max(r - 1, 0), r = 0, l = 0; l < o.length; l++)if (c = o.eq(l), r += c.attr("colSpan") ? c[0].colSpan : 1, s >= l && s < r) { u = t(c).add(u); break } } return u }(i)).eq(n.length - 2); if (a = o.children(ye).index(i), o.hasClass("k-filter-row")) return F(t).eq(a); if (-1 == s) { if (!(o = t.find(".k-filter-row"))[0]) return F(t).eq(a) } else o = 0 === s ? e() : r.eq(s - 1); return (n = o.children(ye)).eq(n.length > a ? a : 0) }, _nextVerticalCell: function (e, i) { var n, o = i.parent(), r = e.children(ke), s = r.index(o), a = this._currentDataIndex(e, i); return -1 != s && a === t && i.hasClass("k-header") ? z(i).eq(1) : (a = a ? parseInt(a, 10) : o.children(ye).index(i), o = r.eq(-1 == s ? 0 : s + i[0].rowSpan), (n = o.children(ye)).eq(n.length > a ? a : 0)) }, _verticalContainer: function (e, t) { var i = e.parent(), n = this._navigatableTables.length, o = Math.floor(n / 2), r = fe(i[0], this._navigatableTables); return t && (o *= -1), ((r += o) >= 0 || r < n) && (i = this._navigatableTables.eq(r)), i.find(t ? "thead" : "tbody") }, _horizontalContainer: function (e, t) { var i, n, o = this._navigatableTables.length; return o <= 2 ? e : (i = e.parent(), n = fe(i[0], this._navigatableTables), n += t ? 1 : -1, !t || 2 != n && n != o ? !t && (1 == n || n < 0) ? e : this._navigatableTables.eq(n).find("thead, tbody") : e) }, _tabNext: function (e, t, i) { var n = !0, o = i ? e.prevAll(ye + ":first") : e.nextAll(":visible:first"); return o.length || (o = e.parent(), this.lockedTable && (n = i && t == this.lockedTable[0] || !i && t == this.table[0], o = this._relatedRow(o)), n && (o = o[i ? "prevAll" : "nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")), o = o.children(ye + (i ? ":last" : ":first"))), o }, _handleEditing: function (i, n, o) { var r, s, a = this, l = e(ne()), c = a._editMode(), d = ut.msie, u = d && ut.version < 9, h = a._editContainer, f = a.options.editable && !1 !== a.options.editable.update; if (o = e(o), s = "incell" == c ? i.hasClass("k-edit-cell") : i.parent().hasClass("k-grid-edit-row"), a.editable) { if (e.contains(h[0], l[0]) && (ut.opera || u ? l.blur().change().triggerHandler("blur") : (l.blur(), d && l.blur())), !a.editable) return $(o), t; if (!a.editable.end()) return a._setCurrent("incell" == c ? h : h.children().filter(ye).first()), (r = h.find(":kendoFocusable:first")[0]) && r.focus(), t; "incell" == c ? a.closeCell() : (a.saveRow(), s = !0) } n && a._setCurrent(n), u && document.body.focus(), $(o, !0), f && (!s && !n || n) && ("incell" == c ? a.editCell(a.current()) : a.editRow(a.current().parent())) }, _wrapper: function () { var e = this, t = e.table, i = e.options.height, n = e.element; n.is("div") || (n = n.wrap("<div/>").parent()), e.wrapper = n.addClass("k-grid k-widget k-display-block"), i && (e.wrapper.css(Ze, i), t.css(Ze, "auto")), e._initMobile() }, _initMobile: function () { var t, i = this.options, n = this; this._isMobile = !0 === i.mobile && J.support.mobileOS || "phone" === i.mobile || "tablet" === i.mobile, this._isMobile && (t = this.wrapper.addClass("k-grid-mobile").wrap("<div data-" + J.ns + 'stretch="true" data-' + J.ns + 'role="view" data-' + J.ns + 'init-widgets="false"></div>').parent(), this.pane = J.mobile.ui.Pane.wrap(t), this.view = this.pane.view(), this._actionSheetPopupOptions = e(document.documentElement).hasClass("km-root") ? { modal: !1 } : { align: "bottom center", position: "bottom center", effect: "slideIn:up" }, i.height && this.pane.element.parent().css(Ze, i.height), this._editAnimation = "slide", this.view.bind("show", function () { n._isLocked() && (n._updateTablesWidth(), n._applyLockedContainersWidth(), n._syncLockedContentHeight(), n._syncLockedHeaderHeight(), n._syncLockedFooterHeight()) })) }, _tbody: function () { var t, i = this.table; (t = i.find(">tbody")).length || (t = e("<tbody/>").appendTo(i)), this.tbody = t.attr("role", "rowgroup") }, _scrollable: function () { var t, i, n, o, r = this, s = r.options, a = s.scrollable, l = !0 !== a && a.virtual && !r.virtualScrollable, c = !J.support.kineticScrollNeeded || l ? J.support.scrollbar() : 0; a && ((t = r.wrapper.children(".k-grid-header"))[0] || (t = e('<div class="k-grid-header" />').insertBefore(r.table)), t.css(dt ? "padding-left" : "padding-right", a.virtual ? c + 1 : c), i = e('<table role="grid" />'), ht && i.attr("cellspacing", 0), i.width(r.table[0].style.width), i.append(r.thead), t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(i)), r.content = r.table.parent(), r.content.is(".k-virtual-scrollable-wrap, .km-scroll-container") && (r.content = r.content.parent()), r.content.is(".k-grid-content, .k-virtual-scrollable-wrap") || (r.content = r.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()), l && (r.virtualScrollable = new pt(r.content, { dataSource: r.dataSource, itemHeight: function () { return r._averageRowHeight() } })), r.scrollables = t.children(".k-grid-header-wrap").add(r.content), (n = r.wrapper.find(".k-grid-footer")).length && (r.scrollables = r.scrollables.add(n.children(".k-grid-footer-wrap"))), a.virtual ? r.content.find(">.k-virtual-scrollable-wrap").unbind("scroll" + Te).bind("scroll" + Te, function () { r.scrollables.scrollLeft(this.scrollLeft), r.lockedContent && (r.lockedContent[0].scrollTop = this.scrollTop) }) : (r.content.unbind("scroll" + Te).bind("scroll" + Te, function (e) { r.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft), r.lockedContent && e.currentTarget == r.content[0] && (r.lockedContent[0].scrollTop = this.scrollTop) }), (o = r.content.data("kendoTouchScroller")) && o.destroy(), (o = J.touchScroller(r.content)) && o.movable && (r.touchScroller = o, o.movable.bind("change", function (e) { r.scrollables.scrollLeft(-e.sender.x), r.lockedContent && r.lockedContent.scrollTop(-e.sender.y) }), r.one(Oe, function (e) { e.sender.wrapper.addClass("k-grid-backface") })))) }, _renderNoRecordsContent: function () { var t, i = this; i.options.noRecords && ((t = i.table.parent().children("." + je)).length && (i.angular("cleanup", function () { return { elements: t.get() } }), t.remove()), i.dataSource && i.dataSource.view().length || (t = e(i.noRecordsTemplate({})).insertAfter(i.table), i.angular("compile", function () { return { elements: t.get(), data: [{}] } }))) }, _setContentWidth: function (t) { var i, n = this, o = "k-grid-content-expander", r = n.resizable; n.options.scrollable && n.wrapper.is(":visible") && (i = n.table.parent().children("." + o), n._setContentWidthHandler = me(n._setContentWidth, n), n.dataSource && n.dataSource.view().length ? i[0] && (i.remove(), r && r.unbind("resize", n._setContentWidthHandler)) : (i[0] || (i = e('<div class="k-grid-content-expander"></div>').appendTo(n.table.parent()), r && r.bind("resize", n._setContentWidthHandler)), n.thead && (i.width(n.thead.width()), isNaN(parseFloat(t, 10)) || n.content.scrollLeft(t))), n._applyLockedContainersWidth(), n.lockedHeader && 0 === n.table[0].clientWidth && (n.table[0].style.width = "1px")) }, _applyLockedContainersWidth: function () { if (this.options.scrollable && this.lockedHeader) { var e, t = this.thead.parent(), i = t.parent(), n = this.wrapper[0].clientWidth, o = this._groups(), r = J.support.scrollbar(), s = this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"), a = t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"), l = C(s), c = C(a); o > 0 && (l += re(this.lockedHeader.find(".k-group-cell:first")) * o), l >= n && (l = n - 3 * r), this.lockedHeader.add(this.lockedContent).width(l), i[0].style.width = i.parent().width() - l - 2 + "px", t.add(this.table).width(c), this.virtualScrollable && (n -= r), this.content[0].style.width = n - l - 2 + "px", this.lockedFooter && this.lockedFooter.length && (this.lockedFooter.width(l), (e = this.footer.find(".k-grid-footer-wrap"))[0].style.width = i[0].clientWidth + "px", e.children().first().width(c)) } }, _setContentHeight: function () { var e = this, t = e.options, i = e.wrapper.innerHeight(), n = e.wrapper.children(".k-grid-header"), o = J.support.scrollbar(); t.scrollable && e.wrapper.is(":visible") && (i -= se(n), e.pager && (i -= se(e.pager.element)), t.groupable && (i -= se(e.wrapper.children(".k-grouping-header"))), t.toolbar && (i -= se(e.wrapper.children(".k-grid-toolbar"))), e.footerTemplate && (i -= se(e.wrapper.children(".k-grid-footer"))), function (e) { var t, i; return !!e[0].style.height || (t = e.height(), e.height("auto"), i = e.height(), t != i ? (e.height(""), !0) : (e.height(""), !1)) }(e.wrapper) && (i > 2 * o ? (e.lockedContent && (o = e.table[0].offsetWidth > e.table.parent()[0].clientWidth ? o : 0, e.lockedContent.height(i - o)), e.content.height(i)) : e.content.height(2 * o + 1))) }, _averageRowHeight: function () { var e, t = this, i = t._items(t.tbody).length, n = t._rowHeight; return 0 === i ? n : (t._rowHeight || (t._rowHeight = n = se(t.table) / i, t._sum = n, t._measures = 1), e = se(t.table) / i, n !== e && (t._measures++, t._sum += e, t._rowHeight = t._sum / t._measures), n) }, _dataSource: function () { var e, i = this, n = i.options, o = n.dataSource; o = he(o) ? { data: o } : o, le(o) && (ce(o, { table: i.table, fields: i.columns }), e = n.pageable, le(e) && e.pageSize !== t && (o.pageSize = e.pageSize)), i.dataSource && i._refreshHandler ? i.dataSource.unbind(Be, i._refreshHandler).unbind(be, i._progressHandler).unbind(we, i._errorHandler) : (i._refreshHandler = me(i.refresh, i), i._progressHandler = me(i._requestStart, i), i._errorHandler = me(i._error, i)), i.dataSource = te.create(o).bind(Be, i._refreshHandler).bind(be, i._progressHandler).bind(we, i._errorHandler) }, _error: function () { this._progress(!1) }, _requestStart: function () { this._progress(!0) }, _modelChange: function (t) { var i, n, o, r, s, a, l, c, d, u, h = this, f = h.tbody, p = t.model, m = h.tbody.find("tr[" + J.attr("uid") + "=" + p.uid + "]"), g = m.hasClass("k-alt"), v = h._items(f).index(m), _ = h.lockedContent; if (_ && (i = h._relatedRow(m)), m.add(i).children(".k-edit-cell").length && !h.options.rowTemplate) m.add(i).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function () { n = e(this), (o = R(h.columns)[h.cellIndex(n)]).field === t.field && (n.hasClass("k-edit-cell") ? n.addClass("k-dirty-cell") : (h._displayCell(n, o, p), e('<span class="k-dirty"/>').prependTo(n))) }); else if (!m.hasClass("k-grid-edit-row")) { for (a = e().add(m), _ && (r = (g ? h.lockedAltRowTemplate : h.lockedRowTemplate)(p), a = a.add(i), i.replaceWith(r)), h.angular("cleanup", function () { return { elements: a.get() } }), r = (g ? h.altRowTemplate : h.rowTemplate)(p), m.replaceWith(r), r = h._items(f).eq(v), u = [{ dataItem: p }], _ && (m = m.add(i), i = h._relatedRow(r)[0], j(r[0], i), r = r.add(i), u.push({ dataItem: p })), h.angular("compile", function () { return { elements: r.get(), data: u } }), (s = h.options.selectable) && m.hasClass("k-state-selected") && h.select(r), c = a.children(":not(.k-group-cell,.k-hierarchy-cell)"), l = r.children(":not(.k-group-cell,.k-hierarchy-cell)"), v = 0, d = h.columns.length; v < d; v++)o = h.columns[v], n = l.eq(v), s && c.eq(v).hasClass("k-state-selected") && n.addClass("k-state-selected"), o.field === t.field && e('<span class="k-dirty"/>').prependTo(n); h.trigger("itemChange", { item: r, data: p, ns: ee }) } }, _pageable: function () { var t, i = this, n = i.options.pageable; n && ((t = i.wrapper.children("div.k-grid-pager")).length || (t = e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(i.wrapper)), i.pager && i.pager.destroy(), i.pager = "object" == typeof n && n instanceof J.ui.Pager ? n : new J.ui.Pager(t, ce({}, n, { dataSource: i.dataSource })), i.pager.bind("pageChange", function (e) { i.trigger("page", { page: e.index }) && e.preventDefault() })) }, _footer: function () { var t, i, n, o = this, r = o.dataSource.aggregates(), s = "", a = o.footerTemplate, l = o.options, c = o.footer || o.wrapper.find(".k-grid-footer"); a ? (s = e(o._wrapFooter(a(r))), c.length ? (i = s, o.angular("cleanup", function () { return { elements: c.get() } }), c.replaceWith(i), c = o.footer = i) : c = o.footer = l.scrollable ? l.pageable ? s.insertBefore(o.wrapper.children("div.k-grid-pager")) : s.appendTo(o.wrapper) : s.insertBefore(o.tbody), o.angular("compile", function () { return { elements: c.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(), data: de(o.columns, function (e) { return { column: e, aggregate: r[e.field] } }) } })) : c && !o.footer && (o.footer = c), c.length && (l.scrollable && (t = c.attr("tabindex", -1).children(".k-grid-footer-wrap"), o.scrollables = e(o.scrollables.filter(function () { return !e(this).is(".k-grid-footer-wrap") }).toArray()).add(t)), o._footerWidth && c.find("table").css("width", o._footerWidth), t && (n = o.content.scrollLeft(), !0 !== l.scrollable && l.scrollable.virtual && (n = o.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()), t.scrollLeft(n))), o.lockedContent && (o._appendLockedColumnFooter(), o._applyLockedContainersWidth(), o._syncLockedFooterHeight()) }, _wrapFooter: function (t) { var i = "", n = J.support.mobileOS ? 0 : J.support.scrollbar(); return this.options.scrollable ? (i = e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table' + (ht ? ' cellspacing="0"' : "") + "><tbody>" + t + "</tbody></table></div></div>"), this._appendCols(i.find("table")), i.css(dt ? "padding-left" : "padding-right", n), i) : '<tfoot class="k-grid-footer">' + t + "</tfoot>" }, _columnMenu: function () { var e, i, n, o, r, s, a, l, c, d = this, u = R(d.columns), h = d.options, f = h.columnMenu, p = ue(d.columns, function (e) { return e.columns !== t }).length > 0, m = this._isMobile, g = function (e) { d.trigger(Re, { field: e.field, container: e.container }) }, v = function (e) { d.trigger(ze, { field: e.field, container: e.container }) }, _ = function (e) { $(e.closest("table"), !0) }, b = function (e) { d.trigger("sort", { sort: e.sort }) && e.preventDefault() }, w = function (e) { d.trigger("filter", { filter: e.filter, field: e.field }) && e.preventDefault() }, y = h.$angular; if (f) for ("boolean" == typeof f && (f = {}), s = F(d.thead), a = 0, l = s.length; a < l; a++)i = u[a], c = s.eq(a), i.command || !i.field && !c.attr("data-" + J.ns + "field") || ((e = c.data("kendoColumnMenu")) && e.destroy(), o = !1 !== i.sortable && !1 !== f.sortable && !1 !== h.sortable && ce({}, h.sortable, { compare: (i.sortable || {}).compare }), r = !(!h.filterable || !1 === i.filterable || !1 === f.filterable) && ce({ pane: d.pane }, h.filterable, i.filterable), i.filterable && i.filterable.dataSource && (r.forceUnique = !1, r.checkSource = i.filterable.dataSource), r && (r.format = i.format), n = { dataSource: d.dataSource, values: i.values, columns: f.columns, sortable: o, filterable: r, messages: f.messages, owner: d, closeCallback: _, init: g, open: v, pane: d.pane, sort: b, filtering: w, filter: m ? ":not(.k-column-active)" : "", lockedColumns: !p && !1 !== i.lockable && D(u).length > 0 }, y && (n.$angular = y), c.kendoColumnMenu(n)) }, _headerCells: function () { return this.thead.find("th").filter(function () { var t = e(this); return !t.hasClass("k-group-cell") && !t.hasClass("k-hierarchy-cell") }) }, _filterable: function () { var e, t, i, n, o, r, s, a = this, l = R(a.columns), c = function (e) { a.trigger(Me, { field: e.field, container: e.container }) }, d = function (e) { $(e.closest("table"), !0) }, u = function (e) { a.trigger("filter", { filter: e.filter, field: e.field }) && e.preventDefault() }, h = function (e) { a.trigger(Fe, { field: e.field, container: e.container }) }, f = a.options.filterable; if (f && typeof f.mode == tt && -1 == f.mode.indexOf("menu") && (f = !1), f && !a.options.columnMenu) for (t = F(a.thead), n = 0, o = t.length; n < o; n++)i = t.eq(n), !1 === l[n].filterable || l[n].command || !l[n].field && !i.attr("data-" + J.ns + "field") || ((e = i.data("kendoFilterMenu")) && e.destroy(), (e = i.data("kendoFilterMultiCheck")) && e.destroy(), r = l[n].filterable, s = ce({}, f, r, { dataSource: a.dataSource, values: l[n].values, format: l[n].format, closeCallback: d, title: l[n].title || l[n].field, init: c, open: h, pane: a.pane, change: u }), r && r.messages && (s.messages = ce(!0, {}, f.messages, r.messages)), r && r.dataSource && (s.forceUnique = !1, s.checkSource = r.dataSource), r && r.multi ? i.kendoFilterMultiCheck(s) : i.kendoFilterMenu(s)) }, _filterRow: function () { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g = this; if (g._hasFilterRow()) for (i = g.options.$angular, n = R(g.columns), o = g.options.filterable, r = g.thead.find(".k-filter-row"), s = function (e) { g.trigger("filter", { filter: e.filter, field: e.field }) && e.preventDefault() }, this._updateHeader(this.dataSource.group().length), a = 0; a < n.length; a++)if (c = n[a], d = g.options.filterable.operators, u = !1, h = e("<th/>"), f = c.field, c.hidden && h.hide(), r.append(h), f && !1 !== c.filterable) { if (p = c.filterable && c.filterable.cell || {}, (l = g.options.dataSource) instanceof te && (l = g.options.dataSource.options), m = ce(!0, {}, o.messages), c.filterable && ce(!0, m, c.filterable.messages), !1 === p.enabled) { h.html("&nbsp;"); continue } p.dataSource && (l = p.dataSource, u = !0), c.filterable && c.filterable.operators && (d = c.filterable.operators), t = { column: c, dataSource: g.dataSource, suggestDataSource: l, customDataSource: u, field: f, messages: m, values: c.values, template: p.template, delay: p.delay, inputWidth: p.inputWidth, suggestionOperator: p.suggestionOperator, minLength: p.minLength, dataTextField: p.dataTextField, operator: p.operator, operators: d, showOperators: p.showOperators, change: s }, i && (t.$angular = i), e("<span/>").attr(J.attr("field"), f).appendTo(h).kendoFilterCell(t) } else h.html("&nbsp;") }, _sortable: function () { var e, t, i, n, o, r, s = this, a = R(s.columns), l = s.options.sortable, c = function (e) { s.trigger("sort", { sort: e.sort }) && e.preventDefault() }; if (l) { for (n = F(s.thead), o = 0, r = n.length; o < r; o++)!1 !== (e = a[o]).sortable && !e.command && e.field && (i = n.eq(o), (t = i.data("kendoColumnSorter")) && t.destroy(), i.attr("data-" + J.ns + "field", e.field).kendoColumnSorter(ce({}, l, e.sortable, { dataSource: s.dataSource, aria: !0, filter: ":not(.k-column-active)", change: c }))); n = null } }, _columns: function (t) { var i, n, o, r = this, s = r.table, a = s.find("col"), l = r.options.dataSource; if (t = t.length ? t : de(s.find("th"), function (t, i) { var n = (t = e(t)).attr(J.attr("sortable")), o = t.attr(J.attr("filterable")), r = t.attr(J.attr("type")), s = t.attr(J.attr("groupable")), l = t.attr(J.attr("field")), c = t.attr(J.attr("title")), d = t.attr(J.attr("menu")); return l || (l = t.text().replace(/\s|[^A-z0-9]/g, "")), { field: l, type: r, title: c, sortable: "false" !== n, filterable: "false" !== o, groupable: "false" !== s, menu: d, template: t.attr(J.attr("template")), width: a.eq(i).css("width") } }), i = !(r.table.find("tbody tr").length > 0 && (!l || !l.transport)), r.options.scrollable) { if (o = t, n = D(t), t = A(t), n.length > 0 && 0 === t.length) throw Error("There should be at least one non locked column"); (function (e, t) { var i, n, o = 0, r = e.find("th:not(.k-group-cell)"); for (i = 0, n = t.length; i < n; i++)t[i].locked && (r.eq(i).insertBefore(r.eq(o)), r = e.find("th:not(.k-group-cell)"), o++) })(r.element.find("tr:has(th):first"), o), t = n.concat(t) } r.columns = function e(t, i, n) { return de(t, function (t) { var o, r; return h(t = typeof t === tt ? { field: t } : t) && !n || (t.attributes = B(t.attributes), t.footerAttributes = B(t.footerAttributes), t.headerAttributes = B(t.headerAttributes), o = !0), t.columns && (t.columns = e(t.columns, i, o)), r = J.guid(), t.headerAttributes = ce({ id: r }, t.headerAttributes), ce({ encoded: i, hidden: o }, t) }) }(t, i) }, _groups: function () { var e = this.dataSource.group(); return e ? e.length : 0 }, _tmpl: function (e, t, o, r) { var s, a, l, c = this, d = ce({}, J.Template, c.options.templateSettings), u = t.length, h = { storage: {}, count: 0 }, f = c._hasDetails(), p = [], m = c._groups(), g = c.options.navigatable; if (!e) { for (e = "<tr", o && p.push("k-alt"), f && p.push("k-master-row"), p.length && (e += ' class="' + p.join(" ") + '"'), u && (e += " " + J.attr("uid") + '="#=' + J.expr("uid", d.paramName) + '#"'), e += " role='row'>", m > 0 && !r && (e += i(m)), f && (e += '<td class="k-hierarchy-cell"><a class="k-icon k-i-expand" href="\\#" ' + ot + '="' + nt + '" tabindex="-1"></a></td>'), s = 0; s < u; s++)l = t[s], a = l.template, typeof a, e += "<td" + n(l.attributes), g && (e += " aria-describedby='" + l.headerAttributes.id + "'"), e += " role='gridcell'>", e += c._cellTmpl(l, h), e += "</td>"; e += "</tr>" } return e = J.template(e, d), h.count > 0 ? me(e, h.storage) : e }, _headerCellText: function (e) { var t = ce({}, J.Template, this.options.templateSettings), i = e.headerTemplate, n = typeof i, o = e.title || e.field || ""; return n === et ? o = J.template(i, t)({}) : n === tt && (o = i), o }, _cellTmpl: function (e, t) { var i, n, o = this, r = ce({}, J.Template, o.options.templateSettings), s = e.template, a = r.paramName, l = e.field, c = "", d = e.format, u = typeof s, h = e.values; if (e.command) { if (he(e.command)) { for (i = 0, n = e.command.length; i < n; i++)c += e.command[i].visible ? J.format("#= {0}(data)? '{1}':'' #", e.command[i].visible, o._createButton(e.command[i]).replace(st, "\\#")) : o._createButton(e.command[i]).replace(st, "\\#"); return c } return o._createButton(e.command).replace(st, "\\#") } return u === et ? (t.storage["tmpl" + t.count] = s, c += "#=this.tmpl" + t.count + "(" + a + ")#", t.count++) : u === tt ? c += s : h && h.length && le(h[0]) && "value" in h[0] && l ? (c += "#var v =" + J.stringify(N(h)).replace(st, "\\#") + "#", c += "#var f = v[", r.useWithBlock || (c += a + "."), c += l + "]#", c += "${f != null ? f : ''}") : (c += e.encoded ? "#:" : "#=", d && (c += 'kendo.format("' + d.replace(rt, "\\$1") + '",'), l ? (l = J.expr(l, a), c += l + "==null?'':" + l) : c += "''", d && (c += ")"), c += "#"), c }, _templates: function () { var t = this, i = t.options, n = t.dataSource, o = n.group(), r = t.footer || t.wrapper.find(".k-grid-footer"), s = n.aggregate(), a = R(t.columns), l = R(D(t.columns)), c = i.scrollable ? R(A(t.columns)) : a; if (i.scrollable && l.length) { if (i.rowTemplate || i.altRowTemplate) throw Error("Having both row template and locked columns is not supported"); t.rowTemplate = t._tmpl(i.rowTemplate, c, !1, !0), t.altRowTemplate = t._tmpl(i.altRowTemplate || i.rowTemplate, c, !0, !0), t.lockedRowTemplate = t._tmpl(i.rowTemplate, l), t.lockedAltRowTemplate = t._tmpl(i.altRowTemplate || i.rowTemplate, l, !0) } else t.rowTemplate = t._tmpl(i.rowTemplate, c), t.altRowTemplate = t._tmpl(i.altRowTemplate || i.rowTemplate, c, !0); t._hasDetails() && (t.detailTemplate = t._detailTmpl(i.detailTemplate || "")), (t._group && !ve(s) || !ve(s) && !r.length || ue(a, function (e) { return e.footerTemplate }).length) && (t.footerTemplate = t._footerTmpl(a, s, "footerTemplate", "k-footer-template")), o && ue(a, function (e) { return e.groupFooterTemplate }).length && (s = e.map(o, function (e) { return e.aggregates }), t.groupFooterTemplate = t._footerTmpl(c, s, "groupFooterTemplate", "k-group-footer", l.length), i.scrollable && l.length && (t.lockedGroupFooterTemplate = t._footerTmpl(l, s, "groupFooterTemplate", "k-group-footer"))), t.options.noRecords && (t.noRecordsTemplate = t._noRecordsTmpl()) }, _noRecordsTmpl: function () { var t, i, n, o = this.options.scrollable && !this.wrapper[0].style.height ? ' style="margin:0 auto;position:static;"' : "", r = { storage: {}, count: 0 }, s = e.extend({}, J.Template, this.options.templateSettings), a = s.paramName, l = ""; return t = this.options.noRecords.template ? this.options.noRecords.template : J.format('<div class="k-grid-norecords-template"{1}>{0}</div>', this.options.messages.noRecords, o), "function" === (i = typeof t) ? (r.storage["tmpl" + r.count] = t, l += "#=this.tmpl" + r.count + "(" + a + ")#", r.count++) : "string" === i && (l += t), n = J.template(J.format('<div class="{0}">{1}</div>', je, l), s), r.count > 0 && (n = e.proxy(n, r.storage)), n }, _footerTmpl: function (e, t, o, r, s) { var a, l, c, d, u, h = this, f = ce({}, J.Template, h.options.templateSettings), p = f.paramName, m = "", g = {}, v = 0, _ = {}, b = h._groups(), w = h.dataSource._emptyAggregates(t); for (m += '<tr class="' + r + '">', b > 0 && !s && (m += i(b)), h._hasDetails() && (m += '<td class="k-hierarchy-cell">&nbsp;</td>'), a = 0, l = e.length; a < l; a++)u = e[a], c = u[o], d = typeof c, m += "<td" + n(u.footerAttributes) + ">", c ? (d !== et && (_ = w[u.field] ? ce({}, f, { paramName: p + "['" + u.field + "']" }) : {}, c = J.template(c, _)), g["tmpl" + v] = c, m += "#=this.tmpl" + v + "(" + p + ")#", v++) : m += "&nbsp;", m += "</td>"; return m += "</tr>", m = J.template(m, f), v > 0 ? me(m, g) : m }, _detailTmpl: function (e) { var t = this, n = "", o = ce({}, J.Template, t.options.templateSettings), r = o.paramName, s = {}, a = 0, l = t._groups(), c = f(R(t.columns)).length, d = typeof e; return n += '<tr class="k-detail-row">', l > 0 && (n += i(l)), n += '<td class="k-hierarchy-cell"></td><td class="k-detail-cell"' + (c ? ' colspan="' + c + '"' : "") + ">", d === et ? (s["tmpl" + a] = e, n += "#=this.tmpl" + a + "(" + r + ")#", a++) : n += e, n += "</td></tr>", n = J.template(n, o), a > 0 ? me(n, s) : n }, _hasDetails: function () { return null !== this.options.detailTemplate || (this._events[Ie] || []).length }, _hasFilterRow: function () { var t = this.options.filterable, i = t && typeof t.mode == tt && -1 != t.mode.indexOf("row"), n = this.columns, o = e.grep(n, function (e) { return !1 === e.filterable }); return n.length && o.length == n.length && (i = !1), i }, _details: function () { var t = this; if (t.options.scrollable && t._hasDetails() && D(t.columns).length) throw Error("Having both detail template and locked columns is not supported"); t.table.on(Xe + Te, ".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse", function (i) { var n, o, r = e(this), s = r.hasClass("k-i-expand"), a = r.closest("tr.k-master-row"), l = t.detailTemplate, c = t._hasDetails(), d = s ? it : nt; return r.toggleClass("k-i-expand", !s).toggleClass("k-i-collapse", s).attr(ot, d), n = a.next(), c && !n.hasClass("k-detail-row") && (o = t.dataItem(a), n = e(l(o)).addClass(a.hasClass("k-alt") ? "k-alt" : "").insertAfter(a), t.angular("compile", function () { return { elements: n.get(), data: [{ dataItem: o }] } }), t.trigger(Ie, { masterRow: a, detailRow: n, data: o, detailCell: n.find(".k-detail-cell") })), t.trigger(s ? Ve : Ue, { masterRow: a, detailRow: n }), n.toggle(s), t._current && t._current.attr("aria-expanded", s), i.preventDefault(), !1 }) }, dataItem: function (t) { if (!(t = e(t)[0])) return null; var i, n, o = this.tbody.children(), r = /k-grouping-row|k-detail-row|k-group-footer/, s = t.sectionRowIndex; for (n = s, i = 0; i < s; i++)r.test(o[i].className) && n--; return this._data[n] }, expandRow: function (t) { e(t).find("> td .k-i-expand").click() }, collapseRow: function (t) { e(t).find("> td .k-i-collapse").click() }, _createHeaderCells: function (e, i) { var o, r, s, a, l, c, d = "", u = R(this.columns); for (o = 0, a = e.length; o < a; o++)r = e[o].column || e[o], s = this._headerCellText(r), l = "", c = fe(r, u), r.command ? (d += "<th scope='col'" + n(r.headerAttributes), i && !e[o].colSpan && (d += " rowspan='" + i + "'"), c > -1 && (d += J.attr("index") + "='" + c + "'"), d += ">" + s + "</th>") : (r.field && (l = J.attr("field") + "='" + r.field + "' "), d += "<th scope='col' role='columnheader' " + l, d += " aria-haspopup='true'", i && !e[o].colSpan && (d += " rowspan='" + i + "'"), e[o].colSpan > 1 && (d += 'colspan="' + (e[o].colSpan - x(r.columns)) + '" ', d += J.attr("colspan") + "='" + e[o].colSpan + "'"), r.title && (d += J.attr("title") + '="' + r.title.replace('"', "&quot;").replace(/'/g, "'") + '" '), r.groupable !== t && (d += J.attr("groupable") + "='" + r.groupable + "' "), r.aggregates && r.aggregates.length && (d += J.attr("aggregates") + "='" + r.aggregates + "'"), c > -1 && (d += J.attr("index") + "='" + c + "'"), d += n(r.headerAttributes), d += ">" + s + "</th>"); return d }, _appendLockedColumnContent: function () { var t, i, n, o, r, s = this.columns, a = this.table.find("colgroup"), l = a.find("col:not(.k-group-col,.k-hierarchy-col)"), c = e(), d = 0, u = 0; for (t = 0, i = s.length; t < i; t++)if (s[t].locked) if (h(s[t])) { for (o = 1, s[t].columns && (o = R(s[t].columns).length - x(s[t].columns)), o = o || 1, r = 0; r < o; r++)c = c.add(l.eq(t + u + r - d)); u += o - 1 } else d++; n = e('<div class="k-grid-content-locked"><table' + (ht ? ' cellspacing="0"' : "") + "><colgroup/><tbody></tbody></table></div>"), a.detach(), n.find("colgroup").append(c), a.insertBefore(this.table.find("tbody")), this.lockedContent = n.insertBefore(this.content), this.lockedTable = n.children("table") }, _appendLockedColumnFooter: function () { var t, i, n = this, o = n.footer, r = o.find(".k-footer-template>td"), s = o.find(".k-grid-footer-wrap>table>colgroup>col"), a = e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'), l = n._groups(), c = e(), d = e(); for (c = c.add(r.filter(".k-group-cell")), t = 0, i = R(D(n.columns)).length; t < i; t++)c = c.add(r.eq(t + l)); for (d = d.add(s.filter(".k-group-col")), t = 0, i = f(R(I(n.columns))).length; t < i; t++)d = d.add(s.eq(t + l)); c.appendTo(a.find("tr")), d.appendTo(a.find("colgroup")), n.lockedFooter = a.prependTo(o) }, _appendLockedColumnHeader: function (t) { var i, n, o, r, s, a, l, c, d, u, f = this, m = this.columns, g = [], v = 0, _ = e(), b = f._hasFilterRow(), w = 0, y = e(), k = 0, C = e(), D = f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"), A = f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"), E = f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"), I = 0; for (i = 0, o = m.length; i < o; i++) { if (m[i].locked) { if (a = A.eq(i), k = R(m[i].columns || []).length, h(m[i])) { for (l = null, m[i].columns && (l = k - x(m[i].columns)), l = l || 1, c = 0; c < l; c++)_ = _.add(D.eq(i + I + c - v)); I += l - 1 } for (T([m[i]], z(a), g, 0, 0), k = k || 1, d = 0; d < k; d++)y = y.add(E.eq(w + d)); w += k } m[i].columns && (v += x(m[i].columns)), h(m[i]) || v++ } if (g.length) { for (n = '<div class="k-grid-header-locked" style="width:1px"><table' + (ht ? ' cellspacing="0"' : "") + "><colgroup/><thead>", n += Array(g.length + 1).join("<tr></tr>"), s = e(n += (b ? '<tr class="k-filter-row" />' : "") + "</thead></table></div>"), (D = s.find("colgroup")).append(f.thead.prev().find("col.k-group-col").add(_)), r = s.find("thead tr:not(.k-filter-row)"), i = 0, o = g.length; i < o; i++)C = p(g[i]), r.eq(i).append(f.thead.find("tr:eq(" + i + ") .k-group-cell").add(C)); return u = S(this.thead), g.length < u && function (e, t) { var i, n, o = e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"); for (n = 0; n < o.length; n++)(i = o[n].rowSpan) > 1 && (o[n].rowSpan = i - t || 1) }(s, u - g.length), s.find(".k-filter-row").append(f.thead.find(".k-filter-row .k-group-cell").add(y)), this.lockedHeader = s.prependTo(t), this.thead.find(".k-group-cell").remove(), !0 } return !1 }, _removeLockedContainers: function () { var e = this.lockedHeader.add(this.lockedContent).add(this.lockedFooter); J.destroy(e), e.off(Te).remove(), this.lockedHeader = this.lockedContent = this.lockedFooter = null, this.selectable = null }, _thead: function () { var t, i, n, o, r, s, a, l = this, c = l.columns, d = l._hasDetails() && c.length, u = l._hasFilterRow(), h = "", f = l.table.find(">thead"), p = l.element.find("thead:first").length > 0; if (f.length || (f = e("<thead/>").insertBefore(l.tbody)), l.lockedHeader && l.thead ? ((i = l.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(), i = e(), l._removeLockedContainers()) : i = l.element.find(p ? "thead:first tr:has(th):not(.k-filter-row)" : "tr:has(th):first"), !i.length && !(i = f.children().first()).length) { for (n = [{ rowSpan: 1, cells: [], index: 0 }], l._prepareColumns(n, c), t = 0; t < n.length; t++)h += "<tr>", d && (h += '<th class="k-hierarchy-cell" scope="col">' + l.options.messages.expandCollapseColumnHeader + "</th>"), h += l._createHeaderCells(n[t].cells, n[t].rowSpan), h += "</tr>"; i = e(h) } u && ((o = e("<tr/>")).addClass("k-filter-row"), (d || i.find(".k-hierarchy-cell").length) && o.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'), (r = (l.thead || f).find(".k-filter-row")).length && (J.destroy(r), r.remove()), f.append(o)), i.children().length ? d && !i.find(".k-hierarchy-cell")[0] && i.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>') : (h = "", d && (h += '<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'), h += l._createHeaderCells(c), i.html(h)), i.attr("role", "row").find("th").addClass("k-header"), l.options.scrollable || f.addClass("k-grid-header"), i.find("script").remove().end().prependTo(f), l.thead && l._destroyColumnAttachments(), this.angular("cleanup", function () { return { elements: f.find("th").get() } }), this.angular("compile", function () { return { elements: f.find("th").get(), data: de(c, function (e) { return { column: e } }) } }), l.thead = f.attr("role", "rowgroup"), l._sortable(), l._filterable(), l._filterRow(), l._scrollable(), l._updateCols(), l._columnMenu(), (a = this.options.scrollable && D(this.columns).length) && (s = l._appendLockedColumnHeader(l.thead.closest(".k-grid-header")), l._appendLockedColumnContent(), l.lockedContent.bind("DOMMouseScroll" + Te + " mousewheel" + Te, me(l._wheelScroll, l))), l._updateColumnCellIndex(), l._updateFirstColumnClass(), l._resizable(), l._draggable(), l._reorderable(), l._updateHeader(l._groups()), a && (s && l._syncLockedHeaderHeight(), l._applyLockedContainersWidth()), l.groupable && l._attachGroupable() }, _retrieveFirstColumn: function (t, i) { var n, o = e(); if (i.length && t[0]) { for (n = t[0]; n.columns && n.columns.length;)n = n.columns[0], i = i.filter(":not(:first())"); o = o.add(i) } return o }, _updateFirstColumnClass: function () { var t, i, n = this, o = n.columns || [], r = n._hasDetails() && o.length; r || n._groups() || (t = n.thead.find(">tr:not(.k-filter-row):not(:first)"), o = A(o), i = n._retrieveFirstColumn(o, t), n._isLocked() && (t = n.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"), o = D(n.columns), i = i.add(n._retrieveFirstColumn(o, t))), i.each(function () { var t = e(this).find("th"); t.removeClass("k-first"), t.eq(0).addClass("k-first") })) }, _prepareColumns: function (e, t, i, n) { var o, r, s = n || e[e.length - 1], a = e[s.index + 1], l = 0; for (o = 0; o < t.length; o++)r = { column: t[o], colSpan: 0 }, s.cells.push(r), t[o].columns && t[o].columns.length && (a || (a = { rowSpan: 0, cells: [], index: e.length }, e.push(a)), r.colSpan = t[o].columns.length, this._prepareColumns(e, t[o].columns, r, a), l += r.colSpan - 1, s.rowSpan = e.length - s.index); i && (i.colSpan += l) }, _wheelScroll: function (e) { var t, i, n; e.ctrlKey || (t = this.content, this.options.scrollable.virtual && (t = this.virtualScrollable.verticalScrollbar), i = t.scrollTop(), (n = J.wheelDeltaY(e)) && (t[0].scrollHeight > t[0].clientHeight && (t[0].scrollTop < t[0].scrollHeight - t[0].clientHeight && n < 0 || t[0].scrollTop > 0 && n > 0) && e.preventDefault(), t.scrollTop(i + -n))) }, _isLocked: function () { return null != this.lockedHeader }, _updateHeaderCols: function () { var e = this.thead.parent().add(this.table); this._isLocked() ? H(e, M(E(this.columns)), this._hasDetails(), 0) : H(e, M(f(this.columns)), this._hasDetails(), 0) }, _updateCols: function (e) { e = e || this.thead.parent().add(this.table), this._appendCols(e, this._isLocked()) }, _updateLockedCols: function (e) { this._isLocked() && H(e = e || this.lockedHeader.find("table").add(this.lockedTable), M(I(this.columns)), this._hasDetails(), this._groups()) }, _appendCols: function (e, t) { t ? H(e, M(E(this.columns)), this._hasDetails(), 0) : H(e, M(f(this.columns)), this._hasDetails(), this._groups()) }, _autoColumns: function (e) { if (e && e.toJSON) { var t, i, n = this; for (t in e = e.toJSON(), i = !(n.table.find("tbody tr").length > 0 && (!n.dataSource || !n.dataSource.transport)), e) n.columns.push({ field: t, encoded: i, headerAttributes: { id: J.guid() } }); n._thead(), n._templates() } }, _rowsHtml: function (e, t) { var i, n, o = "", r = t.rowTemplate, s = t.altRowTemplate; for (i = 0, n = e.length; i < n; i++)o += i % 2 ? s(e[i]) : r(e[i]), this._data.push(e[i]); return o }, _groupRowHtml: function (e, t, i, n, o, r) { var s, a, l, c, d = this, u = "", h = e.field, f = ue(R(d.columns), function (e) { return e.field == h })[0] || {}, p = f.groupHeaderTemplate, m = (f.title || h) + ": " + function (e, t, i, n) { var o = i && i.length && le(i[0]) && "value" in i[0] ? N(i)[e] : e; return o = null != o ? o : "", t ? J.format(t, o) : !1 === n ? o : J.htmlEncode(o) }(e.value, f.format, f.values, f.encoded), g = d._groupAggregatesDefaultObject || {}, v = e.items, _ = ce({}, g, e.aggregates), b = ce({}, { field: e.field, value: e.value, items: v, aggregates: _ }, e.aggregates[e.field]), w = o.groupFooterTemplate; if (p && (m = typeof p === et ? p(b) : J.template(p)(b)), u += n(t, i, m), e.hasSubgroups) for (s = 0, a = v.length; s < a; s++)u += d._groupRowHtml(v[s], r ? t : t - 1, i + 1, n, o, r); else u += d._rowsHtml(v, o); if (w) { for (c in l = {}, _) l[c] = ce({}, _[c], { group: { field: e.field, value: e.value, items: v } }); u += w(l) } return u }, collapseGroup: function (t) { var i, n, o, r, s, a, l, c, d, u; for (t = e(t), n = this.options.groupable, o = n.showFooter, r = o ? 0 : 1, a = e(), this._isLocked() && (t.closest("div").hasClass("k-grid-content-locked") ? a = this.tbody.children("tr:eq(" + t.index() + ")").nextAll("tr") : (a = t.nextAll("tr"), t = this.lockedTable.find(">tbody>tr:eq(" + t.index() + ")"))), i = t.find(".k-group-cell").length, t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"), t.find("td[aria-expanded='true']:first").attr("aria-expanded", !1).find("a").attr(ot, nt), t = t.nextAll("tr"), u = [], l = 0, c = t.length; l < c && (d = t.eq(l), s = d.find(".k-group-cell").length, d.hasClass("k-grouping-row") ? r++ : d.hasClass("k-group-footer") && r--, !(s <= i || d.hasClass("k-group-footer") && r < 0)); l++)a.length && u.push(a[l]), u.push(d[0]); e(u).hide() }, expandGroup: function (t) { t = e(t); var i, n, o, r, s, a = this.options.groupable.showFooter, l = e(), c = [], d = 1; for (this._isLocked() && (t.closest("div").hasClass("k-grid-content-locked") ? l = this.tbody.children("tr:eq(" + t.index() + ")").nextAll("tr") : (l = t.nextAll("tr"), t = this.lockedTable.find(">tbody>tr:eq(" + t.index() + ")"))), i = t.find(".k-group-cell").length, t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"), t.find("td[aria-expanded='false']:first").attr("aria-expanded", !0).find("a").attr(ot, it), t = t.nextAll("tr"), r = 0, s = t.length; r < s && (n = t.eq(r), !((o = n.find(".k-group-cell").length) <= i)); r++)o != i + 1 || n.hasClass("k-detail-row") || (n.show(), l.eq(r).show(), n.hasClass("k-grouping-row") && n.find(".k-icon").hasClass("k-i-collapse") && this.expandGroup(n), n.hasClass("k-master-row") && n.find(".k-icon").hasClass("k-i-collapse") && (n.next().show(), l.eq(r + 1).show())), n.hasClass("k-grouping-row") && (a && c.push(n.is(":visible")), d++), n.hasClass("k-group-footer") && (a && n.toggle(c.pop()), 1 == d ? (n.show(), l.eq(r).show()) : d--) }, _updateHeader: function (t) { var i = this, n = i._isLocked() ? i.lockedHeader.find("thead") : i.thead, o = n.find("tr.k-filter-row").find("th.k-group-cell").length, r = n.find("tr:first").find("th.k-group-cell").length, s = n.children("tr:not(:first)").filter(function () { return !e(this).children(":visible").length }); t > r ? (e(Array(t - r + 1).join('<th class="k-group-cell k-header" scope="col">' + i.options.messages.expandCollapseColumnHeader + "</th>")).prependTo(n.children("tr:not(.k-filter-row)")), i.element.is(":visible") && s.find("th.k-group-cell").hide()) : t < r && n.find("tr").each(function () { e(this).find("th.k-group-cell").filter(":eq(" + t + "),:gt(" + t + ")").remove() }), t > o && e(Array(t - o + 1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(n.find(".k-filter-row")) }, _firstDataItem: function (e, t) { return e && t && (e = e.hasSubgroups ? this._firstDataItem(e.items[0], t) : e.items[0]), e }, _updateTablesWidth: function () { var t, i = this; i._isLocked() && (t = e(">.k-grid-footer>.k-grid-footer-wrap>table", i.wrapper).add(i.thead.parent()).add(i.table), i._footerWidth = q(t.eq(0)), t.width(i._footerWidth), (t = e(">.k-grid-footer>.k-grid-footer-locked>table", i.wrapper).add(i.lockedHeader.find(">table")).add(i.lockedTable)).width(q(t.eq(0)))) }, hideColumn: function (i) { var n, o, r, a, l, c, p, m, g, v = this, _ = 0, b = v.footer || v.wrapper.find(".k-grid-footer"), y = v.columns, x = v.lockedHeader ? F(v.lockedHeader.find(">table>thead")).filter(u).length : 0; if ((i = "number" == typeof i ? y[i] : le(i) ? ue(k(y), function (e) { return e === i })[0] : ue(k(y), function (e) { return e.field === i })[0]) && h(i)) { if (i.columns && i.columns.length) { for (l = w(i, y), d(i, !1), O(s(e(">table>thead", v.lockedHeader), v.thead, ">tr:eq(" + l.row + ")>th"), l.cell, !1), o = 0; o < i.columns.length; o++)this.hideColumn(i.columns[o]); return v.trigger(Le, { column: i }), t } if (m = fe(i, f(R(y))), d(i, !1), v._setParentsVisibility(i, !1), v._templates(), v._updateCols(), v._updateLockedCols(), g = v.thead, c = m, v.lockedHeader && x > m ? g = v.lockedHeader.find(">table>thead") : c -= x, F(g).filter(u).eq(c)[0].style.display = "none", O(s(e(">table>thead", v.lockedHeader), v.thead, ">tr.k-filter-row>th"), m, !1), b[0] && (v._updateCols(b.find(">.k-grid-footer-wrap>table")), v._updateLockedCols(b.find(">.k-grid-footer-locked>table")), O(b.find(".k-footer-template>td"), m, !1)), v.lockedTable && x > m ? V(v.lockedTable.find(">tbody>tr"), m) : V(v.tbody.children(), m - x), v.lockedTable) v._updateTablesWidth(), v._applyLockedContainersWidth(), v._syncLockedContentHeight(), v._syncLockedHeaderHeight(), v._syncLockedFooterHeight(); else { for (r = v.thead.prev().find("col"), o = 0, p = r.length; o < p; o += 1) { if (!(a = r[o].style.width) || -1 != a.indexOf("%")) { _ = 0; break } _ += parseInt(a, 10) } n = e(">.k-grid-header table:first,>.k-grid-footer table:first", v.wrapper).add(v.table), v._footerWidth = null, _ && (n.each(function () { this.style.width = _ + "px" }), v._footerWidth = _), ut.msie && 8 == ut.version && (n.css("display", "inline-table"), setTimeout(function () { n.css("display", "table") }, 1)) } v._updateFirstColumnClass(), v.trigger(Le, { column: i }) } }, _setParentsVisibility: function (t, i) { var n, o, r, a, l, u = this.columns, h = [], p = i ? function (e) { return f(e.columns).length && e.hidden } : function (e) { return !f(e.columns).length && !e.hidden }; if (c(t, u, h) && h.length) for (n = h.length - 1; n >= 0; n--)r = _(o = h[n], u), a = s(e(">table>thead", this.lockedHeader), this.thead, ">tr:eq(" + r.row + ")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r.cell), p(o) && (d(o, i), a[0].style.display = i ? "" : "none"), a.filter("[" + J.attr("colspan") + "]").length && (l = parseInt(a.attr(J.attr("colspan")), 10), a[0].colSpan = l - x(o.columns) || 1) }, showColumn: function (i) { var n, o, r, a, l, c, u, f, p, m, g = this, v = g.columns, b = g.footer || g.wrapper.find(".k-grid-footer"), w = g.lockedHeader ? F(g.lockedHeader.find(">table>thead")).length : 0; if ((i = "number" == typeof i ? v[i] : le(i) ? ue(k(v), function (e) { return e === i })[0] : ue(k(v), function (e) { return e.field === i })[0]) && !h(i)) { if (i.columns && i.columns.length) { for (c = _(i, v), d(i, !0), O(s(e(">table>thead", g.lockedHeader), g.thead, ">tr:eq(" + c.row + ")>th"), c.cell, !0), n = 0; n < i.columns.length; n++)this.showColumn(i.columns[n]); return g.trigger(He, { column: i }), t } if (p = fe(i, R(v)), d(i, !0), g._setParentsVisibility(i, !0), g._templates(), g._updateCols(), g._updateLockedCols(), m = g.thead, l = p, g.lockedHeader && w > p ? m = g.lockedHeader.find(">table>thead") : l -= w, F(m).eq(l)[0].style.display = "", O(s(e(">table>thead", g.lockedHeader), g.thead, ">tr.k-filter-row>th"), p, !0), b[0] && (g._updateCols(b.find(">.k-grid-footer-wrap>table")), g._updateLockedCols(b.find(">.k-grid-footer-locked>table")), O(b.find(".k-footer-template>td"), p, !0)), g.lockedTable && w > p ? U(g.lockedTable.find(">tbody>tr"), p) : U(g.tbody.children(), p - w), g.lockedTable) g._updateTablesWidth(), g._applyLockedContainersWidth(), g._syncLockedContentHeight(), g._syncLockedHeaderHeight(); else if (r = e(">.k-grid-header table:first,>.k-grid-footer table:first", g.wrapper).add(g.table), i.width) { for (a = 0, f = g.thead.prev().find("col"), n = 0, o = f.length; n < o; n += 1) { if ((u = f[n].style.width).indexOf("%") > -1) { a = 0; break } a += parseInt(u, 10) } g._footerWidth = null, a && (r.each(function () { this.style.width = a + "px" }), g._footerWidth = a) } else r.width(""); g._updateFirstColumnClass(), g.trigger(He, { column: i }) } }, _progress: function (e) { var t = this.element; this._editContainer && "popup" === this._editMode() ? t = this._editContainer : this.lockedContent ? t = this.wrapper : this.element.is("table") ? t = this.element.parent() : this.content && this.content.length && (t = this.content), J.ui.progress(t, e) }, _resize: function (e, t) { this._syncLockedContentHeight(), this._syncLockedHeaderHeight(), this.content && (this._setContentWidth(), this._setContentHeight()), this.virtualScrollable && (t || this._rowHeight) && (t && (this._rowHeight = null), this.virtualScrollable.repaintScrollbar()) }, _isActiveInTable: function () { var t = ne(); return !!t && (this.table[0] === t || e.contains(this.table[0], t) || this._isLocked() && (this.lockedTable[0] === t || e.contains(this.lockedTable[0], t))) }, refresh: function (t) { var i, n = this, o = n.dataSource.view(), r = n.options.navigatable, s = e(n.current()), a = !1, l = (n.dataSource.group() || []).length, c = l + M(f(n.columns)).length; t && "itemchange" === t.action && n.editable || (t && "remove" === t.action && n.editable && n.editable.options.model && fe(n.editable.options.model, t.items) > -1 && n.editable.options.model.unbind(Be, n._modelChangeHandler), t = t || {}, n.trigger("dataBinding", { action: t.action || "rebind", index: t.index, items: t.items }) || (n._angularItems("cleanup"), r && (n._isActiveInTable() || n._editContainer && n._editContainer.data("kendoWindow")) && (a = s.is("th"), i = Math.max(n.cellIndex(s), 0)), n._destroyEditable(), n._progress(!1), n._hideResizeHandle(), n._data = [], n.columns.length || (n._autoColumns(n._firstDataItem(o[0], l)), c = l + n.columns.length), n._group = l > 0 || n._group, n._group && (n._templates(), n._updateCols(), n._updateLockedCols(), n._updateHeader(l), n._group = l > 0), n._renderContent(o, c, l), n._renderLockedContent(o, c, l), n._footer(), n._renderNoRecordsContent(), n._setContentHeight(), n._setContentWidth(n.content && n.content.scrollLeft()), n.lockedTable && (n.options.scrollable.virtual ? n.content.find(">.k-virtual-scrollable-wrap").trigger("scroll") : n.touchScroller ? n.touchScroller.movable.trigger("change") : (n.wrapper.one("scroll", function (e) { e.stopPropagation() }), n.content.trigger("scroll"))), n._restoreCurrent(i, a), n.touchScroller && n.touchScroller.contentResized(), n.selectable && n.selectable.resetTouchEvents(), n._muteAngularRebind(function () { n._angularItems("compile") }), n.options.selectable && !J.ui.Selectable.parseOptions(n.options.selectable).cell && n.options.persistSelection && n._restoreSelection(), n.trigger(Oe))) }, _restoreCurrent: function (i, n) { var o, r, s; i === t || i < 0 || (this._removeCurrent(), n ? this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(i)) : (o = 0, this._rowVirtualIndex ? o = this.virtualScrollable.position(this._rowVirtualIndex) : i = 0, r = e(), this.lockedTable && (r = this.lockedTable.find(">tbody>tr").eq(o)), r = r.add(this.tbody.children().eq(o)), s = r.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(i), this._setCurrent(s)), this._current && $(this._current.closest("table")[0], !0)) }, _restoreSelection: function () { var e = this, t = e.tbody.children(":not(.k-grouping-row,.k-detail-row)"); t = ue(t, function (t) { var i = e.dataItem(t)[e.dataSource.options.schema.model.id]; if (e._selectedIds[i]) return t }), e.select(t) }, _angularItems: function (e) { J.ui.DataBoundWidget.fn._angularItems.call(this, e), "cleanup" === e && this._cleanupDetailItems(), this._angularGroupItems(e), this._angularGroupFooterItems(e) }, _cleanupDetailItems: function () { var e = this; e._hasDetails() && (e.angular("cleanup", function () { return { elements: e.tbody.children(".k-detail-row") } }), e.tbody.find(".k-detail-cell").empty()) }, _angularGroupItems: function (t) { var i = this, n = i.tbody; i.lockedContent && (n = i.lockedTable.find("tbody")), i._group && i.angular(t, function () { return { elements: n.children(".k-grouping-row"), data: e.map(function e(t) { var i, n, o = []; for (n = 0; n < t.length && (i = t[n], "field" in i && "value" in i && "items" in i); n++)o.push(i), i.hasSubgroups && (o = o.concat(e(i.items))); return o }(i.dataSource.view()), function (e) { return { dataItem: e } }) } }) }, _angularGroupFooterItems: function (t) { var i = this, n = i.tbody; i.lockedContent && (n = i.element), i._group && i.groupFooterTemplate && i.angular(t, function () { return { elements: n.find(".k-group-footer"), data: e.map(function e(t) { var i, n, o = []; for (n = 0; n < t.length && (i = t[n], "field" in i && "value" in i && "items" in i); n++)i.hasSubgroups && (o = o.concat(e(i.items))), o.push(i.aggregates); return o }(i.dataSource.view()), function (e) { return { dataItem: e } }) } }) }, _renderContent: function (e, t, i) { var n, o, r = this, s = "", a = null != r.lockedContent, l = { rowTemplate: r.rowTemplate, altRowTemplate: r.altRowTemplate, groupFooterTemplate: r.groupFooterTemplate }; if (t = a ? t - M(I(r.columns)).length : t, i > 0) for (t = a ? t - i : t, r.detailTemplate && t++, r.groupFooterTemplate && (r._groupAggregatesDefaultObject = r.dataSource.aggregates()), n = 0, o = e.length; n < o; n++)s += r._groupRowHtml(e[n], t, 0, a ? Z : X, l, a); else s += r._rowsHtml(e, l); r.tbody = P(r.tbody, r.table, s, this.options.$angular) }, _renderLockedContent: function (e, t, i) { var n, o, r, s = "", a = { rowTemplate: this.lockedRowTemplate, altRowTemplate: this.lockedAltRowTemplate, groupFooterTemplate: this.lockedGroupFooterTemplate }; if (this.lockedContent) { if (r = this.lockedTable, i > 0) for (t -= f(R(A(this.columns))).length, n = 0, o = e.length; n < o; n++)s += this._groupRowHtml(e[n], t, 0, X, a); else s = this._rowsHtml(e, a); P(r.children("tbody"), r, s, this.options.$angular), this._syncLockedContentHeight() } }, _adjustRowsHeight: function (e, t) { var i, n, o, r, s = e[0].rows, a = s.length, l = t[0].rows, c = e.add(t), d = c.length, u = []; for (i = 0; i < a && l[i]; i++)s[i].style.height && (s[i].style.height = l[i].style.height = ""); for (i = 0; i < a && l[i]; i++)n = s[i].offsetHeight, o = l[i].offsetHeight, r = 0, n > o ? r = n : n < o && (r = o), u.push(r); for (i = 0; i < d; i++)c[i].style.display = "none"; for (i = 0; i < a; i++)u[i] && (s[i].style.height = l[i].style.height = u[i] + 1 + "px"); for (i = 0; i < d; i++)c[i].style.display = "" } }); J.ExcelMixin && J.ExcelMixin.extend(gt.prototype), J.PDFMixin && (J.PDFMixin.extend(gt.prototype), gt.prototype._drawPDF_autoPageBreak = function (i) { function n() { u && a !== t ? (d.one("change", o), d.page(a)) : (l.refresh(), o()) } function o() { f.appendTo(document.body); var t = e.extend({}, l.options.pdf, { _destructive: !0, progress: function (e) { i.notify({ page: e.page, pageNumber: e.pageNum, progress: .5 + e.pageNum / e.totalPages / 2, totalPages: e.totalPages }) } }); J.drawing.drawDOM(p, t).always(function () { f.remove() }).then(function (e) { c.resolve(e) }).fail(function (e) { c.reject(e) }) } function r() { var e = d.page(), t = u ? d.totalPages() : 1; s.append(h.find("tr")), e < t ? d.page(e + 1) : (d.unbind("change", r), n()) } var s, a, l = this, c = new e.Deferred, d = l.dataSource, u = l.options.pdf.allPages, h = l.wrapper.find('table[role="grid"] > tbody'), f = e("<div>").css({ position: "absolute", left: -1e4, top: -1e4 }), p = l.wrapper.clone().css({ height: "auto", width: "auto" }).appendTo(f); return p.find(".k-grid-content").css({ height: "auto", width: "auto", overflow: "visible" }), p.find('table[role="grid"]').css({ height: "auto", width: "100%", overflow: "visible" }), p.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(), p.find(".k-grid-header").css({ paddingRight: 0 }), this._initPDFProgress(i), s = p.find('table[role="grid"] > tbody').empty(), a = d.page(), u ? (d.bind("change", r), d.page(1)) : r(), c.promise() }, gt.prototype._drawPDF = function (i) { function n() { a && c !== t ? (s.unbind("change", o), s.one("change", function () { r.resolve(l) }), s.page(c)) : r.resolve(l) } function o() { d._drawPDFShadow({ width: d.wrapper.width() }, { avoidLinks: d.options.pdf.avoidLinks }).done(function (e) { var t = s.page(), o = a ? s.totalPages() : 1, r = { page: e, pageNumber: t, progress: t / o, totalPages: o }; i.notify(r), l.append(r.page), t < o ? s.page(t + 1) : n() }).fail(function (e) { r.reject(e) }) } var r, s, a, l, c, d = this; return d.options.pdf.paperSize && "auto" != d.options.pdf.paperSize ? d._drawPDF_autoPageBreak(i) : (r = new e.Deferred, s = d.dataSource, a = d.options.pdf.allPages, this._initPDFProgress(i), l = new J.drawing.Group, c = s.page(), a ? (s.bind("change", o), s.page(1)) : o(), r.promise()) }, gt.prototype._initPDFProgress = function (t) { var i, n = e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>"); n.prepend(this.wrapper.clone().css({ position: "absolute", top: 0, left: 0 })), this.wrapper.append(n), i = e("<div class='k-loading-pdf-progress'>").appendTo(n).kendoProgressBar({ type: "chunk", chunkCount: 10, min: 0, max: 1, value: 0 }).data("kendoProgressBar"), t.progress(function (e) { i.value(e.progress) }).always(function () { J.destroy(n), n.remove() }) }), ee.plugin(gt), ee.plugin(pt) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.listview.min", ["kendo.data.min", "kendo.editable.min", "kendo.selectable.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = "change", o = "cancel", r = "dataBound", s = "dataBinding", a = i.ui.Widget, l = i.keys, c = ">*:not(.k-loading-mask)", d = "progress", u = "error", h = "k-state-focused", f = "k-state-selected", p = "k-edit-item", m = "edit", g = "remove", v = "save", _ = ".kendoListView", b = e.proxy, w = i._activeElement, y = i.ui.progress, k = i.data.DataSource, x = i.ui.DataBoundWidget.extend({ init: function (t, n) { var o = this; n = e.isArray(n) ? { dataSource: n } : n, a.fn.init.call(o, t, n), n = o.options, o.wrapper = t = o.element, t[0].id && (o._itemId = t[0].id + "_lv_active"), o._element(), o._dataSource(), o._templates(), o._navigatable(), o._selectable(), o._pageable(), o._crudHandlers(), o.options.autoBind && o.dataSource.fetch(), i.notify(o) }, events: [n, o, s, r, m, g, v], options: { name: "ListView", autoBind: !0, selectable: !1, navigatable: !1, template: "", altTemplate: "", editTemplate: "" }, setOptions: function (e) { a.fn.setOptions.call(this, e), this._templates(), this.selectable && (this.selectable.destroy(), this.selectable = null), this._selectable() }, _templates: function () { var e = this.options; this.template = i.template(e.template || ""), this.altTemplate = i.template(e.altTemplate || e.template), this.editTemplate = i.template(e.editTemplate || "") }, _item: function (e) { return this.element.children()[e]() }, items: function () { return this.element.children() }, dataItem: function (t) { var n = i.attr("uid"), o = e(t).closest("[" + n + "]").attr(n); return this.dataSource.getByUid(o) }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.options.autoBind && e.fetch() }, _unbindDataSource: function () { var e = this; e.dataSource.unbind(n, e._refreshHandler).unbind(d, e._progressHandler).unbind(u, e._errorHandler) }, _dataSource: function () { var e = this; e.dataSource && e._refreshHandler ? e._unbindDataSource() : (e._refreshHandler = b(e.refresh, e), e._progressHandler = b(e._progress, e), e._errorHandler = b(e._error, e)), e.dataSource = k.create(e.options.dataSource).bind(n, e._refreshHandler).bind(d, e._progressHandler).bind(u, e._errorHandler) }, _progress: function () { y(this.element, !0) }, _error: function () { y(this.element, !1) }, _element: function () { this.element.addClass("k-widget k-listview").attr("role", "listbox") }, refresh: function (e) { var n, o, a, l, c, d = this, u = d.dataSource.view(), h = "", f = d.template, p = d.altTemplate, m = w(); if ("itemchange" === (e = e || {}).action) return d._hasBindingTarget() || d.editable || (n = e.items[0], (a = d.items().filter("[" + i.attr("uid") + "=" + n.uid + "]")).length > 0 && (l = a.index(), d.angular("cleanup", function () { return { elements: [a] } }), a.replaceWith(f(n)), (a = d.items().eq(l)).attr(i.attr("uid"), n.uid), d.angular("compile", function () { return { elements: [a], data: [{ dataItem: n }] } }), d.trigger("itemChange", { item: a, data: n }))), t; if (!d.trigger(s, { action: e.action || "rebind", items: e.items, index: e.index })) { for (d._angularItems("cleanup"), d._destroyEditable(), l = 0, c = u.length; l < c; l++)h += l % 2 ? p(u[l]) : f(u[l]); for (d.element.html(h), o = d.items(), l = 0, c = u.length; l < c; l++)o.eq(l).attr(i.attr("uid"), u[l].uid).attr("role", "option").attr("aria-selected", "false"); d.element[0] === m && d.options.navigatable && d.current(o.eq(0)), d._angularItems("compile"), d.trigger(r, { action: e.action || "rebind", items: e.items, index: e.index }) } }, _pageable: function () { var t, n, o = this, r = o.options.pageable; e.isPlainObject(r) && (n = r.pagerId, t = e.extend({}, r, { dataSource: o.dataSource, pagerId: null }), o.pager = new i.ui.Pager(e("#" + n), t)) }, _selectable: function () { var e, o, r = this, s = r.options.selectable, a = r.options.navigatable; s && (e = i.ui.Selectable.parseOptions(s).multiple, r.selectable = new i.ui.Selectable(r.element, { aria: !0, multiple: e, filter: c, change: function () { r.trigger(n) } }), a && r.element.on("keydown" + _, function (i) { if (i.keyCode === l.SPACEBAR) { if (o = r.current(), i.target == i.currentTarget && i.preventDefault(), e) if (i.ctrlKey) { if (o && o.hasClass(f)) return o.removeClass(f), t } else r.selectable.clear(); else r.selectable.clear(); r.selectable.value(o) } })) }, current: function (e) { var i = this, n = i.element, o = i._current, r = i._itemId; return e === t ? o : (o && o[0] && (o[0].id === r && o.removeAttr("id"), o.removeClass(h), n.removeAttr("aria-activedescendant")), e && e[0] && (r = e[0].id || r, i._scrollTo(e[0]), n.attr("aria-activedescendant", r), e.addClass(h).attr("id", r)), i._current = e, t) }, _scrollTo: function (t) { var i, n, o = this, r = !1, s = "scroll"; "auto" == o.wrapper.css("overflow") || o.wrapper.css("overflow") == s ? i = o.wrapper[0] : (i = window, r = !0), (n = function (n, o) { var a = r ? e(t).offset()[n.toLowerCase()] : t["offset" + n], l = t["client" + o], c = e(i)[s + n](), d = e(i)[o.toLowerCase()](); a + l > c + d ? e(i)[s + n](a + l - d) : a < c && e(i)[s + n](a) })("Top", "Height"), n("Left", "Width") }, _navigatable: function () { var t = this, n = t.options.navigatable, o = t.element; n && (t._tabindex(), o.on("focus" + _, function () { var e = t._current; e && e.is(":visible") || (e = t._item("first")), t.current(e) }).on("focusout" + _, function () { t._current && t._current.removeClass(h) }).on("keydown" + _, function (n) { var r, s, a = n.keyCode, c = t.current(), d = e(n.target), u = !d.is(":button,textarea,a,a>.t-icon,input"), h = d.is(":text,:password"), f = i.preventDefault, m = o.find("." + p), g = w(); if (!(!u && !h && l.ESC != a || h && l.ESC != a && l.ENTER != a)) if (l.UP === a || l.LEFT === a) c && (c = c.prev()), t.current(c && c[0] ? c : t._item("last")), f(n); else if (l.DOWN === a || l.RIGHT === a) c && (c = c.next()), t.current(c && c[0] ? c : t._item("first")), f(n); else if (l.PAGEUP === a) t.current(null), t.dataSource.page(t.dataSource.page() - 1), f(n); else if (l.PAGEDOWN === a) t.current(null), t.dataSource.page(t.dataSource.page() + 1), f(n); else if (l.HOME === a) t.current(t._item("first")), f(n); else if (l.END === a) t.current(t._item("last")), f(n); else if (l.ENTER === a) 0 !== m.length && (u || h) ? (r = t.items().index(m), g && g.blur(), t.save(), s = function () { t.element.trigger("focus"), t.current(t.items().eq(r)) }, t.one("dataBound", s)) : "" !== t.options.editTemplate && t.edit(c); else if (l.ESC === a) { if (0 === (m = o.find("." + p)).length) return; r = t.items().index(m), t.cancel(), t.element.trigger("focus"), t.current(t.items().eq(r)) } }), o.on("mousedown" + _ + " touchstart" + _, c, b(function (i) { t.current(e(i.currentTarget)), e(i.target).is(":button,a,:input,a>.k-icon,textarea") || o.focus() }, t))) }, clearSelection: function () { this.selectable.clear(), this.trigger(n) }, select: function (i) { var n = this.selectable; return (i = e(i)).length ? (n.options.multiple || (n.clear(), i = i.first()), n.value(i), t) : n.value() }, _destroyEditable: function () { var e = this; e.editable && (e.editable.destroy(), delete e.editable) }, _modelFromElement: function (e) { var t = e.attr(i.attr("uid")); return this.dataSource.getByUid(t) }, _closeEditable: function () { var e, t, n, o = this, r = o.editable, s = o.template; return r && (r.element.index() % 2 && (s = o.altTemplate), o.angular("cleanup", function () { return { elements: [r.element] } }), e = o._modelFromElement(r.element), o._destroyEditable(), n = r.element.index(), r.element.replaceWith(s(e)), (t = o.items().eq(n)).attr(i.attr("uid"), e.uid), o._hasBindingTarget() && i.bind(t, e), o.angular("compile", function () { return { elements: [t], data: [{ dataItem: e }] } })), !0 }, edit: function (e) { var t, n, o = this, r = o._modelFromElement(e), s = r.uid; o.cancel(), e = o.items().filter("[" + i.attr("uid") + "=" + s + "]"), n = e.index(), e.replaceWith(o.editTemplate(r)), t = o.items().eq(n).addClass(p).attr(i.attr("uid"), r.uid), o.editable = t.kendoEditable({ model: r, clearContainer: !1, errorTemplate: !1, target: o }).data("kendoEditable"), o.trigger(m, { model: r, item: t }) }, save: function () { var e, t, i = this, n = i.editable; n && (t = n.element, e = i._modelFromElement(t), n.end() && !i.trigger(v, { model: e, item: t }) && (i._closeEditable(), i.dataSource.sync())) }, remove: function (e) { var t = this, i = t.dataSource, n = t._modelFromElement(e); t.editable && (i.cancelChanges(t._modelFromElement(t.editable.element)), t._closeEditable()), t.trigger(g, { model: n, item: e }) || (e.hide(), i.remove(n), i.sync()) }, add: function () { var e, t = this, i = t.dataSource, n = i.indexOf((i.view() || [])[0]); n < 0 && (n = 0), t.cancel(), e = i.insert(n, {}), t.edit(t.element.find("[data-uid='" + e.uid + "']")) }, cancel: function () { var e, t, i = this, n = i.dataSource; i.editable && (e = i.editable.element, t = i._modelFromElement(e), i.trigger(o, { model: t, container: e }) || (n.cancelChanges(t), i._closeEditable())) }, _crudHandlers: function () { var t = this, n = "click" + _; t.element.on(n, ".k-edit-button", function (n) { var o = e(this).closest("[" + i.attr("uid") + "]"); t.edit(o), n.preventDefault() }), t.element.on(n, ".k-delete-button", function (n) { var o = e(this).closest("[" + i.attr("uid") + "]"); t.remove(o), n.preventDefault() }), t.element.on(n, ".k-update-button", function (e) { t.save(), e.preventDefault() }), t.element.on(n, ".k-cancel-button", function (e) { t.cancel(), e.preventDefault() }) }, destroy: function () { var e = this; a.fn.destroy.call(e), e._unbindDataSource(), e._destroyEditable(), e.element.off(_), e.pager && e.pager.destroy(), i.destroy(e.element) } }), i.ui.plugin(x), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.listbox.min", ["kendo.draganddrop.min", "kendo.data.min", "kendo.selectable.min"], function () { return function (e, t) { function i(t) { var i = e.map(t, function (t) { return e(t).index() }); return i } function n(e) { return t === e } function o(e) { return e.clone().removeClass(te).addClass(_.format("{0} {1} {2}", P, V, N)).width(e.width()) } function r() { return e("<li>").addClass(O) } var s, a, l, c, d, u, h, f, p, m, g, v, _ = window.kendo, b = _.attr, w = _.data, y = _.keys, k = _.template, x = _.ui.Widget, C = w.DataSource, S = _.ui.Selectable, T = _.ui.DataBoundWidget, D = _.Class, A = e.extend, E = e.noop, I = e.proxy, M = "-", R = "kendoListBox", F = "." + R, z = "k-state-disabled", P = "k-state-selected", B = ".k-item:not(.k-state-disabled)", L = "k-listbox-toolbar", H = "k-state-focused", N = "k-drag-clue", O = "k-drop-hint", V = "k-reset", U = "click" + F, W = _._outerWidth, q = _._outerHeight, j = "change", G = "dataBound", $ = "remove", Y = "reorder", K = "moveUp", Q = "moveDown", X = "transferTo", Z = "transferFrom", J = "transferAllTo", ee = "transferAllFrom", te = "k-ghost", ie = "uid", ne = "tabindex", oe = "dragstart", re = "dragend", se = "right", ae = [L + M + "left", L + M + se, L + M + "top", L + M + "bottom"], le = T.extend({ init: function (e, t) { var i = this; x.fn.init.call(i, e, t), i._wrapper(), i._list(), (e = i.element.attr("multiple", "multiple").hide())[0] && !i.options.dataSource && (i.options.dataTextField = i.options.dataTextField || "text", i.options.dataValueField = i.options.dataValueField || "value"), i._templates(), i._selectable(), i._dataSource(), i._createToolbar(), i._createDraggable(), i._createNavigatable() }, destroy: function () { var e = this; T.fn.destroy.call(e), isNaN(e._listTabIndex) || (e._getList().off(), e._listTabIndex = null), e._unbindDataSource(), e._destroySelectable(), e._destroyToolbar(), e.wrapper.off(F), e._target && (e._target = null), e._draggable && (e._draggable.destroy(), e.placeholder = null), _.destroy(e.element) }, events: [j, G, "add", $, Y, oe, "drag", "drop", re], options: { name: "ListBox", autoBind: !0, template: "", dataTextField: "", dataValueField: "", selectable: "single", draggable: null, dropSources: [], connectWith: "", navigatable: !0, toolbar: { position: se, tools: [] }, messages: { tools: { remove: "Delete", moveUp: "Move Up", moveDown: "Move Down", transferTo: "Transfer To", transferFrom: "Transfer From", transferAllTo: "Transfer All To", transferAllFrom: "Transfer All From" } } }, add: function (e) { var t, i = this, n = e && e.length ? e : [e], o = n.length; for (i._unbindDataSource(), t = 0; t < o; t++)i._addItem(n[t]); i._bindDataSource(), i._syncElement() }, _addItem: function (t) { var i = this, n = i.templates.itemTemplate({ item: t, r: i.templates.itemContent }); e(n).attr(b(ie), t.uid).appendTo(i._getList()), "string" == typeof t ? i.dataSource._data.push(t) : i.dataSource.add(t) }, _addItemAt: function (t, i) { var n = this, o = n.templates.itemTemplate({ item: t, r: n.templates.itemContent }); n._unbindDataSource(), "string" == typeof t ? (n._insertElementAt(o, i), n.dataSource._data.push(t)) : (n._insertElementAt(e(o).attr(b(ie), t.uid), i), n.dataSource.add(t)), n._bindDataSource(), n._syncElement() }, _insertElementAt: function (t, i) { var n = this._getList(); i > 0 ? e(t).insertAfter(n.children().eq(i - 1)) : e(n).prepend(t) }, _createNavigatable: function () { var e = this, t = e.options; t.navigatable && e._getList().on(U, B, I(e._click, e)).on("keydown.kendoListBox", I(e._keyDown, e)).on("blur.kendoListBox", I(e._blur, e)) }, _getTabIndex: function () { var e, t = this; return isNaN(t._listTabIndex) ? (e = t.element.attr(ne), t._listTabIndex = isNaN(e) ? 0 : e, t.element.removeAttr(ne), t._listTabIndex) : t._listTabIndex }, _blur: function () { this._target && (this._target.removeClass(H), this._getList().removeAttr("aria-activedescendant")), this._target = null }, _click: function (t) { var i = this, n = e(t.currentTarget), o = i._target; o && o.removeClass(H), i._target = n, n.addClass(H), i._getList().attr("aria-activedescendant", n.attr("id")), i._getList()[0] !== _._activeElement() && i.focus() }, _getNavigatableItem: function (e) { var t, i = this; return t = i._target ? i._target : i.items().filter(B).first(), e === y.UP && i._target && (t = i._target.prevAll(B).first()), e === y.DOWN && i._target && (t = i._target.nextAll(B).first()), t.length ? t : null }, _scrollIntoView: function (e) { var t, i, n, o, r; e && (e[0] && (e = e[0]), t = this._getList().parent()[0], i = e.offsetTop, n = t.scrollTop, o = t.clientHeight, r = i + e.offsetHeight, n > i ? n = i : r > n + o && (n = r - o), t.scrollTop = n) }, _keyDown: function (e) { var i, n = this, o = e.keyCode, r = n._getNavigatableItem(o); if (n._target && n._target.removeClass(H), (!e.shiftKey || e.ctrlKey || o !== y.DOWN && o !== y.UP) && (n._shiftSelecting = !1), o == y.DELETE) n._executeCommand($), n._target && (n._target.removeClass(H), n._getList().removeAttr("aria-activedescendant"), n._target = null), i = !0; else if (o === y.DOWN || o === y.UP) { if (!r) return e.preventDefault(), t; if (e.shiftKey && !e.ctrlKey) n._shiftSelecting || (n.clearSelection(), n._shiftSelecting = !0), n._target && r.hasClass("k-state-selected") ? (n._target.removeClass(P), n.trigger(j)) : n.select("single" == n.options.selectable ? r : r.add(n._target)); else { if (e.shiftKey && e.ctrlKey) return n._executeCommand(o === y.DOWN ? Q : K), n._scrollIntoView(n._target), e.preventDefault(), t; e.shiftKey || e.ctrlKey || ("multiple" === n.options.selectable && n.clearSelection(), n.select(r)) } n._target = r, n._target ? (n._target.addClass(H), n._scrollIntoView(n._target), n._getList().attr("aria-activedescendant", n._target.attr("id"))) : n._getList().removeAttr("aria-activedescendant"), i = !0 } else o == y.SPACEBAR ? (e.ctrlKey && n._target ? n._target.hasClass(P) ? (n._target.removeClass(P), n.trigger(j)) : n.select(n._target) : (n.clearSelection(), n.select(n._target)), i = !0) : e.ctrlKey && o == y.RIGHT ? (n._executeCommand(e.shiftKey ? J : X), n._target = n.select().length ? n.select() : null, i = !0) : e.ctrlKey && o == y.LEFT && (n._executeCommand(e.shiftKey ? ee : Z), i = !0); i && e.preventDefault() }, focus: function () { this._getList().focus() }, _createDraggable: function () { var t, i = this, n = i.options.draggable; if (n) { if (t = n.hint, !i.options.selectable) throw Error("Dragging requires selection to be enabled"); t || (t = o), i._draggable = new _.ui.Draggable(i.wrapper, { filter: n.filter ? n.filter : "ul.k-reset.k-list>li.k-item", hint: _.isFunction(t) ? t : e(t), dragstart: I(i._dragstart, i), dragcancel: I(i._clear, i), drag: I(i._drag, i), dragend: I(i._dragend, i) }) } }, _dragstart: function (i) { var n = this, o = n.draggedElement = i.currentTarget, s = n.options.draggable.placeholder, a = n.dataItem(o), l = { dataItems: a, items: e(o), draggableEvent: i }; return !1 === n.options.draggable.enabled ? (i.preventDefault(), t) : (s || (s = r), n.placeholder = e(_.isFunction(s) ? s.call(n, o) : s), o.is("." + z) ? i.preventDefault() : n.trigger(oe, l) ? i.preventDefault() : (n.clearSelection(), n.select(o), o.addClass(te)), t) }, _clear: function () { this.draggedElement.removeClass(te), this.placeholder.remove() }, _findElementUnderCursor: function (t) { var i = _.elementUnderCursor(t), n = t.sender; return (e.contains(n.hint[0], i) || n.hint[0] === i) && (n.hint.hide(), i = _.elementUnderCursor(t), n.hint.show()), i }, _findTarget: function (t) { var i, n, o = this, r = o._findElementUnderCursor(t), s = e(r), a = o._getList(); return e.contains(a[0], r) ? (i = o.items(), r = s.is("li") ? r : s.closest("li")[0], (n = i.filter(r)[0] || i.has(r)[0]) ? (n = e(n)).hasClass(z) ? null : { element: n, listBox: o } : null) : a[0] == r || a.parent()[0] == r ? { element: e(a), appendToBottom: !0, listBox: o } : o._searchConnectedListBox(s) }, _getElementCenter: function (e) { var t = e.length ? _.getOffset(e) : null; return t && (t.top += q(e) / 2, t.left += W(e) / 2), t }, _searchConnectedListBox: function (t) { var i, n, o, r, s = t; return (r = t.hasClass("k-list-scroller k-selectable") ? t : t.closest(".k-list-scroller.k-selectable")).length ? (i = r.parent().find("[data-role='listbox']").getKendoListBox()) && -1 !== e.inArray(this.element[0].id, i.options.dropSources) ? (n = i.items(), t = t.is("li") ? t[0] : t.closest("li")[0], (o = n.filter(t)[0] || n.has(t)[0]) ? (o = e(o)).hasClass(z) ? null : { element: o, listBox: i } : !n.length || s.hasClass("k-list-scroller k-selectable") || s.hasClass("k-reset k-list") ? { element: i._getList(), listBox: i, appendToBottom: !0 } : null) : null : null }, _drag: function (i) { var n, o, r, s = this, a = s.draggedElement, l = s._findTarget(i), c = { left: i.x.location, top: i.y.location }, d = s.dataItem(a), u = { dataItems: [d], items: e(a), draggableEvent: i }; if (s.trigger("drag", u)) return i.preventDefault(), t; if (l) { if (n = this._getElementCenter(l.element), o = { left: Math.round(c.left - n.left), top: Math.round(c.top - n.top) }, l.appendToBottom) return s._movePlaceholder(l, null, a), t; o.top < 0 ? r = "prev" : o.top > 0 && (r = "next"), r && l.element[0] != s.placeholder[0] && s._movePlaceholder(l, r, a) } else s.placeholder.parent().length && s.placeholder.remove() }, _movePlaceholder: function (t, i, n) { var o = this, s = o.placeholder, a = t.listBox.options.draggable; s.parent().length && (o.placeholder.remove(), o.placeholder = e(a && a.placeholder ? _.isFunction(a.placeholder) ? a.placeholder.call(o, n) : a.placeholder : r.call(o, n))), i ? "prev" === i ? t.element.before(o.placeholder) : "next" === i && t.element.after(o.placeholder) : t.element.append(o.placeholder) }, _dragend: function (i) { var n = this, o = n.draggedElement, r = n.items(), s = r.not(n.draggedElement).index(n.placeholder), a = r.not(n.placeholder).index(n.draggedElement), l = n.dataItem(o), c = { dataItems: [l], items: e(o) }, d = n.placeholder.closest(".k-widget.k-listbox").find("[data-role='listbox']").getKendoListBox(); return n.trigger("drop", A({}, c, { draggableEvent: i })) ? (i.preventDefault(), this._clear(), t) : (s >= 0 ? s === a || n.trigger(Y, A({}, c, { offset: s - a })) || (o.removeClass(te), n.reorder(o, s)) : d && (n.trigger($, c) || n.remove(e(o)), d.trigger("add", c) || d._addItemAt(l, d.items().index(n.placeholder))), n._clear(), n._draggable.dropped = !0, n.trigger(re, A({}, c, { draggableEvent: i })), t) }, reorder: function (t, i) { var n = this, o = n.dataSource, r = n.dataItem(t), s = o.at(i), a = n.items()[i], l = e(t); r && a && s && (n._removeElement(l), n._insertElementAt(l, i), n._updateToolbar()) }, remove: function (t) { var i, n = this, o = n._getItems(t), r = o.length; for (n._unbindDataSource(), i = 0; i < r; i++)n._removeItem(e(o[i])); n._bindDataSource(), n._syncElement(), n._updateToolbar(), n._updateAllToolbars() }, _removeItem: function (e) { var t, i, n = this, o = n.dataSource, r = n.dataItem(e); if (r && o) { if ("string" == typeof r) { for (t = o._data, i = 0; i < t.length; i++)if (r === t[i]) { t[i] = t[t.length - 1], t.pop(); break } } else o.remove(r); n._removeElement(e) } }, _removeElement: function (t) { _.destroy(t), e(t).off().remove() }, dataItem: function (t) { var i = b(ie), n = e(t).attr(i) || e(t).closest("[" + i + "]").attr(i); return n ? this.dataSource.getByUid(n) : e(t).html() }, _dataItems: function (t) { var i, n = [], o = e(t), r = o.length; for (i = 0; i < r; i++)n.push(this.dataItem(o.eq(i))); return n }, items: function () { var e = this._getList(); return e.children() }, select: function (e) { var t, i = this.selectable; return n(e) ? i.value() : (t = this.items().filter(e).filter(".k-list:not(.k-state-disabled) >.k-item:not(.k-state-disabled)"), i.options.multiple || (i.clear(), t = t.first()), i.value(t)) }, clearSelection: function () { var e = this.selectable; e && e.clear() }, enable: function (t, i) { var o, r = this, s = !!n(i) || !!i, a = r._getItems(t), l = a.length; for (o = 0; o < l; o++)r._enableItem(e(a[o]), s); r._updateAllToolbars() }, _enableItem: function (t, i) { var n = this.dataItem(t); n && (i ? e(t).removeClass(z) : e(t).addClass(z).removeClass(P)) }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource() }, _dataSource: function () { var t = this, i = t.options, n = i.dataSource || {}; (n = e.isArray(n) ? { data: n } : n).select = t.element, n.fields = [{ field: i.dataTextField }, { field: i.dataValueField }], t._unbindDataSource(), t.dataSource = C.create(n), t._bindDataSource(), t.options.autoBind && t.dataSource.fetch() }, _bindDataSource: function () { var e = this, t = e.dataSource; e._dataChangeHandler = I(e.refresh, e), t && t.bind(j, e._dataChangeHandler) }, _unbindDataSource: function () { var e = this.dataSource; e && e.unbind(j, this._dataChangeHandler) }, _wrapper: function () { var t = this, i = t.element, n = i.parent("div.k-listbox"); n[0] || ((n = i.wrap('<div class="k-widget k-listbox" deselectable="on" />').parent())[0].style.cssText = i[0].style.cssText, n[0].title = i[0].title, e('<div class="k-list-scroller" />').insertBefore(i)), t.wrapper = n.addClass(i[0].className).css("display", ""), t._innerWrapper = e(n[0].firstChild) }, _list: function () { var t = this; e("<ul class='k-reset k-list' role='listbox'></ul>").appendTo(t._innerWrapper), t.options.navigatable && t._getList().attr(ne, t._getTabIndex()) }, _templates: function () { var e, t = this.options; e = t.template && "string" == typeof t.template ? _.template(t.template) : t.template ? t.template : _.template("${" + _.expr(t.dataTextField, "data") + "}", { useWithBlock: !1 }), this.templates = { itemTemplate: _.template("# var item = data.item, r = data.r; # <li class='k-item' role='option' aria-selected='false'>#=r(item)#</li>", { useWithBlock: !1 }), itemContent: e, toolbar: "<div class='" + L + "'></div>" } }, refresh: function () { var e, t = this, i = t.dataSource.view(), n = t.templates.itemTemplate, o = ""; for (e = 0; e < i.length; e++)o += n({ item: i[e], r: t.templates.itemContent }); t._getList().html(o), t._setItemIds(), t._createToolbar(), t._syncElement(), t._updateToolbar(), t._updateAllToolbars(), t.trigger(G) }, _syncElement: function () { var e, t = "", i = this.dataSource.view(); for (e = 0; e < i.length; e++)t += this._option(i[e][this.options.dataValueField] || i[e], i[e][this.options.dataTextField] || i[e], !0); this.element.html(t) }, _option: function (e, i) { var n = "<option"; return e !== t && (-1 !== (e += "").indexOf('"') && (e = e.replace(/"/g, "&quot;")), n += ' value="' + e + '"'), n += " selected>", i !== t && (n += _.htmlEncode(i)), n += "</option>" }, _setItemIds: function () { var e, t = this.items(), i = this.dataSource.view(), n = i.length; for (e = 0; e < n; e++)t.eq(e).attr(b(ie), i[e].uid).attr("id", i[e].uid) }, _selectable: function () { var e = this, t = e.options.selectable, i = S.parseOptions(t); i.multiple && e.element.attr("aria-multiselectable", "true"), e.selectable = new S(e._innerWrapper, { aria: !0, multiple: i.multiple, filter: B, change: I(e._onSelect, e) }) }, _onSelect: function () { var e = this; e._updateToolbar(), e._updateAllToolbars(), e.trigger(j) }, _destroySelectable: function () { var e = this; e.selectable && (e.selectable.destroy(), e.selectable = null) }, _getList: function () { return this.wrapper.find(".k-reset.k-list") }, _getItems: function (e) { return this.items().filter(e) }, _createToolbar: function () { var t, i = this, n = i.options.toolbar, o = n.position || se, r = "bottom" === o ? "insertAfter" : "insertBefore", s = n.tools || [], a = i.options.messages; i._destroyToolbar(), i.wrapper.removeClass(ae.join(" ")), s.length && s.length > 0 && (t = e(i.templates.toolbar)[r](i._innerWrapper), i.toolbar = new v(t, A({}, n, { listBox: i, messages: a })), i.wrapper.addClass(L + M + o)) }, _destroyToolbar: function () { var e = this; e.toolbar && (e.toolbar.destroy(), e.toolbar = null) }, _executeCommand: function (e) { var t = this, i = s.current.create(e, { listBox: t }); i && (i.execute(), t._updateToolbar(), t._updateAllToolbars()) }, _updateToolbar: function () { var e = this.toolbar; e && e._updateToolStates() }, _updateAllToolbars: function () { var t, i, n = e("select[data-role='listbox']"), o = n.length; for (i = 0; i < o; i++)(t = e(n[i]).data(R)) && t._updateToolbar() } }); _.ui.plugin(le), (s = D.extend({ init: function () { this._commands = [] }, register: function (e, t) { this._commands.push({ commandName: e, commandType: t }) }, create: function (e, t) { var i, n, o, r = this._commands, s = r.length, a = e ? e.toLowerCase() : ""; for (o = 0; o < s; o++)if ((n = r[o]).commandName.toLowerCase() === a) { i = n; break } if (i) return new i.commandType(t) } })).current = new s, a = D.extend({ init: function (e) { var t = this; t.options = A({}, t.options, e), t.listBox = t.options.listBox }, options: { listBox: null }, getItems: function () { return e(this.listBox.select()) }, execute: E, canExecute: E }), l = a.extend({ execute: function () { var e = this.listBox, t = this.getItems(); e.trigger($, { dataItems: e._dataItems(t), items: t }) || e.remove(t) }, canExecute: function () { return this.listBox.select().length > 0 } }), s.current.register($, l), c = a.extend({ execute: function () { this.canExecute() && this.moveItems() }, canExecute: E, moveItems: function () { var t, n = this, o = n.listBox, r = n.options, s = n.getItems(), a = r.offset, l = i(s), c = e.makeArray(s.sort(n.itemComparer)), d = r.moveAction; if (!o.trigger(Y, { dataItems: o._dataItems(c), items: e(c), offset: a })) for (; c.length > 0 && l.length > 0;)t = c[d](), o.reorder(t, l[d]() + a) }, options: { offset: 0, moveAction: "pop" }, itemComparer: function (t, i) { var n = e(t).index(), o = e(i).index(); return n === o ? 0 : n > o ? 1 : -1 } }), d = c.extend({ options: { offset: -1, moveAction: "shift" }, canExecute: function () { var e = this.getItems(), t = i(e); return t.length > 0 && t[0] > 0 } }), s.current.register(K, d), u = c.extend({ options: { offset: 1, moveAction: "pop" }, canExecute: function () { var t = this.getItems(), n = i(t); return n.length > 0 && e(n).last()[0] < this.listBox.items().length - 1 } }), s.current.register(Q, u), h = a.extend({ options: { filter: B }, execute: function () { var e = this, t = e.getSourceListBox(), i = e.getItems().filter(e.options.filter), n = t ? t._dataItems(i) : [], o = e.getDestinationListBox(), r = e.getUpdatedSelection(i); o && i.length > 0 && (o.trigger("add", { dataItems: n, items: i }) || o.add(n), t.trigger($, { dataItems: n, items: i }) || (t.remove(i), e.updateSelection(r))) }, getUpdatedSelection: function (t) { var i = this.options.filter, n = this.getSourceListBox(), o = n ? n.items().filter(i).last() : null, r = e(t).filter(o).length > 0, s = r ? e(t).prevAll(i)[0] : e(t).nextAll(i)[0]; return 1 === e(t).length && s ? s : null }, updateSelection: function (t) { var i = this.getSourceListBox(); i && t && (e(i.select(e(t))), i._scrollIntoView(t)) }, getSourceListBox: E, getDestinationListBox: E }), f = h.extend({ canExecute: function () { var e = this.getSourceListBox(); return !!e && e.select().length > 0 }, getSourceListBox: function () { return this.listBox }, getDestinationListBox: function () { var t = this.getSourceListBox(); return t && t.options.connectWith ? e("#" + t.options.connectWith).data(R) : null }, getItems: function () { var t = this.getSourceListBox(); return t ? e(t.select()) : e() } }), s.current.register(X, f), p = h.extend({ canExecute: function () { var e = this.getSourceListBox(); return !!e && e.select().length > 0 }, getSourceListBox: function () { var t = this.getDestinationListBox(); return t && t.options.connectWith ? e("#" + t.options.connectWith).data(R) : null }, getDestinationListBox: function () { return this.listBox }, getItems: function () { var t = this.getSourceListBox(); return t ? e(t.select()) : e() } }), s.current.register(Z, p), m = f.extend({ canExecute: function () { var e = this.getSourceListBox(); return !!e && e.items().filter(B).length > 0 }, getItems: function () { var t = this.getSourceListBox(); return t ? t.items() : e() }, getUpdatedSelection: E, updateSelection: E }), s.current.register(J, m), g = p.extend({ canExecute: function () { var e = this.getSourceListBox(); return !!e && e.items().filter(B).length > 0 }, getItems: function () { var t = this.getSourceListBox(); return t ? t.items() : e() }, getUpdatedSelection: E, updateSelection: E }), s.current.register(ee, g), (v = D.extend({ init: function (t, i) { var n = this; n.element = e(t).addClass(L), n.options = A({}, n.options, i), n.listBox = n.options.listBox, n._initTemplates(), n._createTools(), n._updateToolStates(), n._attachEventHandlers() }, destroy: function () { var e = this; e._detachEventHandlers(), _.destroy(e.element), e.element.remove(), e.element = null }, options: { position: se, tools: [] }, _initTemplates: function () { this.templates = { tool: k("<li><a href='\\\\#' class='k-button k-button-icon k-tool' data-command='#= command #' title='#= text #' aria-label='#= text #' role='button'><span class='k-icon #= iconClass #'></span></a></li>") } }, _createTools: function () { var t, i, n = this, o = n.options.tools, r = o.length, s = n.options.messages.tools, a = n._createToolList(); for (i = 0; i < r; i++)(t = A({}, v.defaultTools[o[i]], { text: s[o[i]] })) && a.append(e(n.templates.tool(t))); n.element.append(a) }, _createToolList: function () { return e("<ul class='k-reset' />") }, _attachEventHandlers: function () { var e = this; e.element.on(U, "li > a.k-button:not(.k-state-disabled)", I(e._onToolClick, e)) }, _detachEventHandlers: function () { this.element.off(F).find("*").off(F) }, _onToolClick: function (t) { t.preventDefault(), this._executeToolCommand(e(t.currentTarget).data("command")) }, _executeToolCommand: function (e) { var t = this.listBox; t && t._executeCommand(e) }, _updateToolStates: function () { var e, t = this.options.tools, i = t.length; for (e = 0; e < i; e++)this._updateToolState(t[e]) }, _updateToolState: function (t) { var i = s.current.create(t, { listBox: this.listBox }), n = this.element.find("[data-command='" + t + "']")[0]; n && i && i.canExecute && (i.canExecute() ? e(n).removeClass(z) : e(n).addClass(z)) } })).defaultTools = { remove: { command: $, iconClass: "k-i-x" }, moveUp: { command: K, iconClass: "k-i-arrow-60-up" }, moveDown: { command: Q, iconClass: "k-i-arrow-60-down" }, transferTo: { command: X, iconClass: "k-i-arrow-60-right" }, transferFrom: { command: Z, iconClass: "k-i-arrow-60-left" }, transferAllTo: { command: J, iconClass: "k-i-arrow-double-60-right" }, transferAllFrom: { command: ee, iconClass: "k-i-arrow-double-60-left" } }, A(le, { ToolBar: v }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.upload.min", ["kendo.core.min"], function () { return function (e, t) { function i(t) { return e.map(n(t), function (e) { return e.name }).join(", ") } function n(e) { var t = e[0]; return t.files ? o(t.files) : [{ name: function (e) { var t = e.lastIndexOf("\\"); return -1 != t ? e.substr(t + 1) : e }(t.value), extension: r(t.value), size: null }] } function o(t) { return e.map(t, function (e) { return function (e) { var t = e.name || e.fileName; return { name: k.htmlEncode(t), extension: r(t), size: "number" == typeof e.size ? e.size : e.fileSize, rawFile: e } }(e) }) } function r(e) { var t = e.match(T); return t ? t[0] : "" } function s(t, i) { var n = k.guid(); return e.map(t, function (e) { return e.uid = i ? k.guid() : n, e }) } function a(e, t) { var i, n = l(t.allowedExtensions), o = t.maxFileSize, r = t.minFileSize; for (i = 0; i < e.length; i++)c(e[i], n), d(e[i], r, o) } function l(t) { var i = e.map(t, function (e) { var t = "." === e.substring(0, 1) ? e : "." + e; return t.toLowerCase() }); return i } function c(t, i) { i.length > 0 && i.indexOf(t.extension.toLowerCase()) < 0 && (t.validationErrors = t.validationErrors || [], -1 === e.inArray(U, t.validationErrors) && t.validationErrors.push(U)) } function d(t, i, n) { 0 !== i && t.size < i && (t.validationErrors = t.validationErrors || [], -1 === e.inArray(V, t.validationErrors) && t.validationErrors.push(V)), 0 !== n && t.size > n && (t.validationErrors = t.validationErrors || [], -1 === e.inArray(O, t.validationErrors) && t.validationErrors.push(O)) } function u(e) { var t, i = 0; if ("number" != typeof e[0].size) return ""; for (t = 0; t < e.length; t++)e[t].size && (i += e[t].size); return (i /= 1024) < 1024 ? i.toFixed(2) + " KB" : (i / 1024).toFixed(2) + " MB" } function h(t) { return !t.multiple && e(".k-file", t.wrapper).length > 1 } function f(i, n, o, r) { var s, a; return n._supportsRemove() ? (s = i.data("fileNames"), a = e.map(s, function (e) { return e.name }), !1 === r ? (n._removeFileEntry(i), t) : (n._submitRemove(a, o, function (e, t, o) { var r = n.trigger(I, { operation: "remove", files: s, response: e, XMLHttpRequest: o }); r || n._removeFileEntry(i) }, function (e) { h(n) && n._removeFileEntry(i), n.trigger(M, { operation: "remove", files: s, XMLHttpRequest: e }), S("Server response: " + e.responseText) }), t)) : (!h(n) && r || n._removeFileEntry(i), t) } function p(t, i, n) { var o = !1, r = ""; try { r = e.parseJSON(m(t)), o = !0 } catch (e) { n() } o && i(r) } function m(e) { return t !== e && "" !== e || (e = "{}"), e } function g(e) { e.stopPropagation(), e.preventDefault() } function v(e, t, i, n) { var o, r; e.on("dragenter" + t, function (e) { i(e), r = new Date, o || (o = setInterval(function () { var e = new Date - r; e > 100 && (n(), clearInterval(o), o = null) }, 100)) }).on("dragover" + t, function () { r = new Date }) } function _(e) { return e.is(".k-file-progress, .k-file-success, .k-file-error") } function b(t) { return e(t.target).closest(".k-file") } var w, y, k = window.kendo, x = k.ui.Widget, C = k.antiForgeryTokens, S = k.logToConsole, T = /\.([^\.]+)$/, D = ".kendoUpload", A = "select", E = "upload", I = "success", M = "error", R = "complete", F = "cancel", z = "clear", P = "pause", B = "resume", L = "progress", H = "remove", N = "validationErrors", O = "invalidMaxFileSize", V = "invalidMinFileSize", U = "invalidFileExtension", W = { loading: "k-i-loading", warning: "k-i-warning", success: "k-i-check" }, q = x.extend({ init: function (t, i) { var n, o, r, s = this; x.fn.init.call(s, t, i), s.name = t.name, s.multiple = s.options.multiple, s.directory = s.options.directory, s.localization = s.options.localization, n = s.element, s.wrapper = n.closest(".k-upload"), 0 === s.wrapper.length && (s.wrapper = s._wrapInput(n)), s._activeInput(n), s.toggle(s.options.enabled), o = s._ns = D + "-" + k.guid(), n.closest("form").on("submit" + o, e.proxy(s._onParentFormSubmit, s)).on("reset" + o, e.proxy(s._onParentFormReset, s)), s.options.async.saveUrl ? (s._module = s._supportsFormData() ? new y(s) : new w(s), s._async = !0, (r = s.options.files).length > 0 && s._renderInitialFiles(r)) : s._module = new j(s), s._supportsDrop() && ("" !== s.options.dropZone ? s._setupCustomDropZone() : s._setupDropZone()), s.wrapper.on("click", ".k-upload-action", e.proxy(s._onFileAction, s)).on("click", ".k-clear-selected", e.proxy(s._onClearSelected, s)).on("click", ".k-upload-selected", e.proxy(s._onUploadSelected, s)), s.element.val() && s._onInputChange({ target: s.element }) }, events: [A, E, I, M, R, F, z, L, H, P, B], options: { name: "Upload", enabled: !0, multiple: !0, directory: !1, showFileList: !0, template: "", files: [], async: { autoRetryAfter: 0, bufferChunkSize: 1e7, maxAutoRetries: 1, removeVerb: "POST", autoUpload: !0, withCredentials: !0, accept: "*/*; q=0.5, application/json", useArrayBuffer: !1 }, localization: { select: "Select files...", cancel: "Cancel", retry: "Retry", remove: "Remove", pause: "Pause", resume: "Resume", clearSelectedFiles: "Clear", uploadSelectedFiles: "Upload", dropFilesHere: "Drop files here to upload", invalidFiles: "Invalid file(s). Please check file upload requirements.", statusUploading: "uploading", statusUploaded: "uploaded", statusWarning: "warning", statusFailed: "failed", headerStatusUploading: "Uploading...", headerStatusPaused: "Paused", headerStatusUploaded: "Done", invalidMaxFileSize: "File size too large.", invalidMinFileSize: "File size too small.", invalidFileExtension: "File type not allowed." }, validation: { allowedExtensions: [], maxFileSize: 0, minFileSize: 0 }, dropZone: "" }, setOptions: function (e) { var t = this, i = t.element; x.fn.setOptions.call(t, e), t.multiple = t.options.multiple, t.directory = t.options.directory, i.attr("multiple", !!t._supportsMultiple() && t.multiple), t.directory && (i.attr("webkitdirectory", t.directory), i.attr("directory", t.directory)), t.toggle(t.options.enabled) }, enable: function (e) { e = t === e || e, this.toggle(e) }, disable: function () { this.toggle(!1) }, toggle: function (e) { e = t === e ? e : !e, this.wrapper.toggleClass("k-state-disabled", e), this.element.prop("disabled", e) }, focus: function () { this.element.focus() }, destroy: function () { var t = this, i = e(t.options.dropZone); e(document).add(e(".k-dropzone", t.wrapper)).add(t.wrapper.closest("form")).off(t._ns), i.length > 0 && i.off(t._ns), e(t.element).off(D), x.fn.destroy.call(t) }, pause: function (t) { this._module.onPause({ target: e(t, this.wrapper) }); var i = t.find(".k-i-pause-sm"); i.removeClass("k-i-pause-sm").addClass("k-i-play-sm").attr("title", this.localization.resume), e(i).parent().attr("aria-label", this.localization.resume) }, resume: function (t) { this._module.onResume({ target: e(t, this.wrapper) }); var i = t.find(".k-i-play-sm"); i.removeClass("k-i-play-sm").addClass("k-i-pause-sm").attr("title", this.localization.pause), e(i).parent().attr("aria-label", this.localization.pause) }, upload: function () { this._module.onSaveSelected() }, getFiles: function () { var t, i, n, o = [], r = this.wrapper.find(".k-file"); for (i = 0; i < r.length; i++)if (t = e(r[i]).data("fileNames")) for (n = 0; n < t.length; n++)o.push(t[n]); return o }, clearAllFiles: function () { var e = this, t = e.wrapper.find(".k-file"); t.each(function (t, i) { e._removeFileByDomElement(i, !1) }) }, removeAllFiles: function () { var e = this, t = e.wrapper.find(".k-file"); t.each(function (t, i) { e._removeFileByDomElement(i, !0) }) }, removeFileByUid: function (e) { this._removeFileByUid(e, !0) }, clearFileByUid: function (e) { this._removeFileByUid(e, !1) }, _removeFileByUid: function (t, i) { var n; "string" == typeof t && ((n = e(".k-file[" + k.attr("uid") + '="' + t + '"]', this.wrapper)).length > 0 && this._removeFileByDomElement(n, i)) }, clearFile: function (e) { this._removeFile(e, !1) }, removeFile: function (e) { this._removeFile(e, !0) }, _removeFile: function (t, i) { var n, o = this, r = o.wrapper.find(".k-file"); "function" == typeof t && r.each(function (r, s) { n = e(s).data("fileNames"), t(n) && o._removeFileByDomElement(s, i) }) }, _removeFileByDomElement: function (t, i) { var n = this, o = { target: e(t, n.wrapper) }; n.options.async.saveUrl ? (e(t).hasClass("k-file-progress") ? n._module.onCancel(o) : n._module.onRemove(o, {}, i), 0 === e(".k-file", n.wrapper).length ? n._hideHeaderUploadstatus() : n._updateHeaderUploadStatus()) : n._module.onRemove(o, {}, i) }, _addInput: function (t) { if (t[0].nodeType) { var i = this, n = t.clone().val(""); n.insertAfter(i.element).data("kendoUpload", i), e(i.element).hide().attr("tabindex", "-1").removeAttr("id").off(D), i._activeInput(n), i.element.focus() } }, _activeInput: function (t) { var i = this, n = i.wrapper; i.element = t, i.directory && (t.attr("webkitdirectory", i.directory), t.attr("directory", i.directory)), t.attr("multiple", !!i._supportsMultiple() && i.multiple).attr("autocomplete", "off").on("click" + D, function (e) { n.hasClass("k-state-disabled") && e.preventDefault() }).on("focus" + D, function () { e(this).parent().addClass("k-state-focused") }).on("blur" + D, function () { e(this).parent().removeClass("k-state-focused") }).on("change" + D, e.proxy(i._onInputChange, i)).on("keydown" + D, e.proxy(i._onInputKeyDown, i)) }, _onInputKeyDown: function (e) { var t = this.wrapper.find(".k-upload-action:visible:first"); e.keyCode === k.keys.TAB && t.length > 0 && (e.preventDefault(), t.focus()) }, _onInputChange: function (t) { var i = this, n = e(t.target), o = s(i._inputFiles(n), i._isAsyncNonBatch()); a(o, i.options.validation), i.trigger(A, { files: o }) ? (i._addInput(n), n.remove()) : i._module.onSelect({ target: n }, o) }, _readDirectory: function (t) { var i = new e.Deferred, n = t.createReader(); return n.readEntries(function (e) { i.resolve(e) }, i.reject), i.promise() }, _readFile: function (e) { var t = this, i = e.fullPath; e.file(function (e) { e.relativePath = i.slice(1), t.droppedFolderFiles.push(e), t.droppedFolderCounter--, 0 === t.droppedFolderCounter && setTimeout(function () { 0 === t.droppedFolderCounter && t.droppedFolderFiles.length && (t._proceedDroppedItems(t.droppedFolderFiles), t.droppedFolderFiles = []) }, 0) }, function () { S("File error.") }) }, _traverseFileTree: function (e, t) { var i = this; t || i.droppedFolderCounter--, this._readDirectory(e).then(function (e) { i.droppedFolderCounter += e.length; for (var t = 0; t < e.length; t++)e[t].isFile ? i._readFile(e[t]) : e[t].isDirectory && i._traverseFileTree(e[t]) }) }, _onDrop: function (e) { var t, i, n, o = e.originalEvent.dataTransfer, r = this, s = o.files; if (g(e), r.options.directoryDrop && o.items) for (t = o.items.length, r.droppedFolderCounter = 0, r.droppedFolderFiles = [], i = 0; i < t; i++)o.items[i].webkitGetAsEntry ? (n = o.items[i].webkitGetAsEntry()).isDirectory ? r._traverseFileTree(n, !0) : n.isFile && r.droppedFolderFiles.push(o.files[i]) : r._proceedDroppedItems(s); else r._proceedDroppedItems(s) }, _proceedDroppedItems: function (t) { var i = this, n = s(o(t), i._isAsyncNonBatch()); t.length > 0 && !i.wrapper.hasClass("k-state-disabled") && (!i.multiple && n.length > 1 && n.splice(1, n.length - 1), a(n, i.options.validation), i.trigger(A, { files: n }) || i._module.onSelect({ target: e(".k-dropzone", i.wrapper) }, n)) }, _filesContainValidationErrors: function (t) { var i = !1; return e(t).each(function (e, t) { if (t[N] && t[N].length > 0) return i = !0, !1 }), i }, _isAsyncNonBatch: function () { return this._async && !this.options.async.batch || !1 }, _renderInitialFiles: function (e) { var t, i, n = this, o = 0; for (e = s(e, !0), o = 0; o < e.length; o++)t = e[o], (i = n._enqueueFile(t.name, { fileNames: [t] })).addClass("k-file-success").data("files", [e[o]]), n._supportsRemove() && n._fileAction(i, H) }, _prepareTemplateData: function (e, t) { var i = t.fileNames, n = {}, o = 0, r = 0; for (r = 0; r < i.length; r++)o += i[r].size; return n.name = e, n.size = o, n.files = t.fileNames, n }, _prepareDefaultSingleFileEntryTemplate: function (t) { var i = t.fileNames[0], n = u(t.fileNames), o = i[N], r = ""; return r += o && o.length > 0 ? "<li class='k-file k-file-invalid'><span class='k-progress'></span><span class='k-file-invalid-extension-wrapper'><span class='k-file-invalid-icon'>!</span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name k-file-name-invalid' title='" + i.name + "'>" + i.name + "</span><span class='k-file-validation-message'>" + this.localization[o[0]] + "</span></span>" : "<li class='k-file'><span class='k-progress'></span><span class='k-file-extension-wrapper'><span class='k-file-extension'>" + i.extension.substring(1) + "</span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name' title='" + i.name + "'>" + i.name + "</span><span class='k-file-size'>" + n + "</span></span>", e(r += "<strong class='k-upload-status'></strong>") }, _prepareDefaultMultipleFileEntriesTemplate: function (t) { var i, n, o = t.fileNames, r = this._filesContainValidationErrors(o), s = u(o), a = ""; for (a += r ? "<li class='k-file k-file-invalid'><span class='k-progress'></span><span class='k-multiple-files-invalid-extension-wrapper'><span class='k-file-invalid-icon'>!</span>" : "<li class='k-file'><span class='k-progress'></span><span class='k-multiple-files-extension-wrapper'>", a += "<span class='k-file-state'></span></span>", o.sort(function (e, t) { return e[N] ? -1 : t[N] ? 1 : 0 }), a += "<span class='k-file-name-size-wrapper'>", i = 0; i < o.length; i++)n = o[i], a += n[N] && n[N].length > 0 ? "<span class='k-file-name k-file-name-invalid' title='" + n.name + "'>" + n.name + "</span>" : "<span class='k-file-name' title='" + n.name + "'>" + n.name + "</span>"; return a += r ? "<span class='k-file-validation-message'>" + this.localization.invalidFiles + "</span>" : "<span class='k-file-information'>Total: " + o.length + " files, " + s + "</span>", e(a += "</span><strong class='k-upload-status'></strong>") }, _enqueueFile: function (t, i) { var n, o, r, s, a = this, l = i.fileNames[0].uid, c = e(".k-upload-files", a.wrapper), d = a.options, u = d.template; return 0 === c.length && (c = e("<ul class='k-upload-files k-reset'></ul>").appendTo(a.wrapper), a.options.showFileList || c.hide(), a.wrapper.removeClass("k-upload-empty")), n = e(".k-file", c), u ? (r = a._prepareTemplateData(t, i), u = k.template(u), (o = e("<li class='k-file'>" + u(r) + "</li>")).find(".k-upload-action").addClass("k-button"), a.angular("compile", function () { return { elements: o, data: [r] } })) : o = 1 === i.fileNames.length ? a._prepareDefaultSingleFileEntryTemplate(i) : a._prepareDefaultMultipleFileEntriesTemplate(i), o.attr(k.attr("uid"), l).appendTo(c).data(i), a._async || e(".k-progress", o).width("100%"), !a.multiple && n.length > 0 && (s = { files: n.data("fileNames"), headers: {} }, a.trigger(H, s) || a._module.onRemove({ target: e(n, a.wrapper) }, s)), o }, _removeFileEntry: function (t) { var i, n, o, r = this, s = t.closest(".k-upload-files"); t.remove(), i = e(".k-file", s), n = e(".k-file-success, .k-file-error", s), o = e(".k-file-invalid", s), n.length !== i.length && o.length !== i.length || this._hideUploadButton(), 0 === i.length ? (s.remove(), r.wrapper.addClass("k-upload-empty"), r._hideHeaderUploadstatus()) : r._updateHeaderUploadStatus() }, _fileAction: function (e, t, i) { var n = { remove: "k-i-x", cancel: "k-i-cancel", retry: "k-i-retry", pause: "k-i-pause-sm" }, o = { remove: "k-i-close", cancel: "k-i-close", retry: "k-i-reload-sm", pause: "k-i-pause-sm" }; n.hasOwnProperty(t) && (i || this._clearFileAction(e), this.options.template ? e.find(".k-upload-action").addClass("k-button").append("<span class='k-icon " + o[t] + " " + n[t] + "' title='" + this.localization[t] + "'aria-label='" + this.localization[t] + "'></span>").show() : (i || e.find(".k-upload-status .k-upload-action").remove(), e.find(".k-upload-status").append(this._renderAction(n[t], this.localization[t], o[t])))) }, _fileState: function (t, i) { var n = this.localization, o = { uploading: { text: n.statusUploading }, uploaded: { text: n.statusUploaded }, failed: { text: n.statusFailed } }, r = o[i]; r && e("span.k-file-state", t).text(r.text) }, _renderAction: function (t, i, n) { return "" !== t ? e("<button type='button' class='k-button k-upload-action' aria-label='" + i + "'><span class='k-icon " + n + " " + t + "' title='" + i + "'></span></button>").on("focus", function () { e(this).addClass("k-state-focused") }).on("blur", function () { e(this).removeClass("k-state-focused") }) : e("<button type='button' class='k-button'>" + i + "</button>") }, _clearFileAction: function (t) { e(".k-upload-action", t).empty().hide() }, _onFileAction: function (t) { var i, n, o, r, s, a, l = this; return l.wrapper.hasClass("k-state-disabled") || (i = e(t.target).closest(".k-upload-action"), n = i.find(".k-icon"), o = i.closest(".k-file"), r = o.data("fileNames"), s = l._filesContainValidationErrors(r), a = { files: r, headers: {} }, n.hasClass("k-i-x") ? l.trigger(H, a) || l._module.onRemove({ target: e(o, l.wrapper) }, a, !s) : n.hasClass("k-i-cancel") ? (l.trigger(F, a), l._module.onCancel({ target: e(o, l.wrapper) }), l._checkAllComplete(), l._updateHeaderUploadStatus()) : n.hasClass("k-i-pause-sm") ? (l.trigger(P, a), l.pause(o), l._updateHeaderUploadStatus()) : n.hasClass("k-i-play-sm") ? (l.trigger(B, a), l.resume(o)) : n.hasClass("k-i-retry") && (e(".k-i-warning", o).remove(), e(".k-progress", o).finish().show(), l._module.onRetry({ target: e(o, l.wrapper) }))), !1 }, _onUploadSelected: function () { var e = this.wrapper; return e.hasClass("k-state-disabled") || this._module.onSaveSelected(), !1 }, _onClearSelected: function () { var e = this, t = e.wrapper; return t.hasClass("k-state-disabled") || e.trigger(z, {}) || e.clearAllFiles(), !1 }, _onFileProgress: function (t, i) { var n, o; i > 100 && (i = 100), this.options.template ? e(".k-progress", t.target).width(i + "%") : (n = e(".k-upload-pct", t.target), (o = e(".k-i-warning", t.target)).length ? o.removeClass("k-i-warning").removeClass("k-icon").addClass("k-upload-pct") : 0 === n.length && e(".k-upload-status", t.target).prepend("<span class='k-upload-pct'></span>"), 100 !== i ? e(".k-upload-pct", t.target).text(i + "%") : e(".k-upload-pct", t.target).remove(), e(".k-progress", t.target).width(i + "%")), this.trigger(L, { files: b(t).data("fileNames"), percentComplete: i }) }, _onUploadSuccess: function (e, t, i) { var n = this, o = b(e), r = n.trigger(I, { files: o.data("fileNames"), response: t, operation: "upload", XMLHttpRequest: i }); r ? n._setUploadErrorState(o) : (n._fileState(o, "uploaded"), o.removeClass("k-file-progress").addClass("k-file-success"), n._updateHeaderUploadStatus(), n._supportsRemove() ? n._fileAction(o, H) : n._clearFileAction(o)), n._hideUploadProgress(o), n._checkAllComplete() }, _onUploadError: function (e, t) { var i = this, n = i._module, o = b(e), r = o.data("uid"); i._setUploadErrorState(o), i.trigger(M, { operation: "upload", files: o.data("fileNames"), XMLHttpRequest: t }), S("Server response: " + t.responseText), i.options.async.chunkSize ? n._decreasePosition && n._decreasePosition(r) : i._hideUploadProgress(o), i._checkAllComplete(), this.options.async.autoRetryAfter && this._autoRetryAfter(o) }, _autoRetryAfter: function (e) { var t = this, i = this._module.retries; i && (i[e.data("uid")] || (i[e.data("uid")] = 1), i[e.data("uid")] <= this.options.async.maxAutoRetries && (i[e.data("uid")]++, setTimeout(function () { t._module.performUpload(e) }, this.options.async.autoRetryAfter))) }, _setUploadErrorState: function (t) { var i; this._fileState(t, "failed"), t.removeClass("k-file-progress").addClass("k-file-error"), this._updateUploadProgress(t), (i = e(".k-upload-pct", t)).length > 0 ? (i.parent().find(".k-i-warning").length || i.removeClass("k-upload-pct").addClass("k-icon k-i-warning"), i.empty()) : e(".k-upload-status", t).prepend("<span class='k-icon k-i-warning'></span>"), this._updateHeaderUploadStatus(), this._fileAction(t, "retry"), this._fileAction(t, H, !0) }, _updateUploadProgress: function (t) { var i, n, o, r = this; r.options.async.chunkSize ? (i = t.data("uid"), r._module.metaData && ((n = r._module.metaData[i]) && (o = n.totalChunks ? Math.round(n.chunkIndex / n.totalChunks * 100) : 100, r._onFileProgress({ target: e(t, r.wrapper) }, o)))) : e(".k-progress", t).width("100%") }, _hideUploadProgress: function (t) { e(".k-progress", t).delay(1e3).fadeOut(2e3, function () { e(this).css("width", "0%") }) }, _showUploadButton: function () { var t = this, i = e(".k-upload-selected", t.wrapper), n = e(".k-clear-selected", t.wrapper); 0 === i.length && (i = t._renderAction("", this.localization.uploadSelectedFiles).addClass("k-upload-selected"), n = t._renderAction("", this.localization.clearSelectedFiles).addClass("k-clear-selected")), this.wrapper.append(n, i) }, _hideUploadButton: function () { e(".k-upload-selected, .k-clear-selected", this.wrapper).remove() }, _showHeaderUploadStatus: function (t) { var i = this, n = i.localization, o = e(".k-dropzone", i.wrapper), r = e(".k-upload-status-total", i.wrapper); 0 !== r.length && r.remove(), r = '<strong class="k-upload-status k-upload-status-total"><span class="k-icon"></span></strong>', t ? (r = e(r).append(n.headerStatusUploading)).find(".k-icon").addClass(W.loading) : (r = e(r).append(n.headerStatusUploaded)).find(".k-icon").addClass(W.warning), o.length > 0 ? o.append(r) : e(".k-upload-button", i.wrapper).after(r) }, _updateHeaderUploadStatus: function () { var t, i, n = this, o = e(".k-upload-status-total", this.wrapper), r = e(".k-file", n.wrapper).not(".k-file-success, .k-file-error, .k-file-invalid"), s = e(".k-file-invalid", n.wrapper), a = e(".k-file-error", n.wrapper), l = e(".k-file", n.wrapper).find(".k-i-play-sm"); !l.length || l.length !== r.length && n.options.async.concurrent ? (0 === r.length || s.length > 0 || a.length > 0) && (t = e(".k-file.k-file-error, .k-file.k-file-invalid", n.wrapper), o = e(".k-upload-status-total", n.wrapper), i = e(".k-icon", o).removeClass().addClass("k-icon").addClass(0 !== t.length ? W.warning : W.success), o.html(i).append(n.localization.headerStatusUploaded)) : (i = e(".k-icon", o).removeClass().addClass("k-icon").addClass("k-i-pause-sm"), o.html(i).append(n.localization.headerStatusPaused)) }, _hideHeaderUploadstatus: function () { e(".k-upload-status-total", this.wrapper).remove() }, _onParentFormSubmit: function () { var i, n = this.element; t !== this._module.onAbort && this._module.onAbort(), n.value || ((i = e(n)).attr("disabled", "disabled"), window.setTimeout(function () { i.removeAttr("disabled") }, 0)) }, _onParentFormReset: function () { e(".k-upload-files", this.wrapper).remove() }, _supportsFormData: function () { return "undefined" != typeof FormData }, _supportsMultiple: function () { var e = this._userAgent().indexOf("Windows") > -1; return !(k.support.browser.opera || k.support.browser.safari && e) }, _supportsDrop: function () { var e = this._userAgent().toLowerCase(), t = /chrome/.test(e), i = !t && /safari/.test(e), n = i && /windows/.test(e); return !n && this._supportsFormData() && this.options.async.saveUrl }, _userAgent: function () { return navigator.userAgent }, _setupDropZone: function () { var t, i, n = this; e(".k-upload-button", n.wrapper).wrap("<div class='k-dropzone'></div>"), t = n._ns, v(i = e(".k-dropzone", n.wrapper).append(e("<em>" + n.localization.dropFilesHere + "</em>")).on("dragenter" + t, g).on("dragover" + t, function (e) { e.preventDefault() }).on("drop" + t, e.proxy(n._onDrop, n)), t, function () { i.closest(".k-upload").hasClass("k-state-disabled") || i.addClass("k-dropzone-hovered") }, function () { i.removeClass("k-dropzone-hovered") }), n._bindDocumentDragEventWrappers(i) }, _setupCustomDropZone: function () { var t, i = this, n = e(i.options.dropZone); e(".k-upload-button", i.wrapper).wrap("<div class='k-dropzone'></div>"), t = i._ns, n.on("dragenter" + t, g).on("dragover" + t, function (e) { e.preventDefault() }).on("drop" + t, e.proxy(i._onDrop, i)), v(n, t, function (t) { i.wrapper.hasClass("k-state-disabled") || (n.removeClass("k-dropzone-hovered"), e(t.target).addClass("k-dropzone-hovered")) }, function () { n.removeClass("k-dropzone-hovered") }), i._bindDocumentDragEventWrappers(n) }, _bindDocumentDragEventWrappers: function (t) { var i = this, n = i._ns; v(e(document), n, function () { i.wrapper.hasClass("k-state-disabled") || (t.addClass("k-dropzone-active"), t.closest(".k-upload").removeClass("k-upload-empty")) }, function () { t.removeClass("k-dropzone-active"), 0 === e("li.k-file", t.closest(".k-upload")).length && t.closest(".k-upload").addClass("k-upload-empty") }) }, _supportsRemove: function () { return !!this.options.async.removeUrl }, _submitRemove: function (t, i, n, o) { var r = this.options.async.removeField || "fileNames", s = e.extend(i.data, C()); s[r] = t, jQuery.ajax({ type: this.options.async.removeVerb, dataType: "json", dataFilter: m, url: this.options.async.removeUrl, traditional: !0, data: s, headers: i.headers, success: n, error: o, xhrFields: { withCredentials: this.options.async.withCredentials } }) }, _wrapInput: function (e) { var t = this.options; return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button' aria-label='" + this.localization.select + "'></div></div>"), t.async.saveUrl || e.closest(".k-upload").addClass("k-upload-sync"), e.closest(".k-upload").addClass("k-upload-empty"), e.closest(".k-button").append("<span>" + this.localization.select + "</span>"), e.closest(".k-upload") }, _checkAllComplete: function () { 0 === e(".k-file.k-file-progress", this.wrapper).length && this.trigger(R) }, _inputFiles: function (e) { return n(e) } }), j = function (e) { this.name = "syncUploadModule", this.element = e.wrapper, this.upload = e, this.element.closest("form").attr("enctype", "multipart/form-data").attr("encoding", "multipart/form-data") }; j.prototype = { onSelect: function (t, n) { var o, r, s = this.upload, a = e(t.target), l = s._filesContainValidationErrors(n); s._addInput(a), o = { fileNames: n }, l ? a.remove() : o.relatedInput = a, r = s._enqueueFile(i(a), o), l && s._hideUploadProgress(r), s._fileAction(r, H) }, onRemove: function (e) { var t = b(e), i = t.data("relatedInput"); i && i.remove(), this.upload._removeFileEntry(t) } }, w = function (e) { this.name = "iframeUploadModule", this.element = e.wrapper, this.upload = e, this.iframes = [] }, q._frameId = 0, w.prototype = { onSelect: function (t, i) { var n = this.upload, o = e(t.target), r = n._filesContainValidationErrors(i), s = this.prepareUpload(o, i, r); n.options.async.autoUpload ? r ? (n._fileAction(s, H), n._showHeaderUploadStatus(!1)) : this.performUpload(s) : (n._fileAction(s, H), r ? n._updateHeaderUploadStatus() : n._showUploadButton()), r && n._hideUploadProgress(s) }, prepareUpload: function (t, n, o) { var r, s, a, l, c = this.upload, d = e(c.element), u = c.options.async.saveField || t.attr("name"); return c._addInput(t), t.attr("name", u), o ? (t.remove(), s = { fileNames: n }) : (a = this.createFrame(c.name + "_" + q._frameId++), this.registerFrame(a), l = this.createForm(c.options.async.saveUrl, a.attr("name")).append(d), s = { frame: a, relatedInput: d, fileNames: n }), r = c._enqueueFile(i(t), s), a && a.data({ form: l, file: r }), r }, performUpload: function (t) { var i, n, o, r = { files: t.data("fileNames") }, s = t.data("frame"), a = this.upload; if (a.trigger(E, r)) a._removeFileEntry(s.data("file")), this.cleanupFrame(s), this.unregisterFrame(s); else { for (n in a._hideUploadButton(), a._showHeaderUploadStatus(!0), s.appendTo(document.body), i = s.data("form").attr("action", a.options.async.saveUrl).appendTo(document.body), r.data = e.extend({}, r.data, C()), r.data) 0 === (o = i.find("input[name='" + n + "']")).length && (o = e("<input>", { type: "hidden", name: n }).prependTo(i)), o.val(r.data[n]); a._fileAction(t, F), a._fileState(t, "uploading"), e(t).removeClass("k-file-error").addClass("k-file-progress"), s.one("load", e.proxy(this.onIframeLoad, this)), i[0].submit() } }, onSaveSelected: function () { var t = this, i = t.upload; e(".k-file", this.element).each(function () { var n = e(this), o = _(n), r = i._filesContainValidationErrors(n.data("fileNames")); o || r || t.performUpload(n) }) }, onIframeLoad: function (t) { var i, n = e(t.target); try { i = n.contents().text() } catch (e) { i = "Error trying to get server response: " + e } this.processResponse(n, i) }, processResponse: function (t, i) { var n = t.data("file"), o = this, r = { responseText: i }; p(i, function (i) { e.extend(r, { statusText: "OK", status: "200" }), o.upload._onFileProgress({ target: e(n, o.upload.wrapper) }, 100), o.upload._onUploadSuccess({ target: e(n, o.upload.wrapper) }, i, r), o.cleanupFrame(t), o.unregisterFrame(t) }, function () { e.extend(r, { statusText: "error", status: "500" }), o.upload._onUploadError({ target: e(n, o.upload.wrapper) }, r) }) }, onCancel: function (t) { var i = e(t.target).data("frame"); this.stopFrameSubmit(i), this.cleanupFrame(i), this.unregisterFrame(i), this.upload._removeFileEntry(i.data("file")) }, onRetry: function (e) { var t = b(e); this.performUpload(t) }, onRemove: function (e, t, i) { var n = this, o = n.upload, r = b(e), s = r.data("frame"); s ? (n.unregisterFrame(s), o._removeFileEntry(r), n.cleanupFrame(s)) : r.hasClass("k-file-success") ? f(r, o, t, i) : o._removeFileEntry(r) }, onAbort: function () { var t = this.element, i = this; e.each(this.iframes, function () { e("input", this.data("form")).appendTo(t), i.stopFrameSubmit(this[0]), this.data("form").remove(), this.remove() }), this.iframes = [] }, createFrame: function (t) { return e("<iframe name='" + t + "' id='" + t + "' style='display:none;' />") }, createForm: function (t, i) { return e("<form enctype='multipart/form-data' method='POST' action='" + t + "' target='" + i + "'/>") }, stopFrameSubmit: function (e) { t !== e.stop ? e.stop() : e.document && e.document.execCommand("Stop") }, registerFrame: function (e) { this.iframes.push(e) }, unregisterFrame: function (t) { this.iframes = e.grep(this.iframes, function (e) { return e.attr("name") != t.attr("name") }) }, cleanupFrame: function (e) { var t = e.data("form"); e.data("file").data("frame", null), setTimeout(function () { t.remove(), e.remove() }, 1) } }, (y = function (e) { this.name = "formDataUploadModule", this.element = e.wrapper, this.upload = e, this.position = {}, this.metaData = {}, this.cancelled = {}, this.resume = {}, this.paused = {}, this.retries = {} }).prototype = { onSelect: function (t, i) { var n, o, r = this.upload, s = this, a = e(t.target), l = this.prepareUpload(a, i); e.each(l, function (t) { n = r._filesContainValidationErrors(e(this.data("fileNames"))), r.options.async.autoUpload ? n ? (r._fileAction(this, H), r._showHeaderUploadStatus(!1)) : r.options.async.chunkSize ? (s.prepareChunk(this), o = this.prev(), (r.options.async.concurrent || 0 === t && !o.length || 0 === t && o.hasClass("k-file-success")) && s.performUpload(this)) : s.performUpload(this) : (r._fileAction(this, H), n ? r._updateHeaderUploadStatus() : (r._showUploadButton(), this.addClass("k-toupload"))), n && r._hideUploadProgress(this) }) }, prepareUpload: function (t, i) { var n = this.enqueueFiles(i); return t.is("input") && (e.each(n, function () { e(this).data("relatedInput", t) }), t.data("relatedFileEntries", n), this.upload._addInput(t)), n }, enqueueFiles: function (t) { var i, n, o, r, s = this.upload, a = t.length, l = []; if (!0 === s.options.async.batch) i = e.map(t, function (e) { return e.name }).join(", "), (s.directory || s.options.directoryDrop) && e(t).each(function () { (this.rawFile.webkitRelativePath || this.rawFile.relativePath) && (this.name = this.rawFile.webkitRelativePath || this.rawFile.relativePath) }), (r = s._enqueueFile(i, { fileNames: t })).data("files", t), l.push(r); else for (n = 0; n < a; n++)o = t[n], i = o.name, (s.directory || s.options.directoryDrop) && (o.rawFile.webkitRelativePath || o.rawFile.relativePath) && (o.name = o.rawFile.webkitRelativePath || o.rawFile.relativePath), (r = s._enqueueFile(i, { fileNames: [o] })).data("files", [o]), l.push(r); return l }, performUpload: function (t) { var i, n, o = this.upload, r = this.createFormData(), s = this.createXHR(), a = { files: t.data("fileNames"), XMLHttpRequest: s }; if (o.trigger(E, a)) this.removeFileEntry(t); else { if (0 === t.find(".k-i-cancel").length && (o.options.async.chunkSize && o._fileAction(t, P), o._fileAction(t, F, o.options.async.chunkSize)), o.wrapper.find(".k-toupload").length || o._hideUploadButton(), o._showHeaderUploadStatus(!0), a.formData) r = a.formData; else { for (n in a.data = e.extend({}, a.data, C()), a.data) r.append(n, a.data[n]); (i = t.data("files")) && this.populateFormData(r, i) } o._fileState(t, "uploading"), e(t).removeClass("k-file-error").addClass("k-file-progress"), o.options.async.useArrayBuffer && window.FileReader ? this._readFile(o.options.async.saveUrl, r, t, s) : this.postFormData(o.options.async.saveUrl, r, t, s) } }, _readFile: function (i, n, o, r) { var s = this, a = s.upload, l = o.data("files")[0], c = new FileReader; c.onload = function (c) { try { s.fileArrayBuffer = s.fileArrayBuffer ? s._appendBuffer(s.fileArrayBuffer, c.target.result) : c.target.result } catch (i) { return a._onUploadError({ target: e(o, a.wrapper) }, r), t } s.position[l.uid] > l.size ? (s.postFormData(a.options.async.saveUrl, s.fileArrayBuffer, o, r), s.fileArrayBuffer = null) : s._readFile(i, n, o, r) }, c.onerror = function () { a._onUploadError({ target: e(o, a.wrapper) }, r) }, c.readAsArrayBuffer(s._getCurrentChunk(l.rawFile, l.uid)) }, _appendBuffer: function (e, t) { var i = new Uint8Array(e.byteLength + t.byteLength); return i.set(new Uint8Array(e), 0), i.set(new Uint8Array(t), e.byteLength), i.buffer }, onSaveSelected: function () { var t = this, i = t.upload; e(".k-toupload", this.element).filter(function () { var t = e(this), n = _(t), o = i._filesContainValidationErrors(t.data("fileNames")); return !n && !o }).each(function (n) { var o = e(this), r = o.prev(); o.removeClass("k-toupload"), i.options.async.chunkSize ? (t.prepareChunk(o), (i.options.async.concurrent || 0 === n && !r.length || 0 === n && r.hasClass("k-file-success") || r.hasClass("k-file-error")) && t.performUpload(o)) : t.performUpload(o) }) }, onCancel: function (e) { var t = b(e); this.upload.options.async.chunkSize && (this.cancelled[t.data("uid")] = !0), this.stopUploadRequest(t), this.removeFileEntry(t) }, onPause: function (e) { var t = b(e), i = t.data("uid"), n = this.upload.options.async; n.chunkSize && (this.retries[i] = n.maxAutoRetries + 1, this.paused[i] = !0, this.resume[i] = !1) }, onResume: function (e) { var t = b(e), i = t.data("uid"); this.upload.options.async.chunkSize && (delete this.paused[i], this.resume[i] = !0, this.retries[t.data("uid")] = 1, this._increaseChunkIndex(i), this.performUpload(t)) }, onRetry: function (e) { var t = b(e), i = this.upload.options.async; i.chunkSize && (this.retries[t.data("uid")] = i.maxAutoRetries + 1, delete this.paused[t.data("uid")]), this.performUpload(t) }, onRemove: function (e, t, i) { var n = this.upload, o = b(e), r = this.upload.options.async; r.chunkSize && (this.retries[o.data("uid")] = r.maxAutoRetries + 1), o.hasClass("k-file-success") ? f(o, n, t, i) : this.removeFileEntry(o) }, createXHR: function () { return new XMLHttpRequest }, postFormData: function (e, t, i, n) { var o, r = this; i.data("request", n), n.addEventListener("load", function (e) { r.onRequestSuccess.call(r, e, i) }, !1), n.addEventListener(M, function (e) { r.onRequestError.call(r, e, i) }, !1), n.upload.addEventListener("progress", function (e) { r.onRequestProgress.call(r, e, i) }, !1), n.open("POST", e, !0), n.withCredentials = this.upload.options.async.withCredentials, (o = this.upload.options.async.accept) && n.setRequestHeader("Accept", o), n.send(t) }, createFormData: function () { return new FormData }, populateFormData: function (e, t) { var i, n, o, r, s = t.length, a = this.upload; if (a.options.async.chunkSize) o = t[0].uid, i = this._getCurrentChunk(t[0].rawFile, o), e.append(a.options.async.saveField || a.name, i), r = JSON.stringify(this.metaData[o]), e.append("metadata", r); else for (n = 0; n < s; n++)e.append(a.options.async.saveField || a.name, t[n].rawFile); return e }, onRequestSuccess: function (t, i) { function n() { r.upload._onUploadError({ target: e(i, r.upload.wrapper) }, o) } var o = t.target, r = this; o.status >= 200 && o.status <= 299 ? p(o.responseText, function (t) { var n = r.upload.options.async.batch, s = r.upload.options.async.chunkSize, a = r.upload.options.async.concurrent, l = t.fileUid; r.paused[l] || r.cancelled[l] || (delete r.retries[l], !s || n || t.uploaded ? !s || n || a || !i.next().length || i.next().hasClass("k-toupload") ? (r.upload._onFileProgress({ target: e(i, r.upload.wrapper) }, 100), r.upload._onUploadSuccess({ target: e(i, r.upload.wrapper) }, t, o), r.cleanupFileEntry(i)) : (r.upload._onFileProgress({ target: e(i, r.upload.wrapper) }, 100), r._resetChunkIndex(l), r.upload._onUploadSuccess({ target: e(i, r.upload.wrapper) }, t, o), r.performUpload(i.next())) : (r._increaseChunkIndex(l), r.performUpload(i))) }, n) : n() }, onRequestError: function (t, i) { var n = t.target; this.upload._onUploadError({ target: e(i, this.upload.wrapper) }, n) }, cleanupFileEntry: function (t) { var i = t.data("relatedInput"), n = !0; i && (e.each(i.data("relatedFileEntries") || [], function () { this.parent().length > 0 && this[0] != t[0] && (n = n && this.hasClass("k-file-success")) }), n && i.remove()) }, removeFileEntry: function (e) { var t = this.upload.options.async.chunkSize, i = this.upload.options.async.concurrent; this.cleanupFileEntry(e), t && !i && e.next().length && this.performUpload(e.next()), this.upload._removeFileEntry(e) }, onRequestProgress: function (t, i) { var n, o = Math.round(100 * t.loaded / t.total), r = i.data("uid"); this.upload.options.async.chunkSize && (n = this.metaData[r], o = n.totalChunks ? Math.round(n.chunkIndex / n.totalChunks * 100) : 100), this.upload._onFileProgress({ target: e(i, this.upload.wrapper) }, o) }, stopUploadRequest: function (e) { e.data("request").abort() }, prepareChunk: function (e) { var t = e.data("files")[0].rawFile, i = e.data("files")[0].uid, n = this.upload.options.async.chunkSize; this.position[i] = 0, this.metaData[i] = { chunkIndex: 0, contentType: t.type, fileName: t.name, totalFileSize: t.size, totalChunks: Math.ceil(t.size / n), uploadUid: i } }, _decreaseChunkIndex: function (e) { this.metaData[e].chunkIndex-- }, _increaseChunkIndex: function (e) { this.metaData[e].chunkIndex++ }, _resetChunkIndex: function (e) { this.metaData[e].chunkIndex = 0 }, _decreasePosition: function (e) { this.position[e] -= this.upload.options.async.chunkSize }, _getCurrentChunk: function (e, t) { var i, n = this.position[t], o = this.upload.options.async, r = o.chunkSize || o.bufferChunkSize; return this.position[t] || (this.position[t] = 0), this.position[t] += r, (i = this._getChunker(e)) ? e[i](n, this.position[t]) : e }, _getChunker: function (e) { return e.slice ? "slice" : e.mozSlice ? "mozSlice" : e.webkitSlice ? "webkitSlice" : null } }, k.ui.plugin(q) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.filebrowser.min", ["kendo.listview.min", "kendo.dropdownlist.min", "kendo.upload.min"], function () { return function (e, t) { function i(e, i) { return e !== t && e.match(/\/$/) || (e = (e || "") + "/"), e + i } function n(e) { if (!e) return ""; var t = " bytes"; return e >= 1073741824 ? (t = " GB", e /= 1073741824) : e >= 1048576 ? (t = " MB", e /= 1048576) : e >= 1024 && (t = " KB", e /= 1024), Math.round(100 * e) / 100 + t } var o, r, s, a = window.kendo, l = a.ui.Widget, c = e.isPlainObject, d = e.proxy, u = e.extend, h = a.support.placeholder, f = a.support.browser, p = a.isFunction, m = /(^\/|\/$)/g, g = "change", v = "apply", _ = "error", b = "click", w = ".kendoFileBrowser", y = ".kendoBreadcrumbs", k = ".kendoSearchBox", x = "name", C = "size", S = "type", T = { field: S, dir: "asc" }, D = a.template('<li class="k-tile-empty"><strong>${text}</strong></li>'); u(!0, a.data, { schemas: { filebrowser: { data: function (e) { return e.items || e || [] }, model: { id: "name", fields: { name: "name", size: "size", type: "type" } } } } }), u(!0, a.data, { transports: { filebrowser: a.data.RemoteTransport.extend({ init: function (t) { a.data.RemoteTransport.fn.init.call(this, e.extend(!0, {}, this.options, t)) }, _call: function (t, i) { i.data = e.extend({}, i.data, { path: this.options.path() }), p(this.options[t]) ? this.options[t].call(this, i) : a.data.RemoteTransport.fn[t].call(this, i) }, read: function (e) { this._call("read", e) }, create: function (e) { this._call("create", e) }, destroy: function (e) { this._call("destroy", e) }, update: function () { }, options: { read: { type: "POST" }, update: { type: "POST" }, create: { type: "POST" }, destroy: { type: "POST" } } }) } }), f.msie && f.version, o = l.extend({ init: function (e, t) { var i = this; t = t || {}, l.fn.init.call(i, e, t), i.element.addClass("k-filebrowser"), i.element.on(b + w, ".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-i-close)", d(i._deleteClick, i)).on(b + w, ".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-i-folder-add)", d(i._addClick, i)).on("keydown" + w, "li.k-state-selected input", d(i._directoryKeyDown, i)).on("blur" + w, "li.k-state-selected input", d(i._directoryBlur, i)), i._dataSource(), i.refresh(), i.path(i.options.path) }, options: { name: "FileBrowser", messages: { uploadFile: "Upload", orderBy: "Arrange by", orderByName: "Name", orderBySize: "Size", directoryNotFound: "A directory with this name was not found.", emptyFolder: "Empty Folder", deleteFile: 'Are you sure you want to delete "{0}"?', invalidFileType: 'The selected file "{0}" is not valid. Supported file types are {1}.', overwriteFile: 'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?', dropFilesHere: "drop file here to upload", search: "Search" }, transport: {}, path: "/", fileTypes: "*.*" }, events: [_, g, v], destroy: function () { var e = this; l.fn.destroy.call(e), e.dataSource.unbind(_, e._errorHandler), e.element.add(e.list).add(e.toolbar).off(w), a.destroy(e.element) }, value: function () { var e, t = this, n = t._selectedItem(), o = t.options.transport.fileUrl; if (n && "f" === n.get(S)) return e = i(t.path(), n.get(x)).replace(m, ""), o && (e = p(o) ? o(e) : a.format(o, encodeURIComponent(e))), e }, _selectedItem: function () { var e = this.listView, t = e.select(); if (t.length) return this.dataSource.getByUid(t.attr(a.attr("uid"))) }, _toolbar: function () { var t = this, i = a.template('<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-i-plus"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-i-folder-add" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-i-close" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></div></div>'), n = t.options.messages, o = [{ text: n.orderByName, value: "name" }, { text: n.orderBySize, value: "size" }]; t.toolbar = e(i({ messages: n, showUpload: t.options.transport.uploadUrl, showCreate: t.options.transport.create, showDelete: t.options.transport.destroy })).appendTo(t.element).find(".k-upload input").kendoUpload({ multiple: !1, localization: { dropFilesHere: n.dropFilesHere }, async: { saveUrl: t.options.transport.uploadUrl, autoUpload: !0 }, upload: d(t._fileUpload, t), error: function (e) { t._error({ xhr: e.XMLHttpRequest, status: "error" }) } }).end(), t.upload = t.toolbar.find(".k-upload input").data("kendoUpload"), t.arrangeBy = t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({ dataSource: o, dataTextField: "text", dataValueField: "value", change: function () { t.orderBy(this.value()) } }).data("kendoDropDownList"), t._attachDropzoneEvents() }, _attachDropzoneEvents: function () { var t = this; t.options.transport.uploadUrl && (function (e, t, i) { var n, o; e.on("dragenter" + w, function () { t(), o = new Date, n || (n = setInterval(function () { var e = new Date - o; e > 100 && (i(), clearInterval(n), n = null) }, 100)) }).on("dragover" + w, function () { o = new Date }) }(e(document.documentElement), e.proxy(t._dropEnter, t), e.proxy(t._dropLeave, t)), t._scrollHandler = d(t._positionDropzone, t)) }, _dropEnter: function () { this._positionDropzone(), e(document).on("scroll" + w, this._scrollHandler) }, _dropLeave: function () { this._removeDropzone(), e(document).off("scroll" + w, this._scrollHandler) }, _positionDropzone: function () { var e = this.element, t = e.offset(); this.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(t).css({ width: e[0].clientWidth, height: e[0].clientHeight, lineHeight: e[0].clientHeight + "px" }) }, _removeDropzone: function () { this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({ width: "", height: "", lineHeight: "", top: "", left: "" }) }, _deleteClick: function () { var e = this, t = e.listView.select(), i = a.format(e.options.messages.deleteFile, t.find("strong").text()); t.length && e._showMessage(i, "confirm") && e.listView.remove(t) }, _addClick: function () { this.createDirectory() }, _getFieldName: function (e) { return function (e, t) { var i = e[t]; return c(i) ? i.from || i.field || t : i }(this.dataSource.reader.model.fields, e) }, _fileUpload: function (e) { var t, i = this, n = i.options, o = n.fileTypes, r = RegExp(("(" + o.split(",").join(")|(") + ")").replace(/\*\./g, ".*."), "i"), s = e.files[0].name, l = x, c = C; r.test(s) ? (e.data = { path: i.path() }, (t = i._createFile(s)) ? i.upload.one("success", function (e) { var n = i._insertFileToList(t); n.set(l, e.response[i._getFieldName(l)]), n.set(c, e.response[i._getFieldName(c)]), i._tiles = i.listView.items().filter("[" + a.attr("type") + "=f]") }) : e.preventDefault()) : (e.preventDefault(), i._showMessage(a.format(n.messages.invalidFileType, s, o))) }, _findFile: function (e) { var t, i, n, o = this.dataSource.data(); for (e = e.toLowerCase(), t = 0, n = o.length; t < n; t++)if ("f" === o[t].get("type") && o[t].get("name").toLowerCase() === e) { i = o[t]; break } return i }, _createFile: function (e) { var t = this, i = {}, n = t._findFile(e); return n ? t._showMessage(a.format(t.options.messages.overwriteFile, e), "confirm") ? (n._override = !0, n) : null : (i.type = "f", i[x] = e, i[C] = 0, i) }, _insertFileToList: function (e) { var t, i, n, o, r; if (e._override) return e; for (i = this.dataSource, n = i.view(), o = 0, r = n.length; o < r; o++)if ("f" === n[o].get(S)) { t = o; break } return i.insert(++t, e) }, createDirectory: function () { var e, t, i = this, n = 0, o = S, r = x, s = i.dataSource.data(), l = i._nameDirectory(), c = new i.dataSource.reader.model; for (e = 0, t = s.length; e < t; e++)"d" === s[e].get(o) && (n = e); c.set(o, "d"), c.set(r, l), i.listView.one("dataBound", function () { var e = i.listView.items().filter("[" + a.attr("uid") + "=" + c.uid + "]"), t = e.find("input"); e.length && this.edit(e), this.element.scrollTop(e.attr("offsetTop") - this.element[0].offsetHeight), setTimeout(function () { t.select() }) }).one("save", function (e) { var t = e.model.get(r); t ? e.model.set(r, i._nameExists(t, c.uid) ? i._nameDirectory() : t) : e.model.set(r, l) }), i.dataSource.insert(++n, c) }, _directoryKeyDown: function (e) { 13 == e.keyCode && e.currentTarget.blur() }, _directoryBlur: function () { this.listView.save() }, _nameExists: function (e, t) { var i, n, o = this.dataSource.data(); for (i = 0, n = o.length; i < n; i++)if ("d" === o[i].get("type") && o[i].get("name").toLowerCase() === e.toLowerCase() && o[i].uid !== t) return !0; return !1 }, _nameDirectory: function () { var t, i, n, o = "New folder", r = this.dataSource.data(), s = [], a = x; for (i = 0, n = r.length; i < n; i++)"d" === r[i].get("type") && r[i].get(a).toLowerCase().indexOf(o.toLowerCase()) > -1 && s.push(r[i].get(a)); if (e.inArray(o, s) > -1) { i = 2; do { t = o + " (" + i + ")", i++ } while (e.inArray(t, s) > -1); o = t } return o }, orderBy: function (e) { this.dataSource.sort([{ field: S, dir: "asc" }, { field: e, dir: "asc" }]) }, search: function (e) { this.dataSource.filter({ field: x, operator: "contains", value: e }) }, _content: function () { var t = this; t.list = e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick" + w, "li", d(t._dblClick, t)), t.listView = new a.ui.ListView(t.list, { dataSource: t.dataSource, template: t._itemTmpl(), editTemplate: t._editTmpl(), selectable: !0, autoBind: !1, dataBinding: function (e) { t.toolbar.find(".k-i-close").parent().addClass("k-state-disabled"), "remove" !== e.action && "sync" !== e.action || e.preventDefault() }, dataBound: function () { t.dataSource.view().length ? t._tiles = this.items().filter("[" + a.attr("type") + "=f]") : this.wrapper.append(D({ text: t.options.messages.emptyFolder })) }, change: d(t._listViewChange, t) }) }, _dblClick: function (t) { var n, o = this, r = e(t.currentTarget); r.hasClass("k-edit-item") && o._directoryBlur(), r.filter("[" + a.attr("type") + "=d]").length ? (n = o.dataSource.getByUid(r.attr(a.attr("uid")))) && (o.path(i(o.path(), n.get(x))), o.breadcrumbs.value(o.path())) : r.filter("[" + a.attr("type") + "=f]").length && o.trigger(v) }, _listViewChange: function () { var e = this._selectedItem(); e && (this.toolbar.find(".k-i-close").parent().removeClass("k-state-disabled"), this.trigger(g, { selected: e })) }, _dataSource: function () { var e = this, t = e.options, i = t.transport, n = u({}, T), o = { field: x, dir: "asc" }, r = { type: i.type || "filebrowser", sort: [n, o] }; c(i) && (i.path = d(e.path, e), r.transport = i), c(t.schema) ? r.schema = t.schema : i.type && c(a.data.schemas[i.type]) && a.data.schemas[i.type], e.dataSource && e._errorHandler ? e.dataSource.unbind(_, e._errorHandler) : e._errorHandler = d(e._error, e), e.dataSource = a.data.DataSource.create(r).bind(_, e._errorHandler) }, _navigation: function () { var t = this, i = e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element); t.breadcrumbs = i.find("input:first").kendoBreadcrumbs({ value: t.options.path, change: function () { t.path(this.value()) } }).data("kendoBreadcrumbs"), t.searchBox = i.parent().find("input:last").kendoSearchBox({ label: t.options.messages.search, change: function () { t.search(this.value()) } }).data("kendoSearchBox") }, _error: function (e) { var t, i, n = this; n.trigger(_, e) || (t = e.xhr.status, "error" == e.status ? "404" == t ? n._showMessage(n.options.messages.directoryNotFound) : "0" != t && n._showMessage("Error! The requested URL returned " + t + " - " + e.xhr.statusText) : "timeout" == t && n._showMessage("Error! Server timeout."), (i = n.dataSource).hasChanges() && i.cancelChanges()) }, _showMessage: function (e, t) { return window[t || "alert"](e) }, refresh: function () { var e = this; e._navigation(), e._toolbar(), e._content() }, _editTmpl: function () { var e = '<li class="k-tile k-state-selected" ' + a.attr("uid") + '="#=uid#" '; return e += a.attr("type") + '="${' + S + '}">', e += '#if(type == "d") { #', e += '<div class="k-thumb"><span class="k-icon k-i-folder"></span></div>', e += "#}else{#", e += '<div class="k-thumb"><span class="k-icon k-i-loading"></span></div>', e += "#}#", e += '#if(type == "d") { #', e += '<input class="k-input" ' + a.attr("bind") + '="value:' + x + '"/>', e += "#}#", e += "</li>", d(a.template(e), { sizeFormatter: n }) }, _itemTmpl: function () { var e = '<li class="k-tile" ' + a.attr("uid") + '="#=uid#" '; return e += a.attr("type") + '="${' + S + '}">', e += '#if(type == "d") { #', e += '<div class="k-thumb"><span class="k-icon k-i-folder"></span></div>', e += "#}else{#", e += '<div class="k-thumb"><span class="k-icon k-i-file"></span></div>', e += "#}#", e += "<strong>${name}</strong>", e += '#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#', e += "</li>", d(a.template(e), { sizeFormatter: n }) }, path: function (e) { var i = this, n = i._path || ""; return e !== t ? (i._path = e.replace(m, "") + "/", i.dataSource.read({ path: i._path }), t) : (n && (n = n.replace(m, "")), "/" === n || "" === n ? "" : n + "/") } }), r = l.extend({ init: function (e, t) { var i = this; t = t || {}, l.fn.init.call(i, e, t), h && i.element.attr("placeholder", i.options.label), i._wrapper(), i.element.on("keydown" + k, d(i._keydown, i)).on("change" + k, d(i._updateValue, i)), i.wrapper.on(b + k, "a", d(i._click, i)), h || i.element.on("focus" + k, d(i._focus, i)).on("blur" + k, d(i._blur, i)) }, options: { name: "SearchBox", label: "Search", value: "" }, events: [g], destroy: function () { var e = this; e.wrapper.add(e.element).add(e.label).off(k), l.fn.destroy.call(e) }, _keydown: function (e) { 13 === e.keyCode && this._updateValue() }, _click: function (e) { e.preventDefault(), this._updateValue() }, _updateValue: function () { var e = this, t = e.element.val(); t !== e.value() && (e.value(t), e.trigger(g)) }, _blur: function () { this._updateValue(), this._toggleLabel() }, _toggleLabel: function () { h || this.label.toggle(!this.element.val()) }, _focus: function () { this.label.hide() }, _wrapper: function () { var t = this.element, i = t.parents(".k-search-wrap"); t[0].style.width = "", t.addClass("k-input"), i.length || (i = t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(), h || e('<label style="display:block">' + this.options.label + "</label>").insertBefore(t), e('<a href="#" class="k-icon k-i-zoom k-search"/>').appendTo(i)), this.wrapper = i, this.label = i.find(">label") }, value: function (e) { var i = this; return e !== t ? (i.options.value = e, i.element.val(e), i._toggleLabel(), t) : i.options.value } }), s = l.extend({ init: function (e, t) { var i = this; t = t || {}, l.fn.init.call(i, e, t), i._wrapper(), i.wrapper.on("focus" + y, "input", d(i._focus, i)).on("blur" + y, "input", d(i._blur, i)).on("keydown" + y, "input", d(i._keydown, i)).on(b + y, "a.k-i-arrow-60-up:first", d(i._rootClick, i)).on(b + y, "a:not(.k-i-arrow-60-up)", d(i._click, i)), i.value(i.options.value) }, options: { name: "Breadcrumbs", gap: 50 }, events: [g], destroy: function () { var e = this; l.fn.destroy.call(e), e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(y) }, _update: function (e) { (e = "/" === (e || "").charAt(0) ? e : "/" + (e || "")) !== this.value() && (this.value(e), this.trigger(g)) }, _click: function (t) { t.preventDefault(), this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-60-up)").addBack())) }, _rootClick: function (e) { e.preventDefault(), this._update("") }, _focus: function () { var e = this, t = e.element; e.overlay.hide(), e.element.val(e.value()), setTimeout(function () { t.select() }) }, _blur: function () { if (!this.overlay.is(":visible")) { var e = this, t = e.element, i = t.val().replace(/\/{2,}/g, "/"); e.overlay.show(), t.val(""), e._update(i) } }, _keydown: function (e) { var t = this; 13 === e.keyCode && (t._blur(), setTimeout(function () { t.overlay.find("a:first").focus() })) }, _wrapper: function () { var t, i = this.element, n = i.parents(".k-breadcrumbs"); i[0].style.width = "", i.addClass("k-input"), n.length || (n = i.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()), (t = n.find(".k-breadcrumbs-wrap")).length || (t = e('<div class="k-breadcrumbs-wrap"/>').appendTo(n)), this.wrapper = n, this.overlay = t }, refresh: function () { var i, n, o, r = "", s = this.value(); for (s !== t && s.match(/^\//) || (s = "/" + (s || "")), i = s.split("/"), n = 0, o = i.length; n < o; n++)i[n] && (r || (r += '<a href="#" class="k-icon k-i-arrow-60-up" title="Go to parent folder"></a>'), r += '<a class="k-link" href="#">' + i[n] + "</a>", r += '<span class="k-icon k-i-arrow-60-right" title="Go to child folder"></span>'); this.overlay.empty().append(e(r)), this._adjustSectionWidth() }, _adjustSectionWidth: function () { var t, i = this, n = i.wrapper, o = n.width() - i.options.gap, r = i.overlay.find("a"); r.each(function (i) { (t = e(this)).parent().width() > o && (i == r.length - 1 ? t.width(o) : t.prev().addBack().hide()) }) }, value: function (e) { return e !== t ? (this._value = e.replace(/\/{2,}/g, "/"), this.refresh(), t) : this._value }, _path: function (t) { return "/" + e.map(t, function (t) { return e(t).text() }).join("/") } }), a.ui.plugin(o), a.ui.plugin(s), a.ui.plugin(r) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.imagebrowser.min", ["kendo.filebrowser.min"], function () { return function (e, t) { function i(e, i) { return e !== t && e.match(/\/$/) || (e = (e || "") + "/"), e + i } function n(e) { if (!e) return ""; var t = " bytes"; return e >= 1073741824 ? (t = " GB", e /= 1073741824) : e >= 1048576 ? (t = " MB", e /= 1048576) : e >= 1024 && (t = " KB", e /= 1024), Math.round(100 * e) / 100 + t } var o, r, s = window.kendo, a = s.ui.FileBrowser, l = e.isPlainObject, c = e.proxy, d = e.extend, u = s.support.browser, h = s.isFunction, f = /(^\/|\/$)/g, p = "error", m = ".kendoImageBrowser", g = "name", v = "size", _ = "type", b = { field: _, dir: "asc" }, w = s.template('<li class="k-tile-empty"><strong>${text}</strong></li>'); d(!0, s.data, { schemas: { imagebrowser: { data: function (e) { return e.items || e || [] }, model: { id: "name", fields: { name: "name", size: "size", type: "type" } } } } }), d(!0, s.data, { transports: { imagebrowser: s.data.RemoteTransport.extend({ init: function (t) { s.data.RemoteTransport.fn.init.call(this, e.extend(!0, {}, this.options, t)) }, _call: function (t, i) { i.data = e.extend({}, i.data, { path: this.options.path() }), h(this.options[t]) ? this.options[t].call(this, i) : s.data.RemoteTransport.fn[t].call(this, i) }, read: function (e) { this._call("read", e) }, create: function (e) { this._call("create", e) }, destroy: function (e) { this._call("destroy", e) }, update: function () { }, options: { read: { type: "POST" }, update: { type: "POST" }, create: { type: "POST" }, destroy: { type: "POST" } } }) } }), o = u.msie && u.version < 8 ? function (e) { return e.offsetTop } : function (t) { return t.offsetTop - e(t).height() }, r = a.extend({ init: function (e, t) { t = t || {}, a.fn.init.call(this, e, t), this.element.addClass("k-imagebrowser") }, options: { name: "ImageBrowser", fileTypes: "*.png,*.gif,*.jpg,*.jpeg" }, value: function () { var e, t = this, n = t._selectedItem(), o = t.options.transport.imageUrl; if (n && "f" === n.get(_)) return e = i(t.path(), n.get(g)).replace(f, ""), o && (e = h(o) ? o(e) : s.format(o, encodeURIComponent(e))), e }, _fileUpload: function (e) { var t, i = this, n = i.options, o = n.fileTypes, r = RegExp(("(" + o.split(",").join(")|(") + ")").replace(/\*\./g, ".*."), "i"), a = e.files[0].name, l = g, c = v; r.test(a) ? (e.data = { path: i.path() }, (t = i._createFile(a)) ? (t._uploading = !0, i.upload.one("success", function (e) { delete t._uploading; var n = i._insertFileToList(t); n.set(l, e.response[i._getFieldName(l)]), n.set(c, e.response[i._getFieldName(c)]), i._tiles = i.listView.items().filter("[" + s.attr("type") + "=f]"), i._scroll() })) : e.preventDefault()) : (e.preventDefault(), i._showMessage(s.format(n.messages.invalidFileType, a, o))) }, _content: function () { var t = this; t.list = e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll" + m, c(t._scroll, t)).on("dblclick" + m, "li", c(t._dblClick, t)), t.listView = new s.ui.ListView(t.list, { dataSource: t.dataSource, template: t._itemTmpl(), editTemplate: t._editTmpl(), selectable: !0, autoBind: !1, dataBinding: function (e) { t.toolbar.find(".k-i-close").parent().addClass("k-state-disabled"), "remove" !== e.action && "sync" !== e.action || e.preventDefault() }, dataBound: function () { t.dataSource.view().length ? (t._tiles = this.items().filter("[" + s.attr("type") + "=f]"), t._scroll()) : this.wrapper.append(w({ text: t.options.messages.emptyFolder })) }, change: c(t._listViewChange, t) }) }, _dataSource: function () { var e = this, t = e.options, i = t.transport, n = d({}, b), o = { field: g, dir: "asc" }, r = { type: i.type || "imagebrowser", sort: [n, o] }; l(i) && (i.path = c(e.path, e), r.transport = i), l(t.schema) ? r.schema = t.schema : i.type && l(s.data.schemas[i.type]) && s.data.schemas[i.type], e.dataSource && e._errorHandler ? e.dataSource.unbind(p, e._errorHandler) : e._errorHandler = c(e._error, e), e.dataSource = s.data.DataSource.create(r).bind(p, e._errorHandler) }, _loadImage: function (t) { var i = this, n = e(t), o = i.dataSource.getByUid(n.attr(s.attr("uid"))), r = o.get(g), a = i.options.transport.thumbnailUrl, l = e("<img />", { alt: r }), c = "?"; o._uploading || (l.hide().on("load" + m, function () { e(this).prev().remove().end().addClass("k-image").fadeIn() }), n.find(".k-i-loading").after(l), h(a) ? a = a(i.path(), encodeURIComponent(r)) : (a.indexOf("?") >= 0 && (c = "&"), a = a + c + "path=" + encodeURIComponent(i.path() + r), o._override && (a += "&_=" + (new Date).getTime(), delete o._override)), l.attr("src", a), t.loaded = !0) }, _scroll: function () { var e = this; e.options.transport && e.options.transport.thumbnailUrl && (clearTimeout(e._timeout), e._timeout = setTimeout(function () { var t = s._outerHeight(e.list), i = e.list.scrollTop(), n = i + t; e._tiles.each(function () { var t = o(this), r = t + this.offsetHeight; if ((t >= i && t < n || r >= i && r < n) && e._loadImage(this), t > n) return !1 }), e._tiles = e._tiles.filter(function () { return !this.loaded }) }, 250)) }, _itemTmpl: function () { var e = '<li class="k-tile" ' + s.attr("uid") + '="#=uid#" '; return e += s.attr("type") + '="${' + _ + '}">', e += '#if(type == "d") { #', e += '<div class="k-thumb"><span class="k-icon k-i-folder"></span></div>', e += "#}else{#", e += this.options.transport && this.options.transport.thumbnailUrl ? '<div class="k-thumb"><span class="k-icon k-i-loading"></span></div>' : '<div class="k-thumb"><span class="k-icon k-i-file"></span></div>', e += "#}#", e += "<strong>${name}</strong>", e += '#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#', e += "</li>", c(s.template(e), { sizeFormatter: n }) } }), s.ui.plugin(r) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.tabstrip.min", ["kendo.data.min"], function () { return function (e, t) { function i(t) { t.children(b).addClass(T), t.children("a").addClass(x).children(b).addClass(T), t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(P), t.filter("li[disabled]").addClass(z).removeAttr("disabled"), t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(B + " " + N), t.attr("role", "tab"), t.filter("." + B).attr("aria-selected", !0), t.each(function () { var t = e(this); t.children("." + x).length || t.contents().filter(function () { return !(this.nodeName.match(v) || 3 == this.nodeType && !d(this.nodeValue)) }).wrapAll("<span UNSELECTABLE='on' class='" + x + "'/>") }) } function n(e) { var t = e.children(".k-item"); t.filter(".k-first:not(:first-child)").removeClass(D), t.filter(".k-last:not(:last-child)").removeClass(C), t.filter(":first-child").addClass(D), t.filter(":last-child").addClass(C) } function o(e, t) { return "<span class='k-button k-button-icon k-bare k-tabstrip-" + e + "' unselectable='on'><span class='k-icon " + t + "'></span></span>" } var r = window.kendo, s = r.ui, a = r.keys, l = e.map, c = e.each, d = e.trim, u = e.extend, h = r.isFunction, f = r.template, p = r._outerWidth, m = r._outerHeight, g = s.Widget, v = /^(a|div)$/i, _ = ".kendoTabStrip", b = "img", w = "href", y = "prev", k = "show", x = "k-link", C = "k-last", S = "click", T = "k-image", D = "k-first", A = "select", E = "activate", I = "k-content", M = "contentUrl", R = "mouseenter", F = "contentLoad", z = "k-state-disabled", P = "k-state-default", B = "k-state-active", L = "k-state-focused", H = "k-state-hover", N = "k-tab-on-top", O = ".k-item:not(." + z + ")", V = ".k-tabstrip-items > " + O + ":not(." + B + ")", U = { content: f("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"), itemWrapper: f("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"), item: f("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"), image: f("<img class='k-image' alt='' src='#= imageUrl #' />"), sprite: f("<span class='k-sprite #= spriteCssClass #'></span>"), empty: f("") }, W = { wrapperCssClass: function (e, t) { var i = "k-item", n = t.index; return i += !1 === t.enabled ? " k-state-disabled" : " k-state-default", 0 === n && (i += " k-first"), n == e.length - 1 && (i += " k-last"), i }, textAttributes: function (e) { return e.url ? " href='" + e.url + "'" : "" }, text: function (e) { return !1 === e.encoded ? e.text : r.htmlEncode(e.text) }, tag: function (e) { return e.url ? "a" : "span" }, contentAttributes: function (e) { return !0 !== e.active ? " style='display:none' aria-hidden='true' aria-expanded='false'" : "" }, content: function (e) { return e.content ? e.content : e.contentUrl ? "" : "&nbsp;" }, contentUrl: function (e) { return e.contentUrl ? r.attr("content-url") + '="' + e.contentUrl + '"' : "" } }, q = g.extend({ init: function (t, i) { var n, o, s, a = this; g.fn.init.call(a, t, i), a._animations(a.options), i = a.options, a._contentUrls = i.contentUrls || [], a._wrapper(), a._isRtl = r.support.isRtl(a.wrapper), a._tabindex(), a._updateClasses(), a._dataSource(), i.dataSource && a.dataSource.fetch(), a._tabPosition(), a._scrollable(), a._contentUrls.length ? a.wrapper.find(".k-tabstrip-items > .k-item").each(function (t, i) { var n = a._contentUrls[t]; "string" == typeof n && e(i).find(">." + x).data(M, n) }) : a._contentUrls.length = a.tabGroup.find("li.k-item").length, a.wrapper.on(R + _ + " mouseleave" + _, V, a._toggleHover).on("focus" + _, e.proxy(a._active, a)).on("blur" + _, function () { a._current(null) }), a._keyDownProxy = e.proxy(a._keydown, a), i.navigatable && a.wrapper.on("keydown" + _, a._keyDownProxy), a.options.value && (n = a.options.value), a.wrapper.children(".k-tabstrip-items").on(S + _, ".k-state-disabled .k-link", !1).on(S + _, " > " + O, function (t) { var i = a.wrapper[0]; if (i !== document.activeElement) if (r.support.browser.msie) try { i.setActive() } catch (e) { i.focus() } else i.focus(); a._click(e(t.currentTarget)) && t.preventDefault() }), o = a.tabGroup.children("li." + B), s = a.contentHolder(o.index()), o[0] && s.length > 0 && 0 === s[0].childNodes.length && a.activateTab(o.eq(0)), a.element.attr("role", "tablist"), a.element[0].id && (a._ariaId = a.element[0].id + "_ts_active"), a.value(n), r.notify(a) }, _active: function () { var e = this.tabGroup.children().filter("." + B); (e = e[0] ? e : this._endItem("first"))[0] && this._current(e) }, _endItem: function (e) { return this.tabGroup.children(O)[e]() }, _item: function (e, t) { var i; return i = t === y ? "last" : "first", e ? ((e = e[t]())[0] || (e = this._endItem(i)), e.hasClass(z) && (e = this._item(e, t)), e) : this._endItem(i) }, _current: function (e) { var i = this, n = i._focused, o = i._ariaId; return e === t ? n : (n && (n[0].id === o && n.removeAttr("id"), n.removeClass(L)), e && (e.hasClass(B) || e.addClass(L), i.element.removeAttr("aria-activedescendant"), (o = e[0].id || o) && (e.attr("id", o), i.element.attr("aria-activedescendant", o))), i._focused = e, t) }, _keydown: function (e) { var i, n = this, o = e.keyCode, r = n._current(), s = n._isRtl; if (e.target == e.currentTarget) { if (o == a.DOWN || o == a.RIGHT) i = s ? y : "next"; else if (o == a.UP || o == a.LEFT) i = s ? "next" : y; else if (o == a.ENTER || o == a.SPACEBAR) n._click(r), e.preventDefault(); else { if (o == a.HOME) return n._click(n._endItem("first")), e.preventDefault(), t; if (o == a.END) return n._click(n._endItem("last")), e.preventDefault(), t } i && (n._click(n._item(r, i)), e.preventDefault()) } }, _dataSource: function () { var t = this; t.dataSource && t._refreshHandler ? t.dataSource.unbind("change", t._refreshHandler) : t._refreshHandler = e.proxy(t.refresh, t), t.dataSource = r.data.DataSource.create(t.options.dataSource).bind("change", t._refreshHandler) }, setDataSource: function (e) { var t = this; t.options.dataSource = e, t._dataSource(), t.dataSource.fetch() }, _animations: function (e) { e && "animation" in e && !e.animation && (e.animation = { open: { effects: {} }, close: { effects: {} } }) }, refresh: function (e) { var t, i, n, o = this, s = o.options, a = r.getter(s.dataTextField), l = r.getter(s.dataContentField), c = r.getter(s.dataContentUrlField), d = r.getter(s.dataImageUrlField), u = r.getter(s.dataUrlField), h = r.getter(s.dataSpriteCssClass), f = [], p = o.dataSource.view(); for ((e = e || {}).action && (p = e.items), t = 0, n = p.length; t < n; t++)i = { text: a(p[t]) }, s.dataContentField && (i.content = l(p[t])), s.dataContentUrlField && (i.contentUrl = c(p[t])), s.dataUrlField && (i.url = u(p[t])), s.dataImageUrlField && (i.imageUrl = d(p[t])), s.dataSpriteCssClass && (i.spriteCssClass = h(p[t])), f[t] = i; if ("add" == e.action) e.index < o.tabGroup.children().length ? o.insertBefore(f, o.tabGroup.children().eq(e.index)) : o.append(f); else if ("remove" == e.action) for (t = 0; t < p.length; t++)o.remove(e.index); else "itemchange" == e.action ? (t = o.dataSource.view().indexOf(p[0]), e.field === s.dataTextField && o.tabGroup.children().eq(t).find(".k-link").text(p[0].get(e.field)), e.field === s.dataUrlField && (o._contentUrls[t] = p[0].get(e.field))) : (o.trigger("dataBinding"), o.remove("li"), o._contentUrls = [], o.append(f), o.trigger("dataBound")) }, value: function (i) { var n = this; return i === t ? n.select().text() : (i != n.value() && n.tabGroup.children().each(function () { e.trim(e(this).text()) == i && n.select(this) }), t) }, items: function () { return this.tabGroup[0].children }, setOptions: function (e) { var t = this, i = t.options.animation; t._animations(e), e.contentUrls && (t._contentUrls = e.contentUrls), e.animation = u(!0, i, e.animation), e.navigatable ? t.wrapper.on("keydown" + _, t._keyDownProxy) : t.wrapper.off("keydown" + _, t._keyDownProxy), g.fn.setOptions.call(t, e) }, events: [A, E, k, "error", F, "change", "dataBinding", "dataBound"], options: { name: "TabStrip", dataTextField: "", dataContentField: "", dataImageUrlField: "", dataUrlField: "", dataSpriteCssClass: "", dataContentUrlField: "", tabPosition: "top", animation: { open: { effects: "expand:vertical fadeIn", duration: 200 }, close: { duration: 200 } }, collapsible: !1, navigatable: !0, contentUrls: !1, scrollable: { distance: 200 } }, destroy: function () { var e = this, t = e.scrollWrap; g.fn.destroy.call(e), e._refreshHandler && e.dataSource.unbind("change", e._refreshHandler), e.wrapper.off(_), e.wrapper.children(".k-tabstrip-items").off(_), e._scrollableModeActive && (e._scrollPrevButton.off().remove(), e._scrollNextButton.off().remove()), r.destroy(e.wrapper), t.children(".k-tabstrip").unwrap() }, select: function (t) { var i = this; return 0 === arguments.length ? i.tabGroup.children("li." + B) : (isNaN(t) || (t = i.tabGroup.children().get(t)), t = i.tabGroup.find(t), e(t).each(function (t, n) { (n = e(n)).hasClass(B) || i.trigger(A, { item: n[0], contentElement: i.contentHolder(n.index())[0] }) || i.activateTab(n) }), i) }, enable: function (e, t) { return this._toggleDisabled(e, !1 !== t), this }, disable: function (e) { return this._toggleDisabled(e, !1), this }, reload: function (t) { var i, n; return t = this.tabGroup.find(t), n = (i = this)._contentUrls, t.each(function () { var t = e(this), o = t.find("." + x).data(M) || n[t.index()], r = i.contentHolder(t.index()); o && i.ajaxRequest(t, r, null, o) }), i }, append: function (e) { var t = this, i = t._create(e); return c(i.tabs, function (e) { var n = i.contents[e]; t.tabGroup.append(this), "bottom" == t.options.tabPosition ? t.tabGroup.before(n) : t._scrollableModeActive ? t._scrollPrevButton.before(n) : t.wrapper.append(n), t.angular("compile", function () { return { elements: [n] } }) }), n(t.tabGroup), t._updateContentElements(), t.resize(!0), t }, _appendUrlItem: function (e) { this._contentUrls.push(e) }, _moveUrlItem: function (e, t) { this._contentUrls.splice(t, 0, this._contentUrls.splice(e, 1)[0]) }, _removeUrlItem: function (e) { this._contentUrls.splice(e, 1) }, insertBefore: function (t, i) { i = e(t).is(e(i)) ? this.tabGroup.find(i).next() : this.tabGroup.find(i); var o = this, r = o._create(t), s = o.element.find("#" + i.attr("aria-controls")); return c(r.tabs, function (t) { var n = r.contents[t], a = r.newTabsCreated ? o._contentUrls.length - (r.tabs.length - t) : e(n).index() - 1; i.before(this), s.before(n), o._moveUrlItem(a, e(this).index()), o.angular("compile", function () { return { elements: [n] } }) }), n(o.tabGroup), o._updateContentElements(r.newTabsCreated), o.resize(!0), o }, insertAfter: function (t, i) { i = e(t).is(e(i)) ? this.tabGroup.find(i).prev() : this.tabGroup.find(i); var o = this, r = o._create(t), s = o.element.find("#" + i.attr("aria-controls")); return c(r.tabs, function (t) { var n = r.contents[t], a = r.newTabsCreated ? o._contentUrls.length - (r.tabs.length - t) : e(n).index() - 1; i.after(this), s.after(n), o._moveUrlItem(a, e(this).index()), o.angular("compile", function () { return { elements: [n] } }) }), n(o.tabGroup), o._updateContentElements(r.newTabsCreated), o.resize(!0), o }, remove: function (t) { var i, n = this, o = typeof t; return "string" === o ? t = n.tabGroup.find(t) : "number" === o && (t = n.tabGroup.children().eq(t)), i = t.map(function () { var t = e(this).index(), i = n.contentElement(t); return r.destroy(i), n._removeUrlItem(t), i }), t.remove(), i.empty(), i.remove(), n._updateContentElements(), n.resize(!0), n }, _create: function (t) { var n, o, s, a = this, c = !1; return t = t instanceof r.data.ObservableArray ? t.toJSON() : t, e.isPlainObject(t) || e.isArray(t) ? (t = e.isArray(t) ? t : [t], c = !0, n = l(t, function (i, n) { return a._appendUrlItem(t[n].contentUrl || null), e(q.renderItem({ group: a.tabGroup, item: u(i, { index: n }) })) }), o = l(t, function (t, i) { if ("string" == typeof t.content || t.contentUrl) return e(q.renderContent({ item: u(t, { index: i }) })) })) : (n = "string" == typeof t && "<" != t[0] ? a.element.find(t) : e(t), o = e(), n.each(function () { if (/k-tabstrip-items/.test(this.parentNode.className)) { var t = a.element.find("#" + this.getAttribute("aria-controls")); s = t } else s = e("<div class='" + I + "'/>"); o = o.add(s) }), i(n)), { tabs: n, contents: o, newTabsCreated: c } }, _toggleDisabled: function (t, i) { (t = this.tabGroup.find(t)).each(function () { e(this).toggleClass(P, i).toggleClass(z, !i) }) }, _updateClasses: function () { var o, r, s, a = this; a.wrapper.addClass("k-widget k-header k-tabstrip"), a.tabGroup = a.wrapper.children("ul").addClass("k-tabstrip-items k-reset"), a.tabGroup[0] || (a.tabGroup = e("<ul class='k-tabstrip-items k-reset'/>").appendTo(a.wrapper)), (o = a.tabGroup.find("li").addClass("k-item")).length && (r = o.filter("." + B).index(), s = r >= 0 ? r : t, a.tabGroup.contents().filter(function () { return 3 == this.nodeType && !d(this.nodeValue) }).remove()), r >= 0 && o.eq(r).addClass(N), a.contentElements = a.wrapper.children("div"), a.contentElements.addClass(I).eq(s).addClass(B).css({ display: "block" }), o.length && (i(o), n(a.tabGroup), a._updateContentElements(!0)) }, _elementId: function (e, t) { var i = e.attr("id"), n = this.element.attr("id"); return !i || i.indexOf(n + "-") > -1 ? (n || r.guid()) + "-" + (t + 1) : i }, _updateContentElements: function (t) { var i = this, n = i._contentUrls, o = i.tabGroup.children(".k-item"), s = i.wrapper.children("div"), a = i._elementId.bind(i); s.length && o.length > s.length ? s.each(function (i) { var n = a(e(this), i), r = o.filter("[aria-controls=" + (this.id || 0) + "]")[0]; !r && t && (r = o[i]), r && r.setAttribute("aria-controls", n), this.setAttribute("id", n) }) : o.each(function (t) { var o = s.eq(t), r = a(o, t); this.setAttribute("aria-controls", r), !o.length && n[t] ? e("<div class='" + I + "'/>").appendTo(i.wrapper).attr("id", r) : (o.attr("id", r), e(this).children(".k-loading")[0] || n[t] || e("<span class='k-loading k-complete'/>").prependTo(this)), o.attr("role", "tabpanel"), o.filter(":not(." + B + ")").attr("aria-hidden", !0).attr("aria-expanded", !1), o.filter("." + B).attr("aria-expanded", !0) }), i.contentElements = i.contentAnimators = i.wrapper.children("div"), i.tabsHeight = m(i.tabGroup) + parseInt(i.wrapper.css("border-top-width"), 10) + parseInt(i.wrapper.css("border-bottom-width"), 10), r.kineticScrollNeeded && r.mobile.ui.Scroller && (r.touchScroller(i.contentElements), i.contentElements = i.contentElements.children(".km-scroll-container")) }, _wrapper: function () { var e = this; e.wrapper = e.element.is("ul") ? e.element.wrapAll("<div />").parent() : e.element, e.scrollWrap = e.wrapper.parent(".k-tabstrip-wrapper"), e.scrollWrap[0] || (e.scrollWrap = e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent()) }, _tabPosition: function () { var e = this, t = e.options.tabPosition; e.wrapper.addClass("k-floatwrap k-tabstrip-" + t), "bottom" == t && e.tabGroup.appendTo(e.wrapper), e.resize(!0) }, _setContentElementsDimensions: function () { var e, t, i, n, o, r, s = this, a = s.options.tabPosition; "left" != a && "right" != a || (e = s.wrapper.children(".k-content"), t = e.filter(":visible"), i = "margin-" + a, n = s.tabGroup, o = p(n), r = Math.ceil(n.height()) - parseInt(t.css("padding-top"), 10) - parseInt(t.css("padding-bottom"), 10) - parseInt(t.css("border-top-width"), 10) - parseInt(t.css("border-bottom-width"), 10), setTimeout(function () { e.css(i, o).css("min-height", r) })) }, _resize: function () { this._setContentElementsDimensions(), this._scrollable() }, _sizeScrollWrap: function (e) { var t, i; e.is(":visible") && (t = this.options.tabPosition, i = Math.floor(m(e, !0)) + ("left" === t || "right" === t ? 2 : this.tabsHeight), this.scrollWrap.css("height", i).css("height")) }, _toggleHover: function (t) { e(t.currentTarget).toggleClass(H, t.type == R) }, _click: function (e) { var t, i, n = this, o = e.find("." + x), r = o.attr(w), s = n.options.collapsible, a = e.index(), l = n.contentHolder(a); if (e.closest(".k-widget")[0] == n.wrapper[0]) { if (e.is("." + z + (s ? "" : ",." + B))) return !0; if (i = o.data(M) || n._contentUrls[a] || r && ("#" == r.charAt(r.length - 1) || -1 != r.indexOf("#" + n.element[0].id + "-")), t = !r || i, n.tabGroup.children("[data-animating]").length) return t; if (n.trigger(A, { item: e[0], contentElement: l[0] })) return !0; if (!1 !== t) return s && e.is("." + B) ? (n.deactivateTab(e), !0) : (n.activateTab(e) && (t = !0), t) } }, _scrollable: function () { var e, t, i, n, s, a, l = this, c = l.options; l._scrollableAllowed() && (l.wrapper.addClass("k-tabstrip-scrollable"), e = l.wrapper[0].offsetWidth, (t = l.tabGroup[0].scrollWidth) > e && !l._scrollableModeActive ? (l._nowScrollingTabs = !1, l._isRtl = r.support.isRtl(l.element), s = r.support.mobileOS ? "touchstart" : "mousedown", a = r.support.mobileOS ? "touchend" : "mouseup", l.wrapper.append(o("prev", "k-i-arrow-60-left") + o("next", "k-i-arrow-60-right")), i = l._scrollPrevButton = l.wrapper.children(".k-tabstrip-prev"), n = l._scrollNextButton = l.wrapper.children(".k-tabstrip-next"), l.tabGroup.css({ marginLeft: p(i) + 9, marginRight: p(n) + 12 }), i.on(s + _, function () { l._nowScrollingTabs = !0, l._scrollTabsByDelta(c.scrollable.distance * (l._isRtl ? 1 : -1)) }), n.on(s + _, function () { l._nowScrollingTabs = !0, l._scrollTabsByDelta(c.scrollable.distance * (l._isRtl ? -1 : 1)) }), i.add(n).on(a + _, function () { l._nowScrollingTabs = !1 }), l._scrollableModeActive = !0, l._toggleScrollButtons()) : l._scrollableModeActive && t <= e ? (l._scrollableModeActive = !1, l.wrapper.removeClass("k-tabstrip-scrollable"), l._scrollPrevButton.off().remove(), l._scrollNextButton.off().remove(), l.tabGroup.css({ marginLeft: "", marginRight: "" })) : l._scrollableModeActive ? l._toggleScrollButtons() : l.wrapper.removeClass("k-tabstrip-scrollable")) }, _scrollableAllowed: function () { var e = this.options; return e.scrollable && !isNaN(e.scrollable.distance) && ("top" == e.tabPosition || "bottom" == e.tabPosition) }, _scrollTabsToItem: function (e) { var t, i = this, n = i.tabGroup, o = n.scrollLeft(), r = p(e), s = i._isRtl ? e.position().left : e.position().left - n.children().first().position().left, a = n[0].offsetWidth, l = Math.ceil(parseFloat(n.css("padding-left"))); i._isRtl ? s < 0 ? t = o + s - (a - o) - l : s + r > a && (t = o + s - r + 2 * l) : o + a < s + r ? t = s + r - a + 2 * l : o > s && (t = s - l), n.finish().animate({ scrollLeft: t }, "fast", "linear", function () { i._toggleScrollButtons() }) }, _scrollTabsByDelta: function (e) { var t = this, i = t.tabGroup, n = i.scrollLeft(); i.finish().animate({ scrollLeft: n + e }, "fast", "linear", function () { t._nowScrollingTabs ? t._scrollTabsByDelta(e) : t._toggleScrollButtons() }) }, _toggleScrollButtons: function () { var e = this, t = e.tabGroup, i = t.scrollLeft(); e._scrollPrevButton.toggle(e._isRtl ? i < t[0].scrollWidth - t[0].offsetWidth - 1 : 0 !== i), e._scrollNextButton.toggle(e._isRtl ? 0 !== i : i < t[0].scrollWidth - t[0].offsetWidth - 1) }, deactivateTab: function (e) { var t = this, i = t.options.animation, n = i.open, o = u({}, i.close), s = o && "effects" in o; e = t.tabGroup.find(e), o = u(s ? o : u({ reverse: !0 }, n), { hide: !0 }), r.size(n.effects) ? (e.kendoAddClass(P, { duration: n.duration }), e.kendoRemoveClass(B, { duration: n.duration })) : (e.addClass(P), e.removeClass(B)), e.removeAttr("aria-selected"), t.contentAnimators.filter("." + B).kendoStop(!0, !0).kendoAnimate(o).removeClass(B).attr("aria-hidden", !0) }, activateTab: function (e) { var t, i, n, o, s, a, l, c, d, h, f, p, g, v, _; if (!this.tabGroup.children("[data-animating]").length) return e = this.tabGroup.find(e), i = (t = this).options.animation, n = i.open, o = u({}, i.close), s = o && "effects" in o, a = e.parent().children(), l = a.filter("." + B), c = a.index(e), o = u(s ? o : u({ reverse: !0 }, n), { hide: !0 }), r.size(n.effects) ? (l.kendoRemoveClass(B, { duration: o.duration }), e.kendoRemoveClass(H, { duration: o.duration })) : (l.removeClass(B), e.removeClass(H)), d = t.contentAnimators, t.inRequest && (t.xhr.abort(), t.inRequest = !1), 0 === d.length ? (t.tabGroup.find("." + N).removeClass(N), e.addClass(N).css("z-index"), e.addClass(B), t._current(e), t.trigger("change"), t._scrollableModeActive && t._scrollTabsToItem(e), !1) : (h = d.filter("." + B), f = t.contentHolder(c), p = f.closest(".k-content"), t.tabsHeight = m(t.tabGroup) + parseInt(t.wrapper.css("border-top-width"), 10) + parseInt(t.wrapper.css("border-bottom-width"), 10), t._sizeScrollWrap(h), 0 === f.length ? (h.removeClass(B).attr("aria-hidden", !0).kendoStop(!0, !0).kendoAnimate(o), !1) : (e.attr("data-animating", !0), g = !(!e.children("." + x).data(M) && !t._contentUrls[c]) && f.is(":empty"), v = function () { t.tabGroup.find("." + N).removeClass(N), e.addClass(N).css("z-index"), r.size(n.effects) ? (l.kendoAddClass(P, { duration: n.duration }), e.kendoAddClass(B, { duration: n.duration })) : (l.addClass(P), e.addClass(B)), l.removeAttr("aria-selected"), e.attr("aria-selected", !0), t._current(e), t._sizeScrollWrap(p), p.addClass(B).removeAttr("aria-hidden").kendoStop(!0, !0).attr("aria-expanded", !0).kendoAnimate(u({ init: function () { t.trigger(k, { item: e[0], contentElement: f[0] }), r.resize(f) } }, n, { complete: function () { e.removeAttr("data-animating"), t.trigger(E, { item: e[0], contentElement: f[0] }), r.resize(f), t.scrollWrap.css("height", "").css("height") } })) }, _ = function () { g ? (e.removeAttr("data-animating"), t.ajaxRequest(e, f, function () { e.attr("data-animating", !0), v(), t.trigger("change") })) : (v(), t.trigger("change")), t._scrollableModeActive && t._scrollTabsToItem(e) }, h.removeClass(B), h.attr("aria-hidden", !0), h.attr("aria-expanded", !1), h.length ? h.kendoStop(!0, !0).kendoAnimate(u({ complete: _ }, o)) : _(), !0)) }, contentElement: function (i) { var n, o, s, a; if (isNaN(i - 0)) return t; if (n = this.contentElements && this.contentElements[0] && !r.kineticScrollNeeded ? this.contentElements : this.contentAnimators, o = e(this.tabGroup.children()[i]).attr("aria-controls"), n) for (s = 0, a = n.length; s < a; s++)if (n.eq(s).closest(".k-content")[0].id == o) return n[s]; return t }, contentHolder: function (t) { var i = e(this.contentElement(t)), n = i.children(".km-scroll-container"); return r.support.touch && n[0] ? n : i }, ajaxRequest: function (t, i, n, o) { var s, a, l, c, d, u, f, p, m, g; t = this.tabGroup.find(t), s = this, a = e.ajaxSettings.xhr, l = t.find("." + x), c = {}, d = t.width() / 2, u = !1, (f = t.find(".k-loading").removeClass("k-complete"))[0] || (f = e("<span class='k-loading'/>").prependTo(t)), p = 2 * d - f.width(), m = function () { f.animate({ marginLeft: (parseInt(f.css("marginLeft"), 10) || 0) < d ? p : 0 }, 500, m) }, r.support.browser.msie && r.support.browser.version < 10 && setTimeout(m, 40), o = o || l.data(M) || s._contentUrls[t.index()] || l.attr(w), s.inRequest = !0, g = { type: "GET", cache: !1, url: o, dataType: "html", data: c, xhr: function () { var t = this, i = a(), n = t.progressUpload ? "progressUpload" : !!t.progress && "progress"; return i && e.each([i, i.upload], function () { this.addEventListener && this.addEventListener("progress", function (e) { n && t[n](e) }, !1) }), t.noProgress = !(window.XMLHttpRequest && "upload" in new XMLHttpRequest), i }, progress: function (e) { if (e.lengthComputable) { var t = parseInt(e.loaded / e.total * 100, 10) + "%"; f.stop(!0).addClass("k-progress").css({ width: t, marginLeft: 0 }) } }, error: function (e, t) { s.trigger("error", { xhr: e, status: t }) && this.complete() }, stopProgress: function () { clearInterval(u), f.stop(!0).addClass("k-progress")[0].style.cssText = "" }, complete: function (e) { s.inRequest = !1, this.noProgress ? setTimeout(this.stopProgress, 500) : this.stopProgress(), "abort" == e.statusText && f.remove() }, success: function (e) { var a, l, c; f.addClass("k-complete"); try { l = 10, (a = this).noProgress && (f.width(l + "%"), u = setInterval(function () { a.progress({ lengthComputable: !0, loaded: Math.min(l, 100), total: 100 }), l += 10 }, 40)), s.angular("cleanup", function () { return { elements: i.get() } }), r.destroy(i), i.html(e) } catch (e) { (c = window.console) && c.error && c.error(e.name + ": " + e.message + " in " + o), this.error(this.xhr, "error") } n && n.call(s, i), s.angular("compile", function () { return { elements: i.get() } }), s.trigger(F, { item: t[0], contentElement: i[0] }) } }, "object" == typeof o && (g = e.extend(!0, {}, g, o), h(g.url) && (g.url = g.url())), s.xhr = e.ajax(g) } }); u(q, { renderItem: function (e) { e = u({ tabStrip: {}, group: {} }, e); var t = U.empty, i = e.item; return U.item(u(e, { image: i.imageUrl ? U.image : t, sprite: i.spriteCssClass ? U.sprite : t, itemWrapper: U.itemWrapper }, W)) }, renderContent: function (e) { return U.content(u(e, W)) } }), r.ui.plugin(q) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("util/undoredostack.min", ["kendo.core.min"], function () { e = kendo, t = e.Observable.extend({ init: function (t) { e.Observable.fn.init.call(this, t), this.clear() }, events: ["undo", "redo"], push: function (e) { this.stack = this.stack.slice(0, this.currentCommandIndex + 1), this.currentCommandIndex = this.stack.push(e) - 1 }, undo: function () { if (this.canUndo()) { var e = this.stack[this.currentCommandIndex--]; e.undo(), this.trigger("undo", { command: e }) } }, redo: function () { if (this.canRedo()) { var e = this.stack[++this.currentCommandIndex]; e.redo(), this.trigger("redo", { command: e }) } }, clear: function () { this.stack = [], this.currentCommandIndex = -1 }, canUndo: function () { return this.currentCommandIndex >= 0 }, canRedo: function () { return this.currentCommandIndex != this.stack.length - 1 } }), e.deepExtend(e, { util: { UndoRedoStack: t } }); var e, t }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/main.min", ["util/undoredostack.min", "kendo.combobox.min", "kendo.dropdownlist.min", "kendo.window.min", "kendo.colorpicker.min"], function () { e = window.kendo.jQuery, a = window.kendo, l = a.Class, c = a.ui.Widget, d = a.support.mobileOS, u = a.support.browser, h = e.extend, f = e.proxy, p = a.deepExtend, m = a.keys, g = "select", v = "select.k-select-overlay", _ = l.extend({ init: function (e) { this.options = e }, getHtml: function () { var e = this.options; return a.template(e.template, { useWithBlock: !1 })(e) } }), b = { editorWrapperTemplate: '<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>', buttonTemplate: '# var iconCssClass= "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));#<a tabindex="0" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= iconCssClass #"></span><span class="k-tool-text">#= data.title #</span></a>', colorPickerTemplate: '<div class="k-colorpicker k-icon k-i-#= data.cssClass.replace("k-", "") #" />', comboBoxTemplate: '<select title="#= data.title #" class="#= data.cssClass #" />', dropDownListTemplate: '<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>', separatorTemplate: '<span class="k-separator" />', overflowAnchorTemplate: '<a tabindex="0" role="button" class="k-tool k-overflow-anchor" data-popup unselectable="on" title="#= data.title #" aria-haspopup="true" aria-expanded="false"><span unselectable="on" class="k-icon k-i-more-vertical"></span><span class="k-tool-text">#= data.title #</span></a>', formatByName: function (t, i) { for (var n = 0; n < i.length; n++)if (e.inArray(t, i[n].tags) >= 0) return i[n] }, getToolCssClass: function (e) { var t = { superscript: "sup-script", subscript: "sub-script", justifyLeft: "align-left", justifyCenter: "align-center", justifyRight: "align-right", justifyFull: "align-justify", insertUnorderedList: "list-unordered", insertOrderedList: "list-ordered", import: "login", indent: "indent-increase", outdent: "indent-decrease", createLink: "link-horizontal", unlink: "unlink-horizontal", insertImage: "image", insertFile: "file-add", viewHtml: "html", foreColor: "foreground-color", backColor: "paint", createTable: "table-insert", addColumnLeft: "table-column-insert-left", addColumnRight: "table-column-insert-right", addRowAbove: "table-row-insert-above", addRowBelow: "table-row-insert-below", deleteRow: "table-row-delete", deleteColumn: "table-column-delete", tableWizard: "table-properties", tableWizardInsert: "table-wizard", cleanFormatting: "clear-css" }[e]; return t || e }, registerTool: function (e, t) { var i = t.options; i && i.template && (i.template.options.cssClass = "k-" + b.getToolCssClass(e)), t.name || (t.options.name = e, t.name = e.toLowerCase()), k.defaultTools[e] = t }, registerFormat: function (e, t) { k.fn.options.formats[e] = t } }, w = !d || d.ios && d.flatVersion >= 500 || !d.ios && t !== document.documentElement.contentEditable, y = { basic: ["bold", "italic", "underline"], alignment: ["justifyLeft", "justifyCenter", "justifyRight"], lists: ["insertUnorderedList", "insertOrderedList"], indenting: ["indent", "outdent"], links: ["createLink", "unlink"], tables: ["tableWizard", "createTable", "addColumnLeft", "addColumnRight", "addRowAbove", "addRowBelow", "deleteRow", "deleteColumn"] }, k = c.extend({ init: function (i, n) { var o, r, s, l, d, u = this, m = a.ui.editor, g = m.Dom; w && (c.fn.init.call(u, i, n), u.options = p({}, u.options, n), u.options.tools = u.options.tools.slice(), i = u.element, d = i[0], l = g.name(d), this._registerHandler(i.closest("form"), "submit", f(u.update, u, t)), (s = h({}, u.options)).editor = u, "textarea" == l ? (u._wrapTextarea(), r = u.wrapper.find(".k-editor-toolbar"), d.id && r.attr("aria-controls", d.id)) : (u.element.attr("contenteditable", !0).addClass("k-widget k-editor k-editor-inline"), s.popup = !0, r = e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(i)), u.toolbar = new m.Toolbar(r[0], s), u.toolbar.bindTo(u), "textarea" == l && setTimeout(function () { var e = u.wrapper[0].style.height, t = parseInt(e, 10), i = u.wrapper.height(); e.indexOf("px") > 0 && !isNaN(t) && i > t && u.wrapper.height(t - (i - t)) }), u._resizable(), u._initializeContentElement(u), u.keyboard = new m.Keyboard([new m.BackspaceHandler(u), new m.TypingHandler(u), new m.SystemHandler(u), new m.SelectAllHandler(u)]), u.clipboard = new m.Clipboard(this), u.undoRedoStack = new a.util.UndoRedoStack, n && n.value ? o = n.value : u.textarea ? (o = d.value, u.options.encoded && e.trim(d.defaultValue).length && (o = d.defaultValue), o = o.replace(/[\r\n\v\f\t ]+/gi, " ")) : o = d.innerHTML, u.value(o || a.ui.editor.emptyElementContent), this._registerHandler(document, { mousedown: function () { u._endTyping() }, mouseup: function (e) { u._mouseup(e) } }), u._initializeImmutables(), u.toolbar.resize(), a.notify(u)) }, setOptions: function (e) { var t = this; c.fn.setOptions.call(t, e), e.tools && t.toolbar.bindTo(t) }, _endTyping: function () { var e = this.keyboard; try { e.isTypingInProgress() && (e.endTyping(!0), this.saveSelection()) } catch (e) { } }, _selectionChange: function () { this._selectionStarted = !1, this.saveSelection(), this.trigger("select", {}) }, _resizable: function () { var i = this.options.resizable, n = e.isPlainObject(i) ? i.content === t || !0 === i.content : i; n && this.textarea && (e("<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right' /></div>").insertAfter(this.textarea), this.wrapper.kendoResizable(h({}, this.options.resizable, { start: function (t) { var i = this.editor = e(t.currentTarget).closest(".k-editor"); this.initialSize = i.height(), i.find("td:last").append("<div class='k-overlay' />") }, resize: function (e) { var t = e.y.initialDelta, i = this.initialSize + t, n = this.options.min || 0, o = this.options.max || 1 / 0; i = Math.min(o, Math.max(n, i)), this.editor.height(i) }, resizeend: function () { this.editor.find(".k-overlay").remove(), this.editor = null } })), a.support.mobileOS.ios && (this.wrapper.getKendoResizable().draggable.options.ignore = v)) }, _initializeTableResizing: function () { var e = this; a.ui.editor.TableResizing.create(e), e._showTableResizeHandlesProxy = f(e._showTableResizeHandles, e), e.bind(g, e._showTableResizeHandlesProxy) }, _destroyTableResizing: function () { var e = this, t = e.tableResizing; t && (t.destroy(), e.tableResizing = null), e._showTableResizeHandlesProxy && e.unbind(g, e._showTableResizeHandlesProxy) }, _showTableResizeHandles: function () { var e = this.tableResizing; e && e.showResizeHandles() }, _initializeColumnResizing: function () { a.ui.editor.ColumnResizing.create(this) }, _destroyColumnResizing: function () { var e = this; e.columnResizing && (e.columnResizing.destroy(), e.columnResizing = null) }, _initializeRowResizing: function () { a.ui.editor.RowResizing.create(this) }, _destroyRowResizing: function () { var e = this; e.rowResizing && (e.rowResizing.destroy(), e.rowResizing = null) }, _wrapTextarea: function () { var t = this, i = t.element, n = i[0].style.width, o = i[0].style.height, r = b.editorWrapperTemplate, s = e(r).insertBefore(i).width(n).height(o), a = s.find(".k-editable-area"); i.attr("autocomplete", "off").appendTo(a).addClass("k-content k-raw-content").css("display", "none"), t.textarea = i, t.wrapper = s }, _createContentElement: function (t) { var i, n, o, r = this, s = r.textarea, l = r.options.domain, c = l || document.domain, h = "", f = 'javascript:""'; return (l || c != location.hostname) && (f = "javascript:document.write('" + (h = '<script>document.domain="' + c + '"<\/script>') + "')"), s.hide(), i = e("<iframe />", { title: r.options.messages.editAreaTitle, frameBorder: "0" })[0], e(i).css("display", "").addClass("k-content").attr("tabindex", s[0].tabIndex).insertBefore(s), i.src = f, n = i.contentWindow || i, o = n.document || i.contentDocument, e(i).one("load", function () { r.toolbar.decorateFrom(o.body) }), o.open(), o.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;" + (a.support.isRtl(s) ? "direction:rtl;" : "") + (u.msie || u.edge ? "height:auto;" : "") + (d.ios ? "word-break:break-all;" : "") + "}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}.k-column-resize-handle {width: 100%; height: 100%;}.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}.k-row-resize-handle {display: table; width: 100%; height: 100%;}.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}.k-table-resize-handle {width: 100%; height: 100%;}.k-table-resize-handle.k-resize-east{cursor:e-resize;}.k-table-resize-handle.k-resize-north{cursor:n-resize;}.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}.k-table-resize-handle.k-resize-south{cursor:s-resize;}.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}.k-table-resize-handle.k-resize-west{cursor:w-resize;}.k-table.k-table-resizing{opacity:0.6;}k\\:script{display:none;}</style>" + h + "<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');<\/script>" + e.map(t, function (e) { return "<link rel='stylesheet' href='" + e + "'>" }).join("") + "</head><body autocorrect='off' contenteditable='true'></body></html>"), o.close(), n }, _blur: function () { var e = this.textarea, t = e ? e.val() : this._oldValue, i = this.options.encoded ? this.encodedValue() : this.value(); this.update(), e && e.trigger("blur"), i != t && this.trigger("change") }, _spellCorrect: function (e) { var i, n = !1; this._registerHandler(e.body, { contextmenu: function () { e.one("select", function () { i = null }), e._spellCorrectTimeout = setTimeout(function () { i = new a.ui.editor.RestorePoint(e.getRange(), e.body), n = !1 }, 10) }, input: function () { if (i) return a.support.browser.mozilla && !n ? (n = !0, t) : (a.ui.editor._finishUpdate(e, i), t) } }) }, _registerHandler: function (t, i, n) { var o, r, s, l = ".kendoEditor"; if (t = e(t), this._handlers || (this._handlers = []), t.length) if (e.isPlainObject(i)) for (s in i) i.hasOwnProperty(s) && this._registerHandler(t, s, i[s]); else for (o = a.applyEventMap(i).split(" "), r = 0; r < o.length; r++)this._handlers.push({ element: t, type: o[r] + l, handler: n }), t.on(o[r] + l, n) }, _deregisterHandlers: function () { var e, t, i = this._handlers; for (e = 0; e < i.length; e++)(t = i[e]).element.off(t.type, t.handler); this._handlers = [] }, _initializeContentElement: function () { var i, n, o, r = this; r.textarea ? (r.window = r._createContentElement(r.options.stylesheets), i = r.document = r.window.contentDocument || r.window.document, r.body = i.body, n = r.window, o = i, this._registerHandler(i, "mouseup", f(this._mouseup, this))) : (r.window = window, i = r.document = document, r.body = r.element[0], n = r.body, o = r.body, r.toolbar.decorateFrom(r.body)), this._registerHandler(n, "blur", f(this._blur, this)), r._registerHandler(o, "down", f(r._mousedown, r)); try { i.execCommand("enableInlineTableEditing", null, !1) } catch (e) { } a.support.touch && this._registerHandler(i, { keydown: function () { a._activeElement() != i.body && r.window.focus() } }), this._spellCorrect(r), this._registerHandler(r.body, { keydown: function (e) { var i, n, o, s, a, l, c, d, u; return (e.keyCode !== m.BACKSPACE && e.keyCode !== m.DELETE || "true" === r.body.getAttribute("contenteditable")) && (e.keyCode === m.F10 ? (setTimeout(f(r.toolbar.focus, r.toolbar), 100), e.preventDefault(), t) : (e.keyCode != m.LEFT && e.keyCode != m.RIGHT || (i = r.getRange(), n = e.keyCode == m.LEFT, o = i[n ? "startContainer" : "endContainer"], s = i[n ? "startOffset" : "endOffset"], a = s + (n ? -1 : 1), l = n ? a : s, 3 == o.nodeType && "\ufeff" == o.nodeValue[l] && (i.setStart(o, a), i.collapse(!0), r.selectRange(i))), c = r.toolbar.tools, d = r.keyboard.toolFromShortcut(c, e), u = d ? c[d].options : {}, d && !u.keyPressCommand ? (e.preventDefault(), /^(undo|redo)$/.test(d) || r.keyboard.endTyping(!0), r.trigger("keydown", e), r.exec(d), r._runPostContentKeyCommands(e), !1) : (r.keyboard.clearTimeout(), r.keyboard.keydown(e), t))) }, keypress: function (e) { setTimeout(function () { r._runPostContentKeyCommands(e), r._showTableResizeHandles() }, 0) }, keyup: function (t) { var i = [m.BACKSPACE, m.TAB, m.PAGEUP, m.PAGEDOWN, m.END, m.HOME, m.LEFT, m.UP, m.RIGHT, m.DOWN, m.INSERT, m.DELETE]; (e.inArray(t.keyCode, i) > -1 || 65 == t.keyCode && t.ctrlKey && !t.altKey && !t.shiftKey) && r._selectionChange(), r.keyboard.keyup(t) }, click: function (e) { var t, i = a.ui.editor.Dom; "img" === i.name(e.target) && ((t = r.createRange()).selectNode(e.target), r.selectRange(t)) }, "cut copy paste": function (e) { r.clipboard["on" + e.type](e) }, focusin: function () { r.body.hasAttribute("contenteditable") && (e(this).addClass("k-state-active"), r.toolbar.show()) }, focusout: function () { setTimeout(function () { var t, i = a._activeElement(), n = r.body, o = r.toolbar; o.options.popup && ((t = o.window.element.get(0)) && !e.contains(t, i) && t != i && (o.preventPopupHide = !1)), i == n || e.contains(n, i) || e(i).is(".k-editortoolbar-dragHandle") || o.focused() || (e(n).removeClass("k-state-active"), o.hide()) }, 10) } }), r._initializeColumnResizing(), r._initializeRowResizing(), r._initializeTableResizing() }, _initializeImmutables: function () { var e = this, t = a.ui.editor; e.options.immutables && (e.immutables = new t.Immutables(e)) }, _mousedown: function (t) { var i; this._selectionStarted = !0, u.gecko || (i = e(t.target), (2 == t.which || 1 == t.which && t.ctrlKey) && i.is("a[href]") && window.open(i.attr("href"), "_new")) }, _mouseup: function (t) { var i = this; a.support.mobileOS.ios && t && e(t.target).is(v) || i._selectionStarted && setTimeout(function () { i._selectionChange() }, 1) }, _runPostContentKeyCommands: function (e) { var t, i, n, o = this.getRange(), r = this.keyboard.toolsFromShortcut(this.toolbar.tools, e); for (t = 0; t < r.length; t++)i = r[t], (n = i.options).keyPressCommand && (new n.command({ range: o }).changesContent() && (this.keyboard.endTyping(!0), this.exec(i.name))) }, refresh: function () { var e, t = this; t.textarea && (t._destroyResizings(), e = t.value(), t.textarea.val(e), t.wrapper.find("iframe").remove(), t._initializeContentElement(t), t.value(e)) }, events: ["select", "change", "execute", "error", "paste", "keydown", "keyup"], options: { name: "Editor", messages: { bold: "Bold", italic: "Italic", underline: "Underline", strikethrough: "Strikethrough", superscript: "Superscript", subscript: "Subscript", justifyCenter: "Center text", justifyLeft: "Align text left", justifyRight: "Align text right", justifyFull: "Justify", insertUnorderedList: "Insert unordered list", insertOrderedList: "Insert ordered list", indent: "Indent", outdent: "Outdent", createLink: "Insert hyperlink", unlink: "Remove hyperlink", insertImage: "Insert image", insertFile: "Insert file", insertHtml: "Insert HTML", viewHtml: "View HTML", fontName: "Select font family", fontNameInherit: "(inherited font)", fontSize: "Select font size", fontSizeInherit: "(inherited size)", formatBlock: "Format", formatting: "Format", foreColor: "Color", backColor: "Background color", style: "Styles", emptyFolder: "Empty Folder", editAreaTitle: "Editable area. Press F10 for toolbar.", uploadFile: "Upload", overflowAnchor: "More tools", orderBy: "Arrange by:", orderBySize: "Size", orderByName: "Name", invalidFileType: 'The selected file "{0}" is not valid. Supported file types are {1}.', deleteFile: 'Are you sure you want to delete "{0}"?', overwriteFile: 'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?', directoryNotFound: "A directory with this name was not found.", imageWebAddress: "Web address", imageAltText: "Alternate text", imageWidth: "Width (px)", imageHeight: "Height (px)", fileWebAddress: "Web address", fileTitle: "Title", fileText: "Text", linkWebAddress: "Web address", linkText: "Text", linkToolTip: "ToolTip", linkOpenInNewWindow: "Open link in new window", dialogUpdate: "Update", dialogInsert: "Insert", dialogOk: "Ok", dialogCancel: "Cancel", cleanFormatting: "Clean formatting", createTable: "Create a table", createTableHint: "Create a {0} x {1} table", addColumnLeft: "Add column on the left", addColumnRight: "Add column on the right", addRowAbove: "Add row above", addRowBelow: "Add row below", deleteRow: "Delete row", deleteColumn: "Delete column", tableWizard: "Table Wizard", tableTab: "Table", cellTab: "Cell", accessibilityTab: "Accessibility", caption: "Caption", summary: "Summary", width: "Width", height: "Height", units: "Units", cellSpacing: "Cell Spacing", cellPadding: "Cell Padding", cellMargin: "Cell Margin", alignment: "Alignment", background: "Background", cssClass: "CSS Class", id: "ID", border: "Border", borderStyle: "Border Style", collapseBorders: "Collapse borders", wrapText: "Wrap text", associateCellsWithHeaders: "Associate cells with headers", alignLeft: "Align Left", alignCenter: "Align Center", alignRight: "Align Right", alignLeftTop: "Align Left Top", alignCenterTop: "Align Center Top", alignRightTop: "Align Right Top", alignLeftMiddle: "Align Left Middle", alignCenterMiddle: "Align Center Middle", alignRightMiddle: "Align Right Middle", alignLeftBottom: "Align Left Bottom", alignCenterBottom: "Align Center Bottom", alignRightBottom: "Align Right Bottom", alignRemove: "Remove Alignment", columns: "Columns", rows: "Rows", selectAllCells: "Select All Cells", exportAs: "Export As", import: "Import" }, formats: {}, encoded: !0, domain: null, resizable: !1, deserialization: { custom: null }, serialization: { entities: !0, semantic: !0, scripts: !1 }, pasteCleanup: { all: !1, css: !1, custom: null, keepNewLines: !1, msAllFormatting: !1, msConvertLists: !0, msTags: !0, none: !1, span: !1 }, stylesheets: [], dialogOptions: { modal: !0, resizable: !1, draggable: !0, animation: !1 }, imageBrowser: null, fileBrowser: null, fontName: [{ text: "Arial", value: "Arial,Helvetica,sans-serif" }, { text: "Courier New", value: "'Courier New',Courier,monospace" }, { text: "Georgia", value: "Georgia,serif" }, { text: "Impact", value: "Impact,Charcoal,sans-serif" }, { text: "Lucida Console", value: "'Lucida Console',Monaco,monospace" }, { text: "Tahoma", value: "Tahoma,Geneva,sans-serif" }, { text: "Times New Roman", value: "'Times New Roman',Times,serif" }, { text: "Trebuchet MS", value: "'Trebuchet MS',Helvetica,sans-serif" }, { text: "Verdana", value: "Verdana,Geneva,sans-serif" }], fontSize: [{ text: "1 (8pt)", value: "xx-small" }, { text: "2 (10pt)", value: "x-small" }, { text: "3 (12pt)", value: "small" }, { text: "4 (14pt)", value: "medium" }, { text: "5 (18pt)", value: "large" }, { text: "6 (24pt)", value: "x-large" }, { text: "7 (36pt)", value: "xx-large" }], formatBlock: [{ text: "Paragraph", value: "p" }, { text: "Quotation", value: "blockquote" }, { text: "Heading 1", value: "h1" }, { text: "Heading 2", value: "h2" }, { text: "Heading 3", value: "h3" }, { text: "Heading 4", value: "h4" }, { text: "Heading 5", value: "h5" }, { text: "Heading 6", value: "h6" }], tools: [].concat.call(["formatting"], y.basic, y.alignment, y.lists, y.indenting, y.links, ["insertImage"], y.tables) }, destroy: function () { c.fn.destroy.call(this), this._endTyping(!0), this._deregisterHandlers(), clearTimeout(this._spellCorrectTimeout), this._focusOutside(), this.toolbar.destroy(), this._destroyUploadWidget(), this._destroyResizings(), a.destroy(this.wrapper) }, _destroyResizings: function () { var e = this; e._destroyTableResizing(), a.ui.editor.TableResizing.dispose(e), e._destroyRowResizing(), a.ui.editor.RowResizing.dispose(e), e._destroyColumnResizing(), a.ui.editor.ColumnResizing.dispose(e) }, _focusOutside: function () { if (a.support.browser.msie && this.textarea) { var t = e("<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />").appendTo(document.body).focus(); t.blur().remove() } }, _destroyUploadWidget: function () { var e = this; e._uploadWidget && (e._uploadWidget.destroy(), e._uploadWidget = null) }, state: function (e) { var t, i, n = k.defaultTools[e], o = n && (n.options.finder || n.finder), r = a.ui.editor.RangeUtils; return !!o && (t = this.getRange(), !(i = r.textNodes(t)).length && t.collapsed && (i = [t.startContainer]), o.getFormat ? o.getFormat(i) : o.isFormatted(i)) }, value: function (e) { var i = this.body, n = a.ui.editor, o = this.options, r = n.Serializer.domToXhtml(i, o.serialization); return e === t ? r : (e != r && (n.Serializer.htmlToDom(e, i, o.deserialization), this.selectionRestorePoint = null, this.update(), this.toolbar.refreshTools()), t) }, saveSelection: function (t) { var i = (t = t || this.getRange()).commonAncestorContainer, n = this.body; (i == n || e.contains(n, i)) && (this.selectionRestorePoint = new a.ui.editor.RestorePoint(t, n)) }, _focusBody: function () { var e, t = this.body, i = this.wrapper && this.wrapper.find("iframe")[0], n = this.document.documentElement, o = a._activeElement(); i ? o != t && o != i && (e = n.scrollTop, t.focus(), n.scrollTop = e) : (e = t.scrollTop, t.focus(), t.scrollTop = e) }, restoreSelection: function () { this._focusBody(), this.selectionRestorePoint && this.selectRange(this.selectionRestorePoint.toRange()) }, focus: function () { this.restoreSelection() }, update: function (e) { e = e || this.options.encoded ? this.encodedValue() : this.value(), this.textarea ? this.textarea.val(e) : this._oldValue = e }, encodedValue: function () { return a.ui.editor.Dom.encode(this.value()) }, createRange: function (e) { return a.ui.editor.RangeUtils.createRange(e || this.document) }, getSelection: function () { return a.ui.editor.SelectionUtils.selectionFromDocument(this.document) }, selectRange: function (e) { this._focusBody(); var t = this.getSelection(); t.removeAllRanges(), t.addRange(e), this.saveSelection(e) }, getRange: function () { var e = this.getSelection(), t = e && e.rangeCount > 0 ? e.getRangeAt(0) : this.createRange(), i = this.document; return t.startContainer != i || t.endContainer != i || t.startOffset || t.endOffset || (t.setStart(this.body, 0), t.collapse(!0)), t }, _containsRange: function (e) { var t = a.ui.editor.Dom, i = this.body; return e && t.isAncestorOrSelf(i, e.startContainer) && t.isAncestorOrSelf(i, e.endContainer) }, selectedHtml: function () { return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents()) }, paste: function (t, i) { this.focus(); var n = new a.ui.editor.InsertHtmlCommand(e.extend({ range: this.getRange(), html: t }, i)); n.editor = this, n.exec() }, exec: function (e, i) { var n, o, r, s = this, a = null; if (!e) throw Error("kendoEditor.exec(): `name` parameter cannot be empty"); if ("true" !== s.body.getAttribute("contenteditable") && "print" !== e && "pdf" !== e) return !1; if (e = e.toLowerCase(), s.keyboard.isTypingInProgress() || (s._focusBody(), s.selectRange(s._range || s.getRange())), !(o = s.toolbar.toolById(e))) for (r in k.defaultTools) if (r.toLowerCase() == e) { o = k.defaultTools[r]; break } if (o) { if (n = s.getRange(), o.command && (a = o.command(h({ range: n, body: s.body, immutables: !!s.immutables }, i))), s.trigger("execute", { name: e, command: a })) return; if (/^(undo|redo)$/i.test(e)) s.undoRedoStack[e](); else if (a && (s.execCommand(a), a.async)) return a.change = f(s._selectionChange, s), t; s._selectionChange() } }, execCommand: function (e) { e.managesUndoRedo || this.undoRedoStack.push(e), e.editor = this, e.exec() } }), k.defaultTools = { undo: { options: { key: "Z", ctrl: !0 } }, redo: { options: { key: "Y", ctrl: !0 } } }, a.ui.plugin(k), (i = l.extend({ init: function (e) { this.options = e }, initialize: function (e, t) { e.attr({ unselectable: "on", title: t.title }), e.children(".k-tool-text").html(t.title) }, command: function (e) { return new this.options.command(e) }, update: e.noop })).exec = function (e, t, i) { e.exec(t, { value: i }) }, n = i.extend({ init: function (e) { i.fn.init.call(this, e) }, command: function (e) { return new a.ui.editor.FormatCommand(h(e, { formatter: this.options.formatter })) }, update: function (e, t) { var i = this.options.finder.isFormatted(t); e.toggleClass("k-state-selected", i), e.attr("aria-pressed", i) } }), b.registerTool("separator", new i({ template: new _({ template: b.separatorTemplate }) })), o = u.msie && u.version < 9 ? "\ufeff" : "", s = r = "\ufeff", u.msie && 10 == u.version && (s = "&nbsp;"), h(a.ui, { editor: { ToolTemplate: _, EditorUtils: b, Tool: i, FormatTool: n, _bomFill: o, emptyElementContent: r, emptyTableCellContent: s } }), a.PDFMixin && (a.PDFMixin.extend(k.prototype), k.prototype._drawPDF = function () { return a.drawing.drawDOM(this.body, this.options.pdf) }, k.prototype.saveAsPDF = function () { var t, i = new e.Deferred, n = i.promise(), o = { promise: n }; if (!this.trigger("pdfExport", o)) return t = this.options.pdf, this._drawPDF(i).then(function (e) { return a.drawing.exportPDF(e, t) }).done(function (e) { a.saveAs({ dataURI: e, fileName: t.fileName, proxyURL: t.proxyURL, forceProxy: t.forceProxy }), i.resolve() }).fail(function (e) { i.reject(e) }), n }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/dom.min", ["editor/main.min"], function () { !function (e) { function t(e) { var t, i, n = {}; for (t = 0, i = e.length; t < i; t++)n[e[t]] = !0; return n } var i, n, o, r, s, a, l, c, d, u, h, f = window.kendo, p = e.map, m = e.extend, g = f.support.browser, v = "style", _ = "float", b = "cssFloat", w = "styleFloat", y = "class", k = "k-marker", x = t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")), C = "div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","), S = C.concat(["ul", "ol", "li"]), T = t(S), D = "span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","), A = t(D), E = t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")), I = function (e) { 1 == e.nodeType && e.normalize() }; g.msie && g.version >= 8 && (I = function (e) { if (1 == e.nodeType && e.firstChild) for (var t = e.firstChild, i = t; i = i.nextSibling;)3 == i.nodeType && 3 == t.nodeType && (i.nodeValue = t.nodeValue + i.nodeValue, h.remove(t)), t = i }), i = /^\s+$/, n = /^[\n\r\t]+$/, o = /rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i, r = /\ufeff/g, s = /^(\s+|\ufeff)$/, l = "color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","), c = /[<>\&]/g, d = /[\u00A0-\u2666<>\&]/g, u = { 34: "quot", 38: "amp", 39: "apos", 60: "lt", 62: "gt", 160: "nbsp", 161: "iexcl", 162: "cent", 163: "pound", 164: "curren", 165: "yen", 166: "brvbar", 167: "sect", 168: "uml", 169: "copy", 170: "ordf", 171: "laquo", 172: "not", 173: "shy", 174: "reg", 175: "macr", 176: "deg", 177: "plusmn", 178: "sup2", 179: "sup3", 180: "acute", 181: "micro", 182: "para", 183: "middot", 184: "cedil", 185: "sup1", 186: "ordm", 187: "raquo", 188: "frac14", 189: "frac12", 190: "frac34", 191: "iquest", 192: "Agrave", 193: "Aacute", 194: "Acirc", 195: "Atilde", 196: "Auml", 197: "Aring", 198: "AElig", 199: "Ccedil", 200: "Egrave", 201: "Eacute", 202: "Ecirc", 203: "Euml", 204: "Igrave", 205: "Iacute", 206: "Icirc", 207: "Iuml", 208: "ETH", 209: "Ntilde", 210: "Ograve", 211: "Oacute", 212: "Ocirc", 213: "Otilde", 214: "Ouml", 215: "times", 216: "Oslash", 217: "Ugrave", 218: "Uacute", 219: "Ucirc", 220: "Uuml", 221: "Yacute", 222: "THORN", 223: "szlig", 224: "agrave", 225: "aacute", 226: "acirc", 227: "atilde", 228: "auml", 229: "aring", 230: "aelig", 231: "ccedil", 232: "egrave", 233: "eacute", 234: "ecirc", 235: "euml", 236: "igrave", 237: "iacute", 238: "icirc", 239: "iuml", 240: "eth", 241: "ntilde", 242: "ograve", 243: "oacute", 244: "ocirc", 245: "otilde", 246: "ouml", 247: "divide", 248: "oslash", 249: "ugrave", 250: "uacute", 251: "ucirc", 252: "uuml", 253: "yacute", 254: "thorn", 255: "yuml", 402: "fnof", 913: "Alpha", 914: "Beta", 915: "Gamma", 916: "Delta", 917: "Epsilon", 918: "Zeta", 919: "Eta", 920: "Theta", 921: "Iota", 922: "Kappa", 923: "Lambda", 924: "Mu", 925: "Nu", 926: "Xi", 927: "Omicron", 928: "Pi", 929: "Rho", 931: "Sigma", 932: "Tau", 933: "Upsilon", 934: "Phi", 935: "Chi", 936: "Psi", 937: "Omega", 945: "alpha", 946: "beta", 947: "gamma", 948: "delta", 949: "epsilon", 950: "zeta", 951: "eta", 952: "theta", 953: "iota", 954: "kappa", 955: "lambda", 956: "mu", 957: "nu", 958: "xi", 959: "omicron", 960: "pi", 961: "rho", 962: "sigmaf", 963: "sigma", 964: "tau", 965: "upsilon", 966: "phi", 967: "chi", 968: "psi", 969: "omega", 977: "thetasym", 978: "upsih", 982: "piv", 8226: "bull", 8230: "hellip", 8242: "prime", 8243: "Prime", 8254: "oline", 8260: "frasl", 8472: "weierp", 8465: "image", 8476: "real", 8482: "trade", 8501: "alefsym", 8592: "larr", 8593: "uarr", 8594: "rarr", 8595: "darr", 8596: "harr", 8629: "crarr", 8656: "lArr", 8657: "uArr", 8658: "rArr", 8659: "dArr", 8660: "hArr", 8704: "forall", 8706: "part", 8707: "exist", 8709: "empty", 8711: "nabla", 8712: "isin", 8713: "notin", 8715: "ni", 8719: "prod", 8721: "sum", 8722: "minus", 8727: "lowast", 8730: "radic", 8733: "prop", 8734: "infin", 8736: "ang", 8743: "and", 8744: "or", 8745: "cap", 8746: "cup", 8747: "int", 8756: "there4", 8764: "sim", 8773: "cong", 8776: "asymp", 8800: "ne", 8801: "equiv", 8804: "le", 8805: "ge", 8834: "sub", 8835: "sup", 8836: "nsub", 8838: "sube", 8839: "supe", 8853: "oplus", 8855: "otimes", 8869: "perp", 8901: "sdot", 8968: "lceil", 8969: "rceil", 8970: "lfloor", 8971: "rfloor", 9001: "lang", 9002: "rang", 9674: "loz", 9824: "spades", 9827: "clubs", 9829: "hearts", 9830: "diams", 338: "OElig", 339: "oelig", 352: "Scaron", 353: "scaron", 376: "Yuml", 710: "circ", 732: "tilde", 8194: "ensp", 8195: "emsp", 8201: "thinsp", 8204: "zwnj", 8205: "zwj", 8206: "lrm", 8207: "rlm", 8211: "ndash", 8212: "mdash", 8216: "lsquo", 8217: "rsquo", 8218: "sbquo", 8220: "ldquo", 8221: "rdquo", 8222: "bdquo", 8224: "dagger", 8225: "Dagger", 8240: "permil", 8249: "lsaquo", 8250: "rsaquo", 8364: "euro" }, h = { block: T, inline: A, findNodeIndex: function (e, t) { var i = 0; if (!e) return -1; for (; e = e.previousSibling;)t && 3 == e.nodeType || i++; return i }, isDataNode: function (e) { return e && null !== e.nodeValue && null !== e.data }, isAncestorOf: function (t, i) { try { return !h.isDataNode(t) && (e.contains(t, h.isDataNode(i) ? i.parentNode : i) || i.parentNode == t) } catch (e) { return !1 } }, isAncestorOrSelf: function (e, t) { return h.isAncestorOf(e, t) || e == t }, findClosestAncestor: function (e, t) { if (h.isAncestorOf(e, t)) for (; t && t.parentNode != e;)t = t.parentNode; return t }, getNodeLength: function (e) { return h.isDataNode(e) ? e.length : e.childNodes.length }, splitDataNode: function (e, t) { for (var i, n = e.cloneNode(!1), o = "", r = e.nextSibling; r && 3 == r.nodeType && r.nodeValue;)o += r.nodeValue, i = r, r = r.nextSibling, h.remove(i); e.deleteData(t, e.length), n.deleteData(0, t), n.nodeValue += o, h.insertAfter(n, e) }, attrEquals: function (e, t) { var i, n; for (i in t) if (n = e[i], i == _ && (n = e[f.support.cssFloat ? b : w]), "object" == typeof n) { if (!h.attrEquals(n, t[i])) return !1 } else if (n != t[i]) return !1; return !0 }, blockParentOrBody: function (e) { return h.parentOfType(e, S) || e.ownerDocument.body }, blockParents: function (t) { var i, n, o, r = []; for (i = 0, n = t.length; i < n; i++)(o = h.parentOfType(t[i], h.blockElements)) && e.inArray(o, r) < 0 && r.push(o); return r }, windowFromDocument: function (e) { return e.defaultView || e.parentWindow }, normalize: I, blockElements: S, nonListBlockElements: C, inlineElements: D, empty: x, fillAttrs: E, nodeTypes: { ELEMENT_NODE: 1, ATTRIBUTE_NODE: 2, TEXT_NODE: 3, CDATA_SECTION_NODE: 4, ENTITY_REFERENCE_NODE: 5, ENTITY_NODE: 6, PROCESSING_INSTRUCTION_NODE: 7, COMMENT_NODE: 8, DOCUMENT_NODE: 9, DOCUMENT_TYPE_NODE: 10, DOCUMENT_FRAGMENT_NODE: 11, NOTATION_NODE: 12 }, toHex: function (e) { var t = o.exec(e); return t ? "#" + p(t.slice(1), function (e) { return (e = parseInt(e, 10).toString(16)).length > 1 ? e : "0" + e }).join("") : e }, encode: function (e, t) { var i = !t || t.entities ? d : c; return e.replace(i, function (e) { var t = e.charCodeAt(0), i = u[t]; return i ? "&" + i + ";" : e }) }, isBom: function (e) { return e && 3 === e.nodeType && /^[\ufeff]+$/.test(e.nodeValue) }, stripBom: function (e) { return (e || "").replace(r, "") }, stripBomNode: function (e) { h.isBom(e) && e.parentNode.removeChild(e) }, insignificant: function (e) { var t = e.attributes; return "k-marker" == e.className || h.is(e, "br") && ("k-br" == e.className || t._moz_dirty || t._moz_editor_bogus_node) }, tableCell: function (e) { return h.is(e, "td") || h.is(e, "th") }, significantNodes: function (t) { return e.grep(t, function (e) { var t = h.name(e); return !("br" == t || h.insignificant(e) || h.emptyTextNode(e) || 1 == e.nodeType && !x[t] && h.emptyNode(e)) }) }, emptyTextNode: function (e) { return e && 3 == e.nodeType && s.test(e.nodeValue) }, emptyNode: function (e) { return 1 == e.nodeType && !h.significantNodes(e.childNodes).length }, name: function (e) { return e.nodeName.toLowerCase() }, significantChildNodes: function (t) { return e.grep(t.childNodes, function (e) { return 3 != e.nodeType || !h.isWhitespace(e) }) }, lastTextNode: function (e) { var t, i = null; if (3 == e.nodeType) return e; for (t = e.lastChild; t; t = t.previousSibling)if (i = h.lastTextNode(t)) return i; return i }, is: function (e, t) { return e && h.name(e) == t }, isMarker: function (e) { return e.className == k }, isWhitespace: function (e) { return i.test(e.nodeValue) }, allWhitespaceContent: function (e) { for (var t = e.firstChild; t && h.isWhitespace(t);)t = t.nextSibling; return !t }, isEmptyspace: function (e) { return n.test(e.nodeValue) }, htmlIndentSpace: function (t) { var i, o, s, a, l, c; return !!(h.isDataNode(t) && h.isWhitespace(t) && (n.test(t.nodeValue) || (i = function (e, t) { for (; e[t];)if (e = e[t], h.significantNodes([e]).length > 0) return e }, o = t.parentNode, s = i(t, "previousSibling"), a = i(t, "nextSibling"), r.test(t.nodeValue) ? s || a : e(o).is("tr,tbody,thead,tfoot,table,ol,ul") || (h.isBlock(o) || h.is(o, "body")) && (l = s && h.isBlock(s), c = a && h.isBlock(a), !a && l || !s && c || l && c)))) }, isBlock: function (e) { return T[h.name(e)] }, isEmpty: function (e) { return x[h.name(e)] }, isInline: function (e) { return A[h.name(e)] }, list: function (e) { var t = e ? h.name(e) : ""; return "ul" == t || "ol" == t || "dl" == t }, scrollContainer: function (e) { var t = h.windowFromDocument(e), i = (t.contentWindow || t).document || t.ownerDocument || t; return i = f.support.browser.webkit || "BackCompat" == i.compatMode ? i.body : i.documentElement }, scrollTo: function (t) { var i, n, o = e(h.isDataNode(t) ? t.parentNode : t), r = h.windowFromDocument(t.ownerDocument), s = r.innerHeight, a = h.scrollContainer(t.ownerDocument); i = o.offset().top, (n = o[0].offsetHeight) || (n = parseInt(o.css("line-height"), 10) || Math.ceil(1.2 * parseInt(o.css("font-size"), 10)) || 15), n + i > a.scrollTop + s && (a.scrollTop = n + i - s) }, persistScrollTop: function (e) { a = h.scrollContainer(e).scrollTop }, offset: function (e, t) { for (var i = { top: e.offsetTop, left: e.offsetLeft }, n = e.offsetParent; n && (!t || h.isAncestorOf(t, n));)i.top += n.offsetTop, i.left += n.offsetLeft, n = n.offsetParent; return i }, restoreScrollTop: function (e) { "number" == typeof a && (h.scrollContainer(e).scrollTop = a) }, insertAt: function (e, t, i) { e.insertBefore(t, e.childNodes[i] || null) }, insertBefore: function (e, t) { return t.parentNode ? t.parentNode.insertBefore(e, t) : t }, insertAfter: function (e, t) { return t.parentNode.insertBefore(e, t.nextSibling) }, remove: function (e) { e.parentNode && e.parentNode.removeChild(e) }, removeChildren: function (e) { for (; e.firstChild;)e.removeChild(e.firstChild) }, removeTextSiblings: function (e) { for (var t = e.parentNode; e.nextSibling && 3 == e.nextSibling.nodeType;)t.removeChild(e.nextSibling); for (; e.previousSibling && 3 == e.previousSibling.nodeType;)t.removeChild(e.previousSibling) }, trim: function (e) { var t, i; for (t = e.childNodes.length - 1; t >= 0; t--)i = e.childNodes[t], h.isDataNode(i) ? h.stripBom(i.nodeValue).length || h.remove(i) : i.className != k && (h.trim(i), (0 === i.childNodes.length || h.allWhitespaceContent(i) && h.isBlock(i) && !h.isEmpty(i)) && h.remove(i)); return e }, closest: function (e, t) { for (; e && h.name(e) != t;)e = e.parentNode; return e }, closestBy: function (e, t, i) { for (; e && !t(e);) { if (i && i(e)) return null; e = e.parentNode } return e }, sibling: function (e, t) { do { e = e[t] } while (e && 1 != e.nodeType); return e }, next: function (e) { return h.sibling(e, "nextSibling") }, prev: function (e) { return h.sibling(e, "previousSibling") }, parentOfType: function (e, t) { do { e = e.parentNode } while (e && !h.ofType(e, t)); return e }, ofType: function (t, i) { return e.inArray(h.name(t), i) >= 0 }, changeTag: function (e, t, i) { var n, o, r, s, a, l = h.create(e.ownerDocument, t), c = e.attributes; if (!i) for (n = 0, o = c.length; n < o; n++)(a = c[n]).specified && (r = a.nodeName, s = a.nodeValue, r == y ? l.className = s : r == v ? l.style.cssText = e.style.cssText : l.setAttribute(r, s)); for (; e.firstChild;)l.appendChild(e.firstChild); return h.insertBefore(l, e), h.remove(e), l }, editableParent: function (e) { for (; e && (3 == e.nodeType || "true" !== e.contentEditable);)e = e.parentNode; return e }, wrap: function (e, t) { return h.insertBefore(t, e), t.appendChild(e), t }, unwrap: function (e) { for (var t = e.parentNode; e.firstChild;)t.insertBefore(e.firstChild, e); t.removeChild(e) }, wrapper: function (t) { var i = h.closestBy(t, function (e) { return e.parentNode && h.significantNodes(e.parentNode.childNodes).length > 1 }); return e(i).is("body,.k-editor") ? void 0 : i }, create: function (e, t, i) { return h.attr(e.createElement(t), i) }, attr: function (e, t) { for (var i in (t = m({}, t)) && v in t && (h.style(e, t.style), delete t.style), t) null === t[i] ? (e.removeAttribute(i), delete t[i]) : "className" == i && (e[i] = t[i]); return m(e, t) }, style: function (t, i) { e(t).css(i || {}) }, unstyle: function (e, t) { for (var i in t) i == _ && (i = f.support.cssFloat ? b : w), e.style[i] = ""; "" === e.style.cssText && e.removeAttribute(v) }, inlineStyle: function (t, i, n) { var o, r = e(h.create(t.ownerDocument, i, n)); return t.appendChild(r[0]), o = p(l, function (e) { return g.msie && "line-height" == e && "1px" == r.css(e) ? "line-height:1.5" : e + ":" + r.css(e) }).join(";"), r.remove(), o }, getEffectiveBackground: function (e) { var t = e.css("background-color") || ""; return t.indexOf("rgba(0, 0, 0, 0") < 0 && "transparent" !== t ? t : "html" === e[0].tagName.toLowerCase() ? "Window" : h.getEffectiveBackground(e.parent()) }, innerText: function (e) { var t = e.innerHTML; return t = (t = t.replace(/<!--(.|\s)*?-->/gi, "")).replace(/<\/?[^>]+?\/?>/gm, "") }, removeClass: function (t, i) { var n, o, r = " " + t.className + " ", s = i.split(" "); for (n = 0, o = s.length; n < o; n++)r = r.replace(" " + s[n] + " ", " "); (r = e.trim(r)).length ? t.className = r : t.removeAttribute(y) }, commonAncestor: function () { var e, t, i, n, o, r = arguments.length, s = [], a = 1 / 0, l = null; if (!r) return null; if (1 == r) return arguments[0]; for (e = 0; e < r; e++) { for (t = [], i = arguments[e]; i;)t.push(i), i = i.parentNode; s.push(t.reverse()), a = Math.min(a, t.length) } if (1 == r) return s[0][0]; for (e = 0; e < a; e++) { for (n = s[0][e], o = 1; o < r; o++)if (n != s[o][e]) return l; l = n } return l }, closestSplittableParent: function (t) { var i, n, o; return (i = 1 == t.length ? h.parentOfType(t[0], ["ul", "ol"]) : h.commonAncestor.apply(null, t)) || (i = h.parentOfType(t[0], ["p", "td"]) || t[0].ownerDocument.body), h.isInline(i) && (i = h.blockParentOrBody(i)), n = p(t, h.editableParent), o = h.commonAncestor(n)[0], e.contains(i, o) && (i = o), i }, closestEditable: function (t, i) { var n, o = h.editableParent(t); return (n = h.ofType(t, i) ? t : h.parentOfType(t, i)) && o && e.contains(n, o) ? n = o : !n && o && (n = o), n }, closestEditableOfType: function (e, t) { var i = h.closestEditable(e, t); if (i && h.ofType(i, t)) return i }, filter: function (e, t, i) { return h.filterBy(t, function (t) { return h.name(t) == e }, i) }, filterBy: function (e, t, i) { for (var n, o = 0, r = e.length, s = []; o < r; o++)((n = t(e[o])) && !i || !n && i) && s.push(e[o]); return s }, ensureTrailingBreaks: function (t) { var i = e(t).find("p,td,th"), n = i.length, o = 0; if (n) for (; o < n; o++)h.ensureTrailingBreak(i[o]); else h.ensureTrailingBreak(t) }, removeTrailingBreak: function (t) { e(t).find("br[type=_moz],.k-br").remove() }, ensureTrailingBreak: function (e) { var t, i, n; h.removeTrailingBreak(e), t = e.lastChild, (!(i = t && h.name(t)) || "br" != i && "img" != i || "br" == i && "k-br" != t.className) && ((n = e.ownerDocument.createElement("br")).className = "k-br", e.appendChild(n)) } }, f.ui.editor.Dom = h }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/serializer.min", ["editor/dom.min"], function () { e = window.kendo.jQuery, s = window.kendo, a = s.ui.editor, l = a.Dom, c = e.extend, d = "xx-small,x-small,small,medium,large,x-large,xx-large".split(","), u = /"/g, h = /<br[^>]*>/i, f = /^\d+(\.\d*)?(px)?$/i, p = /<p>(?:&nbsp;)?<\/p>/i, m = /(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/g, g = /^sizzle-\d+/i, v = /^k-script-/i, _ = /\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i, b = '<br class="k-br">', w = document.createElement("div"), w.innerHTML = " <hr>", i = 3 === w.firstChild.nodeType, w = null, n = e.isFunction, o = "td", r = { toEditableHtml: function (e) { return (e || "").replace(/<!\[CDATA\[(.*)?\]\]>/g, "\x3c!--[CDATA[$1]]--\x3e").replace(/<(\/?)script([^>]*)>/gi, "<$1k:script$2>").replace(/<img([^>]*)>/gi, function (e) { return e.replace(_, "") }).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi, "$1").replace(/^<(table|blockquote)/i, b + "<$1").replace(/^[\s]*(&nbsp;|\u00a0)/i, "$1").replace(/<\/(table|blockquote)>$/i, "</$1>" + b) }, _toEditableImmutables: function (t) { for (var i = a.Immutables.immutable, n = l.emptyTextNode, o = t.firstChild, r = t.lastChild; n(o);)o = o.nextSibling; for (; n(r);)r = r.previousSibling; o && i(o) && e(b).prependTo(t), r && i(r) && e(b).appendTo(t) }, _fillEmptyElements: function (t) { e(t).find("p,td").each(function () { var t, i = e(this); if (/^\s*$/g.test(i.text()) && !i.find("img,input").length) { for (t = this; t.firstChild && 3 != t.firstChild.nodeType;)t = t.firstChild; 1 != t.nodeType || l.empty[l.name(t)] || (t.innerHTML = l.is(t, "td") ? s.ui.editor.emptyTableCellContent : s.ui.editor.emptyElementContent) } }) }, _removeSystemElements: function (t) { e(".k-paste-container", t).remove() }, _resetOrderedLists: function (e) { var t, i, n, o = e.getElementsByTagName("ol"); for (t = 0; t < o.length; t++)i = o[t], n = i.getAttribute("start"), i.setAttribute("start", 1), n ? i.setAttribute("start", n) : i.removeAttribute(n) }, _preventScriptExecution: function (t) { e(t).find("*").each(function () { var e, t, i, n, o = this.attributes; for (t = 0, i = o.length; t < i; t++)e = o[t], n = e.nodeName, e.specified && /^on/i.test(n) && (this.setAttribute("k-script-" + n, e.value), this.removeAttribute(n)) }) }, htmlToDom: function (t, i, o) { var a = s.support.browser, c = a.msie, d = c && a.version < 9, u = "originalsrc", h = "originalhref", f = o || {}, p = f.immutables; return t = r.toEditableHtml(t), d && (t = (t = (t = "<br/>" + t).replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/, h + '="$1"')).replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/, u + '="$1"')), n(f.custom) && (t = f.custom(t) || t), i.innerHTML = t, p && p.deserialize(i), d ? (l.remove(i.firstChild), e(i).find("k\\:script,script,link,img,a").each(function () { var e = this; e[h] && (e.setAttribute("href", e[h]), e.removeAttribute(h)), e[u] && (e.setAttribute("src", e[u]), e.removeAttribute(u)) })) : c && (l.normalize(i), r._resetOrderedLists(i)), r._preventScriptExecution(i), r._fillEmptyElements(i), r._removeSystemElements(i), r._toEditableImmutables(i), e("table", i).addClass("k-table"), i }, domToXhtml: function (n, r) { function c(t) { return e.grep(t, function (e) { return "style" != e.name }) } function _(t) { var i, n, o, r = e.trim, s = r(t), a = []; for (m.lastIndex = 0; i = m.exec(s);)n = r(i[1].toLowerCase()), o = r(i[2]), "font-size-adjust" != n && "font-stretch" != n && (n.indexOf("color") >= 0 ? o = l.toHex(o) : n.indexOf("font") >= 0 ? o = o.replace(u, "'") : /\burl\(/g.test(o) && (o = o.replace(u, "")), a.push({ property: n, value: o })); return a } function b(e) { var t, i = _(e); for (t = 0; t < i.length; t++)D.push(i[t].property), D.push(":"), D.push(i[t].value), D.push(";") } function w(e) { var t, i, n, o, s, a, c = [], d = e.attributes; for (i = 0, n = d.length; i < n; i++)t = d[i], o = t.nodeName, s = t.value, a = t.specified, "value" == o && "value" in e && e.value ? a = !0 : "type" == o && "text" == s ? a = !0 : "class" != o || s ? g.test(o) ? a = !1 : "complete" == o ? a = !1 : "altHtml" == o ? a = !1 : "start" == o && l.is(e, "ul") ? a = !1 : "start" == o && l.is(e, "ol") && "1" == s ? a = !1 : o.indexOf("_moz") >= 0 ? a = !1 : v.test(o) ? a = !!r.scripts : "data-role" == o && "resizable" == s && (l.is(e, "tr") || l.is(e, "td")) && (a = !1) : a = !1, a && c.push(t); return c } function y(i, n) { var o, r, a, c, d, u, h, p; if (n = n || w(i), l.is(i, "img") && (u = i.style.width, h = i.style.height, p = e(i), u && f.test(u) && (p.attr("width", parseInt(u, 10)), l.unstyle(i, { width: t })), h && f.test(h) && (p.attr("height", parseInt(h, 10)), l.unstyle(i, { height: t }))), n.length) for (n.sort(function (e, t) { return e.nodeName > t.nodeName ? 1 : e.nodeName < t.nodeName ? -1 : 0 }), o = 0, r = n.length; o < r; o++)a = n[o], c = a.nodeName, d = a.value, "class" == c && "k-table" == d || (c = c.replace(v, ""), D.push(" "), D.push(c), D.push('="'), "style" == c ? b(d || i.style.cssText) : D.push("src" == c || "href" == c ? s.htmlEncode(i.getAttribute(c, 2)) : l.fillAttrs[c] ? c : d), D.push('"')) } function k(e, t, i) { for (var n = e.firstChild; n; n = n.nextSibling)S(n, t, i) } function x(e) { return e.nodeValue.replace(/\ufeff/g, "") } function C(e) { if ("\ufeff" === e.nodeValue) { do { if (e = e.parentNode, l.is(e, o) && 1 === e.childNodes.length) return !0; if (1 !== e.childNodes.length) return !1 } while (!l.isBlock(e)); return !0 } return !1 } function S(n, o, s) { var c, d, u, h, f, p, m = n.nodeType; if (A && a.Immutables.immutable(n)) D.push(A.serialize(n)); else if (1 == m) { if (c = l.name(n), (p = e(n)).hasClass("k-table-resize-handle-wrapper") || p.hasClass("k-column-resize-handle-wrapper") || p.hasClass("k-row-resize-handle-wrapper")) return; if (!c || l.insignificant(n)) return; if (!r.scripts && ("script" == c || "k:script" == c)) return; if ((d = E[c]) && (t === d.semantic || r.semantic ^ d.semantic)) return d.start(n), k(n, !1, d.skipEncoding), d.end(n), t; D.push("<"), D.push(c), y(n), l.empty[c] ? D.push(" />") : (D.push(">"), k(n, o || l.is(n, "pre")), D.push("</"), D.push(c), D.push(">")) } else if (3 == m) { if (C(n)) return D.push("&nbsp;"), t; h = x(n), !o && i && (u = n.parentNode, (f = n.previousSibling) || (f = (l.isInline(u) ? u : n).previousSibling), f && "" !== f.innerHTML && !l.isBlock(f) || (h = h.replace(/^[\r\n\v\f\t ]+/, "")), h = h.replace(/ +/, " ")), D.push(s ? h : l.encode(h, r)) } else 4 == m ? (D.push("<![CDATA["), D.push(n.data), D.push("]]>")) : 8 == m && (n.data.indexOf("[CDATA[") < 0 ? (D.push("\x3c!--"), D.push(n.data), D.push("--\x3e")) : (D.push("<!"), D.push(n.data), D.push(">"))) } function T() { e.isFunction(r.custom) && (D = r.custom(D) || D) } var D = [], A = r && r.immutables, E = { iframe: { start: function (e) { D.push("<iframe"), y(e), D.push(">") }, end: function () { D.push("</iframe>") } }, "k:script": { start: function (e) { D.push("<script"), y(e), D.push(">") }, end: function () { D.push("<\/script>") }, skipEncoding: !0 }, span: { semantic: !0, start: function (t) { var i, n, o = t.style, r = w(t), s = c(r); s.length && (D.push("<span"), y(t, s), D.push(">")), "underline" == o.textDecoration && D.push("<u>"), i = [], o.color && i.push('color="' + l.toHex(o.color) + '"'), o.fontFamily && i.push('face="' + o.fontFamily + '"'), o.fontSize && (n = e.inArray(o.fontSize, d), i.push('size="' + n + '"')), i.length && D.push("<font " + i.join(" ") + ">") }, end: function (e) { var t = e.style; (t.color || t.fontFamily || t.fontSize) && D.push("</font>"), "underline" == t.textDecoration && D.push("</u>"), c(w(e)).length && D.push("</span>") } }, strong: { semantic: !0, start: function () { D.push("<b>") }, end: function () { D.push("</b>") } }, em: { semantic: !0, start: function () { D.push("<i>") }, end: function () { D.push("</i>") } }, b: { semantic: !1, start: function () { D.push("<strong>") }, end: function () { D.push("</strong>") } }, i: { semantic: !1, start: function () { D.push("<em>") }, end: function () { D.push("</em>") } }, u: { semantic: !1, start: function () { D.push('<span style="text-decoration:underline;">') }, end: function () { D.push("</span>") } }, font: { semantic: !1, start: function (e) { var t, i, n; D.push('<span style="'), t = e.getAttribute("color"), i = d[e.getAttribute("size")], n = e.getAttribute("face"), t && (D.push("color:"), D.push(l.toHex(t)), D.push(";")), n && (D.push("font-family:"), D.push(n), D.push(";")), i && (D.push("font-size:"), D.push(i), D.push(";")), D.push('">') }, end: function () { D.push("</span>") } } }; return E.script = E["k:script"], t === (r = r || {}).semantic && (r.semantic = !0), function (e) { var t = e.childNodes.length; return t && 3 == e.firstChild.nodeType && (1 == t || 2 == t && l.insignificant(e.lastChild)) }(n) ? (D = l.encode(x(n.firstChild).replace(/[\r\n\v\f\t ]+/, " "), r), T(), D) : (k(n), D = D.join(""), T(), "" === D.replace(h, "").replace(p, "") ? "" : D) } }, c(a, { Serializer: r }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/range.min", ["editor/serializer.min"], function () { !function (e) { function t(e, t) { (function (e) { try { return function (e, t, i, n) { var o, r, s, a; if (e == t) return n - i; for (o = t; o && o.parentNode != e;)o = o.parentNode; if (o) return w(o) - i; for (o = e; o && o.parentNode != t;)o = o.parentNode; if (o) return n - w(o) - 1; for (r = b.commonAncestor(e, t), s = e; s && s.parentNode != r;)s = s.parentNode; for (s || (s = r), a = t; a && a.parentNode != r;)a = a.parentNode; return a || (a = r), s == a ? 0 : w(a) - w(s) }(e.startContainer, e.endContainer, e.startOffset, e.endOffset) < 0 } catch (e) { return !0 } })(e) && (t ? (e.commonAncestorContainer = e.endContainer = e.startContainer, e.endOffset = e.startOffset) : (e.commonAncestorContainer = e.startContainer = e.endContainer, e.startOffset = e.endOffset), e.collapsed = !0) } function i(e) { e.collapsed = e.startContainer == e.endContainer && e.startOffset == e.endOffset; for (var t = e.startContainer; t && t != e.endContainer && !b.isAncestorOf(t, e.endContainer);)t = t.parentNode; e.commonAncestorContainer = t } function n(e, t, i) { var n, o = t[i ? "startContainer" : "endContainer"], r = t[i ? "startOffset" : "endOffset"], s = 0, a = y(o), l = a ? o : o.childNodes[r] || null, c = a ? o.parentNode : o, d = t.ownerDocument, u = d.body.createTextRange(); 3 != o.nodeType && 4 != o.nodeType || (s = r), c || (c = d.body), "img" == c.nodeName.toLowerCase() ? (u.moveToElementText(c), u.collapse(!1), e.setEndPoint(i ? "StartToStart" : "EndToStart", u)) : (n = c.insertBefore(b.create(d, "a"), l), u.moveToElementText(n), b.remove(n), u[i ? "moveStart" : "moveEnd"]("character", s), u.collapse(!1), e.setEndPoint(i ? "StartToStart" : "EndToStart", u)) } function o(e, t, i, n) { var o, r, s, a, l, c, d, u = b.create(t.ownerDocument, "a"), h = e.duplicate(), f = n ? "StartToStart" : "StartToEnd", p = !1; u.innerHTML = "\ufeff", h.collapse(n), r = h.parentElement(), b.isAncestorOrSelf(i, r) || (r = i); do { p ? r.insertBefore(u, u.previousSibling) : (r.appendChild(u), p = !0), h.moveToElementText(u) } while ((o = h.compareEndPoints(f, e)) > 0 && u.previousSibling); s = u.nextSibling, -1 == o && y(s) ? (h.setEndPoint(n ? "EndToStart" : "EndToEnd", e), b.remove(u), c = [s, h.text.length]) : (a = !n && u.previousSibling, l = n && u.nextSibling, y(l) ? c = [l, 0] : y(a) ? c = [a, a.length] : (d = w(u), c = r.nextSibling && d == r.childNodes.length - 1 ? [r.nextSibling, 0] : [r, d]), b.remove(u)), t[n ? "setStart" : "setEnd"].apply(t, c) } var r, s, a, l, c, d, u, h, f, p = window.kendo, m = p.Class, g = e.extend, v = p.ui.editor, _ = p.support.browser, b = v.Dom, w = b.findNodeIndex, y = b.isDataNode, k = b.findClosestAncestor, x = b.getNodeLength, C = b.normalize, S = { selectionFromWindow: function (e) { return "getSelection" in e ? e.getSelection() : new s(e.document) }, selectionFromRange: function (e) { var t = f.documentFromRange(e); return S.selectionFromDocument(t) }, selectionFromDocument: function (e) { return S.selectionFromWindow(b.windowFromDocument(e)) } }, T = m.extend({ init: function (t) { e.extend(this, { ownerDocument: t, startContainer: t, endContainer: t, commonAncestorContainer: t, startOffset: 0, endOffset: 0, collapsed: !0 }) }, setStart: function (e, n) { this.startContainer = e, this.startOffset = n, i(this), t(this, !0) }, setEnd: function (e, n) { this.endContainer = e, this.endOffset = n, i(this), t(this, !1) }, setStartBefore: function (e) { this.setStart(e.parentNode, w(e)) }, setStartAfter: function (e) { this.setStart(e.parentNode, w(e) + 1) }, setEndBefore: function (e) { this.setEnd(e.parentNode, w(e)) }, setEndAfter: function (e) { this.setEnd(e.parentNode, w(e) + 1) }, selectNode: function (e) { this.setStartBefore(e), this.setEndAfter(e) }, selectNodeContents: function (e) { this.setStart(e, 0), this.setEnd(e, e[1 === e.nodeType ? "childNodes" : "nodeValue"].length) }, collapse: function (e) { var t = this; e ? t.setEnd(t.startContainer, t.startOffset) : t.setStart(t.endContainer, t.endOffset) }, deleteContents: function () { var e = this, t = e.cloneRange(); e.startContainer != e.commonAncestorContainer && e.setStartAfter(k(e.commonAncestorContainer, e.startContainer)), e.collapse(!0), function e(t) { for (; t.next();)t.hasPartialSubtree() ? e(t.getSubtreeIterator()) : t.remove() }(new r(t)) }, cloneContents: function () { var e = f.documentFromRange(this); return function t(i) { for (var n, o = e.createDocumentFragment(); n = i.next();)n = n.cloneNode(!i.hasPartialSubtree()), i.hasPartialSubtree() && n.appendChild(t(i.getSubtreeIterator())), o.appendChild(n); return o }(new r(this)) }, extractContents: function () { var e, t = this, i = t.cloneRange(); return t.startContainer != t.commonAncestorContainer && t.setStartAfter(k(t.commonAncestorContainer, t.startContainer)), t.collapse(!0), e = f.documentFromRange(t), function i(n) { for (var o, r = e.createDocumentFragment(); o = n.next();)n.hasPartialSubtree() ? (o = o.cloneNode(!1)).appendChild(i(n.getSubtreeIterator())) : n.remove(t.originalRange), r.appendChild(o); return r }(new r(i)) }, insertNode: function (e) { var t = this; y(t.startContainer) ? (t.startOffset != t.startContainer.nodeValue.length && b.splitDataNode(t.startContainer, t.startOffset), b.insertAfter(e, t.startContainer)) : b.insertAt(t.startContainer, e, t.startOffset), t.setStart(t.startContainer, t.startOffset) }, cloneRange: function () { return e.extend(new T(this.ownerDocument), { startContainer: this.startContainer, endContainer: this.endContainer, commonAncestorContainer: this.commonAncestorContainer, startOffset: this.startOffset, endOffset: this.endOffset, collapsed: this.collapsed, originalRange: this }) }, toString: function () { var e = this.startContainer.nodeName, t = this.endContainer.nodeName; return ("#text" == e ? this.startContainer.nodeValue : e) + "(" + this.startOffset + ") : " + ("#text" == t ? this.endContainer.nodeValue : t) + "(" + this.endOffset + ")" } }); T.fromNode = function (e) { return new T(e.ownerDocument) }, r = m.extend({ init: function (t) { if (e.extend(this, { range: t, _current: null, _next: null, _end: null }), !t.collapsed) { var i = t.commonAncestorContainer; this._next = t.startContainer != i || y(t.startContainer) ? k(i, t.startContainer) : t.startContainer.childNodes[t.startOffset], this._end = t.endContainer != i || y(t.endContainer) ? k(i, t.endContainer).nextSibling : t.endContainer.childNodes[t.endOffset] } }, hasNext: function () { return !!this._next }, next: function () { var e = this, t = e._current = e._next; return e._next = e._current && e._current.nextSibling != e._end ? e._current.nextSibling : null, y(e._current) && (e.range.endContainer == e._current && (t = t.cloneNode(!0)).deleteData(e.range.endOffset, t.length - e.range.endOffset), e.range.startContainer == e._current && (t = t.cloneNode(!0)).deleteData(0, e.range.startOffset)), t }, traverse: function (e) { for (var t, i = this; i._current = i._next, i._next = i._current && i._current.nextSibling != i._end ? i._current.nextSibling : null, t = i._current;)i.hasPartialSubtree() ? i.getSubtreeIterator().traverse(e) : e(t); return t }, remove: function (e) { var t, i, n, o, r, s = this, a = s.range.startContainer == s._current, l = s.range.endContainer == s._current; y(s._current) && (a || l) ? (t = a ? s.range.startOffset : 0, i = l ? s.range.endOffset : s._current.length, n = i - t, e && (a || l) && (s._current == e.startContainer && t <= e.startOffset && (e.startOffset -= n), s._current == e.endContainer && i <= e.endOffset && (e.endOffset -= n)), s._current.deleteData(t, n)) : (o = s._current.parentNode, !e || s.range.startContainer != o && s.range.endContainer != o || (r = w(s._current), o == e.startContainer && r <= e.startOffset && (e.startOffset -= 1), o == e.endContainer && r < e.endOffset && (e.endOffset -= 1)), b.remove(s._current)) }, hasPartialSubtree: function () { return !y(this._current) && (b.isAncestorOrSelf(this._current, this.range.startContainer) || b.isAncestorOrSelf(this._current, this.range.endContainer)) }, getSubtreeIterator: function () { return new r(this.getSubRange()) }, getSubRange: function () { var e = this, t = e.range.cloneRange(); return t.selectNodeContents(e._current), b.isAncestorOrSelf(e._current, e.range.startContainer) && t.setStart(e.range.startContainer, e.range.startOffset), b.isAncestorOrSelf(e._current, e.range.endContainer) && t.setEnd(e.range.endContainer, e.range.endOffset), t } }), s = m.extend({ init: function (e) { this.ownerDocument = e, this.rangeCount = 1 }, addRange: function (e) { var t = this.ownerDocument.body.createTextRange(); n(t, e, !1), n(t, e, !0), t.select() }, removeAllRanges: function () { var e = this.ownerDocument.selection; "None" != e.type && e.empty() }, getRangeAt: function () { var e, t, i, n, r, s, a, l = new T(this.ownerDocument), c = this.ownerDocument.selection; try { if (e = c.createRange(), (e.item ? e.item(0) : e.parentElement()).ownerDocument != this.ownerDocument) return l } catch (e) { return l } if ("Control" == c.type) l.selectNode(e.item(0)); else if (t = function (e) { var t = e.duplicate(), i = e.duplicate(); return t.collapse(!0), i.collapse(!1), b.commonAncestor(e.parentElement(), t.parentElement(), i.parentElement()) }(e), o(e, l, t, !0), o(e, l, t, !1), 9 == l.startContainer.nodeType && l.setStart(l.endContainer, l.startOffset), 9 == l.endContainer.nodeType && l.setEnd(l.startContainer, l.endOffset), 0 === e.compareEndPoints("StartToEnd", e) && l.collapse(!1), i = l.startContainer, n = l.endContainer, r = this.ownerDocument.body, !(l.collapsed || 0 !== l.startOffset || l.endOffset != x(l.endContainer) || i == n && y(i) && i.parentNode == r)) { for (s = !1, a = !1; 0 === w(i) && i == i.parentNode.firstChild && i != r;)i = i.parentNode, s = !0; for (; w(n) == x(n.parentNode) - 1 && n == n.parentNode.lastChild && n != r;)n = n.parentNode, a = !0; i == r && n == r && s && a && (l.setStart(i, 0), l.setEnd(n, x(r))) } return l } }), a = m.extend({ init: function (e) { this.enumerate = function () { var t = []; return new r(e).traverse(function e(i) { if (b.is(i, "img") || 3 == i.nodeType && (!b.isEmptyspace(i) || "\ufeff" == i.nodeValue)) t.push(i); else for (i = i.firstChild; i;)e(i), i = i.nextSibling }), t } } }), l = r.extend({ hasPartialSubtree: function () { var e = v.Immutables && v.Immutables.immutable; return e && !e(this._current) && r.fn.hasPartialSubtree.call(this) }, getSubtreeIterator: function () { return new l(this.getSubRange()) } }), c = m.extend({ init: function (e) { this.enumerate = function () { var t = [], i = v.Immutables && v.Immutables.immutable; return new l(e).traverse(function e(n) { if (i && !i(n)) if (b.is(n, "img") || 3 == n.nodeType && (!b.isEmptyspace(n) || "\ufeff" == n.nodeValue)) t.push(n); else for (n = n.firstChild; n;)e(n), n = n.nextSibling }), t } } }), d = m.extend({ init: function (e, t, i) { var n = this; n.range = e, n.rootNode = f.documentFromRange(e), n.body = t || n.getEditable(e), "body" != b.name(n.body) && (n.rootNode = n.body), n.startContainer = n.nodeToPath(e.startContainer), n.endContainer = n.nodeToPath(e.endContainer), n.startOffset = n.offset(e.startContainer, e.startOffset), n.endOffset = n.offset(e.endContainer, e.endOffset), n.immutables = i && i.immutables, n.immutables && (n.serializedImmutables = v.Immutables.removeImmutables(n.body)), n.html = n.body.innerHTML, n.immutables && !n.serializedImmutables.empty && v.Immutables.restoreImmutables(n.body, n.serializedImmutables) }, index: function (e) { for (var t, i = 0, n = e.nodeType; e = e.previousSibling;)3 == (t = e.nodeType) && n == t || i++, n = t; return i }, getEditable: function (e) { for (var t = e.commonAncestorContainer; t && (3 == t.nodeType || t.attributes && (!t.attributes.contentEditable || "false" == t.attributes.contentEditable.nodeValue.toLowerCase()));)t = t.parentNode; return t }, restoreHtml: function () { var e = this; b.removeChildren(e.body), e.body.innerHTML = e.html, e.immutables && !e.serializedImmutables.empty && v.Immutables.restoreImmutables(e.body, e.serializedImmutables) }, offset: function (e, t) { if (3 == e.nodeType) for (; (e = e.previousSibling) && 3 == e.nodeType;)t += e.nodeValue.length; return t }, nodeToPath: function (e) { for (var t = []; e != this.rootNode;)t.push(this.index(e)), e = e.parentNode; return t }, toRangePoint: function (e, t, i, n) { for (var o = this.rootNode, r = i.length, s = n; r--;)o = o.childNodes[i[r]]; for (; o && 3 == o.nodeType && o.nodeValue.length < s;)s -= o.nodeValue.length, o = o.nextSibling; o && s >= 0 && e[t ? "setStart" : "setEnd"](o, s) }, toRange: function () { var e = this, t = e.range.cloneRange(); return e.toRangePoint(t, !0, e.startContainer, e.startOffset), e.toRangePoint(t, !1, e.endContainer, e.endOffset), t } }), u = m.extend({ init: function () { this.caret = null }, addCaret: function (e) { var t = this.caret = b.create(f.documentFromRange(e), "span", { className: "k-marker" }); return e.insertNode(t), b.stripBomNode(t.previousSibling), b.stripBomNode(t.nextSibling), e.selectNode(t), t }, removeCaret: function (e) { var t, i, n, o, r = this, s = r.caret.previousSibling, a = 0; s && (a = y(s) ? s.nodeValue.length : w(s)), t = r.caret.parentNode, i = s ? w(s) : 0, b.remove(r.caret), C(t), n = t.childNodes[i], y(n) ? e.setStart(n, a) : n ? (o = b.lastTextNode(n)) ? e.setStart(o, o.nodeValue.length) : e[s ? "setStartAfter" : "setStartBefore"](n) : (_.msie || t.innerHTML || (t.innerHTML = '<br _moz_dirty="" />'), e.selectNodeContents(t)), e.collapse(!0) }, add: function (e, t) { var i, n, o = this, r = e.collapsed && !f.isExpandable(e), s = f.documentFromRange(e); return t && e.collapsed && (o.addCaret(e), e = f.expand(e)), (i = e.cloneRange()).collapse(!1), o.end = b.create(s, "span", { className: "k-marker" }), i.insertNode(o.end), (i = e.cloneRange()).collapse(!0), o.start = o.end.cloneNode(!0), i.insertNode(o.start), o._removeDeadMarkers(o.start, o.end), r && (n = s.createTextNode("\ufeff"), b.insertAfter(n.cloneNode(), o.start), b.insertBefore(n, o.end)), C(e.commonAncestorContainer), e.setStartBefore(o.start), e.setEndAfter(o.end), e }, _removeDeadMarkers: function (e, t) { e.previousSibling && "\ufeff" == e.previousSibling.nodeValue && b.remove(e.previousSibling), t.nextSibling && "\ufeff" == t.nextSibling.nodeValue && b.remove(t.nextSibling) }, _normalizedIndex: function (e) { for (var t = w(e), i = e; i.previousSibling;)3 == i.nodeType && 3 == i.previousSibling.nodeType && t--, i = i.previousSibling; return t }, remove: function (e) { var t, i, n, o, r, s, a, l, c, d, u = this, h = u.start, f = u.end; for (C(e.commonAncestorContainer); !h.nextSibling && h.parentNode;)h = h.parentNode; for (; !f.previousSibling && f.parentNode;)f = f.parentNode; if (t = h.previousSibling && 3 == h.previousSibling.nodeType && h.nextSibling && 3 == h.nextSibling.nodeType, i = f.previousSibling && 3 == f.previousSibling.nodeType && f.nextSibling && 3 == f.nextSibling.nodeType, t && i, h = h.nextSibling, f = f.previousSibling, n = !1, o = !1, h == u.end && (o = !!u.start.previousSibling, h = f = u.start.previousSibling || u.end.nextSibling, n = !0), b.remove(u.start), b.remove(u.end), !h || !f) return e.selectNodeContents(e.commonAncestorContainer), void e.collapse(!0); if (r = n ? y(h) ? h.nodeValue.length : h.childNodes.length : 0, s = y(f) ? f.nodeValue.length : f.childNodes.length, 3 == h.nodeType) for (; h.previousSibling && 3 == h.previousSibling.nodeType;)h = h.previousSibling, r += h.nodeValue.length; if (3 == f.nodeType) for (; f.previousSibling && 3 == f.previousSibling.nodeType;)f = f.previousSibling, s += f.nodeValue.length; a = h.parentNode, l = f.parentNode, c = this._normalizedIndex(h), d = this._normalizedIndex(f), C(a), 3 == h.nodeType && (h = a.childNodes[c]), C(l), 3 == f.nodeType && (f = l.childNodes[d]), n ? (3 == h.nodeType ? e.setStart(h, r) : e[o ? "setStartAfter" : "setStartBefore"](h), e.collapse(!0)) : (3 == h.nodeType ? e.setStart(h, r) : e.setStartBefore(h), 3 == f.nodeType ? e.setEnd(f, s) : e.setEndAfter(f)), u.caret && u.removeCaret(e) } }), h = /[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/, g(v, { SelectionUtils: S, W3CRange: T, RangeIterator: r, W3CSelection: s, RangeEnumerator: a, RestorePoint: d, Marker: u, RangeUtils: f = { nodes: function (e) { var t = f.textNodes(e); return t.length || (e.selectNodeContents(e.commonAncestorContainer), (t = f.textNodes(e)).length || (t = b.significantChildNodes(e.commonAncestorContainer))), t }, textNodes: function (e) { return new a(e).enumerate() }, editableTextNodes: function (e) { var t = [], i = v.Immutables && v.Immutables.immutableParent; return i && !i(e.commonAncestorContainer) && (t = new c(e).enumerate()), t }, documentFromRange: function (e) { var t = e.startContainer; return 9 == t.nodeType ? t : t.ownerDocument }, createRange: function (e) { return _.msie && _.version < 9 ? new T(e) : e.createRange() }, selectRange: function (e) { var t, i = f.image(e); i && (e.setStartAfter(i), e.setEndAfter(i)), (t = S.selectionFromRange(e)).removeAllRanges(), t.addRange(e) }, stringify: function (e) { return p.format("{0}:{1} - {2}:{3}", b.name(e.startContainer), e.startOffset, b.name(e.endContainer), e.endOffset) }, split: function (e, t, i) { function n(n) { var o, r = e.cloneRange(); r.collapse(n), r[n ? "setStartBefore" : "setEndAfter"](t), o = r.extractContents(), i && (o = b.trim(o)), b[n ? "insertBefore" : "insertAfter"](o, t) } n(!0), n(!1) }, mapAll: function (t, i) { var n = []; return new r(t).traverse(function (t) { var o = i(t); o && e.inArray(o, n) < 0 && n.push(o) }), n }, getAll: function (e, t) { var i = t; return "string" == typeof t && (t = function (e) { return b.is(e, i) }), f.mapAll(e, function (e) { if (t(e)) return e }) }, getMarkers: function (e) { return f.getAll(e, function (e) { return "k-marker" == e.className }) }, image: function (e) { var t = f.getAll(e, "img"); if (1 == t.length) return t[0] }, isStartOf: function (e, t) { var i, n, o; if (0 !== e.startOffset) return !1; for (i = e.cloneRange(); 0 === i.startOffset && i.startContainer != t;) { for (n = b.findNodeIndex(i.startContainer), o = i.startContainer.parentNode; n > 0 && o[n - 1] && b.insignificant(o[n - 1]);)n--; i.setStart(o, n) } return 0 === i.startOffset && i.startContainer == t }, isEndOf: function (e, t) { var i, n, o = e.cloneRange(); return o.collapse(!1), i = o.startContainer, b.isDataNode(i) && o.startOffset == b.getNodeLength(i) && (o.setStart(i.parentNode, b.findNodeIndex(i) + 1), o.collapse(!0)), o.setEnd(t, b.getNodeLength(t)), n = [], new r(o).traverse(function (e) { b.insignificant(e) || n.push(e) }), !n.length }, wrapSelectedElements: function (e) { function t(e, t) { var i, n = b.getNodeLength(t); if (e == n) return !0; for (i = e; i < n; i++)if (!b.insignificant(t.childNodes[i])) return !1; return !0 } for (var i = b.editableParent(e.startContainer), n = b.editableParent(e.endContainer); 0 === e.startOffset && e.startContainer != i;)e.setStart(e.startContainer.parentNode, b.findNodeIndex(e.startContainer)); for (; t(e.endOffset, e.endContainer) && e.endContainer != n;)e.setEnd(e.endContainer.parentNode, b.findNodeIndex(e.endContainer) + 1); return e }, expand: function (e) { var t, i, n, o, r = e.cloneRange(), s = r.startContainer.childNodes[0 === r.startOffset ? 0 : r.startOffset - 1], a = r.endContainer.childNodes[r.endOffset]; return y(s) && y(a) ? (t = s.nodeValue, i = a.nodeValue, t && i ? (n = t.split("").reverse().join("").search(h), o = i.search(h), n && o ? (o = -1 == o ? i.length : o, n = -1 == n ? 0 : t.length - n, r.setStart(s, n), r.setEnd(a, o), r) : r) : r) : r }, isExpandable: function (e) { var t, i, n, o, r, s, a = e.startContainer, l = f.documentFromRange(e); return a != l && a != l.body && (t = e.cloneRange(), !!(i = a.nodeValue) && (n = i.substring(0, t.startOffset), o = i.substring(t.startOffset), r = 0, s = 0, n && (r = n.split("").reverse().join("").search(h)), o && (s = o.search(h)), r && s)) } } }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/system.min", ["editor/range.min"], function () { !function (e) { function t(e, t) { var i = e.selectionRestorePoint = new u(e.getRange(), e.body), n = new _(t, i); return n.editor = e, e.undoRedoStack.push(n), i } var i = window.kendo, n = i.Class, o = i.ui.editor, r = o.EditorUtils, s = o.RangeUtils, a = r.registerTool, l = o.Dom, c = o.Tool, d = o.ToolTemplate, u = o.RestorePoint, h = o.Marker, f = i.support.browser, p = '<br class="k-br">', m = e.extend, g = l.nodeTypes, v = n.extend({ init: function (e) { this.options = e, this.restorePoint = new u(e.range, e.body, { immutables: e.immutables }), this.marker = new h, this.formatter = e.formatter }, getRange: function () { return this.restorePoint.toRange() }, lockRange: function (e) { return this.marker.add(this.getRange(), e) }, releaseRange: function (e) { this.marker.remove(e), this.editor.selectRange(e) }, undo: function () { var e = this.restorePoint; e.restoreHtml(), this.editor.selectRange(e.toRange()) }, redo: function () { this.exec() }, createDialog: function (t, n) { var o = this.editor; return e(t).appendTo(document.body).kendoWindow(m({}, o.options.dialogOptions, n)).closest(".k-window").toggleClass("k-rtl", i.support.isRtl(o.wrapper)).end() }, exec: function () { var e = this.lockRange(!0); this.formatter.editor = this.editor, this.formatter.toggle(e), this.releaseRange(e) }, immutables: function () { return this.editor && this.editor.options.immutables }, expandImmutablesIn: function (e) { this.immutables() && (i.ui.editor.Immutables.expandImmutablesIn(e), this.restorePoint = new u(e, this.editor.body)) } }), _ = n.extend({ init: function (e, t) { this.body = e.body, this.startRestorePoint = e, this.endRestorePoint = t }, redo: function () { l.removeChildren(this.body), this.body.innerHTML = this.endRestorePoint.html, this.editor.selectRange(this.endRestorePoint.toRange()) }, undo: function () { l.removeChildren(this.body), this.body.innerHTML = this.startRestorePoint.html, this.editor.selectRange(this.startRestorePoint.toRange()) } }), b = v.extend({ init: function (e) { v.fn.init.call(this, e), this.managesUndoRedo = !0 }, exec: function () { var e, t = this.editor, i = this.options, n = i.range, o = t.body, r = new u(n, o), s = i.html || i.value || ""; t.selectRange(n), t.clipboard.paste(s, i), i.postProcess && i.postProcess(t, t.getRange()), (e = new _(r, new u(t.getRange(), o))).editor = t, t.undoRedoStack.push(e), t.focus() } }), w = c.extend({ initialize: function (e, t) { var i = t.editor, n = this.options, r = n.items ? n.items : i.options.insertHtml; this._selectBox = new o.SelectBox(e, { dataSource: r, dataTextField: "text", dataValueField: "value", change: function () { c.exec(i, "insertHtml", this.value()) }, title: i.options.messages.insertHtml, highlightFirst: !1 }) }, command: function (e) { return new b(e) }, update: function (e) { var t = e.data("kendoSelectBox") || e.find("select").data("kendoSelectBox"); t.close(), t.value(t.options.title) } }), y = "td,th,caption", k = "table,tbody,thead,tfoot,tr", x = function (t) { return !t.collapsed && e(t.commonAncestorContainer).is(k) }, C = n.extend({ remove: function (t) { var i, n, o, r, a, c, d, u = new h; u.add(t, !1), i = s.getAll(t, function (t) { return e(t).is("table,tbody,thead,tfoot,tr,td,th,caption") }), n = s.documentFromRange(t), o = u.start, r = u.end, a = y.split(","), c = l.parentOfType(o, a), d = l.parentOfType(r, a), this._removeContent(o, c, !0), this._removeContent(r, d, !1), e(i).each(function (t, i) { ((i = e(i)).is(y) ? i : i.find(y)).each(function (e, t) { t.innerHTML = "&#65279;" }) }), c && !o.previousSibling && l.insertBefore(n.createTextNode("\ufeff"), o), d && !r.nextSibling && l.insertAfter(n.createTextNode("\ufeff"), r), c ? t.setStartBefore(o) : i[0] && ((c = (c = e(i[0])).is(y) ? c : c.find(y).first()).length && t.setStart(c.get(0), 0)), t.collapse(!0), l.remove(o), l.remove(r) }, _removeContent: function (t, i, n) { if (i) { var o, r = n ? "nextSibling" : "previousSibling", s = function (t) { for (; t && !t[r];)t = t.parentNode; return t && e.contains(i, t) ? t[r] : null }; for (t = s(t); t;)o = s(t), l.remove(t), t = o } } }), S = n.extend({ init: function (e) { this.editor = e }, keydown: function (i) { var n, r, s, a, l = this, c = l.editor, d = c.keyboard, h = d.isTypingKey(i), p = m(e.Event(), i); return l.editor.trigger("keydown", p), p.isDefaultPrevented() ? (i.preventDefault(), !0) : !(p.isDefaultPrevented() || !h || d.isTypingInProgress() || (n = c.getRange(), r = c.body, l.startRestorePoint = new u(n, r), x(n) && (s = new C(c), s.remove(n), c.selectRange(n)), f.webkit && !n.collapsed && function (e, t) { return t.startContainer === e && t.endContainer === e && 0 === t.startOffset && t.endOffset == e.childNodes.length }(r, n) && (r.innerHTML = ""), c.immutables && o.Immutables.immutablesContext(n) && (a = new o.BackspaceHandler(c), a.deleteSelection(n)), d.startTyping(function () { l.endRestorePoint = t(c, l.startRestorePoint) }), 0)) }, keyup: function (e) { var t = this.editor.keyboard; return this.editor.trigger("keyup", e), !!t.isTypingInProgress() && (t.endTyping(), !0) } }), T = n.extend({ init: function (e) { this.editor = e }, _addCaret: function (e) { var t = l.create(this.editor.document, "a"); return l.insertAt(e, t, 0), l.stripBomNode(t.previousSibling), l.stripBomNode(t.nextSibling), t }, _restoreCaret: function (e) { var t = this.editor.createRange(); t.setStartAfter(e), t.collapse(!0), this.editor.selectRange(t), l.remove(e) }, _handleDelete: function (e) { var t, i, n = e.endContainer, r = l.closestEditableOfType(n, l.blockElements); return !(!r || !o.RangeUtils.isEndOf(e, r) || (t = l.next(r), !t || "p" != l.name(t) || (i = this._addCaret(t), this._merge(r, t), this._restoreCaret(i), 0))) }, _cleanBomBefore: function (e) { for (var t = e.startOffset, i = e.startContainer, n = i.nodeValue, o = 0; t - o >= 0 && "\ufeff" == n[t - o - 1];)o++; o > 0 && (i.deleteData(t - o, o), e.setStart(i, Math.max(0, t - o)), e.collapse(!0), this.editor.selectRange(e)) }, _handleBackspace: function (e) { var t, i, n, r, s, a, c, d, u = e.startContainer, h = l.closestEditableOfType(u, ["li"]), f = l.closestEditableOfType(u, "p,h1,h2,h3,h4,h5,h6".split(",")), p = this.editor; return l.isDataNode(u) && this._cleanBomBefore(e), t = function (e, t, i) { for (var n = e ? e[t] : null; n && !i(n);)n = n[t]; return n }(f, "previousSibling", function (e) { return !l.htmlIndentSpace(e) }), e.collapsed && e.startOffset !== e.endOffset && e.startOffset < 0 && (e.startOffset = 0, e.endOffset = 0, p.selectRange(e)), f && t && o.RangeUtils.isStartOf(e, f) ? (i = this._addCaret(f), this._merge(t, f), this._restoreCaret(i), !0) : h && o.RangeUtils.isStartOf(e, h) ? ((n = h.firstChild) || (h.innerHTML = o.emptyElementContent, n = h.firstChild), r = new o.ListFormatter(l.name(h.parentNode), "p"), e.selectNodeContents(h), r.toggle(e), l.insignificant(n) ? e.setStartBefore(n) : e.setStart(n, 0), p.selectRange(e), !0) : (s = e, a = u.previousSibling, 0 === s.startOffset && a && "a" === a.nodeName.toLowerCase() && ((s = p.createRange()).setStart(a, a.childNodes.length), s.setEnd(a, a.childNodes.length)), c = l.closestEditableOfType(s.startContainer, ["a"]), c && o.RangeUtils.isEndOf(s, c) && (d = new o.UnlinkCommand({ range: s, body: p.body, immutables: !!p.immutables }), p.execCommand(d), p._selectionChange()), !1) }, _handleSelection: function (t) { var i, n, r, s = t.commonAncestorContainer, a = l.closest(s, "table"), c = o.emptyElementContent, d = this.editor; return x(t) ? (new C(d).remove(t), d.selectRange(t), !0) : ((i = new h).add(t, !1), d.immutables && this._handleImmutables(i), this._surroundFullySelectedAnchor(i, t), t.setStartAfter(i.start), t.setEndBefore(i.end), n = t.startContainer, r = t.endContainer, t.deleteContents(), a && "" === e(a).text() && (t.selectNode(a), t.deleteContents()), s = t.commonAncestorContainer, "p" === l.name(s) && "" === s.innerHTML && (s.innerHTML = c, t.setStart(s, 0)), this._join(n, r), l.insertAfter(d.document.createTextNode("\ufeff"), i.start), i.remove(t), n = t.startContainer, "tr" == l.name(n) && (n = n.childNodes[Math.max(0, t.startOffset - 1)], t.setStart(n, l.getNodeLength(n))), t.collapse(!0), d.selectRange(t), !0) }, _handleImmutables: function (e) { var t = o.Immutables.immutableParent, i = t(e.start), n = t(e.start); i && l.insertBefore(e.start, i), n && l.insertAfter(e.end, n), i && l.remove(i), n && n.parentNode && l.remove(n) }, _surroundFullySelectedAnchor: function (t, i) { var n = t.start, o = e(n).closest("a").get(0), r = t.end, a = e(r).closest("a").get(0); o && s.isStartOf(i, o) && l.insertBefore(n, o), a && s.isEndOf(i, a) && l.insertAfter(r, a) }, _root: function (e) { for (; e && e.parentNode && "body" != l.name(e.parentNode);)e = e.parentNode; return e }, _join: function (e, t) { e = this._root(e), t = this._root(t), e != t && l.is(t, "p") && this._merge(e, t) }, _merge: function (e, t) { for (l.removeTrailingBreak(e); e && t.firstChild;)1 == e.nodeType ? (e = l.list(e) ? e.children[e.children.length - 1] : e) && e.appendChild(t.firstChild) : e.nodeType === g.TEXT_NODE ? this._mergeWithTextNode(e, t.firstChild) : e.parentNode.appendChild(t.firstChild); l.remove(t) }, _mergeWithTextNode: function (e, t) { e && e.nodeType === g.TEXT_NODE && (e.nextSibling && this._isCaret(e.nextSibling) ? l.insertAfter(t, e.nextSibling) : l.insertAfter(t, e)) }, _isCaret: function (t) { return e(t).is("a") }, keydown: function (e) { var n, o, r = this.editor, s = r.getRange(), a = e.keyCode, l = i.keys, c = a === l.BACKSPACE, d = a == l.DELETE; r.immutables && r.immutables.keydown(e, s) || (!c && !d || s.collapsed ? c ? n = "_handleBackspace" : d && (n = "_handleDelete") : n = "_handleSelection", n && (o = new u(s, r.body), this[n](s) && (e.preventDefault(), t(r, o)))) }, deleteSelection: function (e) { this._handleSelection(e) }, keyup: e.noop }), D = n.extend({ init: function (e) { this.editor = e, this.systemCommandIsInProgress = !1 }, createUndoCommand: function () { this.startRestorePoint = this.endRestorePoint = t(this.editor, this.startRestorePoint) }, changed: function () { return !!this.startRestorePoint && this.startRestorePoint.html != this.editor.body.innerHTML }, keydown: function (e) { var t = this, i = t.editor, n = i.keyboard; return n.isModifierKey(e) ? (n.isTypingInProgress() && n.endTyping(!0), t.startRestorePoint = new u(i.getRange(), i.body), !0) : !!n.isSystem(e) && (t.systemCommandIsInProgress = !0, t.changed() && (t.systemCommandIsInProgress = !1, t.createUndoCommand()), !0) }, keyup: function () { var e = this; return !(!e.systemCommandIsInProgress || !e.changed() || (e.systemCommandIsInProgress = !1, e.createUndoCommand(), 0)) } }), A = n.extend({ init: function (e) { this.editor = e }, keydown: function (e) { !f.webkit || e.isDefaultPrevented() || !e.ctrlKey || 65 != e.keyCode || e.altKey || e.shiftKey || (this.editor.options.immutables && this._toSelectableImmutables(), this._selectEditorBody()) }, _selectEditorBody: function () { var e = this.editor, t = e.getRange(); t.selectNodeContents(e.body), e.selectRange(t) }, _toSelectableImmutables: function () { for (var t = this.editor, i = t.body, n = o.Immutables.immutable, r = l.emptyTextNode, s = i.firstChild, a = i.lastChild; r(s);)s = s.nextSibling; for (; r(a);)a = a.previousSibling; s && n(s) && e(p).prependTo(i), a && n(a) && e(p).appendTo(i) }, keyup: e.noop }), E = n.extend({ init: function (e) { this.handlers = e, this.typingInProgress = !1 }, isCharacter: function (e) { return e >= 48 && e <= 90 || e >= 96 && e <= 111 || e >= 186 && e <= 192 || e >= 219 && e <= 222 || 229 == e }, toolFromShortcut: function (t, i) { var n, o, r = String.fromCharCode(i.keyCode), s = this._getShortcutModifier(i, navigator.platform); for (n in t) if (((o = e.extend({ ctrl: !1, alt: !1, shift: !1 }, t[n].options)).key == r || o.key == i.keyCode) && o.ctrl == s && o.alt == i.altKey && o.shift == i.shiftKey) return n }, _getShortcutModifier: function (e, t) { var i = t.toUpperCase().indexOf("MAC") >= 0; return i ? e.metaKey : e.ctrlKey }, toolsFromShortcut: function (t, i) { var n, o, r = String.fromCharCode(i.keyCode), s = [], a = function (e) { return e == r || e == i.keyCode || e == i.charCode }; for (n in t) o = e.extend({ ctrl: !1, alt: !1, shift: !1 }, t[n].options), (e.isArray(o.key) ? e.grep(o.key, a).length > 0 : a(o.key)) && o.ctrl == i.ctrlKey && o.alt == i.altKey && o.shift == i.shiftKey && s.push(t[n]); return s }, isTypingKey: function (e) { var t = e.keyCode; return this.isCharacter(t) && !e.ctrlKey && !e.altKey || 32 == t || 13 == t || 8 == t || 46 == t && !e.shiftKey && !e.ctrlKey && !e.altKey }, isModifierKey: function (e) { var t = e.keyCode; return 17 == t && !e.shiftKey && !e.altKey || 16 == t && !e.ctrlKey && !e.altKey || 18 == t && !e.ctrlKey && !e.shiftKey }, isSystem: function (e) { return 46 == e.keyCode && e.ctrlKey && !e.altKey && !e.shiftKey }, startTyping: function (e) { this.onEndTyping = e, this.typingInProgress = !0 }, stopTyping: function () { this.typingInProgress && this.onEndTyping && this.onEndTyping(), this.typingInProgress = !1 }, endTyping: function (t) { var i = this; i.clearTimeout(), t ? i.stopTyping() : i.timeout = window.setTimeout(e.proxy(i.stopTyping, i), 1e3) }, isTypingInProgress: function () { return this.typingInProgress }, clearTimeout: function () { window.clearTimeout(this.timeout) }, notify: function (e, t) { var i, n = this.handlers; for (i = 0; i < n.length && !n[i][t](e); i++); }, keydown: function (e) { this.notify(e, "keydown") }, keyup: function (e) { this.notify(e, "keyup") } }), I = n.extend({ init: function (e) { this.editor = e; var t = e.options.pasteCleanup; this.cleaners = [new R(t), new F(t), new z(t), new P(t), new L(t), new H(t), new V(t), new U(t)] }, htmlToFragment: function (e) { var t = this.editor, i = t.document, n = l.create(i, "div"), o = i.createDocumentFragment(); for (n.innerHTML = e; n.firstChild;)o.appendChild(n.firstChild); return o }, isBlock: function (e) { return /<(div|p|ul|ol|table|h[1-6])/i.test(e) }, _startModification: function () { var e, t, i = this.editor; if (!this._inProgress) return this._inProgress = !0, e = i.getRange(), t = new u(e, i.body), l.persistScrollTop(i.document), { range: e, restorePoint: t } }, _endModification: function (e) { t(this.editor, e.restorePoint), this.editor._selectionChange(), this._inProgress = !1 }, _contentModification: function (e, t) { var i = this, n = i.editor, o = i._startModification(); o && (e.call(i, n, o.range), setTimeout(function () { t.call(i, n, o.range), i._endModification(o) })) }, _removeBomNodes: function (e) { var t, i = o.RangeUtils.textNodes(e); for (t = 0; t < i.length; t++)i[t].nodeValue = l.stripBom(i[t].nodeValue) }, _onBeforeCopy: function (e) { var t = new h; t.add(e), this._removeBomNodes(e), t.remove(e), this.editor.selectRange(e) }, oncopy: function () { this._onBeforeCopy(this.editor.getRange()) }, oncut: function () { this._onBeforeCopy(this.editor.getRange()), this._contentModification(e.noop, e.noop) }, _fileToDataURL: function (t) { var i = e.Deferred(), n = new FileReader; return t instanceof window.File || !t.getAsFile || (t = t.getAsFile()), n.onload = e.proxy(i.resolve, i), n.readAsDataURL(t), i.promise() }, _triggerPaste: function (e, t) { var i = { html: e || "" }; i.html = i.html.replace(/\ufeff/g, ""), this.editor.trigger("paste", i), this.paste(i.html, t || {}) }, _handleImagePaste: function (t) { var i, n, o, r; if ("FileReader" in window && !(f.msie && f.version > 10) && (i = t.clipboardData || t.originalEvent.clipboardData || window.clipboardData || {}, (n = i.items || i.files) && (o = e.grep(n, function (e) { return /^image\//i.test(e.type) }), !e.grep(n, function (e) { return /^text\/html/i.test(e.type) }).length && o.length && (r = this._startModification())))) return e.when.apply(e, e.map(o, this._fileToDataURL)).done(e.proxy(function () { var t = Array.prototype.slice.call(arguments), i = e.map(t, function (e) { return '<img src="' + e.target.result + '" />' }).join(""); this._triggerPaste(i), this._endModification(r) }, this)), !0 }, onpaste: function (t) { return this._handleImagePaste(t) ? void t.preventDefault() : (this.expandImmutablesIn(), void this._contentModification(function (n, o) { var r, s, a, c = l.create(n.document, "div", { className: "k-paste-container", innerHTML: "\ufeff" }), d = i.support.browser, u = n.body; this._decoreateClipboardNode(c, u), u.appendChild(c), d.webkit && this._moveToCaretPosition(c, o), d.msie && d.version < 11 ? (t.preventDefault(), (r = n.createRange()).selectNodeContents(c), n.selectRange(r), (s = n.document.body.createTextRange()).moveToElementText(c), e(u).unbind("paste"), s.execCommand("Paste"), e(u).bind("paste", e.proxy(this.onpaste, this))) : ((a = n.createRange()).selectNodeContents(c), n.selectRange(a)), o.deleteContents() }, function (t, i) { var n, o = ""; t.selectRange(i), (n = e(t.body).children(".k-paste-container")).each(function () { var e = this.lastChild; e && l.is(e, "br") && l.remove(e), o += this.innerHTML }), n.remove(), this._triggerPaste(o, { clean: !0 }) })) }, _decoreateClipboardNode: function (t, i) { var n, o, r, s; (f.msie || f.webkit) && ((t = e(t)).css({ borderWidth: "0px", width: "0px", height: "0px", overflow: "hidden", margin: "0", padding: "0" }), f.msie && (n = e(i.ownerDocument.documentElement), t.css({ fontVariant: "normal", fontWeight: "normal", lineSpacing: "normal", lineHeight: "normal", textDecoration: "none" }), (o = n.css("color")) && t.css("color", o), (r = n.css("fontFamily")) && t.css("fontFamily", r), (s = n.css("fontSize")) && t.css("fontSize", s))) }, _moveToCaretPosition: function (t, i) { var n = this.editor.body, o = l.offset(t, n), r = this._caretOffset(i, n), s = r.left - o.left, a = r.top - o.top, c = "translate(" + s + "px," + a + "px)"; e(t).css({ "-webkit-transform": c, transform: c }) }, _caretOffset: function (e, t) { var i, n, o, r, s, a, c = this.editor, d = l.create(c.document, "span", { innerHTML: "\ufeff" }), u = e.startContainer; return e.collapsed ? (n = l.isDataNode(u)) && (l.isBom(u) || 0 === e.startOffset) ? l.insertBefore(d, u) : n && e.startOffset === u.length ? l.insertAfter(d, u) : (e.insertNode(d), i = !0) : (u = u === t ? u.childNodes[e.startOffset] : u, l.insertBefore(d, u)), o = l.offset(d, t), r = d.previousSibling, s = d.nextSibling, l.remove(d), i && l.isDataNode(r) && l.isDataNode(s) && !l.isBom(r) && !l.isBom(s) && (a = r.length, s.data = r.data + s.data, e.setStart(s, a), l.remove(r), e.collapse(!0), c.selectRange(e)), o }, expandImmutablesIn: function (e) { var t, n, o, r = this.editor; r && r.options.immutables && (t = r.body, e = e || r.getRange(), i.ui.editor.Immutables.expandImmutablesIn(e), e.startContainer === t && 0 === e.startOffset && (n = t.ownerDocument, o = n.createTextNode("\ufeff"), t.insertBefore(o, t.childNodes[0]), e.setStartBefore(o)), r.selectRange(e)) }, splittableParent: function (e, t) { var i, n; if (e) return l.closestEditableOfType(t, ["p", "ul", "ol"]) || t.parentNode; if (i = t.parentNode, n = t.ownerDocument.body, l.isInline(i)) for (; i.parentNode != n && !l.isBlock(i.parentNode);)i = i.parentNode; return i }, paste: function (t, i) { var n, r, s, a, c, d, u, f, p, g, v, _, b = this.editor; if (this.expandImmutablesIn(), !(i = m({ clean: !1, split: !0 }, i)).skipCleaners) for (n = 0, r = this.cleaners.length; n < r; n++)this.cleaners[n].applicable(t) && (t = this.cleaners[n].clean(t)); if (i.clean && (t = (t = t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi, "$3")).replace(/<(a|span)[^>]*><\/\1>/gi, "")), t = t.replace(/^<li/i, "<ul><li").replace(/li>$/g, "li></ul>"), s = this.isBlock(t), b.focus(), (a = b.getRange()).deleteContents(), a.startContainer == b.document && a.selectNodeContents(b.body), c = new h, d = c.addCaret(a), u = this.splittableParent(s, d), f = !1, p = u != b.body && !l.is(u, "td"), i.split && p && (s || l.isInline(u)) && (a.selectNode(d), o.RangeUtils.split(a, u, !0), f = !0), (g = this.htmlToFragment(t)).firstChild && "k-paste-container" === g.firstChild.className) { for (v = [], n = 0, r = g.childNodes.length; n < r; n++)v.push(g.childNodes[n].innerHTML); g = this.htmlToFragment(v.join("<br />")) } if (e(g.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"), a.insertNode(g), u = this.splittableParent(s, d), f) { for (; d.parentNode != u;)l.unwrap(d.parentNode); l.unwrap(d.parentNode) } l.normalize(a.commonAncestorContainer), d.style.display = "inline", l.restoreScrollTop(b.document), l.scrollTo(d), c.removeCaret(a), _ = a.commonAncestorContainer.parentNode, a.collapsed && "tbody" == l.name(_) && (a.setStartAfter(e(_).closest("table")[0]), a.collapse(!0)), b.selectRange(a) } }), M = n.extend({ init: function (e) { this.options = e || {}, this.replacements = [] }, clean: function (e, t) { var i, n, o = t || this.replacements; for (i = 0, n = o.length; i < n; i += 2)e = e.replace(o[i], o[i + 1]); return e } }), R = M.extend({ init: function (e) { M.fn.init.call(this, e), this.replacements = [/<(\/?)script([^>]*)>/i, "<$1telerik:script$2>"] }, applicable: function (e) { return !this.options.none && /<script[^>]*>/i.test(e) } }), F = M.extend({ init: function (e) { M.fn.init.call(this, e); this.replacements = [/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi, " ", /\t/gi, " ", /&nbsp;&nbsp; &nbsp;/gi, " "] }, applicable: function (e) { return /&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(e) } }), z = M.extend({ init: function (e) { M.fn.init.call(this, e), this.junkReplacements = [/<\?xml[^>]*>/gi, "", /<!--(.|\n)*?-->/g, "", /&quot;/g, "'", /<o:p>&nbsp;<\/o:p>/gi, "&nbsp;", /<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi, "", /<\/o>/g, ""], this.replacements = this.junkReplacements.concat([/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g, "$1", /<br><br>/g, "<BR><BR>", /<br>(?!\n)/g, " ", /<table([^>]*)>(\s|&nbsp;)+<t/gi, "<table$1><t", /<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi, "", /<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi, "", /<table[^>]*>(\s|&nbsp;)*<\/table>/gi, "", /<BR><BR>/g, "<br>", /^\s*(&nbsp;)+/gi, "", /(&nbsp;|<br[^>]*>)+\s*$/gi, "", /mso-[^;"]*;?/gi, "", /<(\/?)b(\s[^>]*)?>/gi, "<$1strong$2>", /<(\/?)font(\s[^>]*)?>/gi, this.convertFontMatch, /<(\/?)i(\s[^>]*)?>/gi, "<$1em$2>", /style=(["|'])\s*\1/g, "", /(<br[^>]*>)?\n/g, function (e, t) { return t ? e : " " }]) }, convertFontMatch: function (e, t, i) { var n = /face=['"]([^'"]+)['"]/i.exec(i), o = i && n && n[1]; return t ? "</span>" : o ? '<span style="font-family:' + o + '">' : "<span>" }, applicable: function (e) { return /class="?Mso/i.test(e) || /style="[^"]*mso-/i.test(e) || /urn:schemas-microsoft-com:office/.test(e) }, stripEmptyAnchors: function (e) { return e.replace(/<a([^>]*)>\s*<\/a>/gi, function (e, t) { return !t || t.indexOf("href") < 0 ? "" : e }) }, listType: function (e, t) { var i, n = e.innerHTML, o = l.innerText(e), r = n.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i), s = r && r[1], a = /^[a-z\d]/i.test(s), c = function (e) { return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/, "") }; return r && (i = !0), n = n.replace(/<\/?\w+[^>]*>/g, "").replace(/&nbsp;/g, " "), !i && /^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(n) || i && /^.\u00a0+/.test(n) || s && !a && t ? { tag: "ul", style: this._guessUnorderedListStyle(c(o)) } : /^\s*\w+[\.\)][\u00a0 ]{2,}/.test(n) ? { tag: "ol", style: this._guessOrderedListStyle(c(o)) } : void 0 }, _convertToLi: function (e) { var t; return 1 == e.childNodes.length ? t = e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /, "") : (l.remove(e.firstChild), 3 == e.firstChild.nodeType && /^[ivxlcdm]+\.$/i.test(e.firstChild.nodeValue) && l.remove(e.firstChild), /^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML) && l.remove(e.firstChild), t = e.innerHTML), l.remove(e), l.create(document, "li", { innerHTML: t }) }, _guessUnorderedListStyle: function (e) { return /^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e) ? null : /^o/.test(e) ? "circle" : "square" }, _guessOrderedListStyle: function (e) { var t = null; return /^\d/.test(e) || (t = (/^[a-z]/.test(e) ? "lower-" : "upper-") + (/^[ivxlcdm]/i.test(e) ? "roman" : "alpha")), t }, extractListLevels: function (e) { return e = e.replace(/style=['"]?[^'"]*?mso-list:\s?[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi, function (e, t, n) { return i.format('data-list="{0}" data-level="{1}" {2}', t, n, e) }) }, lists: function (t) { var i, n, o, r, s, a, c, d, u, h, f, p, m = e(t).find(l.blockElements.join(",")), g = -1, v = {}, _ = t; for (r = 0; r < m.length; r++)s = m[r], u = e(s).data(), h = u.list, "td" != (i = l.name(s)) && (f = this.listType(s, u), (a = f && f.tag) && "p" == i ? (c = parseFloat(s.style.marginLeft || 0), void 0 === n && (n = c), p = a + h, v[c] || (v[c] = {}), d = v[c][p], (c > g || !d) && (d = l.create(document, a, { style: { listStyleType: f.style } }), _ == t || c <= g ? (o && n !== c ? o.appendChild(d) : l.insertBefore(d, s), v[c] = {}) : (o = _, _.appendChild(d)), v[c][p] = d), _ = this._convertToLi(s), d.appendChild(_), g = c) : s.innerHTML ? (g = -1, _ = t) : l.remove(s)) }, removeAttributes: function (e) { for (var t = e.attributes, i = t.length; i--;)"colspan" != l.name(t[i]) && e.removeAttributeNode(t[i]) }, createColGroup: function (t) { var n = t.cells, o = e(t).closest("table"), r = o.children("colgroup"); n.length < 2 || (r.length && (n = r.children(), r[0].parentNode.removeChild(r[0])), (r = e(e.map(n, function (e) { var t = e.width; return t && 0 !== parseInt(t, 10) ? i.format('<col style="width:{0}px;"/>', t) : "<col />" }).join(""))).is("colgroup") || (r = e("<colgroup/>").append(r)), r.prependTo(o)) }, convertHeaders: function (t) { var i, n = t.cells, o = e.map(n, function (t) { var i = e(t).children("p").children("strong")[0]; if (i && "strong" == l.name(i)) return i }); if (o.length == n.length) { for (i = 0; i < o.length; i++)l.unwrap(o[i]); for (e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t), i = 0; i < n.length; i++)l.changeTag(n[i], "th") } }, removeParagraphs: function (t) { var i, n, o, r, s; for (i = 0; i < t.length; i++)for (this.removeAttributes(t[i]), r = e(t[i]), s = r.children("p"), n = 0, o = s.length; n < o; n++)n < o - 1 && l.insertAfter(l.create(document, "br"), s[n]), l.unwrap(s[n]) }, removeDefaultColors: function (e) { for (var t = 0; t < e.length; t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText) && l.unwrap(e[t]) }, tables: function (t) { var i, n, o, r, s, a = e(t).find("table"), l = this; for (r = 0; r < a.length; r++) { for (i = a[r].rows, o = n = i[0], s = 1; s < i.length; s++)i[s].cells.length > o.cells.length && (o = i[s]); l.createColGroup(o), l.convertHeaders(n), l.removeAttributes(a[r]), l.removeParagraphs(a.eq(r).find("td,th")), l.removeDefaultColors(a.eq(r).find("span")) } }, headers: function (t) { var i, n = e(t).find("p.MsoTitle"); for (i = 0; i < n.length; i++)l.changeTag(n[i], "h1") }, removeFormatting: function (t) { e(t).find("*").each(function () { e(this).css({ fontSize: "", fontFamily: "" }), this.getAttribute("style") || this.style.cssText || this.removeAttribute("style") }) }, clean: function (e) { var t, i = this, n = this.options; return n.none ? (e = M.fn.clean.call(i, e, this.junkReplacements), e = i.stripEmptyAnchors(e)) : (e = this.extractListLevels(e), e = M.fn.clean.call(i, e), e = i.stripEmptyAnchors(e), t = l.create(document, "div", { innerHTML: e }), i.headers(t), n.msConvertLists && i.lists(t), i.tables(t), n.msAllFormatting && i.removeFormatting(t), e = t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi, "$1")), e } }), P = M.extend({ init: function (e) { M.fn.init.call(this, e), this.replacements = [/\s+class="Apple-style-span[^"]*"/gi, "", /<(div|p|h[1-6])\s+style="[^"]*"/gi, "<$1", /^<div>(.*)<\/div>$/, "$1"] }, applicable: function (e) { return /class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e) } }), B = M.extend({ clean: function (e) { var t = l.create(document, "div", { innerHTML: e }); return (t = this.cleanDom(t)).innerHTML }, cleanDom: function (e) { return e } }), L = B.extend({ cleanDom: function (t) { var i = this.collectTags(); return e(t).find(i).each(function () { l.unwrap(this) }), t }, collectTags: function () { if (this.options.span) return "span" }, applicable: function () { return this.options.span } }), H = B.extend({ cleanDom: function (t) { var i = this.collectAttr(), n = e(t).find("[" + i.join("],[") + "]"); return n.removeAttr(i.join(" ")), t }, collectAttr: function () { return this.options.css ? ["class", "style"] : [] }, applicable: function () { return this.options.css } }), N = n.extend({ init: function (e) { this.separators = e || { text: " ", line: "<br/>" }, this.lines = [], this.inlineBlockText = [], this.resetLine() }, appendText: function (e) { 3 === e.nodeType && (e = e.nodeValue), this.textContainer.add(e) }, appendInlineBlockText: function (e) { this.inlineBlockText.push(e) }, flashInlineBlockText: function () { this.inlineBlockText.length && (this.appendText(this.inlineBlockText.join(" ")), this.inlineBlockText = []) }, endLine: function () { this.flashInlineBlockText(), this.resetLine() }, html: function () { var e, t, i, n, o, r, s, a, l = this.separators, c = "", d = this.lines; for (this.flashInlineBlockText(), e = 0, t = d.length, i = t - 1; e < t; e++) { for (n = d[e], o = 0, r = n.length, s = r - 1; o < r; o++)a = n[o].text, c += a, o !== s && (c += l.text); e !== i && (c += l.line) } return c }, resetLine: function () { this.textContainer = new function () { this.text = "", this.add = function (e) { this.text += e } }, this.line = [], this.line.push(this.textContainer), this.lines.push(this.line) } }), O = n.extend({ init: function (e) { this.callback = e }, enumerate: function (e) { var t, i; e && (t = this.callback(e), i = e.firstChild, !t && i && this.enumerate(i), this.enumerate(e.nextSibling)) } }), V = M.extend({ init: function (t) { M.fn.init.call(this, t), this.hasText = !1, this.enumerator = new O(e.proxy(this.buildText, this)) }, clean: function (e) { var t = l.create(document, "div", { innerHTML: e }); return this.cleanDom(t) }, cleanDom: function (e) { return this.separators = this.getDefaultSeparators(), this.htmlLines = new N(this.separators), this.enumerator.enumerate(e.firstChild), this.hasText = !1, this.htmlLines.html() }, buildText: function (e) { if (l.isDataNode(e)) { if (l.isEmptyspace(e)) return; this.htmlLines.appendText(e.nodeValue.replace("\n", this.separators.line)), this.hasText = !0 } else if (l.isBlock(e) && this.hasText) { var t = this.actions[l.name(e)] || this.actions.block; return t(this, e) } }, applicable: function () { var e = this.options; return e.all || e.keepNewLines }, getDefaultSeparators: function () { return this.options.all ? { text: " ", line: " " } : { text: " ", line: "<br/>" } }, actions: { ul: e.noop, ol: e.noop, table: e.noop, thead: e.noop, tbody: e.noop, td: function (e, t) { var i = new V({ all: !0 }), n = i.cleanDom(t); return e.htmlLines.appendInlineBlockText(n), !0 }, block: function (e) { e.htmlLines.endLine() } } }), U = M.extend({ clean: function (e) { return this.options.custom(e) }, applicable: function () { return "function" == typeof this.options.custom } }), W = v.extend({ init: function (e) { v.fn.init.call(this, e), this.managesUndoRedo = !0 }, exec: function () { var e = this.editor; i.support.browser.msie ? e.document.execCommand("print", !1, null) : e.window.print && e.window.print() } }), q = v.extend({ init: function (e) { this.async = !0, v.fn.init.call(this, e) }, exec: function () { var e = this, t = e.lockRange(!0), i = e.editor; i._destroyResizings(), i.saveAsPDF().then(function () { e.releaseRange(t), i._initializeColumnResizing(), i._initializeRowResizing(), i._initializeTableResizing() }) } }); m(o, { _finishUpdate: t, Command: v, GenericCommand: _, InsertHtmlCommand: b, InsertHtmlTool: w, TypingHandler: S, SystemHandler: D, BackspaceHandler: T, SelectAllHandler: A, Keyboard: E, Clipboard: I, Cleaner: M, ScriptCleaner: R, TabCleaner: F, MSWordFormatCleaner: z, WebkitFormatCleaner: P, HtmlTagsCleaner: L, HtmlAttrCleaner: H, HtmlContentCleaner: V, HtmlTextLines: N, CustomCleaner: U, PrintCommand: W, ExportPdfCommand: q }), a("insertHtml", new w({ template: new d({ template: r.dropDownListTemplate, title: "Insert HTML", initialValue: "Insert HTML" }) })), a("print", new c({ command: W, template: new d({ template: r.buttonTemplate, title: "Print" }) })), a("pdf", new c({ command: q, template: new d({ template: r.buttonTemplate, title: "Export PDF" }) })) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/inlineformat.min", ["editor/system.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = t.Class, n = t.ui.editor, o = t.ui.Editor.fn.options.formats, r = n.EditorUtils, s = n.Tool, a = n.ToolTemplate, l = n.FormatTool, c = n.Dom, d = n.RangeUtils, u = e.extend, h = n.EditorUtils.registerTool, f = n.EditorUtils.registerFormat, p = function (e) { e.preventDefault() }, m = "mousedown.kendoEditor", g = "k-marker", v = i.extend({ init: function (e) { this.format = e }, numberOfSiblings: function (e) { var t, i = 0, n = 0, o = 0, r = e.parentNode; for (t = r.firstChild; t; t = t.nextSibling)t != e && (t.className == g ? o++ : 3 == t.nodeType ? i++ : n++); return o > 1 && r.firstChild.className == g && r.lastChild.className == g ? 0 : n + i }, findSuitable: function (e, t) { var i, n; if (!t && this.numberOfSiblings(e) > 0) return null; for (i = e.parentNode, n = this.format[0].tags; !c.ofType(i, n);) { if (this.numberOfSiblings(i) > 0) return null; i = i.parentNode } return i }, findFormat: function (e) { var t, i, n, o, r, s = this.format, a = c.attrEquals; for (t = 0, i = s.length; t < i; t++) { if (n = e, o = s[t].tags, r = s[t].attr, n && c.ofType(n, o) && a(n, r)) return n; for (; n;)if ((n = c.parentOfType(n, o)) && a(n, r)) return n } return null }, isFormatted: function (e) { var t, i; for (t = 0, i = e.length; t < i; t++)if (this.findFormat(e[t])) return !0; return !1 } }), _ = i.extend({ init: function (e, t) { this.finder = new v(e), this.attributes = u({}, e[0].attr, t), this.tag = e[0].tags[0] }, wrap: function (e) { return c.wrap(e, c.create(e.ownerDocument, this.tag, this.attributes)) }, activate: function (e, t) { this.finder.isFormatted(t) ? (this.split(e), this.remove(t)) : this.apply(t) }, toggle: function (e) { var t = this.immutables() ? d.editableTextNodes : d.textNodes, i = t(e); i.length > 0 && this.activate(e, i) }, immutables: function () { return this.editor && this.editor.options.immutables }, apply: function (e) { var t, i, n, o, r = [], s = this.attributes, a = s && s.style || {}; for (t = 0, i = e.length; t < i; t++) { if (n = e[t], o = this.finder.findSuitable(n)) c.is(o, "font") && (a.color && o.removeAttribute("color"), a.fontName && o.removeAttribute("face"), a.fontSize && o.removeAttribute("size")), c.attr(o, s); else { for (; !c.isBlock(n.parentNode) && 1 == n.parentNode.childNodes.length && "true" !== n.parentNode.contentEditable;)n = n.parentNode; o = this.wrap(n) } r.push(o) } this.consolidate(r) }, remove: function (e) { var t, i, n; for (t = 0, i = e.length; t < i; t++)(n = this.finder.findFormat(e[t])) && (this.attributes && this.attributes.style ? (c.unstyle(n, this.attributes.style), n.style.cssText || n.attributes.class || c.unwrap(n)) : c.unwrap(n)) }, split: function (e) { var t, i, n = d.textNodes(e), o = n.length; if (o > 0) for (t = 0; t < o; t++)(i = this.finder.findFormat(n[t])) && d.split(e, i, !0) }, consolidate: function (e) { for (var t, i; e.length > 1;)if (t = e.pop(), i = e[e.length - 1], t.previousSibling && t.previousSibling.className == g && i.appendChild(t.previousSibling), t.tagName == i.tagName && t.previousSibling == i && t.style.cssText == i.style.cssText) { for (; t.firstChild;)i.appendChild(t.firstChild); c.remove(t) } } }), b = v.extend({ init: function (e, t) { this.format = e, this.greedyProperty = t, v.fn.init.call(this, e) }, getInlineCssValue: function (t) { var i, n, o, r, s, a, l, d, u, h, f, p, m = t.attributes, g = e.trim; if (m) for (i = 0, n = m.length; i < n; i++)if (o = m[i], r = o.nodeName, s = o.nodeValue, o.specified && "style" == r) for (a = g(s || t.style.cssText).split(";"), d = 0, u = a.length; d < u; d++)if ((l = a[d]).length) { if (h = l.split(":"), f = g(h[0].toLowerCase()), p = g(h[1]), f != this.greedyProperty) continue; return f.indexOf("color") >= 0 ? c.toHex(p) : p } }, getFormatInner: function (t) { var i, n, o, r = e(c.isDataNode(t) ? t.parentNode : t), s = r.parentsUntil("[contentEditable]").addBack().toArray().reverse(); for (i = 0, n = s.length; i < n; i++)if (o = "className" == this.greedyProperty ? s[i].className : this.getInlineCssValue(s[i])) return o; return "inherit" }, getFormat: function (e) { var t, i, n = this.getFormatInner(e[0]); for (t = 1, i = e.length; t < i; t++)if (n != this.getFormatInner(e[t])) return ""; return n }, isFormatted: function (e) { return "" !== this.getFormat(e) } }), w = _.extend({ init: function (e, i, n) { _.fn.init.call(this, e, i), this.values = i, this.finder = new b(e, n), n && (this.greedyProperty = t.toCamelCase(n)) }, activate: function (e, t) { var i = this.greedyProperty, n = "apply"; this.split(e), i && "inherit" == this.values.style[i] && (n = "remove"), this[n](t) } }), y = l.extend({ init: function (e) { l.fn.init.call(this, u(e, { finder: new v(e.format), formatter: function () { return new _(e.format) } })) } }), k = s.extend({ update: function (e, t) { var i = e.data(this.type); i.close(), i.value(this.finder.getFormat(t)) } }), x = k.extend({ init: function (e) { s.fn.init.call(this, e), this.type = t.support.browser.msie || t.support.touch ? "kendoDropDownList" : "kendoComboBox", this.format = [{ tags: ["span", "font"] }], this.finder = new b(this.format, e.cssAttr) }, command: function (e) { var t = this.options, i = this.format, o = {}; return new n.FormatCommand(u(e, { formatter: function () { return o[t.domAttr] = e.value, new w(i, { style: o }, t.cssAttr) } })) }, initialize: function (e, i) { var n, o, r, a = i.editor, l = this.options, c = l.name, d = []; l.defaultValue && (d = [{ text: a.options.messages[l.defaultValue[0].text], value: l.defaultValue[0].value }]), n = d.concat(l.items ? l.items : a.options[c] || []), e.attr({ title: i.title }), e[this.type]({ dataTextField: "text", dataValueField: "value", dataSource: n, change: function () { a._range = o, s.exec(a, c, this.value()) }, close: function () { setTimeout(function () { "_range" in a && delete a._range }, 0) }, highlightFirst: !1 }), e.closest(".k-widget").removeClass("k-" + c).find("*").addBack().attr("unselectable", "on"), (r = e.data(this.type)).value("inherit"), r.wrapper.on(m, ".k-select,.k-input", function () { var e = a.getRange(); o = a._containsRange(e) ? e : o }).on("keydown.kendoEditor", function (e) { e.keyCode === t.keys.ENTER && e.preventDefault() }) } }), C = s.extend({ init: function (e) { s.fn.init.call(this, e), this.format = [{ tags: ["span", "font"] }], this.finder = new b(this.format, e.cssAttr) }, options: { palette: "websafe" }, update: function () { this._widget.close() }, command: function (e) { var t = this.options, i = this.format, o = {}; return new n.FormatCommand(u(e, { formatter: function () { return o[t.domAttr] = e.value, new w(i, { style: o }, t.cssAttr) } })) }, initialize: function (e, i) { var n = i.editor, o = this.name, a = u({}, C.fn.options, this.options), l = a.palette; (e = this._widget = new t.ui.ColorPicker(e, { toolIcon: "k-icon k-i-" + r.getToolCssClass(a.name), palette: l, change: function () { var t = e.value(); t && s.exec(n, o, t), n.focus() }, open: function (e) { var t = e.sender; t.value(null), t._popup.element.on(m, p) }, close: function (e) { e.sender._popup.element.off(m) }, activate: function (t) { t.preventDefault(), e.trigger("change") } })).wrapper.attr({ title: i.title, unselectable: "on" }).find("*").attr("unselectable", "on") } }), u(n, { InlineFormatFinder: v, InlineFormatter: _, DelayedExecutionTool: k, GreedyInlineFormatFinder: b, GreedyInlineFormatter: w, InlineFormatTool: y, FontTool: x, ColorTool: C }), f("bold", [{ tags: ["strong", "b"] }, { tags: ["span"], attr: { style: { fontWeight: "bold" } } }]), h("bold", new y({ key: "B", ctrl: !0, format: o.bold, template: new a({ template: r.buttonTemplate, title: "Bold" }) })), f("italic", [{ tags: ["em", "i"] }, { tags: ["span"], attr: { style: { fontStyle: "italic" } } }]), h("italic", new y({ key: "I", ctrl: !0, format: o.italic, template: new a({ template: r.buttonTemplate, title: "Italic" }) })), f("underline", [{ tags: ["span"], attr: { style: { textDecoration: "underline" } } }, { tags: ["u"] }]), h("underline", new y({ key: "U", ctrl: !0, format: o.underline, template: new a({ template: r.buttonTemplate, title: "Underline" }) })), f("strikethrough", [{ tags: ["del", "strike"] }, { tags: ["span"], attr: { style: { textDecoration: "line-through" } } }]), h("strikethrough", new y({ format: o.strikethrough, template: new a({ template: r.buttonTemplate, title: "Strikethrough" }) })), f("superscript", [{ tags: ["sup"] }]), h("superscript", new y({ format: o.superscript, template: new a({ template: r.buttonTemplate, title: "Superscript" }) })), f("subscript", [{ tags: ["sub"] }]), h("subscript", new y({ format: o.subscript, template: new a({ template: r.buttonTemplate, title: "Subscript" }) })), h("foreColor", new C({ cssAttr: "color", domAttr: "color", name: "foreColor", template: new a({ template: r.colorPickerTemplate, title: "Color" }) })), h("backColor", new C({ cssAttr: "background-color", domAttr: "backgroundColor", name: "backColor", template: new a({ template: r.colorPickerTemplate, title: "Background Color" }) })), h("fontName", new x({ cssAttr: "font-family", domAttr: "fontFamily", name: "fontName", defaultValue: [{ text: "fontNameInherit", value: "inherit" }], template: new a({ template: r.comboBoxTemplate, title: "Font Name" }) })), h("fontSize", new x({ cssAttr: "font-size", domAttr: "fontSize", name: "fontSize", defaultValue: [{ text: "fontSizeInherit", value: "inherit" }], template: new a({ template: r.comboBoxTemplate, title: "Font Size" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/formatblock.min", ["editor/inlineformat.min"], function () { e = window.kendo.jQuery, i = window.kendo, n = i.Class, o = e.extend, r = i.ui.editor, s = i.ui.Editor.fn.options.formats, a = r.Dom, l = r.Command, c = r.ToolTemplate, d = r.FormatTool, u = r.EditorUtils, h = u.registerTool, f = u.registerFormat, p = r.RangeUtils, m = n.extend({ init: function (e) { this.format = e }, contains: function (e, t) { var i, n, o; for (i = 0, n = t.length; i < n; i++)if (!(o = t[i]) || !a.isAncestorOrSelf(e, o)) return !1; return !0 }, findSuitable: function (t) { var i, n, o, r, s = this.format, l = []; for (i = 0, n = t.length; i < n; i++) { for (r = s.length - 1; r >= 0 && !(o = a.ofType(t[i], s[r].tags) ? t[i] : a.closestEditableOfType(t[i], s[r].tags)); r--); if (!o || "true" === o.contentEditable) return []; e.inArray(o, l) < 0 && l.push(o) } for (this._resolveListsItems(l), i = 0, n = l.length; i < n; i++)if (this.contains(l[i], l)) return [l[i]]; return l }, _resolveListsItems: function (e) { var t, i, n; for (t = 0; t < e.length; t++)i = e[t], n = (n = a.is(i, "li") ? i : a.wrapper(i)) && a.list(n) ? n.children[0] : n, a.is(n, "li") && (i = e[t] = n) }, findFormat: function (e) { var t, i, n, o, s, l, c = this.format, d = a.editableParent(e), u = this.options && this.options.immutables, h = r.Immutables; for (t = 0, i = c.length; t < i; t++) { if (n = e, o = c[t].tags, s = c[t].attr, u && o && "immutable" == o[0] && ((l = h.immutableParent(n)) && a.attrEquals(l, s))) return n; for (; n && a.isAncestorOf(d, n);) { if (a.ofType(n, o) && a.attrEquals(n, s)) return n; n = n.parentNode } } return null }, getFormat: function (e) { var t, i, n = this, o = function (e) { return n.findFormat(a.isDataNode(e) ? e.parentNode : e) }, r = o(e[0]); if (!r) return ""; for (t = 1, i = e.length; t < i; t++)if (r != o(e[t])) return ""; return r.nodeName.toLowerCase() }, isFormatted: function (e) { for (var t = 0, i = e.length; t < i; t++)if (!this.findFormat(e[t])) return !1; return !0 } }), g = n.extend({ init: function (e, t) { this.format = e, this.values = t, this.finder = new m(e) }, wrap: function (e, t, i) { var n, o, r, s, l, c = 1 == i.length ? a.blockParentOrBody(i[0]) : a.commonAncestor.apply(null, i); for (a.isInline(c) && (c = a.blockParentOrBody(c)), n = a.significantChildNodes(c), o = a.findNodeIndex(n[0]), r = a.create(c.ownerDocument, e, t), s = 0; s < n.length; s++)l = n[s], a.isBlock(l) ? (a.attr(l, t), r.childNodes.length && (a.insertBefore(r, l), r = r.cloneNode(!1)), o = a.findNodeIndex(l) + 1) : r.appendChild(l); r.firstChild && a.insertAt(c, r, o) }, apply: function (t) { function i(e) { return o({}, e && e.attr, p) } var n, r, s, l, c, d, h, f, p = this.values; if (this._handleImmutables(t, !0), r = a.filter("img", t), s = u.formatByName("img", this.format), l = i(s), e.each(r, function () { a.attr(this, l) }), r.length != t.length) if (c = a.filter("img", t, !0), (d = this.finder.findSuitable(c)).length) for (h = 0, f = d.length; h < f; h++)n = u.formatByName(a.name(d[h]), this.format), a.attr(d[h], i(n)); else n = this.format[0], this.wrap(n.tags[0], i(n), c) }, _handleImmutables: function (e, t) { var i, n, o, s, l; if (this.immutables() && (i = u.formatByName("immutable", this.format))) for (n = r.Immutables, o = e.length - 1, s = o; s >= 0; s--)(l = n.immutableParent(e[s])) && (l !== e[s + 1] && (t ? a.attr(l, i.attr) : a.unstyle(l, i.attr.style)), e.splice(s, 1)) }, immutables: function () { return this.editor && this.editor.options.immutables }, remove: function (e) { var t, i, n, o, r; for (this._handleImmutables(e, !1), t = 0, i = e.length; t < i; t++)(n = this.finder.findFormat(e[t])) && ("div" != (r = a.name(n)) || n.getAttribute("class") ? ((o = u.formatByName(r, this.format)).attr.style && a.unstyle(n, o.attr.style), o.attr.className && a.removeClass(n, o.attr.className)) : a.unwrap(n)) }, toggle: function (e) { var t = this, i = a.filterBy(p.nodes(e), a.htmlIndentSpace, !0); t.finder.isFormatted(i) ? t.remove(i) : t.apply(i) } }), v = n.extend({ init: function (e, t) { var i = this; i.format = e, i.values = t, i.finder = new m(e) }, apply: function (e) { var t, i, n, o, s, l, c, d, u, h = this.format, f = a.blockParents(e), p = h[0].tags[0]; if (f.length) for (t = 0, i = f.length; t < i; t++)d = f[t], this.immutables() && r.Immutables.immutableParent(d) || ("li" == (c = a.name(d)) ? (n = d.parentNode, o = new r.ListFormatter(n.nodeName.toLowerCase(), p), (s = this.editor.createRange()).selectNode(f[t]), o.toggle(s)) : p && ("td" == c || d.attributes.contentEditable) ? new g(h, this.values).apply(d.childNodes) : (l = a.changeTag(d, p), a.attr(l, h[0].attr))); else (u = new g(h, this.values)).editor = this.editor, u.apply(e) }, toggle: function (e) { var t = p.textNodes(e); t.length || (e.selectNodeContents(e.commonAncestorContainer), (t = p.textNodes(e)).length || (t = a.significantChildNodes(e.commonAncestorContainer))), this.apply(t) }, immutables: function () { return this.editor && this.editor.options.immutables } }), _ = l.extend({ init: function (e) { e.formatter = e.formatter(); var t = e.formatter.finder; t && u.formatByName("immutable", t.format) && t._initOptions({ immutables: e.immutables }), l.fn.init.call(this, e) } }), b = d.extend({ init: function (e) { d.fn.init.call(this, o(e, { finder: new m(e.format), formatter: function () { return new g(e.format) } })) } }), o(r, { BlockFormatFinder: m, BlockFormatter: g, GreedyBlockFormatter: v, FormatCommand: _, BlockFormatTool: b }), t = ["ul", "ol", "li"], f("justifyLeft", [{ tags: a.nonListBlockElements, attr: { style: { textAlign: "left" } } }, { tags: ["img"], attr: { style: { float: "left", display: "", marginLeft: "", marginRight: "" } } }, { tags: ["immutable"], attr: { style: { float: "left", display: "", marginLeft: "", marginRight: "" } } }, { tags: t, attr: { style: { textAlign: "left", listStylePosition: "" } } }]), h("justifyLeft", new b({ format: s.justifyLeft, template: new c({ template: u.buttonTemplate, title: "Justify Left" }) })), f("justifyCenter", [{ tags: a.nonListBlockElements, attr: { style: { textAlign: "center" } } }, { tags: ["img"], attr: { style: { display: "block", marginLeft: "auto", marginRight: "auto", float: "" } } }, { tags: ["immutable"], attr: { style: { display: "block", marginLeft: "auto", marginRight: "auto", float: "" } } }, { tags: t, attr: { style: { textAlign: "center", listStylePosition: "inside" } } }]), h("justifyCenter", new b({ format: s.justifyCenter, template: new c({ template: u.buttonTemplate, title: "Justify Center" }) })), f("justifyRight", [{ tags: a.nonListBlockElements, attr: { style: { textAlign: "right" } } }, { tags: ["img"], attr: { style: { float: "right", display: "", marginLeft: "", marginRight: "" } } }, { tags: ["immutable"], attr: { style: { float: "right", display: "", marginLeft: "", marginRight: "" } } }, { tags: t, attr: { style: { textAlign: "right", listStylePosition: "inside" } } }]), h("justifyRight", new b({ format: s.justifyRight, template: new c({ template: u.buttonTemplate, title: "Justify Right" }) })), f("justifyFull", [{ tags: a.nonListBlockElements, attr: { style: { textAlign: "justify" } } }, { tags: ["img"], attr: { style: { display: "block", marginLeft: "auto", marginRight: "auto", float: "" } } }, { tags: ["immutable"], attr: { style: { display: "block", marginLeft: "auto", marginRight: "auto", float: "" } } }, { tags: t, attr: { style: { textAlign: "justify", listStylePosition: "" } } }]), h("justifyFull", new b({ format: s.justifyFull, template: new c({ template: u.buttonTemplate, title: "Justify Full" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/linebreak.min", ["editor/formatblock.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = e.extend, n = t.ui.editor, o = n.Dom, r = n.Command, s = n.Tool, a = n.BlockFormatter, l = o.normalize, c = n.RangeUtils, d = n.EditorUtils.registerTool, u = r.extend({ init: function (e) { this.options = e, r.fn.init.call(this, e) }, _insertMarker: function (e, t) { var i, n = o.create(e, "a"); return n.className = "k-marker", t.insertNode(n), n.parentNode || ((i = t.commonAncestorContainer).innerHTML = "", i.appendChild(n)), l(n.parentNode), n }, _moveFocus: function (e, t) { if (o.isEmpty(t)) e.setStartBefore(t); else { e.selectNodeContents(t); var i = c.textNodes(e)[0]; if (!i) { for (; t.childNodes.length && !o.is(t.firstChild, "br");)t = t.firstChild; i = t } o.isEmpty(i) ? e.setStartBefore(i) : (o.emptyNode(i) && (i.innerHTML = "\ufeff"), e.setStartBefore(i.firstChild || i)) } }, shouldTrim: function (e) { var t = "p,h1,h2,h3,h4,h5,h6".split(","), i = o.parentOfType(e.startContainer, t), n = o.parentOfType(e.endContainer, t); return i && !n || !i && n }, _blankAfter: function (e) { for (; e && (o.isMarker(e) || "" === o.stripBom(e.nodeValue));)e = e.nextSibling; return !e }, exec: function () { var t, i, r, s, d, u, h, f, p, m, g, v, _, b = this.getRange(), w = c.documentFromRange(b), y = n.emptyElementContent; this.expandImmutablesIn(b), p = this.shouldTrim(b), b.deleteContents(), d = this._insertMarker(w, b), o.stripBomNode(d.previousSibling), o.stripBomNode(d.nextSibling), u = o.closestEditableOfType(d, ["li"]), h = o.closestEditableOfType(d, "h1,h2,h3,h4,h5,h6".split(",")), u ? o.emptyNode(u) && (s = o.create(w, "p"), o.next(u) && ((f = b.cloneRange()).selectNode(u), c.split(f, u.parentNode)), 1 == (m = e("br", u)).length && m.remove(), g = u.parentNode, v = u.parentNode.children.length, _ = v > 1 && 1 == u.childNodes.length && u.children[0], o.insertAfter(s, g), o.remove(1 == v ? u.parentNode : u), _ && _ !== d ? (s.appendChild(_), s.appendChild(d)) : s.innerHTML = y, r = s) : h && this._blankAfter(d) && (s = o.create(w, "p"), o.insertAfter(s, h), s.innerHTML = y, o.remove(d), r = s), r || (u || h || new a([{ tags: ["p"] }]).apply([d]), b.selectNode(d), t = o.parentOfType(d, [u ? "li" : h ? o.name(h) : "p"]), c.split(b, t, p), i = t.previousSibling, o.is(i, "li") && i.firstChild && !o.is(i.firstChild, "br") && (i = i.firstChild), r = t.nextSibling, this.clean(i), this.clean(r, { links: !0 }), o.is(r, "li") && r.firstChild && !o.is(r.firstChild, "br") && (r = r.firstChild), o.remove(t), l(i)), l(r), this._moveFocus(b, r), b.collapse(!0), o.scrollTo(r), c.selectRange(b) }, clean: function (t, i) { var r, s = t; if (t.firstChild && o.is(t.firstChild, "br") && o.remove(t.firstChild), o.isDataNode(t) && !t.nodeValue && (t = t.parentNode), t) { for (r = !1; t.firstChild && 1 == t.firstChild.nodeType;)r = r || o.significantNodes(t.childNodes).length > 1, t = t.firstChild; if (o.isEmpty(t) || !/^\s*$/.test(t.innerHTML) || r || (e(s).find(".k-br").remove(), t.innerHTML = n.emptyElementContent), i && i.links) for (; t != s;) { if (o.is(t, "a") && o.emptyNode(t)) { o.unwrap(t); break } t = t.parentNode } } } }), h = r.extend({ init: function (e) { this.options = e, r.fn.init.call(this, e) }, exec: function () { var e, i, n, r, s = this.getRange(); this.expandImmutablesIn(s), e = o.create(c.documentFromRange(s), "br"), n = t.support.browser, r = n.msie && n.version < 11, s.deleteContents(), s.insertNode(e), l(e.parentNode), r || e.nextSibling && !o.isWhitespace(e.nextSibling) || ((i = e.cloneNode(!0)).className = "k-br", o.insertAfter(i, e)), s.setStartAfter(e), s.collapse(!0), o.scrollTo(e.nextSibling || e), c.selectRange(s) } }), i(n, { ParagraphCommand: u, NewLineCommand: h }), d("insertLineBreak", new s({ key: 13, shift: !0, command: h })), d("insertParagraph", new s({ key: 13, command: u })); var e, t, i, n, o, r, s, a, l, c, d, u, h }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/lists.min", ["editor/linebreak.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = t.Class, n = e.extend, o = t.ui.editor, r = o.Dom, s = o.RangeUtils, a = o.EditorUtils, l = o.Command, c = o.ToolTemplate, d = o.FormatTool, u = o.BlockFormatFinder, h = s.textNodes, f = o.EditorUtils.registerTool, p = u.extend({ init: function (e) { this.tag = e; var t = this.tags = ["ul" == e ? "ol" : "ul", e]; u.fn.init.call(this, [{ tags: t }]) }, isFormatted: function (e) { var t, i, n = []; for (i = 0; i < e.length; i++)(t = this.findFormat(e[i])) && r.name(t) == this.tag && n.push(t); if (n.length < 1) return !1; if (n.length != e.length) return !1; for (i = 0; i < n.length && n[i].parentNode == t.parentNode; i++)if (n[i] != t) return !1; return !0 }, findSuitable: function (e) { var t = this.findFormat(e[0]); return t && r.name(t) == this.tag ? t : null } }), m = i.extend({ init: function (e, t) { var i = this; i.finder = new p(e), i.tag = e, i.unwrapTag = t }, isList: function (e) { return r.list(e) }, immutables: function () { return this.editor && !!this.editor.options.immutables }, wrap: function (t, i) { var n, s, a = r.create(t.ownerDocument, "li"), l = this.immutables() ? o.Immutables.immutable : e.noop; for (n = 0; n < i.length; n++)if (s = i[n], r.is(s, "li")) t.appendChild(s); else if (this.isList(s)) for (; s.firstChild;)t.appendChild(s.firstChild); else if (r.is(s, "td")) { for (; s.firstChild;)a.appendChild(s.firstChild); t.appendChild(a), s.appendChild(t), t = t.cloneNode(!1), a = a.cloneNode(!1) } else a.appendChild(s), r.isBlock(s) && (t.appendChild(a), l(s) || r.unwrap(s), a = a.cloneNode(!1)); a.firstChild && t.appendChild(a) }, containsAny: function (e, t) { for (var i = 0; i < t.length; i++)if (r.isAncestorOrSelf(e, t[i])) return !0; return !1 }, suitable: function (e, t) { if ("k-marker" == e.className) { var i = e.nextSibling; if (i && r.isBlock(i)) return !1; if ((i = e.previousSibling) && r.isBlock(i)) return !1 } return this.containsAny(e, t) || r.isInline(e) || 3 == e.nodeType }, _parentLists: function (t) { var i = r.closestEditable(t); return e(t).parentsUntil(i, "ul,ol") }, split: function (e) { var t, i, n, o, a, l, c = h(e); if (c.length) for (t = r.parentOfType(c[0], ["li"]), i = r.parentOfType(c[c.length - 1], ["li"]), e.setStartBefore(t), e.setEndAfter(i), o = 0, a = c.length; o < a; o++)(l = this.finder.findFormat(c[o])) && ((n = this._parentLists(l)).length ? s.split(e, n.last()[0], !0) : s.split(e, l, !0)) }, merge: function (e, t) { for (var i, n = t.previousSibling; n && ("k-marker" == n.className || 3 == n.nodeType && r.isWhitespace(n));)n = n.previousSibling; if (n && r.name(n) == e) { for (; t.firstChild;)n.appendChild(t.firstChild); r.remove(t), t = n } for (i = t.nextSibling; i && ("k-marker" == i.className || 3 == i.nodeType && r.isWhitespace(i));)i = i.nextSibling; if (i && r.name(i) == e) { for (; t.lastChild;)i.insertBefore(t.lastChild, i.firstChild); r.remove(t) } }, breakable: function (e) { return e != e.ownerDocument.body && !/table|tbody|tr|td/.test(r.name(e)) && !e.attributes.contentEditable }, applyOnSection: function (t, i) { function n() { d.push(this) } var o, s, a, l = this.tag, c = r.closestSplittableParent(i), d = [], u = this.finder.findSuitable(i); for (u || (u = new p("ul" == l ? "ol" : "ul").findSuitable(i)), /table|tbody/.test(r.name(c)) ? o = e.map(i, function (e) { return r.parentOfType(e, ["td"]) }) : (o = r.significantChildNodes(c), e.grep(o, r.isBlock).length && (o = e.grep(o, e.proxy(function (e) { return this.containsAny(e, i) }, this))), o.length || (o = i)), s = 0; s < o.length; s++)a = o[s], (!u || !r.isAncestorOrSelf(u, a)) && this.suitable(a, i) && (u && this.isList(a) ? (e.each(a.children, n), r.remove(a)) : d.push(a)); for (d.length == o.length && this.breakable(c) && (d = [c]), u || (u = r.create(c.ownerDocument, l), r.insertBefore(u, d[0])), this.wrap(u, d); r.isBom(u.nextSibling);)r.remove(u.nextSibling); r.is(u, l) || r.changeTag(u, l), this.merge(l, u) }, apply: function (t) { function i() { n && d.push({ section: n, nodes: s }) } var n, s, a, l, c = 0, d = [], u = t.length, h = this.immutables() ? o.Immutables.immutableParent : e.noop; for (c = 0; c < u; c++)l = h(t[c]) || t[c], a = r.closestEditable(l, ["td", "body"]), n && a == n ? s.push(l) : (i(), s = [l], n = a); for (i(), c = 0; c < d.length; c++)this.applyOnSection(d[c].section, d[c].nodes) }, unwrap: function (e) { var t, i, n, o, s = e.ownerDocument.createDocumentFragment(), a = this.unwrapTag; for (i = e.firstChild; i; i = i.nextSibling) { for (n = r.create(e.ownerDocument, a || "p"); i.firstChild;)o = i.firstChild, r.isBlock(o) ? (n.firstChild && (s.appendChild(n), n = r.create(e.ownerDocument, a || "p")), s.appendChild(o)) : n.appendChild(o); n.firstChild && s.appendChild(n) } (t = this._parentLists(e))[0] ? (r.insertAfter(s, t.last()[0]), t.last().remove()) : r.insertAfter(s, e), r.remove(e) }, remove: function (e) { var t, i, n; for (i = 0, n = e.length; i < n; i++)(t = this.finder.findFormat(e[i])) && this.unwrap(t) }, toggle: function (e) { var t, i = this, n = h(e), o = e.commonAncestorContainer; n.length || (e.selectNodeContents(o), (n = h(e)).length || (t = o.ownerDocument.createTextNode(""), e.startContainer.appendChild(t), n = [t], e.selectNode(t.parentNode))), n = r.filterBy(n, r.htmlIndentSpace, !0), i.finder.isFormatted(n) ? (i.split(e), i.remove(n)) : i.apply(n) } }), g = l.extend({ init: function (e) { e.formatter = new m(e.tag), l.fn.init.call(this, e) } }), v = d.extend({ init: function (e) { this.options = e, d.fn.init.call(this, n(e, { finder: new p(e.tag) })) }, command: function (e) { return new g(n(e, { tag: this.options.tag })) } }), n(o, { ListFormatFinder: p, ListFormatter: m, ListCommand: g, ListTool: v }), f("insertUnorderedList", new v({ tag: "ul", template: new c({ template: a.buttonTemplate, title: "Insert unordered list" }) })), f("insertOrderedList", new v({ tag: "ol", template: new c({ template: a.buttonTemplate, title: "Insert ordered list" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/link.min", ["editor/lists.min"], function () { !function (e, t) { function i(e, t) { for (var i = e.length; i-- && !t.test(e[i]);); return i } var n = window.kendo, o = n.Class, r = e.extend, s = e.proxy, a = n.ui.editor, l = a.Dom, c = a.RangeUtils, d = a.EditorUtils, u = a.Command, h = a.Tool, f = a.ToolTemplate, p = a.InlineFormatter, m = a.InlineFormatFinder, g = c.textNodes, v = c.editableTextNodes, _ = a.EditorUtils.registerTool, b = n.keys, w = "http://", y = /^\w*:\/\//, k = /[\w\/\$\-_\*\?]/i, x = o.extend({ findSuitable: function (e) { return l.parentOfType(e, ["a"]) } }), C = o.extend({ init: function () { this.finder = new x }, apply: function (e, t) { var i, n, o, r, s, a, d, u = this.immutables ? v(e) : g(e); if (t.innerHTML) { for (n = c.documentFromRange(e), i = c.getMarkers(e), e.deleteContents(), r = l.create(n, "a", t), e.insertNode(r), s = r.parentNode, "a" == l.name(s) && l.insertAfter(r, s), l.emptyNode(s) && l.remove(s), a = r, d = 0; d < i.length; d++)l.insertAfter(i[d], a), a = i[d]; i.length && (l.insertBefore(n.createTextNode("\ufeff"), i[1]), l.insertAfter(n.createTextNode("\ufeff"), i[1]), e.setStartBefore(i[0]), e.setEndAfter(i[i.length - 1])) } else (o = new p([{ tags: ["a"] }], t)).finder = this.finder, o.apply(u) } }), S = u.extend({ init: function (e) { var t = this; e.formatter = { toggle: function (e) { var i = t.immutables() ? v(e) : g(e); new p([{ tags: ["a"] }]).remove(i) } }, this.options = e, u.fn.init.call(this, e) } }), T = u.extend({ init: function (e) { var t; this.options = e, u.fn.init.call(this, e), this.formatter = new C, e.url ? this.exec = function () { this.formatter.immutables = t, this.formatter.apply(e.range, { href: e.url, innerHTML: e.text || e.url, target: e.target }) } : (this.attributes = null, this.async = !0) }, _dialogTemplate: function () { return n.template("<div class=\"k-editor-dialog k-popup-edit-form\"><div class=\"k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div></div>")({ messages: this.editor.options.messages }) }, exec: function () { var t, i, n, o, r = this.editor.options.messages; this._initialText = "", this._range = this.lockRange(!0), this.formatter.immutables = this.immutables(), t = g(this._range), i = t.length ? this.formatter.finder.findSuitable(t[0]) : null, n = t.length && "img" == l.name(t[0]), o = this.createDialog(this._dialogTemplate(), { title: r.createLink, close: s(this._close, this), visible: !1 }), i && (this._range.selectNodeContents(i), t = g(this._range)), this._initialText = this.linkText(t), o.find(".k-dialog-insert").click(s(this._apply, this)).end().find(".k-dialog-close").click(s(this._close, this)).end().find(".k-edit-field input").keydown(s(this._keydown, this)).end().find("#k-editor-link-url").val(this.linkUrl(i)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(i ? i.title : "").end().find("#k-editor-link-target").attr("checked", !!i && "_blank" == i.target).end().find(".k-editor-link-text-row").toggle(!n), this._dialog = o.data("kendoWindow").center().open(), e("#k-editor-link-url", o).focus().select() }, _keydown: function (e) { var t = n.keys; e.keyCode == t.ENTER ? this._apply(e) : e.keyCode == t.ESC && this._close(e) }, _apply: function (t) { var i, n, o, r = this._dialog.element, s = e("#k-editor-link-url", r).val(), a = e("#k-editor-link-text", r); s && s != w && (s.indexOf("@") > 0 && !/^(\w+:)|(\/\/)/i.test(s) && (s = "mailto:" + s), this.attributes = { href: s }, (i = e("#k-editor-link-title", r).val()) && (this.attributes.title = i), a.is(":visible") && ((n = a.val()) || this._initialText ? n && n !== this._initialText && (this.attributes.innerHTML = l.stripBom(n)) : this.attributes.innerHTML = s), o = e("#k-editor-link-target", r).is(":checked"), this.attributes.target = o ? "_blank" : null, this.formatter.apply(this._range, this.attributes)), this._close(t), this.change && this.change() }, _close: function (e) { e.preventDefault(), this._dialog.destroy(), l.windowFromDocument(c.documentFromRange(this._range)).focus(), this.releaseRange(this._range) }, linkUrl: function (e) { return e ? e.getAttribute("href", 2) : w }, linkText: function (e) { var t, i = ""; for (t = 0; t < e.length; t++)i += e[t].nodeValue; return l.stripBom(i || "") }, redo: function () { var e = this.lockRange(!0); this.formatter.apply(e, this.attributes), this.releaseRange(e) } }), D = u.extend({ init: function (e) { u.fn.init.call(this, e), this.formatter = new C }, exec: function () { var e, t, i, o = this.detectLink(); o && (e = this.getRange(), t = new n.ui.editor.Marker, (i = e.cloneRange()).setStart(o.start.node, o.start.offset), i.setEnd(o.end.node, o.end.offset), e = this.lockRange(), t.add(i), this.formatter.apply(i, { href: this._ensureWebProtocol(o.text) }), t.remove(i), this.releaseRange(e)) }, detectLink: function () { var e = this.getRange(), t = new R({ node: e.startContainer, offset: e.startOffset, cancelAtNode: function (e) { return e && "a" === l.name(e) } }), i = new E(t); return i.detectLink() }, changesContent: function () { return !!this.detectLink() }, _ensureWebProtocol: function (e) { var t = this._hasProtocolPrefix(e); return t ? e : this._prefixWithWebProtocol(e) }, _hasProtocolPrefix: function (e) { return y.test(e) }, _prefixWithWebProtocol: function (e) { return w + e } }), A = h.extend({ init: function (t) { this.options = t, this.finder = new m([{ tags: ["a"] }]), h.fn.init.call(this, e.extend(t, { command: S })) }, initialize: function (e, t) { h.fn.initialize.call(this, e, t), e.addClass("k-state-disabled") }, update: function (e, t) { e.toggleClass("k-state-disabled", !this.finder.isFormatted(t)).removeClass("k-state-hover") } }), E = o.extend({ init: function (e) { this.traverser = e, this.start = I(), this.end = I(), this.text = "" }, detectLink: function () { var t, i, n, o = this.traverser.node, r = this.traverser.offset; if (l.isDataNode(o)) { if (t = o.data.substring(0, r), /\s{2}$/.test(l.stripBom(t))) return } else 0 === r && ((i = l.closestEditableOfType(o, l.blockElements)) && i.previousSibling && this.traverser.init({ node: i.previousSibling })); return this.traverser.traverse(e.proxy(this._detectEnd, this)), this.end.blank() || (this.traverser = this.traverser.clone(this.end), this.traverser.traverse(e.proxy(this._detectStart, this)), this._isLinkDetected() || (n = this.traverser.extendOptions(this.start), new F(n).traverse(e.proxy(this._skipStartPuntuation, this)), this._isLinkDetected() || (this.start = I()))), this.start.blank() ? null : { start: this.start, end: this.end, text: this.text } }, _isLinkDetected: function () { return y.test(this.text) || /^w{3}\./i.test(this.text) }, _detectEnd: function (e, t) { var n = i(e, k); if (n > -1) return this.end.node = t, this.end.offset = n + 1, !1 }, _detectStart: function (e, t) { var n = i(e, /\s/), o = n + 1; if (this.text = e.substring(o) + this.text, this.start.node = t, this.start.offset = o, n > -1) return !1 }, _skipStartPuntuation: function (e, t, i) { var n = function (e, t) { var i = t.exec(e); return i ? i.index : -1 }(e, /\w/), o = n; if (-1 === n && (o = e.length), this.text = this.text.substring(o), this.start.node = t, this.start.offset = o + (0 | i), n > -1) return !1 } }), I = function () { return { node: null, offset: null, blank: function () { return null === this.node && null === this.offset } } }, M = o.extend({ init: function (i) { this.node = i.node, this.offset = i.offset === t ? l.isDataNode(this.node) && this.node.length || 0 : i.offset, this.cancelAtNode = i.cancelAtNode || this.cancelAtNode || e.noop }, traverse: function (e) { e && (this.cancel = !1, this._traverse(e, this.node, this.offset)) }, _traverse: function (e, i, n) { var o, r, s, a; if (i && !this.cancel) { if (3 !== i.nodeType) return r = this.edgeNode(i), this.cancel = this.cancel || this.cancelAtNode(r), this._traverse(e, r); if (o = i.data, n !== t && (o = this.subText(o, n)), this.cancel = !1 === e(o, i, n), !(s = this.next(i))) for (a = i.parentNode; !s && l.isInline(a);)s = this.next(a), a = a.parentNode; this.cancel = this.cancel || this.cancelAtNode(s), this._traverse(e, s) } }, extendOptions: function (t) { return e.extend({ node: this.node, offset: this.offset, cancelAtNode: this.cancelAtNode }, t || {}) }, edgeNode: function (e) { }, next: function (e) { }, subText: function (e, t) { } }), R = M.extend({ subText: function (e, t) { return e.substring(0, t) }, next: function (e) { return e.previousSibling }, edgeNode: function (e) { return e.lastChild }, clone: function (e) { var t = this.extendOptions(e); return new R(t) } }), F = M.extend({ subText: function (e, t) { return e.substring(t) }, next: function (e) { return e.nextSibling }, edgeNode: function (e) { return e.firstChild }, clone: function (e) { var t = this.extendOptions(e); return new F(t) } }); r(n.ui.editor, { LinkFormatFinder: x, LinkFormatter: C, UnlinkCommand: S, LinkCommand: T, AutoLinkCommand: D, UnlinkTool: A, DomTextLinkDetection: E, LeftDomTextTraverser: R, RightDomTextTraverser: F }), _("createLink", new h({ key: "K", ctrl: !0, command: T, template: new f({ template: d.buttonTemplate, title: "Create Link" }) })), _("unlink", new A({ key: "K", ctrl: !0, shift: !0, template: new f({ template: d.buttonTemplate, title: "Remove Link" }) })), _("autoLink", new h({ key: [b.ENTER, b.SPACEBAR], keyPressCommand: !0, command: D })) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/file.min", ["kendo.filebrowser.min", "editor/link.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = e.extend, n = t.ui.editor, o = n.EditorUtils, r = n.Dom, s = o.registerTool, a = n.ToolTemplate, l = n.RangeUtils, c = n.Command, d = n.LinkFormatter, u = l.textNodes, h = t.keys, f = "#k-editor-file-url", p = "#k-editor-file-text", m = "#k-editor-file-title", g = c.extend({ init: function (e) { var t = this; c.fn.init.call(t, e), t.formatter = new d, t.async = !0, t.attributes = {} }, insertFile: function (e, t) { var i = this.attributes, n = l.documentFromRange(t); if (i.href && "http://" != i.href) { if (!e) return (e = r.create(n, "a", { href: i.href })).innerHTML = i.innerHTML, e.title = i.title, t.deleteContents(), t.insertNode(e), e.nextSibling || r.insertAfter(n.createTextNode("\ufeff"), e), t.setStartAfter(e), t.setEndAfter(e), l.selectRange(t), !0; r.attr(e, i) } return !1 }, _dialogTemplate: function (e) { return t.template('<div class="k-editor-dialog k-popup-edit-form"><div class="k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-text">#: messages.fileText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-text"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div></div>')({ messages: this.editor.options.messages, showBrowser: e }) }, redo: function () { var e = this.lockRange(); this.formatter.apply(e, this.attributes), this.releaseRange(e) }, exec: function () { function e(e) { var t = o.element, i = t.find(f).val().replace(/ /g, "%20"), r = t.find(p).val(), l = t.find(m).val(); s.attributes = { href: i, innerHTML: "" !== r ? r : i, title: l }, d = s.insertFile(g, a), n(e), s.change && s.change() } function n(e) { e.preventDefault(), o.destroy(), r.windowFromDocument(l.documentFromRange(a)).focus(), d || s.releaseRange(a) } var o, s = this, a = s.lockRange(), c = u(a), d = !1, g = c.length ? this.formatter.finder.findSuitable(c[0]) : null, v = s.editor.options, _ = v.messages, b = v.fileBrowser, w = !!(t.ui.FileBrowser && b && b.transport && void 0 !== b.transport.read), y = { title: _.insertFile, visible: !1, resizable: w }; this.expandImmutablesIn(a), y.close = n, w && (y.width = 750), o = this.createDialog(s._dialogTemplate(w), y).toggleClass("k-filebrowser-dialog", w).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(n).end().find(".k-edit-field input").keydown(function (t) { t.keyCode == h.ENTER ? e(t) : t.keyCode == h.ESC && n(t) }).end().find(f).val(g ? g.getAttribute("href", 2) : "http://").end().find(p).val(g ? g.innerText : "").end().find(m).val(g ? g.title : "").end().data("kendoWindow"), w && (s._fileBrowser = new t.ui.FileBrowser(o.element.find(".k-filebrowser"), i({}, b)), s._fileBrowser.bind("change", function (e) { "f" === e.selected.get("type") && o.element.find(f).val(this.value()) }), s._fileBrowser.bind("apply", e)), o.center().open(), o.element.find(f).focus().select() } }), t.ui.editor.FileCommand = g, s("insertFile", new n.Tool({ command: g, template: new a({ template: o.buttonTemplate, title: "Insert File" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/image.min", ["kendo.imagebrowser.min", "editor/link.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = e.extend, n = t.ui.editor, o = n.EditorUtils, r = n.Dom, s = o.registerTool, a = n.ToolTemplate, l = n.RangeUtils, c = n.Command, d = t.keys, u = "#k-editor-image-url", h = "#k-editor-image-title", f = "#k-editor-image-width", p = "#k-editor-image-height", m = c.extend({ init: function (e) { var t = this; c.fn.init.call(t, e), t.async = !0, t.attributes = {} }, insertImage: function (e, t) { var i, n = this.attributes, o = l.documentFromRange(t); if (n.src && "http://" != n.src) { if (i = function () { setTimeout(function () { n.width || e.removeAttribute("width"), n.height || e.removeAttribute("height"), e.removeAttribute("complete") }) }, !e) return (e = r.create(o, "img", n)).onload = e.onerror = i, t.deleteContents(), t.insertNode(e), e.nextSibling || r.insertAfter(o.createTextNode("\ufeff"), e), i(), t.setStartAfter(e), t.setEndAfter(e), l.selectRange(t), !0; e.onload = e.onerror = i, r.attr(e, n), i() } return !1 }, _dialogTemplate: function (e) { return t.template('<div class="k-editor-dialog k-popup-edit-form"><div class="k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div></div>')({ messages: this.editor.options.messages, showBrowser: e }) }, redo: function () { var e = this, t = e.lockRange(); e.insertImage(l.image(t), t) || e.releaseRange(t) }, exec: function () { function e(e) { var t = o.element, i = parseInt(t.find(f).val(), 10), r = parseInt(t.find(p).val(), 10); s.attributes = { src: t.find(u).val().replace(/ /g, "%20"), alt: t.find(h).val() }, s.attributes.width = null, s.attributes.height = null, !isNaN(i) && i > 0 && (s.attributes.width = i), !isNaN(r) && r > 0 && (s.attributes.height = r), c = s.insertImage(m, a), n(e), s.change && s.change() } function n(e) { e.preventDefault(), o.destroy(), r.windowFromDocument(l.documentFromRange(a)).focus(), c || s.releaseRange(a) } var o, s = this, a = s.lockRange(), c = !1, m = l.image(a), g = m && m.getAttribute("width") || "", v = m && m.getAttribute("height") || "", _ = s.editor.options, b = _.messages, w = _.imageBrowser, y = !!(t.ui.ImageBrowser && w && w.transport && void 0 !== w.transport.read), k = { title: b.insertImage, visible: !1, resizable: y }; this.expandImmutablesIn(a), k.close = n, y && (k.width = 750), o = this.createDialog(s._dialogTemplate(y), k).toggleClass("k-filebrowser-dialog", y).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(n).end().find(".k-edit-field input").keydown(function (t) { t.keyCode == d.ENTER ? e(t) : t.keyCode == d.ESC && n(t) }).end().find(u).val(m ? m.getAttribute("src", 2) : "http://").end().find(h).val(m ? m.alt : "").end().find(f).val(g).end().find(p).val(v).end().data("kendoWindow"), y && (this._imageBrowser = new t.ui.ImageBrowser(o.element.find(".k-imagebrowser"), i({}, w)), this._imageBrowser.bind("change", function (e) { "f" === e.selected.get("type") && o.element.find(u).val(this.value()) }), this._imageBrowser.bind("apply", e)), o.center().open(), o.element.find(u).focus().select() } }), t.ui.editor.ImageCommand = m, s("insertImage", new n.Tool({ command: m, template: new a({ template: o.buttonTemplate, title: "Insert Image" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/components.min", ["editor/image.min"], function () { e = window.kendo.jQuery, i = window.kendo, n = i.ui.DropDownList, o = i.ui.editor.Dom, r = n.extend({ init: function (t, o) { var r = this; n.fn.init.call(r, t, o), i.support.mobileOS.ios && (this._initSelectOverlay(), this.bind("dataBound", e.proxy(this._initSelectOverlay, this))), r.text(r.options.title), r.bind("open", function () { if (r.options.autoSize) { var e, t = r.list; t.css({ whiteSpace: "nowrap", width: "auto" }), (e = t.width()) ? e += 20 : e = r._listWidth, t.css("width", e + i.support.scrollbar()), r._listWidth = e } }) }, options: { name: "SelectBox", index: -1 }, _initSelectOverlay: function () { var t, n, o, r, s = this, a = s.value(), l = this.dataSource.view(), c = "", d = i.htmlEncode; for (n = 0; n < l.length; n++)t = l[n], c += "<option value='" + d(t.value) + "'", t.value == a && (c += " selected"), c += ">" + d(t.text) + "</option>"; o = e("<select class='k-select-overlay'>" + c + "</select>"), (r = e(this.element).closest(".k-widget")).next(".k-select-overlay").remove(), o.insertAfter(r), o.on("change", function () { s.value(this.value), s.trigger("change") }) }, value: function (e) { var i = this, o = n.fn.value.call(i, e); return e === t ? o : (n.fn.value.call(i) || i.text(i.options.title), t) }, decorate: function (t) { var i, n, r, s, a = this.dataSource, l = a.data(); for (t && this.list.css("background-color", o.getEffectiveBackground(e(t))), i = 0; i < l.length; i++)n = l[i].tag || "span", r = l[i].className, s = (s = o.inlineStyle(t, n, { className: r })).replace(/"/g, "'"), l[i].style = s + ";display:inline-block"; a.trigger("change") } }), i.ui.plugin(r), i.ui.editor.SelectBox = r; var e, t, i, n, o, r }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/indent.min", ["editor/components.min"], function () { !function (e, t) { function i(i, n) { var o = "rtl" == e(i).css("direction"), r = o ? "Right" : "Left", s = "td" != a.name(i) ? "margin" + r : "padding" + r; return n === t ? i.style[s] || 0 : (n > 0 ? i.style[s] = n + "px" : (i.style[s] = "", i.style.cssText || i.removeAttribute("style")), t) } var n = window.kendo, o = n.Class, r = e.extend, s = n.ui.editor, a = s.Dom, l = s.EditorUtils, c = l.registerTool, d = s.Command, u = s.Tool, h = s.ToolTemplate, f = s.RangeUtils, p = a.blockElements, m = s.BlockFormatFinder, g = s.BlockFormatter, v = o.extend({ init: function () { this.finder = new m([{ tags: a.blockElements }]) }, apply: function (t) { var n, o, r, s, l, c, d, u, h, f, p; if (t = a.filterBy(t, a.htmlIndentSpace, !0), n = this.finder.findSuitable(t), o = [], (n = this.mapImmutables(n)).length) { for (r = 0, s = n.length; r < s; r++)a.is(n[r], "li") ? e(n[r]).index() ? e.inArray(n[r].parentNode, o) < 0 && o.push(n[r]) : o.push(n[r].parentNode) : o.push(n[r]); for (; o.length;)if (l = o.shift(), a.is(l, "li")) if (c = l.parentNode, d = e(l).prev("li"), u = d.find("ul,ol").last(), (h = e(l).children("ul,ol")[0]) && d[0]) u[0] ? (u.append(l), u.append(e(h).children()), a.remove(h)) : (d.append(h), h.insertBefore(l, h.firstChild)); else for ((h = d.children("ul,ol")[0]) || (h = a.create(l.ownerDocument, a.name(c)), d.append(h)); l && l.parentNode == c;)h.appendChild(l), l = o.shift(); else for (f = parseInt(i(l), 10) + 30, i(l, f), p = 0; p < o.length; p++)e.contains(l, o[p]) && o.splice(p, 1) } else new g([{ tags: ["p"] }], { style: { marginLeft: 30 } }).apply(t) }, mapImmutables: function (t) { if (this.immutables) { var i = []; return e.map(t, function (t) { var n = s.Immutables.immutableParent(t); if (n) { if (-1 !== e.inArray(n, i)) return null; i.push(n) } return n || t }) } return t }, remove: function (t) { t = a.filterBy(t, a.htmlIndentSpace, !0); var n, o, r, s, l, c, d, u, h = this.finder.findSuitable(t); for (h = this.mapImmutables(h), o = 0, r = h.length; o < r; o++) { if ((d = e(h[o])).is("li")) { if (s = d.parent(), (l = s.parent()).is("li,ul,ol") && !i(s[0])) { if (n && e.contains(n, l[0])) continue; (c = d.nextAll("li")).length && e(s[0].cloneNode(!1)).appendTo(d).append(c), l.is("li") ? d.insertAfter(l) : d.appendTo(l), s.children("li").length || s.remove(); continue } if (n == s[0]) continue; n = s[0] } else n = h[o]; u = parseInt(i(n), 10) - 30, i(n, u) } } }), _ = d.extend({ init: function (t) { t.formatter = { toggle: e.proxy(function (e) { var t = new v; t.immutables = this.editor && this.editor.options.immutables, t.apply(f.nodes(e)) }, this) }, d.fn.init.call(this, t) } }), b = d.extend({ init: function (t) { t.formatter = { toggle: e.proxy(function (e) { var t = new v; t.immutables = this.editor && this.editor.options.immutables, t.remove(f.nodes(e)) }, this) }, d.fn.init.call(this, t) } }), w = u.extend({ init: function (e) { u.fn.init.call(this, e), this.finder = new m([{ tags: p }]) }, initialize: function (t, i) { u.fn.initialize.call(this, t, i), e.extend(this.options, { immutables: i.editor && i.editor.options.immutables }), t.addClass("k-state-disabled") }, update: function (n, o) { var r, l, c, d, u, h, f = this.finder.findSuitable(o); for (c = 0, d = f.length; c < d; c++)if (u = f[c], this.options.immutables && ((h = s.Immutables.immutableParent(u)) && (u = h)), (r = i(u)) || (l = e(u).parents("ul,ol").length, r = a.is(u, "li") && (l > 1 || i(u.parentNode)) || a.ofType(u, ["ul", "ol"]) && l > 0), r) return n.removeClass("k-state-disabled"), t; n.addClass("k-state-disabled").removeClass("k-state-hover") } }); r(s, { IndentFormatter: v, IndentCommand: _, OutdentCommand: b, OutdentTool: w }), c("indent", new u({ command: _, template: new h({ template: l.buttonTemplate, title: "Indent" }) })), c("outdent", new w({ command: b, template: new h({ template: l.buttonTemplate, title: "Outdent" }) })) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/viewhtml.min", ["editor/indent.min"], function () { e = window.kendo.jQuery, i = window.kendo, n = e.extend, o = i.ui.editor, r = o.EditorUtils, s = o.Command, a = o.Tool, l = o.ToolTemplate, c = s.extend({ init: function (e) { var t = this; t.options = e, s.fn.init.call(t, e), t.attributes = null, t.async = !0 }, exec: function () { function n(e) { e.preventDefault(), d.data("kendoWindow").destroy(), s.immutables && (s.immutables.serializedImmutables = {}), s.focus() } var o, r = this, s = r.editor, a = s.options, l = s.options.messages, d = e(i.template(c.template)(l)).appendTo(document.body), u = ".k-editor-textarea"; a.serialization.immutables = s.immutables, o = c.indent(s.value()), a.serialization.immutables = t, this.createDialog(d, { title: l.viewHtml, close: n, visible: !1 }).find(u).val(o).end().find(".k-dialog-update").click(function (e) { a.deserialization.immutables = s.immutables, s.value(d.find(u).val()), a.deserialization.immutables = t, n(e), r.change && r.change(), s.trigger("change") }).end().find(".k-dialog-close").click(n).end().data("kendoWindow").center().open(), d.find(u).focus() } }), n(c, { template: "<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'><div class='k-edit-form-container'></div><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div></div>", indent: function (e) { return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, "</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi, "<$1$2>\n<li").replace(/<br \/>/gi, "<br />\n").replace(/\n$/, "") } }), i.ui.editor.ViewHtmlCommand = c, o.EditorUtils.registerTool("viewHtml", new a({ command: c, template: new l({ template: r.buttonTemplate, title: "View HTML" }) })); var e, t, i, n, o, r, s, a, l, c }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/formatting.min", ["editor/viewhtml.min"], function () { !function (e) { function t(e) { var t, o, r = l.closestEditableOfType(e, ["li"]); r && (t = new n.ListFormatter(l.name(r.parentNode)), (o = i.ui.editor.W3CRange.fromNode(e)).selectNode(r), t.toggle(o)) } var i = window.kendo, n = i.ui.editor, o = n.Tool, r = n.ToolTemplate, s = n.DelayedExecutionTool, a = n.Command, l = n.Dom, c = n.EditorUtils, d = n.RangeUtils, u = c.registerTool, h = s.extend({ init: function (e) { var t = this; o.fn.init.call(t, i.deepExtend({}, t.options, e)), t.type = "kendoSelectBox", t.finder = { getFormat: function () { return "" } } }, options: { items: [{ text: "Paragraph", value: "p" }, { text: "Quotation", value: "blockquote" }, { text: "Heading 1", value: "h1" }, { text: "Heading 2", value: "h2" }, { text: "Heading 3", value: "h3" }, { text: "Heading 4", value: "h4" }, { text: "Heading 5", value: "h5" }, { text: "Heading 6", value: "h6" }], width: 110 }, toFormattingItem: function (e) { var t, i = e.value; return i ? e.tag || e.className ? e : (0 === (t = i.indexOf(".")) ? e.className = i.substring(1) : -1 == t ? e.tag = i : (e.tag = i.substring(0, t), e.className = i.substring(t + 1)), e) : e }, command: function (t) { var i = this, o = t.value; return o = this.toFormattingItem(o), new n.FormatCommand({ range: t.range, formatter: function () { var t, r = (o.tag || o.context || "span").split(","), s = [{ tags: r, attr: { className: o.className || "" } }]; return (t = e.inArray(r[0], l.inlineElements) >= 0 ? new n.GreedyInlineFormatter(s) : new n.GreedyBlockFormatter(s)).editor = i.editor, t } }) }, initialize: function (e, t) { var n = t.editor, r = this.options, s = r.name, a = this; a.editor = n, e.width(r.width), e.kendoSelectBox({ dataTextField: "text", dataValueField: "value", dataSource: r.items || n.options[s], title: n.options.messages[s], autoSize: !0, change: function () { var e = this.dataItem(); e && o.exec(n, s, e.toJSON()) }, dataBound: function () { var e, t = this.dataSource.data(); for (e = 0; e < t.length; e++)t[e] = a.toFormattingItem(t[e]) }, highlightFirst: !1, template: i.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>') }), e.addClass("k-decorated").closest(".k-widget").removeClass("k-" + s).find("*").addBack().attr("unselectable", "on") }, getFormattingValue: function (t, i) { var n, o, r, s, a, l; for (n = 0; n < t.length; n++)if (o = t[n], r = o.tag || o.context || "", s = o.className ? "." + o.className : "", a = r + s, e(i[0]).closest(a)[0]) { if (1 == i.length) return o.value; for (l = 1; l < i.length && e(i[l]).closest(a)[0]; l++)if (l == i.length - 1) return o.value } return "" }, update: function (t, i) { var n, o, r, a, c, d = e(t).data(this.type); if (d && (n = d.dataSource, o = n.data(), (c = l.commonAncestor.apply(null, i)) == l.closestEditable(c) || this._ancestor != c)) { for (this._ancestor = c, r = 0; r < o.length; r++)a = o[r].context, o[r].visible = !a || !!e(c).closest(a).length; n.filter([{ field: "visible", operator: "eq", value: !0 }]), s.fn.update.call(this, t, i), d.value(this.getFormattingValue(n.view(), i)), d.wrapper.toggleClass("k-state-disabled", !n.view().length) } }, destroy: function () { this._ancestor = null } }), f = a.extend({ exec: function () { var e, t, i, n = this.lockRange(!0); for (this.tagsToClean = this.options.remove || "strong,em,span,sup,sub,del,b,i,u,font".split(","), d.wrapSelectedElements(n), e = d.mapAll(n, function (e) { return e }), t = e.length - 1; t >= 0; t--)i = e[t], this.immutableParent(i) || this.clean(i); this.releaseRange(n) }, clean: function (i) { var o, r, s, a, c; if (i && !l.isMarker(i)) { if ("ul" == (o = l.name(i)) || "ol" == o) for (r = new n.ListFormatter(o), s = i.previousSibling, a = i.nextSibling, r.unwrap(i); s && s != a; s = s.nextSibling)this.clean(s); else if ("blockquote" == o) l.changeTag(i, "p"); else if (1 != i.nodeType || l.insignificant(i)) t(i); else { for (c = i.childNodes.length - 1; c >= 0; c--)this.clean(i.childNodes[c]); i.removeAttribute("style"), i.removeAttribute("class") } e.inArray(o, this.tagsToClean) > -1 && l.unwrap(i) } }, immutableParent: function (e) { return this.immutables() && n.Immutables.immutableParent(e) } }); e.extend(n, { FormattingTool: h, CleanFormatCommand: f }), u("formatting", new h({ template: new r({ template: c.dropDownListTemplate, title: "Format" }) })), u("cleanFormatting", new o({ command: f, template: new r({ template: c.buttonTemplate, title: "Clean formatting" }) })) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/toolbar.min", ["editor/formatting.min"], function () { e = window.jQuery || window.kendo.jQuery, i = window.kendo, n = i.ui, o = n.editor, r = n.Widget, s = e.extend, a = e.proxy, l = i.keys, c = ".kendoEditor", d = i.ui.editor.EditorUtils, u = i.ui.editor.ToolTemplate, h = i.ui.editor.Tool, f = i._outerWidth, p = i._outerHeight, m = "overflowAnchor", g = ".k-tool-group:visible a.k-tool:not(.k-state-disabled),.k-tool.k-overflow-anchor,.k-tool-group:visible .k-widget.k-colorpicker,.k-tool-group:visible .k-selectbox,.k-tool-group:visible .k-dropdown,.k-tool-group:visible .k-combobox .k-input", v = { "k-i-sup-script": "superscript", "k-i-sub-script": "subscript", "k-i-align-left": "justifyLeft", "k-i-align-center": "justifyCenter", "k-i-align-right": "justifyRight", "k-i-align-justify": "justifyFull", "k-i-list-unordered": "insertUnorderedList", "k-i-list-ordered": "insertOrderedList", "k-i-login": "import", "k-i-indent-increase": "indent", "k-i-indent-decrease": "outdent", "k-i-link-horizontal": "createLink", "k-i-unlink-horizontal": "unlink", "k-i-image": "insertImage", "k-i-file-add": "insertFile", "k-i-html": "viewHtml", "k-i-foreground-color": "foreColor", "k-i-paint": "backColor", "k-i-table-insert": "createTable", "k-i-table-column-insert-left": "addColumnLeft", "k-i-table-column-insert-right": "addColumnRight", "k-i-table-row-insert-above": "addRowAbove", "k-i-table-row-insert-below": "addRowBelow", "k-i-table-row-delete": "deleteRow", "k-i-table-column-delete": "deleteColumn", "k-i-table-properties": "tableWizard", "k-i-table-wizard": "tableWizardInsert", "k-i-clear-css": "cleanFormatting" }, _ = h.extend({ initialize: function (t, i) { t.attr({ unselectable: "on" }); var n = i.editor.toolbar; t.attr("aria-controls", i.editor.element.attr("id")).on("click", e.proxy(function () { this.overflowPopup.toggle() }, n)) }, options: { name: m }, command: e.noop, update: e.noop, destroy: e.noop }), d.registerTool(m, new _({ key: "", ctrl: !0, template: new u({ template: d.overflowAnchorTemplate }) })), t = r.extend({ init: function (e, t) { var n = this; t = s({}, t, { name: "EditorToolbar" }), r.fn.init.call(n, e, t), t.popup && n._initPopup(), t.resizable && t.resizable.toolbar && (n._resizeHandler = i.onResize(function () { n.resize() }), n.element.addClass("k-toolbar-resizable")) }, events: ["execute"], groups: { basic: ["bold", "italic", "underline", "strikethrough"], scripts: ["subscript", "superscript"], alignment: ["justifyLeft", "justifyCenter", "justifyRight", "justifyFull"], links: ["insertImage", "insertFile", "createLink", "unlink"], lists: ["insertUnorderedList", "insertOrderedList", "indent", "outdent"], tables: ["createTable", "addColumnLeft", "addColumnRight", "addRowAbove", "addRowBelow", "deleteRow", "deleteColumn"], advanced: ["viewHtml", "cleanFormatting", "print", "pdf", "exportAs", "import"], fonts: ["fontName", "fontSize"], colors: ["foreColor", "backColor"] }, overflowFlaseTools: ["formatting", "fontName", "fontSize", "foreColor", "backColor", "insertHtml"], _initPopup: function () { var t = this; this.window = e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag' /></button>").kendoWindow({ title: !1, resizable: !1, draggable: { dragHandle: ".k-editortoolbar-dragHandle" }, animation: { open: { effects: "fade:in" }, close: { effects: "fade:out" } }, minHeight: 42, visible: !1, autoFocus: !1, actions: [], dragend: function () { this._moved = !0 } }).on("mousedown", function (i) { e(i.target).is(".k-icon") || (t.preventPopupHide = !0) }).on("focusout", function () { t.options.editor.element.focusout() }).data("kendoWindow") }, _toggleOverflowStyles: function (e, t) { e.find("li").toggleClass("k-item k-state-default", t).find(".k-tool:not(.k-state-disabled),.k-overflow-button").toggleClass("k-overflow-button k-button", t) }, _initOverflowPopup: function (t) { var i = this; i.overflowPopup = e("<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>").appendTo("body").kendoPopup({ anchor: t, origin: "bottom right", position: "top right", copyAnchorStyles: !1, open: function (e) { this.element.is(":empty") && e.preventDefault(), i._toggleOverflowStyles(this.element, !0), t.attr("aria-expanded", !0) }, close: function () { t.attr("aria-expanded", !1) }, activate: a(i.focusOverflowPopup, i) }).data("kendoPopup") }, items: function () { var e, t, i = this.options.resizable && this.options.resizable.toolbar; return t = this.element.children().find("> *, select"), i && (e = this.overflowPopup, t = t.add(e.element.children().find("> *"))), t }, focused: function () { return this.element.find(".k-state-focused").length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible() }, toolById: function (e) { var t, i = this.tools; for (t in i) if (t.toLowerCase() == e) return i[t] }, toolGroupFor: function (t) { var i, n = this.groups; if (this.isCustomTool(t)) return "custom"; for (i in n) if (e.inArray(t, n[i]) >= 0) return i }, bindTo: function (t) { var i = this, n = i.window; i._editor && i._editor.unbind("select", a(i.resize, i)), i._editor = t, i.options.resizable && i.options.resizable.toolbar && t.options.tools.push(m), i.tools = i.expandTools(t.options.tools), i.render(), i.element.find(".k-combobox .k-input").keydown(function (t) { var i = e(this).closest(".k-combobox").data("kendoComboBox"), n = t.keyCode; n == l.RIGHT || n == l.LEFT ? i.close() : n == l.DOWN && (i.dropDown.isOpened() || (t.stopImmediatePropagation(), i.open())) }), i._attachEvents(), i.items().each(function () { var n, o = i._toolName(this), r = "moreVertical" !== o ? i.tools[o] : i.tools.overflowAnchor, s = r && r.options, a = t.options.messages, l = s && s.tooltip || a[o], c = e(this); r && r.initialize && ("fontSize" != o && "fontName" != o || (n = a[o + "Inherit"], c.find("input").val(n).end().find("span.k-input").text(n).end()), r.initialize(c, { title: i._appendShortcutSequence(l, r), editor: i._editor }), c.closest(".k-widget", i.element).addClass("k-editor-widget"), c.closest(".k-colorpicker", i.element).next(".k-colorpicker").addClass("k-editor-widget")) }), t.bind("select", a(i.resize, i)), i.update(), n && n.wrapper.css({ top: "", left: "", width: "" }) }, show: function () { var e, t, n, o = this, r = o.window, s = o.options.editor, a = i.support.browser; r && (e = r.wrapper, t = s.element, e.is(":visible") && o.window.options.visible || (e[0].style.width || e.width(f(t) - parseInt(e.css("border-left-width"), 10) - parseInt(e.css("border-right-width"), 10)), r._moved || (n = t.offset(), e.css({ top: Math.max(0, parseInt(n.top, 10) - p(e) - parseInt(o.window.element.css("padding-bottom"), 10)), left: Math.max(0, parseInt(n.left, 10)) })), (a.msie || a.edge) && o._overlaps(t) ? setTimeout(function () { r.open() }, 0) : r.open())) }, _overlaps: function (e) { var t = this.window.wrapper, i = t.offset(), n = i.left, o = i.top, r = e.offset(), s = r.left, a = r.top; return !(s + e.width() < n || s > n + t.width() || a + e.height() < o || a > o + t.height()) }, hide: function () { this.window && this.window.close() }, focus: function () { var e = "tabIndex", t = this.element, i = this._editor.element.attr(e); t.attr(e, i || 0).focus().find(g).first().focus(), i || 0 === i || t.removeAttr(e) }, focusOverflowPopup: function () { var e = "tabIndex", t = this.overflowPopup.element, i = this._editor.element.attr(e); t.closest(".k-animation-container").addClass("k-overflow-wrapper"), t.attr(e, i || 0).find(g).first().focus(), i || 0 === i || t.removeAttr(e) }, _appendShortcutSequence: function (e, t) { if (!t.key) return e; var i = e + " ("; return t.ctrl && (i += "Ctrl + "), t.shift && (i += "Shift + "), t.alt && (i += "Alt + "), i += t.key + ")" }, _nativeTools: ["insertLineBreak", "insertParagraph", "redo", "undo", "autoLink"], tools: {}, isCustomTool: function (e) { return !(e in i.ui.Editor.defaultTools) }, expandTools: function (t) { var n, r, a, l, c = this._nativeTools, d = i.deepExtend({}, i.ui.Editor.defaultTools), u = {}; for (r = 0; r < t.length; r++)n = t[r], l = n.name, e.isPlainObject(n) ? l && d[l] ? (u[l] = s({}, d[l]), s(u[l].options, n)) : ((a = s({ cssClass: "k-i-gear", type: "button", title: "" }, n)).name || (a.name = "custom"), a.cssClass = "k-" + a.name, a.template || "button" != a.type || (a.template = o.EditorUtils.buttonTemplate, a.title = a.title || a.tooltip), u[l] = { options: a }) : d[n] && (u[n] = d[n]); for (r = 0; r < c.length; r++)u[c[r]] || (u[c[r]] = d[c[r]]); return u }, render: function () { function t(t) { var n; return t.getHtml ? n = t.getHtml() : (e.isFunction(t) || (t = i.template(t)), n = t(r)), e.trim(n) } function n() { h.children().length && (k && (h.data("position", y), y++), h.appendTo(_)) } function o(t) { t !== m ? (h = e("<li class='k-tool-group' role='presentation' />")).data("overflow", -1 === e.inArray(t, x)) : h = e("<li class='k-overflow-tools' />") } var r, s, l, c, d, u, h, f, p = this, g = p.tools, v = p._editor.element, _ = p.element.empty(), b = p._editor.options.tools, w = i.support.browser, y = 0, k = p.options.resizable && p.options.resizable.toolbar, x = this.overflowFlaseTools; for (_.empty(), b.length && (c = b[0].name || b[0]), o(c), f = 0; f < b.length; f++)c = b[f].name || b[f], !(r = g[c] && g[c].options) && e.isPlainObject(c) && (r = c), s = r && r.template, "break" == c && (n(), e("<li class='k-row-break' />").appendTo(p.element), o(c)), s && (u = p.toolGroupFor(c), d == u && c != m || (n(), o(c), d = u), c == m && (s.options.title = p.options.messages.overflowAnchor), s = t(s), l = e(s).appendTo(h), "custom" == u && (n(), o(c)), r.exec && l.hasClass("k-tool") && l.click(a(r.exec, v[0]))); n(), e(p.element).children(":has(> .k-tool)").addClass("k-button-group"), p.options.popup && w.msie && w.version < 9 && p.window.wrapper.find("*").attr("unselectable", "on"), p.updateGroups(), k && p._initOverflowPopup(p.element.find(".k-overflow-anchor")), p.angular("compile", function () { return { elements: p.element } }) }, updateGroups: function () { e(this.element).children().each(function () { e(this).children().filter(function () { return !e(this).hasClass("k-state-disabled") }).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end() }) }, decorateFrom: function (t) { this.items().filter(".k-decorated").each(function () { var i = e(this).data("kendoSelectBox"); i && i.decorate(t) }) }, destroy: function () { r.fn.destroy.call(this); var e, t = this.tools; for (e in t) t[e].destroy && t[e].destroy(); this.window && this.window.destroy(), this._resizeHandler && i.unbindResize(this._resizeHandler), this.overflowPopup && this.overflowPopup.destroy() }, _attachEvents: function () { var t = this, i = t.overflowPopup ? t.overflowPopup.element : e([]); t.attachToolsEvents(t.element.add(i)) }, attachToolsEvents: function (t) { var i = this, n = "[role=button].k-tool", o = n + ":not(.k-state-disabled)", r = n + ".k-state-disabled", s = [n, ".k-dropdown", ".k-colorpicker"].join(","); t.off(c).on("mouseenter" + c, o, function () { e(this).addClass("k-state-hover") }).on("mouseleave" + c, o, function () { e(this).removeClass("k-state-hover") }).on("mousedown" + c, s, function (e) { e.preventDefault() }).on("keydown" + c, g, function (t) { function n(e, t, i) { var n = t.find(g), o = n.index(s) + e; return i && (o = Math.max(0, Math.min(n.length - 1, o))), n[o] } var o, r, s = this, a = i.options.resizable && i.options.resizable.toolbar, c = t.keyCode; c == l.RIGHT || c == l.LEFT ? e(s).hasClass(".k-dropdown") || (o = n(c == l.RIGHT ? 1 : -1, i.element, !0)) : !a || c != l.UP && c != l.DOWN ? c == l.ESC ? (i.overflowPopup && i.overflowPopup.visible() && i.overflowPopup.close(), o = i._editor) : c != l.TAB || t.ctrlKey || t.altKey || (r = a && e(s.parentElement).hasClass("k-overflow-tool-group") ? i.overflowPopup.element : i.element, t.shiftKey ? o = n(-1, r) : (o = n(1, r)) || (o = i._editor)) : o = n(c == l.DOWN ? 1 : -1, i.overflowPopup.element, !0), o && (t.preventDefault(), o.focus()), c === l.ENTER && e(s).is("a") && !e(s).attr("href") && i._executeToolCommand(s, t) }).on("click" + c, o, function (e) { i._executeToolCommand(this, e) }).on("click" + c, r, function (e) { e.preventDefault() }) }, _executeToolCommand: function (t, i) { var n = e(t); i.preventDefault(), i.stopPropagation(), n.removeClass("k-state-hover"), n.is("[data-popup]") || this._editor.exec(this._toolName(t)) }, _toolName: function (t) { var n, o, r; if (t) return n = t.className, /k-tool\b/i.test(n) && (n = t.firstChild.className), (o = e.grep(n.split(" "), function (e) { return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e) }))[0] ? (r = o[0], v[r] && (r = v[r]), r.indexOf("k-i-") >= 0 ? i.toCamelCase(r.substring(r.indexOf("k-i-") + 4)) : r.substring(r.lastIndexOf("-") + 1)) : "custom" }, refreshTools: function () { var t = this, n = i.ui.editor, o = t._editor, r = o.getRange(), s = n.RangeUtils.textNodes(r), a = o.options.immutables, l = t._immutablesContext(r); (s = n.Dom.filterBy(s, n.Dom.htmlIndentSpace, !0)).length || (s = [r.startContainer]), t.items().each(function () { var i, n = t.tools[t._toolName(this)]; n && (i = e(this), n.update && n.update(i, s), a && t._updateImmutablesState(n, i, l)) }), this.update() }, _immutablesContext: function (e) { if (this._editor.options.immutables) { var t = i.ui.editor; return e.collapsed ? t.Immutables.immutablesContext(e) : 0 === t.RangeUtils.editableTextNodes(e).length } }, _updateImmutablesState: function (t, i, n) { var r, s, a, l, c, d = t.name, u = i, h = t.options.trackImmutables; if (void 0 === h && (h = e.inArray(d, o.Immutables.toolsToBeUpdated) > -1), h) { if (r = n ? "none" : "", !i.is(".k-tool")) for (a in s = i.data()) if (a.match(/^kendo[A-Z][a-zA-Z]*/)) { l = s[a], u = l.wrapper; break } u.css("display", r), 0 === (c = u.closest("li")).children(":visible").length && c.css("display", r) } }, update: function () { this.updateGroups() }, _resize: function (e) { var t = e.width, i = this.options.resizable && this.options.resizable.toolbar, n = this.overflowPopup; this.refreshTools(), i && (n.visible() && n.close(!0), this._refreshWidths(), this._shrink(t), this._stretch(t), this._toggleOverflowStyles(this.element, !1), this._toggleOverflowStyles(this.overflowPopup.element, !0), this.element.children("li.k-overflow-tools").css("visibility", n.element.is(":empty") ? "hidden" : "visible")) }, _refreshWidths: function () { this.element.children("li").each(function (t, i) { var n = e(i); n.data("outerWidth", f(n, !0)) }) }, _shrink: function (e) { var t, i, n; if (e < this._groupsWidth()) for (i = this._visibleGroups().filter(":not(.k-overflow-tools)"), n = i.length - 1; n >= 0 && (t = i.eq(n), !(e > this._groupsWidth())); n--)this._hideGroup(t) }, _stretch: function (e) { var t, i, n; if (e > this._groupsWidth()) for (i = this._hiddenGroups(), n = 0; n < i.length && (t = i.eq(n), !(e < this._groupsWidth()) && this._showGroup(t, e)); n++); }, _hiddenGroups: function () { var t = this.overflowPopup, i = this.element.children("li.k-tool-group").filter(":hidden"); return (i = i.add(t.element.children("li"))).sort(function (t, i) { return e(t).data("position") > e(i).data("position") ? 1 : -1 }), i }, _visibleGroups: function () { return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible") }, _groupsWidth: function () { var t = 0; return this._visibleGroups().each(function () { t += e(this).data("outerWidth") }), Math.ceil(t) }, _hideGroup: function (e) { if (e.data("overflow")) { var t = this.overflowPopup; e.detach().prependTo(t.element).addClass("k-overflow-tool-group") } else e.hide() }, _showGroup: function (t, i) { var n, o; return !!(t.length && i > this._groupsWidth() + t.data("outerWidth")) && (t.hasClass("k-overflow-tool-group") ? (0 === (n = t.data("position")) ? t.detach().prependTo(this.element) : (o = this.element.children().filter(function (t, i) { return e(i).data("position") === n - 1 }), t.detach().insertAfter(o)), t.removeClass("k-overflow-tool-group")) : t.show(), !0) } }), e.extend(o, { Toolbar: t }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _ }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/tables.min", ["editor/toolbar.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = e.extend, n = e.proxy, o = t.ui.editor, r = o.Dom, s = o.EditorUtils, a = o.RangeUtils, l = o.Command, c = "kendoEditor", d = "k-state-active", u = "k-state-selected", h = o.Tool, f = o.ToolTemplate, p = o.InsertHtmlCommand, m = o.BlockFormatFinder, g = o.EditorUtils.registerTool, v = t.getTouches, _ = t.template, b = new m([{ tags: ["table"] }]), w = p.extend({ init: function (t) { var i = e.extend({ postProcess: this.postProcess, skipCleaners: !0 }, t || {}); p.fn.init.call(this, i) }, _tableHtml: function (e, t) { var i, n; return e = e || 1, t = t || 1, i = _("<td style='width:#=width#%;'>#=content#</td>")({ width: 100 / t, content: o.emptyTableCellContent }), n = 100 / e, "<table class='k-table' data-last>" + Array(e + 1).join("<tr style='height:" + n + "%;'>" + Array(t + 1).join(i) + "</tr>") + "</table>" }, postProcess: function (t, i) { var n = e("table[data-last]", t.document).removeAttr("data-last"); i.setStart(n.find("td")[0], 0), i.collapse(!0), t.selectRange(i) }, exec: function () { var e = this.options; e.html = this._tableHtml(e.rows, e.columns), p.fn.exec.call(this) } }), y = h.extend({ initialize: function (t, i) { var r, a, l, c; h.fn.initialize.call(this, t, i), r = e(this.options.popupTemplate).appendTo("body").kendoPopup({ anchor: t, copyAnchorStyles: !1, open: n(this._open, this), activate: n(this._activate, this), close: n(this._close, this) }).data("kendoPopup"), t.click(n(this._toggle, this)).keydown(n(this._keydown, this)), a = this._editor = i.editor, this._popup = r, l = new o.TableWizardTool({ template: new f({ template: s.buttonTemplate, title: a.options.messages.tableWizard }), command: o.TableWizardCommand, insertNewTable: !0 }), g("tableWizardInsert", l), (c = e("<div class='k-editor-toolbar'>" + l.options.template.getHtml() + "</div>")).appendTo(r.element), a.toolbar && a.toolbar.attachToolsEvents(c) }, popup: function () { return this._popup }, _activate: e.noop, _open: function () { this._popup.options.anchor.addClass(d) }, _close: function () { this._popup.options.anchor.removeClass(d) }, _keydown: function (e) { var i = t.keys, n = e.keyCode; n == i.DOWN && e.altKey ? this._popup.open() : n == i.ESC && this._popup.close() }, _toggle: function (t) { var i = e(t.target).closest(".k-tool"); i.hasClass("k-state-disabled") || this.popup().toggle() }, update: function (e) { var t = this.popup(); t.wrapper && "block" == t.wrapper.css("display") && t.close(), e.removeClass("k-state-hover") }, destroy: function () { this._popup.destroy() } }), k = y.extend({ init: function (t) { this.cols = 8, this.rows = 6, y.fn.init.call(this, e.extend(t, { command: w, popupTemplate: "<div class='k-ct-popup'>" + Array(this.cols * this.rows + 1).join("<span class='k-ct-cell k-state-disabled' />") + "<div class='k-status'></div></div>" })) }, _activate: function () { function i(t) { var i = e(window); return { row: Math.floor((t.clientY + i.scrollTop() - u.top) / o) + 1, col: Math.floor((t.clientX + i.scrollLeft() - u.left) / n) + 1 } } var n, o, r = this, s = r._popup.element, a = s.find(".k-ct-cell"), l = a.eq(0), d = a.eq(a.length - 1), u = t.getOffset(l), h = t.getOffset(d), f = r.cols, p = r.rows; s.find("*").addBack().attr("unselectable", "on"), h.left += d[0].offsetWidth, h.top += d[0].offsetHeight, n = (h.left - u.left) / f, o = (h.top - u.top) / p, s.autoApplyNS(c).on("mousemove", function (e) { r._setTableSize(i(e)) }).on("mouseleave", function () { r._setTableSize() }).on("down", function (e) { e.preventDefault(); var t = v(e)[0]; r._exec(i(t.location)) }) }, _valid: function (e) { return e && e.row > 0 && e.col > 0 && e.row <= this.rows && e.col <= this.cols }, _exec: function (e) { this._valid(e) && (this._editor.exec("createTable", { rows: e.row, columns: e.col }), this._popup.close()) }, _setTableSize: function (i) { var n = this._popup.element, o = n.find(".k-status"), r = n.find(".k-ct-cell"), s = this.cols, a = this._editor.options.messages; this._valid(i) ? (o.text(t.format(a.createTableHint, i.row, i.col)), r.each(function (t) { e(this).toggleClass(u, t % s < i.col && t / s < i.row) })) : (o.text(a.createTable), r.removeClass(u)) }, _keydown: function (e) { var i, n, o, r, s, a, l, c; y.fn._keydown.call(this, e), this._popup.visible() && (i = t.keys, n = e.keyCode, o = this._popup.element.find(".k-ct-cell"), r = Math.max(o.filter(".k-state-selected").last().index(), 0), s = Math.floor(r / this.cols), a = r % this.cols, l = !1, n != i.DOWN || e.altKey ? n == i.UP ? (l = !0, s--) : n == i.RIGHT ? (l = !0, a++) : n == i.LEFT && (l = !0, a--) : (l = !0, s++), c = { row: Math.max(1, Math.min(this.rows, s + 1)), col: Math.max(1, Math.min(this.cols, a + 1)) }, n == i.ENTER ? this._exec(c) : this._setTableSize(c), l && (e.preventDefault(), e.stopImmediatePropagation())) }, _open: function () { var e = this._editor.options.messages; y.fn._open.call(this), this.popup().element.find(".k-status").text(e.createTable).end().find(".k-ct-cell").removeClass(u) }, _close: function () { y.fn._close.call(this), this.popup().element.off("." + c) } }), x = l.extend({ exec: function () { for (var e, t, i, n = this.lockRange(!0), s = n.endContainer; "td" != r.name(s);)s = s.parentNode; if (!this.immutables() || !o.Immutables.immutableParent(s)) { for (e = s.parentNode, e.children.length, t = e.cloneNode(!0), i = 0; i < e.cells.length; i++)t.cells[i].innerHTML = o.emptyTableCellContent; "before" == this.options.position ? r.insertBefore(t, e) : r.insertAfter(t, e), this.releaseRange(n) } } }), C = l.extend({ exec: function () { var e, t, i, n, s = this.lockRange(!0), a = r.closest(s.endContainer, "td"), l = r.closest(a, "table"), c = l.rows, d = this.options.position; if (!this.immutables() || !o.Immutables.immutableParent(a)) { for (e = r.findNodeIndex(a, !0), t = 0; t < c.length; t++)i = c[t].cells[e], (n = i.cloneNode()).innerHTML = o.emptyTableCellContent, "before" == d ? r.insertBefore(n, i) : r.insertAfter(n, i); this.releaseRange(s) } } }), S = l.extend({ exec: function () { var t, i, n, s = this.lockRange(), l = a.mapAll(s, function (t) { return e(t).closest("tr")[0] }), c = l[0]; if (!this.immutables() || !o.Immutables.immutableParent(c)) { if ((t = r.closest(c, "table")).rows.length <= l.length) (i = r.next(t)) && !r.insignificant(i) || (i = r.prev(t)), r.remove(t); else for (n = 0; n < l.length; n++)c = l[n], r.removeTextSiblings(c), i = (i = r.next(c) || r.prev(c)).cells[0], r.remove(c); i && (s.setStart(i, 0), s.collapse(!0), this.editor.selectRange(s)) } } }), T = l.extend({ exec: function () { var e, t, i = this.lockRange(), n = r.closest(i.endContainer, "td"), s = r.closest(n, "table"), a = s.rows, l = r.findNodeIndex(n, !0), c = a[0].cells.length; if (!this.immutables() || !o.Immutables.immutableParent(n)) { if (1 == c) (e = r.next(s)) && !r.insignificant(e) || (e = r.prev(s)), r.remove(s); else for (r.removeTextSiblings(n), e = r.next(n) || r.prev(n), t = 0; t < a.length; t++)r.remove(a[t].cells[l]); e && (i.setStart(e, 0), i.collapse(!0), this.editor.selectRange(i)) } } }), D = h.extend({ command: function (e) { return "delete" == (e = i(e, this.options)).action ? "row" == e.type ? new S(e) : new T(e) : "row" == e.type ? new x(e) : new C(e) }, initialize: function (e, t) { h.fn.initialize.call(this, e, t), e.addClass("k-state-disabled") }, update: function (e, t) { var i = !b.isFormatted(t); e.toggleClass("k-state-disabled", i) } }), i(t.ui.editor, { PopupTool: y, TableCommand: w, InsertTableTool: k, TableModificationTool: D, InsertRowCommand: x, InsertColumnCommand: C, DeleteRowCommand: S, DeleteColumnCommand: T }), g("createTable", new k({ template: new f({ template: s.buttonTemplate, popup: !0, title: "Create table" }) })), g("addColumnLeft", new D({ type: "column", position: "before", template: new f({ template: s.buttonTemplate, title: "Add column on the left" }) })), g("addColumnRight", new D({ type: "column", template: new f({ template: s.buttonTemplate, title: "Add column on the right" }) })), g("addRowAbove", new D({ type: "row", position: "before", template: new f({ template: s.buttonTemplate, title: "Add row above" }) })), g("addRowBelow", new D({ type: "row", template: new f({ template: s.buttonTemplate, title: "Add row below" }) })), g("deleteRow", new D({ type: "row", action: "delete", template: new f({ template: s.buttonTemplate, title: "Delete row" }) })), g("deleteColumn", new D({ type: "column", action: "delete", template: new f({ template: s.buttonTemplate, title: "Delete column" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/export.min", ["editor/main.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = e.extend, n = e.proxy, o = t.ui.editor, r = o.EditorUtils, s = o.Command, a = o.Tool, l = r.registerTool, c = o.ToolTemplate, d = s.extend({ init: function (e) { var t = this; t.options = e, s.fn.init.call(t, e), t.attributes = null, t.exportType = e.exportType }, exec: function () { var e = this.lockRange(!0); this.postToProxy(), this.releaseRange(e) }, postToProxy: function () { this.generateForm().appendTo("body").submit().remove() }, generateForm: function () { var t = this, i = t.editor.options.exportAs, n = e("<form>").attr({ action: i && i.proxyURL || "", method: "POST" }); return n.append([t.valueInput(), t.exportTypeInput(), t.fileNameInput()]), n }, valueInput: function () { var t = this.editor; return e("<input>").attr({ value: t.encodedValue(), name: "value", type: "hidden" }) }, exportTypeInput: function () { return e("<input>").attr({ value: this.exportType, name: "exportType", type: "hidden" }) }, fileNameInput: function () { var t = this.editor, i = t.options.exportAs, n = i && i.fileName || t.element.attr("id") || "editor"; return e("<input>").attr({ value: n, name: "fileName", type: "hidden" }) } }), u = a.extend({ init: function (e) { var i = this; a.fn.init.call(i, t.deepExtend({}, i.options, e)), i.type = "kendoSelectBox" }, options: { items: [{ text: "Docx", value: "docx" }, { text: "Rtf", value: "rtf" }, { text: "Pdf", value: "pdf" }, { text: "Html", value: "html" }, { text: "Plain Text", value: "txt" }], width: 115 }, command: function (e) { var t = e.value; return new o.ExportAsCommand({ range: e.range, exportType: t.exportType }) }, initialize: function (e, i) { var o = this, r = i.editor, s = o.options, a = s.name, l = n(o.changeHandler, o), c = s.items || r.options[a]; c.unshift({ text: r.options.messages[a], value: "" }), o.editor = r, e.width(s.width), e.kendoSelectBox({ dataTextField: "text", dataValueField: "value", dataSource: c, autoSize: !0, change: l, open: function (e) { var t = e.sender; t.items()[0].style.display = "none", t.unbind("open") }, highlightFirst: !1, template: t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>') }), e.addClass("k-decorated").closest(".k-widget").removeClass("k-" + a).find("*").addBack().attr("unselectable", "on") }, changeHandler: function (e) { var t = e.sender, i = t.dataItem(), n = i && i.value; this._exec(n), t.value("") }, _exec: function (e) { e && a.exec(this.editor, this.options.name, { exportType: e }) }, destroy: function () { this._ancestor = null } }), i(o, { ExportAsTool: u, ExportAsCommand: d }), l("exportAs", new u({ template: new c({ template: r.dropDownListTemplate, title: "Export As" }) })); var e, t, i, n, o, r, s, a, l, c, d, u }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/import.min", ["editor/main.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = e.extend, n = e.proxy, o = t.ui.editor, r = o.EditorUtils, s = o.Command, a = o.Tool, l = r.registerTool, c = o.ToolTemplate, d = '<div contenteditable="false" class="k-loading-mask" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;"><div class="k-loading-image"></div><div class="k-loading-color"></div></div>', u = s.extend({ exec: function () { (this.editor._uploadWidget || this._initializeUploadWidget()).element.click() }, _initializeUploadWidget: function () { var t = this, i = t.editor, o = i.options.import, r = e('<input id="editorImport" name="files" type="file" />').kendoUpload({ success: n(t._onUploadSuccess, t), progress: n(t._onUploadProgress, t), select: n(t._onUploadSelect, t), error: n(t._onUploadError, t), complete: n(t._onUploadComplete, t), showFileList: !1, multiple: !1, async: { saveUrl: o.proxyUrl, autoUpload: !0, saveField: "file" }, validation: { allowedExtensions: o.allowedExtensions, maxFileSize: o.maxFileSize } }).getKendoUpload(); return i._uploadWidget = r, r }, _onUploadComplete: function (e) { this._trigger("complete", e), e.sender.clearAllFiles(), this._removeLoadingOverlay() }, _onUploadSuccess: function (e) { this.editor.value(e.response.html.replace(/<\/?body>/gi, "")), this._trigger("success", e) }, _onUploadProgress: function (e) { this._trigger("progress", e) }, _onUploadSelect: function (e) { this._trigger("select", e), e.files[0].validationErrors || this._initLoadingOverlay() }, _onUploadError: function (e) { this._trigger("error", e) }, _trigger: function (e, t) { var i = this.editor, n = i.options.import; "function" == typeof n[e] && n[e].call(i, t) }, _initLoadingOverlay: function () { var i = this.editor.body; o.Dom.is(i, "body") ? this._iframeWrapper = this._container = this.editor.wrapper.find("iframe").parent().css({ position: "relative" }).append(d) : this._container = e(i).append(d), t.ui.progress(this._container, !0) }, _removeLoadingOverlay: function () { t.ui.progress(this._container, !1), e(this._iframeWrapper).css({ position: "" }), delete this._container, delete this._iframeWrapper } }), i(o, { ImportCommand: u }), l("import", new a({ command: u, template: new c({ template: r.buttonTemplate, title: "Import" }) })); var e, t, i, n, o, r, s, a, l, c, d, u }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/resizing/resizing-utils.min", ["editor/main.min"], function () { !function (e, t) { function i(e) { return typeof e === m && f.test(e) } var n = window, o = n.Math, r = o.min, s = o.max, a = n.parseFloat, l = e.jQuery, c = l.extend, d = e.ui.editor, u = "%", h = "px", f = /(\d+)(\.?)(\d*)%/, p = /(\d+)(\.?)(\d*)px/, m = "string", g = { constrain: function (e) { var t = e.value, i = e.min, n = e.max; return s(r(a(t), a(n)), a(i)) }, getScrollBarWidth: function (t) { return t && !l(t).is("body") && t.scrollHeight > t.clientHeight ? e.support.scrollbar() : 0 }, calculatePercentageRatio: function (e, t) { return i(e) ? a(e) : a(e) / t * 100 }, inPercentages: i, inPixels: function (e) { return typeof e === m && p.test(e) }, toPercentages: function (e) { return a(e) + u }, toPixels: function (e) { return a(e) + h } }; c(d, { ResizingUtils: g }) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/resizing/table-element-resizing.min", ["editor/main.min", "kendo.resizable.min", "editor/resizing/resizing-utils.min"], function () { e = window.kendo, t = e.jQuery, i = t.extend, n = t.noop, o = t.proxy, r = e.ui.editor, s = e.Class, a = "keydown", l = "mouseleave", c = "mouseup", d = "table", u = s.extend({ init: function (e, n) { var o = this; o.options = i({}, o.options, n), o.options.tags = t.isArray(o.options.tags) ? o.options.tags : [o.options.tags], t(e).is(d) && (o.element = e, o._attachEventHandlers()) }, destroy: function () { var e = this, i = e.options.eventNamespace; e.element && (t(e.element).off(i), e.element = null), t(e.options.rootElement).off(a + i), e._destroyResizeHandle() }, options: { tags: [], min: 0, rootElement: null, eventNamespace: "", rtl: !1, handle: { dataAttribute: "", height: 0, width: 0, classNames: {}, template: "" } }, _attachEventHandlers: function () { var e = this, i = e.options; t(e.element).on("mousemove" + i.eventNamespace, i.tags.join(","), o(e.detectElementBorderHovering, e)) }, resizingInProgress: function () { var e = this._resizable; return !!e && !!e.resizing }, resize: n, detectElementBorderHovering: function (e) { var i = this, n = i.options, o = n.handle, r = t(e.currentTarget), s = i.resizeHandle, a = o.dataAttribute; i.resizingInProgress() || (!r.is(":last-child") && i.elementBorderHovered(r, e) ? s ? s.data(a) && s.data(a) !== r[0] && i.showResizeHandle(r, e) : i.showResizeHandle(r, e) : s && i._destroyResizeHandle()) }, elementBorderHovered: n, showResizeHandle: function (e, t) { var i = this; 0 === t.buttons && (i._initResizeHandle(), i.setResizeHandlePosition(e), i.setResizeHandleDimensions(), i.setResizeHandleDataAttributes(e[0]), i._attachResizeHandleEventHandlers(), i._initResizable(e), i._hideResizeMarker(), i.resizeHandle.show()) }, _initResizeHandle: function () { var e = this, i = e.options; e._destroyResizeHandle(), e.resizeHandle = t(i.handle.template).appendTo(i.rootElement) }, setResizeHandlePosition: n, setResizeHandleDimensions: n, setResizeHandleDataAttributes: function (e) { this.resizeHandle.data(this.options.handle.dataAttribute, e) }, _attachResizeHandleEventHandlers: function () { var e = this, t = e.options, i = t.eventNamespace, n = t.handle.classNames.marker, o = e.resizeHandle; e.resizeHandle.on("mousedown" + i, function () { o.find("." + n).show() }).on(c + i, function () { o.find("." + n).hide() }) }, _hideResizeMarker: function () { this.resizeHandle.find("." + this.options.handle.classNames.marker).hide() }, _destroyResizeHandle: function () { var e = this; e.resizeHandle && (e._destroyResizable(), e.resizeHandle.off(e.options.eventNamespace).remove(), e.resizeHandle = null) }, _initResizable: function (t) { var i = this; i.resizeHandle && (i._destroyResizable(), i._resizable = new e.ui.Resizable(t, { draggableElement: i.resizeHandle[0], start: o(i.onResizeStart, i), resize: o(i.onResize, i), resizeend: o(i.onResizeEnd, i) })) }, _destroyResizable: function () { var e = this; e._resizable && (e._resizable.destroy(), e._resizable = null) }, onResizeStart: function () { this._disableKeyboard() }, onResize: function (e) { this.setResizeHandleDragPosition(e) }, setResizeHandleDragPosition: n, onResizeEnd: function (e) { var t = this; t.resize(e), t._destroyResizeHandle(), t._enableKeyboard() }, _enableKeyboard: function () { var e = this.options; t(e.rootElement).off(a + e.eventNamespace) }, _disableKeyboard: function () { var e = this.options; t(e.rootElement).on(a + e.eventNamespace, function (e) { e.preventDefault() }) }, _forceResizing: function (e) { var t = this._resizable; t && t.userEvents && t.userEvents._end(e) } }), h = s.extend({ create: function (e, i) { var n = this, o = i.name, r = i.eventNamespace; t(e.body).on("mouseenter" + r, d, function (t) { var r = t.currentTarget, s = e[o]; t.stopPropagation(), s ? s.element === r || s.resizingInProgress() || (n._destroyResizing(e, i), n._initResizing(e, r, i)) : n._initResizing(e, r, i) }).on(l + r, d, function (r) { var s, a = e[o]; r.stopPropagation(), !a || a.resizingInProgress() || a.resizeHandle || (s = t(a.element).parents(d)[0]) && (n._destroyResizing(e, i), n._initResizing(e, s, i)) }).on(l + r, function () { var t = e[o]; t && !t.resizingInProgress() && n._destroyResizing(e, i) }).on(c + r, function (r) { var s, a = e[o]; a && a.resizingInProgress() && ((s = t(r.target).parents(d)[0]) && (a._forceResizing(r), n._destroyResizing(e, i), n._initResizing(e, s, i))) }) }, dispose: function (e, i) { t(e.body).off(i.eventNamespace) }, _initResizing: function (t, i, n) { var o = n.name, r = n.type; t[o] = new r(i, { rtl: e.support.isRtl(t.element), rootElement: t.body }) }, _destroyResizing: function (e, t) { var i = t.name; e[i] && (e[i].destroy(), e[i] = null) } }), h.current = new h, u.create = function (e, t) { h.current.create(e, t) }, u.dispose = function (e, t) { h.current.dispose(e, t) }, i(r, { TableElementResizing: u }); var e, t, i, n, o, r, s, a, l, c, d, u, h }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/resizing/column-resizing.min", ["editor/main.min", "editor/resizing/resizing-utils.min", "editor/resizing/table-element-resizing.min"], function () { e = window.kendo, t = window, i = t.Math, n = i.abs, o = e.jQuery, r = o.extend, s = e.ui.editor, a = s.TableElementResizing, l = s.ResizingUtils, c = l.constrain, d = l.calculatePercentageRatio, u = l.getScrollBarWidth, h = l.inPercentages, f = l.toPercentages, p = l.toPixels, m = e._outerWidth, g = ".kendoEditorColumnResizing", v = "k-column-resize-handle", _ = "k-column-resize-marker", b = "body", w = "tbody", y = "tr", k = "width", x = a.extend({ options: { tags: ["td", "th"], min: 20, rootElement: null, eventNamespace: g, rtl: !1, handle: { dataAttribute: "column", width: 10, height: 0, classNames: { handle: v, marker: _ }, template: '<div class="k-column-resize-handle-wrapper" unselectable="on" contenteditable="false"><div class="' + v + '"><div class="' + _ + '"></div></div></div>' } }, elementBorderHovered: function (e, t) { var i = this.options, n = i.handle.width, r = e.offset().left + (i.rtl ? 0 : m(e)), s = t.clientX + o(e[0].ownerDocument).scrollLeft(); return s > r - n && s < r + n }, setResizeHandlePosition: function (e) { var t = this, i = o(t.element).children(w), n = t.options, r = n.rtl, s = n.handle.width, a = o(n.rootElement), l = a.is(b) ? 0 : a.scrollTop(), c = a.is(b) ? 0 : a.scrollLeft(), d = r ? 0 : m(e), h = r ? u(a[0]) : 0; t.resizeHandle.css({ top: i.position().top + l, left: e.position().left + d + (c - h) - s / 2, position: "absolute" }) }, setResizeHandleDimensions: function () { var e = this, t = o(e.element).children(w); e.resizeHandle.css({ width: e.options.handle.width, height: t.height() }) }, setResizeHandleDragPosition: function (e) { var t = this, i = o(o(e.currentTarget).data(t.options.handle.dataAttribute)), n = t.options, r = n.handle ? n.handle.width : 0, s = n.min, a = n.rtl, l = m(i), d = i.position().left, h = m(i.next()), f = o(t.resizeHandle), p = o(n.rootElement), g = p.is(b) ? 0 : p.scrollLeft(), v = a ? u(p[0]) : 0, _ = c({ value: f.position().left + (g - v) + e.x.delta, min: d + (g - v) - (a ? h : 0) + s, max: d + l + (g - v) + (a ? 0 : h) - r - s }); f.css({ left: _ }) }, resize: function (e) { var t, i, n, r = this, s = o(o(e.currentTarget).data(r.options.handle.dataAttribute)), a = r.options, l = a.rtl ? -1 : 1, d = a.min, u = l * e.x.initialDelta; r._setTableComputedWidth(), r._setColumnsComputedWidth(), n = m(s), i = m(s.next()), t = c({ value: n + u, min: d, max: n + i - d }), r._resizeColumn(s[0], t), r._resizeTopAndBottomColumns(s[0], t), r._resizeAdjacentColumns(s.index(), i, n, n - t) }, _setTableComputedWidth: function () { var e = this.element; "" === e.style[k] && (e.style[k] = p(m(o(e)))) }, _setColumnsComputedWidth: function () { var e, t = o(this.element).children(w), i = m(t), n = t.children(y).children("td"), r = n.length, s = n.map(function () { return m(o(this)) }); for (e = 0; e < r; e++)n[e].style[k] = h(n[e].style[k]) ? f(d(s[e], i)) : p(s[e]) }, _resizeTopAndBottomColumns: function (e, t) { var i, n = this, r = o(e).index(), s = o(n.element).children(w).children(y).children(n.options.tags.join(",")).filter(function () { return o(this).index() === r && this !== e }), a = s.length; for (i = 0; i < a; i++)n._resizeColumn(s[i], t) }, _resizeColumn: function (e, t) { e.style[k] = h(e.style[k]) ? f(d(t, m(o(this.element).children(w)))) : p(t) }, _resizeAdjacentColumns: function (e, t, i, n) { var r, s = this, a = o(s.element).children(w).children(y).children(s.options.tags.join(",")).filter(function () { return o(this).index() === e + 1 }), l = a.length; for (r = 0; r < l; r++)s._resizeAdjacentColumn(a[r], t, i, n) }, _resizeAdjacentColumn: function (e, t, i, o) { var r = this.options.min, s = c({ value: t + o, min: r, max: n(i + t - r) }); this._resizeColumn(e, s) } }), x.create = function (e) { a.create(e, { name: "columnResizing", type: x, eventNamespace: g }) }, x.dispose = function (e) { a.dispose(e, { eventNamespace: g }) }, r(s, { ColumnResizing: x }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/resizing/row-resizing.min", ["editor/main.min", "editor/resizing/resizing-utils.min", "editor/resizing/table-element-resizing.min"], function () { e = window.kendo, t = window.Math, i = t.abs, n = e.jQuery, o = n.extend, r = e.ui.editor, s = r.TableElementResizing, a = r.ResizingUtils, l = a.getScrollBarWidth, c = a.constrain, d = a.calculatePercentageRatio, u = a.inPercentages, h = a.toPercentages, f = a.toPixels, p = e._outerHeight, m = ".kendoEditorRowResizing", g = "k-row-resize-handle", v = "k-row-resize-marker", _ = "body", b = "tr", w = "tbody", y = "height", k = s.extend({ options: { tags: [b], min: 20, rootElement: null, eventNamespace: m, rtl: !1, handle: { dataAttribute: "row", width: 0, height: 10, classNames: { handle: g, marker: v }, template: '<div class="k-row-resize-handle-wrapper" unselectable="on" contenteditable="false"><div class="' + g + '"><div class="k-row-resize-marker-wrapper"><div class="' + v + '"></div></div></div></div>' } }, elementBorderHovered: function (e, t) { var i = this.options.handle[y], o = e.offset().top + p(e), r = t.clientY + n(e[0].ownerDocument).scrollTop(); return r > o - i && r < o + i }, setResizeHandlePosition: function (e) { var t = this.options, i = t.handle[y], o = e.position(), r = n(t.rootElement), s = r.is(_) ? 0 : r.scrollTop(), a = r.is(_) ? 0 : r.scrollLeft(), c = t.rtl ? l(r[0]) : 0; this.resizeHandle.css({ top: o.top + p(e) + s - i / 2, left: o.left + (a - c), position: "absolute" }) }, setResizeHandleDimensions: function () { var e = this; e.resizeHandle.css({ width: n(e.element).children(w).width(), height: e.options.handle[y] }) }, setResizeHandleDragPosition: function (e) { var t = this, i = t.options, o = i.min, r = n(t.element).children(w), s = r.position().top, a = n(t.resizeHandle), l = n(e.currentTarget).data(i.handle.dataAttribute), d = n(i.rootElement), u = d.is(_) ? 0 : d.scrollTop(), h = c({ value: a.position().top + u + e.y.delta, min: n(l).position().top + u + o, max: s + p(r) + u - i.handle[y] - o }); a.css({ top: h }) }, resize: function (e) { var t = this, o = t.options, r = n(e.currentTarget).data(o.handle.dataAttribute), s = p(n(r)), a = n(t.element), l = p(a), d = a.children(w), h = d.height(), m = r.style[y], g = c({ value: s + e.y.initialDelta, min: o.min, max: i(h - o.min) }); t._setRowsHeightInPixels(), r.style[y] = f(g), t._setTableHeight(l + (g - s)), u(m) && t._setRowsHeightInPercentages() }, _setRowsHeightInPixels: function () { var e, t = n(this.element).children(w).children(b), i = t.length, o = t.map(function () { return p(n(this)) }); for (e = 0; e < i; e++)t[e].style[y] = f(o[e]) }, _setRowsHeightInPercentages: function () { var e, t = n(this.element).children(w), i = t.height(), o = t.children(b), r = o.length, s = o.map(function () { return p(n(this)) }); for (e = 0; e < r; e++)o[e].style[y] = h(d(s[e], i)) }, _setTableHeight: function (e) { var t = this.element; t.style[y] = u(t.style[y]) ? h(d(e, n(t).parent().height())) : f(e) } }), k.create = function (e) { s.create(e, { name: "rowResizing", type: k, eventNamespace: m }) }, k.dispose = function (e) { s.dispose(e, { eventNamespace: m }) }, o(r, { RowResizing: k }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/resizing/table-resize-handle.min", ["editor/main.min", "kendo.draganddrop.min", "editor/resizing/resizing-utils.min"], function () { e = window.kendo, x = e.jQuery, C = x.extend, S = x.noop, T = x.proxy, D = e.ui.editor, A = e.Class, E = e.ui.Draggable, I = e.Observable, M = D.ResizingUtils.getScrollBarWidth, R = e._outerWidth, F = e._outerHeight, z = ".kendoEditorTableResizeHandle", P = "k-table-resize-handle", B = "dragStart", L = "drag", H = "dragEnd", N = "halfInside", O = "mouseover", V = "mouseout", U = "east", W = "north", q = "northeast", j = "northwest", G = "south", $ = "southeast", Y = "southwest", K = "west", Q = I.extend({ init: function (e) { var t = this; I.fn.init.call(t), t.options = C({}, t.options, e), t.element = x(t.options.template).appendTo(t.options.appendTo)[0], t._attachEventHandlers(), t._addStyles(), t._initDraggable(), t._initPositioningStrategy(), t._initDraggingStrategy(), x(t.element).data("table", t.options.resizableElement) }, destroy: function () { var e = this; x(e.element).off(z).remove(), e.element = null, e._destroyDraggable(), e.unbind() }, options: { appendTo: null, direction: $, resizableElement: null, rtl: !1, template: "<div class='k-table-resize-handle-wrapper' unselectable='on' contenteditable='false'><div class='" + P + "'></div></div>" }, events: [B, L, H, O, V], show: function () { this._setPosition() }, _setPosition: function () { var e = this._positioningStrategy.getPosition(); x(this.element).css({ top: e.top, left: e.left, position: "absolute" }) }, _attachEventHandlers: function () { var e = this; x(e.element).on(O + z, T(e._onMouseOver, e)).on(V + z, T(e._onMouseOut, e)) }, _onMouseOver: function () { this.trigger(O) }, _onMouseOut: function () { this.trigger(V) }, _addStyles: function () { x(this.element).children("." + P).addClass("k-resize-" + this.options.direction) }, _initPositioningStrategy: function () { var e = this, i = e.options; e._positioningStrategy = t.create({ name: i.direction, handle: e.element, resizableElement: i.resizableElement, rootElement: i.rootElement, rtl: i.rtl }) }, _initDraggable: function () { var e = this, t = e.element; !e._draggable && t && (e._draggable = new E(t, { dragstart: T(e._onDragStart, e), drag: T(e._onDrag, e), dragend: T(e._onDragEnd, e) })) }, _onDragStart: function () { this.trigger(B) }, _onDrag: function (e) { this.trigger(L, this._draggingStrategy.adjustDragDelta({ deltaX: e.x.delta, deltaY: e.y.delta, initialDeltaX: e.x.initialDelta, initialDeltaY: e.y.initialDelta })) }, _onDragEnd: function () { this.trigger(H) }, _destroyDraggable: function () { var e = this; e._draggable && (e._draggable.destroy(), e._draggable = null) }, _initDraggingStrategy: function () { this._draggingStrategy = u.create({ name: this.options.direction }) } }), X = A.extend({ init: function () { this._items = [] }, register: function (e, t) { this._items.push({ name: e, type: t }) }, create: function (e) { var t, i, n, o = this._items, r = o.length, s = e.name ? e.name.toLowerCase() : ""; for (n = 0; n < r; n++)if ((i = o[n]).name.toLowerCase() === s) { t = i; break } if (t) return new t.type(e) } }), Z = X.extend({}), Z.current = new Z, (t = A.extend({ init: function (e) { this.options = C({}, this.options, e) }, options: { handle: null, offset: N, resizableElement: null, rootElement: null, rtl: !1 }, getPosition: function () { var e = this, t = e.calculatePosition(), i = e.applyHandleOffset(t), n = e.applyScrollOffset(i); return n }, calculatePosition: S, applyHandleOffset: function (e) { var t = this.options, i = x(t.handle); return t.offset === N ? { top: e.top - F(i) / 2, left: e.left - R(i) / 2 } : e }, applyScrollOffset: function (e) { var t = this.options, i = x(t.rootElement), n = t.rtl ? M(i[0]) : 0; return i.is("body") ? e : { top: e.top + (i.scrollTop() || 0), left: e.left + (i.scrollLeft() || 0) - n } } })).create = function (e) { return Z.current.create(e) }, i = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top + F(e) / 2, left: t.left + R(e) } } }), Z.current.register(U, i), n = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top, left: t.left + R(e) / 2 } } }), Z.current.register(W, n), o = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top, left: t.left + R(e) } } }), Z.current.register(q, o), r = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top, left: t.left } } }), Z.current.register(j, r), s = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top + F(e), left: t.left + R(e) / 2 } } }), Z.current.register(G, s), a = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top + F(e), left: t.left + R(e) } } }), Z.current.register($, a), l = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top + F(e), left: t.left } } }), Z.current.register(Y, l), c = t.extend({ calculatePosition: function () { var e = x(this.options.resizableElement), t = e.position(); return { top: t.top + F(e) / 2, left: t.left } } }), Z.current.register(K, c), (d = X.extend({})).current = new d, (u = A.extend({ init: function (e) { this.options = C({}, this.options, e) }, options: { deltaX: { adjustment: null, modifier: null }, deltaY: { adjustment: null, modifier: null } }, adjustDragDelta: function (e) { var t = this.options, i = t.deltaX.adjustment * t.deltaX.modifier, n = t.deltaY.adjustment * t.deltaY.modifier; return { deltaX: e.deltaX * i, deltaY: e.deltaY * n, initialDeltaX: e.initialDeltaX * i, initialDeltaY: e.initialDeltaY * n } } })).create = function (e) { return d.current.create(e) }, h = u.extend({ options: { deltaX: { adjustment: 1, modifier: 1 }, deltaY: { adjustment: 0, modifier: 0 } } }), f = h.extend({ options: { deltaX: { modifier: 1 } } }), d.current.register(U, f), p = h.extend({ options: { deltaX: { modifier: -1 } } }), d.current.register(K, p), m = u.extend({ options: { deltaX: { adjustment: 0, modifier: 0 }, deltaY: { adjustment: 1, modifier: 1 } } }), g = m.extend({ options: { deltaY: { modifier: -1 } } }), d.current.register(W, g), v = m.extend({ options: { deltaY: { modifier: 1 } } }), d.current.register(G, v), _ = u.extend({ options: { deltaX: { adjustment: 1, modifier: 1 }, deltaY: { adjustment: 1, modifier: 1 } } }), b = _.extend({ options: { deltaX: { modifier: 1 }, deltaY: { modifier: -1 } } }), d.current.register(q, b), w = _.extend({ options: { deltaX: { modifier: -1 }, deltaY: { modifier: -1 } } }), d.current.register(j, w), y = _.extend({ options: { deltaX: { modifier: 1 }, deltaY: { modifier: 1 } } }), d.current.register($, y), k = _.extend({ options: { deltaX: { modifier: -1 }, deltaY: { modifier: 1 } } }), d.current.register(Y, k), C(D, { TableResizeHandle: Q }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H, N, O, V, U, W, q, j, G, $, Y, K, Q, X, Z }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/resizing/table-resizing.min", ["editor/main.min", "editor/resizing/table-resize-handle.min", "editor/resizing/resizing-utils.min"], function () { !function (e, t) { function i(e) { return t === e } var n = window, o = n.Math, r = o.min, s = o.max, a = e.jQuery, l = a.contains, c = a.extend, d = a.proxy, u = e.support.browser, h = e.ui.editor, f = e.Class, p = h.TableResizeHandle, m = h.ResizingUtils, g = m.calculatePercentageRatio, v = m.constrain, _ = m.inPercentages, b = m.inPixels, w = m.toPercentages, y = m.toPixels, k = e._outerWidth, x = e._outerHeight, C = ".kendoEditorTableResizing", S = "k-table-resize-handle-wrapper", T = "k-table", D = "k-table-resizing", A = "keydown", E = "mousedown", I = "tr", M = "tbody", R = "table", F = "width", z = "height", P = f.extend({ init: function (e, t) { var i = this; i.options = c({}, i.options, t), i.handles = [], a(e).is(R) && (i.element = e) }, destroy: function () { var e = this; a(e.element).off(C), e.element = null, a(e.options.rootElement).off(A + C), e._destroyResizeHandles() }, options: { appendHandlesTo: null, rtl: !1, rootElement: null, minWidth: 10, minHeight: 10, handles: [{ direction: "northwest" }, { direction: "north" }, { direction: "northeast" }, { direction: "east" }, { direction: "southeast" }, { direction: "south" }, { direction: "southwest" }, { direction: "west" }] }, resize: function (e) { var t = this, i = c({}, { deltaX: 0, deltaY: 0, initialDeltaX: 0, initialDeltaY: 0 }, e); t._resizeWidth(i.deltaX, i.initialDeltaX), t._resizeHeight(i.deltaY, i.initialDeltaY), t.showResizeHandles() }, _resizeWidth: function (e, t) { var n, o, l, c, d = this, u = a(d.element), h = u[0].style[F], f = k(u), p = u.parent().width(), m = d._getMaxDimensionValue(F); 0 !== e && (i(d._initialElementWidth) && (d._initialElementWidth = f), c = v({ value: d._initialElementWidth + t, min: d.options.minWidth, max: m }), _(h) ? (f + e > p ? (o = s(c, p), l = r(c, p)) : (o = r(c, p), l = s(c, p)), n = w(g(o, l))) : n = y(c), d._setColumnsWidth(), u[0].style[F] = n) }, _resizeHeight: function (e, t) { var n, o, l, c, d = this, u = a(d.element), h = u[0].style[z], f = x(u), p = u.parent(), m = p.height(), b = d._getMaxDimensionValue(z), k = d.options.minHeight, C = d._hasRowsInPixels(); 0 !== e && (i(d._initialElementHeight) && (d._initialElementHeight = f), c = v({ value: d._initialElementHeight + t, min: k, max: b }), C && e < 0 && d._setRowsHeightInPercentages(), _(h) ? (f + e > m ? (o = s(c, m), l = r(c, m)) : (o = r(c, m), l = s(c, m)), n = w(g(o, l))) : n = y(c), u[0].style[z] = n, C && e < 0 && d._setRowsHeightInPixels()) }, _getMaxDimensionValue: function (e) { var t = this, i = a(t.element), n = e.toLowerCase(), o = t.options.rtl ? -1 : 1, r = a(t.element).parent(), s = r[0], l = r[n](), c = o * (e === F ? r.scrollLeft() : r.scrollTop()); return s === i.closest("td")[0] ? "" !== s.style[n] || _(t.element.style[n]) ? l + c : 1 / 0 : l + c }, _setColumnsWidth: function () { var e, t = a(this.element), i = t.parent()[0], n = t.closest("td"), o = n.closest(I).children(), r = o.length; if (function (e) { var t = e.style.width; return "" !== t ? !!_(t) : !!a(e).hasClass(T) }(t[0]) && i === n[0] && "" === i.style[F]) for (e = 0; e < r; e++)o[e].style[F] = y(a(o[e]).width()) }, _hasRowsInPixels: function () { var e, t = a(this.element).children(M).children(I); for (e = 0; e < t.length; e++)if ("" === t[e].style.height || b(t[e].style.height)) return !0; return !1 }, _setRowsHeightInPercentages: function () { var e, t = a(this.element).children(M), i = t.height(), n = t.children(I), o = n.length, r = n.map(function () { return x(a(this)) }); for (e = 0; e < o; e++)n[e].style[z] = w(g(r[e], i)) }, _setRowsHeightInPixels: function () { var e, t = a(this.element).children(M).children(I), i = t.length, n = t.map(function () { return x(a(this)) }); for (e = 0; e < i; e++)t[e].style[z] = y(n[e]) }, showResizeHandles: function () { this._initResizeHandles(), this._showResizeHandles() }, _initResizeHandles: function () { var e, t = this, i = t.handles, n = t.options, o = t.options.handles, r = o.length; if (!(i && i.length > 0)) { for (e = 0; e < r; e++)t.handles.push(new p(c({ appendTo: n.appendHandlesTo, resizableElement: t.element, rootElement: n.rootElement, rtl: n.rtl }, o[e]))); t._bindToResizeHandlesEvents() } }, _destroyResizeHandles: function () { var e, t = this, i = t.handles ? t.handles.length : 0; for (e = 0; e < i; e++)t.handles[e].destroy() }, _showResizeHandles: function () { var e, t = this.handles || [], i = t.length; for (e = 0; e < i; e++)this.handles[e].show() }, _bindToResizeHandlesEvents: function () { var e, t, i = this, n = i.handles || [], o = n.length; for (e = 0; e < o; e++)(t = n[e]).bind("dragStart", d(i._onResizeHandleDragStart, i)), t.bind("drag", d(i._onResizeHandleDrag, i)), t.bind("dragEnd", d(i._onResizeHandleDragEnd, i)), t.bind("mouseover", d(i._onResizeHandleMouseOver, i)), t.bind("mouseout", d(i._onResizeHandleMouseOut, i)) }, _onResizeHandleDragStart: function () { var e = this, t = a(e.element); t.addClass(D), e._initialElementHeight = x(t), e._initialElementWidth = k(t), e._disableKeyboard() }, _onResizeHandleDrag: function (e) { this.resize(e) }, _onResizeHandleDragEnd: function () { a(this.element).removeClass(D), this._enableKeyboard() }, _enableKeyboard: function () { a(this.options.rootElement).off(A + C) }, _disableKeyboard: function () { a(this.options.rootElement).on(A + C, function (e) { e.preventDefault() }) } }), B = f.extend({ create: function (e) { var t = this; a(e.body).on(E + C, R, function (i) { var n = i.target, o = i.currentTarget, r = e.tableResizing, s = r ? r.element : null; if (r) { if (s && o !== s) { if (l(o, s) && s !== n && l(s, n)) return; s !== n && (e._destroyTableResizing(), t._initResizing(e, o)) } } else t._initResizing(e, o); e._showTableResizeHandles() }).on(E + C, function (t) { var i = e.tableResizing, n = i ? i.element : null, o = t.target, r = a(o).hasClass(S) || a(o).parents("." + S).length > 0; !i || n === o || l(n, o) || r || e._destroyTableResizing() }) }, dispose: function (e) { a(e.body).off(C) }, _initResizing: function (t, i) { u.msie || u.mozilla || (t.tableResizing = new P(i, { appendHandlesTo: t.body, rtl: e.support.isRtl(t.element), rootElement: t.body })) } }); B.current = new B, P.create = function (e) { B.current.create(e) }, P.dispose = function (e) { B.current.dispose(e) }, c(h, { TableResizing: P }) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/immutables.min", ["editor/tables.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = t.Class, n = t.ui.editor, o = n.Dom, r = t.template, s = n.RangeUtils, a = ["ul", "ol", "tbody", "thead", "table"], l = "k-immutable", c = "[" + l + "]", d = function (t) { return e(t).is("body,.k-editor") }, u = function (e) { return e.getAttribute && "false" == e.getAttribute("contenteditable") }, h = function (e) { return o.closestBy(e, u, d) }, f = function (e) { if (h(e.commonAncestorContainer)) return !0; if (h(e.startContainer) || h(e.endContainer)) { var t = s.editableTextNodes(e); if (0 === t.length) return !0 } return !1 }, p = function (e) { var t, i = "", n = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"; for (t = e || 10; t > 0; --t)i += n.charAt(Math.round(Math.random() * (n.length - 1))); return i }, m = function (e) { var i = t.keys; return e === i.BACKSPACE || e == i.DELETE }, g = function (e) { var t = e ? e.options : void 0; t && t.finder && t.finder._initOptions({ immutables: !0 }) }, v = i.extend({ init: function (t) { this.editor = t, this.serializedImmutables = {}, this.options = e.extend({}, t && t.options && t.options.immutables); var i = t.toolbar.tools; g(i.justifyLeft), g(i.justifyCenter), g(i.justifyRight), g(i.justifyFull) }, serialize: function (e) { var t, i = this._toHtml(e); return -1 === i.indexOf(l) ? (t = this.randomId(), i = i.replace(/>/, " " + l + '="' + t + '">')) : t = i.match(/k-immutable\s*=\s*['"](.*)['"]/)[1], this.serializedImmutables[t] = e, i }, _toHtml: function (e) { var t, i = this.options.serialization, n = typeof i; switch (n) { case "string": return r(i)(e); case "function": return i(e); default: return "<" + (t = o.name(e)) + "></" + t + ">" } }, deserialize: function (i) { var n = this, o = this.options.deserialization; e(c, i).each(function () { var i = this.getAttribute(l), r = n.serializedImmutables[i]; t.isFunction(o) && o(this, r), e(this).replaceWith(r) }), n.serializedImmutables = {} }, randomId: function (e) { return p(e) }, keydown: function (e, t) { var i = m(e.keyCode), n = i && this._cancelDeleting(e, t) || !i && this._cancelTyping(e, t); if (n) return e.preventDefault(), !0 }, _cancelTyping: function (e, t) { var i = this.editor, n = i.keyboard; return t.collapsed && !n.typingInProgress && n.isTypingKey(e) && f(t) }, _cancelDeleting: function (e, i) { var n, r, s, l, c = t.keys, d = e.keyCode === c.BACKSPACE, u = e.keyCode == c.DELETE; if (!d && !u) return !1; if (n = !1, i.collapsed) { if (f(i)) return !0; if ((r = this.nextImmutable(i, u)) && d && ((s = o.closest(i.commonAncestorContainer, "li")) && ((l = o.closest(r, "li")) && l !== s))) return n; if (r && !o.tableCell(r)) { if (o.parentOfType(r, a) === o.parentOfType(i.commonAncestorContainer, a)) { for (; r && 1 == r.parentNode.childNodes.length;)r = r.parentNode; if (o.tableCell(r)) return n; this._removeImmutable(r, i) } n = !0 } } return n }, nextImmutable: function (e, t) { var i, n = e.commonAncestorContainer; if (o.isBom(n) || t && s.isEndOf(e, n) || !t && s.isStartOf(e, n)) { if ((i = this._nextNode(n, t)) && o.isBlock(i) && !h(i)) for (; i && i.children && i.children[t ? 0 : i.children.length - 1];)i = i.children[t ? 0 : i.children.length - 1]; return h(i) } }, _removeImmutable: function (e, t) { var i = this.editor, r = new n.RestorePoint(t, i.body); o.remove(e), n._finishUpdate(i, r) }, _nextNode: function (e, t) { for (var i, n = t ? "nextSibling" : "previousSibling", r = e; r && !i;)(i = r[n]) && o.isDataNode(i) && /^\s|[\ufeff]$/.test(i.nodeValue) && (i = (r = i)[n]), i || (r = r.parentNode); return i } }), v.immutable = u, v.immutableParent = h, v.expandImmutablesIn = function (e) { var t = h(e.startContainer), i = h(e.endContainer); (t || i) && (t && e.setStartBefore(t), i && e.setEndAfter(i)) }, v.immutablesContext = f, v.toolsToBeUpdated = ["bold", "italic", "underline", "strikethrough", "superscript", "subscript", "forecolor", "backcolor", "fontname", "fontsize", "createlink", "unlink", "autolink", "addcolumnleft", "addcolumnright", "addrowabove", "addrowbelow", "deleterow", "deletecolumn", "mergecells", "formatting", "cleanformatting"], v.removeImmutables = function (t) { var i, n, r, s = { empty: !0 }; return e(t).find("[contenteditable='false']").each(function (t, a) { i = o.name(a), n = p(), r = "<" + i + " " + l + "='" + n + "'></" + i + ">", s[n] = { node: a, style: e(a).attr("style") }, s.empty = !1, e(a).replaceWith(r) }), s }, v.restoreImmutables = function (t, i) { var n, o; e(t).find(c).each(function (t, r) { n = r.getAttribute(l), o = i[n], e(r).replaceWith(o.node), o.style != e(o.node).attr("style") && e(o.node).removeAttr("style").attr("style", o.style) }) }, n.Immutables = v; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/table-wizard/table-wizard-command.min", ["editor/tables.min"], function () { e = window.kendo.jQuery, i = window.kendo, n = i.ui.editor, o = n.EditorUtils, r = n.RangeUtils, s = n.Dom, a = o.registerTool, l = n.ToolTemplate, c = n.Command, d = new n.BlockFormatFinder([{ tags: ["table"] }]), u = new n.BlockFormatFinder([{ tags: ["td", "th"] }]), h = /([a-z]+|%)$/i, f = c.extend({ exec: function () { var o = this, r = o.editor, s = o.range = o.lockRange(), a = o._sourceTable = o.options.insertNewTable ? t : o._selectedTable(s), l = o._selectedTableCells = a ? o._selectedCells(s) : t, c = { visible: !1, messages: r.options.messages, closeCallback: e.proxy(o.onDialogClose, o), table: o.parseTable(a, l), dialogOptions: r.options.dialogOptions, isRtl: i.support.isRtl(r.wrapper) }, d = new n.TableWizardDialog(c); d.open() }, onDialogClose: function (e) { var t = this; t.releaseRange(t.range), e && (t.options.insertNewTable ? t.insertTable(t.createNewTable(e)) : t.updateTable(e, t._sourceTable, t._selectedTableCells)) }, releaseRange: function (e) { var t = this.editor.document; s.windowFromDocument(t).focus(), c.fn.releaseRange.call(this, e) }, insertTable: function (e) { var t = this.range; t.insertNode(e), t.collapse(!0), this.editor.selectRange(t) }, updateTable: function (t, i, n) { for (var o, r, a, l, c, d, u, h, f = this, p = e(i.rows).toArray(), m = t.tableProperties, g = m.rows, v = m.columns, _ = function (e) { return e[e.length - 1] }; n.length > 1;)n.pop(); if (o = n.length ? _(n).parentNode : _(p), f._deleteTableRows(p, p.length - g), p.length < g) for (l = e(o).index(), c = o.cells.length, d = g - p.length, a = o.parentNode; d;)r = a.insertRow(l + 1), f._insertCells(c - r.cells.length, r), d--; p[0].cells.length > v && e(p).each(function (e, t) { for (; t.cells.length > v;)t.deleteCell(-1) }), p[0].cells.length < v && (u = e(_(n) || _(o.cells)).index(), e(p).each(function (e, t) { f._insertCells(v - t.cells.length, t, u + 1) })), f._updateTableProperties(i, m), h = t.cellProperties, n[0] && s.attr(n[0], { id: h.id || null }), (h.selectAllCells ? e(p).children() : e(n)).each(function (e, t) { f._updateCellProperties(t, h) }), f._updateCaption(i, m), m.cellsWithHeaders = m.cellsWithHeaders || !1, f.cellsWithHeadersAssociated(i) != m.cellsWithHeaders && f.associateCellsWithHeader(i, m.cellsWithHeaders) }, _isHeadingRow: function (e) { return s.is(e.parentNode, "thead") || s.is(e.cells[0], "th") }, associateCellsWithHeader: function (t, i) { var n, o, r, s = (new Date).getTime(), a = [], l = t.rows[0].cells.length, c = function () { for (var e = 0; e < l; e++)a[e] = "table" + ++s }, d = function (t, n) { e(n)[i ? "attr" : "removeAttr"]("id", a[t]) }, u = function (t, n) { e(n)[i ? "attr" : "removeAttr"]("headers", a[t]) }, h = this._isHeadingRow; e(t.rows).each(function (i, s) { if (h(s)) for (n = i, o = t.rows[++n], (r = o && !h(o)) && (c(), e(s.cells).each(d)); r;)e(o.cells).each(u), o = t.rows[++n], r = o && !h(o) }) }, cellsWithHeadersAssociated: function (t) { var i = e(t.rows).children(), n = this._isHeadingRow, o = []; return i.each(function (e, t) { t.id && n(t.parentNode) && o.push(t.id) }), !!i.filter(function (t, i) { var r = i.getAttribute("headers"); return r && !n(i.parentNode) && e.inArray(r, o) > -1 }).length }, _insertCells: function (e, t, i) { i = isNaN(i) ? -1 : i; for (var n = 0; n < e; n++)t.insertCell(i).innerHTML = "&nbsp;" }, _deleteTableRows: function (e, t) { for (var i, n, o = 0; o < t; o++)i = e.pop(), (n = i.parentNode).removeChild(i), n.rows.length || s.remove(n) }, createNewTable: function (e) { var t, i, n, o, r, a = this, l = a.editor.document, c = e.tableProperties, d = e.cellProperties, u = d.selectAllCells, h = s.create(l, "table"); for (a._updateTableProperties(h, c), a._updateCaption(h, c), t = h.createTBody(), i = 0; i < c.rows; i++)for (n = t.insertRow(), o = 0; o < c.columns; o++)(r = n.insertCell()).innerHTML = "&nbsp;", 0 === i && 0 === o && d.id && (r.id = d.id), a._updateCellProperties(r, u || 0 === i && 0 === o ? d : {}); return c.cellsWithHeaders && a.associateCellsWithHeader(h, c.cellsWithHeaders), h }, _updateTableProperties: function (t, i) { var n = this._getStylesData(i); s.attr(t, { cellSpacing: i.cellSpacing || null, cellPadding: i.cellPadding || null, className: i.className || null, id: i.id || null, summary: i.summary || null, style: n || null }), e(t).addClass("k-table") }, _updateCellProperties: function (e, t) { var i = this._getStylesData(t); i.padding = t.cellPadding || null, i.margin = t.cellMargin || null, s.attr(e, { style: i || null, className: t.className || null }) }, _updateCaption: function (e, t) { var i, n; e.caption && !t.captionContent ? e.deleteCaption() : t.captionContent && ((i = e.createCaption()).innerHTML = t.captionContent, n = this._getAlignmentData(t.captionAlignment), s.attr(i, { style: { textAlign: n.textAlign, verticalAlign: n.verticalAlign } })) }, _getStylesData: function (e) { var t = this._getAlignmentData(e.alignment), i = "wrapText" in e ? e.wrapText ? "" : "nowrap" : null; return { width: e.width ? e.width + e.widthUnit : null, height: e.height ? e.height + e.heightUnit : null, textAlign: t.textAlign, verticalAlign: t.verticalAlign, backgroundColor: e.bgColor || null, borderWidth: e.borderWidth, borderStyle: e.borderStyle, borderColor: e.borderColor, borderCollapse: e.collapseBorders ? "collapse" : null, whiteSpace: i } }, _getAlignmentData: function (e) { var t, i = "", n = i; return e && (-1 != e.indexOf(" ") ? (t = e.split(" "), i = t[0], n = t[1]) : i = e), { textAlign: i, verticalAlign: n } }, parseTable: function (i, n) { var o, r, s, a, l, c, d, u, h, f; return i ? (o = this, r = i.style, s = i.rows, a = i.caption, (l = e(a ? a.cloneNode(!0) : t)).find(".k-marker").remove(), c = (c = (c = (c = i.className).replace(/^k-table\s|\sk-table$/, "")).replace(/\sk-table\s/, " ")).replace(/^k-table$/, ""), d = o._getAlignment(i, !0), u = a ? o._getAlignment(a) : t, h = o.cellsWithHeadersAssociated(i), (f = { tableProperties: { width: r.width || i.width ? parseFloat(r.width || i.width) : null, height: r.height || i.height ? parseFloat(r.height || i.height) : null, columns: s[0] ? s[0].children.length : 0, rows: s.length, widthUnit: o._getUnit(r.width), heightUnit: o._getUnit(r.height), cellSpacing: i.cellSpacing, cellPadding: i.cellPadding, alignment: d.textAlign, bgColor: r.backgroundColor || i.bgColor, className: c, id: i.id, borderWidth: r.borderWidth || i.border, borderColor: r.borderColor, borderStyle: r.borderStyle || "", collapseBorders: !!r.borderCollapse, summary: i.summary, captionContent: a ? l.html() : "", captionAlignment: a && u.textAlign ? u.textAlign + " " + u.verticalAlign : "", cellsWithHeaders: h }, selectedCells: [] }).rows = o.parseTableRows(s, n, f), f) : { tableProperties: {}, selectedCells: [] } }, parseTableRows: function (t, i, n) { var o, r, s, a, l, c, d, u = []; for (c = 0; c < t.length; c++)for (o = t[c], r = { cells: [] }, s = o.cells, u.push(r), d = 0; d < s.length; d++)a = s[d], l = this.parseCell(a), -1 != e.inArray(a, i) && n.selectedCells.push(l), r.cells.push(l); return u }, parseCell: function (e) { var t = this, i = e.style, n = t._getAlignment(e); return n = n.textAlign ? n.textAlign + " " + n.verticalAlign : "", { width: i.width || e.width ? parseFloat(i.width || e.width) : null, height: i.height || e.height ? parseFloat(i.height || e.height) : null, widthUnit: t._getUnit(i.width), heightUnit: t._getUnit(i.height), cellMargin: i.margin, cellPadding: i.padding, alignment: n, bgColor: i.backgroundColor || e.bgColor, className: e.className, id: e.id, borderWidth: i.borderWidth || e.border, borderColor: i.borderColor, borderStyle: i.borderStyle, wrapText: "nowrap" != i.whiteSpace } }, _getAlignment: function (e, t) { var i, n = e.style, o = n.textAlign || e.align || ""; return t ? { textAlign: o } : (i = n.verticalAlign || e.vAlign || "", o && i ? { textAlign: o, verticalAlign: i } : !o && i ? { textAlign: "left", verticalAlign: i } : o && !i ? { textAlign: o, verticalAlign: "top" } : { textAlign: "", verticalAlign: "" }) }, _getUnit: function (e) { var t = (e || "").match(h); return t ? t[0] : "px" }, _selectedTable: function (e) { var t = s.filterBy(r.nodes(e), s.htmlIndentSpace, !0); return d.findSuitable(t)[0] }, _selectedCells: function (e) { var t = s.filterBy(r.nodes(e), s.htmlIndentSpace, !0); return u.findSuitable(t) } }), p = n.Tool.extend({ command: function (e) { return e.insertNewTable = this.options.insertNewTable, new f(e) } }), m = p.extend({ update: function (e, t) { var i = !d.isFormatted(t); e.toggleClass("k-state-disabled", i) } }), i.ui.editor.TableWizardTool = p, i.ui.editor.TableWizardCommand = f, a("tableWizard", new m({ command: f, insertNewTable: !1, template: new l({ template: o.buttonTemplate, title: "Table Wizard" }) })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("editor/table-wizard/table-wizard-dialog.min", ["editor/table-wizard/table-wizard-command.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = { format: "0", min: 0 }, n = ["px", "em"], o = ["solid", "dotted", "dashed", "double", "groove", "ridge", "inset", "outset", "initial", "inherit", "none", "hidden"], r = { dataSource: [{ className: "k-icon k-i-table-align-middle-left", value: "left" }, { className: "k-icon k-i-table-align-middle-center", value: "center" }, { className: "k-icon k-i-table-align-middle-right", value: "right" }, { className: "k-icon k-i-align-remove", value: "" }], dataTextField: "className", dataValueField: "value", template: "<span class='#: className #' title='#: tooltip #'></span>", valueTemplate: "<span class='k-align-group #: className #' title='#: tooltip #'></span>" }, s = { dataSource: [{ className: "k-icon k-i-table-align-top-left", value: "left top" }, { className: "k-icon k-i-table-align-top-center", value: "center top" }, { className: "k-icon k-i-table-align-top-right", value: "right top" }, { className: "k-icon k-i-table-align-middle-left", value: "left middle" }, { className: "k-icon k-i-table-align-middle-center", value: "center middle" }, { className: "k-icon k-i-table-align-middle-right", value: "right middle" }, { className: "k-icon k-i-table-align-bottom-left", value: "left bottom" }, { className: "k-icon k-i-table-align-bottom-center", value: "center bottom" }, { className: "k-icon k-i-table-align-bottom-right", value: "right bottom" }, { className: "k-icon k-i-align-remove", value: "" }], dataTextField: "className", dataValueField: "value", template: "<span class='#: className #' title='#: tooltip #'></span>", valueTemplate: "<span class='k-align-group #: className #' title='#: tooltip #'></span>" }, a = { dataSource: [{ className: "k-icon k-i-table-align-top-left", value: "left top" }, { className: "k-icon k-i-table-align-top-center", value: "center top" }, { className: "k-icon k-i-table-align-top-right", value: "right top" }, { className: "k-icon k-i-table-align-bottom-left", value: "left bottom" }, { className: "k-icon k-i-table-align-bottom-center", value: "center bottom" }, { className: "k-icon k-i-table-align-bottom-right", value: "right bottom" }, { className: "k-icon k-i-align-remove", value: "" }], dataTextField: "className", dataValueField: "value", template: "<span class='#: className #' title='#: tooltip #'></span>", valueTemplate: "<span class='k-align-group #: className #' title='#: tooltip #'></span>" }, l = t.Class.extend({ init: function (e) { this.options = e }, open: function () { function t(e) { e.preventDefault(), r.destroy(), n.destroy() } function i(e) { t(e), s.closeCallback() } var n, o, r = this, s = r.options, a = s.dialogOptions, l = s.table, c = s.messages; a.close = i, a.title = c.tableWizard, a.visible = s.visible, n = e(r._dialogTemplate(c)).appendTo(document.body).kendoWindow(a).closest(".k-window").toggleClass("k-rtl", s.isRtl).end().find(".k-dialog-ok").click(function (e) { r.collectDialogValues(l), t(e), r.change && r.change(), s.closeCallback(l) }).end().find(".k-dialog-close").click(i).end().data("kendoWindow"), o = n.element, r._initTabStripComponent(o), r._initTableViewComponents(o, l), r._initCellViewComponents(o, l), r._initAccessibilityViewComponents(o, l), n.center(), n.open() }, _initTabStripComponent: function (e) { var t = this.components = {}; t.tabStrip = e.find("#k-table-wizard-tabs").kendoTabStrip({ animation: !1 }).data("kendoTabStrip") }, collectDialogValues: function () { var e = this, t = e.options.table; e._collectTableViewValues(t), e._collectCellViewValues(t), e._collectAccessibilityViewValues(t) }, _collectTableViewValues: function (e) { var t = this.components.tableView, i = e.tableProperties; i.width = t.width.value(), i.widthUnit = t.widthUnit.value(), i.height = t.height.value(), i.columns = t.columns.value(), i.rows = t.rows.value(), i.heightUnit = t.heightUnit.value(), i.cellSpacing = t.cellSpacing.value(), i.cellPadding = t.cellPadding.value(), i.alignment = t.alignment.value(), i.bgColor = t.bgColor.value(), i.className = t.className.value, i.id = t.id.value, i.borderWidth = t.borderWidth.value(), i.borderColor = t.borderColor.value(), i.borderStyle = t.borderStyle.value(), i.collapseBorders = t.collapseBorders.checked }, _collectCellViewValues: function (e) { var t = e.cellProperties = {}, i = this.components.cellView; t.selectAllCells = i.selectAllCells.checked, t.width = i.width.value(), t.widthUnit = i.widthUnit.value(), t.height = i.height.value(), t.heightUnit = i.heightUnit.value(), t.cellMargin = i.cellMargin.value(), t.cellPadding = i.cellPadding.value(), t.alignment = i.alignment.value(), t.bgColor = i.bgColor.value(), t.className = i.className.value, t.id = i.id.value, t.borderWidth = i.borderWidth.value(), t.borderColor = i.borderColor.value(), t.borderStyle = i.borderStyle.value(), t.wrapText = i.wrapText.checked }, _collectAccessibilityViewValues: function (e) { var t = e.tableProperties, i = this.components.accessibilityView; t.captionContent = i.captionContent.value, t.captionAlignment = i.captionAlignment.value(), t.summary = i.summary.value, t.cellsWithHeaders = i.cellsWithHeaders.checked }, _addUnit: function (t, i) { i && -1 == e.inArray(i, t) && t.push(i) }, _initTableViewComponents: function (e, t) { var i = this.components, r = i.tableView = {}, s = t.tableProperties = t.tableProperties || {}; s.borderStyle = s.borderStyle || "", this._addUnit(n, s.widthUnit), this._addUnit(n, s.heightUnit), this._initNumericTextbox(e.find("#k-editor-table-width"), "width", s, r), this._initNumericTextbox(e.find("#k-editor-table-height"), "height", s, r), this._initNumericTextbox(e.find("#k-editor-table-columns"), "columns", s, r, { min: 1, value: 4 }), this._initNumericTextbox(e.find("#k-editor-table-rows"), "rows", s, r, { min: 1, value: 4 }), this._initDropDownList(e.find("#k-editor-table-width-type"), "widthUnit", s, r, n), this._initDropDownList(e.find("#k-editor-table-height-type"), "heightUnit", s, r, n), this._initNumericTextbox(e.find("#k-editor-table-cell-spacing"), "cellSpacing", s, r), this._initNumericTextbox(e.find("#k-editor-table-cell-padding"), "cellPadding", s, r), this._initTableAlignmentDropDown(e.find("#k-editor-table-alignment"), s), this._initColorPicker(e.find("#k-editor-table-bg"), "bgColor", s, r), this._initInput(e.find("#k-editor-css-class"), "className", s, r), this._initInput(e.find("#k-editor-id"), "id", s, r), this._initNumericTextbox(e.find("#k-editor-border-width"), "borderWidth", s, r), this._initColorPicker(e.find("#k-editor-border-color"), "borderColor", s, r), this._initDropDownList(e.find("#k-editor-border-style"), "borderStyle", s, r, o), this._initCheckbox(e.find("#k-editor-collapse-borders"), "collapseBorders", s, r) }, _initCellViewComponents: function (e, t) { var i, r = this.components, s = r.cellView = {}; t.selectedCells = t.selectedCells = t.selectedCells || [], i = t.selectedCells[0] || { borderStyle: "", wrapText: !0 }, this._addUnit(n, i.widthUnit), this._addUnit(n, i.heightUnit), this._initCheckbox(e.find("#k-editor-selectAllCells"), "selectAllCells", t.tableProperties, s), this._initNumericTextbox(e.find("#k-editor-cell-width"), "width", i, s), this._initNumericTextbox(e.find("#k-editor-cell-height"), "height", i, s), this._initDropDownList(e.find("#k-editor-cell-width-type"), "widthUnit", i, s, n), this._initDropDownList(e.find("#k-editor-cell-height-type"), "heightUnit", i, s, n), this._initNumericTextbox(e.find("#k-editor-table-cell-margin"), "cellMargin", i, s), this._initNumericTextbox(e.find("#k-editor-table-cells-padding"), "cellPadding", i, s), this._initCellAlignmentDropDown(e.find("#k-editor-cell-alignment"), i), this._initColorPicker(e.find("#k-editor-cell-bg"), "bgColor", i, s), this._initInput(e.find("#k-editor-cell-css-class"), "className", i, s), this._initInput(e.find("#k-editor-cell-id"), "id", i, s), this._initNumericTextbox(e.find("#k-editor-cell-border-width"), "borderWidth", i, s), this._initColorPicker(e.find("#k-editor-cell-border-color"), "borderColor", i, s), this._initDropDownList(e.find("#k-editor-cell-border-style"), "borderStyle", i, s, o), this._initCheckbox(e.find("#k-editor-wrap-text"), "wrapText", i, s) }, _initAccessibilityViewComponents: function (e, t) { var i = this.components, n = i.accessibilityView = {}, o = t.tableProperties; this._initInput(e.find("#k-editor-table-caption"), "captionContent", o, n), this._initAccessibilityAlignmentDropDown(e.find("#k-editor-accessibility-alignment"), o), this._initInput(e.find("#k-editor-accessibility-summary"), "summary", o, n), this._initCheckbox(e.find("#k-editor-cells-headers"), "cellsWithHeaders", o, n) }, _initNumericTextbox: function (t, n, o, r, s) { var a = r[n] = t.kendoNumericTextBox(s ? e.extend({}, i, s) : i).data("kendoNumericTextBox"); n in o && a.value(parseInt(o[n], 10)) }, _initDropDownList: function (e, t, i, n, o) { var r = n[t] = e.kendoDropDownList({ dataSource: o }).data("kendoDropDownList"); this._setComponentValue(r, i, t) }, _initTableAlignmentDropDown: function (e, t) { var i = this.options.messages, n = this.components.tableView, o = r.dataSource; o[0].tooltip = i.alignLeft, o[1].tooltip = i.alignCenter, o[2].tooltip = i.alignRight, o[3].tooltip = i.alignRemove, this._initAlignmentDropDown(e, r, "alignment", t, n) }, _initCellAlignmentDropDown: function (e, t) { var i = this.options.messages, n = this.components.cellView, o = s.dataSource; o[0].tooltip = i.alignLeftTop, o[1].tooltip = i.alignCenterTop, o[2].tooltip = i.alignRightTop, o[3].tooltip = i.alignLeftMiddle, o[4].tooltip = i.alignCenterMiddle, o[5].tooltip = i.alignRightMiddle, o[6].tooltip = i.alignLeftBottom, o[7].tooltip = i.alignCenterBottom, o[8].tooltip = i.alignRightBottom, o[9].tooltip = i.alignRemove, this._initAlignmentDropDown(e, s, "alignment", t, n) }, _initAccessibilityAlignmentDropDown: function (e, t) { var i = this.options.messages, n = this.components.accessibilityView, o = a.dataSource; o[0].tooltip = i.alignLeftTop, o[1].tooltip = i.alignCenterTop, o[2].tooltip = i.alignRightTop, o[3].tooltip = i.alignLeftBottom, o[4].tooltip = i.alignCenterBottom, o[5].tooltip = i.alignRightBottom, o[6].tooltip = i.alignRemove, this._initAlignmentDropDown(e, a, "captionAlignment", t, n) }, _initAlignmentDropDown: function (e, t, i, n, o) { var r = o[i] = e.kendoDropDownList(t).data("kendoDropDownList"); r.list.addClass("k-align").css("width", "110px"), this._setComponentValue(r, n, i) }, _setComponentValue: function (e, t, i) { i in t && e.value(t[i]) }, _initColorPicker: function (e, t, i, n) { var o = n[t] = e.kendoColorPicker({ buttons: !1, clearButton: !0 }).data("kendoColorPicker"); i[t] && o.value(i[t]) }, _initInput: function (e, t, i, n) { var o = n[t] = e.get(0); t in i && (o.value = i[t]) }, _initCheckbox: function (e, t, i, n) { var o = n[t] = e.get(0); t in i && (o.checked = i[t]) }, destroy: function () { this._destroyComponents(this.components.tableView), this._destroyComponents(this.components.cellView), this._destroyComponents(this.components.accessibilityView), this._destroyComponents(this.components), delete this.components }, _destroyComponents: function (e) { for (var t in e) e[t].destroy && e[t].destroy(), delete e[t] }, _dialogTemplate: function (e) { return t.template('<div class="k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form"><div class="k-edit-form-container"><div id="k-table-wizard-tabs" class="k-root-tabs"><ul><li class="k-state-active">#= messages.tableTab #</li><li>#= messages.cellTab #</li><li>#= messages.accessibilityTab #</li></ul><div id="k-table-properties"><div class="k-edit-label"><label for="k-editor-table-width">#= messages.width #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-width" /><input id="k-editor-table-width-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-table-height">#= messages.height #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-height" /><input id="k-editor-table-height-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-table-columns">#= messages.columns #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-columns" /></div><div class="k-edit-label"><label for="k-editor-table-rows">#= messages.rows #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-rows" /></div><div class="k-edit-label"><label for="k-editor-table-cell-spacing">#= messages.cellSpacing #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-spacing" /></div><div class="k-edit-label"><label for="k-editor-table-cell-padding">#= messages.cellPadding #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-padding" /></div><div class="k-edit-label"><label for="k-editor-table-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-table-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-table-bg">#= messages.background #</label></div><div class="k-edit-field"><input id="k-editor-table-bg" /></div><div class="k-edit-label"><label for="k-editor-css-class">#= messages.cssClass #</label></div><div class="k-edit-field"><input id="k-editor-css-class" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-id">#= messages.id #</label></div><div class="k-edit-field"><input id="k-editor-id" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-border-width">#= messages.border #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-border-width" /><input id="k-editor-border-color" /></div><div class="k-edit-label"><label for="k-editor-border-style">#= messages.borderStyle #</label></div><div class="k-edit-field"><input id="k-editor-border-style" /></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-collapse-borders" type="checkbox" class="k-checkbox" /><label for="k-editor-collapse-borders" class="k-checkbox-label">#= messages.collapseBorders #</label></div></div><div id="k-cell-properties"><div class="k-edit-field"><input id="k-editor-selectAllCells" type="checkbox" class="k-checkbox" /><label for="k-editor-selectAllCells" class="k-checkbox-label">#= messages.selectAllCells #</label></div><div class="k-edit-label"><label for="k-editor-cell-width">#= messages.width #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-width" /><input id="k-editor-cell-width-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-cell-height">#= messages.height #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-height" /><input id="k-editor-cell-height-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-table-cell-margin">#= messages.cellMargin #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-margin" /></div><div class="k-edit-label"><label for="k-editor-table-cells-padding">#= messages.cellPadding #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cells-padding" /></div><div class="k-edit-label"><label for="k-editor-cell-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-cell-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-cell-bg">#= messages.background #</label></div><div class="k-edit-field"><input id="k-editor-cell-bg" /></div><div class="k-edit-label"><label for="k-editor-cell-css-class">#= messages.cssClass #</label></div><div class="k-edit-field"><input id="k-editor-cell-css-class" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-cell-id">#= messages.id #</label></div><div class="k-edit-field"><input id="k-editor-cell-id" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-cell-border-width">#= messages.border #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-border-width" /><input id="k-editor-cell-border-color" /></div><div class="k-edit-label"><label for="k-editor-cell-border-style">#= messages.borderStyle #</label></div><div class="k-edit-field"><input id="k-editor-cell-border-style" /></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-wrap-text" type="checkbox" class="k-checkbox" /><label for="k-editor-wrap-text" class="k-checkbox-label">#= messages.wrapText #</label></div></div><div id="k-accessibility-properties"><div class="k-edit-label"><label for="k-editor-table-caption">#= messages.caption #</label></div><div class="k-edit-field"><input id="k-editor-table-caption" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-accessibility-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-accessibility-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-accessibility-summary">#= messages.summary #</label></div><div class="k-edit-field"><textarea id="k-editor-accessibility-summary" class="k-input k-textbox"></textarea></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-cells-headers" type="checkbox" class="k-checkbox" /><label for="k-editor-cells-headers" class="k-checkbox-label">#= messages.associateCellsWithHeaders #</label></div></div></div><div class="k-edit-buttons k-state-default"><button class="k-button k-primary k-dialog-ok">#= messages.dialogOk #</button><button class="k-button k-dialog-close">#= messages.dialogCancel #</button></div></div></div>')({ messages: e }) } }), t.ui.editor.TableWizardDialog = l; var e, t, i, n, o, r, s, a, l }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.editor.min", ["kendo.combobox.min", "kendo.dropdownlist.min", "kendo.resizable.min", "kendo.window.min", "kendo.colorpicker.min", "kendo.imagebrowser.min", "kendo.tabstrip.min", "kendo.numerictextbox.min", "util/undoredostack.min", "editor/main.min", "editor/dom.min", "editor/serializer.min", "editor/range.min", "editor/system.min", "editor/inlineformat.min", "editor/formatblock.min", "editor/linebreak.min", "editor/lists.min", "editor/link.min", "editor/file.min", "editor/image.min", "editor/components.min", "editor/indent.min", "editor/viewhtml.min", "editor/formatting.min", "editor/toolbar.min", "editor/tables.min", "editor/export.min", "editor/import.min", "editor/resizing/column-resizing.min", "editor/resizing/row-resizing.min", "editor/resizing/table-resizing.min", "editor/resizing/table-resize-handle.min", "editor/immutables.min", "editor/table-wizard/table-wizard-command.min", "editor/table-wizard/table-wizard-dialog.min"], function () { return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.maskedtextbox.min", ["kendo.core.min"], function () { return function (e, t) { function i(e) { return e + d } var n = window, o = n.Math.min, r = n.kendo, s = r.caret, a = r.keys, l = r.ui, c = l.Widget, d = ".kendoMaskedTextBox", u = e.proxy, h = window.setTimeout, f = "k-state-disabled", p = "k-state-invalid", m = "disabled", g = "readonly", v = "change", _ = "mouseup", b = "drop", w = "keydown", y = "paste", k = "input", x = i(r.support.propertyChangeEvent ? "propertychange" : k), C = c.extend({ init: function (t, i) { var n, o = this; c.fn.init.call(o, t, i), o._rules = e.extend({}, o.rules, o.options.rules), t = o.element, n = t[0], o._wrapper(), o._tokenize(), o._form(), o.element.addClass("k-textbox").attr("autocomplete", "off").on("focus" + d, function () { var e = n.value; e ? o._togglePrompt(!0) : n.value = o._old = o._emptyMask, o._oldValue = e, o._timeoutId = h(function () { s(t, 0, e ? o._maskLength : 0) }) }).on("focusout" + d, function () { var e = t.val(); clearTimeout(o._timeoutId), n.value = o._old = "", e !== o._emptyMask && (n.value = o._old = e), o._change(), o._togglePrompt() }), t.is("[disabled]") || e(o.element).parents("fieldset").is(":disabled") ? o.enable(!1) : o.readonly(t.is("[readonly]")), o.value(o.options.value || t.val()), o._validationIcon = e("<span class='k-icon k-i-warning'></span>").insertAfter(t), r.notify(o) }, options: { name: "MaskedTextBox", clearPromptChar: !1, unmaskOnPost: !1, promptChar: "_", culture: "", rules: {}, value: "", mask: "" }, events: [v], rules: { 0: /\d/, 9: /\d|\s/, "#": /\d|\s|\+|\-/, L: /[a-zA-Z]/, "?": /[a-zA-Z]|\s/, "&": /\S/, C: /./, A: /[a-zA-Z0-9]/, a: /[a-zA-Z0-9]|\s/ }, setOptions: function (t) { var i = this; c.fn.setOptions.call(i, t), i._rules = e.extend({}, i.rules, i.options.rules), i._tokenize(), this._unbindInput(), this._bindInput(), i.value(i.element.val()) }, destroy: function () { var e = this; e.element.off(d), e._formElement && (e._formElement.off("reset", e._resetHandler), e._formElement.off("submit", e._submitHandler)), c.fn.destroy.call(e) }, raw: function () { var e = this._unmask(this.element.val(), 0); return e.replace(RegExp(this.options.promptChar, "g"), "") }, value: function (e) { var i = this.element, n = this._emptyMask; return e === t ? this.element.val() : (null === e && (e = ""), n ? (e = this._unmask(e + ""), i.val(e ? n : ""), this._mask(0, this._maskLength, e), this._unmaskedValue = null, e = i.val(), this._oldValue = e, r._activeElement() !== i && (e === n ? i.val("") : this._togglePrompt()), t) : (this._oldValue = e, i.val(e), t)) }, _togglePrompt: function (e) { var t = this.element[0], i = t.value; this.options.clearPromptChar && (i = e ? this._oldValue : i.replace(RegExp(this.options.promptChar, "g"), " "), t.value = this._old = i) }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, _bindInput: function () { var e, t, n = this; n._maskLength && (n.options.$angular && n.element.off(k), n.element.on(i(w), u(n._keydown, n)).on(i(b), u(n._drop, n)).on(i(v), u(n._trackChange, n)).on(x, u(n._inputHandler, n)), r.support.browser.msie && ((e = r.support.browser.version) > 8 && e < 11 && (t = [i(_), i(b), i(w), i(y)].join(" "), n.element.on(t, u(n._legacyIEInputHandler, n))))) }, _unbindInput: function () { var e = [x, i(w), i(_), i(b), i(y)].join(" "); this.element.off(e) }, _editable: function (e) { var t = this, i = t.element, n = t.wrapper, o = e.disable, r = e.readonly; t._unbindInput(), r || o ? (i.attr(m, o).attr(g, r), n.toggleClass(f, o)) : (i.removeAttr(m).removeAttr(g), n.removeClass(f), t._bindInput()) }, _change: function () { var e = this, t = e.value(); t !== e._oldValue ? (e._oldValue = t, e.trigger(v), e.element.trigger(v)) : "" === t && e.__changing && e.element.trigger(v) }, inputChange: function (e) { var t, i, n, a, l, c = this, d = c._old, u = c.element[0], h = u.value, f = s(u), p = f[1], m = h.length - d.length, g = r.support.mobileOS; c.__dropping && m < 0 || (-1 === m && g.android && "chrome" === g.browser && (e = !0), t = o(p, function (e, t) { for (var i = 0; i < t.length && e[i] === t[i];)i++; return i }(h, d)), i = h.substring(t, p), u.value = h.substring(0, t) + c._emptyMask.substring(t), n = c._mask(t, p, i), a = c._trimStartPromptChars(h.substring(p), o(m, n - t)), l = c._unmask(a, d.length - a.length), c._mask(n, n, l), e && (n = c._findCaretPosBackwards(t)), s(u, n), c.__dropping = !1) }, _trimStartPromptChars: function (e, t) { for (var i = this.options.promptChar; t-- > 0 && 0 === e.indexOf(i);)e = e.substring(1); return e }, _findCaretPosBackwards: function (e) { var t = this._find(e, !0); return t < e && (t += 1), t }, _inputHandler: function () { r._activeElement() === this.element[0] && this.inputChange(this.__backward) }, _legacyIEInputHandler: function (e) { var t = this, i = t.element[0], n = i.value, o = e.type; t.__pasting = "paste" === o, h(function () { "mouseup" === o && t.__pasting || i.value !== n && t.inputChange(t.__backward) }) }, _trackChange: function () { var e = this; e.__changing = !0, h(function () { e.__changing = !1 }) }, _form: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { h(function () { t.value(i[0].value) }) }, t._submitHandler = function () { t.element[0].value = t._old = t.raw() }, t.options.unmaskOnPost && o.on("submit", t._submitHandler), t._formElement = o.on("reset", t._resetHandler)) }, _keydown: function (e) { var t = e.keyCode; this.__backward = t === a.BACKSPACE, t === a.ENTER && this._change() }, _drop: function () { this.__dropping = !0 }, _find: function (e, t) { var i = this.element.val() || this._emptyMask, n = 1; for (!0 === t && (n = -1); e > -1 || e <= this._maskLength;) { if (i.charAt(e) !== this.tokens[e]) return e; e += n } return -1 }, _mask: function (e, i, n, o) { var a, l, c, d, u = this.element[0], h = u.value || this._emptyMask, f = this.options.promptChar, p = 0; for ((e = this._find(e, o)) > i && (i = e), l = this._unmask(h.substring(i), i), n = this._unmask(n, e), a = n.length, n && (l = l.replace(RegExp("^_{0," + a + "}"), "")), n += l, h = h.split(""), c = n.charAt(p); e < this._maskLength;)h[e] = c || f, c = n.charAt(++p), d === t && p > a && (d = e), e = this._find(e + 1); return u.value = this._old = h.join(""), r._activeElement() === u && (d === t && (d = this._maskLength), s(u, d)), d }, _unmask: function (t, i) { var n, o, r, s, a, l, c, d; if (!t) return ""; if (this._unmaskedValue === t) return this._unmaskedValue; for (t = (t + "").split(""), r = 0, s = i || 0, a = this.options.promptChar, l = t.length, c = this.tokens.length, d = ""; s < c && (n = t[r], o = this.tokens[s], n === o || n === a ? (d += n === a ? a : "", r += 1, s += 1) : "string" != typeof o ? (o && o.test && o.test(n) || e.isFunction(o) && o(n) ? (d += n, s += 1) : 1 === l && this._blinkInvalidState(), r += 1) : s += 1, !(r >= l));); return this._unmaskedValue = d, d }, _wrapper: function () { var e = this.element, t = e[0], i = e.wrap("<span class='k-widget k-maskedtextbox'></span>").parent(); i[0].style.cssText = t.style.cssText, t.style.width = "100%", this.wrapper = i.addClass(t.className) }, _blinkInvalidState: function () { var e = this; e.wrapper.addClass(p), clearTimeout(e._invalidStateTimeout), e._invalidStateTimeout = h(u(e._removeInvalidState, e), 100) }, _removeInvalidState: function () { this.wrapper.removeClass(p), this._invalidStateTimeout = null }, _tokenize: function () { for (var e, t, i, n, o = [], s = 0, a = this.options.mask || "", l = a.split(""), c = l.length, d = 0, u = "", h = this.options.promptChar, f = r.getCulture(this.options.culture).numberFormat, p = this._rules; d < c; d++)if (e = l[d], t = p[e]) o[s] = t, u += h, s += 1; else for ("." === e || "," === e ? e = f[e] : "$" === e ? e = f.currency.symbol : "\\" === e && (e = l[d += 1]), e = e.split(""), i = 0, n = e.length; i < n; i++)o[s] = e[i], u += e[i], s += 1; this.tokens = o, this._emptyMask = u, this._maskLength = u.length } }); l.plugin(C) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.toolbar.min", ["kendo.core.min", "kendo.userevents.min", "kendo.popup.min"], function () { return function (e, t) { function i() { var e, t = this.options.anchor, i = E(t); x.wrap(this.element).addClass("k-split-wrapper"), e = "border-box" !== this.element.css("box-sizing") ? i - (E(this.element) - this.element.width()) : i, this.element.css({ fontFamily: t.css("font-family"), "min-width": e }) } function n(e) { e.target.is(".k-toggle-button") || e.target.toggleClass(L, "press" == e.type) } function o(t) { return (t = e(t)).hasClass("km-actionsheet") ? t.closest(".km-popup-wrapper") : t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent() } function r(e) { e.preventDefault() } function s(t, i) { var n = "next" === i ? e.fn.next : e.fn.prev, o = "next" === i ? e.fn.first : e.fn.last, r = n.call(t); return r.is(":kendoFocusable") || !r.length ? r : r.find(":kendoFocusable").length ? o.call(r.find(":kendoFocusable")) : s(r, i) } var a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x = window.kendo, C = x.Class, S = x.ui.Widget, T = e.proxy, D = x.isFunction, A = x.keys, E = x._outerWidth, I = "k-button", M = "k-overflow-button", R = "k-toggle-button", F = "k-button-group", z = "k-split-button", P = "k-separator", B = "k-popup", L = "k-state-active", H = "k-state-disabled", N = "k-state-hidden", O = "k-icon", V = "k-i-", U = "k-split-button-arrow", W = "k-overflow-anchor", q = "k-overflow-container", j = "k-toolbar-first-visible", G = "k-toolbar-last-visible", $ = "click", Y = "overflowOpen", K = "overflowClose", Q = "auto", X = "k-overflow-hidden", Z = x.attr("uid"); x.toolbar = {}, a = { overflowAnchor: '<div tabindex="0" class="k-overflow-anchor"></div>', overflowContainer: '<ul class="k-overflow-container k-list-container"></ul>' }, x.toolbar.registerComponent = function (e, t, i) { a[e] = { toolbar: t, overflow: i } }, l = x.Class.extend({ addOverflowAttr: function () { this.element.attr(x.attr("overflow"), this.options.overflow || Q) }, addUidAttr: function () { this.element.attr(Z, this.options.uid) }, addIdAttr: function () { this.options.id && this.element.attr("id", this.options.id) }, addOverflowIdAttr: function () { this.options.id && this.element.attr("id", this.options.id + "_overflow") }, attributes: function () { this.options.attributes && this.element.attr(this.options.attributes) }, show: function () { this.element.removeClass(N).show(), this.options.hidden = !1 }, hide: function () { this.element.addClass(N).hide(), this.options.hidden = !0 }, remove: function () { this.element.remove() }, enable: function (e) { e === t && (e = !0), this.element.toggleClass(H, !e), this.options.enable = e }, twin: function () { var e = this.element.attr(Z); return this.overflow ? this.toolbar.element.find("[" + Z + "='" + e + "']").data(this.options.type) : this.toolbar.options.resizable ? this.toolbar.popup.element.find("[" + Z + "='" + e + "']").data(this.options.type) : t } }), x.toolbar.Item = l, c = l.extend({ init: function (i, n) { var o = e(i.useButtonTag ? '<button tabindex="0"></button>' : '<a href tabindex="0"></a>'); this.element = o, this.options = i, this.toolbar = n, this.attributes(), i.primary && o.addClass("k-primary"), i.togglable && (o.addClass(R), this.toggle(i.selected)), i.url === t || i.useButtonTag || (o.attr("href", i.url), i.mobile && o.attr(x.attr("role"), "button")), i.group && (o.attr(x.attr("group"), i.group), this.group = this.toolbar.addToGroup(this, i.group)), !i.togglable && i.click && D(i.click) && (this.clickHandler = i.click), i.togglable && i.toggle && D(i.toggle) && (this.toggleHandler = i.toggle) }, toggle: function (e, t) { e = !!e, this.group && e ? this.group.select(this) : this.group || this.select(e), t && this.twin() && this.twin().toggle(e) }, getParentGroup: function () { if (this.options.isChild) return this.element.closest("." + F).data("buttonGroup") }, _addGraphics: function () { var t, i, n, o = this.element, r = this.options.icon, s = this.options.spriteCssClass, a = this.options.imageUrl; (s || a || r) && (t = !0, o.contents().filter(function () { return !e(this).hasClass("k-sprite") && !e(this).hasClass(O) && !e(this).hasClass("k-image") }).each(function (i, n) { (1 == n.nodeType || 3 == n.nodeType && e.trim(n.nodeValue).length > 0) && (t = !1) }), o.addClass(t ? "k-button-icon" : "k-button-icontext")), r ? ((i = o.children("span." + O).first())[0] || (i = e('<span class="' + O + '"></span>').prependTo(o)), i.addClass(V + r)) : s ? ((i = o.children("span.k-sprite").first())[0] || (i = e('<span class="k-sprite ' + O + '"></span>').prependTo(o)), i.addClass(s)) : a && ((n = o.children("img.k-image").first())[0] || (n = e('<img alt="icon" class="k-image" />').prependTo(o)), n.attr("src", a)) } }), x.toolbar.Button = c, d = c.extend({ init: function (e, t) { c.fn.init.call(this, e, t); var i = this.element; i.addClass(I), this.addIdAttr(), e.align && i.addClass("k-align-" + e.align), "overflow" != e.showText && e.text && i.html(e.mobile ? '<span class="km-text">' + e.text + "</span>" : e.text), e.hasIcon = "overflow" != e.showIcon && (e.icon || e.spriteCssClass || e.imageUrl), e.hasIcon && this._addGraphics(), this.addUidAttr(), this.addOverflowAttr(), this.enable(e.enable), e.hidden && this.hide(), this.element.data({ type: "button", button: this }) }, select: function (e) { e === t && (e = !1), this.element.toggleClass(L, e), this.options.selected = e } }), x.toolbar.ToolBarButton = d, u = c.extend({ init: function (e, t) { this.overflow = !0, c.fn.init.call(this, e, t); var i = this.element; "toolbar" != e.showText && e.text && i.html(e.mobile ? '<span class="km-text">' + e.text + "</span>" : '<span class="k-text">' + e.text + "</span>"), e.hasIcon = "toolbar" != e.showIcon && (e.icon || e.spriteCssClass || e.imageUrl), e.hasIcon && this._addGraphics(), e.isChild || this._wrap(), this.addOverflowIdAttr(), this.attributes(), this.addUidAttr(), this.addOverflowAttr(), this.enable(e.enable), i.addClass(M + " " + I), e.hidden && this.hide(), e.togglable && this.toggle(e.selected), this.element.data({ type: "button", button: this }) }, _wrap: function () { this.element = this.element.wrap("<li></li>").parent() }, overflowHidden: function () { this.element.addClass(X) }, select: function (e) { e === t && (e = !1), this.options.isChild ? this.element.toggleClass(L, e) : this.element.find(".k-button").toggleClass(L, e), this.options.selected = e } }), x.toolbar.OverflowButton = u, x.toolbar.registerComponent("button", d, u), h = l.extend({ createButtons: function (t) { var i, n = this.options, o = n.buttons || []; for (i = 0; i < o.length; i++)o[i].uid || (o[i].uid = x.guid()), new t(e.extend({ mobile: n.mobile, isChild: !0, type: "button" }, o[i]), this.toolbar).element.appendTo(this.element) }, refresh: function () { this.element.children().filter(":not('." + N + "'):first").addClass("k-group-start"), this.element.children().filter(":not('." + N + "'):last").addClass("k-group-end") } }), x.toolbar.ButtonGroup = h, f = h.extend({ init: function (t, i) { var n = this.element = e("<div></div>"); this.options = t, this.toolbar = i, this.addIdAttr(), t.align && n.addClass("k-align-" + t.align), this.createButtons(d), this.attributes(), this.addUidAttr(), this.addOverflowAttr(), this.refresh(), n.addClass(F), this.element.data({ type: "buttonGroup", buttonGroup: this }) } }), x.toolbar.ToolBarButtonGroup = f, p = h.extend({ init: function (t, i) { var n = this.element = e("<li></li>"); this.options = t, this.toolbar = i, this.overflow = !0, this.addOverflowIdAttr(), this.createButtons(u), this.attributes(), this.addUidAttr(), this.addOverflowAttr(), this.refresh(), n.addClass((t.mobile ? "" : F) + " k-overflow-group"), this.element.data({ type: "buttonGroup", buttonGroup: this }) }, overflowHidden: function () { this.element.addClass(X) } }), x.toolbar.OverflowButtonGroup = p, x.toolbar.registerComponent("buttonGroup", f, p), m = l.extend({ init: function (t, i) { var n = this.element = e('<div class="' + z + '" tabindex="0"></div>'); this.options = t, this.toolbar = i, this.mainButton = new d(e.extend({}, t, { hidden: !1 }), i), this.arrowButton = e('<a class="' + I + " " + U + '"><span class="' + (t.mobile ? "km-icon km-arrowdown" : "k-icon k-i-arrow-60-down") + '"></span></a>'), this.popupElement = e('<ul class="k-list-container k-split-container"></ul>'), this.mainButton.element.removeAttr("href tabindex").appendTo(n), this.arrowButton.appendTo(n), this.popupElement.appendTo(n), t.align && n.addClass("k-align-" + t.align), t.id || (t.id = t.uid), n.attr("id", t.id + "_wrapper"), this.addOverflowAttr(), this.addUidAttr(), this.createMenuButtons(), this.createPopup(), this._navigatable(), this.mainButton.main = !0, this.enable(t.enable), t.hidden && this.hide(), n.data({ type: "splitButton", splitButton: this, kendoPopup: this.popup }) }, _navigatable: function () { var t = this; t.popupElement.on("keydown", "." + I, function (i) { var n = e(i.target).parent(); i.preventDefault(), i.keyCode === A.ESC || i.keyCode === A.TAB || i.altKey && i.keyCode === A.UP ? (t.toggle(), t.focus()) : i.keyCode === A.DOWN ? s(n, "next").focus() : i.keyCode === A.UP ? s(n, "prev").focus() : i.keyCode !== A.SPACEBAR && i.keyCode !== A.ENTER || t.toolbar.userEvents.trigger("tap", { target: e(i.target) }) }) }, createMenuButtons: function () { var t, i = this.options, n = i.menuButtons; for (t = 0; t < n.length; t++)new d(e.extend({ mobile: i.mobile, type: "button", click: i.click }, n[t]), this.toolbar).element.wrap("<li></li>").parent().appendTo(this.popupElement) }, createPopup: function () { var t = this.options, n = this.element; this.popupElement.attr("id", t.id + "_optionlist").attr(Z, t.rootUid), t.mobile && (this.popupElement = o(this.popupElement)), this.popup = this.popupElement.kendoPopup({ appendTo: t.mobile ? e(t.mobile).children(".km-pane") : null, anchor: n, isRtl: this.toolbar._isRtl, copyAnchorStyles: !1, animation: t.animation, open: i, activate: function () { this.element.find(":kendoFocusable").first().focus() }, close: function () { n.focus() } }).data("kendoPopup"), this.popup.element.on($, "a.k-button", r) }, remove: function () { this.popup.element.off($, "a.k-button"), this.popup.destroy(), this.element.remove() }, toggle: function () { this.popup.toggle() }, enable: function (e) { e === t && (e = !0), this.mainButton.enable(e), this.options.enable = e }, focus: function () { this.element.focus() }, hide: function () { this.popup && this.popup.close(), this.element.addClass(N).hide(), this.options.hidden = !0 }, show: function () { this.element.removeClass(N).hide(), this.options.hidden = !1 } }), x.toolbar.ToolBarSplitButton = m, g = l.extend({ init: function (t, i) { var n, o = this.element = e('<li class="' + z + '"></li>'), r = t.menuButtons; for (this.options = t, this.toolbar = i, this.overflow = !0, this.mainButton = new u(e.extend({ isChild: !0 }, t)), this.mainButton.element.appendTo(o), n = 0; n < r.length; n++)new u(e.extend({ mobile: t.mobile, isChild: !0 }, r[n]), this.toolbar).element.appendTo(o); this.addUidAttr(), this.addOverflowAttr(), this.mainButton.main = !0, o.data({ type: "splitButton", splitButton: this }) }, overflowHidden: function () { this.element.addClass(X) } }), x.toolbar.OverflowSplitButton = g, x.toolbar.registerComponent("splitButton", m, g), v = l.extend({ init: function (t, i) { var n = this.element = e("<div>&nbsp;</div>"); this.element = n, this.options = t, this.toolbar = i, this.attributes(), this.addIdAttr(), this.addUidAttr(), this.addOverflowAttr(), n.addClass(P), n.data({ type: "separator", separator: this }) } }), _ = l.extend({ init: function (t, i) { var n = this.element = e("<li>&nbsp;</li>"); this.element = n, this.options = t, this.toolbar = i, this.overflow = !0, this.attributes(), this.addUidAttr(), this.addOverflowIdAttr(), n.addClass(P), n.data({ type: "separator", separator: this }) }, overflowHidden: function () { this.element.addClass(X) } }), x.toolbar.registerComponent("separator", v, _), b = l.extend({ init: function (t, i, n) { var o = D(t) ? t(i) : t; o = o instanceof jQuery ? o.wrap("<div></div>").parent() : e("<div></div>").html(o), this.element = o, this.options = i, this.options.type = "template", this.toolbar = n, this.attributes(), this.addUidAttr(), this.addIdAttr(), this.addOverflowAttr(), o.data({ type: "template", template: this }) } }), x.toolbar.TemplateItem = b, w = l.extend({ init: function (t, i, n) { var o = e(D(t) ? t(i) : t); o = o instanceof jQuery ? o.wrap("<li></li>").parent() : e("<li></li>").html(o), this.element = o, this.options = i, this.options.type = "template", this.toolbar = n, this.overflow = !0, this.attributes(), this.addUidAttr(), this.addOverflowIdAttr(), this.addOverflowAttr(), o.data({ type: "template", template: this }) }, overflowHidden: function () { this.element.addClass(X) } }), x.toolbar.OverflowTemplateItem = w, y = C.extend({ init: function (e) { this.name = e, this.buttons = [] }, add: function (e) { this.buttons[this.buttons.length] = e }, remove: function (t) { var i = e.inArray(t, this.buttons); this.buttons.splice(i, 1) }, select: function (e) { var t; for (t = 0; t < this.buttons.length; t++)this.buttons[t].select(!1); e.select(!0), e.twin() && e.twin().select(!0) } }), k = S.extend({ init: function (t, i) { var o, s = this; if (S.fn.init.call(s, t, i), i = s.options, (t = s.wrapper = s.element).addClass("k-toolbar k-widget"), this.uid = x.guid(), this._isRtl = x.support.isRtl(t), this._groups = {}, t.attr(Z, this.uid), s.isMobile = "boolean" == typeof i.mobile ? i.mobile : s.element.closest(".km-root")[0], s.animation = s.isMobile ? { open: { effects: "fade" } } : {}, s.isMobile && (t.addClass("km-widget"), O = "km-icon", V = "km-", I = "km-button", F = "km-buttongroup km-widget", L = "km-state-active", H = "km-state-disabled"), i.resizable ? (s._renderOverflow(), t.addClass("k-toolbar-resizable"), s.overflowUserEvents = new x.UserEvents(s.element, { threshold: 5, allowSelection: !0, filter: "." + W, tap: T(s._toggleOverflow, s) }), s._resizeHandler = x.onResize(function () { s.resize() })) : s.popup = { element: e([]) }, i.items && i.items.length) for (o = 0; o < i.items.length; o++)s.add(i.items[o]); s.userEvents = new x.UserEvents(document, { threshold: 5, allowSelection: !0, filter: "[" + Z + "=" + this.uid + "] a." + I + ", [" + Z + "=" + this.uid + "] ." + M, tap: T(s._buttonClick, s), press: n, release: n }), s.element.on($, "a.k-button", r), s._navigatable(), i.resizable && s.popup.element.on($, NaN, r), i.resizable && this._toggleOverflowAnchor(), x.notify(s) }, events: [$, "toggle", "open", "close", Y, K], options: { name: "ToolBar", items: [], resizable: !0, mobile: null }, addToGroup: function (e, t) { var i; return (i = this._groups[t] ? this._groups[t] : this._groups[t] = new y).add(e), i }, destroy: function () { var t = this; t.element.find("." + z).each(function (t, i) { e(i).data("kendoPopup").destroy() }), t.element.off($, "a.k-button"), t.userEvents.destroy(), t.options.resizable && (x.unbindResize(t._resizeHandler), t.overflowUserEvents.destroy(), t.popup.element.off($, "a.k-button"), t.popup.destroy()), S.fn.destroy.call(t) }, add: function (t) { var i, n, o, r = a[t.type], s = t.template, l = this, c = l.isMobile ? "" : "k-item k-state-default", d = t.overflowTemplate; if (e.extend(t, { uid: x.guid(), animation: l.animation, mobile: l.isMobile, rootUid: l.uid }), t.menuButtons) for (o = 0; o < t.menuButtons.length; o++)e.extend(t.menuButtons[o], { uid: x.guid() }); s && !d ? t.overflow = "never" : t.overflow || (t.overflow = Q), "never" !== t.overflow && l.options.resizable && (d ? n = new w(d, t, l) : r && (n = new r.overflow(t, l)).element.addClass(c), n && (t.overflow === Q && n.overflowHidden(), n.element.appendTo(l.popup.container), l.angular("compile", function () { return { elements: n.element.get() } }))), "always" !== t.overflow && (s ? i = new b(s, t, l) : r && (i = new r.toolbar(t, l)), i && (l.options.resizable ? (i.element.appendTo(l.element).css("visibility", "hidden"), l._shrink(l.element.innerWidth()), i.element.css("visibility", "visible")) : i.element.appendTo(l.element), l.angular("compile", function () { return { elements: i.element.get() } }))) }, _getItem: function (t) { var i, n, o, r, s = this.options.resizable; return (i = this.element.find(t)).length || (i = e(".k-split-container[data-uid=" + this.uid + "]").find(t)), r = i.length ? i.data("type") : "", (n = i.data(r)) ? (n.main && (i = i.parent("." + z), r = "splitButton", n = i.data(r)), s && (o = n.twin())) : s && (i = this.popup.element.find(t), r = i.length ? i.data("type") : "", (o = i.data(r)) && o.main && (i = i.parent("." + z), r = "splitButton", o = i.data(r))), { type: r, toolbar: n, overflow: o } }, remove: function (e) { var t = this._getItem(e); t.toolbar && t.toolbar.remove(), t.overflow && t.overflow.remove(), this.resize(!0) }, hide: function (e) { var t = this._getItem(e); t.toolbar && ("button" === t.toolbar.options.type && t.toolbar.options.isChild ? (t.toolbar.hide(), t.toolbar.getParentGroup().refresh()) : t.toolbar.options.hidden || t.toolbar.hide()), t.overflow && ("button" === t.overflow.options.type && t.overflow.options.isChild ? (t.overflow.hide(), t.overflow.getParentGroup().refresh()) : t.overflow.options.hidden || t.overflow.hide()), this.resize(!0) }, show: function (e) { var t = this._getItem(e); t.toolbar && ("button" === t.toolbar.options.type && t.toolbar.options.isChild ? (t.toolbar.show(), t.toolbar.getParentGroup().refresh()) : t.toolbar.options.hidden && t.toolbar.show()), t.overflow && ("button" === t.overflow.options.type && t.overflow.options.isChild ? (t.toolbar.show(), t.overflow.getParentGroup().refresh()) : t.overflow.options.hidden && t.overflow.show()), this.resize(!0) }, enable: function (e, i) { var n = this._getItem(e); t === i && (i = !0), n.toolbar && n.toolbar.enable(i), n.overflow && n.overflow.enable(i) }, getSelectedFromGroup: function (e) { return this.element.find("." + R + "[data-group='" + e + "']").filter("." + L) }, toggle: function (i, n) { var o = e(i), r = o.data("button"); r.options.togglable && (n === t && (n = !0), r.toggle(n, !0)) }, _renderOverflow: function () { var t = this, i = a.overflowContainer, n = t._isRtl, r = n ? "left" : "right"; t.overflowAnchor = e(a.overflowAnchor).addClass(I), t.element.append(t.overflowAnchor), t.isMobile ? (t.overflowAnchor.append('<span class="km-icon km-more"></span>'), i = o(i)) : t.overflowAnchor.append('<span class="k-icon k-i-arrow-60-down"></span>'), t.popup = new x.ui.Popup(i, { origin: "bottom " + r, position: "top " + r, anchor: t.overflowAnchor, isRtl: n, animation: t.animation, appendTo: t.isMobile ? e(t.isMobile).children(".km-pane") : null, copyAnchorStyles: !1, open: function (i) { var o = x.wrap(t.popup.element).addClass("k-overflow-wrapper"); t.isMobile ? t.popup.container.css("max-height", parseFloat(e(".km-content:visible").innerHeight()) - 15 + "px") : o.css("margin-left", (n ? -1 : 1) * ((E(o) - o.width()) / 2 + 1)), t.trigger(Y) && i.preventDefault() }, activate: function () { this.element.find(":kendoFocusable").first().focus() }, close: function (e) { t.trigger(K) && e.preventDefault(), this.element.focus() } }), t.popup.element.on("keydown", "." + I, function (i) { var n = e(i.target), o = n.parent(), r = o.is("." + F) || o.is("." + z); i.preventDefault(), i.keyCode === A.ESC || i.keyCode === A.TAB || i.altKey && i.keyCode === A.UP ? (t._toggleOverflow(), t.overflowAnchor.focus()) : i.keyCode === A.DOWN ? s(!r || r && n.is(":last-child") ? o : n, "next").focus() : i.keyCode === A.UP ? s(!r || r && n.is(":first-child") ? o : n, "prev").focus() : i.keyCode !== A.SPACEBAR && i.keyCode !== A.ENTER || t.userEvents.trigger("tap", { target: e(i.target) }) }), t.popup.container = t.isMobile ? t.popup.element.find("." + q) : t.popup.element, t.popup.container.attr(Z, this.uid) }, _toggleOverflowAnchor: function () { var e = !1; e = this.options.mobile ? this.popup.element.find("." + q).children(":not(." + X + ", ." + B + ")").length > 0 : this.popup.element.children(":not(." + X + ", ." + B + ")").length > 0, this.overflowAnchor.css(e ? { visibility: "visible", width: "" } : { visibility: "hidden", width: "1px" }) }, _buttonClick: function (i) { var n, o, r, s, a, l, c = this, d = i.target.closest("." + U).length; return i.preventDefault(), d ? (c._toggle(i), t) : ((n = e(i.target).closest("." + I, c.element)).hasClass(W) || (!(o = n.data("button")) && c.popup && (n = e(i.target).closest("." + M, c.popup.container), o = n.parent("li").data("button")), o && o.options.enable && (o.options.togglable ? (s = D(o.toggleHandler) ? o.toggleHandler : null, o.toggle(!o.options.selected, !0), a = { target: n, group: o.options.group, checked: o.options.selected, id: o.options.id }, s && s.call(c, a), c.trigger("toggle", a)) : (s = D(o.clickHandler) ? o.clickHandler : null, a = { sender: c, target: n, id: o.options.id }, s && s.call(c, a), c.trigger($, a)), o.options.url && (o.options.attributes && o.options.attributes.target && (l = o.options.attributes.target), window.open(o.options.url, l || "_self")), n.hasClass(M) && c.popup.close(), (r = n.closest(".k-split-container"))[0] && (r.data("kendoPopup") || r.parents(".km-popup-wrapper").data("kendoPopup")).close())), t) }, _navigatable: function () { var t = this; t.element.attr("tabindex", 0).focus(function () { var t = e(this).find(":kendoFocusable:first"); 0 !== t.length && (t.is("." + W) && (t = s(t, "next")), t[0].focus()) }).on("keydown", T(t._keydown, t)) }, _keydown: function (i) { var n, o, r, s, a, l, c, d = e(i.target), u = i.keyCode, h = this.element.children(":not(.k-separator):visible"); return u === A.TAB && (n = d.parentsUntil(this.element).last(), o = !1, r = !1, n.length || (n = d), n.is("." + W) && (i.shiftKey && i.preventDefault(), h.last().is(":kendoFocusable") ? h.last().focus() : h.last().find(":kendoFocusable").last().focus()), i.shiftKey || h.index(n) !== h.length - 1 || (o = !n.is("." + F) || d.is(":last-child")), s = h.index(n) === h.not(".k-overflow-anchor").first().index(), i.shiftKey && s && (r = !n.is("." + F) || d.is(":first-child")), o && this.overflowAnchor && "hidden" !== this.overflowAnchor.css("visibility") && (i.preventDefault(), this.overflowAnchor.focus()), r && (i.preventDefault(), (a = this._getPrevFocusable(this.wrapper)) && a.focus())), i.altKey && u === A.DOWN ? (l = e(document.activeElement).data("splitButton"), c = e(document.activeElement).is("." + W), l ? l.toggle() : c && this._toggleOverflow(), t) : u !== A.SPACEBAR && u !== A.ENTER || d.is("input, checkbox") ? t : (i.preventDefault(), d.is("." + z) && (d = d.children().first()), this.userEvents.trigger("tap", { target: d }), t) }, _getPrevFocusable: function (i) { if (i.is("html")) return i; var n, o, r = i.prevAll(); return r.each(function () { return (o = e(this)).is(":kendoFocusable") ? (n = o, !1) : o.find(":kendoFocusable").length > 0 ? (n = o.find(":kendoFocusable").last(), !1) : t }), n || this._getPrevFocusable(i.parent()) }, _toggle: function (t) { var i = e(t.target).closest("." + z).data("splitButton"); t.preventDefault(), i.options.enable && ((i.popup.element.is(":visible") ? this.trigger("close", { target: i.element }) : this.trigger("open", { target: i.element })) || i.toggle()) }, _toggleOverflow: function () { this.popup.toggle() }, _resize: function (e) { var t = e.width; this.options.resizable && (this.popup.close(), this._shrink(t), this._stretch(t), this._markVisibles(), this._toggleOverflowAnchor()) }, _childrenWidth: function () { var t = 0; return this.element.children(":visible:not('." + N + "')").each(function () { t += E(e(this), !0) }), Math.ceil(t) }, _shrink: function (e) { var t, i, n; if (e < this._childrenWidth()) for (i = this.element.children(":visible:not([data-overflow='never'], ." + W + ")"), n = i.length - 1; n >= 0 && (t = i.eq(n), !(e > this._childrenWidth())); n--)this._hideItem(t) }, _stretch: function (e) { var t, i, n; if (e > this._childrenWidth()) for (i = this.element.children(":hidden:not('." + N + "')"), n = 0; n < i.length && (t = i.eq(n), !(e < this._childrenWidth()) && this._showItem(t, e)); n++); }, _hideItem: function (e) { e.hide(), this.popup && this.popup.container.find(">li[data-uid='" + e.data("uid") + "']").removeClass(X) }, _showItem: function (e, t) { return !!(e.length && t > this._childrenWidth() + E(e, !0)) && (e.show(), this.popup && this.popup.container.find(">li[data-uid='" + e.data("uid") + "']").addClass(X), !0) }, _markVisibles: function () { var e = this.popup.container.children(), t = this.element.children(":not(.k-overflow-anchor)"), i = e.filter(":not(.k-overflow-hidden)"), n = t.filter(":visible"); e.add(t).removeClass(j + " " + G), i.first().add(n.first()).addClass(j), i.last().add(n.last()).addClass(G) } }), x.ui.plugin(k) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mediaplayer.min", ["kendo.slider.min", "kendo.toolbar.min", "kendo.dropdownlist.min", "kendo.tooltip.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = "end", o = "pause", r = "play", s = "ready", a = "timeChange", l = "volumeChange", c = "k-i-full-screen", d = "k-i-full-screen-exit", u = "k-i-volume-off", h = "k-i-volume-down", f = "k-i-volume-up", p = "k-mediaplayer-quality", m = "k-i-play", g = "k-i-pause", v = "k-mediaplayer-titlebar", _ = "k-mediaplayer-toolbar", b = "k-mediaplayer-seekbar", w = "k-mediaplayer-volume", y = "k-mediaplayer-media", k = "k-mediaplayer-overlay", x = "k-mediaplayer-yt", C = ".", S = i.ui, T = ".kendoMediaPlayer", D = new Date(1970, 0, 1), A = 60 * D.getTimezoneOffset(), E = i.ui.Widget, I = e.isArray, M = { shortTime: "mm:ss", longTime: "HH:mm:ss" }, R = i.template, F = e.proxy, z = i.keys, P = { htmlPlayer: "<video class='" + y + "'> </video>", titleBar: R("<div class='" + v + "' role='heading'><span class='k-title'>Video Title</span></div>"), toolBar: "<div class='k-mediaplayer-toolbar-wrap'><div class='" + _ + "'></div></div>", youtubePlayer: "<div class='" + x + "'> </div>", toolBarTime: "<span class='k-mediaplayer-currenttime'>00:00:00</span> / <span class='k-mediaplayer-duration'>00:00:00</span>", slider: "<input class='" + b + "' value='0' title='seekbar' />", volumeSlider: "<input class='" + w + "' title='volume'/>", qualityDropDown: "<input class='" + p + "' title='video quality' />", toolTip: "#= kendo.toString(new Date(value), 'HH:mm:ss') #" }, B = E.extend({ init: function (t, n) { this.wrapper = e(t), E.fn.init.call(this, t, n), this.wrapper.addClass("k-mediaplayer k-widget"), n = this.options, this._currentIndex = 0, this._createTitlebar(), this._createToolbar(), this._createDropDown(), this._createSlider(), this._createVolumeSlider(), this._timers = {}, this._aria(), this._navigatable(), n.media && this.media(this.options.media), i.notify(this) }, events: [n, o, r, s, a, l], options: { name: "MediaPlayer", autoPlay: !1, autoRepeat: !1, volume: 100, fullScreen: !1, mute: !1, navigatable: !1, forwardSeek: !0, media: null, messages: { pause: "Pause", play: "Play", mute: "Mute", unmute: "Unmute", quality: "Quality", fullscreen: "Full Screen" } }, _msToTime: function (e) { var t = new Date(D.getTime()); return t.setSeconds(e), t }, _timeToSec: function (e) { var t = new Date(e).getTime(); return t / 1e3 }, _createTitlebar: function () { this._titleBar = this.wrapper.find(C + v), 0 === this._titleBar.length && (this.wrapper.append(P.titleBar), this._titleBar = this.wrapper.find(C + v)) }, _createSlider: function () { var e = this.wrapper.find(C + b); this._slider || (this._sliderDragChangeHandler = F(this._sliderDragChange, this), this._sliderDraggingHandler = F(this._sliderDragging, this), e = this.wrapper.find(C + b), this._slider = new S.Slider(e[0], { smallStep: 1e3, tickPlacement: "none", showButtons: !1, change: this._sliderDragChangeHandler, slide: this._sliderDraggingHandler, tooltip: { template: P.toolTip }, dragHandleTitle: "" })) }, _createVolumeSlider: function () { var e = this.wrapper.find(C + w); this._volumeSlider || (this._volumeDraggingHandler = F(this._volumeDragging, this), this._volumeChangeHandler = F(this._volumeChange, this), e.width(87), this._volumeSlider = new S.Slider(e[0], { smallStep: 1, min: 0, max: 100, value: this.options.volume, slide: this._volumeDraggingHandler, change: this._volumeChangeHandler, tickPlacement: "none", showButtons: !1, tooltip: { enabled: !1 }, dragHandleTitle: "" })) }, _resetTime: function () { this._youTubeVideo ? this._ytmedia.seekTo(0, !0) : this._media.currentTime = 0, this._mediaTimeUpdate(), e.grep(this._toolBar.options.items, function (e) { return !!e.template }).template = P.toolBarTime }, _currentUrl: function () { var e = this.media(); return I(e.source) ? e.source[this._currentIndex].url : e.source }, _isYouTubeUrl: function () { return !!this._currentUrl().match("youtube.com/|youtu.be/") }, _setPlayerUrl: function () { var e, t = this._youTubeVideo; this.stop(), this._youTubeVideo = this._isYouTubeUrl(), t !== this._youTubeVideo && (this.wrapper.find(C + x).toggle(), this.wrapper.find(C + y).toggle()), e = this._media || this._ytmedia, this._initializePlayer(), e && (this.mute(this.mute()), this.volume(this.volume())), this._youTubeVideo ? this._ytmedia && (this._videoOverlay && this._videoOverlay.hide(), this.options.autoPlay ? (this._ytmedia.loadVideoById(this._getMediaId()), this._playStateToggle(!0)) : (this._ytmedia.cueVideoById(this._getMediaId()), this._playStateToggle(!0))) : (this._videoOverlay.show(), this.wrapper.find(C + y + " > source").remove(), this.wrapper.find(C + y).attr("src", this._currentUrl()), this.options.autoPlay && this.play()) }, _createToolbar: function () { var t = this.wrapper.find(C + _); 0 === t.length && (this._toolbarClickHandler = F(this._toolbarClick, this), this.wrapper.append(P.toolBar), (t = this.wrapper.find(C + _)).width(this.wrapper.find(C + y).width()), this._toolBar = new S.ToolBar(t, { click: this._toolbarClickHandler, resizable: !1, items: [{ type: "button", attributes: { class: "k-play-button" }, icon: "play" }, { template: P.toolBarTime, attributes: { class: "k-mediaplayer-currenttime-wrap" } }, { type: "separator", attributes: { class: "k-toolbar-spacer" } }, { type: "button", attributes: { class: "k-volume-button" }, icon: "volume-up" }, { template: P.volumeSlider, attributes: { class: "k-mediaplayer-volume-wrap" } }, { template: P.qualityDropDown, attributes: { class: "k-mediaplayer-quality-wrap" } }, { type: "button", attributes: { class: "k-fullscreen-button" }, icon: "full-screen" }] }), t.before(P.slider), this._volumeButton = t.find(".k-volume-button"), this._fullscreenButton = t.find(".k-fullscreen-button"), this._volumeButton.attr("title", this.options.mute ? this.options.messages.unmute : this.options.messages.mute), this._volumeButton.attr("aria-label", this.options.mute ? this.options.messages.unmute : this.options.messages.mute), this._fullscreenButton.attr("title", this.options.messages.fullscreen), this._fullscreenButton.attr("aria-label", this.options.messages.fullscreen), t.width("auto"), this._currentTimeElement = t.find(".k-mediaplayer-currenttime"), this._durationElement = t.find(".k-mediaplayer-duration"), this._playButton = t.find(".k-play-button"), this._playButtonSpan = this._playButton.find(".k-i-play"), this.options.autoPlay && this._playStateToggle(!0), e([this._volumeButton[0], t.find(".k-mediaplayer-volume-wrap")[0], t.find(".k-mediaplayer-quality-wrap")[0], this._fullscreenButton[0]]).wrapAll("<div class='k-align-right' />"), t.find(".k-button").addClass("k-bare")) }, _createDropDown: function () { var e = this.wrapper.find(C + p), i = this.media(); t === e.data("kendoDropDownList") && (this._dropDownSelectHandler = F(this._dropDownSelect, this), this._dropDown = new S.DropDownList(e, { dataTextField: "quality", dataValueField: "url", popup: { position: "bottom", origin: "top", appendTo: this.wrapper }, animation: { open: { effects: "slideIn:up", duration: 1 } }, select: this._dropDownSelectHandler }), i && I(i.source) && (this._dropDown.setDataSource(i.source), this._dropDown.select(0)), this._dropDown.wrapper.addClass("k-button k-bare"), this._dropDown.wrapper.attr("title", this.options.messages.quality).hide(), this._dropDown.wrapper.find("span.k-i-arrow-60-down").removeClass("k-i-arrow-60-down").addClass("k-icon k-i-hd"), this._dropDown.list.addClass("k-quality-list")) }, _dropDownSelect: function (e) { this._currentIndex !== e.item.index() && (this._currentIndex = e.item.index(), this._setPlayerUrl()) }, _toolbarClick: function (t) { var i, n = e(t.target).children().first(), o = n.hasClass(m); this.media() && ((n.hasClass(m) || n.hasClass(g)) && (o ? this.play() : this.pause()), (n.hasClass(c) || n.hasClass(d)) && (this._isInFullScreen ? (n.removeClass(d).addClass(c), this.fullScreen(!1)) : (n.removeClass(c).addClass(d), this.fullScreen(!0))), (n.hasClass(u) || n.hasClass(h) || n.hasClass(f)) && (i = this.mute(), this.mute(!i))) }, _sliderDragging: function () { this.media() && (this._isDragging = !0) }, _sliderDragChange: function (e) { var t = this, i = e.sender, n = 1e3 * A; this.media() && (t._sliderChangeFired = !0, t._isDragging = !1, !this.options.forwardSeek && i.value() > this._seekBarLastPosition ? setTimeout(function () { i.value(t._seekBarLastPosition) }, 1) : this._youTubeVideo ? t._ytmedia.seekTo(t._timeToSec(e.value - n)) : t._media.currentTime = t._timeToSec(e.value - n), t.trigger(a), t._preventPlay = !0) }, _changeVolumeButtonImage: function (e) { var t = this._volumeButton, i = t.find("span"), n = i.attr("class"); n = n.substring(0, n.lastIndexOf(" ")), 0 === e ? (i.attr("class", n + " " + u), t.attr("title", this.options.messages.unmute), t.attr("aria-label", this.options.messages.unmute)) : e > 0 && e < 51 ? (i.attr("class", n + " " + h), t.attr("title", this.options.messages.mute), t.attr("aria-label", this.options.messages.mute)) : (i.attr("class", n + " " + f), t.attr("title", this.options.messages.mute), t.attr("aria-label", this.options.messages.mute)) }, _volumeDragging: function (e) { this.media() && (this.volume(e.value), this._changeVolumeButtonImage(e.value), this.trigger(l)) }, _volumeChange: function (e) { this.media() && (this.volume(e.value), this._changeVolumeButtonImage(e.value), this.trigger(l)) }, _mediaTimeUpdate: function () { var e = this._youTubeVideo ? this._ytmedia.getCurrentTime() : this._media.currentTime, t = this._msToTime(e); return this._currentTimeElement.text(i.toString(t, this._timeFormat)), this._isDragging || (this._seekBarLastPosition = 1e3 * (e + A), this._slider.value(this._seekBarLastPosition)), this.isPlaying() }, _playStateToggle: function (e) { t === e && (e = this._playButtonSpan.is(C + m)), e ? (this._playButtonSpan.removeClass(m).addClass(g), this._playButton.attr("title", this.options.messages.pause), this._playButton.attr("aria-label", this.options.messages.pause)) : (this._playButtonSpan.removeClass(g).addClass(m), this._playButton.attr("title", this.options.messages.play), this._playButton.attr("aria-label", this.options.messages.play)) }, _mediaEnded: function () { this._playStateToggle(!1), this._currentTimeElement.text(i.toString(this._msToTime(0), this._timeFormat)), this._slider.value(1e3 * (0 + A)), this.trigger(n) }, _mediaPlay: function () { this.trigger(r) }, _mediaReady: function () { this.trigger(s) }, _mediaDurationChange: function () { var e = this._msToTime(this._youTubeVideo ? this._ytmedia.getDuration() : this._media.duration); this._timeFormat = 0 === e.getHours() ? M.shortTime : M.longTime, this._durationElement.text(i.toString(e, this._timeFormat)), this._slider.setOptions({ min: D.getTime(), max: e.getTime() }), this._isFirstRun || (this._resetTime(), this._isFirstRun = !0) }, _createYoutubePlayer: function () { this._mediaTimeUpdateHandler = F(this._mediaTimeUpdate, this), this._mediaDurationChangeHandler = F(this._mediaDurationChange, this), this.wrapper.prepend(P.youtubePlayer), this._ytPlayer = this.wrapper.find(C + x)[0], e(this._ytPlayer).css({ width: this.wrapper.width(), height: this.wrapper.height() }), window.YT && window.YT.Player ? this._configurePlayer() : (window.onYouTubeIframeAPIReadyRegister || (window.onYouTubeIframeAPIReadyRegister = [], e.getScript("https://www.youtube.com/iframe_api"), window.onYouTubeIframeAPIReady = function () { if (window.onYouTubeIframeAPIReadyRegister) for (var e = 0; e < window.onYouTubeIframeAPIReadyRegister.length; e++)window.onYouTubeIframeAPIReadyRegister[e]._youtubeApiReady(); window.onYouTubeIframeAPIReadyRegister.length = 0, window.onYouTubeIframeAPIReadyRegister = t }), window.onYouTubeIframeAPIReadyRegister[window.onYouTubeIframeAPIReadyRegister.length] = this) }, _poll: function (e, t, i, n) { var o = this; return null !== o._timers[e] && clearTimeout(o._timers[e]), o._timers[e] = setTimeout(function (n) { return function r() { t.call(n) && (o._timers[e] = setTimeout(r, i)) } }(n), i) }, _youtubeApiReady: function () { this._configurePlayer() }, _configurePlayer: function () { var e = { autoplay: +this.options.autoPlay, wmode: "transparent", controls: 0, rel: 0, showinfo: 0 }; this._onYouTubePlayerReady = F(this._onYouTubePlayerReady, this), window.onYouTubePlayerReady = this._onYouTubePlayerReady, this._onPlayerStateChangeHandler = F(this._onPlayerStateChange, this), window.onPlayerStateChange = this._onPlayerStateChange, new window.YT.Player(this.wrapper.find(C + x)[0], { height: this.wrapper.height(), width: this.wrapper.width(), videoId: this._getMediaId(), playerVars: e, events: { onReady: this._onYouTubePlayerReady, onStateChange: this._onPlayerStateChangeHandler } }) }, _onYouTubePlayerReady: function (e) { this._ytmedia = e.target, this._ytmedia.getIframe().style.width = "100%", this._ytmedia.getIframe().style.height = "100%", this._youTubeVideo = !0, this._mediaDurationChangeHandler(), this.options.autoPlay ? (this._playStateToggle(!0), this._ytmedia.loadVideoById(this._getMediaId())) : this._ytmedia.cueVideoById(this._getMediaId()), this.options.mute && this.mute(!0), this.trigger(s) }, _updateTitle: function () { this.titlebar().text(this.media().title || this.media().source) }, _onPlayerStateChange: function (e) { 0 === e.data ? (this._slider.value(0), this._paused = !1, this._playStateToggle(!0), this.trigger(n), this.options.autoRepeat && this.play()) : 1 === e.data ? (this._mediaDurationChange(), this._ytmedia.setVolume(this.volume()), this._sliderChangeFired ? this._sliderChangeFired = !1 : this._uiDisplay(!1), this.trigger(r), this._playStateToggle(!0), this._poll("progress", this._mediaTimeUpdate, 500, this), this._paused = !1) : 2 === e.data && (this._paused || (this._uiDisplay(!0), this._playStateToggle(!1), this.trigger(o), this._paused = !0)) }, _getMediaId: function () { var e = this._currentUrl(), t = e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/); return t && 11 === t[7].length && (e = t[7]), e }, _mouseClick: function () { this.isPaused() ? this.play() : this.pause() }, _initializePlayer: function () { this._mouseMoveHandler || (this._mouseMoveHandler = F(this._mouseMove, this), this._mouseInHandler = F(this._mouseIn, this), this._mouseOutHandler = F(this._mouseOut, this), e(this.wrapper).on("mouseenter" + T, this._mouseInHandler).on("mouseleave" + T, this._mouseOutHandler).on("mousemove" + T, this._mouseMoveHandler)), !this._ytmedia && this._youTubeVideo ? this._createYoutubePlayer() : this._media || this._youTubeVideo || this._createHtmlPlayer() }, _createHtmlPlayer: function () { this._videoOverlay || (this._mouseClickHanlder = F(this._mouseClick, this), this.wrapper.append("<div class='" + k + "'></div>"), this._videoOverlay = this.wrapper.find(".k-mediaplayer-overlay").on("click" + T, this._mouseClickHanlder)), this._mediaTimeUpdateHandler = F(this._mediaTimeUpdate, this), this._mediaDurationChangeHandler = F(this._mediaDurationChange, this), this._mediaEndedHandler = F(this._mediaEnded, this), this._mediaCanPlayHandler = F(this._mediaReady, this), this._mediaPlayHandler = F(this._mediaPlay, this), this._videoOverlay.after(P.htmlPlayer), this._media = this.wrapper.find(C + y)[0], e(this._media).css({ width: "100%", height: "100%" }), this.options.mute && this.mute(!0), this._media.ontimeupdate = this._mediaTimeUpdateHandler, this._media.ondurationchange = this._mediaDurationChangeHandler, this._media.oncanplay = this._mediaCanPlayHandler, this._media.onplay = this._mediaPlayHandler, this._media.onended = this._mediaEndedHandler }, _mouseIn: function () { this._uiDisplay(!0) }, _mouseOut: function () { this._poll("mouseIdle", this._mouseIdle, 3e3, this) }, _mouseIdle: function () { return this._uiDisplay(!1), !1 }, _mouseMove: function () { this._titleBar.is(":animated") || this._toolBar.element.is(":animated") || this._slider.wrapper.is(":animated") || this._uiDisplay(!0), this._poll("mouseIdle", this._mouseIdle, 3e3, this) }, _uiDisplay: function (e) { var t = "slow", i = this._titleBar.add(this._toolBar.element.parent()); e ? i.fadeIn(t) : i.fadeOut(t) }, setOptions: function (e) { E.fn.setOptions.call(this, e) }, destroy: function () { E.fn.destroy.call(this), this.isPaused() || this.pause(), this.element.off(T), this.element.find(C + k).off(T), this._timers = null, this._mouseMoveHandler = null, this._mouseOutHandler = null, this._mouseInHandler = null, this._mouseClickHanlder = null, this._keyDownHandler = null, this._fullscreenHandler = null, this._toolbarClickHandler = null, this._sliderDragChangeHandler = null, this._sliderDraggingHandler = null, this._volumeDraggingHandler = null, this._volumeChangeHandler = null, this._youtubeApiReadyHandler = null, this._onYouTubePlayerReady = null, this._onPlayerStateChangeHandler = null, this._dropDownSelectHandler = null, this._youTubeVideo ? this._ytmedia.destroy() : (this._media.ontimeupdate = this._mediaTimeUpdateHandler = null, this._media.ondurationchange = this._mediaDurationChangeHandler = null, this._media.oncanplay = this._mediaCanPlayHandler = null, this._media.onplay = this._mediaPlayHandler = null, this._media.onended = this._mediaEndedHandler = null, this._media.src = "", this._media.remove()), this._mouseMoveTimer = null, clearTimeout(this._mouseMoveTimer), i.destroy(this.element) }, seek: function (e) { if (t === e) return 1e3 * this._youTubeVideo ? this._ytmedia.getCurrentTime() : this._media ? this._media.currentTime : 0; var i = e / 1e3; return this._youTubeVideo ? i + 3 >= this._ytmedia.getDuration() | 0 ? this._ytmedia.seekTo(this._ytmedia.getDuration() - 3 | 0, !0) : this._ytmedia.seekTo(i, !0) : this._media.currentTime = i, this }, play: function () { return this._youTubeVideo ? this._ytmedia.playVideo() : (this._uiDisplay(!1), this._media.play()), this._paused = !1, this._playStateToggle(!0), this }, stop: function () { return this._youTubeVideo && this._ytmedia ? this._ytmedia.stopVideo() : this._media && !this._youTubeVideo && (this._uiDisplay(!0), this._media.pause(), this._media.currentTime = 0), this._paused = !0, this._playStateToggle(!1), this }, pause: function () { return this._youTubeVideo ? this._ytmedia.pauseVideo() : (this._uiDisplay(!0), this._media.pause()), this._paused = !0, this._playStateToggle(!1), this.trigger(o), this }, toolbar: function () { return this._toolBar }, dropdown: function () { return this._dropDown }, titlebar: function () { return this._titleBar }, fullScreen: function (e) { if (t === e) return this._isInFullScreen || !1; var i = this.element.get(0); e ? (this.element.addClass("k-mediaplayer-fullscreen"), i.requestFullscreen ? i.requestFullscreen() : i.webkitRequestFullscreen ? i.webkitRequestFullscreen() : i.mozRequestFullScreen ? i.mozRequestFullScreen() : i.msRequestFullscreen && i.msRequestFullscreen(), this._isInFullScreen = !0) : (document.cancelFullscreen ? document.cancelFullscreen() : document.webkitCancelFullScreen ? document.webkitCancelFullScreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.msCancelFullscreen ? document.msCancelFullscreen() : document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen && document.msExitFullscreen(), this.element.removeClass("k-mediaplayer-fullscreen"), this._isInFullScreen = !1), this._slider.resize() }, volume: function (e) { return t === e ? t !== this._volume ? this._volume : this._volume = this.options.volume : (this._volume = e, this.mute(e <= 0), this._youTubeVideo ? this._ytmedia.setVolume(this._volume) : this._media.volume = this._volume / 100, this._volumeSlider.value(e), t) }, mute: function (e) { var i = this._youTubeVideo ? this._ytmedia && this._ytmedia.isMuted() : this._media && this._media.muted; return t === e || e === i ? i : (this._youTubeVideo ? e ? this._ytmedia.mute() : this._ytmedia.unMute() : this._media.muted = e, this._volumeSlider.value(e ? 0 : this._media && 100 * this._media.volume || this._ytmedia && this._ytmedia.getVolume()), this.trigger(l), this._changeVolumeButtonImage(this._volumeSlider.value()), t) }, isEnded: function () { return this._youTubeVideo ? 0 === this._ytmedia.getPlayerState() : this._media.ended }, media: function (e) { var i = this.dropdown(); return t === e ? t !== this._mediaData ? this._mediaData : this._mediaData = this.options.media : (I(e.source) ? (i.setDataSource(e.source), i.wrapper.show()) : i.wrapper.hide(), this._mediaData = e, this._updateTitle(), this._setPlayerUrl(), t) }, isPaused: function () { return this._paused }, isPlaying: function () { return !this.isEnded() && !this._paused }, _aria: function () { this.wrapper.attr("role", "region") }, _navigatable: function () { this._fullscreenHandler = F(this._fullscreen, this), e(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange" + T, this._fullscreenHandler), this.options.navigatable && (this.wrapper.attr("tabIndex", 0), this._keyDownHandler = F(this._keyDown, this), this.wrapper.on("keydown" + T, this._keyDownHandler)) }, _fullscreen: function () { var e = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen; this._uiDisplay(!0), this._slider.resize(), e || (this.wrapper.find('span[class*="k-i-fullscreen"]').removeClass(d).addClass(c), this.fullScreen(!1)) }, _keyDown: function (e) { var t, i; e.preventDefault(), t = this.wrapper.find('span[class*="k-i-fullscreen"]'), e.keyCode === z.SPACEBAR ? this.isPlaying() ? this.pause() : this.play() : e.keyCode !== z.ENTER || this._isInFullScreen ? 77 === e.keyCode ? (i = this.mute(), this.mute(!i)) : e.keyCode === z.ESC && this._isInFullScreen && (t.removeClass(d).addClass(c), this.fullScreen(!1)) : (t.removeClass(c).addClass(d), this.fullScreen(!0)) }, _error: function () { }, _progress: function () { } }), S.plugin(B), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.pivotgrid.min", ["kendo.dom.min", "kendo.data.min"], function () { return function (e, t) { function i(e) { var i = "string" == typeof e ? [{ name: e }] : e, n = "[object Array]" === ce.call(i) ? i : i !== t ? [i] : []; return ue(n, function (e) { return "string" == typeof e ? { name: e } : { name: e.name, type: e.type } }) } function n(e) { var i = "string" == typeof e ? [{ name: [e], expand: !1 }] : e, n = "[object Array]" === ce.call(i) ? i : i !== t ? [i] : []; return ue(n, function (e) { return "string" == typeof e ? { name: [e], expand: !1 } : { name: "[object Array]" === ce.call(e.name) ? e.name.slice() : [e.name], expand: e.expand } }) } function o(e) { return -1 !== e.indexOf(" ") && (e = '["' + e + '"]'), e } function r(t) { var i, n, o = {}; for (n in t.length && function e(t, i, n, o) { var r, s, a, l; if (n || (n = i), o || (o = 0), l = n.members[o], l && !l.measure) { if (a = l.children, s = a.length, n === i ? t[ie.stringify([l.name])] = !!s : s && (t[ie.stringify(Q(n, o))] = !0), s) for (r = 0; r < s; r++)e(t, i, a[r], o); e(t, i, n, o + 1) } }(o, t[0]), i = [], o) i.push({ name: e.parseJSON(n), expand: o[n] }); return i } function s(e, t, i) { var o, r; return function (e, t) { var i, n, o, r, s = (t.tuples || [])[0]; if (s && e.length < s.members.length) for (i = s.members, n = 0; n < i.length; n++)if (!i[n].measure) { for (o = !1, r = 0; r < e.length; r++)if (0 === A(e[r]).indexOf(i[n].hierarchy)) { o = !0; break } o || e.push({ name: [i[n].name], expand: !1 }) } }(t, e = e || {}), i.length > 1 && t.push({ name: me, measure: !0, children: n(i) }), o = { members: t }, e.tuples && ((r = _(e.tuples, o)).tuple && (t = function (e) { var t, i = [], n = e.members; for (t = 0; t < n.length; t++)n[t].measure || i.push({ name: [n[t].name], expand: n[t].children.length > 0 }); return i }(r.tuple))), t } function a(e) { var t = ie.getter(e.field, !0); return function (i, n) { return e.aggregate(t(i.dataItem), n, i) } } function l(e) { return "number" == typeof e && !isNaN(e) } function c(e) { return e && e.getTime } function d(e) { return e[e.length] = { value: "", fmtValue: "", ordinal: e.length }, e } function u(e, t, i) { if (e.tuples.length < f(t.tuples, i)) return t } function h(e, t) { return _(t, e).index } function f(e, t) { var i, n, o; if (!e.length) return 0; for (i = e.slice(), n = i.shift(), o = 1; n;)n.members ? [].push.apply(i, n.members) : n.children && (n.measure || (o += n.children.length), [].push.apply(i, n.children)), n = i.shift(); return t.length && (o *= t.length), o } function p(e) { return e || (e = { tuples: [] }), e.tuples || (e.tuples = []), e } function m(e, t, i) { var n, o, r, s; if (!e) return 0; for (n = Math.max(i.length, 1), o = e.members.slice(0, t), r = n, s = o.shift(), n > 1 && (n += 1); s;)s.name === me ? r += n : s.children ? [].push.apply(o, s.children) : (r++, [].push.apply(o, s.members)), s = o.shift(); return r } function g(e, t, i) { var n, o, r, s, a, l; if (!t[0]) return { parsedRoot: null, tuples: e, memberIndex: 0, index: 0 }; if (!(n = _(e, t[0])).tuple) return { parsedRoot: null, tuples: t, memberIndex: 0, index: 0 }; if (o = n.tuple.members, r = t[0].members, s = -1, o.length !== r.length) return { parsedRoot: null, tuples: t, memberIndex: 0, index: 0 }; for (a = 0, l = o.length; a < l; a++)!o[a].measure && r[a].children[0] && (-1 == s && r[a].children.length && (s = a), o[a].children = r[a].children); return i = Math.max(i.length, 1), { parsedRoot: n.tuple, index: n.index * i, memberIndex: s, tuples: e } } function v(e, t) { var i, n, o = !0; for (e = e.members, t = t.members, i = 0, n = e.length; i < n; i++)e[i].measure || t[i].measure || (o = o && A(e[i]) === A(t[i])); return o } function _(e, t) { var i, n, o, r, s, a, l, c = 0; for (i = 0, n = e.length; i < n; i++) { if (v(o = e[i], t)) return { tuple: o, index: c }; for (c++, s = 0, a = o.members.length; s < a; s++)if (!(l = o.members[s]).measure && (r = _(l.children, t), c += r.index, r.tuple)) return { tuple: r.tuple, index: c } } return { index: c } } function b(e, t) { var i, n, o, r = ""; for (n = 0, o = e.length; n < o; n++)i = e[n], r += i.name, t[r] || (t[r] = i) } function w(e, t) { var i, n, o, r, s = e.members, a = "", l = ""; for (i = 0, n = s.length; i < n; i++) { if (o = s[i], r) { if (t[a + o.name]) { a += o.name, r = t[a]; continue } return t[a + o.parentName] ? t[a + o.parentName] : t[l + o.parentName] ? t[l + o.parentName] : t[l] } if (a += o.name, !(r = t[o.parentName]) && !(r = t[a])) return null; r && (l += r.name) } return r } function y(i, n) { if (!(n < 0)) { var o = { name: me, measure: !0, children: [e.extend({ members: [], dataIndex: i.dataIndex }, i.members[n])] }; i.members.splice(n, 1, o), i.dataIndex = t } } function k(e, t) { var i, n, o, r, s, a; if (e.length < 1) return []; for (i = [], n = {}, o = function (e, t) { var i, n, o, r; if (0 === t.length) return -1; for (i = t[0], n = e.members, o = 0, r = n.length; o < r; o++)if (n[o].name == i.name) return o }(e[0], t), r = 0; r < e.length; r++)(s = e[r]).dataIndex = r, y(s, o), (a = w(s, n)) ? a.children.push(o < 0 || !a.measure ? s : s.members[o].children[0]) : i.push(s), b(s.members, n); return i } function x(e) { var i, n, o, r, s, a, l; for (e = e.slice(), i = [], n = e.shift(); n;) { for (n.dataIndex !== t && i.push(n.dataIndex), s = 0, o = 0, r = n.members.length; o < r; o++)l = n.members[o], a = l.children, l.measure ? [].splice.apply(e, [0, 0].concat(a)) : [].splice.apply(e, [s, 0].concat(a)), s += a.length; n = e.shift() } return i } function C(e) { var t = e.split("."); return t.length > 2 ? t[0] + "." + t[1] : e } function S(e, t) { var i = e.length - 1, n = e[i], o = function (e, t) { for (var i = 0, n = e.length; i < n; i++)if (0 === t.indexOf(e[i].field)) return e[i]; return null }(t, n); return o && o.dir ? n = "ORDER(" + n + ".Children," + o.field + ".CurrentMember.MEMBER_CAPTION," + o.dir + ")" : n += ".Children", e[i] = n, e } function T(e, t) { var i = e.slice(0); return t.length > 1 && i.push("{" + D(t).join(",") + "}"), function e(t) { var i, n = "CROSSJOIN({"; return t.length > 2 ? (i = t.pop(), n += e(t)) : (n += t.shift(), i = t.pop()), n += "},{", n += i, n += "})" }(i) } function D(e) { for (var i, n = 0, o = e.length, r = []; n < o; n++)i = e[n], r.push(i.name !== t ? i.name : i); return r } function A(e) { return e = e.name || e, "[object Array]" === ce.call(e) && (e = e[e.length - 1]), e } function E(e) { for (var t = e.length, i = [], n = 0; n < t; n++)i.push(e[n].name[0]); return i } function I(e, t) { var i, n, o, r = 0, s = e.length, a = t.length; for (t = t.slice(0); r < s; r++)for (i = e[r], o = 0; o < a; o++)if (n = C(t[o]), -1 !== i.indexOf(n)) { t[o] = i; break } return { names: t, expandedIdx: o, uniquePath: t.slice(0, o + 1).join("") } } function M(e) { for (var t, i, n, o, r, s, a = [], l = [], c = [], d = 0, u = e.length; d < u; d++)if (t = e[d], o = t.name, s = !1, "[object Array]" !== ce.call(o) && (t.name = o = [o]), o.length > 1) l.push(t); else { for (r = C(o[0]), i = 0, n = c.length; i < n; i++)if (0 === c[i].name[0].indexOf(r)) { s = !0; break } s || c.push(t), t.expand && a.push(t) } return a = a.concat(l), { root: c, expanded: a } } function R(e, t, i) { var n, o, r, s, a, l, c, d, u = ""; if (n = M(e = e || []), o = n.root, r = E(o), s = [], n = n.expanded, a = n.length, l = 0, d = [], r.length > 1 || t.length > 1) { for (s.push(T(r, t)); l < a; l++)c = S(n[l].name, i), d = I(c, r).names, s.push(T(d, t)); u += s.join(",") } else { for (; l < a; l++)c = S(n[l].name, i), d.push(c[0]); u += r.concat(d).join(",") } return u } function F(e) { var t = "", i = e.value, n = e.field, o = e.operator; return "in" == o ? (t += "{", t += i, t += "}") : (t += "neq" == o || "doesnotcontain" == o ? "-" : "", t += "Filter(", t += n + ".MEMBERS", t += ie.format(L[o], n, i), t += ")"), t } function z(e, t, i) { var n, o, r = ""; if (t) { for (o in r += "<" + e + ">", t) n = t[o], i && (o = o.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g, "$1_").toUpperCase().replace(/_$/, "")), r += "<" + o + ">" + n + "</" + o + ">"; r += "</" + e + ">" } else r += "<" + e + "/>"; return r } function P(e) { if (null == e) return []; var t = ce.call(e); return "[object Array]" !== t ? [e] : e } function B(e) { var t, i, n, o, r = { tuples: [] }, s = P(ie.getter("Tuples.Tuple", !0)(e)), a = ie.getter("Caption['#text']"), l = ie.getter("UName['#text']"), c = ie.getter("LName['#text']"), d = ie.getter("LNum['#text']"), u = ie.getter("CHILDREN_CARDINALITY['#text']", !0), h = ie.getter("['@Hierarchy']"), f = ie.getter("PARENT_UNIQUE_NAME['#text']", !0); for (t = 0; t < s.length; t++) { for (i = [], n = P(s[t].Member), o = 0; o < n.length; o++)i.push({ children: [], caption: a(n[o]), name: l(n[o]), levelName: c(n[o]), levelNum: d(n[o]), hasChildren: parseInt(u(n[o]), 10) > 0, parentName: f(n[o]), hierarchy: h(n[o]) }); r.tuples.push({ members: i }) } return r } var L, H, N, O, V, U, W, q, j, G, $, Y, K, Q, X, Z, J, ee, te, ie = window.kendo, ne = ie.ui, oe = ie.Class, re = ne.Widget, se = ie.data.DataSource, ae = ie._outerWidth, le = ie._outerHeight, ce = {}.toString, de = function (e) { return e }, ue = e.map, he = e.extend, fe = ie.isFunction, pe = "change", me = "Measures", ge = "progress", ve = "stateReset", _e = "auto", be = "<div/>", we = ".kendoPivotGrid", ye = "__row_total__", ke = "dataBinding", xe = "dataBound", Ce = "expandMember", Se = "collapseMember", Te = "k-i-collapse", De = "k-i-expand", Ae = "<span>#: data.member.caption || data.member.name #</span>", Ee = { sum: function (e, t) { var i = t.accumulator; return l(i) ? l(e) && (i += e) : i = e, i }, count: function (e, t) { return (t.accumulator || 0) + 1 }, average: { aggregate: function (e, i) { var n = i.accumulator; return i.count === t && (i.count = 0), l(n) ? l(e) && (n += e) : n = e, l(e) && i.count++, n }, result: function (e) { var t = e.accumulator; return l(t) && (t /= e.count), t } }, max: function (e, t) { var i = t.accumulator; return l(i) || c(i) || (i = e), i < e && (l(e) || c(e)) && (i = e), i }, min: function (e, t) { var i = t.accumulator; return l(i) || c(i) || (i = e), i > e && (l(e) || c(e)) && (i = e), i } }, Ie = oe.extend({ init: function (e) { this.options = he({}, this.options, e), this.dimensions = this._normalizeDescriptors("field", this.options.dimensions), this.measures = this._normalizeDescriptors("name", this.options.measures) }, _normalizeDescriptors: function (e, t) { var i, n, o, r; if (t = t || {}, i = {}, "[object Array]" === ce.call(t)) { for (o = 0, r = t.length; o < r; o++)"string" == typeof (n = t[o]) ? i[n] = {} : n[e] && (i[n[e]] = n); t = i } return t }, _rootTuples: function (e, i) { var n, o, r, s, a = i.length || 1, l = this.dimensions || [], c = 0, d = e.length, u = [], h = []; if (d || i.length) { for (c = 0; c < a; c++) { for (n = { members: [] }, s = 0; s < d; s++)o = e[s], r = o.split("&"), n.members[n.members.length] = { children: [], caption: (l[o] || {}).caption || "All", name: o, levelName: o, levelNum: "0", hasChildren: !0, parentName: r.length > 1 ? r[0] : t, hierarchy: o }; a > 1 && (n.members[n.members.length] = { children: [], caption: i[c].caption, name: i[c].descriptor.name, levelName: "MEASURES", levelNum: "0", hasChildren: !1, parentName: t, hierarchy: "MEASURES" }), u[u.length] = n } h.push(ye) } return { keys: h, tuples: u } }, _expandedTuples: function (e, i, n) { var o, r, s, a, l, c, d, u, h, f, p, m = n.length || 1, g = this.dimensions || [], v = [], _ = []; for (s in e) { for (a = e[s], d = this._findExpandedMember(i, a.uniquePath), l = v[d.index] || [], c = _[d.index] || [], u = d.member.names, o = 0; o < m; o++) { for (r = { members: [] }, p = 0; p < u.length; p++)p === d.member.expandedIdx ? (r.members[r.members.length] = { children: [], caption: a.value, name: a.name, hasChildren: !1, levelNum: 1, levelName: a.parentName + a.name, parentName: a.parentName, hierarchy: a.parentName + a.name }, 0 === o && c.push(Q(r, p).join(""))) : (f = u[p], h = f.split("&"), r.members[r.members.length] = { children: [], caption: (g[f] || {}).caption || "All", name: f, levelName: f, levelNum: "0", hasChildren: !0, parentName: h.length > 1 ? h[0] : t, hierarchy: f }); m > 1 && (r.members[r.members.length] = { children: [], caption: n[o].caption, name: n[o].descriptor.name, levelName: "MEASURES", levelNum: "0", hasChildren: !0, parentName: t, hierarchy: "MEASURES" }), l[l.length] = r } v[d.index] = l, _[d.index] = c } return { keys: _, tuples: v } }, _findExpandedMember: function (e, t) { for (var i = 0; i < e.length; i++)if (e[i].uniquePath === t) return { member: e[i], index: i } }, _asTuples: function (e, t, i) { var n, o; return i = i || [], n = this._rootTuples(t.root, i), o = this._expandedTuples(e, t.expanded, i), { keys: [].concat.apply(n.keys, o.keys), tuples: [].concat.apply(n.tuples, o.tuples) } }, _measuresInfo: function (e, t) { for (var i, n, o = 0, r = e && e.length, s = [], a = {}, l = {}, c = this.measures || {}; o < r; o++)n = e[o].descriptor.name, i = c[n] || {}, s.push(n), i.result && (a[n] = i.result), i.format && (l[n] = i.format); return { names: s, formats: l, resultFuncs: a, rowAxis: t } }, _toDataArray: function (e, t, i, n) { var o, r, s, a, l, c, d, u, h, f, p = [], m = 1, g = [], v = i.length || 1, _ = n.length || 1; for (t.rowAxis ? (g = t.names, m = g.length) : f = t.names, s = 0; s < v; s++)for (d = e[i[s] || ye], c = 0; c < m; c++)for (t.rowAxis && (f = [g[c]]), a = 0; a < _; a++)for (h = n[a] || ye, u = d.items[h], o = h === ye ? d.aggregates : u ? u.aggregates : {}, l = 0; l < f.length; l++)r = f[l], this._addData(p, o[r], t.formats[r], t.resultFuncs[r]); return p }, _addData: function (e, t, i, n) { var o, r = ""; t && (t = n ? n(t) : t.accumulator, r = i ? ie.format(i, t) : t), o = e.length, e[o] = { ordinal: o, value: t || "", fmtValue: r } }, _matchDescriptors: function (e, i, n) { for (var o, r, s, a, l = i.names, c = i.expandedIdx; c > 0;)if ((o = l[--c].split("&")).length > 1 && (r = o[0], s = o[1], (a = (a = n[r](e)) !== t && null !== a ? "" + a : a) != s)) return !1; return !0 }, _calculateAggregate: function (e, t, i) { var n, o, r, s = {}; for (r = 0; r < e.length; r++)o = e[r].descriptor.name, (n = i.aggregates[o] || {}).accumulator = e[r].aggregator(t, n), s[o] = n; return s }, _processColumns: function (e, i, n, o, r, s, a, l) { for (var c, d, u, h, f, p, m, g, v = r.dataItem, _ = 0; _ < i.length; _++)d = i[_], this._matchDescriptors(v, d, n) && (g = d.names.slice(0, d.expandedIdx).join(""), p = d.names[d.expandedIdx], c = n[p](v), m = p, u = o[f = g + (p = p + "&" + (c = c !== t && null !== c ? "" + c : c))] || { index: a.columnIndex, parentName: m, name: p, uniquePath: g + m, value: c }, h = s.items[f] || { aggregates: {} }, s.items[f] = { index: u.index, aggregates: this._calculateAggregate(e, r, h) }, l && (o[f] || a.columnIndex++, o[f] = u)) }, _measureAggregators: function (e) { var t, i, n, o, r, s, l = e.measures || [], c = this.measures || {}, d = []; if (l.length) { for (n = 0, o = l.length; n < o; n++)if (t = l[n], i = c[t.name], r = null, i) { if ("string" == typeof (s = i.aggregate)) { if (!(r = Ee[s.toLowerCase()])) throw Error("There is no such aggregate function"); i.aggregate = r.aggregate || r, i.result = r.result } d.push({ descriptor: t, caption: i.caption, result: i.result, aggregator: a(i) }) } } else d.push({ descriptor: { name: "default" }, caption: "default", aggregator: function () { return 1 } }); return d }, _buildGetters: function (e) { var t, i, n, r = {}; for (n = 0; n < e.length; n++)i = e[n], (t = i.split("&")).length > 1 ? r[t[0]] = ie.getter(t[0], !0) : r[i] = ie.getter(o(i), !0); return r }, _parseDescriptors: function (e) { var t, i = M(e), n = E(i.root), o = i.expanded, r = []; for (t = 0; t < o.length; t++)r.push(I(o[t].name, n)); return { root: n, expanded: r } }, _filter: function (e, t) { var i, n, o; if (!t) return e; for (n = 0, o = t.filters; n < o.length; n++)"in" === (i = o[n]).operator && (o[n] = this._normalizeFilter(i)); return new ie.data.Query(e).filter(t).data }, _normalizeFilter: function (e) { var t, i = e.value.split(","), n = []; if (!i.length) return i; for (t = 0; t < i.length; t++)n.push({ field: e.field, operator: "eq", value: i[t] }); return { logic: "or", filters: n } }, process: function (e, i) { var o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F; if (e = e || [], i = i || {}, e = this._filter(e, i.filter), o = i.measures || [], r = "rows" === i.measuresAxis, s = i.columns || [], a = i.rows || [], !s.length && a.length && (!o.length || o.length && r) && (s = a, a = [], r = !1), s.length || a.length || (r = !1), !s.length && o.length && (s = n(i.measures)), s = this._parseDescriptors(s), a = this._parseDescriptors(a), l = {}, c = {}, d = {}, h = { columnIndex: 0 }, f = this._measureAggregators(i), p = this._buildGetters(s.root), m = this._buildGetters(a.root), g = !1, v = s.expanded, _ = a.expanded, y = 0 !== _.length, R = e.length, F = 0, s.root.length || a.root.length) for (g = !0, F = 0; F < R; F++)for (b = e[F], w = { dataItem: b, index: F }, S = l[ye] || { items: {}, aggregates: {} }, this._processColumns(f, v, p, c, w, S, h, !y), S.aggregates = this._calculateAggregate(f, w, S), l[ye] = S, k = 0; k < _.length; k++)x = _[k], this._matchDescriptors(b, x, m) ? (D = x.names.slice(0, x.expandedIdx).join(""), C = x.names[x.expandedIdx], A = C, u = m[C](b), d[T = D + (C = C + "&" + (u = u !== t ? "" + u : u))] = { uniquePath: D + A, parentName: A, name: C, value: u }, E = l[T] || { items: {}, aggregates: {} }, this._processColumns(f, v, p, c, w, E, h, !0), E.aggregates = this._calculateAggregate(f, w, E), l[T] = E) : this._processColumns(f, v, p, c, w, { items: {}, aggregates: {} }, h, !0); return g && R ? (!(f.length > 1) || i.columns && i.columns.length || (s = { root: [], expanded: [] }), I = this._asTuples(c, s, r ? [] : f), M = this._asTuples(d, a, r ? f : []), c = I.tuples, d = M.tuples, l = this._toDataArray(l, this._measuresInfo(f, r), M.keys, I.keys)) : l = c = d = [], { axes: { columns: { tuples: c }, rows: { tuples: d } }, data: l } } }), Me = oe.extend({ init: function (e, t) { this.transport = t, this.options = t.options || {}, this.transport.discover || fe(e.discover) && (this.discover = e.discover) }, read: function (e) { return this.transport.read(e) }, update: function (e) { return this.transport.update(e) }, create: function (e) { return this.transport.create(e) }, destroy: function (e) { return this.transport.destroy(e) }, discover: function (e) { return this.transport.discover ? this.transport.discover(e) : (e.success({}), t) }, catalog: function (i) { var n, o = this.options || {}; return i === t ? (o.connection || {}).catalog : ((n = o.connection || {}).catalog = i, this.options.connection = n, e.extend(this.transport.options, { connection: n }), t) }, cube: function (e) { var i, n = this.options || {}; return e === t ? (n.connection || {}).cube : ((i = n.connection || {}).cube = e, this.options.connection = i, he(!0, this.transport.options, { connection: i }), t) } }), Re = se.extend({ init: function (t) { var o, r = ((t || {}).schema || {}).cube, s = "columns", a = { axes: de, cubes: de, catalogs: de, measures: de, dimensions: de, hierarchies: de, levels: de, members: de }; r && (a = e.extend(a, this._cubeSchema(r)), this.cubeBuilder = new Ie(r)), se.fn.init.call(this, he(!0, {}, { schema: a }, t)), this.transport = new Me(this.options.transport || {}, this.transport), this._columns = n(this.options.columns), this._rows = n(this.options.rows), o = this.options.measures || [], "[object Object]" === ce.call(o) && (s = o.axis || "columns", o = o.values || []), this._measures = i(o), this._measuresAxis = s, this._skipNormalize = 0, this._axes = {} }, _cubeSchema: function (t) { return { dimensions: function () { var e, i = [], n = t.dimensions; for (e in n) i.push({ name: e, caption: n[e].caption || e, uniqueName: e, defaultHierarchy: e, type: 1 }); return t.measures && i.push({ name: me, caption: me, uniqueName: me, type: 2 }), i }, hierarchies: function () { return [] }, measures: function () { var e, i = [], n = t.measures; for (e in n) i.push({ name: e, caption: e, uniqueName: e, aggregator: e }); return i }, members: e.proxy(function (e, i) { var n, r, s = i.levelUniqueName || i.memberUniqueName, a = this.options.schema.data, l = fe(a) ? a : ie.getter(a, !0), c = this.options.data && l(this.options.data) || this._rawData || [], d = [], u = 0, h = {}; if (s && (s = s.split(".")[0]), !i.treeOp) return d.push({ caption: t.dimensions[s].caption || s, childrenCardinality: "1", dimensionUniqueName: s, hierarchyUniqueName: s, levelUniqueName: s, name: s, uniqueName: s }), d; for (n = ie.getter(o(s), !0); u < c.length; u++)!(r = n(c[u])) && 0 !== r || h[r] || (h[r] = !0, d.push({ caption: r, childrenCardinality: "0", dimensionUniqueName: s, hierarchyUniqueName: s, levelUniqueName: s, name: r, uniqueName: r })); return d }, this) } }, options: { serverSorting: !0, serverPaging: !0, serverFiltering: !0, serverGrouping: !0, serverAggregates: !0 }, catalog: function (e) { return e === t ? this.transport.catalog() : (this.transport.catalog(e), this._mergeState({}), this._axes = {}, this.data([]), t) }, cube: function (e) { return e === t ? this.transport.cube() : (this.transport.cube(e), this._axes = {}, this._mergeState({}), this.data([]), t) }, axes: function () { return this._axes }, columns: function (e) { return e === t ? this._columns : (this._skipNormalize += 1, this._clearAxesData = !0, this._columns = n(e), this.query({ columns: e, rows: this.rowsAxisDescriptors(), measures: this.measures(), sort: this.sort(), filter: this.filter() }), t) }, rows: function (e) { return e === t ? this._rows : (this._skipNormalize += 1, this._clearAxesData = !0, this._rows = n(e), this.query({ columns: this.columnsAxisDescriptors(), rows: e, measures: this.measures(), sort: this.sort(), filter: this.filter() }), t) }, measures: function (e) { return e === t ? this._measures : (this._skipNormalize += 1, this._clearAxesData = !0, this.query({ columns: this.columnsAxisDescriptors(), rows: this.rowsAxisDescriptors(), measures: i(e), sort: this.sort(), filter: this.filter() }), t) }, measuresAxis: function () { return this._measuresAxis || "columns" }, _expandPath: function (e, t) { var i, o, r = "columns" === t ? "columns" : "rows", a = "columns" === t ? "rows" : "columns", l = n(e), c = A(l[l.length - 1]); for (this._lastExpanded = r, l = s(this.axes()[r], l, this.measures()), i = 0; i < l.length; i++)if (A(l[i]) === c) { if (l[i].expand) return; l[i].expand = !0 } else l[i].expand = !1; (o = {})[r] = l, o[a] = this._descriptorsForAxis(a), this._query(o) }, _descriptorsForAxis: function (e) { var t = this.axes(), i = this[e]() || []; return t && t[e] && t[e].tuples && t[e].tuples[0] && (i = r(t[e].tuples || [])), i }, columnsAxisDescriptors: function () { return this._descriptorsForAxis("columns") }, rowsAxisDescriptors: function () { return this._descriptorsForAxis("rows") }, _process: function (e, t) { this._view = e, (t = t || {}).items = t.items || this._view, this.trigger(pe, t) }, _query: function (e) { var t = this; return e || (this._skipNormalize += 1, this._clearAxesData = !0), t.query(he({}, { page: t.page(), pageSize: t.pageSize(), sort: t.sort(), filter: t.filter(), group: t.group(), aggregate: t.aggregate(), columns: this.columnsAxisDescriptors(), rows: this.rowsAxisDescriptors(), measures: this.measures() }, e)) }, query: function (t) { var i = this._mergeState(t); return this._data.length && this.cubeBuilder ? (this._params(i), this._updateLocalData(this._pristineData), e.Deferred().resolve().promise()) : this.read(i) }, _mergeState: function (e) { return (e = se.fn._mergeState.call(this, e)) !== t && (this._measures = i(e.measures), e.columns ? e.columns = n(e.columns) : e.columns || (this._columns = []), e.rows ? e.rows = n(e.rows) : e.rows || (this._rows = [])), e }, filter: function (e) { return e === t ? this._filter : (this._skipNormalize += 1, this._clearAxesData = !0, this._query({ filter: e, page: 1 }), t) }, expandColumn: function (e) { this._expandPath(e, "columns") }, expandRow: function (e) { this._expandPath(e, "rows") }, success: function (e) { var t; this.cubeBuilder && (t = (this.reader.data(e) || []).slice(0)), se.fn.success.call(this, e), t && (this._pristineData = t) }, _processResult: function (e, t) { var i, n, o, r, s, a, l, c, d, m, g; return this.cubeBuilder && (i = this.cubeBuilder.process(e, this._requestData), e = i.data, t = i.axes), c = this.columns(), d = this.rows(), m = t.columns && t.columns.tuples, c.length || !d.length || !m || !this._rowMeasures().length && this.measures().length || (t = { columns: {}, rows: t.columns }), c.length || d.length || "rows" !== this.measuresAxis() || !m || (t = { columns: {}, rows: t.columns }), this._axes = { columns: p(this._axes.columns), rows: p(this._axes.rows) }, t = { columns: p(t.columns), rows: p(t.rows) }, n = this._normalizeTuples(t.columns.tuples, this._axes.columns.tuples, c, this._columnMeasures()), o = this._normalizeTuples(t.rows.tuples, this._axes.rows.tuples, d, this._rowMeasures()), this._skipNormalize -= 1, this.cubeBuilder || (e = this._normalizeData({ columnsLength: t.columns.tuples.length, rowsLength: t.rows.tuples.length, columnIndexes: n, rowIndexes: o, data: e })), "rows" == this._lastExpanded ? (r = t.columns.tuples, a = this._columnMeasures(), (s = u(t.columns, this._axes.columns, a)) && (l = "columns", t.columns = s, function (e, t, i, n, o) { var r, s, a, l = e.length, c = f(t, n), d = n.length || 1; for (s = 0; s < i; s++)for (r = 0; r < l; r++)a = h(e[r], t) * d, a += r % d, o[s * l + r].ordinal = s * c + a }(r, s.tuples, t.rows.tuples.length, a, e), this.cubeBuilder || (e = this._normalizeData({ columnsLength: f(t.columns.tuples, a), rowsLength: t.rows.tuples.length, data: e })))) : "columns" == this._lastExpanded && (r = t.rows.tuples, a = this._rowMeasures(), (s = u(t.rows, this._axes.rows, a)) && (l = "rows", t.rows = s, function (e, t, i, n, o) { var r, s, a, l = e.length, c = n.length || 1; for (s = 0; s < l; s++)for (a = h(e[s], t), a *= c, a += s % c, r = 0; r < i; r++)o[s * i + r].ordinal = a * i + r }(r, s.tuples, t.columns.tuples.length, a, e), this.cubeBuilder || (e = this._normalizeData({ columnsLength: f(t.rows.tuples, a), rowsLength: t.columns.tuples.length, data: e })))), this._lastExpanded = null, g = this._mergeAxes(t, e, l), this._axes = g.axes, g.data }, _readData: function (e) { var t = this.reader.axes(e), i = this.reader.data(e); return this.cubeBuilder && (this._rawData = i), this._processResult(i, t) }, _createTuple: function (e, t, i) { var n, o, r, s, a, l, c, d, u = e.members, h = u.length, f = { members: [] }, p = 0; for (t && (h -= 1); p < h; p++)d = u[p], o = +d.levelNum, r = d.name, s = d.parentName, c = d.caption || r, a = d.hasChildren, l = d.hierarchy, n = d.levelName, i && (c = "All", 0 === o ? s = d.name : o -= 1, a = !0, r = l = n = s), f.members.push({ name: r, children: [], caption: c, levelName: n, levelNum: "" + o, hasChildren: a, hierarchy: l, parentName: i ? "" : s }); return t && f.members.push({ name: t.name, children: [] }), f }, _hasRoot: function (e, t, i) { var n, o, r, s, a, l, c; if (t.length) return _(t, e).tuple; for (n = e.members, s = !0, l = 0, c = n.length; l < c; l++)if (o = n[l], a = +o.levelNum || 0, r = i[l], !(0 === a || r && o.name === A(r))) { s = !1; break } return s }, _mergeAxes: function (e, t, i) { var n, o, r, s, a, l = this._columnMeasures(), c = this._rowMeasures(), d = this.axes(), u = f(d.rows.tuples, c), h = e.rows.tuples.length, p = f(d.columns.tuples, l), v = e.columns.tuples.length; return "columns" == i ? (v = p, o = e.columns.tuples) : (o = k(e.columns.tuples, l), t = function (e, t) { var i, n, o, r, s, a, l, c; if (!e || !e.length) return t; for (i = [], n = x(e), o = n.length, r = Math.max(t.length / o, 1), a = 0; a < r; a++)for (l = o * a, s = 0; s < o; s++)c = n[s] + l, i[l + s] = t[c] || { value: "", fmtValue: "", ordinal: c }; return i }(o, t)), r = g(d.columns.tuples, o, l), "rows" == i ? (h = f(e.rows.tuples, c), o = e.rows.tuples) : (o = k(e.rows.tuples, c), t = function (e, t) { var i, n, o, r, s, a, l, c, d; if (!e || !e.length) return t; for (i = [], n = x(e), o = n.length, r = Math.max(t.length / o, 1), s = 0; s < o; s++)for (l = r * s, c = r * n[s], a = 0; a < r; a++)d = parseInt(c + a, 10), i[parseInt(l + a, 10)] = t[d] || { value: "", fmtValue: "", ordinal: d }; return i }(o, t)), s = g(d.rows.tuples, o, c), d.columns.tuples = r.tuples, d.rows.tuples = s.tuples, p !== f(d.columns.tuples, l) ? (n = r.index + m(r.parsedRoot, r.memberIndex, l), a = p + v, t = this._mergeColumnData(t, n, h, v, a)) : u !== f(d.rows.tuples, c) && (n = s.index + m(s.parsedRoot, s.memberIndex, c), t = this._mergeRowData(t, n, h, v)), 0 === d.columns.tuples.length && 0 === d.rows.tuples.length && (t = []), { axes: d, data: t } }, _mergeColumnData: function (e, t, i, n, o) { var r, s, a, l = this.data().toJSON(), c = 0, d = Math.max(this._columnMeasures().length, 1); for (i = Math.max(i, 1), l.length > 0 && (c = d, o -= d), r = 0; r < i; r++)s = t + r * o, (a = e.splice(0, n)).splice(0, c), [].splice.apply(l, [s, 0].concat(a)); return l }, _mergeRowData: function (e, t, i, n) { var o, r, s, a = this.data().toJSON(), l = Math.max(this._rowMeasures().length, 1); for (n = Math.max(n, 1), a.length > 0 && (i -= l, e.splice(0, n * l)), o = 0; o < i; o++)s = e.splice(0, n), r = t * n + o * n, [].splice.apply(a, [r, 0].concat(s)); return a }, _columnMeasures: function () { var e = this.measures(), t = []; return "columns" === this.measuresAxis() && (0 === this.columns().length ? t = e : e.length > 1 && (t = e)), t }, _rowMeasures: function () { var e = this.measures(), t = []; return "rows" === this.measuresAxis() && (0 === this.rows().length ? t = e : e.length > 1 && (t = e)), t }, _updateLocalData: function (e, t) { this.cubeBuilder && (t && (this._requestData = t), e = this._processResult(e)), this._data = this._observe(e), this._ranges = [], this._addRange(this._data), this._total = this._data.length, this._pristineTotal = this._total, this._process(this._data) }, data: function (e) { return e === t ? this._data : (this._pristineData = e.slice(0), this._updateLocalData(e, { columns: this.columns(), rows: this.rows(), measures: this.measures() }), t) }, _normalizeTuples: function (e, t, i, n) { var o, r, s, a = n.length || 1, l = 0, c = [], d = {}, u = 0; if (e.length) { if (this._skipNormalize <= 0 && !this._hasRoot(e[0], t, i)) { for (this._skipNormalize = 0; l < a; l++)c.push(this._createTuple(e[0], n[l], !0)), d[l] = l; e.splice.apply(e, [0, e.length].concat(c).concat(e)), l = a } if (n.length) for (s = o = e[l], r = o.members.length - 1; o;) { if (u >= a && (u = 0), o.members[r].name !== n[u].name && (e.splice(l, 0, this._createTuple(o, n[u])), d[l] = l), u += 1, o = e[l += 1], a > u && (!o || X(s, r - 1) !== X(o, r - 1))) { for (; u < a; u++)e.splice(l, 0, this._createTuple(s, n[u])), d[l] = l, l += 1; o = e[l] } s = o } return d } }, _addMissingDataItems: function (e, i) { for (; i.rowIndexes[parseInt(e.length / i.columnsLength, 10)] !== t;)for (var n = 0; n < i.columnsLength; n++)e = d(e); for (; i.columnIndexes[e.length % i.columnsLength] !== t;)e = d(e); return e }, _normalizeOrdinals: function (e, t, i) { var n = i.lastOrdinal; if (!t) return d(e); if (t.ordinal - n > 1) for (n += 1; n < t.ordinal && e.length < i.length;)e = this._addMissingDataItems(d(e), i), n += 1; return t.ordinal = e.length, e[e.length] = t, e }, _normalizeData: function (e) { var t, i, n, o = e.data, r = 0, s = []; if (e.lastOrdinal = 0, e.columnIndexes = e.columnIndexes || {}, e.rowIndexes = e.rowIndexes || {}, e.columnsLength = e.columnsLength || 1, e.rowsLength = e.rowsLength || 1, e.length = e.columnsLength * e.rowsLength, n = e.length, o.length === n) return o; for (; s.length < n;)(t = o[r++]) && (i = t.ordinal), s = this._normalizeOrdinals(this._addMissingDataItems(s, e), t, e), e.lastOrdinal = i; return s }, discover: function (t, i) { var n = this, o = n.transport; return e.Deferred(function (e) { o.discover(he({ success: function (t) { t = n.reader.parse(t), n._handleCustomErrors(t) || (i && (t = i(t)), e.resolve(t)) }, error: function (t, i, o) { e.reject(t), n.error(t, i, o) } }, t)) }).promise().done(function () { n.trigger("schemaChange") }) }, schemaMeasures: function () { var e = this; return e.discover({ data: { command: "schemaMeasures", restrictions: { catalogName: e.transport.catalog(), cubeName: e.transport.cube() } } }, function (t) { return e.reader.measures(t) }) }, schemaKPIs: function () { var e = this; return e.discover({ data: { command: "schemaKPIs", restrictions: { catalogName: e.transport.catalog(), cubeName: e.transport.cube() } } }, function (t) { return e.reader.kpis(t) }) }, schemaDimensions: function () { var e = this; return e.discover({ data: { command: "schemaDimensions", restrictions: { catalogName: e.transport.catalog(), cubeName: e.transport.cube() } } }, function (t) { return e.reader.dimensions(t) }) }, schemaHierarchies: function (e) { var t = this; return t.discover({ data: { command: "schemaHierarchies", restrictions: { catalogName: t.transport.catalog(), cubeName: t.transport.cube(), dimensionUniqueName: e } } }, function (e) { return t.reader.hierarchies(e) }) }, schemaLevels: function (e) { var t = this; return t.discover({ data: { command: "schemaLevels", restrictions: { catalogName: t.transport.catalog(), cubeName: t.transport.cube(), hierarchyUniqueName: e } } }, function (e) { return t.reader.levels(e) }) }, schemaCubes: function () { var e = this; return e.discover({ data: { command: "schemaCubes", restrictions: { catalogName: e.transport.catalog() } } }, function (t) { return e.reader.cubes(t) }) }, schemaCatalogs: function () { var e = this; return e.discover({ data: { command: "schemaCatalogs" } }, function (t) { return e.reader.catalogs(t) }) }, schemaMembers: function (e) { var t = this, i = function (e) { return function (i) { return t.reader.members(i, e) } }(e); return t.discover({ data: { command: "schemaMembers", restrictions: he({ catalogName: t.transport.catalog(), cubeName: t.transport.cube() }, e) } }, i) }, _params: function (e) { this._clearAxesData && (this._axes = {}, this._data = this._observe([]), this._clearAxesData = !1, this.trigger(ve)); var t = se.fn._params.call(this, e); return t = he({ measures: this.measures(), measuresAxis: this.measuresAxis(), columns: this.columns(), rows: this.rows() }, t), this.cubeBuilder && (this._requestData = t), t } }); Re.create = function (e) { var t = (e = e && e.push ? { data: e } : e) || {}, i = t.data; if (t.data = i, !(t instanceof Re) && t instanceof ie.data.DataSource) throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported"); return t instanceof Re ? t : new Re(t) }, L = { contains: ', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0', doesnotcontain: ', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")', startswith: ', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"', endswith: ', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"', eq: ', {0}.CurrentMember.MEMBER_CAPTION = "{1}"', neq: ', {0}.CurrentMember.MEMBER_CAPTION = "{1}"' }, H = { schemaCubes: "MDSCHEMA_CUBES", schemaCatalogs: "DBSCHEMA_CATALOGS", schemaMeasures: "MDSCHEMA_MEASURES", schemaDimensions: "MDSCHEMA_DIMENSIONS", schemaHierarchies: "MDSCHEMA_HIERARCHIES", schemaLevels: "MDSCHEMA_LEVELS", schemaMembers: "MDSCHEMA_MEMBERS", schemaKPIs: "MDSCHEMA_KPIS" }, N = { read: function (e) { var t, i, n, o, r, s = '<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>'; return s += "SELECT NON EMPTY {", t = e.columns || [], i = e.rows || [], n = e.measures || [], o = "rows" === e.measuresAxis, r = e.sort || [], !t.length && i.length && (!n.length || n.length && o) && (t = i, i = [], o = !1), t.length || i.length || (o = !1), t.length ? s += R(t, o ? [] : n, r) : n.length && !o && (s += D(n).join(",")), s += "} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS", (i.length || o && n.length > 1) && (s += ", NON EMPTY {", s += i.length ? R(i, o ? n : [], r) : D(n).join(","), s += "} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"), e.filter ? (s += " FROM ", s += "(", s += function (e, t) { var i, n, o = "", r = e.filters, s = r.length; for (n = s - 1; n >= 0; n--)i = "SELECT (", i += F(r[n]), i += ") ON 0", o = n == s - 1 ? i += " FROM [" + t + "]" : i + " FROM ( " + o + " )"; return o }(e.filter, e.connection.cube), s += ")") : s += " FROM [" + e.connection.cube + "]", 1 == n.length && t.length && (s += " WHERE (" + D(n).join(",") + ")"), (s += "</Statement></Command><Properties><PropertyList><Catalog>" + e.connection.catalog + "</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/\&/g, "&amp;") }, discover: function (t) { var i = '<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">'; return i += "<RequestType>" + (H[(t = t || {}).command] || t.command) + "</RequestType>", i += "<Restrictions>" + z("RestrictionList", t.restrictions, !0) + "</Restrictions>", t.connection && t.connection.catalog && (t.properties = e.extend({}, { Catalog: t.connection.catalog }, t.properties)), i += "<Properties>" + z("PropertyList", t.properties) + "</Properties>", i += "</Discover></Body></Envelope>" } }, O = ie.data.RemoteTransport.extend({ init: function (e) { var t = e; e = this.options = he(!0, {}, this.options, e), ie.data.RemoteTransport.call(this, e), fe(t.discover) ? this.discover = t.discover : "string" == typeof t.discover ? this.options.discover = { url: t.discover } : t.discover || (this.options.discover = this.options.read) }, setup: function (t, i) { return t.data = t.data || {}, e.extend(!0, t.data, { connection: this.options.connection }), ie.data.RemoteTransport.fn.setup.call(this, t, i) }, options: { read: { dataType: "text", contentType: "text/xml", type: "POST" }, discover: { dataType: "text", contentType: "text/xml", type: "POST" }, parameterMap: function (e, t) { return N[t](e, t) } }, discover: function (t) { return e.ajax(this.setup(t, "discover")) } }), V = { cubes: { name: ie.getter("CUBE_NAME['#text']", !0), caption: ie.getter("CUBE_CAPTION['#text']", !0), description: ie.getter("DESCRIPTION['#text']", !0), type: ie.getter("CUBE_TYPE['#text']", !0) }, catalogs: { name: ie.getter("CATALOG_NAME['#text']", !0), description: ie.getter("DESCRIPTION['#text']", !0) }, measures: { name: ie.getter("MEASURE_NAME['#text']", !0), caption: ie.getter("MEASURE_CAPTION['#text']", !0), uniqueName: ie.getter("MEASURE_UNIQUE_NAME['#text']", !0), description: ie.getter("DESCRIPTION['#text']", !0), aggregator: ie.getter("MEASURE_AGGREGATOR['#text']", !0), groupName: ie.getter("MEASUREGROUP_NAME['#text']", !0), displayFolder: ie.getter("MEASURE_DISPLAY_FOLDER['#text']", !0), defaultFormat: ie.getter("DEFAULT_FORMAT_STRING['#text']", !0) }, kpis: { name: ie.getter("KPI_NAME['#text']", !0), caption: ie.getter("KPI_CAPTION['#text']", !0), value: ie.getter("KPI_VALUE['#text']", !0), goal: ie.getter("KPI_GOAL['#text']", !0), status: ie.getter("KPI_STATUS['#text']", !0), trend: ie.getter("KPI_TREND['#text']", !0), statusGraphic: ie.getter("KPI_STATUS_GRAPHIC['#text']", !0), trendGraphic: ie.getter("KPI_TREND_GRAPHIC['#text']", !0), description: ie.getter("KPI_DESCRIPTION['#text']", !0), groupName: ie.getter("MEASUREGROUP_NAME['#text']", !0) }, dimensions: { name: ie.getter("DIMENSION_NAME['#text']", !0), caption: ie.getter("DIMENSION_CAPTION['#text']", !0), description: ie.getter("DESCRIPTION['#text']", !0), uniqueName: ie.getter("DIMENSION_UNIQUE_NAME['#text']", !0), defaultHierarchy: ie.getter("DEFAULT_HIERARCHY['#text']", !0), type: ie.getter("DIMENSION_TYPE['#text']", !0) }, hierarchies: { name: ie.getter("HIERARCHY_NAME['#text']", !0), caption: ie.getter("HIERARCHY_CAPTION['#text']", !0), description: ie.getter("DESCRIPTION['#text']", !0), uniqueName: ie.getter("HIERARCHY_UNIQUE_NAME['#text']", !0), dimensionUniqueName: ie.getter("DIMENSION_UNIQUE_NAME['#text']", !0), displayFolder: ie.getter("HIERARCHY_DISPLAY_FOLDER['#text']", !0), origin: ie.getter("HIERARCHY_ORIGIN['#text']", !0), defaultMember: ie.getter("DEFAULT_MEMBER['#text']", !0) }, levels: { name: ie.getter("LEVEL_NAME['#text']", !0), caption: ie.getter("LEVEL_CAPTION['#text']", !0), description: ie.getter("DESCRIPTION['#text']", !0), uniqueName: ie.getter("LEVEL_UNIQUE_NAME['#text']", !0), dimensionUniqueName: ie.getter("DIMENSION_UNIQUE_NAME['#text']", !0), displayFolder: ie.getter("LEVEL_DISPLAY_FOLDER['#text']", !0), orderingProperty: ie.getter("LEVEL_ORDERING_PROPERTY['#text']", !0), origin: ie.getter("LEVEL_ORIGIN['#text']", !0), hierarchyUniqueName: ie.getter("HIERARCHY_UNIQUE_NAME['#text']", !0) }, members: { name: ie.getter("MEMBER_NAME['#text']", !0), caption: ie.getter("MEMBER_CAPTION['#text']", !0), uniqueName: ie.getter("MEMBER_UNIQUE_NAME['#text']", !0), dimensionUniqueName: ie.getter("DIMENSION_UNIQUE_NAME['#text']", !0), hierarchyUniqueName: ie.getter("HIERARCHY_UNIQUE_NAME['#text']", !0), levelUniqueName: ie.getter("LEVEL_UNIQUE_NAME['#text']", !0), childrenCardinality: ie.getter("CHILDREN_CARDINALITY['#text']", !0) } }, U = ["axes", "catalogs", "cubes", "dimensions", "hierarchies", "levels", "measures"], W = ie.data.XmlDataReader.extend({ init: function (e) { ie.data.XmlDataReader.call(this, e), this._extend(e) }, _extend: function (e) { for (var t, i, n = 0, o = U.length; n < o; n++)(i = e[t = U[n]]) && i !== de && (this[t] = i) }, parse: function (e) { var t = ie.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g, "<$1")); return ie.getter("['Envelope']['Body']", !0)(t) }, errors: function (e) { var t = ie.getter("['Fault']", !0)(e); return t ? [{ faultstring: ie.getter("faultstring['#text']", !0)(t), faultcode: ie.getter("faultcode['#text']", !0)(t) }] : null }, axes: function (e) { var t, i, n, o; for (e = ie.getter('ExecuteResponse["return"].root', !0)(e), t = P(ie.getter("Axes.Axis", !0)(e)), n = { columns: {}, rows: {} }, o = 0; o < t.length; o++)"sliceraxis" !== (i = t[o])["@name"].toLowerCase() && (n.columns.tuples ? n.rows = B(i) : n.columns = B(i)); return n }, data: function (e) { var t, i, n, o, r, s; for (e = ie.getter('ExecuteResponse["return"].root', !0)(e), t = P(ie.getter("CellData.Cell", !0)(e)), i = [], n = ie.getter("['@CellOrdinal']"), o = ie.getter("Value['#text']"), r = ie.getter("FmtValue['#text']"), s = 0; s < t.length; s++)i.push({ value: o(t[s]), fmtValue: r(t[s]), ordinal: parseInt(n(t[s]), 10) }); return i }, _mapSchema: function (e, t) { var i, n, o, r, s; for (e = ie.getter('DiscoverResponse["return"].root', !0)(e), i = P(ie.getter("row", !0)(e)), n = [], o = 0; o < i.length; o++) { for (s in r = {}, t) r[s] = t[s](i[o]); n.push(r) } return n }, measures: function (e) { return this._mapSchema(e, V.measures) }, kpis: function (e) { return this._mapSchema(e, V.kpis) }, hierarchies: function (e) { return this._mapSchema(e, V.hierarchies) }, levels: function (e) { return this._mapSchema(e, V.levels) }, dimensions: function (e) { return this._mapSchema(e, V.dimensions) }, cubes: function (e) { return this._mapSchema(e, V.cubes) }, catalogs: function (e) { return this._mapSchema(e, V.catalogs) }, members: function (e) { return this._mapSchema(e, V.members) } }), he(!0, ie.data, { PivotDataSource: Re, XmlaTransport: O, XmlaDataReader: W, PivotCubeBuilder: Ie, transports: { xmla: O }, readers: { xmla: W } }), q = function (e, t) { if (!e) return null; for (var i = 0, n = e.length; i < n; i++)if (e[i].field === t) return e[i]; return null }, j = function (e, t) { var i, n, o = []; for (i = 0, n = e.length; i < n; i++)e[i].field !== t && o.push(e[i]); return o }, ie.ui.PivotSettingTarget = re.extend({ init: function (t, i) { var n = this; re.fn.init.call(n, t, i), n.element.addClass("k-pivot-setting"), n.dataSource = ie.data.PivotDataSource.create(i.dataSource), n._refreshHandler = e.proxy(n.refresh, n), n.dataSource.first(pe, n._refreshHandler), i.template || (n.options.template = "<div data-" + ie.ns + 'name="${data.name || data}">${data.name || data}' + (n.options.enabled ? '<a class="k-button k-button-icon k-bare"><span class="k-icon k-i-close k-setting-delete"></span></a>' : "") + "</div>"), n.template = ie.template(n.options.template), n.emptyTemplate = ie.template(n.options.emptyTemplate), n._sortable(), n.element.on("click" + we, ".k-button,.k-item", function (t) { var i = e(t.target), o = i.closest("[" + ie.attr("name") + "]").attr(ie.attr("name")); o && (i.hasClass("k-i-close") ? n.remove(o) : n.options.sortable && i[0] === t.currentTarget && n.sort({ field: o, dir: i.find(".k-i-sort-asc-sm")[0] ? "desc" : "asc" })) }), (i.filterable || i.sortable) && (n.fieldMenu = new ne.PivotFieldMenu(n.element, { messages: n.options.messages.fieldMenu, filter: ".k-setting-fieldmenu", filterable: i.filterable, sortable: i.sortable, dataSource: n.dataSource })), n.refresh() }, options: { name: "PivotSettingTarget", template: null, filterable: !1, sortable: !1, emptyTemplate: "<div class='k-empty'>${data}</div>", setting: "columns", enabled: !0, messages: { empty: "Drop Fields Here" } }, setDataSource: function (e) { this.dataSource.unbind(pe, this._refreshHandler), this.dataSource = this.options.dataSource = e, this.fieldMenu && this.fieldMenu.setDataSource(e), e.first(pe, this._refreshHandler), this.refresh() }, _sortable: function () { var e = this; e.options.enabled && (this.sortable = this.element.kendoSortable({ connectWith: this.options.connectWith, hint: e.options.hint, cursor: "move", start: function (e) { e.item.focus().blur() }, change: function (t) { var i = t.item.attr(ie.attr("name")); "receive" == t.action ? e.add(i) : "remove" == t.action ? e.remove(i) : "sort" == t.action && e.move(i, t.newIndex) } }).data("kendoSortable")) }, _indexOf: function (e, t) { var i, n, o = -1; for (i = 0, n = t.length; i < n; i++)if (A(t[i]) === e) { o = i; break } return o }, _isKPI: function (e) { return "kpi" === e.type || e.measure }, validate: function (e) { var t, i, n = 2 == e.type || "aggregator" in e || this._isKPI(e); return n ? "measures" === this.options.setting : "measures" === this.options.setting ? n : (t = this.dataSource[this.options.setting](), i = e.defaultHierarchy || e.uniqueName, !(this._indexOf(i, t) > -1 || (t = this.dataSource["columns" === this.options.setting ? "rows" : "columns"](), this._indexOf(i, t) > -1))) }, add: function (t) { var i, n, o = this.dataSource[this.options.setting](); for (t = e.isArray(t) ? t.slice(0) : [t], i = 0, n = t.length; i < n; i++)-1 !== this._indexOf(t[i], o) && (t.splice(i, 1), i -= 1, n -= 1); t.length && (o = o.concat(t), this.dataSource[this.options.setting](o)) }, move: function (e, t) { var i = this.dataSource[this.options.setting](), n = this._indexOf(e, i); n > -1 && (e = i.splice(n, 1)[0], i.splice(t, 0, e), this.dataSource[this.options.setting](i)) }, remove: function (e) { var t = this.dataSource[this.options.setting](), i = this._indexOf(e, t), n = this.dataSource.sort(), o = this.dataSource.filter(); i > -1 && (o && (o.filters = j(o.filters, e), this.dataSource._filter.filters = o.filters, o.filters.length || (this.dataSource._filter = null)), n && (n = j(n, e), this.dataSource._sort = n), t.splice(i, 1), this.dataSource[this.options.setting](t)) }, sort: function (e) { var t = this.options.sortable, i = !0 === t || t.allowUnsort, n = i && "asc" === e.dir, o = this.dataSource.sort() || [], r = j(o, e.field); n && o.length !== r.length && (e = null), e && r.push(e), this.dataSource.sort(r) }, refresh: function () { var e, i = "", n = this.dataSource[this.options.setting](), o = n.length, r = 0; if (o) for (; r < o; r++)e = (e = n[r]).name === t ? { name: e } : e, i += this.template(he({ sortIcon: this._sortIcon(e.name) }, e)); else i = this.emptyTemplate(this.options.messages.empty); this.element.html(i) }, destroy: function () { re.fn.destroy.call(this), this.dataSource.unbind(pe, this._refreshHandler), this.element.off(we), this.sortable && this.sortable.destroy(), this.fieldMenu && this.fieldMenu.destroy(), this.element = null, this._refreshHandler = null }, _sortIcon: function (e) { var t = this.dataSource.sort(), i = q(t, A(e)), n = ""; return i && (n = "k-i-sort-" + i.dir), n } }), G = re.extend({ init: function (i, n) { var o, r, s = this; re.fn.init.call(s, i, n), s._dataSource(), s._bindConfigurator(), s._wrapper(), s._createLayout(), s._columnBuilder = o = new Z, s._rowBuilder = r = new J, s._contentBuilder = new ee, s._templates(), s.columnsHeader.add(s.rowsHeader).on("click", "span.k-icon", function () { var i, n, a, l, c = e(this), d = o, u = "expandColumn", h = c.attr(ie.attr("path")), f = { axis: "columns", path: e.parseJSON(h) }; c.parent().is("td") && (d = r, u = "expandRow", f.axis = "rows"), n = c.hasClass(Te), a = d.metadata[h], l = a.expanded === t, i = n ? Se : Ce, f.childrenLoaded = a.maxChildren > a.children, s.trigger(i, f) || (d.metadata[h].expanded = !n, c.toggleClass(Te, !n).toggleClass(De, n), !n && l ? s.dataSource[u](f.path) : s.refresh()) }), s._scrollable(), s.options.autoBind && s.dataSource.fetch(), ie.notify(s) }, events: [ke, xe, Ce, Se], options: { name: "PivotGrid", autoBind: !0, reorderable: !0, filterable: !1, sortable: !1, height: null, columnWidth: 100, configurator: "", columnHeaderTemplate: null, rowHeaderTemplate: null, dataCellTemplate: null, kpiStatusTemplate: null, kpiTrendTemplate: null, messages: { measureFields: "Drop Data Fields Here", columnFields: "Drop Column Fields Here", rowFields: "Drop Rows Fields Here" } }, _templates: function () { var e = this.options.columnHeaderTemplate, t = this.options.rowHeaderTemplate, i = this.options.dataCellTemplate, n = this.options.kpiStatusTemplate, o = this.options.kpiTrendTemplate; this._columnBuilder.template = ie.template(e || Ae, { useWithBlock: !!e }), this._contentBuilder.dataTemplate = ie.template(i || '#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #', { useWithBlock: !!i }), this._contentBuilder.kpiStatusTemplate = ie.template(n || '<span class="k-icon k-i-#=data.dataItem.value > 0 ? "circle" : data.dataItem.value < 0 ? "stop" : "arrow-60-up k-i-hold"#" title="#:data.dataItem.value#"></span>', { useWithBlock: !!n }), this._contentBuilder.kpiTrendTemplate = ie.template(o || '<span class="k-icon k-i-#=data.dataItem.value > 0 ? "arrow-60-up" : data.dataItem.value < 0 ? "arrow-60-down" : "minus"#" title="#:data.dataItem.value#"></span>', { useWithBlock: !!o }), this._rowBuilder.template = ie.template(t || Ae, { useWithBlock: !!t }) }, _bindConfigurator: function () { var t = this.options.configurator; t && e(t).kendoPivotConfigurator("setDataSource", this.dataSource) }, cellInfoByElement: function (t) { return t = e(t), this.cellInfo(t.index(), t.parent("tr").index()) }, cellInfo: function (e, t) { var i, n = this._contentBuilder, o = n.columnIndexes[e || 0], r = n.rowIndexes[t || 0]; return o && r ? (i = r.index * n.rowLength + o.index, { columnTuple: o.tuple, rowTuple: r.tuple, measure: o.measure || r.measure, dataItem: this.dataSource.view()[i] }) : null }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.measuresTarget && this.measuresTarget.setDataSource(e), this.rowsTarget && this.rowsTarget.setDataSource(e), this.columnsTarget && this.columnsTarget.setDataSource(e), this._bindConfigurator(), this.options.autoBind && e.fetch() }, setOptions: function (e) { re.fn.setOptions.call(this, e), this._templates() }, destroy: function () { re.fn.destroy.call(this), clearTimeout(this._headerReflowTimeout) }, _dataSource: function () { var t = this, i = t.options.dataSource; i = e.isArray(i) ? { data: i } : i, t.dataSource && this._refreshHandler ? t.dataSource.unbind(pe, t._refreshHandler).unbind(ve, t._stateResetHandler).unbind(ge, t._progressHandler).unbind("error", t._errorHandler) : (t._refreshHandler = e.proxy(t.refresh, t), t._progressHandler = e.proxy(t._requestStart, t), t._stateResetHandler = e.proxy(t._stateReset, t), t._errorHandler = e.proxy(t._error, t)), t.dataSource = ie.data.PivotDataSource.create(i).bind(pe, t._refreshHandler).bind(ge, t._progressHandler).bind(ve, t._stateResetHandler).bind("error", t._errorHandler) }, _error: function () { this._progress(!1) }, _requestStart: function () { this._progress(!0) }, _stateReset: function () { this._columnBuilder.reset(), this._rowBuilder.reset() }, _wrapper: function () { var e = this.options.height; this.wrapper = this.element.addClass("k-widget k-pivot"), e && this.wrapper.css("height", e) }, _measureFields: function () { this.measureFields = e(be).addClass("k-pivot-toolbar k-header k-settings-measures"), this.measuresTarget = this._createSettingTarget(this.measureFields, { setting: "measures", messages: { empty: this.options.messages.measureFields } }) }, _createSettingTarget: function (t, i) { var n = '<span tabindex="0" class="k-button" data-' + ie.ns + 'name="${data.name}">${data.name}', o = i.sortable, r = ""; return o && (r += "#if (data.sortIcon) {#", r += '<span class="k-icon ${data.sortIcon}-sm"></span>', r += "#}#"), (i.filterable || o) && (r += '<span class="k-icon k-i-more-vertical k-setting-fieldmenu"></span>'), this.options.reorderable && (r += '<span class="k-icon k-i-close k-setting-delete"></span>'), r && (n += '<span class="k-field-actions">' + r + "</span>"), n += "</span>", new ie.ui.PivotSettingTarget(t, e.extend({ template: n, emptyTemplate: '<span class="k-empty">${data}</span>', enabled: this.options.reorderable, dataSource: this.dataSource }, i)) }, _initSettingTargets: function () { this.columnsTarget = this._createSettingTarget(this.columnFields, { connectWith: this.rowFields, setting: "columns", filterable: this.options.filterable, sortable: this.options.sortable, messages: { empty: this.options.messages.columnFields, fieldMenu: this.options.messages.fieldMenu } }), this.rowsTarget = this._createSettingTarget(this.rowFields, { connectWith: this.columnFields, setting: "rows", filterable: this.options.filterable, sortable: this.options.sortable, messages: { empty: this.options.messages.rowFields, fieldMenu: this.options.messages.fieldMenu } }) }, _createLayout: function () { var t = this, i = e('<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>'), n = i.find(".k-pivot-rowheaders"), o = i.find(".k-pivot-table"), r = e(be).addClass("k-grid k-widget"); t._measureFields(), t.columnFields = e(be).addClass("k-pivot-toolbar k-header k-settings-columns"), t.rowFields = e(be).addClass("k-pivot-toolbar k-header k-settings-rows"), t.columnsHeader = e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'), t.columnsHeader.parent().css("padding-right", ie.support.scrollbar()), t.rowsHeader = e('<div class="k-grid k-widget k-alt"/>'), t.content = e('<div class="k-grid-content" />'), n.append(t.measureFields), n.append(t.rowFields), n.append(t.rowsHeader), r.append(t.columnsHeader.parent()), r.append(t.content), o.append(t.columnFields), o.append(r), t.wrapper.append(i), t.columnsHeaderTree = new ie.dom.Tree(t.columnsHeader[0]), t.rowsHeaderTree = new ie.dom.Tree(t.rowsHeader[0]), t.contentTree = new ie.dom.Tree(t.content[0]), t._initSettingTargets() }, _progress: function (e) { ie.ui.progress(this.wrapper, e) }, _resize: function () { this.content[0].firstChild && (this._setSectionsWidth(), this._setSectionsHeight(), this._setContentWidth(), this._setContentHeight(), this._columnHeaderReflow()) }, _columnHeaderReflow: function () { var e = this.columnsHeader.children("table"); ie.support.browser.mozilla && (clearTimeout(this._headerReflowTimeout), e.css("table-layout", "auto"), this._headerReflowTimeout = setTimeout(function () { e.css("table-layout", "") })) }, _setSectionsWidth: function () { var e = this.rowsHeader, t = e.parent(".k-pivot-rowheaders").width(_e), i = Math.max(ae(this.measureFields), ae(this.rowFields)); i = Math.max(e.children("table").width(), i), t.width(i) }, _setSectionsHeight: function () { var e = this.measureFields.height(_e).height(), t = this.columnFields.height(_e).height(), i = this.rowFields.height(_e).innerHeight(), n = this.columnsHeader.height(_e).innerHeight(), o = i - this.rowFields.height(), r = t > e ? t : e, s = n > i ? n : i; this.measureFields.height(r), this.columnFields.height(r), this.rowFields.height(s - o), this.columnsHeader.height(s) }, _setContentWidth: function () { var e = this.content.find("table"), t = this.columnsHeader.children("table"), i = e.children("colgroup").children().length, n = i * this.options.columnWidth, o = Math.ceil(n / this.content.width() * 100); o < 100 && (o = 100), e.add(t).css("width", o + "%"), this._resetColspan(t) }, _setContentHeight: function () { var e = this, i = e.content, n = e.rowsHeader, o = e.wrapper.innerHeight(), r = ie.support.scrollbar(), s = i[0].offsetHeight === i[0].clientHeight, a = e.options.height; if (e.wrapper.is(":visible")) { if (!o || !a) return s && (r = 0), i.height("auto"), n.height(i.height() - r), t; o -= le(e.columnFields), (o -= le(e.columnsHeader)) <= 2 * r && (o = 2 * r + 1, s || (o += r)), i.height(o), s && (r = 0), n.height(o - r) } }, _resetColspan: function (e) { var i = this, n = e.children("tbody").children(":first").children(":first"); i._colspan === t && (i._colspan = n.attr("colspan")), n.attr("colspan", 1), clearTimeout(i._layoutTimeout), i._layoutTimeout = setTimeout(function () { n.attr("colspan", i._colspan), i._colspan = t }) }, _axisMeasures: function (e) { var t = [], i = this.dataSource, n = i.measures(), o = n.length > 1 || n[0] && n[0].type; return i.measuresAxis() === e && (0 === i[e]().length || o) && (t = n), t }, items: function () { return [] }, refresh: function () { var e, t = this, i = t.dataSource, n = i.axes(), o = (n.columns || {}).tuples || [], r = (n.rows || {}).tuples || [], s = t._columnBuilder, a = t._rowBuilder, l = {}, c = {}; t.trigger(ke, { action: "rebind" }) || (s.measures = t._axisMeasures("columns"), a.measures = t._axisMeasures("rows"), t.columnsHeaderTree.render(s.build(o)), t.rowsHeaderTree.render(a.build(r)), l = { indexes: s._indexes, measures: s.measures, metadata: s.metadata }, c = { indexes: a._indexes, measures: a.measures, metadata: a.metadata }, t.contentTree.render(t._contentBuilder.build(i.view(), l, c)), t._resize(), t.touchScroller ? t.touchScroller.contentResized() : (e = ie.touchScroller(t.content)) && e.movable && (t.touchScroller = e, e.movable.bind("change", function (e) { t.columnsHeader.scrollLeft(-e.sender.x), t.rowsHeader.scrollTop(-e.sender.y) })), t._progress(!1), t.trigger(xe)) }, _scrollable: function () { var t = this, i = t.columnsHeader, n = t.rowsHeader; t.content.scroll(function () { i.scrollLeft(this.scrollLeft), n.scrollTop(this.scrollTop) }), n.bind("DOMMouseScroll" + we + " mousewheel" + we, e.proxy(t._wheelScroll, t)) }, _wheelScroll: function (t) { var i, n; t.ctrlKey || (i = ie.wheelDeltaY(t), n = this.content.scrollTop(), i && (t.preventDefault(), e(t.currentTarget).one("wheel" + we, !1), this.rowsHeader.scrollTop(n + -i), this.content.scrollTop(n + -i))) } }), $ = ie.dom.element, Y = ie.dom.html, K = function (e, t) { return { maxChildren: 0, children: 0, maxMembers: 0, members: 0, measures: 1, levelNum: e, parentMember: 0 !== t } }, Q = function (e, t) { for (var i = [], n = 0; n <= t; n++)i.push(e.members[n].name); return i }, X = function (e, t) { for (var i = "", n = 0; n <= t; n++)i += e.members[n].name; return i }, Z = oe.extend({ init: function () { this.measures = 1, this.metadata = {} }, build: function (e) { var t = this._tbody(e), i = this._colGroup(); return [$("table", null, [i, t])] }, reset: function () { this.metadata = {} }, _colGroup: function () { for (var e = this._rowLength(), t = [], i = 0; i < e; i++)t.push($("col", null)); return $("colgroup", null, t) }, _tbody: function (e) { var t = e[0]; return this.map = {}, this.rows = [], this.rootTuple = t, this._indexes = [], t ? (this._buildRows(t, 0), this._normalize()) : this.rows.push($("tr", null, [$("th", null, [Y("&nbsp;")])])), $("tbody", null, this.rows) }, _normalize: function () { for (var e, t, i, n, o, r = this.rows, s = r.length, a = 0; a < s; a++)if (1 !== (e = r[a]).rowSpan) for (n = e.children, i = 0, t = n.length; i < t; i++)(o = n[i]).tupleAll && (o.attr.rowSpan = e.rowSpan) }, _rowIndex: function (e) { for (var t = this.rows, i = t.length, n = 0; n < i && t[n] !== e; n++); return n }, _rowLength: function () { var e = this.rows[0] ? this.rows[0].children : [], t = e.length, i = 0, n = 0; if (t) for (; n < t; n++)i += e[n].attr.colSpan || 1; return i || (i = this.measures), i }, _row: function (e, t, i) { var n, o, r = this.rootTuple.members[t].name, s = e.members[t].levelNum, a = r + s, l = this.map, c = l[a]; return c ? (c.notFirst = !1, c.parentMember && c.parentMember === i || (c.parentMember = i, c.collapsed = 0, c.colSpan = 0)) : ((c = $("tr", null, [])).parentMember = i, c.collapsed = 0, c.colSpan = 0, c.rowSpan = 1, l[a] = c, (n = l[r + (+s - 1)]) && (o = n.children, c.notFirst = !(!o[1] || -1 !== o[1].attr.className.indexOf("k-alt")) || n.notFirst), this.rows.splice(this._rowIndex(n) + 1, 0, c)), c }, _measures: function (e, t, i) { var n, o, r, s = this.map, a = s.measureRow; for (a || (a = $("tr", null, []), s.measureRow = a, this.rows.push(a)), o = 0, r = e.length; o < r; o++)n = e[o], a.children.push(this._cell(i || "", [this._content(n, t)], n)); return r }, _content: function (e, t) { return Y(this.template({ member: e, tuple: t })) }, _cell: function (e, t, i) { var n = $("th", { className: "k-header" + e }, t); return n.value = i.caption || i.name, n }, _buildRows: function (e, i, n) { var o, r, s, a, l, c, d, u, h, f, p = e.members, m = p[i], g = p[i + 1], v = [], _ = 0, b = 0, w = 0; if (m.measure) return this._measures(m.children, e), t; if (u = ie.stringify(Q(e, i)), o = this._row(e, i, n), s = m.children, a = s.length, (h = this.metadata[u]) || (this.metadata[u] = h = K(+m.levelNum, i), h.rootLevelNum = +this.rootTuple.members[i].levelNum), this._indexes.push({ path: u, tuple: e }), m.hasChildren && (!1 === h.expanded && (b = h.maxChildren, o.collapsed += b, h.children = 0, a = 0), (d = { className: "k-icon " + (a ? Te : De) })[ie.attr("path")] = u, v.push($("span", d))), v.push(this._content(m, e)), l = this._cell(o.notFirst ? " k-first" : "", v, m), o.children.push(l), o.colSpan += 1, a) { for (c = this._cell(" k-alt", [this._content(m, e)], m), o.children.push(c); _ < a; _++)r = this._buildRows(s[_], i, m); f = r.colSpan, b = r.collapsed, l.attr.colSpan = f, h.children = f, h.members = 1, o.colSpan += f, o.collapsed += b, o.rowSpan = r.rowSpan + 1, g && (g.measure ? f = this._measures(g.children, e, " k-alt") : (r = this._buildRows(e, i + 1), f = r.colSpan, o.collapsed += r.collapsed, w = r.collapsed), c.attr.colSpan = f, f -= 1, h.members += f, o.colSpan += f) } else g && (g.measure ? f = this._measures(g.children, e) : (r = this._buildRows(e, i + 1), f = r.colSpan, o.collapsed += r.collapsed, w = r.collapsed), h.members = f, f > 1 && (l.attr.colSpan = f, o.colSpan += f - 1)); return h.maxMembers < h.members + w && (h.maxMembers = h.members + w), s = h.children + b, h.maxChildren < s && (h.maxChildren = s), (c || l).tupleAll = !0, o } }), J = oe.extend({ init: function () { this.metadata = {} }, build: function (e) { var t = this._tbody(e), i = this._colGroup(); return [$("table", null, [i, t])] }, reset: function () { this.metadata = {} }, _rowLength: function () { for (var e = this.rows[0].children, t = 0, i = 0, n = e[i]; n;)t += n.attr.colSpan || 1, n = e[++i]; return t }, _colGroup: function () { for (var e = this._rowLength(), t = [], i = 0; i < e; i++)t.push($("col", null)); return $("colgroup", null, t) }, _tbody: function (e) { var t = e[0]; return this.rootTuple = t, this.rows = [], this.map = {}, this._indexes = [], t ? (this._buildRows(t, 0), this._normalize()) : this.rows.push($("tr", null, [$("td", null, [Y("&nbsp;")])])), $("tbody", null, this.rows) }, _normalize: function () { for (var e, t, i, n, o = this.rows, r = o.length, s = 0, a = this.rootTuple.members, l = a[0].name, c = a.length, d = 0, u = this.map; s < r; s++)for (e = o[s], d = 0; d < c; d++)i = this[a[d].name], (t = e.colSpan["dim" + d]) && t.colSpan < i && (t.attr.colSpan = i - t.colSpan + 1); e = u[l], n = u[l + "all"], e && (e.children[0].attr.className = "k-first"), n && (n.children[0].attr.className += " k-first") }, _row: function (e) { var t = $("tr", null, e); return t.rowSpan = 1, t.colSpan = {}, this.rows.push(t), t }, _content: function (e, t) { return Y(this.template({ member: e, tuple: t })) }, _cell: function (e, t, i) { var n = $("td", { className: e }, t); return n.value = i.caption || i.name, n }, _buildRows: function (e, t) { var i, n, o, r, s, a, l, c, d, u = this.map, h = e.members, f = h[t], p = h[t + 1], m = f.children, g = m.length, v = +f.levelNum, _ = this.rootTuple.members[t].name, b = Q(e, t - 1).join(""), w = +this.rootTuple.members[t].levelNum, y = b + (w === v ? "" : f.parentName || ""), k = u[y + "all"] || u[y], x = v + 1, C = []; if (!k || k.hasChild ? k = this._row() : k.hasChild = !0, f.measure) { for (l = k.allCell ? "k-grid-footer" : "", k.children.push(this._cell(l, [this._content(m[0], e)], m[0])), k.rowSpan = g, d = 1; d < g; d++)this._row([this._cell(l, [this._content(m[d], e)], m[d])]); return k } if (u[b + f.name] = k, i = ie.stringify(Q(e, t)), (a = this.metadata[i]) || (this.metadata[i] = a = K(v, t), a.rootLevelNum = w), this._indexes.push({ path: i, tuple: e }), f.hasChildren && (!1 === a.expanded && (g = 0, a.children = 0), (c = { className: "k-icon " + (g ? Te : De) })[ie.attr("path")] = i, C.push($("span", c))), C.push(this._content(f, e)), l = k.allCell && !g ? "k-grid-footer" : "", (n = this._cell(l, C, f)).colSpan = x, k.children.push(n), k.colSpan["dim" + t] = n, (!this[_] || this[_] < x) && (this[_] = x), g) { for (k.allCell = !1, k.hasChild = !1, d = 0; d < g; d++)r = this._buildRows(m[d], t), k !== r && (k.rowSpan += r.rowSpan); k.rowSpan > 1 && (n.attr.rowSpan = k.rowSpan), a.children = k.rowSpan, (o = this._cell("k-grid-footer", [this._content(f, e)], f)).colSpan = x, (s = this._row([o])).colSpan["dim" + t] = o, s.allCell = !0, u[b + f.name + "all"] = s, p && (r = this._buildRows(e, t + 1), o.attr.rowSpan = r.rowSpan), k.rowSpan += s.rowSpan, a.members = s.rowSpan } else p && (k.hasChild = !1, this._buildRows(e, t + 1), (o || n).attr.rowSpan = k.rowSpan, a.members = k.rowSpan); return a.maxChildren < a.children && (a.maxChildren = a.children), a.maxMembers < a.members && (a.maxMembers = a.members), k } }), ee = oe.extend({ init: function () { this.columnAxis = {}, this.rowAxis = {} }, build: function (e, i, n) { var o, r, s = i.indexes[0], a = i.metadata[s ? s.path : t]; return this.columnAxis = i, this.rowAxis = n, this.data = e, this.rowLength = a ? a.maxChildren + a.maxMembers : i.measures.length || 1, this.rowLength || (this.rowLength = 1), o = this._tbody(), r = this._colGroup(), [$("table", null, [r, o])] }, _colGroup: function () { var e = this.columnAxis.measures.length || 1, t = [], i = 0; for (this.rows[0] && (e = this.rows[0].children.length); i < e; i++)t.push($("col", null)); return $("colgroup", null, t) }, _tbody: function () { return this.rows = [], this.data[0] ? (this.columnIndexes = this._indexes(this.columnAxis, this.rowLength), this.rowIndexes = this._indexes(this.rowAxis, Math.ceil(this.data.length / this.rowLength)), this._buildRows()) : this.rows.push($("tr", null, [$("td", null, [Y("&nbsp;")])])), $("tbody", null, this.rows) }, _indexes: function (e, i) { var n, o, r, s, a, l = [], c = e.indexes, d = e.metadata, u = e.measures, h = u.length || 1, f = 0, p = 0, m = 0, g = c.length; if (!g) { for (r = 0; r < h; r++)l[r] = { index: r, measure: u[r], tuple: null }; return l } for (; m < g; m++) { if (n = c[m], o = d[n.path], s = o.children + o.members, a = 0, s && (s -= h), !1 === o.expanded && o.children !== o.maxChildren && (a = o.maxChildren), o.parentMember && o.levelNum === o.rootLevelNum && (s = -1), s > -1) { for (r = 0; r < h; r++)s + r, o.children || p, l[s + p + r] = { children: s, index: f, measure: u[r], tuple: n.tuple }, f += 1; for (; l[p] !== t;)p += 1 } if (p === i) break; f += a } return l }, _buildRows: function () { for (var e, t = this.rowIndexes, i = t.length, n = 0; n < i; n++)(e = t[n]) && this.rows.push(this._buildRow(e)) }, _buildRow: function (e) { for (var i, n, o, r, s, a, l, c = e.index * this.rowLength, d = this.columnIndexes, u = d.length, h = [], f = 0; f < u; f++)(i = d[f]) !== t && (s = {}, i.children && (s.className = "k-alt"), r = "", a = this.data[c + i.index], l = i.measure || e.measure, n = { columnTuple: i.tuple, rowTuple: e.tuple, measure: l, dataItem: a }, "" !== a.value && l && l.type && ("status" === l.type ? r = this.kpiStatusTemplate(n) : "trend" === l.type && (r = this.kpiTrendTemplate(n))), r || (r = this.dataTemplate(n)), (o = $("td", s, [Y(r)])).value = a.value, h.push(o)); return s = {}, e.children && (s.className = "k-grid-footer"), $("tr", s, h) } }), ne.plugin(G), ie.PivotExcelExporter = ie.Class.extend({ init: function (e) { this.options = e, this.widget = e.widget, this.dataSource = this.widget.dataSource }, _columns: function () { var e, t = this.widget.columnsHeaderTree.children[0], i = this.widget.rowsHeaderTree.children[0], n = t.children[0].children.length, o = i.children[0].children.length, r = this.widget.options.columnWidth, s = []; if (o && this.dataSource.data()[0]) for (e = 0; e < o; e++)s.push({ autoWidth: !0 }); for (e = 0; e < n; e++)s.push({ autoWidth: !1, width: r }); return s }, _cells: function (e, t, i) { for (var n, o, r, s, a, l = [], c = 0, d = e.length; c < d; c++) { for (o = [], r = e[c].children, n = r.length, s = 0; s < n; s++)a = r[s], o.push({ background: "#7a7a7a", color: "#fff", value: a.value, colSpan: a.attr.colSpan || 1, rowSpan: a.attr.rowSpan || 1 }); i && i(o, c), l.push({ cells: o, type: t }) } return l }, _rows: function () { var e, t, i = this.widget.columnsHeaderTree.children[0], n = this.widget.rowsHeaderTree.children[0], o = i.children[0].children.length, r = n.children[0].children.length, s = i.children[1].children, a = n.children[1].children, l = this.widget.contentTree.children[0].children[1].children, c = this._cells(s, "header"); return r && c[0].cells.splice(0, 0, { background: "#7a7a7a", color: "#fff", value: "", colSpan: r, rowSpan: s.length }), e = function (e, t) { for (var i, n, r = 0, s = l[t].children; r < o; r++)i = s[r], n = +i.value, isNaN(n) && (n = i.value), e.push({ background: "#dfdfdf", color: "#333", value: n, colSpan: 1, rowSpan: 1 }) }, t = this._cells(a, "data", e), c.concat(t) }, _freezePane: function () { var e = this.widget.columnsHeaderTree.children[0], t = this.widget.rowsHeaderTree.children[0], i = t.children[0].children.length, n = e.children[1].children; return { colSplit: i, rowSplit: n.length } }, workbook: function () { var t; return this.dataSource.view()[0] ? (t = e.Deferred()).resolve() : t = this.dataSource.fetch(), t.then(e.proxy(function () { return { sheets: [{ columns: this._columns(), rows: this._rows(), freezePane: this._freezePane(), filter: null }] } }, this)) } }), te = { extend: function (t) { t.events.push("excelExport"), t.options.excel = e.extend(t.options.excel, this.options), t.saveAsExcel = this.saveAsExcel }, options: { proxyURL: "", filterable: !1, fileName: "Export.xlsx" }, saveAsExcel: function () { var t = this.options.excel || {}, i = new ie.PivotExcelExporter({ widget: this }); i.workbook().then(e.proxy(function (e) { if (!this.trigger("excelExport", { workbook: e })) { var i = new ie.ooxml.Workbook(e); ie.saveAs({ dataURI: i.toDataURL(), fileName: e.fileName || t.fileName, proxyURL: t.proxyURL, forceProxy: t.forceProxy }) } }, this)) } }, ie.PivotExcelMixin = te, ie.ooxml && ie.ooxml.Workbook && te.extend(G.prototype), ie.PDFMixin && (ie.PDFMixin.extend(G.prototype), G.fn._drawPDF = function () { return this._drawPDFShadow({ width: this.wrapper.width() }, { avoidLinks: this.options.pdf.avoidLinks }) }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.treeview.draganddrop.min", ["kendo.data.min", "kendo.draganddrop.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.ui, o = e.proxy, r = e.extend, s = "visibility", a = "k-state-hover", n.HierarchicalDragAndDrop = i.Class.extend({ init: function (t, s) { this.element = t, this.hovered = t, this.options = r({ dragstart: e.noop, drag: e.noop, drop: e.noop, dragend: e.noop }, s), this._draggable = new n.Draggable(t, { ignore: "input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-arrow-60-right,span.k-icon.k-i-arrow-45-down-right", filter: s.filter, autoScroll: s.autoScroll, cursorOffset: { left: 10, top: i.support.mobileOS ? -40 / i.support.zoomLevel() : 10 }, hint: o(this._hint, this), dragstart: o(this.dragstart, this), dragcancel: o(this.dragcancel, this), drag: o(this.drag, this), dragend: o(this.dragend, this), $angular: s.$angular }) }, _hint: function (e) { return "<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />" + this.options.hintText(e) + "</div>" }, _removeTouchHover: function () { i.support.touch && this.hovered && (this.hovered.find("." + a).removeClass(a), this.hovered = !1) }, _hintStatus: function (i) { var n = this._draggable.hint.find(".k-drag-status")[0]; return i ? (n.className = "k-icon k-drag-status " + i, t) : e.trim(n.className.replace(/(p|k)-(icon|drag-status)/g, "")) }, dragstart: function (t) { this.source = t.currentTarget.closest(this.options.itemSelector), this.options.dragstart(this.source) && t.preventDefault(), this.dropHint = this.options.reorderable ? e("<div class='k-i-drag-and-drop' />").css(s, "hidden").appendTo(this.element) : e() }, drag: function (t) { var n, o, r, l, c, d, u, h, f, p, m, g = this.options, v = this.source, _ = this.dropTarget = e(i.eventTarget(t)), b = _.closest(g.allowedContainers); b.length ? v[0] == _[0] || g.contains(v[0], _[0]) ? m = "k-i-cancel" : (m = "k-i-insert-middle", f = g.itemFromTarget(_), (n = f.item).length ? (this._removeTouchHover(), o = i._outerHeight(n), l = f.content, g.reorderable ? (c = o / (l.length > 0 ? 4 : 2), r = i.getOffset(n).top, d = t.y.location < r + c, u = r + o - c < t.y.location, h = l.length && !d && !u) : (h = !0, d = !1, u = !1), this.hovered = !!h && b, this.dropHint.css(s, h ? "hidden" : "visible"), this._lastHover && this._lastHover[0] != l[0] && this._lastHover.removeClass(a), this._lastHover = l.toggleClass(a, h), h ? m = "k-i-plus" : ((p = n.position()).top += d ? 0 : o, this.dropHint.css(p)[d ? "prependTo" : "appendTo"](g.dropHintContainer(n)), d && f.first && (m = "k-i-insert-up"), u && f.last && (m = "k-i-insert-down"))) : _[0] != this.dropHint[0] && (this._lastHover && this._lastHover.removeClass(a), m = e.contains(this.element[0], b[0]) ? "k-i-cancel" : "k-i-plus")) : (m = "k-i-cancel", this._removeTouchHover()), this.options.drag({ originalEvent: t.originalEvent, source: v, target: _, pageY: t.y.location, pageX: t.x.location, status: m.substring(2), setStatus: function (e) { m = e } }), 0 !== m.indexOf("k-i-insert") && this.dropHint.css(s, "hidden"), this._hintStatus(m) }, dragcancel: function () { this.dropHint.remove() }, dragend: function (e) { var i, n, o, r = "over", l = this.source, c = this.dropHint, d = this.dropTarget; return "visible" == c.css(s) ? (r = this.options.dropPositionFrom(c), i = c.closest(this.options.itemSelector)) : d && ((i = d.closest(this.options.itemSelector)).length || (i = d.closest(this.options.allowedContainers))), n = { originalEvent: e.originalEvent, source: l[0], destination: i[0], valid: "k-i-cancel" != this._hintStatus(), setValid: function (e) { this.valid = e }, dropTarget: d[0], position: r }, o = this.options.drop(n), c.remove(), this._removeTouchHover(), this._lastHover && this._lastHover.removeClass(a), !n.valid || o ? (this._draggable.dropped = n.valid, t) : (this._draggable.dropped = !0, this.options.dragend({ originalEvent: e.originalEvent, source: l, destination: i, position: r }), t) }, destroy: function () { this._lastHover = this.hovered = null, this._draggable.destroy() } }), window.kendo; var e, t, i, n, o, r, s, a }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.treeview.min", ["kendo.data.min", "kendo.treeview.draganddrop.min"], function () { return function (e, t) { function i(e) { return function (t) { var i = t.children(".k-animation-container"); return i.length || (i = t), i.children(e) } } function n(e) { return h.template(e, { useWithBlock: !1 }) } function o(e) { return e.find("> div .k-checkbox-wrapper [type=checkbox]") } function r(e) { return function (t, i) { var n, o = (i = i.closest(N)).parent(); return o.parent().is("li") && (n = o.parent()), this._dataSourceMove(t, o, n, function (t, n) { return this._insert(t.data(), n, i.index() + e) }) } } function s(t) { var i = t.children("div"), n = t.children("ul"), o = i.children(".k-icon"), r = t.children(":checkbox"), s = i.children(".k-in"); t.hasClass("k-treeview") || (i.length || (i = e("<div />").prependTo(t)), !o.length && n.length ? o = e("<span class='k-icon' />").prependTo(i) : n.length && n.children().length || (o.remove(), n.remove()), r.length && e("<span class='k-checkbox-wrapper' />").appendTo(i).append(r), s.length || ((s = t.children("a").eq(0).addClass("k-in k-link")).length || (s = e("<span class='k-in' />")), s.appendTo(i), i.length && function (t, i) { for (var n; t && "ul" != t.nodeName.toLowerCase();)n = t, t = t.nextSibling, 3 == n.nodeType && (n.nodeValue = e.trim(n.nodeValue)), u.test(n.className) ? i.insertBefore(n, i.firstChild) : i.appendChild(n) }(i[0].nextSibling, s[0]))) } var a, l, c, d, u, h = window.kendo, f = h.ui, p = h.data, m = e.extend, g = h.template, v = e.isArray, _ = f.Widget, b = p.HierarchicalDataSource, w = e.proxy, y = h.keys, k = ".kendoTreeView", x = "select", C = "check", S = "navigate", T = "change", D = "error", A = "checked", E = "indeterminate", I = "dragstart", M = "drag", R = "drop", F = "dragend", z = "dataBound", P = "click", B = "undefined", L = "k-state-hover", H = "k-treeview", N = ".k-item", O = "string", V = "aria-selected", U = "aria-disabled", W = { text: "dataTextField", url: "dataUrlField", spriteCssClass: "dataSpriteCssClassField", imageUrl: "dataImageUrlField" }, q = function (e) { return "object" == typeof HTMLElement ? e instanceof HTMLElement : e && "object" == typeof e && 1 === e.nodeType && typeof e.nodeName === O }; l = i(".k-group"), c = i(".k-group,.k-content"), d = function (e) { return e.children("div").children(".k-icon") }, u = /k-sprite/, a = h.ui.DataBoundWidget.extend({ init: function (e, t) { var i, n = this, o = !1, r = t && !!t.dataSource; v(t) && (t = { dataSource: t }), t && typeof t.loadOnDemand == B && v(t.dataSource) && (t.loadOnDemand = !1), _.prototype.init.call(n, e, t), e = n.element, t = n.options, i = e.is("ul") && e || e.hasClass(H) && e.children("ul"), (o = !r && i.length) && (t.dataSource.list = i), n._animation(), n._accessors(), n._templates(), e.hasClass(H) ? (n.wrapper = e, n.root = e.children("ul").eq(0)) : (n._wrapper(), i && (n.root = e, n._group(n.wrapper))), n._tabindex(), n.root.attr("role", "tree"), n._dataSource(o), n._attachEvents(), n._dragging(), o ? n._syncHtmlAndDataSource() : t.autoBind && (n._progress(!0), n.dataSource.fetch()), t.checkboxes && t.checkboxes.checkChildren && n.updateIndeterminate(), n.element[0].id && (n._ariaId = h.format("{0}_tv_active", n.element[0].id)), h.notify(n) }, _attachEvents: function () { var t = this, i = ".k-in:not(.k-state-selected,.k-state-disabled)", n = "mouseenter"; t.wrapper.on(n + k, ".k-in.k-state-selected", function (e) { e.preventDefault() }).on(n + k, i, function () { e(this).addClass(L) }).on("mouseleave" + k, i, function () { e(this).removeClass(L) }).on(P + k, i, w(t._click, t)).on("dblclick" + k, ".k-in:not(.k-state-disabled)", w(t._toggleButtonClick, t)).on(P + k, ".k-i-expand,.k-i-collapse", w(t._toggleButtonClick, t)).on("keydown" + k, w(t._keydown, t)).on("focus" + k, w(t._focus, t)).on("blur" + k, w(t._blur, t)).on("mousedown" + k, ".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse", w(t._mousedown, t)).on("change" + k, ".k-checkbox-wrapper :checkbox", w(t._checkboxChange, t)).on("click" + k, ".k-checkbox-wrapper :checkbox", w(t._checkboxClick, t)).on("click" + k, ".k-checkbox-label", w(t._checkboxLabelClick, t)).on("click" + k, ".k-request-retry", w(t._retryRequest, t)).on("click" + k, function (i) { e(i.target).is(":kendoFocusable") || t.focus() }) }, _checkboxClick: function (t) { var i = e(t.target); i.data(E) && (i.data(E, !1).prop(E, !1).prop(A, !0), this._checkboxChange(t)) }, _checkboxLabelClick: function (e) { e.target.previousSibling.click() }, _syncHtmlAndDataSource: function (e, t) { e = e || this.root; var i, n, r, s, a, l = (t = t || this.dataSource).view(), c = h.attr("uid"), d = h.attr("expanded"), u = this.options.checkboxes, f = e.children("li"); for (i = 0; i < f.length; i++)r = l[i], s = r.uid, (n = f.eq(i)).attr("role", "treeitem").attr(c, s), r.expanded = "true" === n.attr(d), u && (a = o(n), r.checked = a.prop(A), a.attr("id", "_" + s), a.next(".k-checkbox-label").attr("for", "_" + s)), this._syncHtmlAndDataSource(n.children("ul"), r.children) }, _animation: function () { var e = this.options, t = e.animation, i = t.collapse && "effects" in t.collapse, n = m({}, t.expand, t.collapse); i || (n = m(n, { reverse: !0 })), !1 === t && (t = { expand: { effects: {} }, collapse: { hide: !0, effects: {} } }), t.collapse = m(n, { hide: !0 }), e.animation = t }, _dragging: function () { var t, i = this.options.dragAndDrop, n = this.dragging; i && !n ? (t = this, this.dragging = new f.HierarchicalDragAndDrop(this.element, { reorderable: !0, $angular: this.options.$angular, autoScroll: this.options.autoScroll, filter: "div:not(.k-state-disabled) .k-in", allowedContainers: ".k-treeview", itemSelector: ".k-treeview .k-item", hintText: w(this._hintText, this), contains: function (t, i) { return e.contains(t, i) }, dropHintContainer: function (e) { return e }, itemFromTarget: function (e) { var t = e.closest(".k-top,.k-mid,.k-bot"); return { item: t, content: e.closest(".k-in"), first: t.hasClass("k-top"), last: t.hasClass("k-bot") } }, dropPositionFrom: function (e) { return e.prevAll(".k-in").length > 0 ? "after" : "before" }, dragstart: function (e) { return t.trigger(I, { sourceNode: e[0] }) }, drag: function (e) { t.trigger(M, { originalEvent: e.originalEvent, sourceNode: e.source[0], dropTarget: e.target[0], pageY: e.pageY, pageX: e.pageX, statusClass: e.status, setStatusClass: e.setStatus }) }, drop: function (e) { return t.trigger(R, { originalEvent: e.originalEvent, sourceNode: e.source, destinationNode: e.destination, valid: e.valid, setValid: function (t) { this.valid = t, e.setValid(t) }, dropTarget: e.dropTarget, dropPosition: e.position }) }, dragend: function (e) { function i(i) { t.updateIndeterminate(), t.trigger(F, { originalEvent: e.originalEvent, sourceNode: i && i[0], destinationNode: o[0], dropPosition: r }) } var n = e.source, o = e.destination, r = e.position; "over" == r ? t.append(n, o, i) : ("before" == r ? n = t.insertBefore(n, o) : "after" == r && (n = t.insertAfter(n, o)), i(n)) } })) : !i && n && (n.destroy(), this.dragging = null) }, _hintText: function (e) { return this.templates.dragClue({ item: this.dataItem(e), treeview: this.options }) }, _templates: function () { var e = this, t = e.options, i = w(e._fieldAccessor, e); t.template && typeof t.template == O ? t.template = g(t.template) : t.template || (t.template = n("# var text = " + i("text") + "(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")), e._checkboxes(), e.templates = { wrapperCssClass: function (e, t) { var i = "k-item", n = t.index; return e.firstLevel && 0 === n && (i += " k-first"), n == e.length - 1 && (i += " k-last"), i }, cssClass: function (e, t) { var i = "", n = t.index, o = e.length - 1; return e.firstLevel && 0 === n && (i += "k-top "), i += 0 === n && n != o ? "k-top" : n == o ? "k-bot" : "k-mid" }, textClass: function (e, t) { var i = "k-in"; return t && (i += " k-link"), !1 === e.enabled && (i += " k-state-disabled"), !0 === e.selected && (i += " k-state-selected"), i }, toggleButtonClass: function (e) { var t = "k-icon"; return t += !0 !== e.expanded ? " k-i-expand" : " k-i-collapse" }, groupAttributes: function (e) { var t = ""; return e.firstLevel || (t = "role='group'"), t + (!0 !== e.expanded ? " style='display:none'" : "") }, groupCssClass: function (e) { var t = "k-group"; return e.firstLevel && (t += " k-treeview-lines"), t }, dragClue: n("#= data.treeview.template(data) #"), group: n("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"), itemContent: n("# var imageUrl = " + i("imageUrl") + "(data.item); ## var spriteCssClass = " + i("spriteCssClass") + "(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"), itemElement: n("# var item = data.item, r = data.r; ## var url = " + i("url") + "(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #'/># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox-wrapper' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"), item: n("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' " + h.attr("uid") + "='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''## if (item.expanded) { #data-expanded='true' aria-expanded='true'# } #>#= r.itemElement(data) #</li>"), loading: n("<div class='k-icon k-i-loading' /> #: data.messages.loading #"), retry: n("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>") } }, items: function () { return this.element.find(".k-item > div:first-child") }, setDataSource: function (t) { var i = this.options; i.dataSource = t, this._dataSource(), i.checkboxes && i.checkboxes.checkChildren && this.dataSource.one("change", e.proxy(this.updateIndeterminate, this, null)), this.options.autoBind && this.dataSource.fetch() }, _bindDataSource: function () { this._refreshHandler = w(this.refresh, this), this._errorHandler = w(this._error, this), this.dataSource.bind(T, this._refreshHandler), this.dataSource.bind(D, this._errorHandler) }, _unbindDataSource: function () { var e = this.dataSource; e && (e.unbind(T, this._refreshHandler), e.unbind(D, this._errorHandler)) }, _dataSource: function (e) { var t = this, i = t.options, n = i.dataSource; n = v(n) ? { data: n } : n, t._unbindDataSource(), n.fields || (n.fields = [{ field: "text" }, { field: "url" }, { field: "spriteCssClass" }, { field: "imageUrl" }]), t.dataSource = n = b.create(n), e && (n.fetch(), function e(t) { for (var i = 0; i < t.length; i++)t[i]._initChildren(), t[i].children.fetch(), e(t[i].children.view()) }(n.view())), t._bindDataSource() }, events: [I, M, R, F, z, "expand", "collapse", x, T, S, C], options: { name: "TreeView", dataSource: {}, animation: { expand: { effects: "expand:vertical", duration: 200 }, collapse: { duration: 100 } }, messages: { loading: "Loading...", requestFailed: "Request failed.", retry: "Retry" }, dragAndDrop: !1, checkboxes: !1, autoBind: !0, autoScroll: !1, loadOnDemand: !0, template: "", dataTextField: null }, _accessors: function () { var e, t, i, n = this.options, o = this.element; for (e in W) t = n[W[e]], i = o.attr(h.attr(e + "-field")), !t && i && (t = i), t || (t = e), v(t) || (t = [t]), n[W[e]] = t }, _fieldAccessor: function (t) { var i = this.options[W[t]], n = i.length, o = "(function(item) {"; return 0 === n ? o += "return item['" + t + "'];" : (o += "var levels = [" + e.map(i, function (e) { return "function(d){ return " + h.expr(e) + "}" }).join(",") + "];", o += "return levels[Math.min(item.level(), " + n + "-1)](item)"), o += "})" }, setOptions: function (e) { _.fn.setOptions.call(this, e), this._animation(), this._dragging(), this._templates() }, _trigger: function (e, t) { return this.trigger(e, { node: t.closest(N)[0] }) }, _setChecked: function (t, i) { if (t && e.isFunction(t.view)) for (var n = 0, o = t.view(); n < o.length; n++)o[n][A] = i, o[n].children && this._setChecked(o[n].children, i) }, _setIndeterminate: function (e) { var t, i, n, r = l(e), s = !0; if (r.length && (t = o(r.children()), i = t.length)) { if (i > 1) { for (n = 1; n < i; n++)if (t[n].checked != t[n - 1].checked || t[n].indeterminate || t[n - 1].indeterminate) { s = !1; break } } else s = !t[0].indeterminate; return o(e).data(E, !s).prop(E, !s).prop(A, s && t[0].checked) } }, updateIndeterminate: function (e) { var t, i, n; if (e = e || this.wrapper, (t = l(e).children()).length) { for (i = 0; i < t.length; i++)this.updateIndeterminate(t.eq(i)); (n = this._setIndeterminate(e)) && n.prop(A) && (this.dataItem(e).checked = !0) } }, _bubbleIndeterminate: function (e) { if (e.length) { var t, i = this.parent(e); i.length && (this._setIndeterminate(i), !1 === (t = i.children("div").find(".k-checkbox-wrapper :checkbox")).prop(E) ? this.dataItem(i).set(A, t.prop(A)) : delete this.dataItem(i).checked, this._bubbleIndeterminate(i)) } }, _checkboxChange: function (t) { var i = e(t.target), n = i.prop(A), o = i.closest(N), r = this.dataItem(o); r.checked != n && (r.set(A, n), this._trigger(C, o)) }, _toggleButtonClick: function (t) { var i = e(t.currentTarget).closest(N); i.is("[aria-disabled='true']") || this.toggle(e(t.target).closest(N)) }, _mousedown: function (t) { var i = e(t.currentTarget).closest(N); i.is("[aria-disabled='true']") || (this._clickTarget = i, this.current(i)) }, _focusable: function (e) { return e && e.length && e.is(":visible") && !e.find(".k-in:first").hasClass("k-state-disabled") }, _focus: function () { var t = this.select(), i = this._clickTarget; h.support.touch || (i && i.length && (t = i), this._focusable(t) || (t = this.current()), this._focusable(t) || (t = this._nextVisible(e())), this.current(t)) }, focus: function () { var e, t = this.wrapper, i = t[0], n = [], o = [], r = document.documentElement; do { (i = i.parentNode).scrollHeight > i.clientHeight && (n.push(i), o.push(i.scrollTop)) } while (i != r); for (t.focus(), e = 0; e < n.length; e++)n[e].scrollTop = o[e] }, _blur: function () { this.current().find(".k-in:first").removeClass("k-state-focused") }, _enabled: function (e) { return !e.children("div").children(".k-in").hasClass("k-state-disabled") }, parent: function (t) { var i, n, o = /\bk-treeview\b/, r = /\bk-item\b/; typeof t == O && (t = this.element.find(t)), q(t) || (t = t[0]), n = r.test(t.className); do { t = t.parentNode, r.test(t.className) && (n ? i = t : n = !0) } while (!o.test(t.className) && !i); return e(i) }, _nextVisible: function (e) { function t(e) { for (; e.length && !e.next().length;)e = n.parent(e); return e.next().length ? e.next() : e } var i, n = this, o = n._expanded(e); return e.length && e.is(":visible") ? o ? (i = l(e).children().first()).length || (i = t(e)) : i = t(e) : i = n.root.children().eq(0), n._enabled(i) || (i = n._nextVisible(i)), i }, _previousVisible: function (e) { var t, i, n = this; if (!e.length || e.prev().length) for (i = e.length ? e.prev() : n.root.children().last(); n._expanded(i) && (t = l(i).children().last()).length;)i = t; else i = n.parent(e) || e; return n._enabled(i) || (i = n._previousVisible(i)), i }, _keydown: function (i) { var n, o = this, r = i.keyCode, s = o.current(), a = o._expanded(s), l = s.find(".k-checkbox-wrapper:first :checkbox"), c = h.support.isRtl(o.element); i.target == i.currentTarget && (!c && r == y.RIGHT || c && r == y.LEFT ? a ? n = o._nextVisible(s) : o.expand(s) : !c && r == y.LEFT || c && r == y.RIGHT ? a ? o.collapse(s) : (n = o.parent(s), o._enabled(n) || (n = t)) : r == y.DOWN ? n = o._nextVisible(s) : r == y.UP ? n = o._previousVisible(s) : r == y.HOME ? n = o._nextVisible(e()) : r == y.END ? n = o._previousVisible(e()) : r == y.ENTER ? s.find(".k-in:first").hasClass("k-state-selected") || o._trigger(x, s) || o.select(s) : r == y.SPACEBAR && l.length && (l.prop(A, !l.prop(A)).data(E, !1).prop(E, !1), o._checkboxChange({ target: l }), n = s), n && (i.preventDefault(), s[0] != n[0] && (o._trigger(S, n), o.current(n)))) }, _click: function (t) { var i = e(t.currentTarget), n = c(i.closest(N)), o = i.attr("href"); (o ? "#" == o || o.indexOf("#" + this.element.id + "-") >= 0 : n.length && !n.children().length) && t.preventDefault(), i.hasClass(".k-state-selected") || this._trigger(x, i) || this.select(i) }, _wrapper: function () { var e, t, i = this, n = i.element; n.is("ul") ? (e = n.wrap("<div />").parent(), t = n) : t = (e = n).children("ul").eq(0), i.wrapper = e.addClass("k-widget k-treeview"), i.root = t }, _group: function (e) { var t = this, i = e.hasClass(H), n = { firstLevel: i, expanded: i || t._expanded(e) }, o = e.children("ul"); o.addClass(t.templates.groupCssClass(n)).css("display", n.expanded ? "" : "none"), t._nodes(o, n) }, _nodes: function (t, i) { var n, o = this, r = t.children("li"); i = m({ length: r.length }, i), r.each(function (t, r) { r = e(r), n = { index: t, expanded: o._expanded(r) }, s(r), o._updateNodeClasses(r, i, n), o._group(r) }) }, _checkboxes: function () { var e, t = this.options, i = t.checkboxes; i && (e = "<input aria-label='#=item.text#' type='checkbox' tabindex='-1' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #", i.name && (e += " name='" + i.name + "'"), typeof (i = m({ template: e += " id='_#= item.uid #' class='k-checkbox' /><span class='k-checkbox-label'></span>" }, t.checkboxes)).template == O && (i.template = g(i.template)), t.checkboxes = i) }, _updateNodeClasses: function (e, t, i) { var n, o, r = e.children("div"), s = e.children("ul"), a = this.templates; e.hasClass("k-treeview") || ((i = i || {}).expanded = typeof i.expanded != B ? i.expanded : this._expanded(e), i.index = typeof i.index != B ? i.index : e.index(), i.enabled = typeof i.enabled != B ? i.enabled : !r.children(".k-in").hasClass("k-state-disabled"), (t = t || {}).firstLevel = typeof t.firstLevel != B ? t.firstLevel : e.parent().parent().hasClass(H), t.length = typeof t.length != B ? t.length : e.parent().children().length, e.removeClass("k-first k-last").addClass(a.wrapperCssClass(t, i)), r.removeClass("k-top k-mid k-bot").addClass(a.cssClass(t, i)), n = r.children(".k-in"), o = n[0] && "a" == n[0].nodeName.toLowerCase(), n.removeClass("k-in k-link k-state-default k-state-disabled").addClass(a.textClass(i, o)), (s.length || "true" == e.attr("data-hasChildren")) && (r.children(".k-icon").removeClass("k-i-expand k-i-collapse").addClass(a.toggleButtonClass(i)), s.addClass("k-group"))) }, _processNodes: function (t, i) { var n = this; n.element.find(t).each(function (t, o) { i.call(n, t, e(o).closest(N)) }) }, dataItem: function (t) { var i = e(t).closest(N).attr(h.attr("uid")), n = this.dataSource; return n && n.getByUid(i) }, _insertNode: function (t, i, n, o, r) { var a, c, d, u, h = this, f = l(n), p = f.children().length + 1, m = { firstLevel: n.hasClass(H), expanded: !r, length: p }, g = "", v = function (e, t) { e.appendTo(t) }; for (d = 0; d < t.length; d++)(u = t[d]).index = i + d, g += h._renderItem({ group: m, item: u }); if ((c = e(g)).length) { for (h.angular("compile", function () { return { elements: c.get(), data: t.map(function (e) { return { dataItem: e } }) } }), f.length || (f = e(h._renderGroup({ group: m })).appendTo(n)), o(c, f), n.hasClass("k-item") && (s(n), h._updateNodeClasses(n)), h._updateNodeClasses(c.prev().first()), h._updateNodeClasses(c.next().last()), d = 0; d < t.length; d++)(u = t[d]).hasChildren && ((a = u.children.data()).length && h._insertNode(a, u.index, c.eq(d), v, !h._expanded(c.eq(d)))); return c } }, _updateNodes: function (t, i) { function n(e, t) { e.find(".k-checkbox-wrapper :checkbox").prop(A, t).data(E, !1).prop(E, !1) } var o, r, s, a, l, d, u, h = this, p = { treeview: h.options, item: a }, m = "expanded" != i && "checked" != i; if ("selected" == i) a = t[0], r = h.findByUid(a.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected", a[i]).end(), a[i] && h.current(r), r.attr(V, !!a[i]); else { for (u = e.map(t, function (e) { return h.findByUid(e.uid).children("div") }), m && h.angular("cleanup", function () { return { elements: u } }), o = 0; o < t.length; o++)p.item = a = t[o], s = u[o], r = s.parent(), m && s.children(".k-in").html(h.templates.itemContent(p)), i == A ? (l = a[i], n(s, l), h.options.checkboxes.checkChildren && (n(r.children(".k-group"), l), h._setChecked(a.children, l), h._bubbleIndeterminate(r))) : "expanded" == i ? h._toggle(r, a, a[i]) : "enabled" == i && (r.find(".k-checkbox-wrapper :checkbox").prop("disabled", !a[i]), d = !c(r).is(":visible"), r.removeAttr(U), a[i] || (a.selected && a.set("selected", !1), a.expanded && a.set("expanded", !1), d = !0, r.attr(V, !1).attr(U, !0)), h._updateNodeClasses(r, {}, { enabled: a[i], expanded: !d })), s.length && this.trigger("itemChange", { item: s, data: a, ns: f }); m && h.angular("compile", function () { return { elements: u, data: e.map(t, function (e) { return [{ dataItem: e }] }) } }) } }, _appendItems: function (e, t, i) { var n = l(i), o = n.children(), r = !this._expanded(i); typeof e == B && (e = o.length), this._insertNode(t, e, i, function (t, i) { e >= o.length ? t.appendTo(i) : t.insertBefore(o.eq(e)) }, r), this._expanded(i) && (this._updateNodeClasses(i), l(i).css("display", "block")) }, _refreshChildren: function (e, t, i) { var n, o, r, a = this.options, c = a.loadOnDemand, d = a.checkboxes && a.checkboxes.checkChildren; if (l(e).empty(), t.length) for (this._appendItems(i, t, e), o = l(e).children(), c && d && this._bubbleIndeterminate(o.last()), n = 0; n < o.length; n++)r = o.eq(n), this.trigger("itemChange", { item: r.children("div"), data: this.dataItem(r), ns: f }); else s(e) }, _refreshRoot: function (t) { var i, n, o, r = this._renderGroup({ items: t, group: { firstLevel: !0, expanded: !0 } }); for (this.root.length ? (this._angularItems("cleanup"), i = e(r), this.root.attr("class", i.attr("class")).html(i.html())) : this.root = this.wrapper.html(r).children("ul"), this.root.attr("role", "tree"), n = this.root.children(".k-item"), o = 0; o < t.length; o++)this.trigger("itemChange", { item: n.eq(o), data: t[o], ns: f }); this._angularItems("compile") }, refresh: function (e) { var i, n, o = e.node, r = e.action, s = e.items, a = this.wrapper, l = this.options, c = l.loadOnDemand, d = l.checkboxes && l.checkboxes.checkChildren; if (e.field) { if (!s[0] || !s[0].level) return; return this._updateNodes(s, e.field) } if (o && (a = this.findByUid(o.uid), this._progress(a, !1)), d && "remove" != r) { for (n = !1, i = 0; i < s.length; i++)if ("checked" in s[i]) { n = !0; break } if (!n && o && o.checked) for (i = 0; i < s.length; i++)s[i].checked = !0 } if ("add" == r ? this._appendItems(e.index, s, a) : "remove" == r ? this._remove(this.findByUid(s[0].uid), !1) : "itemchange" == r ? this._updateNodes(s) : "itemloaded" == r ? this._refreshChildren(a, s, e.index) : this._refreshRoot(s), "remove" != r) for (i = 0; i < s.length; i++)c && !s[i].expanded || s[i].load(); this.trigger(z, { node: o ? a : t }) }, _error: function (e) { var t = e.node && this.findByUid(e.node.uid), i = this.templates.retry({ messages: this.options.messages }); t ? (this._progress(t, !1), this._expanded(t, !1), d(t).addClass("k-i-reload"), e.node.loaded(!1)) : (this._progress(!1), this.element.html(i)) }, _retryRequest: function (e) { e.preventDefault(), this.dataSource.fetch() }, expand: function (e) { this._processNodes(e, function (e, t) { this.toggle(t, !0) }) }, collapse: function (e) { this._processNodes(e, function (e, t) { this.toggle(t, !1) }) }, enable: function (e, t) { t = 2 != arguments.length || !!t, this._processNodes(e, function (e, i) { this.dataItem(i).set("enabled", t) }) }, current: function (i) { var n = this, o = n._current, r = n.element, s = n._ariaId; return arguments.length > 0 && i && i.length ? (o && (o[0].id === s && o.removeAttr("id"), o.find(".k-in:first").removeClass("k-state-focused")), (o = n._current = e(i, r).closest(N)).find(".k-in:first").addClass("k-state-focused"), (s = o[0].id || s) && (n.wrapper.removeAttr("aria-activedescendant"), o.attr("id", s), n.wrapper.attr("aria-activedescendant", s)), t) : (o || (o = n._nextVisible(e())), o) }, select: function (i) { var n = this, o = n.element; return arguments.length ? (i = e(i, o).closest(N), o.find(".k-state-selected").each(function () { var t = n.dataItem(this); t ? (t.set("selected", !1), delete t.selected) : e(this).removeClass("k-state-selected") }), i.length && (n.dataItem(i).set("selected", !0), n._clickTarget = i), n.trigger(T), t) : o.find(".k-state-selected").closest(N) }, _toggle: function (e, t, i) { var n, o = this.options, r = c(e), s = i ? "expand" : "collapse"; r.data("animating") || this._trigger(s, e) || (this._expanded(e, i), n = t && t.loaded(), i && !n ? (o.loadOnDemand && this._progress(e, !0), r.remove(), t.load()) : (this._updateNodeClasses(e, {}, { expanded: i }), i || r.css("height", r.height()).css("height"), r.kendoStop(!0, !0).kendoAnimate(m({ reset: !0 }, o.animation[s], { complete: function () { i && r.css("height", "") } })))) }, toggle: function (t, i) { t = e(t), d(t).is(".k-i-expand, .k-i-collapse") && (1 == arguments.length && (i = !this._expanded(t)), this._expanded(t, i)) }, destroy: function () { var e = this; _.fn.destroy.call(e), e.wrapper.off(k), e._unbindDataSource(), e.dragging && e.dragging.destroy(), h.destroy(e.element), e.root = e.wrapper = e.element = null }, _expanded: function (e, i) { var n = h.attr("expanded"), o = this.dataItem(e), r = i; return 1 == arguments.length ? "true" === e.attr(n) || o && o.expanded : (c(e).data("animating") || (o && (o.set("expanded", r), r = o.expanded), r ? (e.attr(n, "true"), e.attr("aria-expanded", "true")) : (e.removeAttr(n), e.attr("aria-expanded", "false"))), t) }, _progress: function (e, t) { var i = this.element, n = this.templates.loading({ messages: this.options.messages }); 1 == arguments.length ? (t = e) ? i.html(n) : i.empty() : d(e).toggleClass("k-i-loading", t).removeClass("k-i-reload") }, text: function (e, i) { var n = this.dataItem(e), o = this.options[W.text], r = n.level(), s = o.length, a = o[Math.min(r, s - 1)]; return i ? (n.set(a, i), t) : n[a] }, _objectOrSelf: function (t) { return e(t).closest("[data-role=treeview]").data("kendoTreeView") || this }, _dataSourceMove: function (t, i, n, o) { var r, s = this._objectOrSelf(n || i), a = s.dataSource, l = e.Deferred().resolve().promise(); return n && n[0] != s.element[0] && ((r = s.dataItem(n)).loaded() || (s._progress(n, !0), l = r.load()), n != this.root && ((a = r.children) && a instanceof b || (r._initChildren(), r.loaded(!0), a = r.children))), t = this._toObservableData(t), o.call(s, a, t, l) }, _toObservableData: function (t) { var i, n, o = t; return (t instanceof window.jQuery || q(t)) && (i = this._objectOrSelf(t).dataSource, n = e(t).attr(h.attr("uid")), (o = i.getByUid(n)) && (o = i.remove(o))), o }, _insert: function (e, t, i) { t instanceof h.data.ObservableArray ? t = t.toJSON() : v(t) || (t = [t]); var n = e.parent(); return n && n._initChildren && (n.hasChildren = !0, n._initChildren()), e.splice.apply(e, [i, 0].concat(t)), this.findByUid(e[i].uid) }, insertAfter: r(1), insertBefore: r(0), append: function (t, i, n) { var o = this.root; return i && (o = l(i)), this._dataSourceMove(t, o, i, function (t, o, r) { var s, a = this; return r.done(function () { s = function () { i && a._expanded(i, !0); var e = t.data(), n = Math.max(e.length, 0); return a._insert(e, o, n) }(), (n = n || e.noop)(s) }), s || null }) }, _remove: function (t, i) { var n, o, r, a = this; return t = e(t, a.element), this.angular("cleanup", function () { return { elements: t.get() } }), n = t.parent().parent(), o = t.prev(), r = t.next(), t[i ? "detach" : "remove"](), n.hasClass("k-item") && (s(n), a._updateNodeClasses(n)), a._updateNodeClasses(o), a._updateNodeClasses(r), t }, remove: function (e) { var t = this.dataItem(e); t && this.dataSource.remove(t) }, detach: function (e) { return this._remove(e, !0) }, findByText: function (t) { return e(this.element).find(".k-in").filter(function (i, n) { return e(n).text() == t }).closest(N) }, findByUid: function (t) { var i, n, o = this.element.find(".k-item"), r = h.attr("uid"); for (n = 0; n < o.length; n++)if (o[n].getAttribute(r) == t) { i = o[n]; break } return e(i) }, expandPath: function (t, i) { function n(t) { var i = e.Deferred(), n = o.dataSource.get(t); return n ? n.loaded() ? (n.set("expanded", !0), i.resolve()) : (o._progress(o.findByUid(n.uid), !0), n.load().then(function () { n.set("expanded", !0), i.resolve() })) : i.resolve(), i.promise() } var o = this, r = t.slice(0), s = i || e.noop; n(r[0]).then(function e() { r.shift(), r.length ? n(r[0]).then(e) : s.call(o) }) }, _parentIds: function (e) { for (var t = e && e.parentNode(), i = []; t && t.parentNode;)i.unshift(t.id), t = t.parentNode(); return i }, expandTo: function (e) { e instanceof h.data.Node || (e = this.dataSource.get(e)); var t = this._parentIds(e); this.expandPath(t) }, _renderItem: function (e) { return e.group || (e.group = {}), e.treeview = this.options, e.r = this.templates, this.templates.item(e) }, _renderGroup: function (e) { var t = this; return e.renderItems = function (e) { var i = "", n = 0, o = e.items, r = o ? o.length : 0, s = e.group; for (s.length = r; n < r; n++)e.group = s, e.item = o[n], e.item.index = n, i += t._renderItem(e); return i }, e.r = t.templates, t.templates.group(e) } }), f.plugin(a) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.pivot.fieldmenu.min", ["kendo.pivotgrid.min", "kendo.menu.min", "kendo.window.min", "kendo.treeview.min", "kendo.dropdownlist.min"], function () { return function (e, t) { function i(e, t, i) { var n, o, r, s; if (!e) return []; for (e = e.filters, n = 0, o = [], r = e.length; n < r; n++)s = e[n].operator, (i || "in" === s) && s !== i || e[n].field !== t || o.push(e[n]); return o } function n(t, n, o) { var r, s = 0, a = o.length; if (t = i(t, n, "in")[0]) for (r = t.value.split(","); s < a; s++)o[s].checked = e.inArray(o[s].uniqueName, r) >= 0; else for (; s < a; s++)o[s].checked = !0 } var o = window.kendo, r = o.ui, s = "kendoContextMenu", a = e.proxy, l = ".kendoPivotFieldMenu", c = r.Widget, d = "k-filter-item", u = "aria-label", h = c.extend({ init: function (e, t) { c.fn.init.call(this, e, t), this._dataSource(), this._layout(), o.notify(this) }, events: [], options: { name: "PivotFieldMenu", filter: null, filterable: !0, sortable: !0, messages: { info: "Show items with value that:", sortAscending: "Sort Ascending", sortDescending: "Sort Descending", filterFields: "Fields Filter", filter: "Filter", include: "Include Fields...", title: "Fields to include", clear: "Clear", ok: "OK", cancel: "Cancel", operators: { contains: "Contains", doesnotcontain: "Does not contain", startswith: "Starts with", endswith: "Ends with", eq: "Is equal to", neq: "Is not equal to" } } }, _layout: function () { var t = this.options; this.wrapper = e(o.template(f)({ ns: o.ns, filterable: t.filterable, sortable: t.sortable, messages: t.messages })), this.menu = this.wrapper[s]({ filter: t.filter, target: this.element, orientation: "vertical", showOn: "click", closeOnClick: !1, open: a(this._menuOpen, this), select: a(this._select, this), copyAnchorStyles: !1 }).data(s), this._createWindow(), t.filterable && this._initFilterForm() }, _initFilterForm: function () { var e = this.menu.element.find("." + d), t = a(this._filter, this); this._filterOperator = new o.ui.DropDownList(e.find("select")), this._filterValue = e.find(".k-textbox"), this._updateFilterAriaLabel(), e.on("submit" + l, t).on("click" + l, ".k-button-filter", t).on("click" + l, ".k-button-clear", a(this._reset, this)) }, _setFilterForm: function (e) { var t = this._filterOperator, i = "", n = ""; e && (i = e.operator, n = e.value), t.value(i), t.value() || t.select(0), this._filterValue.val(n) }, _clearFilters: function (e) { var t, n, o = this.dataSource.filter() || {}, r = 0; for (o.filters = o.filters || [], t = i(o, e), n = t.length; r < n; r++)o.filters.splice(o.filters.indexOf(t[r]), 1); return o }, _convert: function (t) { var i = this.dataSource.options.schema, n = ((i.model || {}).fields || {})[this.currentMember]; return n && ("number" === n.type ? t = parseFloat(t) : "boolean" === n.type && (t = !!e.parseJSON(t))), t }, _filter: function (e) { var i, n, o = this, r = o._convert(o._filterValue.val()); return e.preventDefault(), "" === r ? (o.menu.close(), t) : (i = { field: o.currentMember, operator: o._filterOperator.value(), value: r }, (n = o._clearFilters(o.currentMember)).filters.push(i), o.dataSource.filter(n), o.menu.close(), t) }, _updateFilterAriaLabel: function () { var e = this.menu.element.find("." + d), t = this._filterOperator.value(), i = this.options.messages.operators[t]; e.find("select").attr(u, i) }, _reset: function (e) { var t = this, i = t._clearFilters(t.currentMember); e.preventDefault(), i.filters[0] || (i = {}), t.dataSource.filter(i), t._setFilterForm(null), t.menu.close() }, _sort: function (e) { var t = this.currentMember, i = this.dataSource.sort() || []; (i = function (e, t) { var i, n, o = []; for (i = 0, n = e.length; i < n; i++)e[i].field !== t && o.push(e[i]); return o }(i, t)).push({ field: t, dir: e }), this.dataSource.sort(i), this.menu.close() }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource() }, _dataSource: function () { this.dataSource = o.data.PivotDataSource.create(this.options.dataSource) }, _createWindow: function () { var t = this.options.messages; this.includeWindow = e(o.template(p)({ messages: t })).on("click" + l, ".k-button-ok", a(this._applyIncludes, this)).on("click" + l, ".k-button-cancel", a(this._closeWindow, this)), this.includeWindow = new r.Window(this.includeWindow, { title: t.title, visible: !1, resizable: !1, open: a(this._windowOpen, this) }) }, _applyIncludes: function (e) { var t, n = [], o = this.treeView.dataSource.view(), r = o[0].checked, s = this.dataSource.filter(), a = i(s, this.currentMember, "in")[0]; (function e(t, i) { var n, o = t.length; for (n = 0; n < o; n++)t[n].checked && 0 !== t[n].level() && i.push(t[n].uniqueName), t[n].hasChildren && e(t[n].children.view(), i) })(o, n), a && (r ? (s.filters.splice(s.filters.indexOf(a), 1), s.filters.length || (s = {})) : a.value = n.join(","), t = s), n.length && (t || r || (t = { field: this.currentMember, operator: "in", value: n.join(",") }, s && (s.filters.push(t), t = s))), t && this.dataSource.filter(t), this._closeWindow(e) }, _closeWindow: function (e) { e.preventDefault(), this.includeWindow.close() }, _treeViewDataSource: function () { var e = this; return o.data.HierarchicalDataSource.create({ schema: { model: { id: "uniqueName", hasChildren: function (e) { return parseInt(e.childrenCardinality, 10) > 0 } } }, transport: { read: function (t) { var i = {}, o = e.treeView.dataSource.get(t.data.uniqueName), r = t.data.uniqueName; r ? (i.memberUniqueName = o.uniqueName.replace(/\&/g, "&amp;"), i.treeOp = 1) : i.levelUniqueName = e.currentMember + ".[(ALL)]", e.dataSource.schemaMembers(i).done(function (i) { n(e.dataSource.filter(), e.currentMember, i), t.success(i) }).fail(t.error) } } }) }, _createTreeView: function (e) { var t = this; t.treeView = new r.TreeView(e, { autoBind: !1, dataSource: t._treeViewDataSource(), dataTextField: "caption", template: "#: data.item.caption || data.item.name #", checkboxes: { checkChildren: !0 }, dataBound: function () { r.progress(t.includeWindow.element, !1) } }) }, _menuOpen: function (t) { if (t.event) { var n = o.attr("name"); this.currentMember = e(t.event.target).closest("[" + n + "]").attr(n), this.options.filterable && this._setFilterForm(i(this.dataSource.filter(), this.currentMember)[0]) } }, _select: function (t) { var i = e(t.item); e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"), i.hasClass("k-include-item") ? this.includeWindow.center().open() : i.hasClass("k-sort-asc") ? this._sort("asc") : i.hasClass("k-sort-desc") ? this._sort("desc") : i.hasClass(d) && this._updateFilterAriaLabel() }, _windowOpen: function () { this.treeView || this._createTreeView(this.includeWindow.element.find(".k-treeview")), r.progress(this.includeWindow.element, !0), this.treeView.dataSource.read() }, destroy: function () { c.fn.destroy.call(this), this.menu && (this.menu.destroy(), this.menu = null), this.treeView && (this.treeView.destroy(), this.treeView = null), this.includeWindow && (this.includeWindow.destroy(), this.includeWindow = null), this.wrapper = null, this.element = null } }), f = '<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-i-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item ' + d + '"><span class="k-link"><span class="k-icon k-i-filter"></span>${messages.filterFields}</span><ul><li><div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" aria-label="#=messages.filter#" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div></li></ul></li># } #</ul>', p = '<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>'; r.plugin(h) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.filtercell.min", ["kendo.autocomplete.min", "kendo.datepicker.min", "kendo.numerictextbox.min", "kendo.combobox.min", "kendo.dropdownlist.min"], function () { return function (e, t) { function i(t) { var i = "string" == typeof t ? t : t.operator; return e.inArray(i, p) > -1 } var n = window.kendo, o = n.ui, r = n.data.DataSource, s = o.Widget, a = "change", l = "boolean", c = "enums", d = "string", u = "Is equal to", h = "Is not equal to", f = e.proxy, p = ["isnull", "isnotnull", "isempty", "isnotempty"], m = s.extend({ init: function (o, r) { var u, h, p, m, g, v, _, b, w, y, k, x, C; if (o = e(o).addClass("k-filtercell"), u = this.wrapper = e("<span/>").appendTo(o), g = r, b = (h = this).operators = r.operators || {}, w = h.input = e("<input/>").attr(n.attr("bind"), "value: value").appendTo(u), (y = r ? r.suggestDataSource : null) && (r = e.extend({}, r, { suggestDataSource: {} })), s.fn.init.call(h, o[0], r), y && (h.options.suggestDataSource = y), r = h.options, p = h.dataSource = r.dataSource, h.model = p.reader.model, _ = r.type = d, k = n.getter("reader.model.fields", !0)(p) || {}, (x = k[r.field]) && x.type && (_ = r.type = x.type), r.values && (r.type = _ = c), b = b[_] || r.operators[_], !g.operator) for (v in b) { r.operator = v; break } h._parse = function (e) { return null != e ? e + "" : e }, h.model && h.model.fields && ((C = h.model.fields[r.field]) && C.parse && (h._parse = f(C.parse, C))), h.defaultOperator = r.operator, h.viewModel = m = n.observable({ operator: r.operator, value: null, operatorVisible: function () { var e = this.get("value"); return null !== e && e !== t && "undefined" != e || i(this.get("operator")) && !h._clearInProgress } }), m.bind(a, f(h.updateDsFilter, h)), _ == d && h.initSuggestDataSource(r), null !== r.inputWidth && w.width(r.inputWidth), w.attr("aria-label", h._getColumnTitle()), h._setInputType(r, _), _ != l && !1 !== r.showOperators ? h._createOperatorDropDown(b) : (e('<div unselectable="on" />').css("display", "none").text("eq").appendTo(u), u.addClass("k-operator-hidden")), h._createClearIcon(), n.bind(this.wrapper, m), _ == d && (r.template || h.setAutoCompleteSource()), _ == c && h.setComboBoxSource(h.options.values), h._refreshUI(), h._refreshHandler = f(h._refreshUI, h), h.dataSource.bind(a, h._refreshHandler) }, _setInputType: function (t, i) { var o, r, s, a, u, h = this, f = h.input; "function" == typeof t.template ? (t.template.call(h.viewModel, { element: h.input, dataSource: h.suggestDataSource }), h._angularItems("compile")) : i == d ? f.attr(n.attr("role"), "autocomplete").attr(n.attr("text-field"), t.dataTextField || t.field).attr(n.attr("filter"), t.suggestionOperator).attr(n.attr("delay"), t.delay).attr(n.attr("min-length"), t.minLength).attr(n.attr("value-primitive"), !0) : "date" == i ? f.attr(n.attr("role"), "datepicker") : i == l ? (f.remove(), o = e("<input type='radio'/>"), r = h.wrapper, s = n.guid(), a = e("<label/>").text(t.messages.isTrue).append(o), o.attr(n.attr("bind"), "checked:value").attr("name", s).val("true"), u = a.clone().text(t.messages.isFalse), o.clone().val("false").appendTo(u), r.append([a, u])) : "number" == i ? f.attr(n.attr("role"), "numerictextbox").attr("title", h._getColumnTitle()) : i == c && f.attr(n.attr("role"), "combobox").attr(n.attr("text-field"), "text").attr(n.attr("suggest"), !0).attr(n.attr("filter"), "contains").attr(n.attr("value-field"), "value").attr(n.attr("value-primitive"), !0) }, _getColumnTitle: function () { var e = this.options.column; return e ? e.title || e.field : "" }, _createOperatorDropDown: function (t) { var i, o, r = [], s = this.viewModel; for (i in t) r.push({ text: t[i], value: i }); o = e('<input class="k-dropdown-operator" ' + n.attr("bind") + '="value: operator"/>').appendTo(this.wrapper), this.operatorDropDown = o.kendoDropDownList({ dataSource: r, dataTextField: "text", dataValueField: "value", open: function () { this.popup.element.width(150) }, valuePrimitive: !0 }).data("kendoDropDownList"), s.bind("change", function () { var e = t[s.operator]; o.attr("aria-label", e) }), this.operatorDropDown.wrapper.find(".k-i-arrow-60-down").removeClass("k-i-arrow-60-down").addClass("k-i-filter") }, initSuggestDataSource: function (e) { var i = e.suggestDataSource; i instanceof r || (!e.customDataSource && i && (i.group = t), i = this.suggestDataSource = r.create(i)), e.customDataSource || (i._pageSize = t, i.reader.data = function (e, t) { var i = n.getter(t, !0); return function (t) { for (var n, o, r = e(t), s = [], a = 0, l = {}; a < r.length;)n = r[a++], o = i(n), l.hasOwnProperty(o) || (s.push(n), l[o] = !0); return s } }(i.reader.data, this.options.field)), this.suggestDataSource = i }, setAutoCompleteSource: function () { var e = this.input.data("kendoAutoComplete"); e && e.setDataSource(this.suggestDataSource) }, setComboBoxSource: function (e) { var t = r.create({ data: e }), i = this.input.data("kendoComboBox"); i && i.setDataSource(t) }, _refreshUI: function () { var t = this, i = function t(i, n) { var o, r, s = []; if (e.isPlainObject(i)) if (i.hasOwnProperty("filters")) s = i.filters; else if (i.field == n) return i; for (e.isArray(i) && (s = i), o = 0; o < s.length; o++)if (r = t(s[o], n)) return r }(t.dataSource.filter(), this.options.field) || {}, n = t.viewModel; t.manuallyUpdatingVM = !0, i = e.extend(!0, {}, i), t.options.type == l && n.value !== i.value && t.wrapper.find(":radio").prop("checked", !1), i.operator && n.set("operator", i.operator), n.set("value", i.value), t.manuallyUpdatingVM = !1 }, updateDsFilter: function (n) { var o, r, s, l, c = this, d = c.viewModel; c.manuallyUpdatingVM || "operator" == n.field && d.value === t && !i(d) || (o = e.extend({}, c.viewModel.toJSON(), { field: c.options.field }), r = { logic: "and", filters: [] }, s = !1, (o.value !== t && null !== o.value || i(o) && !this._clearInProgress) && (r.filters.push(o), s = c.trigger(a, { filter: r, field: c.options.field })), (c._clearInProgress || null === o.value) && (s = c.trigger(a, { filter: null, field: c.options.field })), s || (l = c._merge(r), c.dataSource.filter(l.filters.length ? l : {}))) }, _merge: function (t) { var n, o, r, s = this, a = t.logic || "and", l = t.filters, c = s.dataSource.filter() || { filters: [], logic: "and" }; for (function t(i, n) { i.filters && (i.filters = e.grep(i.filters, function (e) { return t(e, n), e.filters ? e.filters.length : e.field != n })) }(c, s.options.field), o = 0, r = l.length; o < r; o++)(n = l[o]).value = s._parse(n.value); return (l = e.grep(l, function (e) { return "" !== e.value && null !== e.value || i(e) })).length && (c.filters.length ? (t.filters = l, "and" !== c.logic && (c.filters = [{ logic: c.logic, filters: c.filters }], c.logic = "and"), c.filters.push(l.length > 1 ? t : l[0])) : (c.filters = l, c.logic = a)), c }, _createClearIcon: function () { var t = this; e("<button type='button' class='k-button k-button-icon' title = " + t.options.messages.clear + "/>").attr("aria-label", t.options.messages.clear).attr(n.attr("bind"), "visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(f(t.clearFilter, t)).appendTo(t.wrapper) }, clearFilter: function () { this._clearInProgress = !0, i(this.viewModel.operator) && this.viewModel.set("operator", this.defaultOperator), this.viewModel.set("value", null), this._clearInProgress = !1 }, _angularItems: function (e) { var t = this.wrapper.closest("th").get(), i = this.options.column; this.angular(e, function () { return { elements: t, data: [{ column: i }] } }) }, destroy: function () { var e = this; e.filterModel = null, e.operatorDropDown = null, e._angularItems("cleanup"), e._refreshHandler && (e.dataSource.bind(a, e._refreshHandler), e._refreshHandler = null), n.unbind(e.element), s.fn.destroy.call(e), n.destroy(e.element) }, events: [a], options: { name: "FilterCell", delay: 200, minLength: 1, inputWidth: null, values: t, customDataSource: !1, field: "", dataTextField: "", type: "string", suggestDataSource: null, suggestionOperator: "startswith", operator: "eq", showOperators: !0, template: null, messages: { isTrue: "is true", isFalse: "is false", filter: "Filter", clear: "Clear", operator: "Operator" }, operators: { string: { eq: u, neq: h, startswith: "Starts with", contains: "Contains", doesnotcontain: "Does not contain", endswith: "Ends with", isnull: "Is null", isnotnull: "Is not null", isempty: "Is empty", isnotempty: "Is not empty" }, number: { eq: u, neq: h, gte: "Is greater than or equal to", gt: "Is greater than", lte: "Is less than or equal to", lt: "Is less than", isnull: "Is null", isnotnull: "Is not null" }, date: { eq: u, neq: h, gte: "Is after or equal to", gt: "Is after", lte: "Is before or equal to", lt: "Is before", isnull: "Is null", isnotnull: "Is not null" }, enums: { eq: u, neq: h, isnull: "Is null", isnotnull: "Is not null" } } } }); o.plugin(m) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.panelbar.min", ["kendo.data.min"], function () { return function (e, t) { function i(t) { (t = e(t)).filter(".k-first:not(:first-child)").removeClass(C), t.filter(".k-last:not(:last-child)").removeClass(v), t.filter(":first-child").addClass(C), t.filter(":last-child").addClass(v) } function n(t) { var i = t, n = t.children("ul"), o = i.children(".k-link").children(".k-icon"); t.hasClass("k-panelbar") || (!o.length && n.length ? o = e("<span class='k-icon' />").appendTo(i) : n.length && n.children().length || (o.remove(), n.remove())) } var o = window.kendo, r = o.ui, s = o.keys, a = e.extend, l = e.proxy, c = e.each, d = e.isArray, u = o.template, h = r.Widget, f = o.data.HierarchicalDataSource, p = /^(ul|a|div)$/i, m = ".kendoPanelBar", g = "href", v = "k-last", _ = "k-link", b = "." + _, w = "error", y = ".k-item", k = ".k-group:visible", x = "k-image", C = "k-first", S = "change", T = "expand", D = "select", A = "k-content", E = "activate", I = "collapse", M = "dataBound", R = "mouseenter", F = "contentLoad", z = "k-state-active", P = "> .k-panel", B = "> .k-content", L = "k-state-focused", H = "k-state-disabled", N = "k-state-selected", O = "." + N, V = "k-state-highlight", U = y + ":not(.k-state-disabled)", W = "> " + U + " > " + b + ", .k-panel > " + U + " > " + b, q = "> li > " + O + ", .k-panel > li > " + O, j = "aria-disabled", G = "aria-expanded", $ = "aria-hidden", Y = "aria-selected", K = ":visible", Q = { text: "dataTextField", url: "dataUrlField", spriteCssClass: "dataSpriteCssClassField", imageUrl: "dataImageUrlField" }, X = { aria: function (e) { var t = ""; return (e.items || e.content || e.contentUrl || e.expanded) && (t += G + "='" + (e.expanded ? "true" : "false") + "' "), !1 === e.enabled && (t += j + "='true'"), t }, wrapperCssClass: function (e, t) { var i = "k-item", n = t.index; return i += !1 === t.enabled ? " " + H : !0 === t.expanded ? " " + z : " k-state-default", 0 === n && (i += " k-first"), n == e.length - 1 && (i += " k-last"), t.cssClass && (i += " " + t.cssClass), i }, textClass: function (e, t) { var i = _; return t.firstLevel && (i += " k-header"), i }, textAttributes: function (e) { return e ? " href='" + e + "'" : "" }, arrowClass: function (e) { var t = "k-icon"; return t += e.expanded ? " k-panelbar-collapse k-i-arrow-n" : " k-panelbar-expand k-i-arrow-s" }, text: function (e) { return !1 === e.encoded ? e.text : o.htmlEncode(e.text) }, groupAttributes: function (e) { return !0 !== e.expanded ? " style='display:none'" : "" }, groupCssClass: function () { return "k-group k-panel" }, contentAttributes: function (e) { return !0 !== e.item.expanded ? " style='display:none'" : "" }, content: function (e) { return e.content ? e.content : e.contentUrl ? "" : "&nbsp;" }, contentUrl: function (e) { return e.contentUrl ? 'href="' + e.contentUrl + '"' : "" } }, Z = function (e) { return e.children("span").children(".k-icon") }, J = o.ui.DataBoundWidget.extend({ init: function (t, i) { var n, r, s = this; d(i) && (i = { dataSource: i }), r = i && !!i.dataSource, h.fn.init.call(s, t, i), t = s.wrapper = s.element.addClass("k-widget k-reset k-header k-panelbar"), i = s.options, t[0].id && (s._itemId = t[0].id + "_pb_active"), s._tabindex(), s._accessors(), s._dataSource(), s._templates(), s._initData(r), s._updateClasses(), s._animations(i), t.on("click" + m, W, function (t) { s._click(e(t.currentTarget)) && t.preventDefault() }).on(R + m + " mouseleave" + m, W, s._toggleHover).on("click" + m, ".k-item.k-state-disabled > .k-link", !1).on("click" + m, ".k-request-retry", l(s._retryRequest, s)).on("keydown" + m, e.proxy(s._keydown, s)).on("focus" + m, function () { var e = s.select(); s._current(e[0] ? e : s._first()) }).on("blur" + m, function () { s._current(null) }).attr("role", "menu"), (n = t.find("li." + z + " > ." + A))[0] && s.expand(n.parent(), !1), i.dataSource || s._angularCompile(), o.notify(s) }, events: [T, I, D, E, S, w, M, F], options: { name: "PanelBar", dataSource: {}, animation: { expand: { effects: "expand:vertical", duration: 200 }, collapse: { duration: 200 } }, messages: { loading: "Loading...", requestFailed: "Request failed.", retry: "Retry" }, autoBind: !0, loadOnDemand: !0, expandMode: "multiple", dataTextField: null }, _angularCompile: function () { var e = this; e.angular("compile", function () { return { elements: e.element.children("li"), data: [{ dataItem: e.options.$angular }] } }) }, _angularCompileElements: function (t, i) { this.angular("compile", function () { return { elements: t, data: e.map(i, function (e) { return [{ dataItem: e }] }) } }) }, _angularCleanup: function () { var e = this; e.angular("cleanup", function () { return { elements: e.element.children("li") } }) }, destroy: function () { h.fn.destroy.call(this), this.element.off(m), this._angularCleanup(), o.destroy(this.element) }, _initData: function (e) { var t = this; e && (t.element.empty(), t.options.autoBind && (t._progress(!0), t.dataSource.fetch())) }, _templates: function () { var e = this, t = e.options, i = l(e._fieldAccessor, e); t.template && "string" == typeof t.template ? t.template = u(t.template) : t.template || (t.template = u("# var text = " + i("text") + "(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")), e.templates = { content: u("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"), group: u("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"), itemWrapper: u("# var url = " + i("url") + "(item); ## var imageUrl = " + i("imageUrl") + "(item); ## var spriteCssClass = " + i("spriteCssClass") + "(item); ## var contentUrl = contentUrl(item); ## var tag = url||contentUrl ? 'a' : 'span'; #<#= tag # class='#= textClass(item, group) #' #= contentUrl ##= textAttributes(url) #># if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #' /># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'></span># } ##= data.panelBar.options.template(data) ##= arrow(data) #</#= tag #>"), item: u("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'" + o.attr("uid") + "='#= item.uid #'>#= itemWrapper(data) ## if (item.items && item.items.length > 0) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"), loading: u("<div class='k-item'><span class='k-icon k-i-loading'></span> #: data.messages.loading #</div>"), retry: u("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>"), arrow: u("<span class='#= arrowClass(item) #'></span>"), empty: u("") } }, setOptions: function (e) { var t = this.options.animation; this._animations(e), e.animation = a(!0, t, e.animation), "dataSource" in e && this.setDataSource(e.dataSource), h.fn.setOptions.call(this, e) }, expand: function (i, n) { var o = this, r = {}; return i = this.element.find(i), o._animating && i.find("ul").is(":visible") ? (o.one("complete", function () { setTimeout(function () { o.expand(i) }) }), t) : (o._animating = !0, n = !1 !== n, i.each(function (t, s) { var a, l; if (s = e(s), (a = i.children(".k-group,.k-content")).length || (a = o._addGroupElement(i)), l = a.add(s.find(B)), !s.hasClass(H) && l.length > 0) { if ("single" == o.options.expandMode && o._collapseAllExpanded(s)) return o; i.find("." + V).removeClass(V), s.addClass(V), n || (r = o.options.animation, o.options.animation = { expand: { effects: {} }, collapse: { hide: !0, effects: {} } }), o._triggerEvent(T, s) || o._toggleItem(s, !1, !1), n || (o.options.animation = r) } }), o) }, collapse: function (t, i) { var n = this, o = {}; return n._animating = !0, i = !1 !== i, (t = n.element.find(t)).each(function (t, r) { var s = (r = e(r)).find(P).add(r.find(B)); !r.hasClass(H) && s.is(K) && (r.removeClass(V), i || (o = n.options.animation, n.options.animation = { expand: { effects: {} }, collapse: { hide: !0, effects: {} } }), n._triggerEvent(I, r) || n._toggleItem(r, !0), i || (n.options.animation = o)) }), n }, updateArrow: function (t) { var i = this; (t = e(t)).children(b).children(".k-panelbar-collapse, .k-panelbar-expand").remove(), t.filter(function () { var t = i.dataItem(this); return t ? t.hasChildren || t.content || t.contentUrl : e(this).find(".k-panel").length > 0 || e(this).find(".k-content").length > 0 }).children(".k-link:not(:has([class*=k-i-arrow]))").each(function () { var t = e(this), i = t.parent(); t.append("<span class='k-icon " + (i.hasClass(z) ? " k-panelbar-collapse k-i-arrow-n" : " k-panelbar-expand k-i-arrow-s") + "'/>") }) }, _accessors: function () { var e, t, i, n = this.options, r = this.element; for (e in Q) t = n[Q[e]], i = r.attr(o.attr(e + "-field")), !t && i && (t = i), t || (t = e), d(t) || (t = [t]), n[Q[e]] = t }, _progress: function (e, t) { var i = this.element, n = this.templates.loading({ messages: this.options.messages }); 1 == arguments.length ? (t = e) ? i.html(n) : i.empty() : Z(e).toggleClass("k-i-loading", t).removeClass("k-i-refresh") }, _refreshRoot: function (t) { var i, n = this, o = n.element, r = { firstLevel: !0, expanded: !0, length: o.children().length }; this.element.empty(), i = e.map(t, function (t, i) { return "string" == typeof t ? e(t) : (t.items = [], e(n.renderItem({ group: r, item: a(t, { index: i }) }))) }), this.element.append(i), this._angularCompileElements(i, t) }, _refreshChildren: function (e, t) { var i, o, s, a; if (t.children(".k-group").empty(), (a = e.children.data()).length) for (this.append(e.children, t), this.options.loadOnDemand && this._toggleGroup(t.children(".k-group"), !1), o = t.children(".k-group").children("li"), i = 0; i < o.length; i++)s = o.eq(i), this.trigger("itemChange", { item: s, data: this.dataItem(s), ns: r }); else n(t), o = t.children(".k-group").children("li"), this._angularCompileElements(o, a) }, findByUid: function (t) { var i, n, r = this.element.find(".k-item"), s = o.attr("uid"); for (n = 0; n < r.length; n++)if (r[n].getAttribute(s) == t) { i = r[n]; break } return e(i) }, refresh: function (e) { var i, n, o = this.options, r = e.node, s = e.action, a = e.items, l = this.wrapper, c = o.loadOnDemand; if (e.field) { if (!a[0] || !a[0].level) return; return this._updateItems(a, e.field) } if (r && (l = this.findByUid(r.uid), this._progress(l, !1)), "add" == s ? this._appendItems(e.index, a, l) : "remove" == s ? this.remove(this.findByUid(a[0].uid)) : "itemchange" == s ? this._updateItems(a) : "itemloaded" == s ? this._refreshChildren(r, l) : this._refreshRoot(a), "remove" != s) for (i = 0; i < a.length; i++)c && !a[i].expanded || (n = a[i], this._hasChildItems(n) && n.load()); this.trigger(M, { node: r ? l : t }) }, _error: function (e) { var t = e.node && this.findByUid(e.node.uid), i = this.templates.retry({ messages: this.options.messages }); t ? (this._progress(t, !1), this._expanded(t, !1), Z(t).addClass("k-i-refresh"), e.node.loaded(!1)) : (this._progress(!1), this.element.html(i)) }, _retryRequest: function (e) { e.preventDefault(), this.dataSource.fetch() }, items: function () { return this.element.find(".k-item > span:first-child") }, setDataSource: function (e) { var t = this.options; t.dataSource = e, this._dataSource(), this.options.autoBind && (this._progress(!0), this.dataSource.fetch()) }, _bindDataSource: function () { this._refreshHandler = l(this.refresh, this), this._errorHandler = l(this._error, this), this.dataSource.bind(S, this._refreshHandler), this.dataSource.bind(w, this._errorHandler) }, _unbindDataSource: function () { var e = this.dataSource; e && (e.unbind(S, this._refreshHandler), e.unbind(w, this._errorHandler)) }, _fieldAccessor: function (t) { var i = this.options[Q[t]] || [], n = i.length, r = "(function(item) {"; return 0 === n ? r += "return item['" + t + "'];" : (r += "var levels = [" + e.map(i, function (e) { return "function(d){ return " + o.expr(e) + "}" }).join(",") + "];", r += "if(item.level){return levels[Math.min(item.level(), " + n + "-1)](item);}else", r += "{return levels[" + n + "-1](item)}"), r += "})" }, _dataSource: function () { var e = this, t = e.options, i = t.dataSource; i && (i = d(i) ? { data: i } : i, e._unbindDataSource(), i.fields || (i.fields = [{ field: "text" }, { field: "url" }, { field: "spriteCssClass" }, { field: "imageUrl" }]), e.dataSource = f.create(i), e._bindDataSource()) }, _appendItems: function (t, i, n) { var o, r, s, l, c, d = this; for (n.hasClass("k-panelbar") ? (o = n.children("li"), r = n) : ((r = n.children(".k-group")).length || (r = d._addGroupElement(n)), o = r.children("li")), s = { firstLevel: n.hasClass("k-panelbar"), expanded: !0, length: o.length }, l = e.map(i, function (t, i) { return e("string" == typeof t ? t : d.renderItem({ group: s, item: a(t, { index: i }) })) }), void 0 === t && (t = o.length), c = 0; c < l.length; c++)0 === o.length || 0 === t ? r.append(l[c]) : l[c].insertAfter(o[t - 1]); d._angularCompileElements(l, i), d.dataItem(n) && (d.dataItem(n).hasChildren = !0, d.updateArrow(n)) }, _updateItems: function (t, i) { var n, o, s, l, c, d, u = this, h = { panelBar: u.options, item: l, group: {} }, f = "expanded" != i; if ("selected" == i) t[0][i] ? (c = u.findByUid(t[0].uid)).hasClass(H) || u.select(c, !0) : u.clearSelection(); else { for (d = e.map(t, function (e) { return u.findByUid(e.uid) }), f && u.angular("cleanup", function () { return { elements: d } }), n = 0; n < t.length; n++)h.item = l = t[n], h.panelBar = u, s = d[n], o = s.parent(), f && (h.group = { firstLevel: o.hasClass("k-panelbar"), expanded: s.parent().hasClass(z), length: s.children().length }, s.children(".k-link").remove(), s.prepend(u.templates.itemWrapper(a(h, { arrow: l.hasChildren || l.content || l.contentUrl ? u.templates.arrow : u.templates.empty }, X)))), "expanded" == i ? u._toggleItem(s, !l[i], !l[i] || "true") : "enabled" == i && (u.enable(s, l[i]), l[i] || l.selected && l.set("selected", !1)), s.length && this.trigger("itemChange", { item: s, data: l, ns: r }); f && u.angular("compile", function () { return { elements: d, data: e.map(t, function (e) { return [{ dataItem: e }] }) } }) } }, _toggleDisabled: function (e, t) { (e = this.element.find(e)).toggleClass("k-state-default", t).toggleClass(H, !t).attr(j, !t) }, dataItem: function (t) { var i = e(t).closest(y).attr(o.attr("uid")), n = this.dataSource; return n && n.getByUid(i) }, select: function (i, n) { var o = this; return i === t ? o.element.find(q).parent() : ((i = o.element.find(i)).length ? i.each(function () { var i = e(this), r = i.children(b); return i.hasClass(H) ? o : (o._updateSelected(r, n), t) }) : this._updateSelected(i), o) }, clearSelection: function () { this.select(e()) }, enable: function (e, t) { return this._toggleDisabled(e, !1 !== t), this }, disable: function (e) { return this._toggleDisabled(e, !1), this }, append: function (e, t) { t = this.element.find(t); var n = this._insert(e, t, t.length ? t.find(P) : null); return c(n.items, function () { n.group.append(this), i(this) }), this.updateArrow(t), i(n.group.find(".k-first, .k-last")), n.group.height("auto"), this }, insertBefore: function (e, t) { t = this.element.find(t); var n = this._insert(e, t, t.parent()); return c(n.items, function () { t.before(this), i(this) }), i(t), n.group.height("auto"), this }, insertAfter: function (e, t) { t = this.element.find(t); var n = this._insert(e, t, t.parent()); return c(n.items, function () { t.after(this), i(this) }), i(t), n.group.height("auto"), this }, remove: function (e) { e = this.element.find(e); var t = this, n = e.parentsUntil(t.element, y), o = e.parent("ul"); return e.remove(), !o || o.hasClass("k-panelbar") || o.children(y).length || o.remove(), n.length && (n = n.eq(0), t.updateArrow(n), i(n)), t }, reload: function (t) { var i = this; (t = i.element.find(t)).each(function () { var t = e(this); i._ajaxRequest(t, t.children("." + A), !t.is(K)) }) }, _first: function () { return this.element.children(U).first() }, _last: function () { var e = this.element.children(U).last(), t = e.children(k); return t[0] ? t.children(U).last() : e }, _current: function (i) { var n = this, o = n._focused, r = n._itemId; return i === t ? o : (n.element.removeAttr("aria-activedescendant"), o && o.length && (o[0].id === r && o.removeAttr("id"), o.children(b).removeClass(L)), e(i).length && (r = i[0].id || r, i.attr("id", r).children(b).addClass(L), n.element.attr("aria-activedescendant", r)), n._focused = i, t) }, _keydown: function (e) { var t = this, i = e.keyCode, n = t._current(); e.target == e.currentTarget && (i == s.DOWN || i == s.RIGHT ? (t._current(t._nextItem(n)), e.preventDefault()) : i == s.UP || i == s.LEFT ? (t._current(t._prevItem(n)), e.preventDefault()) : i == s.ENTER || i == s.SPACEBAR ? (t._click(n.children(b)), e.preventDefault()) : i == s.HOME ? (t._current(t._first()), e.preventDefault()) : i == s.END && (t._current(t._last()), e.preventDefault())) }, _nextItem: function (e) { if (!e) return this._first(); var t = e.children(k), i = e.nextAll(":visible").first(); return t[0] && (i = t.children("." + C)), i[0] || (i = e.parent(k).parent(y).next()), i[0] || (i = this._first()), i.hasClass(H) && (i = this._nextItem(i)), i }, _prevItem: function (e) { if (!e) return this._last(); var t, i = e.prevAll(":visible").first(); if (i[0]) for (t = i; t[0];)(t = t.children(k).children("." + v))[0] && (i = t); else (i = e.parent(k).parent(y))[0] || (i = this._last()); return i.hasClass(H) && (i = this._prevItem(i)), i }, _insert: function (t, i, n) { var o, r, s, l = this, c = e.isPlainObject(t), d = i && i[0]; return d || (n = l.element), r = { firstLevel: n.hasClass("k-panelbar"), expanded: e(i).hasClass(z), length: n.children().length }, d && !n.length && (n = e(l.renderGroup({ group: r, options: l.options })).appendTo(i)), c || e.isArray(t) || t instanceof f ? (t instanceof f && (t = t.data()), o = e.map(c ? [t] : t, function (t, i) { return e("string" == typeof t ? t : l.renderItem({ group: r, item: a(t, { index: i }) })) }), d && ((s = l.dataItem(i)) && (s.hasChildren = !0), i.attr(G, !1))) : (o = "string" == typeof t && "<" != t.charAt(0) ? l.element.find(t) : e(t), l._updateItemsClasses(o)), t.length || (t = [t]), l._angularCompileElements(o, t), { items: o, group: n } }, _toggleHover: function (t) { var i = e(t.currentTarget); i.parents("li." + H).length || i.toggleClass("k-state-hover", t.type == R) }, _updateClasses: function () { var t, n, o = this; (t = o.element.find("li > ul").not(function () { return e(this).parentsUntil(".k-panelbar", "div").length }).addClass("k-group k-panel").attr("role", "group")).parent().attr(G, !1).not("." + z).children("ul").attr($, !0).hide(), n = o.element.add(t).children(), o._updateItemsClasses(n), o.updateArrow(n), i(n) }, _updateItemsClasses: function (e) { for (var t = e.length, i = 0; i < t; i++)this._updateItemClasses(e[i], i) }, _updateItemClasses: function (t, i) { var n, r, s = this._selected, a = this.options.contentUrls, l = a && a[i], c = this.element[0]; t = e(t).addClass("k-item").attr("role", "menuitem"), o.support.browser.msie && t.css("list-style-position", "inside").css("list-style-position", ""), t.children("img").addClass(x), (r = t.children("a").addClass(_))[0] && (r.attr("href", l), r.children("img").addClass(x)), t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"), t.filter("li[disabled]").addClass("k-state-disabled").attr(j, !0).removeAttr("disabled"), t.children("div").addClass(A).attr("role", "region").attr($, !0).hide().parent().attr(G, !1), (r = t.children(O))[0] && (s && s.removeAttr(Y).children(O).removeClass(N), r.addClass(N), this._selected = t.attr(Y, !0)), t.children(b)[0] || (n = "<span class='" + _ + "'/>", a && a[i] && t[0].parentNode == c && (n = '<a class="k-link k-header" href="' + a[i] + '"/>'), t.contents().filter(function () { return !(this.nodeName.match(p) || 3 == this.nodeType && !e.trim(this.nodeValue)) }).wrapAll(n)), t.parent(".k-panelbar")[0] && t.children(b).addClass("k-header") }, _click: function (e) { var t, i, n, o, r, s, a, l, c, d = this, u = d.element; if (!e.parents("li." + H).length && e.closest(".k-widget")[0] == u[0]) { if (r = e.closest(b), s = r.closest(y), d._updateSelected(r), a = s.children(".k-group,.k-content"), l = this.dataItem(s), !a.length && (d.options.loadOnDemand && l && l.hasChildren || this._hasChildItems(s) || s.content || s.contentUrl) && (a = d._addGroupElement(s)), i = s.find(P).add(s.find(B)), n = r.attr(g), o = n && ("#" == n.charAt(n.length - 1) || -1 != n.indexOf("#" + d.element[0].id + "-")), t = !(!o && !i.length), i.data("animating")) return t; if (d._triggerEvent(D, s) && (t = !0), !1 !== t) return "single" == d.options.expandMode && d._collapseAllExpanded(s) ? t : (i.length && (c = i.is(K), d._triggerEvent(c ? I : T, s) || (t = d._toggleItem(s, c))), t) } }, _hasChildItems: function (e) { return e.items && e.items.length > 0 || e.hasChildren }, _toggleItem: function (e, i, n) { var o, r, s = this, a = e.find(P), l = e.find(b), c = l.attr(g), d = s.dataItem(e), u = d && d.loaded(); return d && !n ? (d.set("expanded", !i), o = d.hasChildren || !!d.content || !!d.contentUrl) : (!d || n && "true" !== n || u || d.content || d.contentUrl ? a.length ? (this._toggleGroup(a, i), o = !0) : (r = e.children("." + A)).length && (o = !0, r.is(":empty") && c !== t ? s._ajaxRequest(e, r, i) : s._toggleGroup(r, i)) : (s.options.loadOnDemand && this._progress(e, !0), e.children(".k-group,.k-content").remove(), o = d.hasChildren, d.load()), o) }, _toggleGroup: function (e, i) { var n = this, o = n.options.animation, r = o.expand, s = o.collapse && "effects" in o.collapse, l = a({}, o.expand, o.collapse); return s || (l = a(l, { reverse: !0 })), e.is(K) != i ? (n._animating = !1, t) : (e.parent().attr(G, !i).attr($, i).toggleClass(z, !i).find("> .k-link > .k-panelbar-collapse,> .k-link > .k-panelbar-expand").toggleClass("k-i-arrow-n", !i).toggleClass("k-panelbar-collapse", !i).toggleClass("k-i-arrow-s", i).toggleClass("k-panelbar-expand", i), i ? (r = a(l, { hide: !0 })).complete = function () { n._animationCallback() } : r = a({ complete: function (e) { n._triggerEvent(E, e.closest(y)), n._animationCallback() } }, r), e.kendoStop(!0, !0).kendoAnimate(r), t) }, _animationCallback: function () { this.trigger("complete"), this._animating = !1 }, _addGroupElement: function (t) { var i = e('<ul role="group" aria-hidden="true" class="k-group k-panel" style="display:none"></ul>'); return t.append(i), i }, _collapseAllExpanded: function (t) { var i, n = this, o = !1, r = t.find(P).add(t.find(B)); return r.is(K) && (o = !0), r.is(K) || 0 === r.length || ((i = t.siblings()).find(P).add(i.find(B)).filter(function () { return e(this).is(K) }).each(function (t, i) { i = e(i), (o = n._triggerEvent(I, i.closest(y))) || n._toggleGroup(i, !0) }), n.one("complete", function () { setTimeout(function () { i.each(function (e, t) { var i = n.dataItem(t); i && i.set("expanded", !1) }) }) })), o }, _ajaxRequest: function (t, i, n) { var o = this, r = t.find(".k-panelbar-collapse, .k-panelbar-expand"), s = t.find(b), a = setTimeout(function () { r.addClass("k-i-loading") }, 100), l = s.attr(g); e.ajax({ type: "GET", cache: !1, url: l, dataType: "html", data: {}, error: function (e, t) { r.removeClass("k-i-loading"), o.trigger(w, { xhr: e, status: t }) && this.complete() }, complete: function () { clearTimeout(a), r.removeClass("k-i-loading") }, success: function (e) { function r() { return { elements: i.get() } } try { o.angular("cleanup", r), i.html(e), o.angular("compile", r) } catch (e) { var s = window.console; s && s.error && s.error(e.name + ": " + e.message + " in " + l), this.error(this.xhr, "error") } o._toggleGroup(i, n), o.trigger(F, { item: t[0], contentElement: i[0] }) } }) }, _triggerEvent: function (e, t) { return this.trigger(e, { item: t[0] }) }, _updateSelected: function (e, t) { var i = this, n = i.element, o = e.parent(y), r = i._selected, s = i.dataItem(o); r && r.removeAttr(Y), i._selected = o.attr(Y, !0), n.find(q).removeClass(N), n.find("> ." + V + ", .k-panel > ." + V).removeClass(V), e.addClass(N), e.parentsUntil(n, y).filter(":has(.k-header)").addClass(V), i._current(o[0] ? o : null), s && s.set("selected", !0), t || i.trigger(S) }, _animations: function (e) { e && "animation" in e && !e.animation && (e.animation = { expand: { effects: {} }, collapse: { hide: !0, effects: {} } }) }, renderItem: function (e) { var t, i, n = this; return e = a({ panelBar: n, group: {} }, e), t = n.templates.empty, i = e.item, n.templates.item(a(e, { itemWrapper: n.templates.itemWrapper, renderContent: n.renderContent, arrow: n._hasChildItems(i) || i.content || i.contentUrl ? n.templates.arrow : t, subGroup: !e.loadOnDemand || i.expanded ? n.renderGroup : t }, X)) }, renderGroup: function (e) { var t = this.templates || e.panelBar.templates; return t.group(a({ renderItems: function (e) { for (var t = "", i = 0, n = e.items, o = n ? n.length : 0, r = a({ length: o }, e.group); i < o; i++)t += e.panelBar.renderItem(a(e, { group: r, item: a({ index: i }, n[i]) })); return t } }, e, X)) }, renderContent: function (e) { return e.panelBar.templates.content(a(e, X)) } }); o.ui.plugin(J) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.responsivepanel.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, t = e.proxy, i = ".kendoResponsivePanel", n = "open", o = "close", r = "click" + i + " touchstart" + i, s = kendo.ui.Widget, a = s.extend({ init: function (n, o) { s.fn.init.call(this, n, o), this._guid = "_" + kendo.guid(), this._toggleHandler = t(this._toggleButtonClick, this), this._closeHandler = t(this._close, this), e(document.documentElement).on(r, this.options.toggleButton, this._toggleHandler), this._registerBreakpoint(), this.element.addClass("k-rpanel k-rpanel-" + this.options.orientation + " " + this._guid), this._resizeHandler = t(this.resize, this, !0), e(window).on("resize" + i, this._resizeHandler) }, _mediaQuery: "@media (max-width: #= breakpoint-1 #px) {.#= guid #.k-rpanel-animate.k-rpanel-left,.#= guid #.k-rpanel-animate.k-rpanel-right {-webkit-transition: -webkit-transform .2s ease-out;-ms-transition: -ms-transform .2s ease-out;transition: transform .2s ease-out;} .#= guid #.k-rpanel-top {overflow: hidden;}.#= guid #.k-rpanel-animate.k-rpanel-top {-webkit-transition: max-height .2s linear;-ms-transition: max-height .2s linear;transition: max-height .2s linear;}} @media (min-width: #= breakpoint #px) {#= toggleButton # { display: none; } .#= guid #.k-rpanel-left { float: left; } .#= guid #.k-rpanel-right { float: right; } .#= guid #.k-rpanel-left, .#= guid #.k-rpanel-right {position: relative;-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);-webkit-transform: translateX(0) translateZ(0);-ms-transform: translateX(0) translateZ(0);transform: translateX(0) translateZ(0);} .k-ie9 .#= guid #.k-rpanel-left { left: 0; } .#= guid #.k-rpanel-top { max-height: none; }}", _registerBreakpoint: function () { var e = this.options; this._registerStyle(kendo.template(this._mediaQuery)({ breakpoint: e.breakpoint, toggleButton: e.toggleButton, guid: this._guid })) }, _registerStyle: function (t) { var i = e("head,body")[0], n = document.createElement("style"); i.appendChild(n), n.styleSheet ? n.styleSheet.cssText = t : n.appendChild(document.createTextNode(t)) }, options: { name: "ResponsivePanel", orientation: "left", toggleButton: ".k-rpanel-toggle", breakpoint: 640, autoClose: !0 }, events: [n, o], _resize: function () { this.element.removeClass("k-rpanel-animate k-rpanel-expanded"), e(document.documentElement).off(r, this._closeHandler) }, _toggleButtonClick: function (e) { e.preventDefault(), this.element.hasClass("k-rpanel-expanded") ? this.close() : this.open() }, open: function () { this.trigger(n) || (this.element.addClass("k-rpanel-animate k-rpanel-expanded"), this.options.autoClose && e(document.documentElement).on(r, this._closeHandler)) }, close: function () { this.trigger(o) || (this.element.addClass("k-rpanel-animate").removeClass("k-rpanel-expanded"), e(document.documentElement).off(r, this._closeHandler)) }, _close: function (t) { var i = t.isDefaultPrevented(), n = e(t.target).closest(this.options.toggleButton + ",.k-rpanel"); n.length || i || this.close() }, destroy: function () { s.fn.destroy.call(this), e(window).off("resize" + i, this._resizeHandler), e(document.documentElement).off(r, this._closeHandler) } }), kendo.ui.plugin(a), window.kendo; var e, t, i, n, o, r, s, a }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.timepicker.min", ["kendo.popup.min"], function () { return function (e, t) { function i(e, t, i) { var n, o = e.getTimezoneOffset(); e.setTime(e.getTime() + t), i || (n = e.getTimezoneOffset() - o, e.setTime(e.getTime() + n * M)) } function n(e) { return 60 * e.getHours() * M + e.getMinutes() * M + 1e3 * e.getSeconds() + e.getMilliseconds() } function o(e, t, i) { var o, r = n(t), s = n(i); return !e || r == s || (o = n(e), r > o && (o += R), s < r && (s += R), o >= r && o <= s) } function r(e) { var t = e.parseFormats; e.format = f(e.format || c.getCulture(e.culture).calendars.standard.patterns.t), (t = V(t) ? t : [t]).splice(0, 0, e.format), e.parseFormats = t } function s(e) { e.preventDefault() } var a, l, c = window.kendo, d = c.keys, u = c.parseDate, h = c._activeElement, f = c._extractFormat, p = c.support, m = p.browser, g = c.ui, v = g.Widget, _ = "open", b = "close", w = "change", y = ".kendoTimePicker", k = "click" + y, x = "k-state-default", C = "disabled", S = "readonly", T = "li", D = "<span/>", A = "k-state-focused", E = "k-state-hover", I = "mousedown" + y, M = 6e4, R = 864e5, F = "k-state-selected", z = "k-state-disabled", P = "aria-selected", B = "aria-expanded", L = "aria-hidden", H = "aria-disabled", N = "aria-activedescendant", O = "id", V = e.isArray, U = e.extend, W = e.proxy, q = Date, j = new q; j = new q(j.getFullYear(), j.getMonth(), j.getDate(), 0, 0, 0), (a = function (t) { var i = this, n = t.id; i.options = t, i._dates = [], i.ul = e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({ overflow: p.kineticScrollNeeded ? "" : "auto" }).on(k, T, W(i._click, i)).on("mouseenter" + y, T, function () { e(this).addClass(E) }).on("mouseleave" + y, T, function () { e(this).removeClass(E) }), i.list = e("<div class='k-list-container k-list-scroller' unselectable='on'/>").append(i.ul).on(I, s), n && (i._timeViewID = n + "_timeview", i._optionID = n + "_option_selected", i.ul.attr(O, i._timeViewID)), i._popup(), i._heightHandler = W(i._height, i), i.template = c.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>', { useWithBlock: !1 }) }).prototype = { current: function (i) { var n = this, o = n.options.active; return i === t ? n._current : (n._current && n._current.removeClass(F).removeAttr(P).removeAttr(O), i && (i = e(i).addClass(F).attr(O, n._optionID).attr(P, !0), n.scroll(i[0])), n._current = i, o && o(i), t) }, close: function () { this.popup.close() }, destroy: function () { var e = this; e.ul.off(y), e.list.off(y), e.popup.destroy() }, open: function () { var e = this; e.ul[0].firstChild || e.bind(), e.popup.open(), e._current && e.scroll(e._current[0]) }, dataBind: function (e) { for (var t, i = this, n = i.options, r = n.format, s = c.toString, a = i.template, l = e.length, d = 0, u = ""; d < l; d++)o(t = e[d], n.min, n.max) && (u += a(s(t, r, n.culture))); i._html(u) }, refresh: function () { var e, t, o, r = this, s = r.options, a = s.format, l = function () { var e = new q, t = new q(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0), i = new q(e.getFullYear(), e.getMonth(), e.getDate(), 12, 0, 0); return -1 * (t.getTimezoneOffset() - i.getTimezoneOffset()) }(), d = l < 0, u = s.min, h = s.max, f = n(u), p = n(h), m = s.interval * M, g = c.toString, v = r.template, _ = new q(+u), b = _.getDate(), w = 0, y = ""; for (o = d ? (R + l * M) / m : R / m, f != p && (f > p && (p += R), o = (p - f) / m + 1), t = parseInt(o, 10); w < o; w++)w && i(_, m, d), p && t == w && (e = n(_), b < _.getDate() && (e += R), e > p && (_ = new q(+h))), r._dates.push(n(_)), y += v(g(_, a, s.culture)); r._html(y) }, bind: function () { var e = this, t = e.options.dates; t && t[0] ? e.dataBind(t) : e.refresh() }, _html: function (e) { var t = this; t.ul[0].innerHTML = e, t.popup.unbind(_, t._heightHandler), t.popup.one(_, t._heightHandler), t.current(null), t.select(t._value) }, scroll: function (e) { if (e) { var t = this.list[0], i = e.offsetTop, n = e.offsetHeight, o = t.scrollTop, r = t.clientHeight, s = i + n; o > i ? o = i : s > o + r && (o = s - r), t.scrollTop = o } }, select: function (t) { var i, n = this, o = n.options, r = n._current; t instanceof Date && (t = c.toString(t, o.format, o.culture)), "string" == typeof t && (r && r.text() === t ? t = r : t = (t = e.grep(n.ul[0].childNodes, function (e) { return (e.textContent || e.innerText) == t }))[0] ? t : null), i = n._distinctSelection(t), n.current(i) }, _distinctSelection: function (t) { var i, o, r = this; return t && t.length > 1 && (i = n(r._value), o = e.inArray(i, r._dates), t = r.ul.children()[o]), t }, setOptions: function (e) { var t = this.options; e.min = u(e.min), e.max = u(e.max), this.options = U(t, e, { active: t.active, change: t.change, close: t.close, open: t.open }), this.bind() }, toggle: function () { var e = this; e.popup.visible() ? e.close() : e.open() }, value: function (e) { var t = this; t._value = e, t.ul[0].firstChild && t.select(e) }, _click: function (t) { var i = this, n = e(t.currentTarget), o = n.text(), r = i.options.dates; r && r.length > 0 && (o = r[n.index()]), t.isDefaultPrevented() || (i.select(n), i.options.change(o, !0), i.close()) }, _height: function () { var e = this, t = e.list, i = t.parent(".k-animation-container"), n = e.options.height; e.ul[0].children.length && t.add(i).show().height(e.ul[0].scrollHeight > n ? n : "auto").hide() }, _parse: function (e) { var t = this.options, i = this._value || j; return e instanceof q ? e : ((e = u(e, t.parseFormats, t.culture)) && (e = new q(i.getFullYear(), i.getMonth(), i.getDate(), e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds())), e) }, _adjustListWidth: function () { var e, t, i = this.list, n = i[0].style.width, o = this.options.anchor, r = c._outerWidth; !i.data("width") && n || (e = window.getComputedStyle ? window.getComputedStyle(o[0], null) : 0, t = e ? parseFloat(e.width) : r(o), e && (m.mozilla || m.msie) && (t += parseFloat(e.paddingLeft) + parseFloat(e.paddingRight) + parseFloat(e.borderLeftWidth) + parseFloat(e.borderRightWidth)), n = t - (r(i) - i.width()), i.css({ fontFamily: o.css("font-family"), width: n }).data("width", n)) }, _popup: function () { var e = this, t = e.list, i = e.options, n = i.anchor; e.popup = new g.Popup(t, U(i.popup, { anchor: n, open: i.open, close: i.close, animation: i.animation, isRtl: p.isRtl(i.anchor) })) }, move: function (e) { var i = this, n = e.keyCode, o = i.ul[0], r = i._current, s = n === d.DOWN; if (n === d.UP || s) { if (e.altKey) return i.toggle(s), t; (r = s ? r ? r[0].nextSibling : o.firstChild : r ? r[0].previousSibling : o.lastChild) && i.select(r), i.options.change(i._current.text()), e.preventDefault() } else n !== d.ENTER && n !== d.TAB && n !== d.ESC || (e.preventDefault(), r && i.options.change(r.text(), !0), i.close()) } }, a.getMilliseconds = n, c.TimeView = a, l = v.extend({ init: function (t, i) { var n, o, s = this; v.fn.init.call(s, t, i), t = s.element, (i = s.options).min = u(t.attr("min")) || u(i.min), i.max = u(t.attr("max")) || u(i.max), r(i), s._initialOptions = U({}, i), s._wrapper(), s.timeView = o = new a(U({}, i, { id: t.attr(O), anchor: s.wrapper, format: i.format, change: function (e, i) { i ? s._change(e) : t.val(e) }, open: function (e) { s.timeView._adjustListWidth(), s.trigger(_) ? e.preventDefault() : (t.attr(B, !0), n.attr(L, !1)) }, close: function (e) { s.trigger(b) ? e.preventDefault() : (t.attr(B, !1), n.attr(L, !0)) }, active: function (e) { t.removeAttr(N), e && t.attr(N, o._optionID) } })), n = o.ul, s._icon(), s._reset(); try { t[0].setAttribute("type", "text") } catch (e) { t[0].type = "text" } t.addClass("k-input").attr({ role: "combobox", "aria-expanded": !1, "aria-owns": o._timeViewID }), t.is("[disabled]") || e(s.element).parents("fieldset").is(":disabled") ? s.enable(!1) : s.readonly(t.is("[readonly]")), i.dateInput && (s._dateInput = new g.DateInput(t, { culture: i.culture, format: i.format, min: i.min, max: i.max, value: i.value })), s._old = s._update(i.value || s.element.val()), s._oldText = t.val(), c.notify(s) }, options: { name: "TimePicker", min: j, max: j, format: "", dates: [], parseFormats: [], value: null, interval: 30, height: 200, animation: {} }, events: [_, b, w], setOptions: function (e) { var t = this, i = t._value; v.fn.setOptions.call(t, e), r(e = t.options), t.timeView.setOptions(e), i && t.element.val(c.toString(i, e.format, e.culture)) }, dataBind: function (e) { V(e) && this.timeView.dataBind(e) }, _editable: function (e) { var t = this, i = e.disable, n = e.readonly, o = t._arrow.off(y), r = t.element.off(y), a = t._inputWrapper.off(y); n || i ? (a.addClass(i ? z : x).removeClass(i ? x : z), r.attr(C, i).attr(S, n).attr(H, i)) : (a.addClass(x).removeClass(z).on("mouseenter.kendoTimePicker mouseleave.kendoTimePicker", t._toggleHover), r.removeAttr(C).removeAttr(S).attr(H, !1).on("keydown" + y, W(t._keydown, t)).on("focusout" + y, W(t._blur, t)).on("focus" + y, function () { t._inputWrapper.addClass(A) }), o.on(k, W(t._click, t)).on(I, s)) }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, destroy: function () { var e = this; v.fn.destroy.call(e), e.timeView.destroy(), e.element.off(y), e._arrow.off(y), e._inputWrapper.off(y), e._form && e._form.off("reset", e._resetHandler) }, close: function () { this.timeView.close() }, open: function () { this.timeView.open() }, min: function (e) { return this._option("min", e) }, max: function (e) { return this._option("max", e) }, value: function (e) { var i = this; return e === t ? i._value : (i._old = i._update(e), null === i._old && i.element.val(""), i._oldText = i.element.val(), t) }, _blur: function () { var e = this, t = e.element.val(); e.close(), t !== e._oldText && e._change(t), e._inputWrapper.removeClass(A) }, _click: function () { var e = this.element; this.timeView.toggle(), p.touch || e[0] === h() || e.focus() }, _change: function (e) { var t = this; e = t._update(e), +t._old != +e && (t._old = e, t._oldText = t.element.val(), t._typing || t.element.trigger(w), t.trigger(w)), t._typing = !1 }, _icon: function () { var t, i = this, n = i.element; (t = n.next("span.k-select"))[0] || (t = e('<span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-clock"></span></span>').insertAfter(n)), i._arrow = t.attr({ role: "button", "aria-controls": i.timeView._timeViewID }) }, _keydown: function (e) { var t = this, i = e.keyCode, n = t.timeView, o = t.element.val(); n.popup.visible() || e.altKey ? (n.move(e), t._dateInput && e.stopImmediatePropagation && e.stopImmediatePropagation()) : i === d.ENTER && o !== t._oldText ? t._change(o) : t._typing = !0 }, _option: function (e, i) { var n = this, o = n.options; return i === t ? o[e] : ((i = n.timeView._parse(i)) && (i = new q(+i), o[e] = i, n.timeView.options[e] = i, n.timeView.bind()), t) }, _toggleHover: function (t) { e(t.currentTarget).toggleClass(E, "mouseenter" === t.type) }, _update: function (e) { var t = this, i = t.options, n = t.timeView, r = n._parse(e); return o(r, i.min, i.max) || (r = null), t._value = r, t._dateInput ? t._dateInput.value(r || e) : t.element.val(c.toString(r || e, i.format, i.culture)), n.value(r), r }, _wrapper: function () { var t, i = this, n = i.element; (t = n.parents(".k-timepicker"))[0] || (t = (t = n.wrap(D).parent().addClass("k-picker-wrap k-state-default")).wrap(D).parent()), t[0].style.cssText = n[0].style.cssText, i.wrapper = t.addClass("k-widget k-timepicker k-header").addClass(n[0].className), n.css({ width: "100%", height: n[0].style.height }), i._inputWrapper = e(t[0].firstChild) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { t.value(i[0].defaultValue), t.max(t._initialOptions.max), t.min(t._initialOptions.min) }, t._form = o.on("reset", t._resetHandler)) } }), g.plugin(l) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.datetimepicker.min", ["kendo.datepicker.min", "kendo.timepicker.min"], function () { return function (e, t) { function i(e) { var t = new Date(2100, 0, 1); return t.setMinutes(-e), t } function n(e) { e.preventDefault() } function o(t) { var i, n = r.getCulture(t.culture).calendars.standard.patterns, o = !t.parseFormats.length; t.format = c(t.format || n.g), t.timeFormat = i = c(t.timeFormat || n.t), r.DateView.normalize(t), o && t.parseFormats.unshift("yyyy-MM-ddTHH:mm:ss"), -1 === e.inArray(i, t.parseFormats) && t.parseFormats.push(i) } var r = window.kendo, s = r.TimeView, a = r.parseDate, l = r._activeElement, c = r._extractFormat, d = r.calendar, u = d.isInRange, h = d.restrictValue, f = d.isEqualDatePart, p = s.getMilliseconds, m = r.ui, g = m.Widget, v = "open", _ = "close", b = "change", w = ".kendoDateTimePicker", y = "click" + w, k = "disabled", x = "readonly", C = "k-state-default", S = "k-state-focused", T = "k-state-disabled", D = "mousedown" + w, A = "month", E = "<span/>", I = "aria-activedescendant", M = "aria-expanded", R = "aria-hidden", F = "aria-owns", z = "aria-disabled", P = Date, B = new P(1800, 0, 1), L = new P(2099, 11, 31), H = { view: "date" }, N = { view: "time" }, O = e.extend, V = g.extend({ init: function (t, i) { var n = this; g.fn.init.call(n, t, i), t = n.element, (i = n.options).disableDates = r.calendar.disabled(i.disableDates), i.min = a(t.attr("min")) || a(i.min), i.max = a(t.attr("max")) || a(i.max), o(i), n._initialOptions = O({}, i), n._wrapper(), n._views(), n._icons(), n._reset(), n._template(); try { t[0].setAttribute("type", "text") } catch (e) { t[0].type = "text" } t.addClass("k-input").attr({ role: "combobox", "aria-expanded": !1 }), n._midnight = n._calculateMidnight(i.min, i.max), t.is("[disabled]") || e(n.element).parents("fieldset").is(":disabled") ? n.enable(!1) : n.readonly(t.is("[readonly]")), i.dateInput && (n._dateInput = new m.DateInput(t, { culture: i.culture, format: i.format, min: i.min, max: i.max, value: i.value })), n._old = n._update(i.value || n.element.val()), n._oldText = t.val(), r.notify(n) }, options: { name: "DateTimePicker", value: null, format: "", timeFormat: "", culture: "", parseFormats: [], dates: [], min: new P(B), max: new P(L), interval: 30, height: 200, footer: "", start: A, depth: A, animation: {}, month: {}, ARIATemplate: 'Current focused date is #=kendo.toString(data.current, "d")#', dateButtonText: "Open the date view", timeButtonText: "Open the time view" }, events: [v, _, b], setOptions: function (e) { var t, i, n, s = this, l = s._value; g.fn.setOptions.call(s, e), (e = s.options).min = t = a(e.min), e.max = i = a(e.max), o(e), s._midnight = s._calculateMidnight(e.min, e.max), n = e.value || s._value || s.dateView._current, t && !f(t, n) && (t = new P(B)), i && !f(i, n) && (i = new P(L)), s.dateView.setOptions(e), s.timeView.setOptions(O({}, e, { format: e.timeFormat, min: t, max: i })), l && (s.element.val(r.toString(l, e.format, e.culture)), s._updateARIA(l)) }, _editable: function (t) { var i = this, o = i.element.off(w), s = i._dateIcon.off(w), a = i._timeIcon.off(w), c = i._inputWrapper.off(w), d = t.readonly, u = t.disable; d || u ? (c.addClass(u ? T : C).removeClass(u ? C : T), o.attr(k, u).attr(x, d).attr(z, u)) : (c.addClass(C).removeClass(T).on("mouseenter.kendoDateTimePicker mouseleave.kendoDateTimePicker", i._toggleHover), o.removeAttr(k).removeAttr(x).attr(z, !1).on("keydown" + w, e.proxy(i._keydown, i)).on("focus" + w, function () { i._inputWrapper.addClass(S) }).on("focusout" + w, function () { i._inputWrapper.removeClass(S), o.val() !== i._oldText && i._change(o.val()), i.close("date"), i.close("time") }), s.on(D, n).on(y, function () { i.toggle("date"), r.support.touch || o[0] === l() || o.focus() }), a.on(D, n).on(y, function () { i.toggle("time"), r.support.touch || o[0] === l() || o.focus() })) }, readonly: function (e) { this._editable({ readonly: e === t || e, disable: !1 }) }, enable: function (e) { this._editable({ readonly: !1, disable: !(e = e === t || e) }) }, destroy: function () { var e = this; g.fn.destroy.call(e), e.dateView.destroy(), e.timeView.destroy(), e.element.off(w), e._dateIcon.off(w), e._timeIcon.off(w), e._inputWrapper.off(w), e._form && e._form.off("reset", e._resetHandler) }, close: function (e) { "time" !== e && (e = "date"), this[e + "View"].close() }, open: function (e) { "time" !== e && (e = "date"), this[e + "View"].open() }, min: function (e) { return this._option("min", e) }, max: function (e) { return this._option("max", e) }, toggle: function (e) { var t = "timeView"; "time" !== e ? e = "date" : t = "dateView", this[e + "View"].toggle(), this[t].close() }, value: function (e) { var i = this; return e === t ? i._value : (i._old = i._update(e), null === i._old && i.element.val(""), i._oldText = i.element.val(), t) }, _change: function (e) { var t, i, n, o = this, r = o.element.val(); e = o._update(e), t = +o._old != +e, i = t && !o._typing, n = r !== o.element.val(), (i || n) && o.element.trigger(b), t && (o._old = e, o._oldText = o.element.val(), o.trigger(b)), o._typing = !1 }, _option: function (e, n) { var o, r, s = this, l = s.options, c = s.timeView, d = c.options, u = s._value || s._old; if (n === t) return l[e]; if (n = a(n, l.parseFormats, l.culture)) { if (l.min.getTime() === l.max.getTime() && (d.dates = []), l[e] = new P(n.getTime()), s.dateView[e](n), s._midnight = s._calculateMidnight(l.min, l.max), u && (o = f(l.min, u), r = f(l.max, u)), o || r) { if (d[e] = n, o && !r && (d.max = i(l.interval)), r) { if (s._midnight) return c.dataBind([L]), t; o || (d.min = B) } } else d.max = L, d.min = B; c.bind() } }, _toggleHover: function (t) { e(t.currentTarget).toggleClass("k-state-hover", "mouseenter" === t.type) }, _update: function (t) { var n, o, s, l, c, d = this, p = d.options, m = p.min, g = p.max, v = p.dates, _ = d.timeView, w = d._value, y = a(t, p.parseFormats, p.culture), k = null === y && null === w || y instanceof Date && w instanceof Date; return p.disableDates && p.disableDates(y) && (y = null, d._old || d.element.val() || (t = null)), +y == +w && k ? ((c = r.toString(y, p.format, p.culture)) !== t && (d.element.val(null === y ? t : c), t instanceof String && d.element.trigger(b)), y) : (null !== y && f(y, m) ? y = h(y, m, g) : u(y, m, g) || (y = null), d._value = y, _.value(y), d.dateView.value(y), y && (s = d._old, o = _.options, v[0] && ((v = e.grep(v, function (e) { return f(y, e) }))[0] && (_.dataBind(v), l = !0)), l || (f(y, m) && (o.min = m, o.max = i(p.interval), n = !0), f(y, g) && (d._midnight ? (_.dataBind([L]), l = !0) : (o.max = g, n || (o.min = B), n = !0))), !l && (!s && n || s && !f(s, y)) && (n || (o.max = L, o.min = B), _.bind())), d._dateInput ? d._dateInput.value(y || t) : d.element.val(r.toString(y || t, p.format, p.culture)), d._updateARIA(y), y) }, _keydown: function (e) { var t = this, i = t.dateView, n = t.timeView, o = t.element.val(), s = i.popup.visible(), a = t._dateInput && e.stopImmediatePropagation; e.altKey && e.keyCode === r.keys.DOWN ? t.toggle(s ? "time" : "date") : s ? (i.move(e), t._updateARIA(i._current)) : n.popup.visible() ? n.move(e) : e.keyCode === r.keys.ENTER && o !== t._oldText ? t._change(o) : (t._typing = !0, a = !1), a && e.stopImmediatePropagation() }, _views: function () { var e, t, i, n, o, l, c = this, d = c.element, h = c.options, f = d.attr("id"); c.dateView = e = new r.DateView(O({}, h, { id: f, anchor: c.wrapper, change: function () { var t, i, n = e.calendar.value(), o = +n, s = +h.min, a = +h.max; o !== s && o !== a || (t = o === s ? s : a, (t = new P(c._value || t)).setFullYear(n.getFullYear(), n.getMonth(), n.getDate()), u(t, s, a) && (n = t)), c._value && (i = r.date.setHours(new Date(n), c._value), u(i, s, a) && (n = i)), c._change(n), c.close("date") }, close: function (e) { c.trigger(_, H) ? e.preventDefault() : (d.attr(M, !1), i.attr(R, !0), t.popup.visible() || d.removeAttr(F)) }, open: function (t) { c.trigger(v, H) ? t.preventDefault() : (d.val() !== c._oldText && (l = a(d.val(), h.parseFormats, h.culture), c.dateView[l ? "current" : "value"](l)), i.attr(R, !1), d.attr(M, !0).attr(F, e._dateViewID), c._updateARIA(l)) } })), i = e.div, o = h.min.getTime(), c.timeView = t = new s({ id: f, value: h.value, anchor: c.wrapper, animation: h.animation, format: h.timeFormat, culture: h.culture, height: h.height, interval: h.interval, min: new P(B), max: new P(L), dates: o === h.max.getTime() ? [new Date(o)] : [], parseFormats: h.parseFormats, change: function (i, n) { (i = t._parse(i)) < h.min ? (i = new P(+h.min), t.options.min = i) : i > h.max && (i = new P(+h.max), t.options.max = i), n ? (c._timeSelected = !0, c._change(i)) : (d.val(r.toString(i, h.format, h.culture)), e.value(i), c._updateARIA(i)) }, close: function (t) { c.trigger(_, N) ? t.preventDefault() : (n.attr(R, !0), d.attr(M, !1), e.popup.visible() || d.removeAttr(F)) }, open: function (e) { t._adjustListWidth(), c.trigger(v, N) ? e.preventDefault() : (d.val() !== c._oldText && (l = a(d.val(), h.parseFormats, h.culture), c.timeView.value(l)), n.attr(R, !1), d.attr(M, !0).attr(F, t._timeViewID), t.options.active(t.current())) }, active: function (e) { d.removeAttr(I), e && d.attr(I, t._optionID) } }), n = t.ul }, _icons: function () { var t = this, i = t.element, n = t.options, o = i.next("span.k-select"); o[0] || (o = e('<span unselectable="on" class="k-select"><span class="k-link k-link-date" aria-label="' + n.dateButtonText + '"><span unselectable="on" class="k-icon k-i-calendar"></span></span><span class="k-link k-link-time" aria-label="' + n.timeButtonText + '"><span unselectable="on" class="k-icon k-i-clock"></span></span></span>').insertAfter(i)), o = (o = o.children()).children(), t._dateIcon = o.eq(0).attr("aria-controls", t.dateView._dateViewID), t._timeIcon = o.eq(1).attr("aria-controls", t.timeView._timeViewID) }, _wrapper: function () { var t, i = this, n = i.element; (t = n.parents(".k-datetimepicker"))[0] || (t = (t = n.wrap(E).parent().addClass("k-picker-wrap k-state-default")).wrap(E).parent()), t[0].style.cssText = n[0].style.cssText, n.css({ width: "100%", height: n[0].style.height }), i.wrapper = t.addClass("k-widget k-datetimepicker k-header").addClass(n[0].className), i._inputWrapper = e(t[0].firstChild) }, _reset: function () { var t = this, i = t.element, n = i.attr("form"), o = n ? e("#" + n) : i.closest("form"); o[0] && (t._resetHandler = function () { t.value(i[0].defaultValue), t.max(t._initialOptions.max), t.min(t._initialOptions.min) }, t._form = o.on("reset", t._resetHandler)) }, _template: function () { this._ariaTemplate = r.template(this.options.ARIATemplate) }, _calculateMidnight: function (e, t) { return p(e) + p(t) === 0 }, _updateARIA: function (e) { var t, i = this, n = i.dateView.calendar; i.element.removeAttr(I), n && ((t = n._cell).attr("aria-label", i._ariaTemplate({ current: e || n.current() })), i.element.attr(I, t.attr("id"))) } }); m.plugin(V) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.splitter.min", ["kendo.resizable.min"], function () { return function (e, t) { function i(e) { return v.test(e) } function n(e) { return g.test(e) || /^\d+$/.test(e) } function o(e) { return !i(e) && !n(e) } function r(e, t) { var n = parseInt(e, 10); return i(e) && (n = Math.floor(n * t / 100)), n } function s(e, i) { return function (n, o) { var r = this.element.find(n).data(D); return 1 == arguments.length ? r[e] : (r[e] = o, i && this.element.data("kendo" + this.options.name).resize(!0), t) } } function a(e) { var t = this, i = e.orientation; t.owner = e, t._element = e.element, t.orientation = i, f(t, i === C ? c : l), t._resizable = new d.ui.Resizable(e.element, { orientation: i, handle: ".k-splitbar-draggable-" + i + "[data-marker=" + e._marker + "]", hint: p(t._createHint, t), start: p(t._start, t), max: p(t._max, t), min: p(t._min, t), invalidClass: "k-restricted-size-" + i, resizeend: p(t._stop, t) }) } var l, c, d = window.kendo, u = d.ui, h = d.keys, f = e.extend, p = e.proxy, m = u.Widget, g = /^\d+(\.\d+)?px$/i, v = /^\d+(\.\d+)?%$/i, _ = ".kendoSplitter", b = "expand", w = "collapse", y = "contentLoad", k = "error", x = "layoutChange", C = "horizontal", S = "vertical", T = "click", D = "pane", A = "k-state-focused", E = "k-" + D, I = "." + E, M = m.extend({ init: function (e, t) { var i, n = this; m.fn.init.call(n, e, t), n.wrapper = n.element, i = n.options.orientation.toLowerCase() != S, n.orientation = i ? C : S, n._dimension = i ? "width" : "height", n._keys = { decrease: i ? h.LEFT : h.UP, increase: i ? h.RIGHT : h.DOWN }, n._resizeStep = 10, n._marker = d.guid().substring(0, 8), n._initPanes(), n.resizing = new a(n), n.element.triggerHandler("init" + _) }, events: [b, w, y, k, "resize", x], _addOverlays: function () { this._panes().append("<div class='k-splitter-overlay k-overlay' />") }, _removeOverlays: function () { this._panes().children(".k-splitter-overlay").remove() }, _attachEvents: function () { var t = this, i = t.options.orientation; t.element.children(".k-splitbar-draggable-" + i).on("keydown" + _, p(t._keydown, t)).on("mousedown" + _, function (e) { e.currentTarget.focus() }).on("focus" + _, function (t) { e(t.currentTarget).addClass(A) }).on("blur" + _, function (i) { e(i.currentTarget).removeClass(A), t.resizing && t.resizing.end() }).on("mouseenter" + _, function () { e(this).addClass("k-splitbar-" + t.orientation + "-hover") }).on("mouseleave" + _, function () { e(this).removeClass("k-splitbar-" + t.orientation + "-hover") }).on("mousedown" + _, p(t._addOverlays, t)).end().children(".k-splitbar").on("dblclick" + _, p(t._togglePane, t)).children(".k-collapse-next, .k-collapse-prev").on(T + _, t._arrowClick(w)).end().children(".k-expand-next, .k-expand-prev").on(T + _, t._arrowClick(b)).end().end(), e(window).on("resize" + _ + t._marker, p(t.resize, t, !1)), e(document).on("mouseup" + _ + t._marker, p(t._removeOverlays, t)) }, _detachEvents: function () { var t = this; t.element.children(".k-splitbar-draggable-" + t.orientation).off(_).end().children(".k-splitbar").off("dblclick" + _).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_), e(window).off(_ + t._marker), e(document).off(_ + t._marker) }, options: { name: "Splitter", orientation: C, panes: [] }, destroy: function () { m.fn.destroy.call(this), this._detachEvents(), this.resizing && this.resizing.destroy(), d.destroy(this.element), this.wrapper = this.element = null }, _keydown: function (t) { var i, n = this, o = t.keyCode, r = n.resizing, s = e(t.currentTarget), a = n._keys, l = o === a.increase, c = o === a.decrease; l || c ? (t.ctrlKey ? (i = s[c ? "next" : "prev"](), r && r.isResizing() && r.end(), i[n._dimension]() ? n._triggerAction(w, s[c ? "prev" : "next"]()) : n._triggerAction(b, i)) : r && r.move((c ? -1 : 1) * n._resizeStep, s), t.preventDefault()) : o === h.ENTER && r && (r.end(), t.preventDefault()) }, _initPanes: function () { var e = this.options.panes || [], t = this; this.element.addClass("k-widget").addClass("k-splitter").children().each(function (i, n) { "script" != n.nodeName.toLowerCase() && t._initPane(n, e[i]) }), this.resize() }, _initPane: function (t, i) { (t = e(t).attr("role", "group").addClass(E)).data(D, i || {}).toggleClass("k-scrollable", !i || !1 !== i.scrollable), this.ajaxRequest(t) }, ajaxRequest: function (e, t, i) { var n, o = this; e = o.element.find(e), n = e.data(D), (t = t || n.contentUrl) && (e.append("<span class='k-icon k-i-loading k-pane-loading' />"), d.isLocalUrl(t) ? jQuery.ajax({ url: t, data: i || {}, type: "GET", dataType: "html", success: function (t) { o.angular("cleanup", function () { return { elements: e.get() } }), e.html(t), o.angular("compile", function () { return { elements: e.get() } }), o.trigger(y, { pane: e[0] }) }, error: function (t, i) { o.trigger(k, { pane: e[0], status: i, xhr: t }) } }) : e.removeClass("k-scrollable").html("<iframe src='" + t + "' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>")) }, _triggerAction: function (e, t) { this.trigger(e, { pane: t[0] }) || this[e](t[0]) }, _togglePane: function (t) { var i, n = this, o = e(t.target); o.closest(".k-splitter")[0] == n.element[0] && (1 === (i = o.children(".k-icon:not(.k-resize-handle)")).length && (i.is(".k-collapse-prev") ? n._triggerAction(w, o.prev()) : i.is(".k-collapse-next") ? n._triggerAction(w, o.next()) : i.is(".k-expand-prev") ? n._triggerAction(b, o.prev()) : i.is(".k-expand-next") && n._triggerAction(b, o.next()))) }, _arrowClick: function (t) { var i = this; return function (n) { var o, r = e(n.target); r.closest(".k-splitter")[0] == i.element[0] && (o = r.is(".k-" + t + "-prev") ? r.parent().prev() : r.parent().next(), i._triggerAction(t, o)) } }, _updateSplitBar: function (e, t, i) { var n = function (e, t) { return t ? "<div class='k-icon " + e + "' />" : "" }, o = this.orientation, r = !1 !== t.resizable && !1 !== i.resizable, s = t.collapsible, a = t.collapsed, l = i.collapsible, c = i.collapsed; e.addClass("k-splitbar k-state-default k-splitbar-" + o).attr("role", "separator").attr("aria-expanded", !(a || c)).removeClass("k-splitbar-" + o + "-hover").toggleClass("k-splitbar-draggable-" + o, r && !a && !c).toggleClass("k-splitbar-static-" + o, !r && !s && !l).html(n("k-collapse-prev k-i-arrow-60-up", s && !a && !c && o == S) + n("k-collapse-prev k-i-arrow-60-left", s && !a && !c && o == C) + n("k-expand-prev k-i-arrow-60-down", s && a && !c && o == S) + n("k-expand-prev k-i-arrow-60-right", s && a && !c && o == C) + n("k-resize-handle k-i-hbar", r && o == S) + n("k-resize-handle k-i-vbar", r && o == C) + n("k-collapse-next k-i-arrow-60-down", l && !c && !a && o == S) + n("k-collapse-next k-i-arrow-60-right", l && !c && !a && o == C) + n("k-expand-next k-i-arrow-60-up", l && c && !a && o == S) + n("k-expand-next k-i-arrow-60-left", l && c && !a && o == C)), r || s || l || e.removeAttr("tabindex") }, _updateSplitBars: function () { var t = this; this.element.children(".k-splitbar").each(function () { var i = e(this), n = i.prevAll(I).first().data(D), o = i.nextAll(I).first().data(D); o && t._updateSplitBar(i, n, o) }) }, _removeSplitBars: function () { this.element.children(".k-splitbar").remove() }, _panes: function () { return this.element ? this.element.children(I) : e() }, _resize: function () { var i, n, s, a, l, c, u, h, f, p = this, m = p.element, g = m.children(I), v = p.orientation == C, _ = m.children(".k-splitbar"), b = _.length, w = v ? "width" : "height", y = m[w](); p.wrapper.addClass("k-splitter-resizing"), 0 === b ? (b = g.length - 1, g.slice(0, b).after("<div tabindex='0' class='k-splitbar' data-marker='" + p._marker + "' />"), p._updateSplitBars(), _ = m.children(".k-splitbar")) : p._updateSplitBars(), _.each(function () { y -= this[v ? "offsetWidth" : "offsetHeight"] }), i = 0, n = e(), g.css({ position: "absolute", top: 0 })[w](function () { var s, a = e(this), l = a.data(D) || {}; if (a.removeClass("k-state-collapsed"), l.collapsed) s = l.collapsedSize ? r(l.collapsedSize, y) : 0, a.css("overflow", "hidden").addClass("k-state-collapsed"); else { if (o(l.size)) return n = n.add(this), t; s = r(l.size, y) } return 0, i += s, s }), y -= i, s = n.length, a = Math.floor(y / s), n.slice(0, s - 1).css(w, a).end().eq(s - 1).css(w, y - (s - 1) * a), l = 0, c = v ? "height" : "width", u = v ? "left" : "top", h = v ? "offsetWidth" : "offsetHeight", 0 === s && (f = g.filter(function () { return !(e(this).data(D) || {}).collapsed }).last())[w](y + f[0][h]), m.children().css(c, m[c]()).each(function (e, t) { "script" != t.tagName.toLowerCase() && (t.style[u] = Math.floor(l) + "px", l += t[h]) }), p._detachEvents(), p._attachEvents(), p.wrapper.removeClass("k-splitter-resizing"), d.resize(g), p.trigger(x) }, toggle: function (e, i) { var n; e = this.element.find(e), n = e.data(D), (i || n.collapsible) && (1 == arguments.length && (i = n.collapsed !== t && n.collapsed), n.collapsed = !i, n.collapsed ? e.css("overflow", "hidden") : e.css("overflow", ""), this.resize(!0)) }, collapse: function (e) { this.toggle(e, !1) }, expand: function (e) { this.toggle(e, !0) }, _addPane: function (e, t, i) { var n = this; return i.length && (n.options.panes.splice(t, 0, e), n._initPane(i, e), n._removeSplitBars(), n.resize(!0)), i }, append: function (t) { t = t || {}; var i = this, n = e("<div />").appendTo(i.element); return i._addPane(t, i.options.panes.length, n) }, insertBefore: function (t, i) { i = e(i), t = t || {}; var n = this.wrapper.children(".k-pane").index(i), o = e("<div />").insertBefore(e(i)); return this._addPane(t, n, o) }, insertAfter: function (t, i) { i = e(i), t = t || {}; var n = this.wrapper.children(".k-pane").index(i), o = e("<div />").insertAfter(e(i)); return this._addPane(t, n + 1, o) }, remove: function (t) { t = e(t); var i = this; return t.length && (d.destroy(t), t.each(function (t, n) { i.options.panes.splice(i.wrapper.children(".k-pane").index(n), 1), e(n).remove() }), i._removeSplitBars(), i.options.panes.length && i.resize(!0)), i }, size: s("size", !0), min: s("min"), max: s("max") }); u.plugin(M), l = { sizingProperty: "height", sizingDomProperty: "offsetHeight", alternateSizingProperty: "width", positioningProperty: "top", mousePositioningProperty: "pageY" }, c = { sizingProperty: "width", sizingDomProperty: "offsetWidth", alternateSizingProperty: "height", positioningProperty: "left", mousePositioningProperty: "pageX" }, a.prototype = { press: function (e) { this._resizable.press(e) }, move: function (e, t) { this.pressed || (this.press(t), this.pressed = !0), this._resizable.target || this._resizable.press(t), this._resizable.move(e) }, end: function () { this._resizable.end(), this.pressed = !1 }, destroy: function () { this._resizable.destroy(), this._resizable = this._element = this.owner = null }, isResizing: function () { return this._resizable.resizing }, _createHint: function (t) { var i = this; return e("<div class='k-ghost-splitbar k-ghost-splitbar-" + i.orientation + " k-state-default' />").css(i.alternateSizingProperty, t[i.alternateSizingProperty]()) }, _start: function (t) { var i = this, o = e(t.currentTarget), r = o.prev(), s = o.next(), a = r.data(D), l = s.data(D), c = parseInt(r[0].style[i.positioningProperty], 10), d = parseInt(s[0].style[i.positioningProperty], 10) + s[0][i.sizingDomProperty] - o[0][i.sizingDomProperty], u = parseInt(i._element.css(i.sizingProperty), 10), h = function (e) { var t = parseInt(e, 10); return (n(e) ? t : u * t / 100) || 0 }, f = h(a.min), p = h(a.max) || d - c, m = h(l.min), g = h(l.max) || d - c; i.previousPane = r, i.nextPane = s, i._maxPosition = Math.min(d - m, c + p), i._minPosition = Math.max(c + f, d - g) }, _max: function () { return this._maxPosition }, _min: function () { return this._minPosition }, _stop: function (t) { var i, n, r, s, a, l, c, u, h = this, f = e(t.currentTarget), p = h.owner; return p._panes().children(".k-splitter-overlay").remove(), t.keyCode !== d.keys.ESC && (i = t.position, n = f.prev(), r = f.next(), s = n.data(D), a = r.data(D), l = i - parseInt(n[0].style[h.positioningProperty], 10), c = parseInt(r[0].style[h.positioningProperty], 10) + r[0][h.sizingDomProperty] - i - f[0][h.sizingDomProperty], u = h._element.children(I).filter(function () { return o(e(this).data(D).size) }).length, (!o(s.size) || u > 1) && (o(s.size) && u--, s.size = l + "px"), (!o(a.size) || u > 1) && (a.size = c + "px"), p.resize(!0)), !1 } } }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dialog.min", ["kendo.core.min", "kendo.popup.min"], function () { return function (e, t) { function i(e) { return t !== e } function n(e, t, i) { return Math.max(Math.min(parseInt(e, 10), i === 1 / 0 ? i : parseInt(i, 10)), parseInt(t, 10)) } function o(e) { return e.keyCode == _.ENTER || e.keyCode == _.SPACEBAR } var r, s, a, l, c, d, u, h, f = window.kendo, p = f.ui.Widget, m = f.ui.Popup.TabKeyTrap, g = e.proxy, v = f.template, _ = f.keys, b = e.isFunction, w = "kendoWindow", y = ".k-window", k = ".k-dialog-close", x = ".k-content", C = "k-dialog-titleless", S = ".k-dialog-title", T = S + "bar", D = ".k-dialog-buttongroup", A = ".k-button", E = ".k-textbox", I = ":visible", M = "zIndex", R = "body", F = "initOpen", z = "open", P = "close", B = "show", L = "hide", H = "width", N = Math.ceil, O = ":not(link,meta,script,style)", V = p.extend({ init: function (e, t) { var i = this; p.fn.init.call(i, e, t), i._init(i.element, i.options), f.notify(i) }, _init: function (n, o) { var s, a = this; a._centerCallback = g(a._center, a), a.appendTo = e(R), i(o.visible) && null !== o.visible || (o.visible = n.is(I)), a.wrapperTemplate === t && (a.wrapperTemplate = r.wrapper), a._createDialog(), s = a.wrapper = n.closest(".k-dialog"), o._defaultFocus === t && (a._defaultFocus = n[0]), a._tabindex(n), a._dimensions(), this._tabKeyTrap = new m(s), a.options.visible ? (a.toFront(), a._triggerInitOpen(), a.trigger(z), o.modal && (a._overlay(s.is(I)).css({ opacity: .5 }), a._focusDialog())) : a.wrapper.hide(), o.closable && (s.autoApplyNS(w), n.autoApplyNS(w), s.find(k).on("click", g(a._closeClick, a)).on("keydown", g(a._closeKeyHandler, a)), n.on("keydown", g(a._keydown, a))) }, _dimensions: function () { var e, t, i = this.wrapper, o = this.options, r = o.width, s = o.height, a = ["minWidth", "minHeight", "maxWidth", "maxHeight"]; for (e = 0; e < a.length; e++)(t = o[a[e]]) && t != 1 / 0 && i.css(a[e], t); this._setElementMaxHeight(), r && i.width(("" + r).indexOf("%") > 0 ? r : n(r, o.minWidth, o.maxWidth)), s && (i.height(("" + s).indexOf("%") > 0 ? s : n(s, o.minHeight, o.maxHeight)), this._setElementHeight()) }, _setElementMaxHeight: function () { var e, t, i = this, n = i.element, o = i.options.maxHeight; o != 1 / 0 && (e = i._paddingBox(n), (t = parseFloat(o, 10) - i._uiHeight() - e.vertical) > 0 && n.css({ maxHeight: N(t) + "px", overflow: "hidden" })) }, _paddingBox: function (e) { var t = parseFloat(e.css("padding-top"), 10), i = parseFloat(e.css("padding-left"), 10), n = parseFloat(e.css("padding-bottom"), 10), o = parseFloat(e.css("padding-right"), 10); return { vertical: t + n, horizontal: i + o } }, _setElementHeight: function () { var e = this, t = e.element, i = e.options.height, n = e._paddingBox(t), o = parseFloat(i, 10) - e._uiHeight() - n.vertical; o > 0 && e.element.css({ height: N(o) + "px", overflow: "hidden" }) }, _uiHeight: function () { var e = this.wrapper, t = e.children(D), i = t[0] && t[0].offsetHeight || 0, n = e.children(T), o = n[0] && n[0].offsetHeight || 0; return i + o }, _overlay: function (t) { var i = this.appendTo.children(".k-overlay"), n = this.wrapper; return i.length || (i = e(r.overlay)), i.insertBefore(n[0]).toggle(t).css(M, parseInt(n.css(M), 10) - 1), t ? this._waiAriaOverlay() : this._removeWaiAriaOverlay(), i }, _waiAriaOverlay: function () { var t = this.wrapper; this._overlayedNodes = t.prevAll(O).add(t.nextAll(O)).each(function () { var t = e(this); t.data("ariaHidden", t.attr("aria-hidden")), t.attr("aria-hidden", "true") }) }, _removeWaiAriaOverlay: function () { return this._overlayedNodes && this._overlayedNodes.each(function () { var t = e(this), i = t.data("ariaHidden"); i ? t.attr("aria-hidden", i) : t.removeAttr("aria-hidden") }) }, _closeClick: function (e) { e.preventDefault(), this.close() }, _closeKeyHandler: function (e) { (o(e) || e.keyCode == _.ESC) && this.close() }, _keydown: function (e) { var t = this, i = t.options, n = e.keyCode; n == _.ESC && !t._closing && i.closable && t.close() }, _createDialog: function () { var t = this, i = t.element, n = t.options, o = f.support.isRtl(i), s = e(r.titlebar(n)), a = s.find(".k-window-actions"), l = (i.id || f.guid()) + "_title", c = e(t.wrapperTemplate(n)); c.toggleClass("k-rtl", o), i.addClass("k-content k-window-content k-dialog-content"), t.appendTo.append(c), !1 !== n.closable && (!1 !== n.title ? a.append(r.close(n)) : c.append(r.close(n))), !1 !== n.title ? (c.append(s), s.attr("id", l), c.attr("aria-labelledby", l)) : c.addClass(C), c.append(i), n.content && (f.destroy(i.children()), i.html(n.content)), n.actions.length && t._createActionbar(c) }, _createActionbar: function (t) { var i = "stretched" === this.options.buttonLayout, n = i ? "stretched" : "normal", o = e(r.actionbar({ buttonLayout: n })); this._addButtons(o), i && this._normalizeButtonSize(o), t.append(o) }, _addButtons: function (t) { var i, n, o, s, a = this, l = a.options, c = g(a._actionClick, a), d = g(a._actionKeyHandler, a), u = a.options.actions, h = u.length, f = 100 / h; for (o = 0; o < h; o++)i = u[o], n = a._mergeTextWithOptions(i), s = e(r.action(i)).autoApplyNS(w).html(n).appendTo(t).data("action", i.action).on("click", c).on("keydown", d), "stretched" === l.buttonLayout && s.css(H, f + "%") }, _mergeTextWithOptions: function (e) { var t = e.text; return t ? v(t)(this.options) : "" }, _normalizeButtonSize: function (e) { var t = this.options, i = e.children(A + ":last"), n = parseFloat(i[0].style[H]), o = 100 - t.actions.length * n; o > 0 && i.css(H, n + o + "%") }, _tabindex: function (e) { var t, i = this.wrapper, n = i.find(k), o = i.find(D + " " + A); p.fn._tabindex.call(this, e), t = e.attr("tabindex"), n.attr("tabIndex", t), o.attr("tabIndex", t) }, _actionClick: function (e) { this._runActionBtn(e.currentTarget) }, _actionKeyHandler: function (e) { o(e) ? this._runActionBtn(e.currentTarget) : e.keyCode == _.ESC && this.close() }, _runActionBtn: function (t) { var i, n = this; n._closing || (i = e(t).data("action"), b(i) && !1 === i({ sender: n }) || n.close()) }, open: function () { var e, t, i, n = this, o = n.wrapper, r = this._animationOptions(z), s = n.options; return this._triggerInitOpen(), n.trigger(z) || (n._closing && o.kendoStop(!0, !0), n._closing = !1, n.toFront(), s.visible = !0, s.modal && (t = !!n._modals().length, (e = n._overlay(t)).kendoStop(!0, !0), r.duration && f.effects.Fade && !t ? ((i = f.fx(e).fadeIn()).duration(r.duration || 0), i.endValue(.5), i.play()) : e.css("opacity", .5), e.show()), o.show().kendoStop().kendoAnimate({ effects: r.effects, duration: r.duration, complete: g(n._openAnimationEnd, n) }), o.show()), n }, _animationOptions: function (e) { var t = this.options.animation; return t && t[e] || { open: { effects: {} }, close: { hide: !0, effects: {} } }[e] }, _openAnimationEnd: function () { this.options.modal && this._focusDialog(), this.trigger(B) }, _triggerInitOpen: function () { i(this._initOpenTriggered) || (this._initOpenTriggered = !0, this.trigger(F)) }, toFront: function () { var t = this, i = t.wrapper, n = +i.css(M), o = n; return t.center(), e(y).each(function (t, i) { var o = e(i), r = o.css(M); isNaN(r) || (n = Math.max(+r, n)) }), (!i[0].style.zIndex || o < n) && i.css(M, n + 2), t.element.find("> .k-overlay").remove(), i = null, t }, close: function () { return this._close(!0), this._stopCenterOnResize(), this }, _close: function (e) { var t = this, i = t.wrapper, n = t.options, o = this._animationOptions("open"), r = this._animationOptions("close"); if (i.is(I) && !t.trigger(P, { userTriggered: !e })) { if (t._closing) return; t._closing = !0, n.visible = !1, this._removeOverlay(), i.kendoStop().kendoAnimate({ effects: r.effects || o.effects, reverse: !0 === r.reverse, duration: r.duration, complete: g(this._closeAnimationEnd, this) }) } return t }, center: function () { this._center(), this._centerOnResize() }, _center: function () { var t = this.wrapper, i = e(window), n = 0 + Math.max(0, (i.width() - t.width()) / 2), o = 0 + Math.max(0, (i.height() - t.height() - parseInt(t.css("paddingTop"), 10)) / 2); return t.css({ left: n, top: o }), this }, _centerOnResize: function () { this._trackResize || (f.onResize(this._centerCallback), this._trackResize = !0) }, _stopCenterOnResize: function () { f.unbindResize(this._centerCallback), this._trackResize = !1 }, _removeOverlay: function () { var e = this._modals(), t = this.options, i = t.modal && !e.length; i ? this._overlay(!1).remove() : e.length && this._object(e.last())._overlay(!0) }, _closeAnimationEnd: function () { var e, t = this; t._closing = !1, t.wrapper.hide().css("opacity", ""), t.trigger(L), t.options.modal && ((e = t._object(t._modals().last())) && e.toFront()) }, _modals: function () { var t = this, i = e(y).filter(function () { var i = e(this), n = t._object(i), o = n && n.options; return o && o.modal && t.options.appendTo == o.appendTo && o.visible && i.is(I) }).sort(function (t, i) { return +e(t).css("zIndex") - +e(i).css("zIndex") }); return t = null, i }, _object: function (e) { var i = e.children(x), n = f.widgetInstance(i); return n || t }, destroy: function () { var t = this; t._destroy(), p.fn.destroy.call(t), t.wrapper.remove(), t.wrapper = t.element = e() }, _destroy: function () { var e = this, t = "." + w; e.wrapper.off(t), e.element.off(t), e.wrapper.find(k + "," + D + " > " + A).off(t), e._stopCenterOnResize() }, title: function (t) { var i = this, n = i.wrapper, o = i.options, s = n.children(T), a = s.children(S), l = f.htmlEncode(t); return arguments.length ? (!1 === t ? (s.remove(), n.addClass(C)) : (s.length || (s = e(r.titlebar(o)).prependTo(n), a = s.children(S), n.removeClass(C)), a.html(l)), i.options.title = l, i) : a.html() }, content: function (e, t) { var n = this, o = n.wrapper.children(x); return i(e) ? (this.angular("cleanup", function () { return { elements: o.children() } }), f.destroy(o.children()), o.html(e), this.angular("compile", function () { var e, i = []; for (e = o.length; --e >= 0;)i.push({ dataItem: t }); return { elements: o.children(), data: i } }), n.options.content = e, n) : o.html() }, _focusDialog: function () { this._defaultFocus && this._focus(this._defaultFocus), this._tabKeyTrap.trap() }, _focus: function (e) { e && e.focus() }, events: [F, z, P, B, L], options: { title: "", buttonLayout: "stretched", actions: [], modal: !0, width: null, height: null, minWidth: 0, minHeight: 0, maxWidth: 1 / 0, maxHeight: 1 / 0, content: null, visible: null, appendTo: R, closable: !0 } }), U = V.extend({ options: { name: "Dialog", messages: { close: "Close" } } }); f.ui.plugin(U), s = V.extend({ _init: function (e, t) { var i = this; i.wrapperTemplate = r.alertWrapper, t._defaultFocus = null, i._ensureContentId(e), V.fn._init.call(i, e, t), i.bind(L, g(i.destroy, i)), i._ariaDescribedBy(), i._initFocus() }, _ensureContentId: function (t) { var i = e(t); i.attr("id") || i.attr("id", f.guid() + "_k-popup") }, _ariaDescribedBy: function () { this.wrapper.attr("aria-describedby", this.element.attr("id")) }, _initFocus: function () { var e = this.options; this._defaultFocus = this._chooseEntryFocus(), this._defaultFocus && e.visible && e.modal && this._focusDialog() }, _chooseEntryFocus: function () { return this.wrapper.find(D + " > " + A)[0] }, options: { title: window.location.host, closable: !1, messages: { okText: "OK", cancel: "Cancel", promptInput: "Input" } } }), a = s.extend({ _init: function (e, t) { s.fn._init.call(this, e, t), this.wrapper.addClass("k-alert") }, options: { name: "Alert", modal: !0, actions: [{ text: "#: messages.okText #" }] } }), f.ui.plugin(a), l = function (t) { return e(r.alert).kendoAlert({ content: t }).data("kendoAlert").open() }, c = s.extend({ _init: function (t, i) { var n = this; s.fn._init.call(n, t, i), n.wrapper.addClass("k-confirm"), n.result = e.Deferred() }, options: { name: "Confirm", modal: !0, actions: [{ text: "#: messages.okText #", primary: !0, action: function (e) { e.sender.result.resolve() } }, { text: "#: messages.cancel #", action: function (e) { e.sender.result.reject() } }] } }), f.ui.plugin(c), d = function (t) { var i = e(r.confirm).kendoConfirm({ content: t }).data("kendoConfirm").open(); return i.result }, u = s.extend({ _init: function (t, i) { var n = this; s.fn._init.call(n, t, i), n.wrapper.addClass("k-prompt"), n._createPrompt(), n.result = e.Deferred() }, _createPrompt: function () { var t = this.options.value, i = e(r.promptInputContainer(this.options)).insertAfter(this.element); t && i.children(E).val(t), this._defaultFocus = this._chooseEntryFocus(), this._focusDialog() }, _chooseEntryFocus: function () { return this.wrapper.find(E)[0] }, options: { name: "Prompt", modal: !0, value: "", actions: [{ text: "#: messages.okText #", primary: !0, action: function (e) { var t = e.sender, i = t.wrapper.find(E).val(); t.result.resolve(i) } }, { text: "#: messages.cancel #", action: function (e) { var t = e.sender, i = t.wrapper.find(E).val(); e.sender.result.reject(i) } }] } }), f.ui.plugin(u), h = function (t, i) { var n = e(r.prompt).kendoPrompt({ content: t, value: i }).data("kendoPrompt").open(); return n.result }, r = { wrapper: v("<div class='k-widget k-window k-dialog' role='dialog' />"), action: v("<button type='button' class='k-button# if (data.primary) { # k-primary# } role='button' #'></button>"), titlebar: v("<div class='k-window-titlebar k-dialog-titlebar k-header'><span class='k-window-title k-dialog-title'>#: title #</span><div class='k-window-actions k-dialog-actions' /></div>"), close: v("<a role='button' href='\\#' class='k-button k-bare k-button-icon k-window-action k-dialog-action k-dialog-close' title='#: messages.close #' aria-label='#: messages.close #' tabindex='-1'><span class='k-icon k-i-close'></span></a>"), actionbar: v("<div class='k-button-group k-dialog-buttongroup k-dialog-button-layout-#: buttonLayout #' role='toolbar' />"), overlay: "<div class='k-overlay' />", alertWrapper: v("<div class='k-widget k-window k-dialog' role='alertdialog' />"), alert: "<div />", confirm: "<div />", prompt: "<div />", promptInputContainer: v("<div class='k-prompt-container'><input type='text' class='k-textbox' title='#: messages.promptInput #' aria-label='#: messages.promptInput #' /></div>") }, f.alert = l, f.confirm = d, f.prompt = h }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.virtuallist.min", ["kendo.data.min"], function () { return function (e, t) { function i(e) { return e[e.length - 1] } function n(e) { return e instanceof Array ? e : [e] } function o(e) { return "string" == typeof e || "number" == typeof e || "boolean" == typeof e } function r(e, t, i) { var n = document.createElement(i || "div"); return t && (n.className = t), e.appendChild(n), n } function s(i, n, o) { var r = o.template; i = e(i), n.item || (r = o.placeholderTemplate), this.angular("cleanup", function () { return { elements: [i] } }), i.attr("data-uid", n.item ? n.item.uid : "").attr("data-offset-index", n.index).html(r(n.item || {})), i.toggleClass(g, n.current), i.toggleClass(m, n.selected), i.toggleClass("k-first", n.newGroup), i.toggleClass("k-loading-item", !n.item), 0 !== n.index && n.newGroup && e("<div class=" + p + "></div>").appendTo(i).html(o.groupTemplate(n.group)), n.top !== t && function (e, t) { l.support.browser.msie && l.support.browser.version < 10 ? e.style.top = t + "px" : (e.style.webkitTransform = "translateY(" + t + "px)", e.style.transform = "translateY(" + t + "px)") }(i[0], n.top), this.angular("compile", function () { return { elements: [i], data: [{ dataItem: n.item, group: n.group, newGroup: n.newGroup }] } }) } function a(e) { return e && "resolved" !== e.state() } var l = window.kendo, c = l.ui, d = c.Widget, u = c.DataBoundWidget, h = e.proxy, f = "k-virtual-item", p = "k-group", m = "k-state-selected", g = "k-state-focused", v = "k-state-hover", _ = "change", b = "click", w = "listBound", y = "itemChange", k = "activate", x = "deactivate", C = ".VirtualList", S = u.extend({ init: function (t, i) { var o = this; o.bound(!1), o._fetching = !1, d.fn.init.call(o, t, i), o.options.itemHeight || (o.options.itemHeight = function () { var t, i = e('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>'); return i.css({ position: "absolute", left: "-200000px", visibility: "hidden" }), i.appendTo(document.body), t = parseFloat(l.getComputedStyles(i.find(".k-item")[0], ["line-height"])["line-height"]), i.remove(), t }()), i = o.options, o.element.addClass("k-list k-virtual-list").attr("role", "listbox"), o.content = o.element.wrap("<div unselectable='on' class='k-virtual-content'></div>").parent(), o.wrapper = o.content.wrap("<div class='k-virtual-wrap'></div>").parent(), o.header = o.content.before("<div class='k-group-header'></div>").prev(), o.element.on("mouseenter" + C, "li:not(.k-loading-item)", function () { e(this).addClass(v) }).on("mouseleave" + C, "li", function () { e(this).removeClass(v) }), o._values = n(o.options.value), o._selectedDataItems = [], o._selectedIndexes = [], o._rangesList = {}, o._promisesList = [], o._optionID = l.guid(), o._templates(), o.setDataSource(i.dataSource), o.content.on("scroll" + C, l.throttle(function () { o._renderItems(), o._triggerListBound() }, i.delay)), o._selectable() }, options: { name: "VirtualList", autoBind: !0, delay: 100, height: null, listScreens: 4, threshold: .5, itemHeight: null, oppositeBuffer: 1, type: "flat", selectable: !1, value: [], dataValueField: null, template: "#:data#", placeholderTemplate: "loading...", groupTemplate: "#:data#", fixedGroupTemplate: "fixed header template", mapValueTo: "index", valueMapper: null }, events: [_, b, w, y, k, x], setOptions: function (e) { d.fn.setOptions.call(this, e), this._selectProxy && !1 === this.options.selectable ? this.element.off(b, "." + f, this._selectProxy) : !this._selectProxy && this.options.selectable && this._selectable(), this._templates(), this.refresh() }, items: function () { return e(this._items) }, destroy: function () { this.wrapper.off(C), this.dataSource.unbind(_, this._refreshHandler), d.fn.destroy.call(this) }, setDataSource: function (t) { var i, n = this, o = t || {}; o = e.isArray(o) ? { data: o } : o, o = l.data.DataSource.create(o), n.dataSource ? (n.dataSource.unbind(_, n._refreshHandler), n._clean(), n.bound(!1), n._deferValueSet = !0, i = n.value(), n.value([]), n.mute(function () { n.value(i) })) : n._refreshHandler = e.proxy(n.refresh, n), n.dataSource = o.bind(_, n._refreshHandler), n.setDSFilter(o.filter()), 0 !== o.view().length ? n.refresh() : n.options.autoBind && o.fetch() }, skip: function () { return this.dataSource.currentRangeStart() }, _triggerListBound: function () { var e = this, t = e.skip(); e.bound() && !e._selectingValue && e._skip !== t && (e._skip = t, e.trigger(w)) }, _getValues: function (t) { var i = this._valueGetter; return e.map(t, function (e) { return i(e) }) }, refresh: function (e) { var t, i = this, n = e && e.action, o = "itemchange" === n, r = this.isFiltered(); i._mute || (i._deferValueSet = !1, i._fetching ? (i._renderItems && i._renderItems(!0), i._triggerListBound()) : (r && i.focus(0), i._createList(), n || !i._values.length || r || i.options.skipUpdateOnBind ? (i.bound(!0), i._triggerListBound()) : (i._selectingValue = !0, i.value(i._values, !0).done(function () { i.bound(!0), i._selectingValue = !1, i._triggerListBound() }))), (o || "remove" === n) && ((t = function (e, t) { var i, n, o, r, s = t.length, a = e.length, l = [], c = []; if (a) for (o = 0; o < a; o++) { for (i = e[o], n = !1, r = 0; r < s; r++)if (i === t[r]) { n = !0, l.push({ index: o, item: i }); break } n || c.push(i) } return { changed: l, unchanged: c } }(i._selectedDataItems, e.items)).changed.length && (o ? i.trigger("selectedItemChange", { items: t.changed }) : i.value(i._getValues(t.unchanged)))), i._fetching = !1) }, removeAt: function (e) { return this._selectedIndexes.splice(e, 1), this._values.splice(e, 1), { position: e, dataItem: this._selectedDataItems.splice(e, 1)[0] } }, setValue: function (e) { this._values = n(e) }, value: function (i, o) { var r = this; return i === t ? r._values.slice() : (null === i && (i = []), i = n(i), r._valueDeferred && "resolved" !== r._valueDeferred.state() || (r._valueDeferred = e.Deferred()), !("multiple" === r.options.selectable && r.select().length && i.length) && i.length || r.select(-1), r._values = i, (r.bound() && !r._mute && !r._deferValueSet || o) && r._prefetchByValue(i), r._valueDeferred) }, _prefetchByValue: function (e) { var i, n, r, s = this, a = s._dataView, l = s._valueGetter, c = s.options.mapValueTo, d = []; for (n = 0; n < e.length; n++)for (r = 0; r < a.length; r++)(i = a[r].item) && ((o(i) ? e[n] === i : e[n] === l(i)) && d.push(a[r].index)); return d.length === e.length ? (s._values = [], s.select(d), t) : ("function" == typeof s.options.valueMapper ? s.options.valueMapper({ value: "multiple" === this.options.selectable ? e : e[0], success: function (e) { "index" === c ? s.mapValueToIndex(e) : "dataItem" === c && s.mapValueToDataItem(e) } }) : s.select([-1]), t) }, mapValueToIndex: function (e) { if ((e = e === t || -1 === e || null === e ? [] : n(e)).length) { var i = this._deselect([]).removed; i.length && this._triggerChange(i, []) } else e = [-1]; this.select(e) }, mapValueToDataItem: function (i) { var o, r, s; if ((i = i === t || null === i ? [] : n(i)).length) { for (o = e.map(this._selectedDataItems, function (e, t) { return { index: t, dataItem: e } }), r = e.map(i, function (e, t) { return { index: t, dataItem: e } }), this._selectedDataItems = i, this._selectedIndexes = [], s = 0; s < this._selectedDataItems.length; s++)this._selectedIndexes.push(t); this._triggerChange(o, r), this._valueDeferred && this._valueDeferred.resolve() } else this.select([-1]) }, deferredRange: function (t) { var i = this.dataSource, n = this.itemCount, o = this._rangesList, r = e.Deferred(), s = [], a = Math.floor(t / n) * n, l = Math.ceil(t / n) * n, c = l === a ? [l] : [a, l]; return e.each(c, function (t, r) { var a, l = r + n, c = o[r]; c && c.end === l ? a = c.deferred : (a = e.Deferred(), o[r] = { end: l, deferred: a }, i._multiplePrefetch(r, n, function () { a.resolve() })), s.push(a) }), e.when.apply(e, s).then(function () { r.resolve() }), r }, prefetch: function (t) { var i = this, n = this.itemCount, o = !i._promisesList.length; return a(i._activeDeferred) || (i._activeDeferred = e.Deferred(), i._promisesList = []), e.each(t, function (e, t) { i._promisesList.push(i.deferredRange(i._getSkip(t, n))) }), o && e.when.apply(e, i._promisesList).done(function () { i._promisesList = [], i._activeDeferred.resolve() }), i._activeDeferred }, _findDataItem: function (e, t) { var i, n; if ("group" === this.options.type) for (n = 0; n < e.length; n++) { if (!((i = e[n].items).length <= t)) return i[t]; t -= i.length } return e[t] }, _getRange: function (e, t) { return this.dataSource._findRange(e, Math.min(e + t, this.dataSource.total())) }, dataItemByIndex: function (e) { var t = this.itemCount, i = this._getSkip(e, t), n = this._getRange(i, t); return this._findDataItem(n, [e - i]) }, selectedDataItems: function () { return this._selectedDataItems.slice() }, scrollWith: function (e) { this.content.scrollTop(this.content.scrollTop() + e) }, scrollTo: function (e) { this.content.scrollTop(e) }, scrollToIndex: function (e) { this.scrollTo(e * this.options.itemHeight) }, focus: function (n) { var o, r, s, a, l, c, d = this.options.itemHeight, u = this._optionID, h = !0; if (n === t) return (a = this.element.find("." + g)).length ? a : null; if ("function" == typeof n) for (s = this.dataSource.flatView(), l = 0; l < s.length; l++)if (n(s[l])) { n = l; break } return n instanceof Array && (n = i(n)), isNaN(n) ? (o = e(n), r = parseInt(e(o).attr("data-offset-index"), 10)) : (r = n, o = this._getElementByIndex(r)), -1 === r ? (this.element.find("." + g).removeClass(g), this._focusedIndex = t, t) : (o.length ? (o.hasClass(g) && (h = !1), this._focusedIndex !== t && ((a = this._getElementByIndex(this._focusedIndex)).removeClass(g).removeAttr("id"), h && this.trigger(x)), this._focusedIndex = r, o.addClass(g).attr("id", u), "top" === (c = this._getElementLocation(r)) ? this.scrollTo(r * d) : "bottom" === c ? this.scrollTo(r * d + d - this._screenHeight) : "outScreen" === c && this.scrollTo(r * d), h && this.trigger(k)) : (this._focusedIndex = r, this.items().removeClass(g), this.scrollToIndex(r)), t) }, focusIndex: function () { return this._focusedIndex }, focusFirst: function () { this.scrollTo(0), this.focus(0) }, focusLast: function () { var e = this.dataSource.total(); this.scrollTo(this.heightContainer.offsetHeight), this.focus(e) }, focusPrev: function () { var e, t = this._focusedIndex; return !isNaN(t) && t > 0 ? (t -= 1, this.focus(t), (e = this.focus()) && e.hasClass("k-loading-item") && (t += 1, this.focus(t)), t) : (t = this.dataSource.total() - 1, this.focus(t), t) }, focusNext: function () { var e, t = this._focusedIndex, i = this.dataSource.total() - 1; return !isNaN(t) && t < i ? (t += 1, this.focus(t), (e = this.focus()) && e.hasClass("k-loading-item") && (t -= 1, this.focus(t)), t) : (t = 0, this.focus(t), t) }, _triggerChange: function (e, t) { t = t || [], ((e = e || []).length || t.length) && this.trigger(_, { removed: e, added: t }) }, select: function (n) { var o, r, s, l, c, d = this, u = "multiple" !== d.options.selectable, h = a(d._activeDeferred), f = this.isFiltered(), p = []; return n === t ? d._selectedIndexes.slice() : (d._selectDeferred && "resolved" !== d._selectDeferred.state() || (d._selectDeferred = e.Deferred()), o = d._getIndecies(n), r = u && !f && i(o) === i(this._selectedIndexes), (p = d._deselectCurrentValues(o)).length || !o.length || r ? (d._triggerChange(p), d._valueDeferred && d._valueDeferred.resolve(), d._selectDeferred.resolve().promise()) : (1 === o.length && -1 === o[0] && (o = []), l = d._deselect(o), p = l.removed, o = l.indices, u && (h = !1, o.length && (o = [i(o)])), c = function () { var e = d._select(o); d.focus(o), d._triggerChange(p, e), d._valueDeferred && d._valueDeferred.resolve(), d._selectDeferred.resolve() }, s = d.prefetch(o), h || (s ? s.done(c) : c()), d._selectDeferred.promise())) }, bound: function (e) { return e === t ? this._listCreated : (this._listCreated = e, t) }, mute: function (e) { this._mute = !0, h(e(), this), this._mute = !1 }, setDSFilter: function (t) { this._lastDSFilter = e.extend({}, t) }, isFiltered: function () { return this._lastDSFilter || this.setDSFilter(this.dataSource.filter()), !l.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter) }, skipUpdate: e.noop, _getElementByIndex: function (t) { return this.items().filter(function (i, n) { return t === parseInt(e(n).attr("data-offset-index"), 10) }) }, _getElementByDataItem: function (t) { var i, n, r = this._dataView, s = this._valueGetter; for (n = 0; n < r.length; n++)if (r[n].item && o(r[n].item) ? r[n].item === t : s(r[n].item) === s(t)) { i = r[n]; break } return i ? this._getElementByIndex(i.index) : e() }, _clean: function () { this.result = t, this._lastScrollTop = t, this._skip = t, e(this.heightContainer).remove(), this.heightContainer = t, this.element.empty() }, _height: function () { var e = !!this.dataSource.view().length, t = this.options.height, i = this.options.itemHeight, n = this.dataSource.total(); return e ? t / i > n && (t = n * i) : t = 0, t }, setScreenHeight: function () { var e = this._height(); this.content.height(e), this._screenHeight = e }, screenHeight: function () { return this._screenHeight }, _getElementLocation: function (e) { var t = this.content.scrollTop(), i = this._screenHeight, n = this.options.itemHeight, o = e * n, r = o + n, s = t + i; return o === t - n || r > t && o < t ? "top" : o === s || o < s && s < r ? "bottom" : o >= t && o <= t + (i - n) ? "inScreen" : "outScreen" }, _templates: function () { var e, t = this.options, i = { template: t.template, placeholderTemplate: t.placeholderTemplate, groupTemplate: t.groupTemplate, fixedGroupTemplate: t.fixedGroupTemplate }; for (e in i) "function" != typeof i[e] && (i[e] = l.template(i[e] || "")); this.templates = i }, _generateItems: function (e, t) { for (var i, n = [], o = this.options.itemHeight + "px"; t-- > 0;)(i = document.createElement("li")).tabIndex = -1, i.className = f + " k-item", i.setAttribute("role", "option"), i.style.height = o, i.style.minHeight = o, e.appendChild(i), n.push(i); return n }, _saveInitialRanges: function () { var t, i = this.dataSource._ranges, n = e.Deferred(); for (n.resolve(), this._rangesList = {}, t = 0; t < i.length; t++)this._rangesList[i[t].start] = { end: i[t].end, deferred: n } }, _createList: function () { var t = this, i = t.content.get(0), n = t.options, o = t.dataSource; t.bound() && t._clean(), t._saveInitialRanges(), t._buildValueGetter(), t.setScreenHeight(), t.itemCount = function (e, t, i) { return Math.ceil(e * t / i) }(t._screenHeight, n.listScreens, n.itemHeight), t.itemCount > o.total() && (t.itemCount = o.total()), t._items = t._generateItems(t.element[0], t.itemCount), t._setHeight(n.itemHeight * o.total()), t.options.type = (o.group() || []).length ? "group" : "flat", "flat" === t.options.type ? t.header.hide() : t.header.show(), t.getter = t._getter(function () { t._renderItems(!0) }), t._onScroll = function (e, i) { var n = t._listItems(t.getter); return t._fixedHeader(e, n(e, i)) }, t._renderItems = t._whenChanged(function (e, t) { return function (i) { return t(e.scrollTop, i) } }(i, t._onScroll), function (e) { return function (t, i) { return e(t.items, t.index, i), t } }(t._reorderList(t._items, e.proxy(s, t)))), t._renderItems(), t._calculateGroupPadding(t._screenHeight) }, _setHeight: function (e) { var t, i, n = this.heightContainer; if (n ? t = n.offsetHeight : n = this.heightContainer = r(this.content[0], "k-height-container"), e !== t) for (n.innerHTML = ""; e > 0;)i = Math.min(e, 25e4), r(n).style.height = i + "px", e -= i }, _getter: function () { var e = null, t = this.dataSource, i = t.skip(), n = this.options.type, o = this.itemCount, r = {}; return t.pageSize() < o && this.mute(function () { t.pageSize(o) }), function (s, a) { var l, c, d, u, h, f, p, m, g = this; if (t.inRange(a, o)) { if (i !== a && this.mute(function () { t.range(a, o), i = a }), "group" === n) { if (!r[a]) for (c = r[a] = [], d = t.view(), u = 0, h = d.length; u < h; u++)for (f = d[u], p = 0, m = f.items.length; p < m; p++)c.push({ item: f.items[p], group: f.value }); l = r[a][s - a] } else l = t.view()[s - a]; return l } return e !== a && (e = a, i = a, g._getterDeferred && g._getterDeferred.reject(), g._getterDeferred = g.deferredRange(a), g._getterDeferred.then(function () { var e = g._indexConstraint(g.content[0].scrollTop); g._getterDeferred = null, a <= e && e <= a + o && (g._fetching = !0, t.range(a, o)) })), null } }, _fixedHeader: function (e, t) { var i, n = this.currentVisibleGroup, o = this.options.itemHeight, r = Math.floor((e - t.top) / o), s = t.items[r]; return s && s.item && ((i = s.group) !== n && (this.header[0].innerHTML = i || "", this.currentVisibleGroup = i)), t }, _itemMapper: function (e, t, i) { var n, r = this.options.type, s = this.options.itemHeight, a = this._focusedIndex, l = !1, c = !1, d = !1, u = null, h = this._valueGetter; if ("group" === r && (e && (d = 0 === t || this._currentGroup && this._currentGroup !== e.group, this._currentGroup = e.group), u = e ? e.group : null, e = e ? e.item : null), !this.isFiltered() && i.length && e) for (n = 0; n < i.length; n++)if (o(e) ? i[n] === e : i[n] === h(e)) { i.splice(n, 1), l = !0; break } return a === t && (c = !0), { item: e || null, group: u, newGroup: d, selected: l, current: c, index: t, top: t * s } }, _range: function (e) { var t, i, n, o = this.itemCount, r = this._values.slice(), s = []; for (this._view = {}, this._currentGroup = null, i = e, n = e + o; i < n; i++)t = this._itemMapper(this.getter(i, e), i, r), s.push(t), this._view[t.index] = t; return this._dataView = s, s }, _getDataItemsCollection: function (e, t) { var i = this._range(this._listIndex(e, t)); return { index: i.length ? i[0].index : 0, top: i.length ? i[0].top : 0, items: i } }, _listItems: function () { var t = this._screenHeight, i = this.options, n = function (e, t) { var i = (e.listScreens - 1 - e.threshold) * t, n = e.threshold * t; return function (e, t, o) { return t > o ? t - e.top < i : 0 === e.top || t - e.top > n } }(i, t); return e.proxy(function (e, t) { var i = this.result, o = this._lastScrollTop; return !t && i && n(i, e, o) || (i = this._getDataItemsCollection(e, o)), this._lastScrollTop = e, this.result = i, i }, this) }, _whenChanged: function (e, t) { var i; return function (n) { var o = e(n); o !== i && (i = o, t(o, n)) } }, _reorderList: function (t, i) { var n = this, o = t.length, r = -1 / 0; return i = e.proxy(function (t, i) { return function (n, o) { for (var r = 0, s = n.length; r < s; r++)t(n[r], o[r], i), o[r].item && this.trigger(y, { item: e(n[r]), data: o[r].item, ns: l.ui }) } }(i, this.templates), this), function (e, s, a) { var l, c, d = s - r; a || Math.abs(d) >= o ? (l = t, c = e) : (l = function (e, t) { var i; return t > 0 ? (i = e.splice(0, t), e.push.apply(e, i)) : (i = e.splice(t, -t), e.unshift.apply(e, i)), i }(t, d), c = d > 0 ? e.slice(-d) : e.slice(0, -d)), i(l, c, n.bound()), r = s } }, _bufferSizes: function () { var e = this.options; return function (e, t, i) { return { down: e * i, up: e * (t - 1 - i) } }(this._screenHeight, e.listScreens, e.oppositeBuffer) }, _indexConstraint: function (e) { var t = this.itemCount, i = this.options.itemHeight, n = this.dataSource.total(); return Math.min(Math.max(n - t, 0), Math.max(0, Math.floor(e / i))) }, _listIndex: function (e, t) { var i, n = this._bufferSizes(); return i = e - (e > t ? n.down : n.up), this._indexConstraint(i) }, _selectable: function () { this.options.selectable && (this._selectProxy = e.proxy(this, "_clickHandler"), this.element.on(b + C, "." + f, this._selectProxy)) }, getElementIndex: function (e) { return e instanceof jQuery ? parseInt(e.attr("data-offset-index"), 10) : t }, _getIndecies: function (e) { var t, i, n, o = []; if ("function" == typeof e) for (t = this.dataSource.flatView(), i = 0; i < t.length; i++)if (e(t[i])) { o.push(i); break } return "number" == typeof e && o.push(e), n = this.getElementIndex(e), isNaN(n) || o.push(n), e instanceof Array && (o = e), o }, _deselect: function (i) { var n, r, s, a, l, c, d = [], u = this._selectedIndexes, h = this._selectedDataItems, f = 0, p = this.options.selectable, g = 0, v = this._valueGetter, _ = null; if (i = i.slice(), !0 !== p && i.length) { if ("multiple" === p) for (l = 0; l < i.length; l++) { if (_ = null, f = e.inArray(i[l], u), r = this.dataItemByIndex(i[l]), -1 === f && r) for (c = 0; c < h.length; c++)(o(r) ? h[c] === r : v(h[c]) === v(r)) && (s = this._getElementByIndex(i[l]), _ = this._deselectSingleItem(s, c, i[l], g)); else (n = u[f]) !== t && (s = this._getElementByIndex(n), _ = this._deselectSingleItem(s, f, n, g)); _ && (i.splice(l, 1), d.push(_), g++, l--) } } else { for (a = 0; a < u.length; a++)u[a] !== t ? this._getElementByIndex(u[a]).removeClass(m) : h[a] && this._getElementByDataItem(h[a]).removeClass(m), d.push({ index: u[a], position: a, dataItem: h[a] }); this._values = [], this._selectedDataItems = [], this._selectedIndexes = [] } return { indices: i, removed: d } }, _deselectSingleItem: function (e, t, i, n) { var o; if (e.hasClass("k-state-selected")) return e.removeClass(m), this._values.splice(t, 1), this._selectedIndexes.splice(t, 1), o = this._selectedDataItems.splice(t, 1)[0], { index: i, position: t + n, dataItem: o } }, _deselectCurrentValues: function (t) { var i, n, o, r, s = this.element[0].children, a = this._values, l = [], c = 0; if ("multiple" !== this.options.selectable || !this.isFiltered()) return []; if (-1 === t[0]) return e(s).removeClass("k-state-selected"), l = e.map(this._selectedDataItems.slice(0), function (e, t) { return { dataItem: e, position: t } }), this._selectedIndexes = [], this._selectedDataItems = [], this._values = [], l; for (; c < t.length; c++) { for (o = -1, n = t[c], i = this._valueGetter(this.dataItemByIndex(n)), r = 0; r < a.length; r++)if (i == a[r]) { o = r; break } o > -1 && (l.push(this.removeAt(o)), e(s[n]).removeClass("k-state-selected")) } return l }, _getSkip: function (e, t) { var i = e < t ? 1 : Math.floor(e / t) + 1; return (i - 1) * t }, _select: function (t) { var i, n, r = this, s = "multiple" !== this.options.selectable, a = this.dataSource, l = this.itemCount, c = this._valueGetter, d = []; return s && (r._selectedIndexes = [], r._selectedDataItems = [], r._values = []), n = a.skip(), e.each(t, function (e, t) { var s = r._getSkip(t, l); r.mute(function () { a.range(s, l), i = r._findDataItem(a.view(), [t - s]), r._selectedIndexes.push(t), r._selectedDataItems.push(i), r._values.push(o(i) ? i : c(i)), d.push({ index: t, dataItem: i }), r._getElementByIndex(t).addClass(m), a.range(n, l) }) }), d }, _clickHandler: function (t) { var i = e(t.currentTarget); !t.isDefaultPrevented() && i.attr("data-uid") && this.trigger(b, { item: i }) }, _buildValueGetter: function () { this._valueGetter = l.getter(this.options.dataValueField) }, _calculateGroupPadding: function (e) { var t = this.items().first(), i = this.header, n = 0; i[0] && "none" !== i[0].style.display && ("auto" !== e && (n = l.support.scrollbar()), n += parseFloat(t.css("border-right-width"), 10) + parseFloat(t.children(".k-group").css("right"), 10), i.css("padding-right", n)) } }); l.ui.VirtualList = S, l.ui.plugin(S) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.view.min", ["kendo.core.min"], function () { return kendo.ui.scheduler = {}, function (e) { function t(e, t) { var i = []; return function e(n, o) { var r, s; if (o = o[t]) for (r = i[n] = i[n] || [], s = 0; s < o.length; s++)r.push(o[s]), e(n + 1, o[s]) }(0, e), i } function i() { return g.support.cssBorderSpacing ? "" : 'cellspacing="0"' } function n(t, n) { return t.length ? "<table " + i() + ' class="' + e.trim("k-scheduler-table " + (n || "")) + '"><tr>' + t.join("</tr><tr>") + "</tr></table>" : "" } function o(t, i, o) { var r, s = []; if (o > 0) for (r = 0; r < t; r++)s.push("<th>&#8203;</th>"); return i && s.push('<th class="k-scheduler-times-all-day">' + i.text + "</th>"), o < 1 ? e() : e('<div class="k-scheduler-times">' + n(s) + "</div>") } function r(t, i, o) { var r, s, a, l, c, d, u, h, f, p, m = []; for (s = 0; s < t.length; s++) { for (a = t[s], l = [], c = i / a.length, r = 0; r < a.length; r++)d = a[r], l.push('<th colspan="' + (d.colspan || c) + '" class="' + (d.className || "") + '">' + d.text + "</th>"); m.push(l.join("")) } if (u = [], o) { for (h = t[t.length - 1], f = [], p = o.cellContent, r = 0; r < h.length; r++)f.push('<td class="' + (h[r].className || "") + '">' + (p ? p(r) : "&nbsp;") + "</td>"); u.push(f.join("")) } return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">' + n(m) + function (e, t) { return e.length ? "<div style='position:relative'>" + n(e, t) + "</div>" : "" }(u, "k-scheduler-header-all-day") + "</div></div>") } function s(t, i) { var o, r, s, a, l, c = Array(i).join().split(","), d = []; for (r = 0; r < t.length; r++)for (s = t[r], a = i / s.length, o = 0; o < s.length; o++)l = s[o].className || "", s[o].allDay && (l = "k-scheduler-times-all-day"), c[a * o] += '<th class="' + l + '" rowspan="' + a + '">' + s[o].text + "</th>"; for (o = 0; o < i; o++)d.push(c[o]); return i < 1 ? e() : e('<div class="k-scheduler-times">' + n(d) + "</div>") } function a() { return e('<div class="k-scheduler-content"><table ' + i() + ' class="k-scheduler-table"/></div>') } function l(e) { return { start: e.start, end: e.end } } function c(e) { var t, i, n, o, r, s, a, c = []; for (t = 0; t < e.length; t++) { for (i = e[t], n = l(i), o = null, r = 0, s = c.length; r < s; r++)if (a = n.start > c[r].end, n.start < c[r].start || a) { (o = c[r]).end < n.end && (o.end = n.end); break } o || (o = { start: n.start, end: n.end, events: [] }, c.push(o)), o.events.push(i) } return c } function d(t, i, n, o) { var r = []; return e.each(i, function (e, i) { var s = i.className ? "k-slot-cell " + i.className : "k-slot-cell", a = { text: i.text, className: s }; a[t] = o && !i.minorTicks ? d(t, i.columns, n, o) : n, r.push(a) }), r } function u(t, i, n, o, r, s) { var a, l, c, d = i[0], h = []; if (d) { if (r && n) e.each(r, function (e, n) { n[t] = s && !n.minorTicks ? u(t, i, n.columns, o, n.columns, s) : u(t, i, null, o) }), h = r; else for (a = d.dataSource.view(), l = 0; l < a.length; l++)(c = { text: o({ text: g.htmlEncode(g.getter(d.dataTextField)(a[l])), color: g.getter(d.dataColorField)(a[l]), field: d.field, title: d.title, name: d.name, value: g.getter(d.dataValueField)(a[l]) }), className: "k-slot-cell" })[t] = u(t, i.slice(1), n, o), h.push(c); return h } return n } function h(e) { e.className = e.className.replace(m, "") + " k-state-selected" } var f, p, m, g = window.kendo, v = g.ui, _ = v.Widget, b = g._outerHeight, w = g.keys, y = Math, k = g.Class.extend({ init: function (e, t) { this._index = e, this._timeSlotCollections = [], this._daySlotCollections = [], this._isRtl = t }, addTimeSlotCollection: function (e, t) { return this._addCollection(e, t, this._timeSlotCollections) }, addDaySlotCollection: function (e, t) { return this._addCollection(e, t, this._daySlotCollections) }, _addCollection: function (e, t, i) { var n = new T(e, t, this._index, i.length); return i.push(n), n }, timeSlotCollectionCount: function () { return this._timeSlotCollections.length }, daySlotCollectionCount: function () { return this._daySlotCollections.length }, daySlotByPosition: function (e, t, i) { return this._slotByPosition(e, t, this._daySlotCollections, i) }, timeSlotByPosition: function (e, t, i) { return this._slotByPosition(e, t, this._timeSlotCollections, i) }, _slotByPosition: function (e, t, i, n) { var o, r, s, a, l, c, d, u, h; for (o = 0; o < i.length; o++)for (r = i[o], s = 0; s < r.count(); s++)if (a = r.at(s), l = a.offsetWidth, c = a.offsetHeight, u = a.offsetLeft + l, h = a.offsetTop + c, n || (d = r.at(s + 1)), d && (d.offsetLeft != a.offsetLeft ? u = this._isRtl ? a.offsetLeft + (a.offsetLeft - d.offsetLeft) : d.offsetLeft : h = d.offsetTop), e >= a.offsetLeft && e < u && t >= a.offsetTop && t < h) return a }, refresh: function () { var e; for (e = 0; e < this._daySlotCollections.length; e++)this._daySlotCollections[e].refresh(); for (e = 0; e < this._timeSlotCollections.length; e++)this._timeSlotCollections[e].refresh() }, timeSlotRanges: function (e, t) { var i, n = this._timeSlotCollections, o = this._startSlot(e, n); return !o.inRange && e >= o.slot.end && (o = null), i = o, e < t && (i = this._endSlot(t, n)), i && !i.inRange && t <= i.slot.start && (i = null), null === o && null === i ? [] : (null === o && (o = { inRange: !0, slot: n[i.slot.collectionIndex].first() }), null === i && (i = { inRange: !0, slot: n[o.slot.collectionIndex].last() }), this._continuousRange(C, n, o, i)) }, daySlotRanges: function (e, t, i) { var n, o = this._daySlotCollections, r = this._startSlot(e, o, i); if (!r.inRange && e >= r.slot.end && (r = null), n = r, e < t && (n = this._endSlot(t, o, i)), n && !n.inRange && t <= n.slot.start && (n = null), null === r && null === n) return []; if (null === r) do { e += g.date.MS_PER_DAY, r = this._startSlot(e, o, i) } while (!r.inRange && e >= r.slot.end); if (null === n) do { t -= g.date.MS_PER_DAY, n = this._endSlot(t, o, i) } while (!n.inRange && t <= n.slot.start); return this._continuousRange(S, o, r, n) }, _continuousRange: function (e, t, i, n) { var o, r, s, a, l, c, d = i.slot, u = n.slot, h = d.collectionIndex, f = u.collectionIndex, p = []; for (o = h; o <= f; o++)r = t[o], s = r.first(), a = r.last(), l = !1, c = !1, o == h && (c = !i.inRange), o == f && (l = !n.inRange), s.start < d.start && (s = d), a.start > u.start && (a = u), h < f && (o == h ? l = !0 : o == f ? c = !0 : l = c = !0), p.push(new e({ start: s, end: a, collection: r, head: l, tail: c })); return p }, slotRanges: function (e, t) { var i = e._startTime || g.date.toUtcTime(e.start), n = e._endTime || g.date.toUtcTime(e.end); return void 0 === t && (t = e.isMultiDay()), t ? this.daySlotRanges(i, n, e.isAllDay) : this.timeSlotRanges(i, n) }, ranges: function (e, t, i, n) { return "number" != typeof e && (e = g.date.toUtcTime(e)), "number" != typeof t && (t = g.date.toUtcTime(t)), i ? this.daySlotRanges(e, t, n) : this.timeSlotRanges(e, t) }, _startCollection: function (e, t) { var i, n; for (i = 0; i < t.length; i++)if ((n = t[i]).startInRange(e)) return n; return null }, _endCollection: function (e, t, i) { var n, o; for (n = 0; n < t.length; n++)if ((o = t[n]).endInRange(e, i)) return o; return null }, _getCollections: function (e) { return e ? this._daySlotCollections : this._timeSlotCollections }, continuousSlot: function (e, t) { var i = t ? -1 : 1, n = this._getCollections(e.isDaySlot), o = n[e.collectionIndex + i]; return o ? o[t ? "last" : "first"]() : void 0 }, firstSlot: function () { var e = this._getCollections(this.daySlotCollectionCount()); return e[0].first() }, lastSlot: function () { var e = this._getCollections(this.daySlotCollectionCount()); return e[e.length - 1].last() }, upSlot: function (e, t, i) { var n = this; return this.timeSlotCollectionCount() || (t = !0), this._verticalSlot(e, -1, function (e, i, o) { if (!t && !e && 0 === o && n.daySlotCollectionCount()) return n._daySlotCollections[0].at(i) }, i) }, downSlot: function (e, t, i) { var n = this; return this.timeSlotCollectionCount() || (t = !0), this._verticalSlot(e, 1, function (e, i, o) { if (!t && e && n.timeSlotCollectionCount()) return n._timeSlotCollections[o].at(0) }, i) }, leftSlot: function (e, t) { return this._horizontalSlot(e, -1, t) }, rightSlot: function (e, t) { return this._horizontalSlot(e, 1, t) }, _horizontalSlot: function (e, t, i) { var n, o = e.index, r = e.isDaySlot, s = e.collectionIndex, a = this._getCollections(r); return (r = !i && r) ? o += t : s += t, (n = a[s]) ? n.at(o) : void 0 }, _verticalSlot: function (e, t, i, n) { var o, r = e.index, s = e.isDaySlot, a = e.collectionIndex, l = this._getCollections(s); return (e = i(s, a, r)) ? e : ((s = !n && s) ? a += t : r += t, (o = l[a]) ? o.at(r) : void 0) }, _collection: function (e, t) { var i = t ? this._daySlotCollections : this._timeSlotCollections; return i[e] }, _startSlot: function (e, t, i) { var n, o = this._startCollection(e, t), r = !0; return o || (o = t[0], r = !1), (n = o.slotByStartDate(e, i)) || (n = o.first(), r = !1), { slot: n, inRange: r } }, _endSlot: function (e, t, i) { var n, o = this._endCollection(e, t, i), r = !0; return o || (o = t[t.length - 1], r = !1), (n = o.slotByEndDate(e, i)) || (n = o.last(), r = !1), { slot: n, inRange: r } }, getSlotCollection: function (e, t) { return this[t ? "getDaySlotCollection" : "getTimeSlotCollection"](e) }, getTimeSlotCollection: function (e) { return this._timeSlotCollections[e] }, getDaySlotCollection: function (e) { return this._daySlotCollections[e] } }), x = g.Class.extend({ init: function (t) { e.extend(this, t) }, innerHeight: function () { var e, t = this.collection, i = this.start.index, n = this.end.index, o = 0; for (e = i; e <= n; e++)o += t.at(e).offsetHeight; return o }, events: function () { return this.collection.events() }, addEvent: function (e) { this.events().push(e) }, startSlot: function () { return this.start.offsetLeft > this.end.offsetLeft ? this.end : this.start }, endSlot: function () { return this.start.offsetLeft > this.end.offsetLeft ? this.start : this.end } }), C = x.extend({ innerHeight: function () { var e, t = this.collection, i = this.start.index, n = this.end.index, o = 0; for (e = i; e <= n; e++)o += t.at(e).offsetHeight; return o }, outerRect: function (e, t, i) { return this._rect("offset", e, t, i) }, _rect: function (e, t, i, n) { var o, r, s, a, l, c, d, u, h = this.start, f = this.end, p = g.support.isRtl(h.element); return "number" != typeof t && (t = g.date.toUtcTime(t)), "number" != typeof i && (i = g.date.toUtcTime(i)), n ? (o = h.offsetTop, r = f.offsetTop + f[e + "Height"], p ? (s = f.offsetLeft, a = h.offsetLeft + h[e + "Width"]) : (s = h.offsetLeft, a = f.offsetLeft + f[e + "Width"])) : ((l = t - h.start) < 0 && (l = 0), c = h.end - h.start, o = h.offsetTop + h[e + "Height"] * l / c, (d = f.end - i) < 0 && (d = 0), u = f.end - f.start, r = f.offsetTop + f[e + "Height"] - f[e + "Height"] * d / u, p ? (s = Math.round(f.offsetLeft + f[e + "Width"] * d / u), a = Math.round(h.offsetLeft + h[e + "Width"] - h[e + "Width"] * l / c)) : (s = Math.round(h.offsetLeft + h[e + "Width"] * l / c), a = Math.round(f.offsetLeft + f[e + "Width"] - f[e + "Width"] * d / u))), { top: o, bottom: r, left: 0 === s ? s : s + 1, right: a } }, innerRect: function (e, t, i) { return this._rect("client", e, t, i) } }), S = x.extend({ innerWidth: function () { var e, t = this.collection, i = this.start.index, n = this.end.index, o = 0, r = i !== n ? "offsetWidth" : "clientWidth"; for (e = i; e <= n; e++)o += t.at(e)[r]; return o } }), T = g.Class.extend({ init: function (e, t, i, n) { this._slots = [], this._events = [], this._start = g.date.toUtcTime(e), this._end = g.date.toUtcTime(t), this._groupIndex = i, this._collectionIndex = n }, refresh: function () { for (var e = 0; e < this._slots.length; e++)this._slots[e].refresh() }, startInRange: function (e) { return this._start <= e && e < this._end }, endInRange: function (e, t) { var i = t ? e < this._end : e <= this._end; return this._start <= e && i }, slotByStartDate: function (e) { var t, i, n = e; for ("number" != typeof n && (n = g.date.toUtcTime(e)), t = 0; t < this._slots.length; t++)if ((i = this._slots[t]).startInRange(n)) return i; return null }, slotByEndDate: function (e, t) { var i, n, o = e; if ("number" != typeof o && (o = g.date.toUtcTime(e)), t) return this.slotByStartDate(e, !1); for (i = 0; i < this._slots.length; i++)if ((n = this._slots[i]).endInRange(o)) return n; return null }, count: function () { return this._slots.length }, events: function () { return this._events }, addTimeSlot: function (e, t, i, n) { var o = new A(e, t, i, this._groupIndex, this._collectionIndex, this._slots.length, n); this._slots.push(o) }, addDaySlot: function (e, t, i, n) { var o = new E(e, t, i, this._groupIndex, this._collectionIndex, this._slots.length, n); this._slots.push(o) }, first: function () { return this._slots[0] }, last: function () { return this._slots[this._slots.length - 1] }, at: function (e) { return this._slots[e] } }), D = g.Class.extend({ init: function (e, t, i, n, o, r) { this.element = e, this.clientWidth = e.clientWidth, this.clientHeight = e.clientHeight, this.offsetWidth = e.offsetWidth, this.offsetHeight = e.offsetHeight, this.offsetTop = e.offsetTop, this.offsetLeft = e.offsetLeft, this.start = t, this.end = i, this.element = e, this.groupIndex = n, this.collectionIndex = o, this.index = r, this.isDaySlot = !1 }, refresh: function () { var e = this.element; this.clientWidth = e.clientWidth, this.clientHeight = e.clientHeight, this.offsetWidth = e.offsetWidth, this.offsetHeight = e.offsetHeight, this.offsetTop = e.offsetTop, this.offsetLeft = e.offsetLeft }, startDate: function () { return g.timezone.toLocalDate(this.start) }, endDate: function () { return g.timezone.toLocalDate(this.end) }, startInRange: function (e) { return this.start <= e && e < this.end }, endInRange: function (e) { return this.start < e && e <= this.end }, startOffset: function () { return this.start }, endOffset: function () { return this.end } }), A = D.extend({ init: function (e, t, i, n, o, r, s) { D.fn.init.apply(this, arguments), this.isHorizontal = !!s }, offsetX: function (e, t) { return this.offsetLeft + t }, startInRange: function (e) { return this.start <= e && e < this.end }, endInRange: function (e) { return this.start < e && e <= this.end }, startOffset: function (t, i, n) { var o, r, s, a, l; if (n) return this.start; if (o = e(this.element).offset(), r = this.end - this.start, this.isHorizontal) { if (l = g.support.isRtl(this.element), s = t - o.left, a = Math.floor(r * (s / this.offsetWidth)), l) return this.start + r - a } else s = i - o.top, a = Math.floor(r * (s / this.offsetHeight)); return this.start + a }, endOffset: function (t, i, n) { var o, r, s, a, l; if (n) return this.end; if (o = e(this.element).offset(), r = this.end - this.start, this.isHorizontal) { if (l = g.support.isRtl(this.element), s = t - o.left, a = Math.floor(r * (s / this.offsetWidth)), l) return this.start + r - a } else s = i - o.top, a = Math.floor(r * (s / this.offsetHeight)); return this.start + a } }), E = D.extend({ init: function (e, t, i, n, o, r, s) { D.fn.init.apply(this, arguments), this.eventCount = s, this.isDaySlot = !0, this.element.children.length ? (this.firstChildHeight = this.element.children[0].offsetHeight + 3, this.firstChildTop = this.element.children[0].offsetTop) : (this.firstChildHeight = 3, this.firstChildTop = 0) }, startDate: function () { var e = new Date(this.start); return g.timezone.apply(e, "Etc/UTC") }, endDate: function () { var e = new Date(this.end); return g.timezone.apply(e, "Etc/UTC") }, startInRange: function (e) { return this.start <= e && e < this.end }, endInRange: function (e) { return this.start < e && e <= this.end } }); g.ui.SchedulerView = _.extend({ init: function (t, i) { _.fn.init.call(this, t, i), this._normalizeOptions(), this._scrollbar = f = f || g.support.scrollbar(), this._isRtl = g.support.isRtl(t), this._resizeHint = e(), this._moveHint = e(), this._cellId = g.guid(), this._resourcesForGroups(), this._selectedSlots = [] }, _normalizeOptions: function () { var e = this.options; e.startTime && e.startTime.setMilliseconds(0), e.endTime && e.endTime.setMilliseconds(0), e.workDayStart && e.workDayStart.setMilliseconds(0), e.workDayEnd && e.workDayEnd.setMilliseconds(0) }, _isMobile: function () { var e = this.options; return !0 === e.mobile && g.support.mobileOS || "phone" === e.mobile || "tablet" === e.mobile }, _isMobilePhoneView: function () { var e = this.options; return !0 === e.mobile && g.support.mobileOS && !g.support.mobileOS.tablet || "phone" === e.mobile }, _addResourceView: function () { var e = new k(this.groups.length, this._isRtl); return this.groups.push(e), e }, dateForTitle: function () { return g.format(this.options.selectedDateFormat, this.startDate(), this.endDate()) }, shortDateForTitle: function () { return g.format(this.options.selectedShortDateFormat, this.startDate(), this.endDate()) }, _changeGroup: function (e, t) { var i = t ? "prevGroupSlot" : "nextGroupSlot", n = this[i](e.start, e.groupIndex, e.isAllDay); return n && (e.groupIndex += t ? -1 : 1), this._isGroupedByDate() && !n && (e.groupIndex = t ? this.groups.length - 1 : 0), n }, _changeDate: function (e, t, i) { var n, o, r, s = this.groups[e.groupIndex]; if (i) { if (n = s._getCollections(!1), (o = s.daySlotCollectionCount() ? t.index - 1 : t.collectionIndex - 1) >= 0) return n[o]._slots[n[o]._slots.length - 1] } else if (n = s._getCollections(s.daySlotCollectionCount()), o = s.daySlotCollectionCount() ? 0 : t.collectionIndex + 1, r = s.daySlotCollectionCount() ? t.collectionIndex + 1 : 0, n[o] && n[o]._slots[r]) return n[o]._slots[r] }, _changeGroupContinuously: function () { return null }, _changeViewPeriod: function () { return !1 }, _horizontalSlots: function (e, t, i, n) { var o, r, s, a = n ? "leftSlot" : "rightSlot", l = { startSlot: t[0].start, endSlot: t[t.length - 1].end }, c = this.groups[e.groupIndex], d = this._isVerticallyGrouped(); return i || (o = this._normalizeHorizontalSelection(e, t, n)) && (l.startSlot = l.endSlot = o), this._isGroupedByDate() && !i ? (r = this._changeGroup(e, n)) ? l.startSlot = l.endSlot = r : l = this._getNextHorizontalRange(c, a, l) : (l.startSlot = c[a](l.startSlot), l.endSlot = c[a](l.endSlot), i || d || l.startSlot && l.endSlot || (l.startSlot = l.endSlot = this._changeGroup(e, n))), l.startSlot && l.endSlot || this._isGroupedByDate() || (s = this._continuousSlot(e, t, n), (s = this._changeGroupContinuously(e, s, i, n)) && (l.startSlot = l.endSlot = s)), l }, _getNextHorizontalRange: function (e, t, i) { return this._isVerticallyGrouped() || (i.startSlot = e[t](i.startSlot), i.endSlot = e[t](i.endSlot)), i }, _verticalSlots: function (e, t, i, n) { var o, r, s = this.groups[e.groupIndex], a = { startSlot: t[0].start, endSlot: t[t.length - 1].end }; return i || (o = this._normalizeVerticalSelection(e, t, n)) && (a.startSlot = a.endSlot = o), r = n ? "upSlot" : "downSlot", a = this._getNextVerticalRange(s, r, a, i), i || !this._isVerticallyGrouped() || a.startSlot && a.endSlot || (a.startSlot = a.endSlot = this._isGroupedByDate() ? this._changeDate(e, o, n) : this._changeGroup(e, n)), a }, _getNextVerticalRange: function (e, t, i, n) { return i.startSlot = e[t](i.startSlot, n), i.endSlot = e[t](i.endSlot, n), i }, _normalizeHorizontalSelection: function () { return null }, _normalizeVerticalSelection: function (e, t, i) { return i ? t[0].start : t[t.length - 1].end }, _continuousSlot: function () { return null }, constrainSelection: function (e) { var t, i = this.groups[0]; this.inRange(e) ? i.daySlotCollectionCount() ? i.timeSlotCollectionCount() || (e.isAllDay = !0) : e.isAllDay = !1 : (t = i.firstSlot(), e.isAllDay = t.isDaySlot, e.start = t.startDate(), e.end = t.endDate()), this.groups[e.groupIndex] || (e.groupIndex = 0) }, move: function (e, t, i) { var n, o, r, s, a, l, c = !1, d = this.groups[e.groupIndex], u = this._isGroupedByDate() && this._isVerticallyGrouped(); if (d.timeSlotCollectionCount() || (e.isAllDay = !0), n = d.ranges(e.start, e.end, e.isAllDay, !1), t === w.DOWN || t === w.UP) { if (c = !0, s = t === w.UP, this._updateDirection(e, n, i, s, !0), !(a = this._verticalSlots(e, n, i, s)).startSlot && !i && this._changeViewPeriod(e, s, !u)) return c } else if ((t === w.LEFT || t === w.RIGHT) && (c = !0, s = t === w.LEFT, this._updateDirection(e, n, i, s, !1), !(a = this._horizontalSlots(e, n, i, s)).startSlot && !i && this._changeViewPeriod(e, s, u))) return c; return c && (o = a.startSlot, r = a.endSlot, i ? (l = e.backward) && o ? e.start = o.startDate() : !l && r && (e.end = r.endDate()) : o && r && (e.isAllDay = o.isDaySlot, e.start = o.startDate(), e.end = r.endDate()), e.events = []), c }, moveToEventInGroup: function (t, i, n, o) { for (var r, s = t._continuousEvents || [], a = o ? -1 : 1, l = s.length, c = o ? l - 1 : 0; c < l && c > -1;) { if (r = s[c], (!o && r.start.startDate() >= i.startDate() || o && r.start.startDate() <= i.startDate()) && (n.length && (r = s[c + a]), r && -1 === e.inArray(r.uid, n))) { !!r; break } c += a } return r }, moveToEvent: function (e, t) { var i, n, o, r, s, a, l = e.groupIndex, c = this.groups[l], d = c.ranges(e.start, e.end, e.isAllDay, !1)[0].start, u = this.groups.length, h = t ? -1 : 1, f = e.events; if (this._isGroupedByDate()) if (n = this._getAllEvents(), o = this._getUniqueEvents(n), r = this._getSortedEvents(o), 0 === f.length) s = this._getNextEventIndexBySlot(d, r, l), t && s--, i = r[s]; else for (a = this._getStartIdx(f, r); a < r.length && a > -1 && (f.length > 0 && (d = this._getSelectedSlot(d, r, i, a, h, t)), d);) { if ((!t && r[a].start.startDate() >= d.startDate() || t && r[a].start.startDate() <= d.startDate()) && f[0] != r[a].uid) { i = r[a]; break } a += h } else for (; l < u && l > -1 && (i = this.moveToEventInGroup(c, d, f, t), l += h, (c = this.groups[l]) && !i);)f = [], d = t ? c.lastSlot() : c.firstSlot(!0); return i && (e.events = [i.uid], e.start = i.start.startDate(), e.end = i.end.endDate(), e.isAllDay = i.start.isDaySlot, e.groupIndex = i.start.groupIndex), !!i }, current: function (e) { return void 0 === e ? this._current : (this._current = e, void (this.content.has(e) && this._scrollTo(e, this.content[0]))) }, select: function (e) { this.clearSelection(), this._selectEvents(e) || this._selectSlots(e) }, _getNextEventIndexBySlot: function (e, t, i) { var n, o, r = 0, s = g.date.getDate(e.startDate()); for (n = 0; n < t.length; n++)if (o = g.date.getDate(t[n].start.startDate()), s > o) r++; else if (s.getTime() === o.getTime() && i > t[n].start.groupIndex) r++; else { if (!(s.getTime() === o.getTime() && i >= t[n].start.groupIndex && e.startDate() > t[n].start.startDate())) break; r++ } return r }, _getSelectedSlot: function (e, t, i, n, o, r) { var s, a; return t[n + o] && t[n].start.groupIndex !== t[n + o].start.groupIndex && (s = t[n + o].start.groupIndex, (a = this.groups[s]) && !i || (e = null), e = r ? a.lastSlot() : a.firstSlot(!0)), e }, _getStartIdx: function (t, i) { var n = 0; return e.each(i, function () { return this.uid !== t[0] && void n++ }), n }, _getAllEvents: function () { var e, t = [], i = this.groups; for (e = 0; e < i.length; e++)i[e]._continuousEvents && (t = t.concat(i[e]._continuousEvents)); return t }, _getUniqueEvents: function (e) { var t, i, n, o = []; for (t = 0; t < e.length; t++) { for (i = !1, n = 0; n < o.length; n++)if (e[t].uid === o[n].uid) { i = !0; break } i || o.push(e[t]) } return o }, _getSortedEvents: function (t) { return t.sort(function (t, i) { var n = t.start.startDate(), o = i.start.startDate(), r = g.date.getDate(n) - g.date.getDate(o); return 0 === r && (r = t.start.groupIndex - i.start.groupIndex), 0 === r && (r = n.getTime() - o.getTime()), 0 === r && (t.start.isDaySlot && !i.start.isDaySlot && (r = -1), !t.start.isDaySlot && i.start.isDaySlot && (r = 1)), 0 === r && (r = e(t.element).index() - e(i.element).index()), r }) }, _selectSlots: function (e) { var t, i, n, o, r, s, a, l = e.isAllDay, c = this.groups[e.groupIndex]; for (c.timeSlotCollectionCount() || (l = !0), this._selectedSlots = [], t = c.ranges(e.start, e.end, l, !1), o = 0; o < t.length; o++)for (r = t[o], s = r.collection, a = r.start.index; a <= r.end.index; a++)n = s.at(a), (i = n.element).setAttribute("aria-selected", !0), h(i), this._selectedSlots.push({ start: n.startDate(), end: n.endDate(), element: i }); e.backward && (i = t[0].start.element), this.current(i) }, _selectEvents: function (t) { var i, n, o = !1, r = t.events, s = this.groups[t.groupIndex]._continuousEvents || [], a = s.length; if (!r[0] || !s[0]) return o; for (n = e(), t.events = [], i = 0; i < a; i++)e.inArray(s[i].uid, r) > -1 && (n = n.add(s[i].element), t.events.push(s[i].uid)); return n[0] && (n.addClass("k-state-selected").attr("aria-selected", !0), this.current(n.last()[0]), this._selectedSlots = [], o = !0), o }, inRange: function (e) { var t = this.startDate(), i = g.date.addDays(this.endDate(), 1), n = e.start, o = e.end; return t <= n && n < i && t < o && o <= i }, _resourceValue: function (e, t) { return e.valuePrimitive && (t = g.getter(e.dataValueField)(t)), t }, _resourceBySlot: function (e) { var t, i, n, o, r = this.groupedResources, s = {}; if (r.length) for (t = e.groupIndex, i = r.length - 1; i >= 0; i--)n = r[i], o = this._resourceValue(n, n.dataSource.view()[t % n.dataSource.total()]), n.multiple && (o = [o]), g.setter(n.field)(s, o), t = Math.floor(t / n.dataSource.total()); return s }, _createResizeHint: function (t, i, n, o) { return e('<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>').css({ left: t, top: i, width: n, height: o }) }, _removeResizeHint: function () { this._resizeHint.remove(), this._resizeHint = e() }, _removeMoveHint: function () { this._moveHint.remove(), this._moveHint = e() }, _scrollTo: function (e, t) { var i = e.offsetTop, n = e.offsetHeight, o = t.scrollTop, r = t.clientHeight, s = i + n, a = 0; a = o > i ? i : s > o + r ? n <= r ? s - r : i : o, t.scrollTop = a }, _shouldInverseResourceColor: function (e) { var t = new p(e.color).isDark(), i = this.element.css("color"), n = new p(i).isDark(); return t == n }, _eventTmpl: function (t, i) { var n, o = this.options, r = e.extend({}, g.Template, o.templateSettings), s = r.paramName, a = "", l = typeof t, c = { storage: {}, count: 0 }; return "function" === l ? (c.storage["tmpl" + c.count] = t, a += "#=this.tmpl" + c.count + "(" + s + ")#", c.count++) : "string" === l && (a += t), n = g.template(g.format(i, a), r), c.count > 0 && (n = e.proxy(n, c.storage)), n }, eventResources: function (e) { var t, i, n, o, r, s, a, l, c, d, u = [], h = this.options; if (!h.resources) return u; for (t = 0; t < h.resources.length; t++)if (i = h.resources[t], n = i.field, null != (o = g.getter(n)(e))) for (i.multiple || (o = [o]), r = i.dataSource.view(), s = 0; s < o.length; s++) { for (a = null, l = o[s], i.valuePrimitive || (l = g.getter(i.dataValueField)(l)), c = 0; c < r.length; c++)if (r[c].get(i.dataValueField) == l) { a = r[c]; break } null !== a && (d = g.getter(i.dataColorField)(a), u.push({ field: i.field, title: i.title, name: i.name, text: g.getter(i.dataTextField)(a), value: l, color: d })) } return u }, createLayout: function (n) { var o, r, s, a, l, c = -1; for (n.rows || (n.rows = []), o = 0; o < n.rows.length; o++)if (n.rows[o].allDay) { c = o; break } r = n.rows[c], c >= 0 && n.rows.splice(c, 1), s = this.columnLevels = t(n, "columns"), a = this.rowLevels = t(n, "rows"), this.table = e("<table " + i() + ' class="k-scheduler-layout k-scheduler-' + this.name + 'view"><tbody></tbody></table>'), l = a[a.length - 1].length, this.table.find("tbody:first").append(this._topSection(s, r, l)), this.table.find("tbody:first").append(this._bottomSection(s, a, l)), this.element.append(this.table), this._scroller() }, refreshLayout: function () { var t, i, n, o, r, s, a = this, l = a.element.find(">.k-scheduler-toolbar"), c = a.element.innerHeight(), d = this._scrollbar, u = 0, h = this._isRtl ? "left" : "right"; for (t = 0; t < l.length; t++)c -= b(l.eq(t)); a.datesHeader && (u = b(a.datesHeader)), a.timesHeader && b(a.timesHeader) > u && (u = b(a.timesHeader)), a.datesHeader && a.timesHeader && (i = a.datesHeader.find("table:first tr"), a.timesHeader.find("tr").height(function (t) { e(this).height(i.eq(t).height()) })), u && (c -= u), a.footer && (c -= b(a.footer)), n = function (e) { var t, i; return !!e[0].style.height || (t = e.height(), e.height("auto"), i = e.height(), t != i ? (e.height(""), !0) : (e.height(""), !1)) }, o = a.content[0], r = g.support.kineticScrollNeeded ? 0 : d, n(a.element) && (a.content.height(c > 2 * d ? c : 2 * d + 1), a.times.height(o.clientHeight), (s = a.times.find("table")).length && s.height(a.content.find("table")[0].clientHeight)), o.offsetWidth - o.clientWidth > 0 ? (a.table.addClass("k-scrollbar-v"), a.datesHeader.css("padding-" + h, r - parseInt(a.datesHeader.children().css("border-" + h + "-width"), 10))) : a.datesHeader.css("padding-" + h, ""), o.offsetHeight - o.clientHeight > 0 || o.clientHeight > a.content.children(".k-scheduler-table").height() ? a.table.addClass("k-scrollbar-h") : a.table.removeClass("k-scrollbar-h") }, _topSection: function (t, i, n) { this.timesHeader = o(t.length, i, n); var s = t[t.length - 1].length; return this.datesHeader = r(t, s, i), e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent()) }, _bottomSection: function (t, i, n) { return this.times = s(i, n), this.content = a(t[t.length - 1], i[i.length - 1]), e("<tr>").append(this.times.add(this.content).wrap("<td>").parent()) }, _scroller: function () { var t, i = this; this.content.bind("scroll.kendoSchedulerView", function () { i.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft), i.times.scrollTop(this.scrollTop) }), (t = g.touchScroller(this.content, { avoidScrolling: function (t) { return e(t.event.target).closest(".k-event.k-event-active").length > 0 } })) && t.movable && (this._touchScroller = t, this.content = t.scrollElement, t.movable.bind("change", function (e) { i.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x), i.times.scrollTop(-e.sender.y) })) }, _resourcesForGroups: function () { var e, t, i, n, o = [], r = this.options.group, s = this.options.resources; if (r = r && r.resources ? r.resources : [], s && r.length) for (e = 0, t = s.length; e < t; e++)for (i = 0, n = r.length; i < n; i++)s[e].name === r[i] && o.push(s[e]); this.groupedResources = o }, _createDateLayout: function (e, t, i) { return d("rows", e, t, i) }, _createColumnsLayout: function (e, t, i, n, o) { return u("columns", e, t, i, n, o) }, _groupOrientation: function () { var e = this.options.group; return e && e.resources ? e.orientation : "horizontal" }, _isGroupedByDate: function () { return this.options.group && this.options.group.date }, _isVerticallyGrouped: function () { return this.groupedResources.length && "vertical" === this._groupOrientation() }, _createRowsLayout: function (e, t, i, n) { return u("rows", e, t, i, n) }, selectionByElement: function () { return null }, clearSelection: function () { this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected", !1).removeClass("k-state-selected") }, destroy: function () { var e = this; _.fn.destroy.call(this), e.table && (g.destroy(e.table), e.table.remove()), e.groups = null, e.table = null, e.content = null, e.times = null, e.datesHeader = null, e.timesHeader = null, e.footer = null, e._resizeHint = null, e._moveHint = null }, calendarInfo: function () { return g.getCulture().calendars.standard }, prevGroupSlot: function (e, t, i) { var n, o = this.groups[t], r = o.ranges(e, e, i, !1)[0].start; if (!(t <= 0)) return this._isGroupedByDate() ? r : this._isVerticallyGrouped() ? o.timeSlotCollectionCount() ? (n = o._collection(i ? r.index : r.collectionIndex, !1)).last() : (n = o._collection(o.daySlotCollectionCount() - 1, !0)).at(r.index) : o.timeSlotCollectionCount() ? (n = o._collection(i ? 0 : o.timeSlotCollectionCount() - 1, i), i ? n.last() : n.at(r.index)) : (n = o._collection(r.collectionIndex, !0)).last() }, nextGroupSlot: function (e, t, i) { var n, o, r = this.groups[t], s = r.ranges(e, e, i, !1)[0].start; if (!(t >= this.groups.length - 1)) return this._isGroupedByDate() ? s : this._isVerticallyGrouped() ? r.timeSlotCollectionCount() ? (o = r.daySlotCollectionCount(), n = r._collection(o ? 0 : s.collectionIndex, o), i ? n.first() : n.at(s.collectionIndex)) : (n = r._collection(0, !0)).at(s.index) : r.timeSlotCollectionCount() ? (n = r._collection(0, i), i ? n.first() : n.at(s.index)) : (n = r._collection(s.collectionIndex, !0)).first() }, _eventOptionsForMove: function () { return {} }, _updateEventForResize: function () { }, _updateEventForSelection: function (e) { return e } }), (p = function (e) { var t, i, n, o, r, s = this, a = p.formats; if (1 === arguments.length) for (e = s.resolveColor(e), o = 0; o < a.length; o++)t = a[o].re, i = a[o].process, (n = t.exec(e)) && (r = i(n), s.r = r[0], s.g = r[1], s.b = r[2]); else s.r = arguments[0], s.g = arguments[1], s.b = arguments[2]; s.r = s.normalizeByte(s.r), s.g = s.normalizeByte(s.g), s.b = s.normalizeByte(s.b) }).prototype = { resolveColor: function (e) { return "#" == (e = e || "#000").charAt(0) && (e = e.substr(1, 6)), e = (e = e.replace(/ /g, "")).toLowerCase(), e = p.namedColors[e] || e }, normalizeByte: function (e) { return e < 0 || isNaN(e) ? 0 : e > 255 ? 255 : e }, percBrightness: function () { var e = this; return y.sqrt(.241 * e.r * e.r + .691 * e.g * e.g + .068 * e.b * e.b) }, isDark: function () { var e = this.percBrightness(); return e < 180 } }, p.formats = [{ re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/, process: function (e) { return [parseInt(e[1], 10), parseInt(e[2], 10), parseInt(e[3], 10)] } }, { re: /^(\w{2})(\w{2})(\w{2})$/, process: function (e) { return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)] } }, { re: /^(\w{1})(\w{1})(\w{1})$/, process: function (e) { return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)] } }], p.namedColors = { aqua: "00ffff", azure: "f0ffff", beige: "f5f5dc", black: "000000", blue: "0000ff", brown: "a52a2a", coral: "ff7f50", cyan: "00ffff", darkblue: "00008b", darkcyan: "008b8b", darkgray: "a9a9a9", darkgreen: "006400", darkorange: "ff8c00", darkred: "8b0000", dimgray: "696969", fuchsia: "ff00ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lightblue: "add8e6", lightgrey: "d3d3d3", lightgreen: "90ee90", lightpink: "ffb6c1", lightyellow: "ffffe0", lime: "00ff00", limegreen: "32cd32", linen: "faf0e6", magenta: "ff00ff", maroon: "800000", mediumblue: "0000cd", navy: "000080", olive: "808000", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", pink: "ffc0cb", plum: "dda0dd", purple: "800080", red: "ff0000", royalblue: "4169e1", salmon: "fa8072", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", snow: "fffafa", steelblue: "4682b4", tan: "d2b48c", teal: "008080", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "ffffff", whitesmoke: "f5f5f5", yellow: "ffff00", yellowgreen: "9acd32" }, m = /\s*k-state-selected/, e.extend(v.SchedulerView, { createColumns: function (e) { return c(e) }, createRows: function (e) { return c(e) }, rangeIndex: l, collidingEvents: function (e, t, i) { var n, o, r, s; for (n = e.length - 1; n >= 0; n--)o = l(e[n]), r = o.start, s = o.end, (r <= t && s >= t || r >= t && s <= i || t <= r && i >= r) && (r < t && (t = r), s > i && (i = s)); return function (e, t, i) { var n, o, r = []; for (n = 0; n < e.length; n++)((o = l(e[n])).start < t && o.end > t || o.start >= t && o.end <= i) && r.push(e[n]); return r }(e, t, i) }, groupEqFilter: function (t) { return function (i) { if (e.isArray(i) || i instanceof g.data.ObservableArray) { for (var n = 0; n < i.length; n++)if (i[n] == t) return !0; return !1 } return i == t } } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.dayview.min", ["kendo.scheduler.view.min"], function () { return function (e, t) { function i(e) { var t = new Date(1980, 1, 1, 0, 0, 0); return l(t, b(e)), t } function n(e, t, i) { return e >= t && e <= i } function o(e, t, i, n) { return n = n ? e <= i : e < i, e > t && n } function r(e, t, i, n) { var o, r = e._continuousEvents, a = r[r.length - 1], l = p(t.start.startDate()).getTime(); if (n && a && p(a.start.startDate()).getTime() == l) { for (o = r.length - 1; o > -1 && !(r[o].isAllDay || p(r[o].start.startDate()).getTime() < l); o--); r.splice(o + 1, 0, { element: i, isAllDay: !0, uid: i.attr(s.attr("uid")), start: t.start, end: t.end }) } else r.push({ element: i, isAllDay: n, uid: i.attr(s.attr("uid")), start: t.start, end: t.end }) } var s = window.kendo, a = s.ui, l = s.date.setTime, c = a.SchedulerView, d = s._outerWidth, u = s._outerHeight, h = e.extend, f = e.proxy, p = s.date.getDate, m = s.date.MS_PER_MINUTE, g = s.date.MS_PER_DAY, v = "k-current-time", _ = "k-current-time-arrow", b = s.date.getMilliseconds, w = ".kendoMultiDayView", y = s.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'), k = s.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'), x = s.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"), C = c.extend({ init: function (e, t) { var i = this; c.fn.init.call(i, e, t), i.title = i.options.title || i.options.name, i._workDays = function (e) { var t = [], i = e.workWeekStart; for (t.push(i); e.workWeekEnd != i;)i > 6 ? i -= 7 : i++, t.push(i); return t }(i.options), i._templates(), i._editable(), i.calculateDateRange(), i._groups(), i._currentTime(!0) }, _currentTimeMarkerUpdater: function () { this._updateCurrentTimeMarker(new Date) }, _updateCurrentTimeMarker: function (t) { var i, n, o, r, a, l, c, h, f, p, m, g, b, w, y = this.options; for (!1 === y.currentTimeMarker.useLocalTimezone && (i = y.dataSource.options.schema.timezone, y.dataSource && i && (n = s.timezone.offset(t, i), t = s.timezone.convert(t, t.getTimezoneOffset(), n))), this.times.find("." + v).remove(), this.content.find("." + v).remove(), o = y.group && "horizontal" != y.group.orientation ? this.groups.length : 1, r = this.times.find("tr:first th:first"), a = this.times.find("tr:first th:last"), l = 0; l < o; l++) { if (!(c = this.groups[l])) return; if (h = s.date.toUtcTime(t), 0 === (f = c.timeSlotRanges(h, h + 1)).length) return; p = f[0].collection, p.slotByStartDate(t) && (g = e(m = "<div class='" + v + "'></div>").prependTo(this.times), b = Math.round(f[0].innerRect(t, new Date(t.getTime() + 1), !1).top), w = {}, this._isRtl ? (w.right = r.position().left + u(r) - u(a), g.addClass(_ + "-left")) : (w.left = a.position().left, g.addClass(_ + "-right")), w.top = b - .8666 * d(g) / 2, g.css(w), e(m).prependTo(this.content).css({ top: b, height: "1px", right: "1px", width: this.content[0].scrollWidth, left: 0 })) } }, _currentTime: function (e) { var i = this, n = i.options.currentTimeMarker; !1 !== n && n.updateInterval !== t && (i._currentTimeMarkerUpdater(), e && (i._currentTimeUpdateTimer = setInterval(f(this._currentTimeMarkerUpdater, i), n.updateInterval))) }, _updateResizeHint: function (e, t, i, n) { var o, r, a, l, d, u, h, f, p, m, g, v, _ = e.isMultiDay(), b = this.groups[t], w = b.ranges(i, n, _, e.isAllDay); for (this._removeResizeHint(), d = 0; d < w.length; d++)if (u = w[d], h = u.startSlot(), this._isGroupedByDate() && _) for (f = h.index; f <= u.end.index; f++)p = u.collection._slots[f], o = p.offsetWidth, r = p.clientHeight, a = p.offsetTop, l = c.fn._createResizeHint.call(this, p.offsetLeft, a, o, r), this._resizeHint = this._resizeHint.add(l); else o = h.offsetWidth, r = h.clientHeight, a = h.offsetTop, _ ? o = u.innerWidth() : (m = u.outerRect(i, n, this.options.snap), a = m.top, r = m.bottom - m.top), l = c.fn._createResizeHint.call(this, h.offsetLeft, a, o, r), this._resizeHint = this._resizeHint.add(l); g = "t", v = this.content, _ && (g = "M/dd", (v = this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length || (v = this.content)), this._resizeHint.appendTo(v), this._resizeHint.find(".k-label-top,.k-label-bottom").text(""), this._resizeHint.first().addClass("k-first").find(".k-label-top").text(s.toString(s.timezone.toLocalDate(i), g)), this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(s.toString(s.timezone.toLocalDate(n), g)) }, _updateMoveHint: function (e, t, i) { var n, o, r, a, l, c, d, u, h, f = e.isMultiDay(), p = this.groups[t], m = s.date.toUtcTime(e.start) + i, g = m + e.duration(), v = p.ranges(m, g, f, e.isAllDay); for (m = s.timezone.toLocalDate(m), g = s.timezone.toLocalDate(g), this._removeMoveHint(), !f && (0 === b(g) || b(g) < b(this.startTime())) && v.length > 1 && v.pop(), n = 0; n < v.length; n++)if (o = v[n], r = o.start, l = { left: r.offsetLeft + 2, top: r.offsetTop }, this._isGroupedByDate() && f) for (c = r.index; c <= o.end.index; c++)d = o.collection._slots[c], l.left = this._isRtl ? .1 * d.clientWidth + d.offsetLeft + 2 : d.offsetLeft + 2, l.height = d.offsetHeight, l.width = .9 * d.clientWidth - 4, a = this._createEventElement(e.clone({ start: m, end: g }), !f), this._appendMoveHint(a, l); else this._isRtl && (l.left = .1 * r.clientWidth + r.offsetLeft + 2), f ? l.width = o.innerWidth() - 4 : (u = o.outerRect(m, g, this.options.snap), l.top = u.top, l.height = u.bottom - u.top, l.width = .9 * r.clientWidth - 4), a = this._createEventElement(e.clone({ start: m, end: g }), !f), this._appendMoveHint(a, l); h = this.content, f && ((h = this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length || (h = this.content)), this._moveHint.appendTo(h) }, _appendMoveHint: function (e, t) { e.addClass("k-event-drag-hint"), e.css(t), this._moveHint = this._moveHint.add(e) }, _slotByPosition: function (e, t) { var i, n, o, r; for (this._isVerticallyGrouped() ? (n = this.content.offset(), t += this.content[0].scrollTop, e += this.content[0].scrollLeft) : n = this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(), n && (e -= n.left, t -= n.top), e = Math.ceil(e), t = Math.ceil(t), r = 0; r < this.groups.length; r++)if (o = this.groups[r], i = o.daySlotByPosition(e, t, this._isGroupedByDate())) return i; for (n && (e += n.left, t += n.top), n = this.content.offset(), e -= n.left, t -= n.top, this._isVerticallyGrouped() || (t += this.content[0].scrollTop, e += this.content[0].scrollLeft), e = Math.ceil(e), t = Math.ceil(t), r = 0; r < this.groups.length; r++)if (o = this.groups[r], i = o.timeSlotByPosition(e, t)) return i; return null }, _groupCount: function () { var e = this.groupedResources, t = this._isGroupedByDate(); return e.length ? "vertical" === this._groupOrientation() ? t ? this._columnCountForLevel(e.length - 1) : this._rowCountForLevel(e.length - 1) : t ? this._columnCountForLevel(e.length) / this._columnCountForLevel(0) : this._columnCountForLevel(e.length) / this._columnOffsetForResource(e.length) : 1 }, _columnCountInResourceView: function () { var e = this.groupedResources, t = this._isGroupedByDate(); return !e.length || this._isVerticallyGrouped() ? t ? this._rowCountForLevel(0) : this._columnCountForLevel(0) : t ? this._columnCountForLevel(0) : this._columnOffsetForResource(e.length) }, _timeSlotGroups: function (e, t) { var i, n, o, r, s, a, l, c, d, u, h = this._timeSlotInterval(), f = e, p = this._isGroupedByDate(), m = this.content.find("tr:not(.k-scheduler-header-all-day)"); for (m.attr("role", "row"), s = m.length, this._isVerticallyGrouped() && (p && (f = t), s = Math.floor(s / f)), a = 0; a < f; a++)for (l = 0, c = 0, this._isVerticallyGrouped() ? l = a : c = a, o = l * s; o < (l + 1) * s;) { if (d = m[o].children, o % s == 0 && (n = b(new Date(+this.startTime()))), u = 0, p) if (this._isVerticallyGrouped()) for (r = 0; r < e; r++)i = this.groups[r], this._addTimeSlotGroup(i, d, r, n, h, a); else for (i = this.groups[a], r = c; r < e * t; r += e)this._addTimeSlotGroup(i, d, r, n, h, u), u++; else for (i = this.groups[a], r = c * t; r < (c + 1) * t; r++)this._addTimeSlotGroup(i, d, r, n, h, u), u++; n += h, o++ } }, _addTimeSlotGroup: function (e, t, i, n, o, r) { var s = t[i], a = e.getTimeSlotCollection(r), l = this._dates[r], c = Date.UTC(l.getFullYear(), l.getMonth(), l.getDate()), d = c + n, u = d + o; s.setAttribute("role", "gridcell"), s.setAttribute("aria-selected", !1), a.addTimeSlot(s, d, u) }, _addDaySlotGroup: function (e, t, i, n, o) { var r = t[i], a = this._dates[o], l = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate()); r.setAttribute("role", "gridcell"), r.setAttribute("aria-selected", !1), e.addDaySlot(r, l, l + s.date.MS_PER_DAY) }, _daySlotGroups: function (e, t) { var i, n, o, r, s, a, l, c, d, u = e, h = this._isGroupedByDate(); for (this._isVerticallyGrouped() ? (h && (u = t), i = this.element.find(".k-scheduler-header-all-day")) : i = this.element.find(".k-scheduler-header-all-day tr"), i.attr("role", "row"), o = 0; o < u; o++)if (r = 0, this._isVerticallyGrouped() && (r = o), l = i[r].children, c = 0, this._isVerticallyGrouped() || (c = o), d = 0, h) if (this._isVerticallyGrouped()) for (n = 0; n < e; n++)s = this.groups[n], a = s.getDaySlotCollection(0), this._addDaySlotGroup(a, l, n, t, o); else for (s = this.groups[o], a = s.getDaySlotCollection(0), n = c; n < e * t; n += e)this._addDaySlotGroup(a, l, n, t, d), d++; else for (s = this.groups[o], a = s.getDaySlotCollection(0), n = c * t; n < (c + 1) * t; n++)this._addDaySlotGroup(a, l, n, t, d), d++ }, _groups: function () { var e, t, i, n = this._groupCount(), o = this._columnCountInResourceView(); for (this.groups = [], e = 0; e < n; e++) { for (t = this._addResourceView(e), i = 0; i < o; i++)t.addTimeSlotCollection(this._dates[i], s.date.addDays(this._dates[i], 1)); this.options.allDaySlot && t.addDaySlotCollection(this._dates[0], s.date.addDays(this._dates[this._dates.length - 1], 1)) } this._timeSlotGroups(n, o), this.options.allDaySlot && this._daySlotGroups(n, o) }, options: { name: "MultiDayView", selectedDateFormat: "{0:D}", selectedShortDateFormat: "{0:d}", allDaySlot: !0, showWorkHours: !1, title: "", startTime: s.date.today(), endTime: s.date.today(), minorTickCount: 2, majorTick: 60, majorTimeHeaderTemplate: "#=kendo.toString(date, 't')#", minorTimeHeaderTemplate: "&\\#8203;", groupHeaderTemplate: "#=text#", slotTemplate: "&nbsp;", allDaySlotTemplate: "&nbsp;", eventTemplate: y, allDayEventTemplate: k, dateHeaderTemplate: x, editable: !0, workDayStart: new Date(1980, 1, 1, 8, 0, 0), workDayEnd: new Date(1980, 1, 1, 17, 0, 0), workWeekStart: 1, workWeekEnd: 5, footer: { command: "workDay" }, messages: { allDay: "all day", showFullDay: "Show full day", showWorkDay: "Show business hours" }, currentTimeMarker: { updateInterval: 1e4, useLocalTimezone: !0 } }, events: ["remove", "add", "edit"], _templates: function () { var e = this.options, t = h({}, s.Template, e.templateSettings); this.eventTemplate = this._eventTmpl(e.eventTemplate, '<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-non-recurrence"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-up"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-down"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>'), this.allDayEventTemplate = this._eventTmpl(e.allDayEventTemplate, '<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-non-recurrence"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'), this.majorTimeHeaderTemplate = s.template(e.majorTimeHeaderTemplate, t), this.minorTimeHeaderTemplate = s.template(e.minorTimeHeaderTemplate, t), this.dateHeaderTemplate = s.template(e.dateHeaderTemplate, t), this.slotTemplate = s.template(e.slotTemplate, t), this.allDaySlotTemplate = s.template(e.allDaySlotTemplate, t), this.groupHeaderTemplate = s.template(e.groupHeaderTemplate, t) }, _editable: function () { this.options.editable && (this._isMobile() ? this._touchEditable() : this._mouseEditable()) }, _mouseEditable: function () { var t = this; t.element.on("click" + w, ".k-event a:has(.k-i-close)", function (i) { t.trigger("remove", { uid: e(this).closest(".k-event").attr(s.attr("uid")) }), i.preventDefault() }), !1 !== t.options.editable.create && t.element.on("dblclick" + w, ".k-scheduler-content td", function (i) { var n, o; e(this).parent().hasClass("k-scheduler-header-all-day") || ((n = t._slotByPosition(i.pageX, i.pageY)) && (o = t._resourceBySlot(n), t.trigger("add", { eventInfo: h({ start: n.startDate(), end: n.endDate() }, o) })), i.preventDefault()) }).on("dblclick" + w, ".k-scheduler-header-all-day td", function (e) { var i, n = t._slotByPosition(e.pageX, e.pageY); n && (i = t._resourceBySlot(n), t.trigger("add", { eventInfo: h({}, { isAllDay: !0, start: s.date.getDate(n.startDate()), end: s.date.getDate(n.startDate()) }, i) })), e.preventDefault() }), !1 !== t.options.editable.update && t.element.on("dblclick" + w, ".k-event", function (i) { t.trigger("edit", { uid: e(this).closest(".k-event").attr(s.attr("uid")) }), i.preventDefault() }) }, _touchEditable: function () { var i = this, n = 0; s.support.mobileOS.android && (n = 5), !1 !== i.options.editable.create && (i._addUserEvents = new s.UserEvents(i.element, { threshold: n, filter: ".k-scheduler-content td", tap: function (n) { var o, r, s, a; e(n.target).parent().hasClass("k-scheduler-header-all-day") || (o = n.x.location !== t ? n.x.location : n.x, r = n.y.location !== t ? n.y.location : n.y, (s = i._slotByPosition(o, r)) && (a = i._resourceBySlot(s), i.trigger("add", { eventInfo: h({ start: s.startDate(), end: s.endDate() }, a) })), n.preventDefault()) } }), i._allDayUserEvents = new s.UserEvents(i.element, { threshold: n, filter: ".k-scheduler-header-all-day td", tap: function (e) { var n, o = e.x.location !== t ? e.x.location : e.x, r = e.y.location !== t ? e.y.location : e.y, a = i._slotByPosition(o, r); a && (n = i._resourceBySlot(a), i.trigger("add", { eventInfo: h({}, { isAllDay: !0, start: s.date.getDate(a.startDate()), end: s.date.getDate(a.startDate()) }, n) })), e.preventDefault() } })), !1 !== i.options.editable.update && (i._editUserEvents = new s.UserEvents(i.element, { threshold: n, filter: ".k-event", tap: function (t) { var n = e(t.target).closest(".k-event"); n.hasClass("k-event-active") || i.trigger("edit", { uid: n.attr(s.attr("uid")) }), t.preventDefault() } })) }, _layout: function (e) { var t, i, n, o = [], r = [], a = this.options, l = this, c = l._isGroupedByDate(); for (t = 0; t < e.length; t++)(i = {}).text = l.dateHeaderTemplate({ date: e[t] }), s.date.isToday(e[t]) && (i.className = "k-today"), o.push(i); return n = this.groupedResources, a.allDaySlot && r.push({ text: a.messages.allDay, allDay: !0, cellContent: function (t) { var i = t; return t = n.length && "vertical" !== l._groupOrientation() ? t % e.length : t, l.allDaySlotTemplate({ date: e[t], resources: function () { return l._resourceBySlot({ groupIndex: i }) } }) } }), this._forTimeRange(this.startTime(), this.endTime(), function (e, t, i, n) { var o = t ? l.majorTimeHeaderTemplate : l.minorTimeHeaderTemplate, s = { text: o({ date: e }), className: n ? "k-slot-cell" : "" }; r.push(s) }), n.length && ("vertical" === this._groupOrientation() ? c ? (r = this._createDateLayout(o, r), o = this._createColumnsLayout(n, null, this.groupHeaderTemplate)) : r = this._createRowsLayout(n, r, this.groupHeaderTemplate) : o = c ? this._createColumnsLayout(n, o, this.groupHeaderTemplate, o) : this._createColumnsLayout(n, o, this.groupHeaderTemplate)), { columns: o, rows: r } }, _footer: function () { var t, i, n, o = this.options; !1 !== o.footer && (t = '<div class="k-header k-scheduler-footer">', (i = o.footer.command) && "workDay" === i ? (t += '<ul class="k-reset k-header">', t += '<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>', t += (o.showWorkHours ? o.messages.showFullDay : o.messages.showWorkDay) + "</a></li>", t += "</ul>") : t += "&nbsp;", t += "</div>", this.footer = e(t).appendTo(this.element), n = this, this.footer.on("click" + w, ".k-scheduler-fullday", function (e) { e.preventDefault(), n.trigger("navigate", { view: n.name || o.name, date: o.date, isWorkDay: !o.showWorkHours }) })) }, _forTimeRange: function (e, t, n, o) { var r, s, a, c, d, u, h, f, p, v, _, w; for (e = i(e), t = i(t), this, r = b(e), s = b(t), a = this.options.minorTickCount, c = this.options.majorTick * m, d = c / a || 1, u = new Date(+e), h = u.getDate(), p = 0, _ = "", v = g / d, r != s && (r > s && (s += g), v = (s - r) / d), v = Math.round(v); p < v; p++)_ += n(u, 0 === (w = p % (c / d)), w < a - 1, w === a - 1), l(u, d, !1); return s && (f = b(u), h < u.getDate() && (f += g), f > s && (u = new Date(+t))), o && (_ += o(u)), _ }, _content: function (e) { var t, i, n, o = this, r = o.options, s = o.startTime(), a = this.endTime(), l = 1, c = 1, d = e.length, u = "", h = this.groupedResources, f = this.allDaySlotTemplate, p = !1, m = o._isGroupedByDate(), g = 0; for (h.length && ((p = "vertical" === o._groupOrientation()) ? (c = this._rowCountForLevel(this.rowLevels.length - 2), m && (l = this._columnCountForLevel(this.columnLevels.length - 1)), r.allDaySlot && (t = function (t) { var i, n = '<tr class="k-scheduler-header-all-day">', r = m ? 0 : t, s = function () { return o._resourceBySlot({ groupIndex: r }) }; if (m) for (; r < l; r++)n += "<td>" + f({ date: e[g], resources: s }) + "</td>"; else for (i = 0; i < e.length; i++)n += "<td>" + f({ date: e[i], resources: s }) + "</td>"; return n + "</tr>" })) : l = m ? this._columnCountForLevel(this.columnLevels.length - 1) / this._columnCountForLevel(0) : this._columnCountForLevel(this.columnLevels.length - 2)), u += "<tbody>", i = function (t, i) { var r, s, a, c = "", u = 0; if (c = "<tr" + (i ? ' class="k-middle-row"' : "") + ">", m) for (r = 0, s = d; r < s; r++) { for (u = 0; u < l; u++)a = r, p && (a = g), c = o._addCellsToContent(c, e, t, a, u, n); if (p) break } else for (; u < l; u++)for (r = 0, s = d; r < s; r++)c = o._addCellsToContent(c, e, t, r, u, n); return c += "</tr>" }, n = 0; n < c; n++)u += t ? t(n) : "", u += this._forTimeRange(s, a, i), p && g++; u += "</tbody>", this.content.find("table").append(u) }, _addCellsToContent: function (e, t, i, n, o, r) { var a, l = this, c = "", d = this.slotTemplate, u = "vertical" === this._groupOrientation(); return s.date.isToday(t[n]) && (c += "k-today"), (s.date.getMilliseconds(i) < s.date.getMilliseconds(this.options.workDayStart) || s.date.getMilliseconds(i) >= s.date.getMilliseconds(this.options.workDayEnd) || !this._isWorkDay(t[n])) && (c += " k-nonwork-hour"), e += "<td" + ("" !== c ? ' class="' + c + '"' : "") + ">", a = s.date.getDate(t[n]), s.date.setTime(a, s.date.getMilliseconds(i)), e += d({ date: a, resources: function (e) { return function () { return l._resourceBySlot({ groupIndex: e }) } }(u && !l._isGroupedByDate() ? r : o) }), e += "</td>" }, _isWorkDay: function (e) { var t, i = e.getDay(), n = this._workDays; for (t = 0; t < n.length; t++)if (n[t] === i) return !0; return !1 }, _render: function (t) { var i, n = this; t = t || [], this._dates = t, this._startDate = t[0], this._endDate = t[t.length - 1 || 0], this.createLayout(this._layout(t)), this._content(t), this._footer(), this.refreshLayout(), (i = this.element.find(".k-scheduler-header-all-day td")).length && (this._allDayHeaderHeight = i.first()[0].clientHeight), n.element.on("click" + w, ".k-nav-day", function (t) { var i, o = e(t.currentTarget).closest("th"), r = o.offset(), s = 0, a = u(o); n._isGroupedByDate() && (n._isVerticallyGrouped() ? (s = d(n.times), a = 0) : a = u(n.datesHeader)), i = n._slotByPosition(r.left + s, r.top + a), n.trigger("navigate", { view: "day", date: i.startDate() }) }) }, startTime: function () { var e = this.options; return e.showWorkHours ? e.workDayStart : e.startTime }, endTime: function () { var e = this.options; return e.showWorkHours ? e.workDayEnd : e.endTime }, startDate: function () { return this._startDate }, endDate: function () { return this._endDate }, _end: function (e) { var t = b(this.endTime()) || g; return e && (t = 0), new Date(this._endDate.getTime() + t) }, nextDate: function () { return s.date.nextDay(this.endDate()) }, previousDate: function () { return s.date.previousDay(this.startDate()) }, calculateDateRange: function () { this._render([this.options.date]) }, destroy: function () { var e = this; e._currentTimeUpdateTimer && clearInterval(e._currentTimeUpdateTimer), e.datesHeader && e.datesHeader.off(w), e.element && e.element.off(w), e.footer && e.footer.remove(), c.fn.destroy.call(this), this._isMobile() && e.options.editable && (!1 !== e.options.editable.create && (e._addUserEvents.destroy(), e._allDayUserEvents.destroy()), !1 !== e.options.editable.update && e._editUserEvents.destroy()) }, inRange: function (e) { var t, i, n, o, r = c.fn.inRange.call(this, e); return e.isAllDay ? r : (t = b(this.startTime()), i = b(this.endTime()) || s.date.MS_PER_DAY, n = b(e.start), o = b(e.end) || s.date.MS_PER_DAY, r && t <= n && o <= i) }, selectionByElement: function (e) { var t = e.offset(); return this._slotByPosition(t.left, t.top) }, _timeSlotInterval: function () { var e = this.options; return e.majorTick / e.minorTickCount * m }, _timeSlotIndex: function (e) { var t = this.options, i = b(e), n = b(this.startTime()), o = t.majorTick / t.minorTickCount * m; return (i - n) / o }, _slotIndex: function (e, t) { return t ? this._dateSlotIndex(e) : this._timeSlotIndex(e) }, _dateSlotIndex: function (e, t) { var i, o, r, a, l = this._dates || []; for (i = 0, o = l.length; i < o; i++)if (r = s.date.getDate(l[i]), a = new Date(s.date.getDate(l[i]).getTime() + g - (t ? 0 : 1)), n(e, r, a)) return 1 * i; return -1 }, _positionAllDayEvent: function (t, i) { var n, o, r, s, a, l, d, u = i.innerWidth(), h = i.start.index, f = i.end.index, p = c.collidingEvents(i.events(), h, f), m = this._headerColumnCount || 0, g = h !== f ? 5 : 4, v = this._allDayHeaderHeight, _ = i.startSlot(); for (t.css({ left: _.offsetLeft + 2, width: u - g }), i.addEvent({ slotIndex: h, start: h, end: f, element: t }), p.push({ slotIndex: h, start: h, end: f, element: t }), (n = c.createRows(p)).length && n.length > m && (this._headerColumnCount = n.length), o = i.start.offsetTop, r = 0, s = n.length; r < s; r++)for (a = n[r].events, l = 0, d = a.length; l < d; l++)e(a[l].element).css({ top: o + r * v }) }, _arrangeColumns: function (e, t, i, n) { var o, r, s, a, l, d, u, h, f, p, m, g = n.start; for (e = { element: e, slotIndex: g.index, start: t, end: t + i }, r = g.clientWidth, s = .1 * r, l = n.events(), d = c.collidingEvents(l, e.start, e.end), n.addEvent(e), d.push(e), o = c.createColumns(d), u = (r - s) / o.length, h = 0, f = o.length; h < f; h++)for (a = o[h].events, p = 0, m = a.length; p < m; p++)a[p].element[0].style.width = u - 4 + "px", a[p].element[0].style.left = (this._isRtl ? s : 0) + g.offsetLeft + h * u + 2 + "px" }, _positionEvent: function (e, t, i) { var n = e._startTime || e.start, o = e._endTime || e.end, r = i.innerRect(n, o, !1), s = r.bottom - r.top - 2; s < 0 && (s = 0), t.css({ top: r.top, height: s }), this._arrangeColumns(t, r.top, t[0].clientHeight, i) }, _createEventElement: function (t, i, o, r) { var a, l, c, d, u, f, m = i ? this.eventTemplate : this.allDayEventTemplate, v = this.options, _ = v.editable, w = this._isMobile(), y = _ && !1 !== _.destroy && !w, k = _ && !1 !== _.resize, x = p(this.startDate()), C = p(this.endDate()), S = b(this.startTime()), T = b(this.endTime()), D = t._time("start"), A = t._time("end"); return S >= T && (T = b(new Date(this.endTime().getTime() + g - 1))), i || t.isAllDay || (C = new Date(C.getTime() + g)), l = t.start, c = t.end, t.isAllDay && (c = p(t.end)), !n(p(l), x, C) && !n(c, x, C) || i && D < S && A > T ? a = !0 : p(l) < x || i && D < S ? r = !0 : (c > C && !i || i && A > T) && (o = !0), d = this.eventResources(t), t._startTime && D !== s.date.getMilliseconds(t.start) && (l = new Date(D), l = s.timezone.apply(l, "Etc/UTC")), t._endTime && A !== s.date.getMilliseconds(t.end) && (c = new Date(A), c = s.timezone.apply(c, "Etc/UTC")), u = h({}, { ns: s.ns, resizable: k, showDelete: y, middle: a, head: o, tail: r, singleDay: 1 == this._dates.length, resources: d, inverseColor: !(!d || !d[0]) && this._shouldInverseResourceColor(d[0]), messages: v.messages }, t, { start: l, end: c }), f = e(m(u)), this.angular("compile", function () { return { elements: f, data: [{ dataItem: u }] } }), f }, _isInTimeSlot: function (e) { var t, i = this.startTime(), n = this.endTime(), r = e._startTime || e.start, a = e._endTime || e.end; return b(n) === b(s.date.getDate(n)) && (n = s.date.getDate(n), l(n, g - 1)), e._date("end") > e._date("start") && (a = +e._date("end") + (g - 1)), a -= e._date("end"), r -= e._date("start"), n = b(n), (i = b(i)) === r && r === a || (o(r, i, n, t = r !== n) || o(a, i, n, t) || o(i, r, a) || o(n, r, a)) }, _isInDateSlot: function (e) { var t = this.groups[0], i = t.firstSlot().start, o = t.lastSlot().end - 1, r = s.date.toUtcTime(e.start), a = s.date.toUtcTime(e.end); return (n(r, i, o) || n(a, i, o) || n(i, r, a) || n(o, r, a)) && (!n(a, i, i) || n(a, r, r) || e.isAllDay) }, _updateAllDayHeaderHeight: function (e) { var t, i; if (this._height !== e && (this._height = e, (t = this.element.find(".k-scheduler-header-all-day td")).length)) for (t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e), i = 0; i < this.groups.length; i++)this.groups[i].refresh() }, _renderEvents: function (e, t) { var i, n, o, s, a, l, c, d, u, h, f, p, m, v, _, b, w, y, k, x, C, S = this.datesHeader.find(".k-scheduler-header-wrap > div"), T = this._isGroupedByDate(); for (n = 0, o = e.length; n < o; n++)if (i = e[n], this._isInDateSlot(i)) if (s = i.isAllDay || i.end.getTime() - i.start.getTime() >= g, a = s && !this._isVerticallyGrouped() ? S : this.content, s) { if (this.options.allDaySlot && ((f = this.groups[t])._continuousEvents || (f._continuousEvents = []), (c = f.slotRanges(i)).length)) if (d = c[0], b = d.start.index, w = d.end.index, T && b !== w) for (u = d.start.start, h = d.end.end, y = new Date(u), k = new Date(u), x = d.start.index; x <= d.end.index; x++)l = this._createEventElement(i, !s, x !== w, x !== b), C = f.daySlotRanges(y, k, !0)[0], k.setDate(k.getDate() + 1), y.setDate(y.getDate() + 1), this._positionAllDayEvent(l, C), r(f, C, l, !0), l.appendTo(a); else l = this._createEventElement(i, !s), this._positionAllDayEvent(l, c[0]), r(f, c[0], l, !0), l.appendTo(a) } else if (this._isInTimeSlot(i)) for ((f = this.groups[t])._continuousEvents || (f._continuousEvents = []), c = f.slotRanges(i), p = c.length, m = 0; m < p; m++)d = c[m], u = i.start, h = i.end, p > 1 && (0 === m ? h = d.end.endDate() : m == p - 1 ? u = d.start.startDate() : (u = d.start.startDate(), h = d.end.endDate())), v = i.clone({ start: u, end: h, _startTime: i._startTime, _endTime: i.endTime }), this._isInTimeSlot(v) && (_ = d.head, (l = this._createEventElement(i, !s, _, d.tail)).appendTo(a), this._positionEvent(v, l, d), r(f, d, l, !1)) }, render: function (t) { var i, o, r, a; for (this._headerColumnCount = 0, this._groups(), this.element.find(".k-event").remove(), t = new s.data.Query(t).sort([{ field: "start", dir: "asc" }, { field: "end", dir: "desc" }]).toArray(), i = [], this._eventsByResource(t, this.groupedResources, i), o = e.map(this._dates, function (t) { return Math.max.apply(null, e.map(i, function (i) { return e.grep(i, function (e) { return e.isMultiDay() && n(t, p(e.start), p(e.end)) }).length })) }), r = Math.max.apply(null, o), this._updateAllDayHeaderHeight((r + 1) * this._allDayHeaderHeight), a = 0; a < i.length; a++)this._renderEvents(i[a], a); this.refreshLayout(), this._currentTime(!1), this.trigger("activate") }, _eventsByResource: function (e, t, i) { var n, o, r, a, l = t[0]; if (l) for (n = l.dataSource.view(), o = 0; o < n.length; o++)r = this._resourceValue(l, n[o]), a = new s.data.Query(e).filter({ field: l.field, operator: c.groupEqFilter(r) }).toArray(), t.length > 1 ? this._eventsByResource(a, t.slice(1), i) : i.push(a); else i.push(e) }, _columnOffsetForResource: function (e) { return this._columnCountForLevel(e) / this._columnCountForLevel(e - 1) }, _columnCountForLevel: function (e) { var t = this.columnLevels[e]; return t ? t.length : 0 }, _rowCountForLevel: function (e) { var t = this.rowLevels[e]; return t ? t.length : 0 }, clearSelection: function () { this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected", !1).removeClass("k-state-selected") }, _updateDirection: function (e, t, i, n, o) { var r = e.isAllDay, s = t[0].start, a = t[t.length - 1].end; i && (o ? r || s.index !== a.index || s.collectionIndex !== a.collectionIndex || (e.backward = n) : (r && s.index === a.index || !r && s.collectionIndex === a.collectionIndex) && (e.backward = n)) }, _changeViewPeriod: function (e, t, i) { var n, o, r, s, a, c, d, u, h, f, p; if (!i) return n = t ? this.previousDate() : this.nextDate(), o = e.start, r = e.end, s = this._isGroupedByDate() && this._isVerticallyGrouped(), a = this.groups[e.groupIndex], c = t ? a._timeSlotCollections : a._getCollections(a.daySlotCollectionCount()), d = c[c.length - 1]._slots, u = t || a.daySlotCollectionCount() ? d.length - 1 : 0, e.start = new Date(n), e.end = new Date(n), s ? (f = new Date(d[u].startDate()), p = new Date(d[u].endDate()), h = b(p) ? b(p) : g, l(e.start, b(f)), l(e.end, h), a.daySlotCollectionCount() && (e.isAllDay = !e.isAllDay)) : (h = e.isAllDay || !b(r) ? g : b(r), l(e.start, b(o)), l(e.end, h)), this._isVerticallyGrouped() || (e.groupIndex = t ? this.groups.length - 1 : 0), e.events = [], !0 } }); h(!0, a, { MultiDayView: C, DayView: C.extend({ options: { name: "DayView", title: "Day" }, name: "day" }), WeekView: C.extend({ options: { name: "WeekView", title: "Week", selectedDateFormat: "{0:D} - {1:D}", selectedShortDateFormat: "{0:d} - {1:d}" }, name: "week", calculateDateRange: function () { var e, t = this.options.date, i = s.date.dayOfWeek(t, this.calendarInfo().firstDay, -1), n = []; for (e = 0, 7; e < 7; e++)n.push(i), i = s.date.nextDay(i); this._render(n) } }), WorkWeekView: C.extend({ options: { name: "WorkWeekView", title: "Work Week", selectedDateFormat: "{0:D} - {1:D}", selectedShortDateFormat: "{0:d} - {1:d}" }, name: "workWeek", nextDate: function () { var e = s.date.dayOfWeek(s.date.nextDay(this.startDate()), this.calendarInfo().firstDay, 1); return s.date.addDays(e, this._workDays[0]) }, previousDate: function () { var e = s.date.dayOfWeek(this.startDate(), this.calendarInfo().firstDay, -1), t = this._workDays; return s.date.addDays(e, t[t.length - 1] - 7) }, calculateDateRange: function () { for (var e = this.options.date, t = s.date.dayOfWeek, i = t(e, this.calendarInfo().firstDay, -1), n = t(i, this.options.workWeekStart, 1), o = t(n, this.options.workWeekEnd, 1), r = []; n <= o;)r.push(n), n = s.date.nextDay(n); this._render(r) } }) }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.agendaview.min", ["kendo.scheduler.view.min"], function () { return function (e) { function t(e) { var t, i, n = 0; for (t = 0, i = e.length; t < i; t++)n += e[t].items.length; return n } function i(e, t) { return e.valuePrimitive && (t = r.getter(e.dataValueField)(t)), t } function n(e) { for (var t, i = 0, n = e.length, r = []; i < n; i++)(t = e[i]).groups ? (t = o(t.groups), r = r.concat(t)) : r = r.concat(o(t.items)); return r } function o(e) { for (var t = [].concat(e), i = t.shift(), n = [], o = [].push; i;)i.groups ? o.apply(t, i.groups) : i.items ? o.apply(t, i.items) : o.call(n, i), i = t.shift(); return n } var r = window.kendo, s = r.ui, a = ".kendoAgendaView", l = r.Class.extend({ init: function (e) { this._view = e }, _getColumns: function (e, t) { return e.concat(t) }, _getGroupsInDay: function () { return [] }, _getSumOfItemsForDate: function () { return 0 }, _renderTaskGroupsCells: function (e, t, i, n) { var o = this._view; 0 === i && 0 === n && t.length && o._renderTaskGroupsCells(e, t) }, _renderDateCell: function (e, t, i, n, o, s) { var a = this._view; e.push(r.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>', i.length, a._dateTemplate({ date: n }), o != s.length - 1 || t.length ? "" : " k-last", t.length ? "" : " k-first")) }, _renderDates: function () { }, _getParents: function (e) { return e.splice(0) }, _getGroupsByDate: function () { }, _renderTaskGroups: function (e, t, i) { var n = this._view; e.append(n._renderTaskGroups(t, i)) } }), c = r.Class.extend({ init: function (e) { this._view = e }, _getColumns: function (e, t) { var i, n, o = this._view; return o._isMobilePhoneView() ? e.concat(t) : (i = t.slice(0, 1), n = t.slice(1), i.concat(e).concat(n)) }, _compareDateGroups: function (e, t, i) { return e[i].text == t[i].text && (0 === i || this._compareDateGroups(e, t, i - 1)) }, _getGroupsInDay: function (e, t) { var i, n, o, r, s, a = [], l = null; for (i = 0; i < e.length; i++)for (n = 0; n < e[i].items.length; n++) { if (o = 0, 0 === a.length) for (; o < t[i].length; o++)a.push([1]); else for (; o < t[i].length; o++)if (this._compareDateGroups(t[i], l, o)) a[o][a[o].length - 1]++; else { for (r = a[o][a[o].length - 1] - 1, s = 0; s < r; s++)a[o].push(0); a[o].push(1) } l = t[i] } return a }, _getSumOfItemsForDate: function (e) { var t, i = 0; for (t = 0; t < e.length; t++)i += e[t].items.length; return i }, _renderTaskGroupsCells: function (e, t, i, n, o, s, a, l) { var c, d = this._view, u = d._isMobilePhoneView(); if (u) 0 === i && 0 === n && t.length && d._renderTaskGroupsCells(e, t); else for (0 === i && 0 === n && e.push(r.format('<td class="k-scheduler-datecolumn k-first" rowspan="{0}">{1}</td>', s, d._dateTemplate({ date: a }))), c = 0; c < t[i].length; c++)o[c][l] && e.push(r.format('<td class="k-scheduler-groupcolumn" rowspan="{0}">{1}</td>', o[c][l], d._groupTemplate({ value: t[i][c].text }), t[i][c].className)) }, _renderDateCell: function () { }, _renderDates: function (e) { var t, i = this._view, n = i._groupsByDate.sort(function (e, t) { return e.array[0].value.getTime() - t.array[0].value.getTime() }); for (t = 0; t < n.length; t++)e.append(i._renderTaskGroups(n[t].array, n[t].groups)) }, _getParents: function (e) { return e.slice(0) }, _getGroupsByDate: function (e, t, i) { var n, o, r, s, a = this._view; if (e[t].items) for (n = 0; n < e[t].items.length; n++) { for (o = e[t].items[n].value, r = !1, s = 0; s < a._groupsByDate.length; s++)a._groupsByDate[s].array[0].value.getTime() === o.getTime() && (r = !0, a._groupsByDate[s].array.push(e[t].items[n]), a._groupsByDate[s].groups.push(i)); r || a._groupsByDate.push({ array: [e[t].items[n]], groups: [i] }) } }, _renderTaskGroups: function () { } }); r.ui.scheduler.AgendaGroupedView = l, r.ui.scheduler.AgendaGroupedByDateView = c, s.AgendaView = s.SchedulerView.extend({ init: function (t, i) { s.SchedulerView.fn.init.call(this, t, i), this._groupedView = this._getGroupedView(), (i = this.options).editable && (i.editable = e.extend({ delete: !0 }, i.editable, { create: !1, update: !1 }, { messages: i.messages })), this.title = i.title, this._eventTemplate = this._eventTmpl(i.eventTemplate, '<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-non-recurrence"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}#</div>'), this._dateTemplate = r.template(i.eventDateTemplate), this._groupTemplate = r.template(i.eventGroupTemplate), this._timeTemplate = r.template(i.eventTimeTemplate), this.element.on("mouseenter" + a, ".k-scheduler-agenda .k-scheduler-content tr", "_mouseenter").on("mouseleave" + a, ".k-scheduler-agenda .k-scheduler-content tr", "_mouseleave").on("click" + a, ".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-i-close)", "_remove"), this._renderLayout(i.date) }, name: "agenda", _getGroupedView: function () { return this._isGroupedByDate() ? new r.ui.scheduler.AgendaGroupedByDateView(this) : new r.ui.scheduler.AgendaGroupedView(this) }, _mouseenter: function (t) { e(t.currentTarget).addClass("k-state-hover") }, _mouseleave: function (t) { e(t.currentTarget).removeClass("k-state-hover") }, _remove: function (t) { t.preventDefault(), this.trigger("remove", { uid: e(t.currentTarget).closest(".k-task").attr(r.attr("uid")) }) }, nextDate: function () { return r.date.nextDay(this.startDate()) }, startDate: function () { return this._startDate }, endDate: function () { return this._endDate }, previousDate: function () { return r.date.previousDay(this.startDate()) }, _renderLayout: function (e) { this._startDate = e, this._endDate = r.date.addDays(e, 7), this.createLayout(this._layout()), this.table.addClass("k-scheduler-agenda") }, _layout: function () { var e, t, i, n = [{ text: this.options.messages.time, className: "k-scheduler-timecolumn" }, { text: this.options.messages.event }]; if (this._isMobilePhoneView() || n.splice(0, 0, { text: this.options.messages.date, className: "k-scheduler-datecolumn" }), (e = this.groupedResources).length) { for (t = [], i = 0; i < e.length; i++)t.push({ text: "", className: "k-scheduler-groupcolumn" }); n = this._groupedView._getColumns(t, n) } return { columns: n } }, _tasks: function (e) { var t, i, n, o, s, a, l, c = []; for (t = 0; t < e.length; t++)if (i = e[t], n = i.start, o = i.isAllDay ? r.date.getDate(i.end) : i.end, s = Math.ceil((o - r.date.getDate(n)) / r.date.MS_PER_DAY), i.isAllDay && (s += 1), (a = i.clone()).startDate = r.date.getDate(n), a.startDate >= this.startDate() && c.push(a), s > 1) for (a.end = r.date.nextDay(n), a.head = !0, l = 1; l < s; l++)n = a.end, (a = i.clone()).start = a.startDate = r.date.getDate(n), a.end = r.date.nextDay(n), l == s - 1 ? (a.end = new Date(a.start.getFullYear(), a.start.getMonth(), a.start.getDate(), o.getHours(), o.getMinutes(), o.getSeconds(), o.getMilliseconds()), a.tail = !0) : (a.isAllDay = !0, a.middle = !0), (r.date.getDate(a.end) <= this.endDate() && a.start >= this.startDate() || r.date.getDate(a.start).getTime() == this.endDate().getTime()) && c.push(a); return new r.data.Query(c).sort([{ field: "start", dir: "asc" }, { field: "end", dir: "asc" }]).groupBy({ field: "startDate" }).toArray() }, _renderTaskGroups: function (e, t) { var i, n, o, s, a, l, c, d, u = [], h = this.options.editable, f = h && !1 !== h.destroy && !this._isMobile(), p = this._isMobilePhoneView(), m = this._groupedView._getSumOfItemsForDate(e), g = this._groupedView._getGroupsInDay(e, t), v = 0; for (i = 0; i < e.length; i++)for (n = e[i].value, o = e[i].items, s = r.date.isToday(n), a = 0; a < o.length; a++)l = o[a], c = [], d = p ? [] : c, this._groupedView._renderTaskGroupsCells(d, t, i, a, g, m, n, v), v++, 0 === a && (p ? (d.push(r.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>', this._dateTemplate({ date: n }))), u.push('<tr role="row" aria-selected="false"' + (s ? ' class="k-today">' : ">") + d.join("") + "</tr>")) : this._groupedView._renderDateCell(c, t, o, n, i, e)), l.format = l.head ? "{0:t}" : l.tail ? "{1:t}" : "{0:t}-{1:t}", l.resources = this.eventResources(l), c.push(r.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>', l.tail || l.middle ? '<span class="k-icon k-i-arrow-60-left"></span>' : "", this._timeTemplate(l.clone({ start: l._startTime || l.start, end: l.endTime || l.end })), l.head || l.middle ? '<span class="k-icon k-i-arrow-60-right"></span>' : "", this._eventTemplate(l.clone({ showDelete: f, messages: this.options.messages })))), u.push('<tr role="row" aria-selected="false"' + (s ? ' class="k-today">' : ">") + c.join("") + "</tr>"); return u.join("") }, _renderTaskGroupsCells: function (e, t) { for (var i = 0; i < t.length; i++)e.push(r.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>', t[i].rowSpan, this._groupTemplate({ value: t[i].text }), t[i].className)) }, render: function (e) { var t, i, o = this.content.find("table").empty(), r = []; e.length > 0 && ((t = this.groupedResources).length ? (r = this._createGroupConfiguration(e, t, null), this._groupsByDate = [], this._renderGroups(r, o, []), this._groupedView._renderDates(o)) : (r = this._tasks(e), o.append(this._renderTaskGroups(r, [])))), i = this._eventsList = n(r), this._angularItems(o, i), this.refreshLayout(), this.trigger("activate") }, _angularItems: function (e, t) { this.angular("compile", function () { var i = [], n = t.map(function (t) { return i.push({ dataItem: t }), e.find(".k-task[" + r.attr("uid") + "=" + t.uid + "]") }); return { elements: n, data: i } }) }, _renderGroups: function (e, t, i) { var n, o, r; for (n = 0, o = e.length; n < o; n++)(r = this._groupedView._getParents(i)).push(e[n]), this._groupedView._getGroupsByDate(e, n, r), e[n].groups ? this._renderGroups(e[n].groups, t, r) : this._groupedView._renderTaskGroups(t, e[n].items, r) }, _createGroupConfiguration: function (e, n, o) { var a, l, c, d, u, h, f, p = n[0], m = [], g = p.dataSource.view(), v = this._isMobilePhoneView(); for (a = 0; a < g.length; a++)l = i(p, g[a]), (c = new r.data.Query(e).filter({ field: p.field, operator: s.SchedulerView.groupEqFilter(l) }).toArray()).length && (d = this._tasks(c), u = o ? "" : " k-first", a === g.length - 1 && (!o || o.className.indexOf("k-last") > -1) && (u += " k-last"), h = { text: r.getter(p.dataTextField)(g[a]), value: l, rowSpan: 0, className: u }, n.length > 1 ? (h.groups = this._createGroupConfiguration(c, n.slice(1), h), o && (o.rowSpan += h.rowSpan)) : (h.items = d, f = t(h.items), v && (f += h.items.length), h.rowSpan = f, o && (o.rowSpan += f)), m.push(h)); return m }, selectionByElement: function (t) { var i, n, o; if (!(t = e(t)).hasClass("k-scheduler-datecolumn") && this._eventsList.length) return t.is(".k-task") && (t = t.closest("td")), this._isMobile() ? (o = t.parent(), i = o.parent().children().filter(function () { return e(this).children(":not(.k-scheduler-datecolumn)").length }).index(o)) : i = t.parent().index(), n = this._eventsList[i], { index: i, start: n.start, end: n.end, isAllDay: n.isAllDay, uid: n.uid } }, select: function (e) { this.clearSelection(); var t = this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected", !0)[0]; this.current(t) }, move: function (e, t) { var i, n = !1, o = e.index; return t == r.keys.UP ? (o--, n = !0) : t == r.keys.DOWN && (o++, n = !0), n && ((i = this._eventsList[o]) && (e.start = i.start, e.end = i.end, e.isAllDay = i.isAllDay, e.events = [i.uid], e.index = o)), n }, moveToEvent: function () { return !1 }, constrainSelection: function (e) { var t = this._eventsList[0]; t && (e.start = t.start, e.end = t.end, e.isAllDay = t.isAllDay, e.events = [t.uid], e.index = 0) }, isInRange: function () { return !0 }, destroy: function () { this.element && this.element.off(a), s.SchedulerView.fn.destroy.call(this) }, options: { title: "Agenda", name: "agenda", editable: !0, selectedDateFormat: "{0:D}-{1:D}", selectedShortDateFormat: "{0:d} - {1:d}", eventTemplate: "#:title#", eventTimeTemplate: "#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #", eventDateTemplate: '<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>', eventGroupTemplate: '<strong class="k-scheduler-adgendagroup">#=value#</strong>', messages: { event: "Event", date: "Date", time: "Time", allDay: "all day" } } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.monthview.min", ["kendo.scheduler.view.min"], function () { return function (e) { function t(e, t, i) { var n, o = t, r = i; return (n = e) >= o && n <= r } var i = window.kendo, n = i.ui, o = n.SchedulerView, r = ".kendoMonthView", s = e.extend, a = i.date.getDate, l = i.date.MS_PER_DAY, c = i.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'), d = i.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'), u = i.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>'), h = i.Class.extend({ init: function (e) { this._view = e }, _verticalRowCountForLevel: function (e) { var t = this._view; return t._rowCountForLevel(e) }, _horizontalGroupCountForLevel: function (e) { var t = this._view; return t._columnCountForLevel(e) }, _getCalendarRowsLength: function (e, t) { return t / e }, _createRows: function (e, t, i, n) { var o, r = this._view, s = r._isVerticallyGrouped(), a = ""; for (o = 0; o < i; o++)a += r._createRow(e, t, 7, s ? n : o); return a }, _adjustStartDate: function (e) { return i.date.addDays(e, 7) }, _getContent: function (e, t, i) { return e({ date: t, resources: i }) }, _getTimeSlotByPosition: function (e, t, i) { var n = this._view.groups[i]; return n.daySlotByPosition(e, t) }, _nextSlotStartDate: function (e) { return i.date.nextDay(e) }, _createRowsLayout: function (e, t, i) { var n = this._view; return n._createRowsLayout(e, t, i) }, _createVerticalColumnsLayout: function (e, t, i, n) { return n }, _createColumnsLayout: function (e, t, i) { var n = this._view; return n._createColumnsLayout(e, t, i) }, _verticalGroupCount: function (e) { var t = this._view; return t._rowCountForLevel(e) }, _horizontalGroupCount: function (e) { var t = this._view; return t._columnCountForLevel(e) / t._columnOffsetForResource(e) }, _positionEvent: function (e, t, i, n, o, r, s) { var a, l = this._view, c = l._isMobilePhoneView(); n > 1 && (0 === s ? r = i.end.endDate() : s == n - 1 ? o = i.start.startDate() : (o = i.start.startDate(), r = i.end.endDate())), a = e.clone({ start: o, end: r, head: i.head, tail: i.tail }), c ? l._positionMobileEvent(i, l._createEventElement(a), t) : l._positionEvent(i, l._createEventElement(a), t) }, _addDaySlotCollections: function (e, t, n) { var o, r, s, a, l, c, d, u, h, f, p, m = this._view; for (o = 0; o < e; o++)for (r = 0, s = 0, m._isVerticallyGrouped() && (s = o), a = 6 * s; a < 6 * (s + 1); a++)for (l = m.groups[o], c = l.addDaySlotCollection(i.date.addDays(n, r), i.date.addDays(n, r + 7)), d = t[a], u = d.children, h = 0, d.setAttribute("role", "row"), m._isVerticallyGrouped() || (h = o), f = 7 * h; f < 7 * (h + 1); f++)p = u[f], m.addDaySlot(c, p, n, r), r++ }, _changePeriodGroupIndex: function (e) { var t = this._view; return e ? t.groups.length - 1 : 0 }, _createResizeHint: function (e) { var t = this._view, i = e.startSlot().offsetLeft, n = e.start.offsetTop, r = e.innerWidth(), s = e.start.clientHeight - 2, a = o.fn._createResizeHint.call(t, i, n, r, s); t._appendResizeHint(a) }, _createMoveHint: function (e, t) { var i = this._view, n = e.startSlot(), o = e.endSlot(), r = i._createEventElement(t.clone({ head: e.head, tail: e.tail })); r.css({ left: n.offsetLeft + 2, top: n.offsetTop + n.firstChildHeight, height: i.options.eventHeight, width: e.innerWidth() - (n.index !== o.index ? 5 : 4) }), r.addClass("k-event-drag-hint"), i._appendMoveHint(r) } }), f = i.Class.extend({ init: function (e) { this._view = e }, _verticalRowCountForLevel: function () { return 1 }, _horizontalGroupCountForLevel: function (e) { var t = this._view; return t._columnCountForLevel(e + 1) / 7 }, _createRows: function (e, t, n) { var o, r, s = this._view, a = s._isVerticallyGrouped(), l = "", c = 0; if (a) { for (o = new Date(e), r = s._groupCount(); c < 6; c++)l += s._createRow(o, t, r, c), o = i.date.addDays(o, 7); e = i.date.nextDay(e) } else { for (; c < 7; c++)l += s._createRow(e, t, n, c), e = i.date.nextDay(e); e = i.date.addDays(e, 7) } return l }, _adjustStartDate: function (e, t) { var n = this._view, o = n._isVerticallyGrouped(); return o ? t ? i.date.addDays(e, 36) : i.date.nextDay(e) : i.date.addDays(e, 7) }, _getContent: function (e, t, i, n) { return 0 === n ? e({ date: t, resources: i }) : "" }, _getTimeSlotByPosition: function (e, t, i) { var n = this._view.groups[i]; return n.daySlotByPosition(e, t, !0) }, _nextSlotStartDate: function (e) { return e }, _getCalendarRowsLength: function () { var e = this._view, t = e._isVerticallyGrouped(); return t ? 7 : 6 }, _createRowsLayout: function (e, t, i, n) { var o = this._view; return o._createDateLayout(n, null, !1) }, _createVerticalColumnsLayout: function (e, t, n) { var o, r, s = this._view, a = e[0], l = [], c = a.dataSource.view(); for (o = 0; o < 6 * c.length; o++)(r = { text: n({ text: i.htmlEncode(i.getter(a.dataTextField)(c[o % c.length])), color: i.getter(a.dataColorField)(c[o % c.length]), field: a.field, title: a.title, name: a.name, value: i.getter(a.dataValueField)(c[o % c.length]) }), className: "k-slot-cell" }).columns = s._createColumnsLayout(e.slice(1), null, n), l.push(r); return l }, _createColumnsLayout: function (e, t, i, n) { var o = this._view; return o._createColumnsLayout(e, t, i, n, !0) }, _verticalGroupCount: function (e) { var t = this._view; return t._columnCountForLevel(e) / 6 }, _horizontalGroupCount: function (e) { var t = this._view; return t._columnCountForLevel(e) / 7 }, _positionEvent: function (e, t, i, n, o, r) { var s, a, l, c, d = this._view, u = i.start.index, h = i.end.index, f = d._isMobilePhoneView(); for (s = i.start.index; s <= i.end.index; s++)a = i.collection._slots[s], l = t.daySlotRanges(a.start, a.start, !0)[0], c = e.clone({ start: s === u ? a.start : o, end: s === h ? a.end : r, head: s !== h || i.head, tail: s !== u || i.tail }), f ? d._positionMobileEvent(l, d._createEventElement(c), t) : d._positionEvent(l, d._createEventElement(c), t) }, _addDaySlotCollections: function (e, t, n) { var o, r, s, a, l, c, d, u, h, f, p, m, g = this._view, v = g._isVerticallyGrouped(); for (o = 0; o < 7; o++)for (r = 0; r < 6; r++)for (s = 0, a = t[v ? o : r], l = a.children, c = 0, a.setAttribute("role", "row"), g._isVerticallyGrouped() || (c = o), d = c * e; d < (c + 1) * e; d++)u = 7 * r + o, h = l[v ? d + r * e : d], f = v ? d : s, p = g.groups[f], m = 0 === o ? p.addDaySlotCollection(i.date.addDays(n, u), i.date.addDays(n, u + 7)) : p._daySlotCollections[r], g.addDaySlot(m, h, n, u), s++ }, _changePeriodGroupIndex: function (e, t, i) { var n = this._view; return t && n._isVerticallyGrouped() ? e ? n.groups.length - 1 : 0 : i }, _createResizeHint: function (e) { var t, i, n, r, s, a, l, c = this._view; if (c._isVerticallyGrouped()) t = e.startSlot().offsetLeft, i = e.start.offsetTop, n = e.startSlot().offsetWidth, r = e.endSlot().offsetTop + e.startSlot().offsetHeight - e.startSlot().offsetTop - 2, s = o.fn._createResizeHint.call(c, t, i, n, r), c._appendResizeHint(s); else for (a = e.startSlot().index; a <= e.endSlot().index; a++)l = e.collection._slots[a], t = l.offsetLeft, i = l.offsetTop, n = l.offsetWidth, r = l.offsetHeight - 2, s = o.fn._createResizeHint.call(c, t, i, n, r), c._appendResizeHint(s) }, _createMoveHint: function (e, t) { var i, n, o, r = this._view, s = e.startSlot(), a = e.endSlot(); for (i = s.index; i <= a.index; i++)n = e.collection._slots[i], (o = r._createEventElement(t.clone({ head: e.head, tail: e.tail }))).css({ left: n.offsetLeft, top: n.offsetTop + n.firstChildHeight, height: r.options.eventHeight, width: n.offsetWidth - 2 }), o.addClass("k-event-drag-hint"), r._appendMoveHint(o) } }); i.ui.scheduler.MonthGroupedView = h, i.ui.scheduler.MonthGroupedByDateView = f, n.MonthView = o.extend({ init: function (e, t) { var i = this; o.fn.init.call(i, e, t), i._groupedView = i._getGroupedView(), i.title = i.options.title, i._templates(), i._editable(), i._renderLayout(i.options.date), i._groups() }, name: "month", _getGroupedView: function () { return this._isGroupedByDate() ? new i.ui.scheduler.MonthGroupedByDateView(this) : new i.ui.scheduler.MonthGroupedView(this) }, _updateDirection: function (e, t, i, n, o) { var r, s, a, l; i && (r = t[0].start, s = t[t.length - 1].end, a = r.index === s.index, l = r.collectionIndex === s.collectionIndex, (o ? a && l || l : a && l) && (e.backward = n)) }, _changeDate: function (e, t, i) { var n, o, r = this.groups[e.groupIndex]; if (i) { if (n = r._getCollections(r.daySlotCollectionCount()), (o = t.collectionIndex - 1) >= 0) return n[o]._slots[n[o]._slots.length - 1] } else if (n = r._getCollections(r.daySlotCollectionCount()), o = t.collectionIndex + 1, 0, n[o] && n[o]._slots[0]) return n[o]._slots[0] }, _getNextHorizontalRange: function (e, t, i) { var n = this._isVerticallyGrouped(); return i.startSlot = e[t](i.startSlot, n), i.endSlot = e[t](i.endSlot, n), i }, _getNextVerticalRange: function (e, t, i, n) { var o = this._isVerticallyGrouped() && this._isGroupedByDate(); return i.startSlot = e[t](i.startSlot, n, o), i.endSlot = e[t](i.endSlot, n, o), i }, _changeViewPeriod: function (e, t, n) { var o = n ? 7 : 1; return t && (o *= -1), e.start = i.date.addDays(e.start, o), e.end = i.date.addDays(e.end, o), (!n || n && this._isVerticallyGrouped()) && (e.groupIndex = this._groupedView._changePeriodGroupIndex(t, n, e.groupIndex)), e.events = [], !0 }, _continuousSlot: function (e, t, i) { var n = e.backward ? 0 : t.length - 1, o = this.groups[e.groupIndex]; return o.continuousSlot(t[n].start, i) }, _changeGroupContinuously: function (e, t, i, n) { var o, r, s, a; return i || (o = e.groupIndex, r = this.groups.length - 1, s = this._isVerticallyGrouped(), a = this.groups[o], !t && s ? (t = a[n ? "lastSlot" : "firstSlot"](), o += n ? -1 : 1) : t && !s && (o = n ? r : 0), (o < 0 || o > r) && (o = n ? r : 0, t = null), e.groupIndex = o), t }, _normalizeHorizontalSelection: function (e, t, i) { return i ? t[0].start : t[t.length - 1].end }, _normalizeVerticalSelection: function (e, t) { return e.backward ? t[0].start : t[t.length - 1].end }, _templates: function () { var e = this.options, t = s({}, i.Template, e.templateSettings); this.eventTemplate = this._eventTmpl(e.eventTemplate, '<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-non-recurrence"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>'), this.dayTemplate = i.template(e.dayTemplate, t), this.groupHeaderTemplate = i.template(e.groupHeaderTemplate, t) }, dateForTitle: function () { return i.format(this.options.selectedDateFormat, this._firstDayOfMonth, this._lastDayOfMonth) }, shortDateForTitle: function () { return i.format(this.options.selectedShortDateFormat, this._firstDayOfMonth, this._lastDayOfMonth) }, nextDate: function () { return i.date.nextDay(this._lastDayOfMonth) }, previousDate: function () { return i.date.previousDay(this._firstDayOfMonth) }, startDate: function () { return this._startDate }, endDate: function () { return this._endDate }, _renderLayout: function (t) { var n = this; this._firstDayOfMonth = i.date.firstDayOfMonth(t), this._lastDayOfMonth = i.date.lastDayOfMonth(t), this._startDate = function (e, t) { for (var n = t.firstDay, o = new Date(e.getFullYear(), e.getMonth(), 0, e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds()); o.getDay() != n;)i.date.setTime(o, -1 * l); return o }(t, this.calendarInfo()), this.createLayout(this._layout()), this._content(), this.refreshLayout(), this.content.on("click" + r, ".k-nav-day,.k-more-events", function (t) { var i = e(t.currentTarget).offset(), o = n._slotByPosition(i.left, i.top); t.preventDefault(), n.trigger("navigate", { view: "day", date: o.startDate() }) }) }, _editable: function () { this.options.editable && !this._isMobilePhoneView() && (this._isMobile() ? this._touchEditable() : this._mouseEditable()) }, _mouseEditable: function () { var t = this; t.element.on("click" + r, ".k-scheduler-monthview .k-event a:has(.k-i-close)", function (n) { t.trigger("remove", { uid: e(this).closest(".k-event").attr(i.attr("uid")) }), n.preventDefault() }), !1 !== t.options.editable.create && t.element.on("dblclick" + r, ".k-scheduler-monthview .k-scheduler-content td", function (i) { var n, o = e(i.currentTarget).offset(), r = t._slotByPosition(o.left, o.top); r && (n = t._resourceBySlot(r), t.trigger("add", { eventInfo: s({ isAllDay: !0, start: r.startDate(), end: r.startDate() }, n) })), i.preventDefault() }), !1 !== t.options.editable.update && t.element.on("dblclick" + r, ".k-scheduler-monthview .k-event", function (n) { t.trigger("edit", { uid: e(this).closest(".k-event").attr(i.attr("uid")) }), n.preventDefault() }) }, _touchEditable: function () { var t = this, n = 0; i.support.mobileOS.android && (n = 5), !1 !== t.options.editable.create && (t._addUserEvents = new i.UserEvents(t.element, { threshold: n, filter: ".k-scheduler-monthview .k-scheduler-content td", tap: function (i) { var n, o = e(i.target).offset(), r = t._slotByPosition(o.left, o.top); r && (n = t._resourceBySlot(r), t.trigger("add", { eventInfo: s({ isAllDay: !0, start: r.startDate(), end: r.startDate() }, n) })), i.preventDefault() } })), !1 !== t.options.editable.update && (t._editUserEvents = new i.UserEvents(t.element, { threshold: n, filter: ".k-scheduler-monthview .k-event", tap: function (n) { 0 === e(n.event.target).closest("a:has(.k-i-close)").length && (t.trigger("edit", { uid: e(n.target).closest(".k-event").attr(i.attr("uid")) }), n.preventDefault()) } })) }, selectionByElement: function (t) { var i = e(t).offset(); return this._slotByPosition(i.left, i.top) }, _columnCountForLevel: function (e) { var t = this.columnLevels[e]; return t ? t.length : 0 }, _rowCountForLevel: function (e) { var t = this.rowLevels[e]; return t ? t.length : 0 }, _content: function () { var e, t = "<tbody>", i = 1, n = this._groupedView, o = this.groupedResources; for (o.length && this._isVerticallyGrouped() && (i = n._verticalRowCountForLevel(o.length - 1)), e = 0; e < i; e++)t += this._createCalendar(e); t += "</tbody>", this.content.find("table").html(t) }, _createCalendar: function (e) { var t, n, o, r = this.startDate(), s = [r], a = "", l = 1, c = this._isVerticallyGrouped(), d = this._groupedView, u = this.groupedResources; for (u.length && (c || (l = d._horizontalGroupCountForLevel(u.length - 1))), this._slotIndices = {}, t = d._getCalendarRowsLength(7, 42), n = 0; n < t; n++)a += "<tr>", s.push(r), o = 7 * n, a += d._createRows(r, o, l, e), r = d._adjustStartDate(r, n === t - 1), a += "</tr>"; return this._weekStartDates = s, this._endDate = i.date.previousDay(r), a }, _createRow: function (e, t, n, o) { var r, s = this, l = s._firstDayOfMonth, c = s._lastDayOfMonth, d = s.dayTemplate, u = "", h = "", f = this._groupedView, p = function () { return s._resourceBySlot({ groupIndex: o }) }; for (r = 0; r < n; r++)u = "", i.date.isToday(e) && (u += "k-today"), i.date.isInDateRange(e, l, c) || (u += " k-other-month"), h += "<td ", "" !== u && (h += 'class="' + u + '"'), h += ">", h += f._getContent(d, e, p, r), h += "</td>", s._slotIndices[a(e).getTime()] = t + r, e = f._nextSlotStartDate(e); return h }, _layout: function () { var t, i, n, o = this.calendarInfo(), r = this._isMobile() ? o.days.namesShort : o.days.names, s = function (e, t) { return e.slice(t).concat(e.slice(0, t)) }(r, o.firstDay), a = e.map(s, function (e) { return { text: e } }), l = this.groupedResources, c = this._groupedView; if (l.length) if (this._isVerticallyGrouped()) { for (i = [], n = 0; n < 6; n++)i.push({ text: "<div>&nbsp;</div>", className: "k-hidden k-slot-cell" }); t = c._createRowsLayout(l, i, this.groupHeaderTemplate, a), a = c._createVerticalColumnsLayout(l, i, this.groupHeaderTemplate, a) } else a = c._createColumnsLayout(l, a, this.groupHeaderTemplate, a); return { columns: a, rows: t } }, _createEventElement: function (t) { var n, o = this.options, r = o.editable, s = this._isMobile(); return t.showDelete = r && !1 !== r.destroy && !s, t.resizable = r && !1 !== r.resize && !s, t.ns = i.ns, t.resources = this.eventResources(t), t.inverseColor = !(!t.resources || !t.resources[0]) && this._shouldInverseResourceColor(t.resources[0]), t.messages = o.messages || { destroy: "Delete" }, n = e(this.eventTemplate(t)), this.angular("compile", function () { return { elements: n, data: [{ dataItem: t }] } }), n }, _isInDateSlot: function (e) { var n = this.groups[0], o = n.firstSlot().start, r = n.lastSlot().end - 1, s = i.date.toUtcTime(e.start), a = i.date.toUtcTime(e.end); return (t(s, o, r) || t(a, o, r) || t(o, s, a) || t(r, s, a)) && (!t(a, o, o) || t(a, s, s) || e.isAllDay) }, _slotIndex: function (e) { return this._slotIndices[a(e).getTime()] }, _positionMobileEvent: function (t, n, r) { var s, a, l, c, d, u, h = t.start; t.start.offsetLeft > t.end.offsetLeft && (h = t.end), s = t.start.index, a = s, (l = o.collidingEvents(t.events(), s, a)).push({ element: n, start: s, end: a }), c = o.createRows(l), d = t.collection.at(s), (u = d.container) || (u = e(i.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>', h.offsetTop + h.firstChildTop + h.firstChildHeight - 3 + "px", h.offsetLeft + "px", h.offsetWidth + "px")), d.container = u, this.content[0].appendChild(u[0])), c.length <= 3 && (t.addEvent({ element: n, start: s, end: a, groupIndex: h.groupIndex }), r._continuousEvents.push({ element: n, uid: n.attr(i.attr("uid")), start: t.start, end: t.end }), u[0].appendChild(n[0])) }, _positionEvent: function (t, n, r) { var s, a, l, c, d, h, f, p, m, g, v, _, b, w, y, k = this.options.eventHeight, x = t.start; for (t.start.offsetLeft > t.end.offsetLeft && (x = t.end), s = t.start.index, a = t.end.index, l = x.eventCount, c = o.collidingEvents(t.events(), s, a), d = s !== a ? 5 : 4, c.push({ element: n, start: s, end: a }), h = o.createRows(c), f = 0, p = Math.min(h.length, l); f < p; f++)for (m = h[f].events, g = x.offsetTop + x.firstChildHeight + f * k + 3 * f + "px", v = 0, _ = m.length; v < _; v++)m[v].element[0].style.top = g; if (h.length > l) for (b = s; b <= a; b++) { if (w = t.collection, (y = w.at(b)).more) return; y.more = e(u({ ns: i.ns, start: b, end: b, width: y.clientWidth - 2, left: y.offsetLeft + 2, top: y.offsetTop + y.firstChildHeight + l * k + 3 * l })), this.content[0].appendChild(y.more[0]) } else t.addEvent({ element: n, start: s, end: a, groupIndex: x.groupIndex }), n[0].style.width = t.innerWidth() - d + "px", n[0].style.left = x.offsetLeft + 2 + "px", n[0].style.height = k + "px", r._continuousEvents.push({ element: n, uid: n.attr(i.attr("uid")), start: t.start, end: t.end }), n.appendTo(this.content) }, _slotByPosition: function (e, t) { var i, n, o = this.content.offset(); for (e -= o.left, t -= o.top, t += this.content[0].scrollTop, e += this.content[0].scrollLeft, e = Math.ceil(e), t = Math.ceil(t), i = 0; i < this.groups.length; i++)if (n = this._groupedView._getTimeSlotByPosition(e, t, i)) return n; return null }, _appendResizeHint: function (e) { e.appendTo(this.content), this._resizeHint = this._resizeHint.add(e) }, _updateResizeHint: function (e, t, n, o) { var r, s, a; for (this._removeResizeHint(), r = this.groups[t], s = r.ranges(n, o, !0, e.isAllDay), a = 0; a < s.length; a++)this._groupedView._createResizeHint(s[a]); this._resizeHint.find(".k-label-top,.k-label-bottom").text(""), this._resizeHint.first().addClass("k-first").find(".k-label-top").text(i.toString(i.timezone.toLocalDate(n), "M/dd")), this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(i.toString(i.timezone.toLocalDate(o), "M/dd")) }, _updateMoveHint: function (e, t, n) { var o, r = i.date.toUtcTime(e.start) + n, s = r + e.duration(), a = this.groups[t], l = a.ranges(r, s, !0, e.isAllDay); for (this._removeMoveHint(), o = 0; o < l.length; o++)this._groupedView._createMoveHint(l[o], e) }, _appendMoveHint: function (e) { e.appendTo(this.content), this._moveHint = this._moveHint.add(e) }, _groups: function () { var e, t = this._groupCount(), i = this.content[0].getElementsByTagName("tr"), n = this.startDate(); for (this.groups = [], e = 0; e < t; e++)this._addResourceView(e); this._groupedView._addDaySlotCollections(t, i, n) }, addDaySlot: function (e, t, n, o) { var r, s = t.clientHeight, a = t.children.length ? t.children[0].offsetHeight + 3 : 0, l = i.date.addDays(n, o), c = i.date.MS_PER_DAY; n.getHours() !== l.getHours() && (c += (n.getHours() - l.getHours()) * i.date.MS_PER_HOUR), l = i.date.toUtcTime(l), c += l, r = Math.floor((s - a - this.options.moreButtonHeight) / (this.options.eventHeight + 3)), t.setAttribute("role", "gridcell"), t.setAttribute("aria-selected", !1), e.addDaySlot(t, l, c, r) }, render: function (e) { this.content.children(".k-event,.k-more-events,.k-events-container").remove(), this._groups(), e = new i.data.Query(e).sort([{ field: "start", dir: "asc" }, { field: "end", dir: "desc" }]).toArray(); var t = this.groupedResources; t.length ? this._renderGroups(e, t, 0, 1) : this._renderEvents(e, 0), this.refreshLayout(), this.trigger("activate") }, _renderEvents: function (e, t) { var i, n, o, r, s, a, l, c, d, u; for (n = 0, o = e.length; n < o; n++)if (i = e[n], this._isInDateSlot(i)) for ((r = this.groups[t])._continuousEvents || (r._continuousEvents = []), s = r.slotRanges(i, !0), a = s.length, l = 0; l < a; l++)c = s[l], d = i.start, u = i.end, this._groupedView._positionEvent(i, r, c, a, d, u, l) }, _renderGroups: function (e, t, n, r) { var s, a, l, c, d = t[0]; if (d) for (s = d.dataSource.view(), a = 0; a < s.length; a++)l = this._resourceValue(d, s[a]), c = new i.data.Query(e).filter({ field: d.field, operator: o.groupEqFilter(l) }).toArray(), t.length > 1 ? n = this._renderGroups(c, t.slice(1), n++, r + 1) : this._renderEvents(c, n++); return n }, _groupCount: function () { var e = this.groupedResources, t = this._groupedView; return e.length ? this._isVerticallyGrouped() ? t._verticalGroupCount(e.length - 1) : t._horizontalGroupCount(e.length) : 1 }, _columnOffsetForResource: function (e) { return this._columnCountForLevel(e) / this._columnCountForLevel(e - 1) }, destroy: function () { this.table && this.table.removeClass("k-scheduler-monthview"), this.content && this.content.off(r), this.element && this.element.off(r), o.fn.destroy.call(this), this._isMobile() && !this._isMobilePhoneView() && this.options.editable && (!1 !== this.options.editable.create && this._addUserEvents.destroy(), !1 !== this.options.editable.update && this._editUserEvents.destroy()) }, events: ["remove", "add", "edit", "navigate"], options: { title: "Month", name: "month", eventHeight: 25, moreButtonHeight: 13, editable: !0, selectedDateFormat: "{0:y}", selectedShortDateFormat: "{0:y}", groupHeaderTemplate: "#=text#", dayTemplate: c, eventTemplate: d } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.recurrence.min", ["kendo.dropdownlist.min", "kendo.datepicker.min", "kendo.numerictextbox.min"], function () { return function (e, t) { function i(e, t) { var i; return 0 !== e && e < t ? i = t - e : (i = e % t) && (i = t - i), i } function n(e) { var t = e.getMonth(), i = m(e) ? Z[t] : J[t]; return i + e.getDate() } function o(e, i) { var n, o; return e = new Date(e.getFullYear(), e.getMonth(), e.getDate()), K(e, 0), n = e.getFullYear(), i !== t ? (Y(e, i, -1), e.setDate(e.getDate() + 4)) : e.setDate(e.getDate() + (4 - (e.getDay() || 7))), K(e, 0), o = Math.floor((e.getTime() - new Date(n, 0, 1, -6)) / 864e5), 1 + Math.floor(o / 7) } function r(e, t) { var i = Q(e).getDay(), n = 7 - (i + 7 - (t || 7)) || 7; return n < 0 && (n += 7), Math.ceil((e.getDate() - n) / 7) + 1 } function s(e, t) { return e + (e < t ? 7 : 0) } function a(e, t, i) { var n, o, a, l, c, d = t.offset; return d ? (n = new Date(e.getFullYear(), e.getMonth() + 1, 0), o = r(n, i), a = s(t.day, i), l = a < s(new Date(e.getFullYear(), e.getMonth(), 1).getDay(), i), c = a > s(n.getDay(), i), d < 0 ? d = o + (d + 1 - (c ? 1 : 0)) : l && (d += 1), o -= c ? 1 : 0, d < (l ? 1 : 0) || d > o ? null : d) : r(e, i) } function l(e, t) { return r(new Date(e.getFullYear(), e.getMonth() + 1, 0), t) } function c(e, t, i) { return r(e, i) === a(e, t, i) } function d(e, t, i) { for (var n, o, l, c, d = s(t.getDay(), i), u = e.length, h = [], f = 0; f < u; f++)if (o = e[f], c = r(t, i), null !== (n = a(t, o, i))) if (c < n) h.push(o); else if (c === n) if (l = s(o.day, i), d < l) h.push(o); else if (d === l) return null; return h } function u(e, t, i) { for (var n, o = 0, r = e.length, s = []; o < r; o++) { if (n = e[o], i && (n = i(n)), t === n) return null; t < n && s.push(n) } return s } function h(e, t) { for (var i, n = 0, o = e.length; n < o; n++) { if (i = parseInt(e[n], 10), isNaN(i) || i < t.start || i > t.end || 0 === i && t.start < 0) return null; e[n] = i } return e.sort(g) } function f(e) { for (var i, n, o, r = 0, s = e.length; r < s; r++) { if (i = e[r], n = i.length, o = i.substring(n - 2).toUpperCase(), (o = ie[o]) === t) return null; e[r] = { offset: parseInt(i.substring(0, n - 2), 10) || 0, day: o } } return e } function p(e) { var t = e.getMonth(); return 1 === t ? 1 === new Date(e.getFullYear(), 1, 29).getMonth() ? 29 : 28 : ee[t] } function m(e) { return (e = e.getFullYear()) % 4 == 0 && e % 100 != 0 || e % 400 == 0 } function g(e, t) { return e - t } function v(e, t) { var i, n, o = 0, r = []; if (e) for (e = e.split(-1 !== e.indexOf(";") ? ";" : ","), i = e.length; o < i; o++)(n = x(e[o], t)) && r.push(n); return r } function _(t, i, n) { for (var o = e.isArray(t) ? t : v(t, n), r = i.getTime() - i.getMilliseconds(), s = 0, a = o.length; s < a; s++)if (o[s].getTime() === r) return !0; return !1 } function b(e, t) { var i, n, o = 0, r = [].concat(e); for (i = r.length; o < i; o++)n = r[o], n = O.timezone.convert(n, t || n.getTimezoneOffset(), "Etc/UTC"), r[o] = O.toString(n, se); return r.join(",") } function w(e, t) { var i = new Date(e); switch (t.freq) { case "yearly": i.setFullYear(i.getFullYear(), 11, 31); break; case "monthly": i.setFullYear(i.getFullYear(), i.getMonth() + 1, 0); break; case "weekly": Y(i, t.weekStart, -1), i.setDate(i.getDate() + 6) }return t.hours && i.setHours(23), t.minutes && i.setMinutes(59), t.seconds && i.setSeconds(59), i } function y(e, t, i) { var n, o, r, s, a = e.length, l = []; for (r = 0, s = i.length; r < s; r++)(n = i[r]) < 0 ? n = a + n : n -= 1, (o = e[n]) && o.start >= t && l.push(o); return l } function k(e, t, i) { var n, o, r = []; for (o = 0; o < e.length; o++)n = e[o], _(t, n.start, i) || r.push(n); return r } function x(e, t) { return (e = O.parseDate(e, ne)) && t && (e = V.convert(e, e.getTimezoneOffset(), t)), e } function C(e, t) { var i, n, o, r, s, a, l, c, d = e.split(";"); for (l = 0, c = d.length; l < c; l++)if (i = d[l].split(":"), n = i[0], o = i[1], -1 !== n.indexOf("TZID") && (r = n.substring(n.indexOf("TZID")).split("=")[1]), o) for (o = o.split(","), s = 0, a = o.length; s < a; s++)o[s] = x(o[s], r || t); if (o) return { value: o, tzid: r } } function S(i, n) { var o, r, s, a, l, c, d, u, p, m = {}, g = 0, v = !1; if (!i) return null; for ((c = i.split("\n"))[1] || -1 === i.indexOf("DTSTART") && -1 === i.indexOf("DTEND") && -1 === i.indexOf("EXDATE") || (c = i.split(" ")), g = 0, s = c.length; g < s; g++)-1 !== (l = e.trim(c[g])).indexOf("DTSTART") ? m.start = C(l, n) : -1 !== l.indexOf("DTEND") ? m.end = C(l, n) : -1 !== l.indexOf("EXDATE") ? m.exdates = C(l, n) : -1 !== l.indexOf("RRULE") ? a = l.substring(6) : e.trim(l) && (a = l); for (a = a.split(";"), g = 0, s = a.length; g < s; g++)switch (d = a[g], o = d.split("="), r = e.trim(o[1]).split(","), e.trim(o[0]).toUpperCase()) { case "FREQ": m.freq = r[0].toLowerCase(); break; case "UNTIL": m.until = x(r[0], n); break; case "COUNT": m.count = parseInt(r[0], 10); break; case "INTERVAL": m.interval = parseInt(r[0], 10); break; case "BYSECOND": m.seconds = h(r, { start: 0, end: 60 }), v = !0; break; case "BYMINUTE": m.minutes = h(r, { start: 0, end: 59 }), v = !0; break; case "BYHOUR": m.hours = h(r, { start: 0, end: 23 }), v = !0; break; case "BYMONTHDAY": m.monthDays = h(r, { start: -31, end: 31 }), v = !0; break; case "BYYEARDAY": m.yearDays = h(r, { start: -366, end: 366 }), v = !0; break; case "BYMONTH": m.months = h(r, { start: 1, end: 12 }), v = !0; break; case "BYDAY": m.weekDays = p = f(r), v = !0; break; case "BYWEEKNO": m.weeks = h(r, { start: -53, end: 53 }), v = !0; break; case "BYSETPOS": m.positions = h(r, { start: -366, end: 366 }); break; case "WKST": m.weekStart = u = ie[r[0]] }return m.freq === t || m.count !== t && m.until ? null : (m.interval || (m.interval = 1), u === t && (m.weekStart = u = O.culture().calendar.firstDay), p && (m.weekDays = p.sort(function (e, t) { var i = e.day, n = t.day; return i < u && (i += 7), n < u && (n += 7), i - n })), m.positions && !v && (m.positions = null), m._hasRuleValue = v, m) } function T(e, t) { for (var i, n = e.value, o = e.tzid || "", r = n.length, s = 0; s < r; s++)i = n[s], i = V.convert(i, o || t || i.getTimezoneOffset(), "Etc/UTC"), n[s] = O.toString(i, "yyyyMMddTHHmmssZ"); return o && (o = ";TZID=" + o), o + ":" + n.join(",") + " " } function D(e, i) { var n = e.weekStart, o = "FREQ=" + e.freq.toUpperCase(), r = e.exdates || "", s = e.start || "", a = e.end || "", l = e.until; return e.interval > 1 && (o += ";INTERVAL=" + e.interval), e.count && (o += ";COUNT=" + e.count), l && (l = V.convert(l, i || l.getTimezoneOffset(), "Etc/UTC"), o += ";UNTIL=" + O.toString(l, "yyyyMMddTHHmmssZ")), e.months && (o += ";BYMONTH=" + e.months), e.weeks && (o += ";BYWEEKNO=" + e.weeks), e.yearDays && (o += ";BYYEARDAY=" + e.yearDays), e.monthDays && (o += ";BYMONTHDAY=" + e.monthDays), e.weekDays && (o += ";BYDAY=" + function (e) { for (var t, i, n = 0, o = e.length, r = []; n < o; n++)"string" == typeof (t = e[n]) ? i = t : (i = "" + te[t.day], t.offset && (i = t.offset + i)), r.push(i); return "" + r }(e.weekDays)), e.hours && (o += ";BYHOUR=" + e.hours), e.minutes && (o += ";BYMINUTE=" + e.minutes), e.seconds && (o += ";BYSECOND=" + e.seconds), e.positions && (o += ";BYSETPOS=" + e.positions), n !== t && (o += ";WKST=" + te[n]), s && (s = "DTSTART" + T(s, i)), a && (a = "DTEND" + T(a, i)), r && (r = "EXDATE" + T(r, i)), (s || a || r) && (o = s + a + r + "RRULE:" + o), o } var A, E, I, M, R, F, z, P, B, L, H, N, O = window.kendo, V = O.timezone, U = O.Class, W = O.ui, q = W.Widget, j = W.DropDownList, G = O.date, $ = G.setTime, Y = G.setDayOfWeek, K = G.adjustDST, Q = G.firstDayOfMonth, X = G.getMilliseconds, Z = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366], J = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365], ee = [31, 28, 30, 31, 30, 31, 30, 31, 30, 31, 30, 31], te = { 0: "SU", 1: "MO", 2: "TU", 3: "WE", 4: "TH", 5: "FR", 6: "SA" }, ie = { SU: 0, MO: 1, TU: 2, WE: 3, TH: 4, FR: 5, SA: 6 }, ne = ["yyyy-MM-ddTHH:mm:ss.fffzzz", "yyyy-MM-ddTHH:mm:sszzz", "yyyy-MM-ddTHH:mm:ss", "yyyy-MM-ddTHH:mm", "yyyy-MM-ddTHH", "yyyy-MM-dd", "yyyyMMddTHHmmssfffzzz", "yyyyMMddTHHmmsszzz", "yyyyMMddTHHmmss", "yyyyMMddTHHmm", "yyyyMMddTHH", "yyyyMMdd"], oe = ["months", "weeks", "yearDays", "monthDays", "weekDays", "hours", "minutes", "seconds"], re = oe.length, se = "yyyyMMddTHHmmssZ", ae = { months: function (e, t, i) { var n = i.months, o = u(n, e.getMonth() + 1), r = !1; return null !== o && (o.length ? e.setMonth(o[0] - 1, 1) : e.setFullYear(e.getFullYear() + 1, n[0] - 1, 1), r = !0), r }, monthDays: function (e, t, i) { for (var n, o, r, s = !1, a = e.getHours(), l = function (e) { return e < 0 && (e = n + e), e }; e <= t;) { if (o = e.getMonth(), n = p(e), null === (r = u(i.monthDays, e.getDate(), l))) return s; if (s = !0, r.length) { if (e.setMonth(o, r.sort(g)[0]), K(e, a), o === e.getMonth()) break } else e.setMonth(o + 1, 1) } return s }, yearDays: function (e, t, i) { for (var o, r, s = !1, a = e.getHours(), l = function (e) { return e < 0 && (e = o + e), e }; e < t;) { if (o = m(e) ? 366 : 365, null === (r = u(i.yearDays, n(e), l))) return s; if (s = !0, o = e.getFullYear(), r.length) { e.setFullYear(o, 0, r.sort(g)[0]), K(e, a); break } e.setFullYear(o + 1, 0, 1) } return s }, weeks: function (e, t, i) { for (var n, r, s, a = i.weekStart, l = !1, c = e.getHours(), d = function (e) { return e < 0 && (e = 53 + e), e }; e < t;) { if (null === (r = u(i.weeks, o(e, a), d))) return l; if (l = !0, n = e.getFullYear(), r.length) { s = 7 * r.sort(g)[0] - 1, e.setFullYear(n, 0, s), Y(e, a, -1), K(e, c); break } e.setFullYear(n + 1, 0, 1) } return l }, weekDays: function (e, t, i) { var n, o, s = i.weekDays, a = i.weekStart, u = d(s, e, a), h = e.getHours(); if (null === u) return !1; if ((n = u[0]) || (n = s[0], Y(e, a)), o = n.day, n.offset) for (; e <= t && !c(e, n, a);)r(e, a) === l(e, a) ? (e.setMonth(e.getMonth() + 1, 1), K(e, h)) : (e.setDate(e.getDate() + 7), K(e, h), Y(e, a, -1)); return e.getDay() !== o && Y(e, o), !0 }, hours: function (e, t, i) { var n = i.hours, o = i._startTime, r = o.getHours(), s = u(n, r), a = !1; return null !== s && (a = !0, e.setHours(r), K(e, r), s.length ? (s = s[0], e.setHours(s)) : (s = e.getHours(), e.setDate(e.getDate() + 1), K(e, s), s = n[0], e.setHours(s), K(e, s)), i.minutes && e.setMinutes(0), o.setHours(s, e.getMinutes())), a }, minutes: function (e, t, i) { var n = i.minutes, o = e.getMinutes(), r = u(n, o), s = i._startTime.getHours(), a = !1; return null !== r && (a = !0, r.length ? r = r[0] : (s += 1, r = n[0]), i.seconds && e.setSeconds(0), e.setHours(s, r), K(e, s %= 24), i._startTime.setHours(s, r, e.getSeconds())), a }, seconds: function (e, t, i) { var n = i.seconds, o = i._startTime.getHours(), r = u(n, e.getSeconds()), s = e.getMinutes(), a = !1; return null !== r && (a = !0, r.length ? e.setSeconds(r[0]) : (s += 1, e.setMinutes(s, n[0]), s > 59 && (s %= 60, o = (o + 1) % 24)), i._startTime.setHours(o, s, e.getSeconds())), a } }, le = U.extend({ next: function (e, t) { var i, n, o = t._startTime, r = o.getDate(); if (t.seconds) n = e.getSeconds() + 1, e.setSeconds(n), o.setSeconds(n), o.setDate(r); else { if (!t.minutes) return !1; i = e.getMinutes() + 1, e.setMinutes(i), o.setMinutes(i), o.setDate(r) } return !0 }, normalize: function (e) { var t = e.rule; 4 === e.idx && t.hours && (t._startTime.setHours(0), this._hour(e.date, t)) }, limit: function (e, i, n) { for (var o, r, s, a, l, c = n.interval; e <= i;) { for (s = r = t, l = e.getDate(), a = 0; a < re; a++) { if (n[o = oe[a]]) { if (s = ae[o](e, i, n), r !== t && s) break; r = s } s && this.normalize({ date: e, rule: n, day: l, idx: a }) } if ((1 === c || !this.interval(n, e)) && a === re) break } }, interval: function (e, t) { var n, o, r, a, l = new Date(e._startPeriod), c = new Date(t), d = t.getHours(), u = e.weekStart, h = e.interval, f = e.freq, p = !1, m = 0, g = 0, v = 1; return "hourly" === f ? (n = c.getTimezoneOffset() - l.getTimezoneOffset(), o = e._startTime.getHours(), c = c.getTime(), d !== o && (c += (o - d) * G.MS_PER_HOUR), c -= l, n && (c -= n * G.MS_PER_MINUTE), n = Math.floor(c / G.MS_PER_HOUR), 0 !== (m = i(n, h)) && (this._hour(t, e, m), p = !0)) : "daily" === f ? (G.setTime(c, -l, !0), n = Math.ceil(c / G.MS_PER_DAY), 0 !== (m = i(n, h)) && (this._date(t, e, m), p = !0)) : "weekly" === f ? (m = this._getNumberOfWeeksBetweenDates(l, t), r = s(t.getDay(), u), a = s(l.getDay(), u), r < a && (m += 1), 0 !== (m = i(m, h)) && (G.setDayOfWeek(t, e.weekStart, -1), t.setDate(t.getDate() + 7 * m), K(t, d), p = !0)) : "monthly" === f ? (n = t.getFullYear() - l.getFullYear(), n = t.getMonth() - l.getMonth() + 12 * n, 0 !== (m = i(n, h)) && (v = e._hasRuleValue ? 1 : t.getDate(), t.setFullYear(t.getFullYear(), t.getMonth() + m, v), K(t, d), p = !0)) : "yearly" === f && (n = t.getFullYear() - l.getFullYear(), m = i(n, h), e.months || (g = t.getMonth()), e.yearDays || e.monthDays || e.weekDays || (v = t.getDate()), 0 !== m && (t.setFullYear(t.getFullYear() + m, g, v), K(t, d), p = !0)), p }, _getNumberOfWeeksBetweenDates: function (e, t) { var i = (t - e) / 6048e5, n = Math.floor(i); return i - n > .99 && (n = Math.round(i)), n }, _hour: function (e, t, i) { var n = t._startTime, o = n.getHours(); i && (o += i), e.setHours(o), o %= 24, n.setHours(o), K(e, o) }, _date: function (e, t, i) { var n = e.getHours(); e.setDate(e.getDate() + i), K(e, n) || this._hour(e, t) } }), ce = le.extend({ next: function (e, t) { le.fn.next(e, t) || this._hour(e, t, 1) }, normalize: function (e) { var t = e.rule; 4 === e.idx && (t._startTime.setHours(0), this._hour(e.date, t)) } }), de = le.extend({ next: function (e, t) { le.fn.next(e, t) || this[t.hours ? "_hour" : "_date"](e, t, 1) } }), ue = de.extend({ setup: function (e, t) { e.weekDays || (e.weekDays = [{ day: t.getDay(), offset: 0 }]) } }), he = le.extend({ next: function (e, t) { var i, n; if (!le.fn.next(e, t)) if (t.hours) this._hour(e, t, 1); else if (t.monthDays || t.weekDays || t.yearDays || t.weeks) this._date(e, t, 1); else { for (i = e.getDate(), n = e.getHours(), e.setMonth(e.getMonth() + 1), K(e, n); e.getDate() !== i;)e.setDate(i), K(e, n); this._hour(e, t) } }, normalize: function (e) { var t = e.rule, i = e.date, n = i.getHours(); 0 !== e.idx || t.monthDays || t.weekDays ? le.fn.normalize(e) : (i.setDate(e.day), K(i, n)) }, setup: function (e, t, i) { e.monthDays || e.weekDays || i.setDate(t.getDate()) } }), fe = he.extend({ next: function (e, t) { var i, n = e.getHours(); if (!le.fn.next(e, t)) if (t.hours) this._hour(e, t, 1); else if (t.monthDays || t.weekDays || t.yearDays || t.weeks) this._date(e, t, 1); else if (t.months) { for (i = e.getDate(), e.setMonth(e.getMonth() + 1), K(e, n); e.getDate() !== i;)e.setDate(i), K(e, n); this._hour(e, t) } else e.setFullYear(e.getFullYear() + 1), K(e, n), this._hour(e, t) }, setup: function () { } }), pe = { hourly: new ce, daily: new de, weekly: new ue, monthly: new he, yearly: new fe }, me = "click"; O.recurrence = { rule: { parse: S, serialize: D }, expand: function (e, i, n, o) { var r, s, a, l, c, d, u, h, f, p, m, g, x, C, T, D, A, E, I, M, R, F = S(e.recurrenceRule, o), z = []; if (!F) return [e]; for (I = F.positions, M = I ? 0 : 1, f = F.start, p = F.end, (f || p) && (e = e.clone({ start: f ? new Date(f.value[0]) : t, end: p ? new Date(p.value[0]) : t })), D = e.start, T = D.getTime(), C = X(D), !(x = v(e.recurrenceException, o))[0] && F.exdates && (x = F.exdates.value, e.set("recurrenceException", b(x, o))), h = i = new Date(i), n = new Date(n), g = F.freq, E = pe[g], A = F.count, F.until && F.until < n && (n = new Date(F.until)), m = "yearly" === g || "monthly" === g || "weekly" === g, i < T || A || F.interval > 1 || m ? i = new Date(T) : (l = i.getHours(), c = i.getMinutes(), d = i.getSeconds(), F.hours || (l = D.getHours()), F.minutes || (c = D.getMinutes()), F.seconds || (d = D.getSeconds()), i.setHours(l, c, d, D.getMilliseconds())), F._startPeriod = new Date(i), I && (i = function (e, t) { var i = new Date(e); switch (t.freq) { case "yearly": i.setFullYear(i.getFullYear(), 0, 1); break; case "monthly": i.setFullYear(i.getFullYear(), i.getMonth(), 1); break; case "weekly": Y(i, t.weekStart, -1) }return t.hours && i.setHours(0), t.minutes && i.setMinutes(0), t.seconds && i.setSeconds(0), i }(i, F), n = w(n, F), X(n) - X(i) < 0 && (l = i.getHours(), n.setHours(l, i.getMinutes(), i.getSeconds(), i.getMilliseconds()), G.adjustDST(n, l)), F._startPeriod = new Date(i), F._endPeriod = w(i, F)), u = e.duration(), F._startTime = r = G.toInvariantTime(i), E.setup && E.setup(F, D, i), E.limit(i, n, F); i <= n;)if (a = new Date(i), $(a, u), ((i >= h || a > h) && !_(x, i, o) || I) && (r = G.toUtcTime(G.getDate(i)) + X(F._startTime), s = r + u, T !== i.getTime() || C !== X(F._startTime) ? z.push(e.toOccurrence({ start: new Date(i), end: a, _startTime: r, _endTime: s })) : (e._startTime = r, e._endTime = s, z.push(e))), I) { if (E.next(i, F), E.limit(i, n, F), i > F._endPeriod && (R = k(R = y(z.slice(M), D, I), x, o), z = z.slice(0, M).concat(R), F._endPeriod = w(i, F), M = z.length), A && A === M) break } else { if (A && A === M) break; M += 1, E.next(i, F), E.limit(i, n, F) } return z }, dayInYear: n, weekInYear: o, weekInMonth: r, numberOfWeeks: l, isException: _, toExceptionString: b }, A = function (e) { for (var t = O.culture().calendar.days.namesShort, i = t.length, n = "", o = 0, r = []; o < i; o++)r.push(o); for (t = t.slice(e).concat(t.slice(0, e)), r = r.slice(e).concat(r.slice(0, e)), o = 0; o < i; o++)n += '<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="' + r[o] + '" /> ' + t[o] + "</label>"; return n }, E = O.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" title="#:messages.interval#"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" title="#:messages.day#" />#:messages.day#</label><input class="k-recur-monthday" title="#:messages.day#" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" title="#:messages.repeatOn#" /><input class="k-recur-weekday-offset" title="#:messages.repeatOn#" /><input class="k-recur-weekday" title="#:messages.day#" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" title="#:messages.repeatOn#" /><input class="k-recur-month" title="#:messages.repeatOn#" /><input class="k-recur-monthday" title="#:messages.day#" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" title="#:messages.repeatOn#" /><input class="k-recur-weekday-offset" title="#:messages.repeatOn#" /><input class="k-recur-weekday" title="#:messages.day#"  />#:messages.of#<input class="k-recur-month" title="#:messages.of#"/></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" title="#:end.occurrence#" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" title="#:end.on#" /></li></ul></div># } #'), I = [{ day: 0, offset: 0 }, { day: 1, offset: 0 }, { day: 2, offset: 0 }, { day: 3, offset: 0 }, { day: 4, offset: 0 }, { day: 5, offset: 0 }, { day: 6, offset: 0 }], M = [{ day: 1, offset: 0 }, { day: 2, offset: 0 }, { day: 3, offset: 0 }, { day: 4, offset: 0 }, { day: 5, offset: 0 }], R = [{ day: 0, offset: 0 }, { day: 6, offset: 0 }], F = q.extend({ init: function (e, t) { var i, n = this, o = t && t.frequencies; q.fn.init.call(n, e, t), n.wrapper = n.element, (t = n.options).start = i = t.start || G.today(), o && (t.frequencies = o), "string" == typeof i && (t.start = O.parseDate(i, "yyyyMMddTHHmmss")), null === t.firstWeekDay && (t.firstWeekDay = O.culture().calendar.firstDay), n._namespace = "." + t.name }, options: { value: "", start: "", timezone: "", spinners: !0, firstWeekDay: null, frequencies: ["never", "daily", "weekly", "monthly", "yearly"], mobile: !1, messages: { recurrenceEditorTitle: "Recurrence editor", frequencies: { never: "Never", hourly: "Hourly", daily: "Daily", weekly: "Weekly", monthly: "Monthly", yearly: "Yearly" }, hourly: { repeatEvery: "Repeat every: ", interval: " hour(s)" }, daily: { repeatEvery: "Repeat every: ", interval: " day(s)" }, weekly: { interval: " week(s)", repeatEvery: "Repeat every: ", repeatOn: "Repeat on: " }, monthly: { repeatEvery: "Repeat every: ", repeatOn: "Repeat on: ", interval: " month(s)", day: "Day " }, yearly: { repeatEvery: "Repeat every: ", repeatOn: "Repeat on: ", interval: " year(s)", of: " of " }, end: { label: "End:", mobileLabel: "Ends", never: "Never", after: "After ", occurrence: " occurrence(s)", on: "On " }, offsetPositions: { first: "first", second: "second", third: "third", fourth: "fourth", last: "last" }, weekdays: { day: "day", weekday: "weekday", weekend: "weekend day" } } }, events: ["change"], _initInterval: function () { var e = this, t = e._value; e._container.find(".k-recur-interval").kendoNumericTextBox({ spinners: e.options.spinners, value: t.interval || 1, decimals: 0, format: "#", min: 1, change: function () { t.interval = this.value(), e._trigger() } }) }, _weekDayRule: function (e) { var t = this, i = (t._weekDay.element || t._weekDay).val(), n = +(t._weekDayOffset.element || t._weekDayOffset).val(), o = null, r = null; e || ("day" === i ? (o = I, r = n) : "weekday" === i ? (o = M, r = n) : "weekend" === i ? (o = R, r = n) : o = [{ offset: n, day: +i }]), t._value.weekDays = o, t._value.positions = r }, _weekDayView: function () { var e, t, i, n, o = this, r = o._value.weekDays, s = o._value.positions, a = o._weekDayOffset; r && (i = r.length, s && (7 === i ? (t = "day", e = s) : 5 === i ? (t = "weekday", e = s) : 2 === i && (t = "weekend", e = s)), t || (r = r[0], t = r.day, e = r.offset || ""), n = a.value ? "value" : "val", a[n](e), o._weekDay[n](t)) }, _initWeekDay: function () { var t, i = this, n = i.options.messages.weekdays, o = i.options.messages.offsetPositions, r = i._container.find(".k-recur-weekday"), s = function () { i._weekDayRule(), i._trigger() }; r[0] && (i._weekDayOffset = new j(i._container.find(".k-recur-weekday-offset"), { change: s, dataTextField: "text", dataValueField: "value", dataSource: [{ text: o.first, value: "1" }, { text: o.second, value: "2" }, { text: o.third, value: "3" }, { text: o.fourth, value: "4" }, { text: o.last, value: "-1" }] }), t = [{ text: n.day, value: "day" }, { text: n.weekday, value: "weekday" }, { text: n.weekend, value: "weekend" }], i._weekDay = new j(r, { value: i.options.start.getDay(), change: s, dataTextField: "text", dataValueField: "value", dataSource: t.concat(e.map(O.culture().calendar.days.names, function (e, t) { return { text: e, value: t } })) }), i._weekDayView()) }, _initWeekDays: function () { var t, i, n, o, r, s = this, a = s._value, l = s._container.find(".k-recur-weekday-checkbox"); if (l[0] && (l.on(me + s._namespace, function () { a.weekDays = e.map(l.filter(":checked"), function (e) { return { day: +e.value, offset: 0 } }), s.options.mobile || s._trigger() }), a.weekDays)) for (n = 0, o = l.length, r = a.weekDays.length; n < o; n++)for (i = l[n], t = 0; t < r; t++)i.value == a.weekDays[t].day && (i.checked = !0) }, _initMonthDay: function () { var e = this, t = e._value, i = e._container.find(".k-recur-monthday"); i[0] && (e._monthDay = new O.ui.NumericTextBox(i, { spinners: e.options.spinners, min: 1, max: 31, decimals: 0, format: "#", value: t.monthDays ? t.monthDays[0] : e.options.start.getDate(), change: function () { var i = this.value(); t.monthDays = i ? [i] : i, e._trigger() } })) }, _initCount: function () { var e = this, t = e._container.find(".k-recur-count"), i = e._value; e._count = t.kendoNumericTextBox({ spinners: e.options.spinners, value: i.count || 1, decimals: 0, format: "#", min: 1, change: function () { i.count = this.value(), e._trigger() } }).data("kendoNumericTextBox") }, _initUntil: function () { var e = this, t = e._container.find(".k-recur-until"), i = e.options.start, n = e._value, o = n.until; e._until = t.kendoDatePicker({ min: o && o < i ? o : i, value: o || new Date(i.getFullYear(), i.getMonth(), i.getDate(), 23, 59, 59), change: function () { var t = this.value(); n.until = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 23, 59, 59), e._trigger() } }).data("kendoDatePicker") }, _trigger: function () { this.options.mobile || this.trigger("change") } }), z = F.extend({ init: function (e, t) { var i = this; F.fn.init.call(i, e, t), i._initFrequency(), i._initContainer(), i.value(i.options.value) }, options: { name: "RecurrenceEditor" }, events: ["change"], destroy: function () { var e = this; e._frequency.destroy(), e._container.find("input[type=radio],input[type=checkbox]").off(me + e._namespace), O.destroy(e._container), F.fn.destroy.call(e) }, value: function (e) { var i, n = this, o = n.options.timezone; return e === t ? n._value.freq ? D(n._value, o) : "" : (n._value = S(e, o) || {}, (i = n._value.freq) ? n._frequency.value(i) : n._frequency.select(0), n._initView(n._frequency.value()), t) }, _initContainer: function () { var t = this.element, i = e('<div class="k-recur-view" />'), n = t.parent(".k-edit-field"); n[0] ? i.insertAfter(n) : t.append(i), this._container = i }, _initFrequency: function () { var t, i = this, n = i.options, o = n.frequencies, r = n.messages.frequencies, s = e("<input />").attr({ title: n.messages.recurrenceEditorTitle }); o = e.map(o, function (e) { return { text: r[e], value: e } }), (t = o[0]) && "never" === t.value && (t.value = ""), i.element.append(s), i._frequency = new j(s, { dataTextField: "text", dataValueField: "value", dataSource: o, change: function () { i._value = {}, i._initView(i._frequency.value()), i.trigger("change") } }) }, _initView: function (e) { var i = this, n = i._value, o = i.options, r = { frequency: e || "never", weekDayCheckBoxes: A, firstWeekDay: o.firstWeekDay, messages: o.messages[e], end: o.messages.end }; return O.destroy(i._container), i._container.html(E(r)), e ? (n.freq = e, "weekly" !== e || n.weekDays || (n.weekDays = [{ day: o.start.getDay(), offset: 0 }]), i._initInterval(), i._initWeekDays(), i._initMonthDay(), i._initWeekDay(), i._initMonth(), i._initCount(), i._initUntil(), i._period(), i._end(), t) : (i._value = {}, t) }, _initMonth: function () { var t, i = this, n = i._value, o = n.months || [i.options.start.getMonth() + 1], r = i._container.find(".k-recur-month"); r[0] && (t = { change: function () { n.months = [+this.value()], i.trigger("change") }, dataTextField: "text", dataValueField: "value", dataSource: e.map(O.culture().calendar.months.names, function (e, t) { return { text: e, value: t + 1 } }) }, i._month1 = new j(r[0], t), i._month2 = new j(r[1], t), o && (o = o[0], i._month1.value(o), i._month2.value(o))) }, _end: function () { var e, t = this, i = t._value, n = t._container, o = t._namespace, r = function (e) { t._toggleEnd(e.currentTarget.value), t.trigger("change") }; t._buttonNever = n.find(".k-recur-end-never").on(me + o, r), t._buttonCount = n.find(".k-recur-end-count").on(me + o, r), t._buttonUntil = n.find(".k-recur-end-until").on(me + o, r), i.count ? e = "count" : i.until && (e = "until"), t._toggleEnd(e) }, _period: function () { var e = this, t = e._value, i = "monthly" === t.freq, n = i ? e._toggleMonthDay : e._toggleYear, o = ".k-recur-" + (i ? "month" : "year") + "-radio", r = e._container.find(o); (i || "yearly" === t.freq) && (r.on(me + e._namespace, function (t) { n.call(e, t.currentTarget.value), e.trigger("change") }), e._buttonMonthDay = r.eq(0), e._buttonWeekDay = r.eq(1), n.call(e, t.weekDays ? "weekday" : "monthday")) }, _toggleEnd: function (e) { var t, i, n, o, r = this; "count" === e ? (r._buttonCount.prop("checked", !0), n = !0, o = !1, t = r._count.value(), i = null) : "until" === e ? (r._buttonUntil.prop("checked", !0), n = !1, o = !0, t = null, i = r._until.value()) : (r._buttonNever.prop("checked", !0), n = o = !1, t = i = null), r._count.enable(n), r._until.enable(o), r._value.count = t, r._value.until = i }, _toggleMonthDay: function (e) { var t, i = this, n = !1, o = !0, r = !1; "monthday" === e ? (i._buttonMonthDay.prop("checked", !0), t = [i._monthDay.value()], n = !0, o = !1, r = !0) : (i._buttonWeekDay.prop("checked", !0), t = null), i._weekDay.enable(o), i._weekDayOffset.enable(o), i._monthDay.enable(n), i._value.monthDays = t, i._weekDayRule(r) }, _toggleYear: function (e) { var t, i = this, n = !1, o = !0; "monthday" === e ? (n = !0, o = !1, t = i._month1.value()) : t = i._month2.value(), i._month1.enable(n), i._month2.enable(o), i._value.months = [t], i._toggleMonthDay(e) } }), W.plugin(z), P = O.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'), B = O.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" title="#:messages.day#" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset" title="#:messages.every#"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday" title="#:messages.day#"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" title="#:messages.day#" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset" title="#:messages.every#"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday" title="#:messages.day#"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month" title="#:messages.month#"></select></div># } #'), L = O.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'), H = O.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'), N = F.extend({ init: function (e, t) { var i = this; F.fn.init.call(i, e, t), t = i.options, i._optionTemplate = O.template('<option value="#:value#">#:text#</option>'), i.value(t.value), i._pane = t.pane, i._initRepeatButton(), i._initRepeatEnd(), i._defaultValue = i._value }, options: { name: "MobileRecurrenceEditor", animations: { left: "slide", right: "slide:right" }, mobile: !0, messages: { cancel: "Cancel", update: "Save", endTitle: "Repeat ends", repeatTitle: "Repeat pattern", headerTitle: "Repeat event", end: { patterns: { never: "Never", after: "After...", on: "On..." }, never: "Never", after: "End repeat after", on: "End repeat on" }, daily: { interval: "" }, hourly: { interval: "" }, weekly: { interval: "" }, monthly: { interval: "", repeatBy: "Repeat by: ", dayOfMonth: "Day of the month", dayOfWeek: "Day of the week", repeatEvery: "Repeat every", every: "Every", day: "Day " }, yearly: { interval: "", repeatBy: "Repeat by: ", dayOfMonth: "Day of the month", dayOfWeek: "Day of the week", repeatEvery: "Repeat every: ", every: "Every", month: "Month", day: "Day" } } }, events: ["change"], value: function (e) { var i = this, n = i.options.timezone; return e === t ? i._value.freq ? D(i._value, n) : "" : (i._value = S(e, n) || {}, t) }, destroy: function () { this._destroyView(), O.destroy(this._endFields), this._repeatButton.off(me + this._namespace), F.fn.destroy.call(this) }, _initRepeatButton: function () { var t = this, i = t.options.messages.frequencies[this._value.freq || "never"]; t._repeatButton = e('<a href="#" class="k-button k-scheduler-recur">' + i + "</a>").on(me + t._namespace, function (e) { e.preventDefault(), t._createView("repeat"), t._pane.navigate("recurrence", t.options.animations.left) }), t.element.append(t._repeatButton) }, _initRepeatEnd: function () { var t = this, i = e('<div class="k-edit-label"><label>' + t.options.messages.end.mobileLabel + "</label></div>").insertAfter(t.element.parent(".k-edit-field")), n = e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(me + t._namespace, function (e) { e.preventDefault(), t._value.freq && (t._createView("end"), t._pane.navigate("recurrence", t.options.animations.left)) }).insertAfter(i); t._endFields = i.add(n).toggleClass("k-state-disabled", !t._value.freq), t._endButton = n.find(".k-scheduler-recur-end").text(t._endText()) }, _endText: function () { var e = this._value, t = this.options.messages.end, i = t.never; return e.count ? i = O.format("{0} {1}", t.after, e.count) : e.until && (i = O.format("{0} {1:d}", t.on, e.until)), i }, _initFrequency: function () { var t = this, i = t.options.messages.frequencies, n = H({ dataSource: e.map(this.options.frequencies, function (e) { return { text: i[e], value: "never" !== e ? e : "" } }), value: t._value.freq || "", ns: O.ns }); t._view.element.find(".k-recur-pattern").append(n).on(me + t._namespace, ".k-scheduler-navigation li", function (i) { var n = e(this); i.preventDefault(), n.addClass("k-state-selected").siblings().removeClass("k-state-selected"), t._value = { freq: n.children("a").attr(O.attr("value")) }, t._initRepeatView() }) }, _initEndNavigation: function () { var t, i = this, n = i.options.messages.end.patterns, o = i._value, r = ""; o.count ? r = "count" : o.until && (r = "until"), t = H({ dataSource: [{ text: n.never, value: "" }, { text: n.after, value: "count" }, { text: n.on, value: "until" }], value: r, ns: O.ns }), i._view.element.find(".k-recur-pattern").append(t).on(me + i._namespace, ".k-scheduler-navigation li", function (t) { var n = e(this), r = null, s = null; t.preventDefault(), n.addClass("k-state-selected").siblings().removeClass("k-state-selected"), i._initEndView(n.children("a").attr(O.attr("value"))), i._count ? (r = i._count.value(), s = null) : i._until && (r = null, s = i._until.val ? O.parseDate(i._until.val(), "yyyy-MM-dd") : i._until.value()), o.count = r, o.until = s }) }, _createView: function (t) { var i = this, n = i.options, o = n.messages, r = o["repeat" === t ? "repeatTitle" : "endTitle"], s = '<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">' + o.cancel + "</a>" + o.headerTitle + '<a href="#" class="k-button k-scheduler-update">' + o.update + "</a></div>", a = i._pane.view().id; i._view = i._pane.append(s + P({ headerTitle: r })), i._view.element.on(me + i._namespace, "a.k-scheduler-cancel, a.k-scheduler-update", function (t) { t.preventDefault(), t.stopPropagation(), e(this).hasClass("k-scheduler-update") ? (i.trigger("change"), i._defaultValue = e.extend({}, i._value)) : i._value = i._defaultValue; var n = i._value.freq; i._endButton.text(i._endText()), i._endFields.toggleClass("k-state-disabled", !n), i._repeatButton.text(o.frequencies[n || "never"]), i._pane.one("viewShow", function () { i._destroyView() }), i._pane.navigate(a, i.options.animations.right) }), i._container = i._view.element.find(".k-recur-view"), "repeat" === t ? (i._initFrequency(), i._initRepeatView()) : (i._initEndNavigation(), i._initEndView()) }, _destroyView: function () { this._view && (this._view.destroy(), this._view.element.remove()), this._view = null }, _initRepeatView: function () { var e = this, i = e._value.freq || "never", n = { frequency: i, weekDayCheckBoxes: A, firstWeekDay: e.options.firstWeekDay, messages: e.options.messages[i] }, o = B(n), r = e._container, s = e._value; return O.destroy(r), r.html(o), o ? ("weekly" !== i || s.weekDays || (s.weekDays = [{ day: e.options.start.getDay(), offset: 0 }]), e._initInterval(), e._initMonthDay(), e._initWeekDays(), e._initWeekDay(), e._initMonth(), e._period(), t) : (e._value = {}, t) }, _initEndView: function (e) { var i, n = this, o = n._value; e === t && (o.count ? e = "count" : o.until && (e = "until")), i = { endPattern: e, messages: n.options.messages.end }, O.destroy(n._container), n._container.html(L(i)), n._initCount(), n._initUntil() }, _initWeekDay: function () { var t, i = this, n = i.options.messages.weekdays, o = i.options.messages.offsetPositions, r = i._container.find(".k-recur-weekday"), s = function () { i._weekDayRule(), i.trigger("change") }; r[0] && (i._weekDayOffset = i._container.find(".k-recur-weekday-offset").html(i._options([{ text: o.first, value: "1" }, { text: o.second, value: "2" }, { text: o.third, value: "3" }, { text: o.fourth, value: "4" }, { text: o.last, value: "-1" }])).change(s), t = (t = [{ text: n.day, value: "day" }, { text: n.weekday, value: "weekday" }, { text: n.weekend, value: "weekend" }]).concat(e.map(O.culture().calendar.days.names, function (e, t) { return { text: e, value: t } })), i._weekDay = r.html(i._options(t)).change(s).val(i.options.start.getDay()), i._weekDayView()) }, _initMonth: function () { var t, i = this, n = i._value, o = i.options.start, r = n.months || [o.getMonth() + 1], s = i._container.find(".k-recur-month"), a = O.culture().calendar.months.names; s[0] && (t = e.map(a, function (e, t) { return { text: e, value: t + 1 } }), s.html(i._options(t)).change(function () { n.months = [+this.value] }), i._monthSelect = s, r && s.val(r[0])) }, _period: function () { var t, i, n, o = this, r = o._value, s = o._container, a = o.options.messages[r.freq], l = s.find(".k-repeat-rule"), c = s.find(".k-weekday-view"), d = s.find(".k-monthday-view"); l[0] && (t = r.weekDays ? "weekday" : "monthday", i = H({ value: t, dataSource: [{ text: a.dayOfMonth, value: "monthday" }, { text: a.dayOfWeek, value: "weekday" }], ns: O.ns }), n = function (e) { var t = o._weekDay.val(), i = o._weekDayOffset.val(), n = o._monthDay.value(), s = o._monthSelect ? o._monthSelect.val() : null; "monthday" === e ? (r.weekDays = null, r.monthDays = n ? [n] : n, r.months = s ? [+s] : s, c.hide(), d.show()) : (r.monthDays = null, r.months = s ? [+s] : s, r.weekDays = [{ offset: +i, day: +t }], c.show(), d.hide()) }, l.append(i).on(me + o._namespace, ".k-scheduler-navigation li", function (t) { var i, o = e(this).addClass("k-state-selected"); t.preventDefault(), o.siblings().removeClass("k-state-selected"), i = o.children("a").attr(O.attr("value")), n(i) }), n(t)) }, _initUntil: function () { var e = this, t = e._container.find(".k-recur-until"), i = e.options.start, n = e._value, o = n.until, r = o && o < i ? o : i; e._until = O.support.input.date ? t.attr("min", O.toString(r, "yyyy-MM-dd")).val(O.toString(o || i, "yyyy-MM-dd")).on("change", function () { n.until = O.parseDate(this.value, "yyyy-MM-dd") }) : t.kendoDatePicker({ min: r, value: o || i, change: function () { n.until = this.value() } }).data("kendoDatePicker") }, _options: function (e, t) { var i = 0, n = "", o = e.length, r = this._optionTemplate; for (t && (n += r({ value: "", text: t })); i < o; i++)n += r(e[i]); return n } }), W.plugin(N) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.timelineview.min", ["kendo.scheduler.view.min"], function () { return function (e, t) { function i(e) { var t = new Date(1980, 1, 1, 0, 0, 0); return a(t, p(e)), t } function n(e, t, i) { var n, o, r; for (n = e.length - 1; n >= 0; n--)o = e[n].rectLeft, r = e[n].rectRight, (o <= t && r >= t || o >= t && r <= i || t <= o && i >= o) && (o < t && (t = o), r > i && (i = r)); return function (e, t, i) { var n, o, r = []; for (n = 0; n < e.length; n++)((o = { rectLeft: e[n].rectLeft, rectRight: e[n].rectRight }).rectLeft < t && o.rectRight > t || o.rectLeft >= t && o.rectRight <= i) && r.push(e[n]); return r }(e, t, i) } var o, r = window.kendo, s = r.ui, a = r.date.setTime, l = s.SchedulerView, c = r._outerWidth, d = r._outerHeight, u = e.extend, h = e.proxy, f = r.date.getDate, p = r.date.getMilliseconds, m = r.date.MS_PER_DAY, g = r.date.MS_PER_MINUTE, v = "k-current-time", _ = "k-current-time-arrow", b = "k-scheduler-header-wrap", w = .8666, y = ".kendoTimelineView", k = r.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'), x = r.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"), C = r.Class.extend({ init: function (e) { this._view = e }, _getTimeSlotByPosition: function (e, t, i) { var n = this._view.groups[i]; return n.timeSlotByPosition(e, t) }, _hideHeaders: function () { var e = this._view; e.timesHeader.find("table tr:last").hide(), e.datesHeader.find("table tr:last").hide() }, _setColspan: function (e) { !function e(t) { var i, n = 0; if (t.columns) { for (i = 0; i < t.columns.length; i++)n += e(t.columns[i]); return t.colspan = n, n } return t.colspan = 1, 1 }(e) }, _createRowsLayout: function (e, t, i) { var n = this._view; return n._createRowsLayout(e, t, i) }, _createVerticalColumnsLayout: function (e, t, i, n) { return n }, _createColumnsLayout: function (e, t, i) { var n = this._view; return n._createColumnsLayout(e, t, i) }, _getRowCount: function () { var e = this._view; return e._groupCount() }, _getGroupsCount: function () { return 1 }, _addContent: function (e, t, i, n, o, s, a, l) { var c, d, u, h, f = this._view, p = "", m = f.options, g = function (t) { var i, n = "", o = ""; return r.date.isToday(e[u]) && (o += "k-today"), (r.date.getMilliseconds(t) < r.date.getMilliseconds(m.workDayStart) || r.date.getMilliseconds(t) >= r.date.getMilliseconds(m.workDayEnd) || !f._isWorkDay(e[u])) && (o += " k-nonwork-hour"), n += "<td" + ("" !== o ? ' class="' + o + '"' : "") + ">", i = r.date.getDate(e[u]), r.date.setTime(i, r.date.getMilliseconds(t)), n += a({ date: i, resources: function (e) { return function () { return f._resourceBySlot({ groupIndex: e }) } }(l ? c : d) }), n += "</td>" }; for (c = 0; c < n; c++) { for (p += "<tr>", d = 0; d < i; d++)for (u = 0, h = t; u < h; u++)p += f._forTimeRange(o, s, g); p += "</tr>" } return p }, _addTimeSlotsCollections: function (e, t, i, n, o) { var r, s, a, l, c, d, u, h, f, m, g, v = this._view, _ = i.length; for (o && (_ = Math.floor(_ / e)), r = 0; r < e; r++)for (s = 0, a = v.groups[r], o && (s = r), c = 0, o || (c = r), d = i[s * _].children, u = d.length / (o ? 1 : e), h = u / t, f = 0; f < t; f++)for (m = f * h + u * c, l = p(new Date(+v.startTime())), g = 0; g < h; g++)v._addTimeSlotToCollection(a, d, g, m, f, l, n), l += n }, _getVerticalGroupCount: function (e) { return e }, _getVerticalRowCount: function (e, t, i) { var n = this._view; return n._isVerticallyGrouped() ? e[t].maxRowCount : i }, _renderEvent: function (e, t, i, n, o, r) { var s, a = this._view, l = a._createEventElement(i.occurrence, t, o.head || i.head, o.tail || i.tail); l.appendTo(r).css({ top: 0, height: a.options.eventHeight }), s = { start: i.occurrence._startTime || i.occurrence.start, end: i.occurrence._endTime || i.occurrence.end, element: l, uid: t.uid, slotRange: o, rowIndex: 0, offsetTop: 0 }, e.events[t.uid] = s, a.addContinuousEvent(n, o, l, t.isAllDay), a._arrangeRows(s, o, e) }, _verticalCountForLevel: function (e) { var t = this._view; return t._rowCountForLevel(e) }, _horizontalCountForLevel: function (e) { var t = this._view; return t._columnCountForLevel(e) }, _updateCurrentVerticalTimeMarker: function (t, i) { var n = this._view, o = "<div class='" + v + "'></div>", r = n.datesHeader.find("." + b), s = Math.round(t[0].innerRect(i, new Date(i.getTime() + 1), !1).left), a = e(o).prependTo(r).addClass(_ + "-down"); a.css({ left: n._adjustLeftPosition(s - c(a) * w / 2), top: r.find("tr:last").prev().position().top }), e(o).prependTo(n.content).css({ left: n._adjustLeftPosition(s), width: "1px", height: n.content[0].scrollHeight - 1, top: 0 }) }, _changeGroup: function () { return t }, _prevGroupSlot: function (e, t, i) { var n = this._view; return n._isVerticallyGrouped() ? e : t._collection(0, i).last() }, _nextGroupSlot: function (e, t, i) { var n = this._view; return n._isVerticallyGrouped() ? e : t._collection(0, i).first() }, _verticalSlots: function (e, t) { var i = this._view; return i._changeGroup(e, t) }, _verticalMethod: function (e) { return e ? "leftSlot" : "rightSlot" }, _normalizeVerticalSelection: function () { return t }, _horizontalSlots: function (e, t, i, n, o, r, s) { var a = this._view, l = {}; return l.startSlot = t[i](n), l.endSlot = t[i](o), r || !a._isHorizontallyGrouped() || l.startSlot && l.endSlot || (l.startSlot = l.endSlot = a._changeGroup(e, s)), l }, _changeVerticalViewPeriod: function () { return !1 }, _changeHorizontalViewPeriod: function (e, t, i, n) { var o = this._view; return !(e.startSlot && e.endSlot || t || !o._changeViewPeriod(i, n, !1)) }, _updateDirection: function (e, t, i, n) { var o = this._view; o._updateDirection(e, t, i, n, !0) }, _createMoveHint: function (e, t) { var i, n, o, r, s = this._view, a = e.start, l = s._createEventElement(t.occurrence, t.occurrence, !1, !1); l.addClass("k-event-drag-hint"), i = e.innerRect(t.occurrence.start, t.occurrence.end, s.options.snap), (n = i.right - i.left - 2) < 0 && (n = 0), o = s._adjustLeftPosition(i.left), r = { left: o, top: a.offsetTop, height: a.offsetHeight - 2, width: n }, l.css(r), s._moveHint = s._moveHint.add(l) }, _adjustLeftPosition: function (e) { var t = this._view; return t._isRtl && (e -= t.content[0].scrollWidth - t.content[0].offsetWidth), e } }), S = r.Class.extend({ init: function (e) { this._view = e }, _getTimeSlotByPosition: function (e, t, i) { var n = this._view.groups[i]; return n.timeSlotByPosition(e, t, !0) }, _hideHeaders: function () { var e = this._view; e._isVerticallyGrouped() ? e.times.find(".k-last").hide() : (e.timesHeader.find("table tr").eq(2).hide(), e.datesHeader.find("table tr").eq(2).hide()) }, _setColspan: function () { }, _createRowsLayout: function (e, t, i, n) { var o = this._view; return o._createDateLayout(n, null, !0) }, _createVerticalColumnsLayout: function (e, t, i) { var n = this._view; return n._createColumnsLayout(e, null, i) }, _createColumnsLayout: function (e, t, i, n) { var o = this._view; return o._createColumnsLayout(e, t, i, n, !0) }, _getRowCount: function (e) { var t = this._view; return t._rowCountForLevel(e) }, _getGroupsCount: function () { var e = this._view; return e._groupCount() }, _addContent: function (e, t, i, n, o, s, l, c) { var d, u, h, f, p = this._view, m = "", v = p.options, _ = function (t, i, n, o, s, a) { var c, u = "", f = "", m = p._isVerticallyGrouped() ? d : h; return r.date.isToday(e[h]) && (f += "k-today"), (r.date.getMilliseconds(t) < r.date.getMilliseconds(v.workDayStart) || r.date.getMilliseconds(t) >= r.date.getMilliseconds(v.workDayEnd) || !p._isWorkDay(e[m])) && (f += " k-nonwork-hour"), u += "<td" + ("" !== f ? ' class="' + f + '"' : "") + ">", c = r.date.getDate(e[h]), r.date.setTime(c, r.date.getMilliseconds(t)), u += l({ date: c, resources: function (e) { return function () { return p._resourceBySlot({ groupIndex: e }) } }(a) }), u += "</td>" }, b = new Date(o), w = p.options.minorTickCount, y = p.options.majorTick * g, k = y / w || 1; for (u = 0; u < n; u++) { for (m += "<tr>", u % (n / p._dates.length) == 0 && (d = u / (n / p._dates.length), b = new Date(p._dates[d]), r.date.setTime(b, r.date.getMilliseconds(o))), h = 0, f = t; h < f; h++)if (m += p._forTimeRange(b, s, _, c, i), c) { a(b, k, !1); break } m += "</tr>" } return m }, _addTimeSlotsCollections: function (e, t, i, n, o) { var r, s, a, l, c, d, u, h, f, m, g = this._view, v = i.length; for (o && (v /= t), r = 0; r < t; r++)for (s = 0, o && (s = r), 0, l = i[s * v].children, c = o ? v : l.length / (t * e), d = l.length / t, a = p(new Date(+g.startTime())), h = 0; h < c; h++) { for (o ? (u = 0, l = i[h + c * r].children) : (u = r * d + e * h, 0), f = 0; f < e; f++)m = g.groups[f], g._addTimeSlotToCollection(m, l, f, u, r, a, n); a += n } }, _getVerticalGroupCount: function () { var e = this._view; return e.content.find("tr").length }, _getVerticalRowCount: function (e, t, i) { return i }, _renderEvent: function (e, t, i, n, o, r, s, a) { var l, c, d, u, h, f = this._view, p = []; for (c = o.start.index; c <= o.end.index; c++)(l = f._createEventElement(i.occurrence, t, c !== a, c !== s)).appendTo(r).css({ top: 0, height: f.options.eventHeight }), d = n._timeSlotCollections[0]._slots[c], u = n.timeSlotRanges(d.start, d.end, !1)[0], h = { start: c === s ? i.occurrence._startTime || i.occurrence.start : d.start, end: c === a ? i.occurrence._endTime || i.occurrence.end : d.end, element: l, uid: t.uid, slotRange: u, rowIndex: 0, offsetTop: 0 }, e.events[t.uid] = h, p.push(h), f.addContinuousEvent(n, u, l, t.isAllDay), f._arrangeRows(h, u, e); e.events[t.uid] = p }, _verticalCountForLevel: function (e) { var t = this._view; return t._columnCountForLevel(e) }, _horizontalCountForLevel: function (e, t) { var i = this._view; return i._columnCountForLevel(t) / i._columnCountForLevel(2) }, _updateCurrentVerticalTimeMarker: function (t, i) { var n = this._view, o = n.times.find("tr:first th:first"), r = n.times.find("tr:first th:last"), s = "<div class='" + v + "'></div>", a = e(s).prependTo(n.times), l = Math.round(t[0].innerRect(i, new Date(i.getTime() + 1), !1).top), u = {}; this._isRtl ? (u.right = o.position().left + d(o) - d(r), a.addClass(_ + "-left")) : (u.left = r.position().left, a.addClass(_ + "-right")), u.top = l - c(a) * w / 2, a.css(u), e(s).prependTo(n.content).css({ top: l, height: "1px", right: "1px", width: n.content[0].scrollWidth, left: 0 }) }, _changeGroup: function (e, t, i) { var n = this._view; i || (e.groupIndex = t ? n.groups.length - 1 : 0) }, _prevGroupSlot: function (e) { return e }, _nextGroupSlot: function (e) { return e }, _changeDate: function (e, t, i) { var n, o, r = this._view, s = r.groups[e.groupIndex]; if (t) { if (n = s._getCollections(!1), (o = i.index - 1) >= 0) return n[0]._slots[o] } else if (n = s._getCollections(!1), o = i.index + 1, n[0] && n[0]._slots[o]) return n[0]._slots[o] }, _verticalSlots: function (e, t, i) { return this._changeDate(e, t, i) }, _verticalMethod: function (e, t) { return t ? e ? "upSlot" : "downSlot" : e ? "leftSlot" : "rightSlot" }, _normalizeVerticalSelection: function (e, i, n, o) { var r = this._view; return o ? t : r._normalizeVerticalSelection(e, i, n) }, _horizontalSlots: function (e, t, i, n, o, r, s) { var a = this._view, l = a._changeGroup(e, s), c = {}; return l ? c.startSlot = c.endSlot = l : a._isVerticallyGrouped() || (c.startSlot = t[i](n), c.endSlot = t[i](o)), c }, _changeVerticalViewPeriod: function (e, t, i, n) { var o = this._view; return !(e.startSlot && e.endSlot || t || !o._changeViewPeriod(i, n, o._isVerticallyGrouped())) }, _changeHorizontalViewPeriod: function (e, t, i, n) { var o = this._view; return !o._isVerticallyGrouped() && !(e.startSlot && e.endSlot || t || !o._changeViewPeriod(i, n, !1)) }, _updateDirection: function (e, t, i, n) { var o = this._view; o._updateDirection(e, t, i, n, !o._isVerticallyGrouped()) }, _createMoveHint: function (e, t) { var i, n, o, r, s = this._view, a = e.start, l = e.end; for (i = a.index; i <= l.index; i++)n = e.collection._slots[i], (o = s._createEventElement(t.occurrence, t.occurrence, !1, !1)).addClass("k-event-drag-hint"), r = { left: n.offsetLeft + 2, top: n.offsetTop, height: s.options.eventHeight, width: n.offsetWidth }, o.css(r), s._moveHint = s._moveHint.add(o) }, _adjustLeftPosition: function (e) { var t = this._view; return t._isRtl && !t._isVerticallyGrouped() && (e -= t.content[0].scrollWidth - t.content[0].offsetWidth), e } }); r.ui.scheduler.TimelineGroupedView = C, r.ui.scheduler.TimelineGroupedByDateView = S, o = l.extend({ init: function (e, t) { var i = this; l.fn.init.call(i, e, t), i._groupedView = i._getGroupedView(), i.title = i.options.title || i.options.name, i._workDays = function (e) { var t = [], i = e.workWeekStart; for (t.push(i); e.workWeekEnd != i;)i > 6 ? i -= 7 : i++, t.push(i); return t }(i.options), i._templates(), i._editable(), i.calculateDateRange(), i._groups(), i._currentTime(!0) }, name: "timeline", _getGroupedView: function () { return this._isGroupedByDate() ? new r.ui.scheduler.TimelineGroupedByDateView(this) : new r.ui.scheduler.TimelineGroupedView(this) }, _getNextEventIndexBySlot: function (e, t, i) { var n, o; if (this._isVerticallyGrouped()) return r.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this, e, t, i); for (n = 0, o = 0; o < t.length; o++)if (e.startDate() > t[o].start.startDate()) n++; else { if (!(e.startDate().getTime() === t[o].start.startDate().getTime() && i > t[o].start.groupIndex)) break; n++ } return n }, _getSelectedSlot: function (e, t, i, n, o, s) { return this._isVerticallyGrouped() ? r.ui.SchedulerView.fn._getSelectedSlot.call(this, e, t, i, n, o, s) : e }, _getSortedEvents: function (t) { return this._isVerticallyGrouped() ? r.ui.SchedulerView.fn._getSortedEvents.call(this, t) : t.sort(function (t, i) { var n = t.start.startDate().getTime() - i.start.startDate().getTime(); return 0 === n && (t.start.isDaySlot && !i.start.isDaySlot && (n = -1), !t.start.isDaySlot && i.start.isDaySlot && (n = 1)), 0 === n && (n = t.start.groupIndex - i.start.groupIndex), 0 === n && (n = e(t.element).index() - e(i.element).index()), n }) }, _currentTimeMarkerUpdater: function () { this._updateCurrentTimeMarker(new Date) }, _updateCurrentTimeMarker: function (t) { var i, n, o, s, a, l, d, u, h, f, p, m, g = this.options; if (this.datesHeader.find("." + v).remove(), this.times.find("." + v).remove(), this.content.find("." + v).remove(), this._isInDateSlot({ start: t, end: t })) for (!1 === g.currentTimeMarker.useLocalTimezone && (i = g.dataSource.options.schema.timezone, g.dataSource && i && (n = r.timezone.offset(t, i), t = r.timezone.convert(t, t.getTimezoneOffset(), n))), o = g.group && "vertical" != g.group.orientation ? this.groups.length : 1, s = 0; s < o; s++) { if (!(a = this.groups[s])) return; if (l = r.date.toUtcTime(t), 0 === (d = a.timeSlotRanges(l, l + 1)).length) return; u = d[0].collection, u.slotByStartDate(t) && (this._isVerticallyGrouped() ? this._groupedView._updateCurrentVerticalTimeMarker(d, t) : (h = "<div class='" + v + "'></div>", f = this.datesHeader.find("." + b), p = Math.round(d[0].innerRect(t, new Date(t.getTime() + 1), !1).left), (m = e(h).prependTo(f).addClass(_ + "-down")).css({ left: this._adjustLeftPosition(p - c(m) * w / 2), top: f.find("tr:last").prev().position().top }), e(h).prependTo(this.content).css({ left: this._adjustLeftPosition(p), width: "1px", height: this.content[0].scrollHeight - 1, top: 0 }))) } }, _adjustLeftPosition: function (e) { return this._groupedView._adjustLeftPosition(e) }, _currentTime: function (e) { var i = this, n = i.options.currentTimeMarker; !1 !== n && n.updateInterval !== t && (i._currentTimeMarkerUpdater(), e && (i._currentTimeUpdateTimer = setInterval(h(this._currentTimeMarkerUpdater, i), n.updateInterval))) }, _editable: function () { this.options.editable && (this._isMobile() ? this._touchEditable() : this._mouseEditable()) }, _mouseEditable: function () { var t = this; t.element.on("click" + y, ".k-event a:has(.k-i-close)", function (i) { t.trigger("remove", { uid: e(this).closest(".k-event").attr(r.attr("uid")) }), i.preventDefault() }), !1 !== t.options.editable.create && t.element.on("dblclick" + y, ".k-scheduler-content td", function (e) { var i, n = t._slotByPosition(e.pageX, e.pageY); n && (i = t._resourceBySlot(n), t.trigger("add", { eventInfo: u({ start: n.startDate(), end: n.endDate() }, i) })), e.preventDefault() }), !1 !== t.options.editable.update && t.element.on("dblclick" + y, ".k-event", function (i) { t.trigger("edit", { uid: e(this).closest(".k-event").attr(r.attr("uid")) }), i.preventDefault() }) }, _touchEditable: function () { var i = this, n = 0; r.support.mobileOS.android && (n = 5), !1 !== i.options.editable.create && (i._addUserEvents = new r.UserEvents(i.element, { threshold: n, filter: ".k-scheduler-content td", tap: function (e) { var n, o = e.x.location !== t ? e.x.location : e.x, r = e.y.location !== t ? e.y.location : e.y, s = i._slotByPosition(o, r); s && (n = i._resourceBySlot(s), i.trigger("add", { eventInfo: u({ start: s.startDate(), end: s.endDate() }, n) })), e.preventDefault() } })), !1 !== i.options.editable.update && (i._editUserEvents = new r.UserEvents(i.element, { threshold: n, filter: ".k-event", tap: function (t) { var n = e(t.target).closest(".k-event"); n.hasClass("k-event-active") || i.trigger("edit", { uid: n.attr(r.attr("uid")) }), t.preventDefault() } })) }, _slotByPosition: function (e, t) { var i, n, o, s = this.content, a = s.offset(); for (e -= a.left, t -= a.top, this._isRtl ? (o = r.support.browser).mozilla ? (e += s[0].scrollWidth - s[0].offsetWidth, e += s[0].scrollLeft) : o.msie ? (e -= s.scrollLeft(), e += s[0].scrollWidth - s[0].offsetWidth) : o.webkit && (e += s[0].scrollLeft) : e += s[0].scrollLeft, t += s[0].scrollTop, e = Math.ceil(e), t = Math.ceil(t), n = 0; n < this.groups.length; n++)if (i = this._groupedView._getTimeSlotByPosition(e, t, n)) return i; return null }, options: { name: "TimelineView", title: "Timeline", selectedDateFormat: "{0:D}", selectedShortDateFormat: "{0:d}", date: r.date.today(), startTime: r.date.today(), endTime: r.date.today(), showWorkHours: !1, minorTickCount: 2, editable: !0, workDayStart: new Date(1980, 1, 1, 8, 0, 0), workDayEnd: new Date(1980, 1, 1, 17, 0, 0), workWeekStart: 1, workWeekEnd: 5, majorTick: 60, eventHeight: 25, eventMinWidth: 0, columnWidth: 100, groupHeaderTemplate: "#=text#", majorTimeHeaderTemplate: "#=kendo.toString(date, 't')#", slotTemplate: "&nbsp;", eventTemplate: k, dateHeaderTemplate: x, footer: { command: "workDay" }, currentTimeMarker: { updateInterval: 1e4, useLocalTimezone: !0 }, messages: { defaultRowText: "All events", showFullDay: "Show full day", showWorkDay: "Show business hours" } }, events: ["remove", "add", "edit"], _templates: function () { var e = this.options, t = u({}, r.Template, e.templateSettings); this.eventTemplate = this._eventTmpl(e.eventTemplate, '<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-non-recurrence"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'), this.majorTimeHeaderTemplate = r.template(e.majorTimeHeaderTemplate, t), this.dateHeaderTemplate = r.template(e.dateHeaderTemplate, t), this.slotTemplate = r.template(e.slotTemplate, t), this.groupHeaderTemplate = r.template(e.groupHeaderTemplate, t) }, _render: function (t) { var i = this; t = t || [], i._dates = t, i._startDate = t[0], i._endDate = t[t.length - 1 || 0], i._calculateSlotRanges(), i.createLayout(i._layout(t)), i._content(t), i._footer(), i._setContentWidth(), i.refreshLayout(), i.datesHeader.on("click" + y, ".k-nav-day", function (t) { var n = e(t.currentTarget).closest("th"), o = i._slotByPosition(n.offset().left, i.content.offset().top); i.trigger("navigate", { view: "timeline", date: o.startDate() }) }), i._groupedView._hideHeaders() }, _setContentWidth: function () { var e = this.content, t = e.width(), i = this.content.find("table"), n = i.find("tr:first").children().length, o = 100, r = n * this.options.columnWidth; t < r && (o = Math.ceil(r / t * 100)), i.add(this.datesHeader.find("table")).css("width", o + "%") }, _calculateSlotRanges: function () { var e, t, i, n, o = this._dates, s = this.startTime(), l = this.endTime(); for (p(l) === p(r.date.getDate(l)) && (l = r.date.getDate(l), a(l, m - 1)), l = p(l), s = p(s), e = [], t = 0; t < o.length; t++)i = f(o[t]), a(i, s), n = f(o[t]), a(n, l), e.push({ start: r.date.toUtcTime(i), end: r.date.toUtcTime(n) }); this._slotRanges = e }, _forTimeRange: function (e, t, n, o, r) { var s, l, c, d, u, h, f, v, _, b, w, y, k, x; for (e = i(e), t = i(t), this, s = p(e), l = p(t), c = this.options.minorTickCount, d = this.options.majorTick * g, u = d / c || 1, h = new Date(+e), f = h.getDate(), _ = 0, w = "", b = m / u, s != l && (s > l && (l += m), b = (l - s) / u), b = o ? 1 : Math.round(b), r && (b *= r); _ < b; _++)k = 0 === (y = _ % (d / u)), x = c, b % c != 0 && (k && b - (_ + 1) < c && (x = b % c)), w += n(h, k, y < c - 1, y === c - 1, x, _ % r), o || (r ? _ % r == r - 1 && a(h, u, !1) : a(h, u, !1)); return l && (v = p(h), f < h.getDate() && (v += m), v > l && (h = new Date(+t))), w }, _layout: function (e) { var t, i, n, o = [], r = [], s = this, a = [{ text: s.options.messages.defaultRowText }], l = s._groupedView, c = []; for (t = 0; t < s.options.minorTickCount; t++)c.push({ text: "&#8203;", className: "k-last", minorTicks: !0 }); for (this._forTimeRange(s.startTime(), s.endTime(), function (e, t, i, n, r) { var a, d = s.majorTimeHeaderTemplate; t && (a = { text: d({ date: e }), className: n ? "k-slot-cell" : "", columns: c.slice(0, r) }, l._setColspan(a), o.push(a)) }), i = 0; i < e.length; i++)r.push({ text: s.dateHeaderTemplate({ date: e[i] }), className: "k-slot-cell", columns: o.slice(0) }); return (n = this.groupedResources).length && ("vertical" === this._groupOrientation() ? (a = l._createRowsLayout(n, null, this.groupHeaderTemplate, r), r = l._createVerticalColumnsLayout(n, null, this.groupHeaderTemplate, r)) : r = l._createColumnsLayout(n, r, this.groupHeaderTemplate, r)), { columns: r, rows: a } }, _footer: function () { var t, i, n, o = this.options; !1 !== o.footer && (t = '<div class="k-header k-scheduler-footer">', (i = o.footer.command) && "workDay" === i ? (t += '<ul class="k-reset k-header">', t += '<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>', t += (o.showWorkHours ? o.messages.showFullDay : o.messages.showWorkDay) + "</a></li>", t += "</ul>") : t += "&nbsp;", t += "</div>", this.footer = e(t).appendTo(this.element), n = this, this.footer.on("click" + y, ".k-scheduler-fullday", function (e) { e.preventDefault(), n.trigger("navigate", { view: n.name || o.name, date: n.startDate(), isWorkDay: !o.showWorkHours }) })) }, _columnCountForLevel: function (e) { var t = this.columnLevels[e]; return t ? t.length : 0 }, _rowCountForLevel: function (e) { var t = this.rowLevels[e]; return t ? t.length : 0 }, _isWorkDay: function (e) { var t, i = e.getDay(), n = this._workDays; for (t = 0; t < n.length; t++)if (n[t] === i) return !0; return !1 }, _content: function (e) { var t = this, i = t.startTime(), n = this.endTime(), o = 1, r = 1, s = e.length, a = "", l = this.groupedResources, c = this.slotTemplate, d = !1; l.length && ((d = "vertical" === t._groupOrientation()) ? (r = t._groupedView._getRowCount(this.rowLevels.length - 1), o = t._groupedView._getGroupsCount()) : o = t._groupCount()), a += "<tbody>", a += t._groupedView._addContent(e, s, o, r, i, n, c, d), a += "</tbody>", this.content.find("table").append(a) }, _groups: function () { var e, t, i, n, o = this._groupCount(), s = this._dates, a = s.length; for (this.groups = [], e = 0; e < o; e++)t = this._addResourceView(e), i = s[0], n = s[s.length - 1 || 0], t.addTimeSlotCollection(i, r.date.addDays(n, 1)); this._timeSlotGroups(o, a) }, _isHorizontallyGrouped: function () { return this.groupedResources.length && "horizontal" === this._groupOrientation() }, _timeSlotGroups: function (e, t) { var i = this._timeSlotInterval(), n = this._isVerticallyGrouped(), o = this.content.find("tr"); o.attr("role", "row"), this._groupedView._addTimeSlotsCollections(e, t, o, i, n) }, _addTimeSlotToCollection: function (e, t, i, n, o, r, s) { var a = t[i + n], l = e.getTimeSlotCollection(0), c = this._dates[o], d = Date.UTC(c.getFullYear(), c.getMonth(), c.getDate()), u = d + r, h = u + s; a.setAttribute("role", "gridcell"), a.setAttribute("aria-selected", !1), l.addTimeSlot(a, u, h, !0) }, startDate: function () { return this._startDate }, endDate: function () { return this._endDate }, startTime: function () { var e = this.options; return e.showWorkHours ? e.workDayStart : e.startTime }, endTime: function () { var e = this.options; return e.showWorkHours ? e.workDayEnd : e.endTime }, _timeSlotInterval: function () { var e = this.options; return e.majorTick / e.minorTickCount * g }, nextDate: function () { return r.date.nextDay(this.endDate()) }, previousDate: function () { return r.date.previousDay(this.startDate()) }, calculateDateRange: function () { this._render([this.options.date]) }, render: function (e) { var t, i, n, o, s; for (this._headerColumnCount = 0, this._groups(), this.element.find(".k-event").remove(), e = new r.data.Query(e).sort([{ field: "start", dir: "asc" }, { field: "end", dir: "desc" }]).toArray(), t = [], this._eventsByResource(e, this.groupedResources, t), i = [], n = 0, o = 0; o < t.length; o++)s = { groupIndex: o, maxRowCount: 0, events: {} }, i.push(s), this._renderEvents(t[o], o, s), n < s.maxRowCount && (n = s.maxRowCount); this._setRowsHeight(i, t.length, n), this._positionEvents(i, t.length), this._currentTime(!1), this.trigger("activate") }, _positionEvents: function (t, i) { var n, o, r, s, a; for (n = 0; n < i; n++)for (r in o = t[n].events) if (s = o[r], e.isArray(s)) for (a = 0; a < s.length; a++)this._positionEvent(s[a]); else this._positionEvent(s) }, _setRowsHeight: function (t, i, n) { var o, r, s, a, l, c = this.options.eventHeight + 2, d = this._getBottomRowOffset(), u = this._groupedView, h = u._getVerticalGroupCount(i); for (i = this._isVerticallyGrouped() ? h : 1, o = 0; o < i; o++)r = u._getVerticalRowCount(t, o, n), s = (c + 2) * (r = r || 1) + d, a = e(this.times.find("tr")[o]), l = e(this.content.find("tr")[o]), a.height(s), l.height(s); this._setContentWidth(), this.refreshLayout(), this._refreshSlots() }, _getBottomRowOffset: function () { var e, t, i = .5 * this.options.eventHeight, n = this._isMobile(); return n ? (e = 30, t = 60) : (e = 15, t = 30), i > t ? i = t : i < e && (i = e), i }, _positionEvent: function (e) { var t, i, n, o = this.options.eventHeight + 2, r = e.slotRange.innerRect(e.start, e.end, !1), s = this._adjustLeftPosition(r.left), a = r.right - r.left - 2; a < 0 && (a = 0), a < this.options.eventMinWidth && (t = e.slotRange.collection, i = t._slots[t._slots.length - 1], n = i.offsetLeft + i.offsetWidth, a = this.options.eventMinWidth, n < s + a && (a = n - r.left - 2)), e.element.css({ top: e.slotRange.start.offsetTop + e.rowIndex * (o + 2) + "px", left: s, width: a }) }, _refreshSlots: function () { for (var e = 0; e < this.groups.length; e++)this.groups[e].refresh() }, _eventsByResource: function (e, t, i) { var n, o, s, a, c = t[0]; if (c) for (n = c.dataSource.view(), o = 0; o < n.length; o++)s = this._resourceValue(c, n[o]), a = new r.data.Query(e).filter({ field: c.field, operator: l.groupEqFilter(s) }).toArray(), t.length > 1 ? this._eventsByResource(a, t.slice(1), i) : i.push(a); else i.push(e) }, _isInDateSlot: function (e) { var t = e.start, i = e.end, n = f(this._startDate), o = r.date.addDays(f(this._endDate), 1); return t < o && n <= i }, _isInTimeSlot: function (e) { var t, i = e._startTime || r.date.toUtcTime(e.start), n = e._endTime || r.date.toUtcTime(e.end), o = this._slotRanges; for (i === n && (n += 1), t = 0; t < o.length; t++)if (i < o[t].end && o[t].start < n) return !0; return !1 }, _adjustEvent: function (e) { var t = e.start, i = e.end, n = e._time("start"), o = e._time("end"), s = p(this.startTime()), l = p(this.endTime()), c = null, d = null, u = !1, h = !1; return e.isAllDay ? (c = f(t), s > n && (a(c, s), h = !0), d = f(i), l === p(f(this.endTime())) ? d = r.date.addDays(d, 1) : (a(d, l), u = !0)) : (l = 0 === l ? m : l, s > n ? (c = f(t), a(c, s), h = !0) : l < n && (c = f(t), c = r.date.addDays(c, 1), a(c, s), h = !0), l < o ? (d = f(i), a(d, l), u = !0) : s > o && (d = f(i), d = r.date.addDays(d, -1), a(d, l), u = !0)), { occurrence: e.clone({ start: c || t, end: d || i, _startTime: c ? r.date.toUtcTime(c) : e._startTime, _endTime: d ? r.date.toUtcTime(d) : e._endTime, isAllDay: !1 }), head: u, tail: h } }, _renderEvents: function (e, t, i) { var n, o, r, s, a, l, c, d, u, h, f; for (o = 0, r = e.length; o < r; o++)n = e[o], this._isInDateSlot(n) && (s = n.isAllDay || n.end.getTime() - n.start.getTime() >= m, a = this.content, (s || this._isInTimeSlot(n)) && (l = this._adjustEvent(n), (c = this.groups[t])._continuousEvents || (c._continuousEvents = []), d = c.slotRanges(l.occurrence, !1), u = d[0], h = u.start.index, f = u.end.index, this._isInTimeSlot(l.occurrence) && this._groupedView._renderEvent(i, n, l, c, u, a, h, f))) }, addContinuousEvent: function (e, t, i, n) { var o = e._continuousEvents; o.push({ element: i, isAllDay: n, uid: i.attr(r.attr("uid")), start: t.start, end: t.end }) }, _createEventElement: function (t, i, n, o) { var s, a, l = this.eventTemplate, c = this.options.editable, d = this._isMobile(), h = c && !1 !== c.destroy && !d, f = c && !1 !== c.resize, p = i._time("start"), m = i._time("end"), g = i.start, v = i.end, _ = this.eventResources(i); return i._startTime && p !== r.date.getMilliseconds(i.start) && (g = new Date(p), g = r.timezone.apply(g, "Etc/UTC")), i._endTime && m !== r.date.getMilliseconds(i.end) && (v = new Date(m), v = r.timezone.apply(v, "Etc/UTC")), s = u({}, { ns: r.ns, resizable: f, showDelete: h, head: n, tail: o, singleDay: 1 == this._dates.length, resources: _, inverseColor: !(!_ || !_[0]) && this._shouldInverseResourceColor(_[0]), messages: this.options.messages }, i, { start: g, end: v }), a = e(l(s)), this.angular("compile", function () { return { elements: a, data: [{ dataItem: s }] } }), a }, _arrangeRows: function (e, t, i) { var o, r, s, a, c, d, u = t.start.index, h = t.end.index, f = e.slotRange.innerRect(e.start, e.end, !1), p = f.right + this.options.eventMinWidth, m = n(t.events(), f.left, p); for (t.addEvent({ slotIndex: u, start: u, end: h, rectLeft: f.left, rectRight: p, element: e.element, uid: e.uid }), m.push({ start: u, end: h, uid: e.uid }), o = l.createRows(m), i.maxRowCount < o.length && (i.maxRowCount = o.length), r = 0, s = o.length; r < s; r++)for (a = o[r].events, c = 0, d = a.length; c < d; c++)i.events[a[c].uid].rowIndex = r }, _groupCount: function () { var e = this.groupedResources, t = this._groupedView; return e.length ? "vertical" === this._groupOrientation() ? t._verticalCountForLevel(e.length - 1) : t._horizontalCountForLevel(e.length - 1, this.columnLevels.length - 1) : 1 }, _updateEventForSelection: function (e) { var t = this._adjustEvent(e.clone()); return t.occurrence }, _eventOptionsForMove: function (e) { return e.isAllDay ? { isAllDay: !1 } : {} }, _updateEventForResize: function (e) { e.isAllDay && e.set("isAllDay", !1) }, _updateMoveHint: function (e, t, i) { var n, o, r, s, a = this.groups[t], l = e.clone({ start: e.start, end: e.end }), c = l.duration(); for (l.start = new Date(l.start.getTime() + i), l.end = new Date(+l.start + c), n = this._adjustEvent(l), o = a.slotRanges(n.occurrence, !1), this._removeMoveHint(), r = 0; r < o.length; r++)this._groupedView._createMoveHint(o[r], n); s = this.content, this._moveHint.appendTo(s) }, _updateResizeHint: function (e, t, i, n) { var o, s, a, c, d, u, h, f, p, m = this.groups[t], g = m.ranges(i, n, !1, !1); for (this._removeResizeHint(), o = 0; o < g.length; o++)s = g[o], a = s.startSlot(), (c = s.innerRect(i, n, !1)).top = a.offsetTop, d = c.right - c.left, u = s.endSlot().offsetTop + a.offsetHeight - c.top, h = this._adjustLeftPosition(c.left), f = l.fn._createResizeHint.call(this, h, c.top, d, u), this._resizeHint = this._resizeHint.add(f); p = this.content, this._resizeHint.appendTo(p), this._resizeHint.find(".k-label-top,.k-label-bottom").text(""), this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(i), "t")), this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(n), "t")) }, selectionByElement: function (e) { var t = e.offset(); return this._slotByPosition(t.left, t.top) }, _updateDirection: function (e, t, i, n, o) { var r = t[0].start, s = t[t.length - 1].end; i && !o && r.index === s.index && r.collectionIndex === s.collectionIndex && (e.backward = n) }, _changeGroup: function (e, t) { var i = t ? "prevGroupSlot" : "nextGroupSlot", n = this[i](e.start, e.groupIndex, !1); return n && (e.groupIndex += t ? -1 : 1), this._groupedView._changeGroup(e, t, n), n }, prevGroupSlot: function (e, t, i) { var n = this.groups[t], o = n.ranges(e, e, i, !1)[0].start; if (!(t <= 0)) return this._groupedView._prevGroupSlot(o, n, i) }, nextGroupSlot: function (e, t, i) { var n = this.groups[t], o = n.ranges(e, e, i, !1)[0].start; if (!(t >= this.groups.length - 1)) return this._groupedView._nextGroupSlot(o, n, i) }, _verticalSlots: function (e, t, i, n) { var o = this._groupedView, r = o._verticalMethod(n, i), s = t[0].start, a = t[t.length - 1].end, l = this.groups[e.groupIndex], c = o._normalizeVerticalSelection(e, t, n, i); return c && (s = a = c), s = l[r](s), a = l[r](a), i || !this._isVerticallyGrouped() || s && a || (s = a = o._verticalSlots(e, n, c)), { startSlot: s, endSlot: a } }, _horizontalSlots: function (e, t, i, n) { var o = n ? "upSlot" : "downSlot", r = t[0].start, s = t[t.length - 1].end, a = this.groups[e.groupIndex], l = {}; return i ? (l.startSlot = a[o](r), l.endSlot = a[o](s), i || !this._isHorizontallyGrouped() || r && s || (l.startSlot = l.endSlot = this._changeGroup(e, n))) : l = this._groupedView._horizontalSlots(e, a, o, r, s, i, n), l }, _changeViewPeriod: function (e, t) { var i, n = t ? this.previousDate() : this.nextDate(), o = e.start, r = e.end; return e.start = new Date(n), e.end = new Date(n), this._isHorizontallyGrouped() && (e.groupIndex = t ? this.groups.length - 1 : 0), i = r - o, t ? (r = 0 === (r = p(this.endTime())) ? m : r, a(e.start, r - i), a(e.end, r)) : (o = p(this.startTime()), a(e.start, o), a(e.end, o + i)), e.events = [], !0 }, move: function (e, t, i) { var n, o, s, a, l, c = !1, d = this.groups[e.groupIndex], u = r.keys, h = this._groupedView, f = d.ranges(e.start, e.end, !1, !1); if (t === u.DOWN || t === u.UP) { if (c = !0, s = t === u.UP, h._updateDirection(e, f, i, s), a = this._verticalSlots(e, f, i, s), h._changeVerticalViewPeriod(a, i, e, s)) return c } else if ((t === u.LEFT || t === u.RIGHT) && (c = !0, s = t === u.LEFT, this._updateDirection(e, f, i, s, !1), a = this._horizontalSlots(e, f, i, s), h._changeHorizontalViewPeriod(a, i, e, s))) return c; return c && (n = a.startSlot, o = a.endSlot, i ? (l = e.backward) && n ? e.start = n.startDate() : !l && o && (e.end = o.endDate()) : n && o && (e.start = n.startDate(), e.end = o.endDate()), e.events = []), c }, destroy: function () { var e = this; e.element && e.element.off(y), e.footer && e.footer.remove(), e._currentTimeUpdateTimer && clearInterval(e._currentTimeUpdateTimer), l.fn.destroy.call(this), this._isMobile() && e.options.editable && (!1 !== e.options.editable.create && e._addUserEvents.destroy(), !1 !== e.options.editable.update && e._editUserEvents.destroy()) } }), u(!0, s, { TimelineView: o, TimelineWeekView: o.extend({ options: { name: "TimelineWeekView", title: "Timeline Week", selectedDateFormat: "{0:D} - {1:D}", selectedShortDateFormat: "{0:d} - {1:d}", majorTick: 120 }, name: "timelineWeek", calculateDateRange: function () { var e, t = this.options.date, i = r.date.dayOfWeek(t, this.calendarInfo().firstDay, -1), n = []; for (e = 0, 7; e < 7; e++)n.push(i), i = r.date.nextDay(i); this._render(n) } }), TimelineWorkWeekView: o.extend({ options: { name: "TimelineWorkWeekView", title: "Timeline Work Week", selectedDateFormat: "{0:D} - {1:D}", selectedShortDateFormat: "{0:d} - {1:d}", majorTick: 120 }, name: "timelineWorkWeek", nextDate: function () { var e = r.date.dayOfWeek(r.date.nextDay(this.endDate()), this.calendarInfo().firstDay, 1); return r.date.addDays(e, this._workDays[0]) }, previousDate: function () { var e = r.date.dayOfWeek(this.startDate(), this.calendarInfo().firstDay, -1), t = this._workDays; return r.date.addDays(e, t[t.length - 1] - 7) }, calculateDateRange: function () { for (var e = this.options.date, t = r.date.dayOfWeek(e, this.options.workWeekStart, -1), i = r.date.dayOfWeek(t, this.options.workWeekEnd, 1), n = []; t <= i;)n.push(t), t = r.date.nextDay(t); this._render(n) } }), TimelineMonthView: o.extend({ options: { name: "TimelineMonthView", title: "Timeline Month", selectedDateFormat: "{0:D} - {1:D}", selectedShortDateFormat: "{0:d} - {1:d}", workDayStart: new Date(1980, 1, 1, 0, 0, 0), workDayEnd: new Date(1980, 1, 1, 23, 59, 59), footer: !1, majorTick: 1440, minorTickCount: 1 }, name: "timelineMonth", calculateDateRange: function () { var e, t, i = this.options.date, n = r.date.firstDayOfMonth(i), o = r.date.lastDayOfMonth(i), s = []; for (e = 0, t = o.getDate(); e < t; e++)s.push(n), n = r.date.nextDay(n); this._render(s) } }) }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.scheduler.min", ["kendo.dropdownlist.min", "kendo.editable.min", "kendo.multiselect.min", "kendo.window.min", "kendo.datetimepicker.min", "kendo.scheduler.recurrence.min", "kendo.scheduler.view.min", "kendo.scheduler.dayview.min", "kendo.scheduler.agendaview.min", "kendo.scheduler.monthview.min", "kendo.scheduler.timelineview.min", "kendo.mobile.actionsheet.min", "kendo.mobile.pane.min", "kendo.pdf.min"], function () { return function (e, t) { function i(e, t) { return t = t || "", e.startTimezone && (t = e.startTimezone, e.endTimezone && (t += " | " + e.endTimezone)), t } function n(e, t) { var i = t.timezone; i && (e[C.attr("timezone")] = i) } function o(e, t) { var i, n = t.model.fields[t.field].validation; n && ((i = n.dateCompare) && N(i) && i.message && (e[C.attr("dateCompare-msg")] = i.message)) } function r(e, t, i, n) { var o, r, s; for (r = 0, s = (e = e || []).length; r < s; r++)o = e[r], n ? o.startTimezone || o.endTimezone ? i ? (o.start = C.timezone.convert(o.start, o.startTimezone || o.endTimezone, i), o.end = C.timezone.convert(o.end, o.endTimezone || o.startTimezone, i), o.start = C.timezone[t](o.start, i), o.end = C.timezone[t](o.end, i)) : (o.start = C.timezone[t](o.start, o.startTimezone || o.endTimezone), o.end = C.timezone[t](o.end, o.endTimezone || o.startTimezone)) : i && (o.start = C.timezone[t](o.start, i), o.end = C.timezone[t](o.end, i)) : o.startTimezone || o.endTimezone ? (o.start = C.timezone[t](o.start, o.startTimezone || o.endTimezone), o.end = C.timezone[t](o.end, o.endTimezone || o.startTimezone), i && (o.start = C.timezone.convert(o.start, o.startTimezone || o.endTimezone, i), o.end = C.timezone.convert(o.end, o.endTimezone || o.startTimezone, i))) : i && (o.start = C.timezone[t](o.start, i), o.end = C.timezone[t](o.end, i)), n && delete o.uid; return e } function s(e, t) { for (var i, n = e.length, o = 0; o < n; o++)if ((i = e[o]).uid === t) return i } function a(e, t, i) { return e = i ? C.timezone.convert(e, t, i) : C.timezone.remove(e, t) } function l(t, i) { var n, o, r = (t.fields || t)[i], s = ["url", "email", "number", "date", "boolean"], a = r ? r.validation : {}, l = C.attr("type"), c = e.inArray, d = {}; for (n in a) o = a[n], c(n, s) >= 0 ? d[l] = n : C.isFunction(o) || (d[n] = N(o) ? o.value || n : o), d[C.attr(n + "-msg")] = o.message; return d } function c(t, i) { var n = l(i, t.field); return function (o) { e(C.format('<select data-{0}bind="value:{1}" title="' + i.title + '">', C.ns, t.field)).appendTo(o).attr(n).kendoDropDownList({ dataTextField: t.dataTextField, dataValueField: t.dataValueField, dataSource: t.dataSource, valuePrimitive: t.valuePrimitive, optionLabel: "None", template: C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#', t.dataColorField, t.dataTextField) }) } } function d(t) { var i = l(t.model, t.field); return function (t, n) { e('<textarea name="description" class="k-textbox" title="' + n.title + '"/>').attr(i).appendTo(t) } } function u(e, t) { var i, n = e.end.getTime() - e.start.getTime(), o = new Date(e.start.getTime()); return C.date.setTime(o, t), i = new Date(o.getTime()), C.date.setTime(i, n, !0), { start: o, end: i } } var h, f, p, m, g, v, _, b, w, y, k, x, C = window.kendo, S = C.date, T = C.support.input, D = S.MS_PER_DAY, A = S.getDate, E = C.date.getMilliseconds, I = C.recurrence, M = C.keys, R = C.ui, F = R.Widget, z = R.DataBoundWidget, P = "string", B = R.Popup, L = R.Calendar, H = C.data.DataSource, N = e.isPlainObject, O = e.extend, V = e.proxy, U = Object.prototype.toString, W = e.isArray, q = ".kendoScheduler", j = "click", G = "change", $ = "cancel", Y = "remove", K = "save", Q = "edit", X = /(?:value:start|value:end)(?:,|$)/, Z = A(new Date), J = /\;/g, ee = "recurrenceException", te = "Do you want to edit only this event occurrence or the whole series?", ie = C.template('<li class="k-current-view" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>'), ne = C.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-file-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link" title="${messages.today}">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link" title="${messages.previous}" aria-label="${messages.previous}"><span class="k-icon k-i-arrow-60-left"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link" title="${messages.next}" aria-label="${messages.next}"><span class="k-icon k-i-arrow-60-right"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div>'), oe = C.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-60-left"></span></a></li><li class="k-state-default k-nav-current"><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-60-right"></span></a></li></ul></div>'), re = C.Class.extend({ init: function (t, i) { var n = t.timezone; this.reader = i, i.model && (this.model = i.model), this.timezone = n, this.data = function (e, t) { return function (i) { return r(i = e(i), "apply", t), i || [] } }(e.proxy(this.data, this), n), this.serialize = function (e, t) { return function (i) { return i && ("[object Array]" === U.call(i) || i instanceof C.data.ObservableArray || (i = [i])), r(i, "remove", t, !0), (i = e(i)) || [] } }(e.proxy(this.serialize, this), n) }, errors: function (e) { return this.reader.errors(e) }, parse: function (e) { return this.reader.parse(e) }, data: function (e) { return this.reader.data(e) }, total: function (e) { return this.reader.total(e) }, groups: function (e) { return this.reader.groups(e) }, aggregates: function (e) { return this.reader.aggregates(e) }, serialize: function (e) { return this.reader.serialize(e) } }), se = C.data.Model.define({ init: function (e) { var t = this; C.data.Model.fn.init.call(t, e), t._defaultId = t.defaults[t.idField] }, _time: function (e) { var t = this[e], i = "_" + e + "Time"; return this[i] ? this[i] - C.date.toUtcTime(C.date.getDate(t)) : E(t) }, _date: function (e) { var t = "_" + e + "Time"; return this[t] ? this[t] - this._time(e) : C.date.getDate(this[e]) }, clone: function (t, i) { var n = this.uid, o = new this.constructor(e.extend({}, this.toJSON(), t)); return i || (o.uid = n), o }, duration: function () { var e = this.end, t = this.start, i = (e.getTimezoneOffset() - t.getTimezoneOffset()) * C.date.MS_PER_MINUTE; return e - t - i }, expand: function (e, t, i) { return I ? I.expand(this, e, t, i) : [this] }, update: function (e) { for (var t in e) this.set(t, e[t]); this._startTime && this.set("_startTime", C.date.toUtcTime(this.start)), this._endTime && this.set("_endTime", C.date.toUtcTime(this.end)) }, isMultiDay: function () { return this.isAllDay || this.duration() >= C.date.MS_PER_DAY }, isException: function () { return !this.isNew() && this.recurrenceId }, isOccurrence: function () { return this.isNew() && this.recurrenceId }, isRecurring: function () { return !(!this.recurrenceRule && !this.recurrenceId) }, isRecurrenceHead: function () { return !(!this.id || !this.recurrenceRule) }, toOccurrence: function (t) { return (t = e.extend(t, { recurrenceException: null, recurrenceRule: null, recurrenceId: this.id || this.recurrenceId }))[this.idField] = this.defaults[this.idField], this.clone(t, !0) }, toJSON: function () { var e = C.data.Model.fn.toJSON.call(this); return e.uid = this.uid, delete e._startTime, delete e._endTime, e }, shouldSerialize: function (e) { return C.data.Model.fn.shouldSerialize.call(this, e) && "_defaultId" !== e }, set: function (e, t) { var i, n, o, r = this.isAllDay || !1; C.data.Model.fn.set.call(this, e, t), "isAllDay" == e && t != r && (i = C.date.getDate(this.start), n = new Date(this.end), 0 === (o = C.date.getMilliseconds(n)) && t && (o = D), this.set("start", i), !0 === t ? (C.date.setTime(n, -o), n < i && (n = i)) : C.date.setTime(n, D - o), this.set("end", n)) }, id: "id", fields: { id: { type: "number" }, title: { defaultValue: "", type: "string" }, start: { type: "date", validation: { required: !0 } }, startTimezone: { type: "string" }, end: { type: "date", validation: { required: !0, dateCompare: { value: function (e) { var t, i, n, o, r, s, l, c, d, u, h, f; return !(e.filter("[name=end]").length && (t = e.closest(".k-scheduler-edit-form"), i = t.find("[name=start]:visible"), n = t.find("[name=end]:visible"), n[0] && i[0] && (s = C.widgetInstance(i, C.ui), l = C.widgetInstance(n, C.ui), c = t.data("kendoEditable"), d = c ? c.options.model : null, s && l ? (o = s.value(), r = l.value()) : (o = C.parseDate(i.val()), r = C.parseDate(n.val())), o && r))) || (d && (u = i.attr(C.attr("timezone")), h = d.startTimezone, f = d.endTimezone, h = h || f, f = f || h, h && (o = a(o, h, u), r = a(r, f, u))), o <= r) } } } }, endTimezone: { type: "string" }, recurrenceRule: { defaultValue: "", type: "string" }, recurrenceException: { defaultValue: "", type: "string" }, isAllDay: { type: "boolean", defaultValue: !1 }, description: { type: "string" } } }), ae = H.extend({ init: function (e) { H.fn.init.call(this, O(!0, {}, { schema: { modelBase: se, model: se } }, e)), this.reader = new re(this.options.schema, this.reader) }, expand: function (e, t) { var i = this.view(), n = {}; return e && t && (t = new Date(t.getTime() + D - 1), n = { logic: "or", filters: [{ logic: "and", filters: [{ field: "start", operator: "gte", value: e }, { field: "end", operator: "gte", value: e }, { field: "start", operator: "lte", value: t }] }, { logic: "and", filters: [{ field: "start", operator: "lte", value: new Date(e.getTime() + D - 1) }, { field: "end", operator: "gte", value: e }] }] }, i = new C.data.Query(function (e, t, i, n) { for (var o = e.length, r = [], s = 0; s < o; s++)r = r.concat(e[s].expand(t, i, n)); return r }(i, e, t, this.reader.timezone)).filter(n).toArray()), i }, cancelChanges: function (e) { e && e.isOccurrence() && this._removeExceptionDate(e), H.fn.cancelChanges.call(this, e) }, insert: function (e, t) { if (t) { if (!(t instanceof se)) { var i = t; (t = this._createNewModel()).accept(i) } return (!this._pushCreated && t.isRecurrenceHead() || t.recurrenceId) && (t = t.recurrenceId ? t : t.toOccurrence(), this._addExceptionDate(t)), H.fn.insert.call(this, e, t) } }, pushCreate: function (e) { this._pushCreated = !0, H.fn.pushCreate.call(this, e), this._pushCreated = !1 }, remove: function (e) { return e.isRecurrenceHead() ? this._removeExceptions(e) : e.isRecurring() && this._addExceptionDate(e), H.fn.remove.call(this, e) }, _removeExceptions: function (e) { for (var t = this.data().slice(0), i = t.shift(), n = e.id; i;)i.recurrenceId === n && H.fn.remove.call(this, i), i = t.shift(); e.set(ee, "") }, _removeExceptionDate: function (e) { var t, i, n, o; e.recurrenceId && ((t = this.get(e.recurrenceId)) && (i = e.start, n = RegExp("(\\,?)" + I.toExceptionString(i, this.reader.timezone)), o = (t.recurrenceException || "").replace(J, ",").replace(/\,$/, ""), t.set(ee, o.replace(n, "")))) }, _addExceptionDate: function (e) { var t, i = e.start, n = this.reader.timezone, o = this.get(e.recurrenceId), r = (o.recurrenceException || "").replace(J, ",").replace(/\,$/, ""); I.isException(r, i, n) || (t = I.toExceptionString(i, n), o.set(ee, r + (r && t ? "," : "") + t)) } }); ae.create = function (e) { (W(e) || e instanceof C.data.ObservableArray) && (e = { data: e }); var t = e || {}, i = t.data; if (t.data = i, !(t instanceof ae) && t instanceof C.data.DataSource) throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported"); return t instanceof ae ? t : new ae(t) }, O(!0, C.data, { SchedulerDataSource: ae, SchedulerDataReader: re, SchedulerEvent: se }), h = { update: { text: "Save", className: "k-primary k-scheduler-update" }, canceledit: { text: "Cancel", className: "k-scheduler-cancel" }, destroy: { text: "Delete", imageClass: "k-i-close", className: "k-primary k-scheduler-delete", iconClass: "k-icon" } }, f = { mobile: { dateRange: function (t, i) { var r = { name: i.field, title: i.title }, s = T.date ? "" : C.attr("role") + '="datepicker" ', a = C.attr("role") + '="datetimepicker" ', l = i.model.isAllDay, c = C.attr("validate") + "='" + !l + "'", d = C.attr("validate") + "='" + l + "'"; n(r, i), o(r, i), e('<input type="datetime-local" required ' + C.attr("type") + '="date" ' + a + C.attr("bind") + '="value:' + i.field + ',invisible:isAllDay" ' + c + "/>").attr(r).appendTo(t), e('<input type="date" required ' + C.attr("type") + '="date" ' + s + C.attr("bind") + '="value:' + i.field + ',visible:isAllDay" ' + d + "/>").attr(r).appendTo(t), e("<span " + C.attr("for") + '="' + i.field + '" class="k-invalid-msg"/>').hide().appendTo(t) }, timezonePopUp: function (t, n) { var o = i(n.model, n.messages.noTimezone); e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">' + o + "</a>").click(n.click).appendTo(t) }, timezone: function (t, i) { e("<div " + C.attr("bind") + '="value:' + i.field + '" />').attr({ name: i.field }).toggle(i.visible).appendTo(t).kendoMobileTimezoneEditor({ optionLabel: i.noTimezone }) }, recurrence: function (t, i) { e("<div " + C.attr("bind") + '="value:' + i.field + '" />').attr({ name: i.field }).appendTo(t).kendoMobileRecurrenceEditor({ start: i.model.start, timezone: i.timezone, messages: i.messages, pane: i.pane, value: i.model[i.field] }) }, description: d, multipleResources: function (t, i) { var n = l(i, t.field); return function (i) { var o, r, s = "", a = t.dataSource.view(); for (o = 0, r = a.length; o < r; o++)s += C.format('<option value="{0}">{1}</option>', C.getter(t.dataValueField)(a[o]), C.getter(t.dataTextField)(a[o])); e(C.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>', C.ns, t.field, s, t.valuePrimitive)).appendTo(i).attr(n) } }, resources: c }, desktop: { dateRange: function (t, i) { var r = { name: i.field, title: i.title }, s = i.model.isAllDay, a = C.attr("validate") + "='" + !s + "' ", l = C.attr("validate") + "='" + s + "' "; n(r, i), o(r, i), e('<input type="text" required ' + C.attr("type") + '="date" ' + C.attr("role") + '="datetimepicker" ' + C.attr("bind") + '="value:' + i.field + ',invisible:isAllDay" ' + a + "/>").attr(r).appendTo(t), e('<input type="text" required ' + C.attr("type") + '="date" ' + C.attr("role") + '="datepicker" ' + C.attr("bind") + '="value:' + i.field + ',visible:isAllDay" ' + l + "/>").attr(r).appendTo(t), e("<span " + C.attr("bind") + '="text: ' + i.field + 'Timezone"></span>').appendTo(t), "end" === i.field && e("<span " + C.attr("bind") + '="text: startTimezone, invisible: endTimezone"></span>').appendTo(t), e("<span " + C.attr("for") + '="' + i.field + '" class="k-invalid-msg"/>').hide().appendTo(t) }, timezonePopUp: function (t, i) { e('<a href="#" class="k-button" data-bind="invisible:isAllDay">' + i.messages.timezoneEditorButton + "</a>").click(i.click).appendTo(t) }, timezone: function (i, n) { var o = n.visible || n.visible === t; e("<div " + C.attr("bind") + '="value:' + n.field + '" />').attr({ name: n.field }).toggle(o).appendTo(i).kendoTimezoneEditor({ optionLabel: n.noTimezone, title: n.title }) }, recurrence: function (t, i) { e("<div " + C.attr("bind") + '="value:' + i.field + '" />').attr({ name: i.field }).appendTo(t).kendoRecurrenceEditor({ start: i.model.start, timezone: i.timezone, messages: i.messages }) }, description: d, multipleResources: function (t, i) { var n = l(i, t.field); return function (i) { e(C.format('<select data-{0}bind="value:{1}">', C.ns, t.field)).appendTo(i).attr(n).kendoMultiSelect({ dataTextField: t.dataTextField, dataValueField: t.dataValueField, dataSource: t.dataSource, valuePrimitive: t.valuePrimitive, itemTemplate: C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#', t.dataColorField, t.dataTextField), tagTemplate: C.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#', t.dataColorField, t.dataTextField) }) } }, resources: c } }, p = C.Observable.extend({ init: function (e, t) { C.Observable.fn.init.call(this), this.element = e, this.options = O(!0, {}, this.options, t), this.createButton = this.options.createButton, this.toggleDateValidationHandler = V(this._toggleDateValidation, this) }, _toggleDateValidation: function (t) { if ("isAllDay" == t.field) { var i, n, o, r = this.container, s = this.editable.options.model.isAllDay, a = C.attr("bind"); r.find("[" + a + "*=end],[" + a + "*=start]").each(function () { i = e(this), X.test(i.attr(a)) && (n = i.is("[" + C.attr("role") + "=datetimepicker],[type*=datetime]"), o = s !== n, i.attr(C.attr("validate"), o)) }) } }, fields: function (e, t) { var i, n, o = this, r = o.options.messages, s = o.options.timezone, a = [{ field: "title", title: r.editor.title }, { field: "start", title: r.editor.start, editor: e.dateRange, timezone: s }, { field: "end", title: r.editor.end, editor: e.dateRange, timezone: s }, { field: "isAllDay", title: r.editor.allDayEvent }]; C.timezone.windows_zones && (a.push({ field: "timezone", title: r.editor.timezone, editor: e.timezonePopUp, click: function (e) { e.preventDefault(), o._initTimezoneEditor(t, this) }, messages: r.editor, model: t }), a.push({ field: "startTimezone", title: r.editor.startTimezone, editor: e.timezone, noTimezone: r.editor.noTimezone }), a.push({ field: "endTimezone", title: r.editor.endTimezone, editor: e.timezone, noTimezone: r.editor.noTimezone })), t.recurrenceId || a.push({ field: "recurrenceRule", title: r.editor.repeat, editor: e.recurrence, timezone: s, messages: r.recurrenceEditor, pane: this.pane }), "description" in t && a.push({ field: "description", title: r.editor.description, editor: e.description({ model: t, field: "description" }) }); for (i = 0; i < this.options.resources.length; i++)n = this.options.resources[i], a.push({ field: n.field, title: n.title, editor: n.multiple ? e.multipleResources(n, t) : e.resources(n, t) }); return a }, end: function () { return this.editable.end() }, _buildEditTemplate: function (e, t, i) { var n, o, r, s, a = this.options.messages, l = O({}, C.Template, this.options.templateSettings), c = l.paramName, d = this.options.editable.template, u = ""; if (d) typeof d === P && (d = window.unescape(d)), u += C.template(d, l)(e); else for (n = 0, o = t.length; n < o; n++)"startTimezone" === (r = t[n]).field && (u += '<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">', u += '<div class="k-edit-form-container">', u += '<div class="k-edit-label"></div>', u += '<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />' + a.editor.separateTimezones + "</label></div>"), u += '<div class="k-edit-label"><label for="' + r.field + '">' + (r.title || r.field || "") + "</label></div>", !e.editable || e.editable(r.field) ? (i.push(r), u += "<div " + C.attr("container-for") + '="' + r.field + '" class="k-edit-field"></div>') : (s = "#:", r.field ? (r = C.expr(r.field, c), s += r + "==null?'':" + r) : s += "''", s += "#", s = C.template(s, l), u += '<div class="k-edit-field">' + s(e) + "</div>"), "endTimezone" === r.field && (u += this._createEndTimezoneButton()); return u }, _createEndTimezoneButton: function () { return "</div></div>" }, _revertTimezones: function (e) { e.set("startTimezone", this._startTimezone), e.set("endTimezone", this._endTimezone), delete this._startTimezone, delete this._endTimezone } }), m = p.extend({ init: function () { p.fn.init.apply(this, arguments), this.pane = C.mobile.ui.Pane.wrap(this.element), this.pane.element.parent().css("height", this.options.height), this.view = this.pane.view(), this._actionSheetButtonTemplate = C.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'), this._actionSheetPopupOptions = e(document.documentElement).hasClass("km-root") ? { modal: !1 } : { align: "bottom center", position: "bottom center", effect: "slideIn:up" } }, options: { animations: { left: "slide", right: "slide:right" } }, destroy: function () { this.close(), this.unbind(), this.pane.destroy() }, _initTimezoneEditor: function (t) { var n, o = this, r = o.pane, s = o.options.messages, a = o.timezoneView, l = o.container.find(".k-scheduler-timezones"), c = l.find(".k-timezone-toggle"), d = l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")), u = function (e) { if ("startTimezone" === e.field) { var i = t.startTimezone; c.prop("disabled", !i), i || (d.hide(), t.set("endTimezone", ""), c.prop("checked", !1)) } }; o._startTimezone = t.startTimezone || "", o._endTimezone = t.endTimezone || "", a || (n = '<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">' + s.cancel + "</a>" + s.editor.timezoneTitle + '<a href="#" class="k-button k-scheduler-update">' + s.save + "</a></div></div>", this.timezoneView = a = r.append(n), a.contentElement().append(l.show()), a.element.on(j + q, ".k-scheduler-cancel, .k-scheduler-update", function (n) { var a, l; n.preventDefault(), n.stopPropagation(), e(this).hasClass("k-scheduler-cancel") && o._revertTimezones(t), t.unbind("change", u), a = r.element.find("#edit").data("kendoMobileView"), l = i(t, s.editor.noTimezone), a.contentElement().find(".k-timezone-button").text(l), r.navigate(a, o.options.animations.right) }), c.click(function () { d.toggle(c.prop("checked")), t.set("endTimezone", "") }), t.bind("change", u)), c.prop("checked", t.endTimezone).prop("disabled", !t.startTimezone), t.endTimezone ? d.show() : d.hide(), r.navigate(a, o.options.animations.left) }, _createActionSheetButton: function (e) { return e.template = this._actionSheetButtonTemplate, this.createButton(e) }, showDialog: function (t) { var i, n, o = "", r = '<ul><li class="km-actionsheet-title">' + t.title + "</li>", s = this.element.find(".k-event[" + C.attr("uid") + "='" + t.model.uid + "']"); for (this.container && ((s = this.container.find(".k-scheduler-delete"))[0] && (o = "phone")), i = 0; i < t.buttons.length; i++)r += this._createActionSheetButton(t.buttons[i]); (n = e(r += "</ul>").appendTo(this.pane.view().element).kendoMobileActionSheet({ type: o, cancel: this.options.messages.cancel, cancelTemplate: '<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>', close: function () { this.destroy() }, command: function (i) { var o = n.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(i.currentTarget)); o > -1 && (n.close(), t.buttons[o].click()) }, popup: this._actionSheetPopupOptions }).data("kendoMobileActionSheet")).open(s) }, editEvent: function (t) { var i, n, o, r, s, a = this.pane, l = "", c = this.options.messages, d = c.save, u = c.destroy, h = c.cancel, p = c.editor.editorTitle; return l += '<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" ' + C.attr("uid") + '="' + t.uid + '"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">' + h + "</a>" + p + '<a href="#" class="k-button k-scheduler-update">' + d + "</a></div>", i = this.fields(f.mobile, t), n = this, o = [], l += this._buildEditTemplate(t, i, o), !t.isNew() && this.options.editable && !1 !== this.options.editable.destroy && (l += '<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">' + u + "</a></div>"), l += "</div>", r = a.append(l), s = this.container = r.element, this.editable = s.kendoEditable({ fields: o, model: t, clearContainer: !1, target: n.options.target, validateOnBlur: !0 }).data("kendoEditable"), s.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function () { e(this).next().children("input").click() }), this.trigger("edit", { container: s, model: t }) ? this.trigger("cancel", { container: s, model: t }) : (s.on(j + q, "a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete", function (i) { var o, r; i.preventDefault(), i.stopPropagation(), (o = e(this)).hasClass("k-scheduler-edit") ? a.navigate("#edit", n.options.animations.right) : (r = "cancel", o.hasClass("k-scheduler-update") ? r = "save" : o.hasClass("k-scheduler-delete") && (r = "remove"), n.trigger(r, { container: s, model: t })) }), a.navigate(r, n.options.animations.left), t.bind("change", n.toggleDateValidationHandler)), this.editable }, _views: function () { return this.pane.element.find(C.roleSelector("view")).not(this.view.element) }, close: function () { var e, t, i, n; if (this.container) { for (this.pane.navigate("", this.options.animations.right), e = this._views(), i = 0, n = e.length; i < n; i++)(t = e.eq(i).data("kendoMobileView")) && t.purge(); e.remove(), this.container = null, this.editable && (this.editable.options.model.unbind("change", this.toggleDateValidationHandler), this.editable.destroy(), this.editable = null), this.timezoneView = null } } }), g = p.extend({ destroy: function () { this.close(), this.unbind() }, editEvent: function (t) { var i, n, o, r = this, s = r.options.editable, a = "<div " + C.attr("uid") + '="' + t.uid + '" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">', l = r.options.messages, c = l.save, d = l.cancel, u = l.destroy, h = this.fields(f.desktop, t), p = []; return a += this._buildEditTemplate(t, h, p), n = N(s) ? s.window : {}, a += '<div class="k-edit-buttons k-state-default">', a += this.createButton({ name: "update", text: c, attr: i }) + this.createButton({ name: "canceledit", text: d, attr: i }), t.isNew() || !1 === s.destroy || (a += this.createButton({ name: "delete", text: u, attr: i })), a += "</div></div></div>", o = this.container = e(a).appendTo(r.element).eq(0).kendoWindow(O({ modal: !0, resizable: !1, draggable: !0, title: l.editor.editorTitle, visible: !1, close: function (e) { e.userTriggered && r.trigger($, { container: o, model: t }) && e.preventDefault() } }, n)), r.editable = o.kendoEditable({ fields: p, model: t, clearContainer: !1, validateOnBlur: !0, target: r.options.target }).data("kendoEditable"), r.trigger(Q, { container: o, model: t }) ? r.trigger($, { container: o, model: t }) : (o.data("kendoWindow").center().open(), o.on(j + q, "a.k-scheduler-cancel", function (e) { e.preventDefault(), e.stopPropagation(), r.trigger($, { container: o, model: t }) }), o.on(j + q, "a.k-scheduler-update", function (e) { e.preventDefault(), e.stopPropagation(), r.trigger("save", { container: o, model: t }) }), o.on(j + q, "a.k-scheduler-delete", function (e) { e.preventDefault(), e.stopPropagation(), r.trigger(Y, { container: o, model: t }) }), C.cycleForm(o), t.bind("change", r.toggleDateValidationHandler)), r.editable }, close: function () { var e = this, t = function () { e.editable && (e.editable.options.model.unbind("change", e.toggleDateValidationHandler), e.editable.destroy(), e.editable = null, e.container = null), e.popup && (e.popup.destroy(), e.popup = null) }; e.editable ? (e._timezonePopup && e._timezonePopup.data("kendoWindow") && (e._timezonePopup.data("kendoWindow").destroy(), e._timezonePopup = null), e.container.is(":visible") ? e.container.data("kendoWindow").bind("deactivate", t).close() : t()) : t() }, _createEndTimezoneButton: function () { var e = this.options.messages, t = ""; return t += '<div class="k-edit-buttons k-state-default">', t += this.createButton({ name: "savetimezone", text: e.save }) + this.createButton({ name: "canceltimezone", text: e.cancel }), t += "</div></div></div>" }, showDialog: function (t) { var i, n, o, r = C.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>", t.text); for (r += '<div class="k-edit-buttons k-state-default">', i = 0; i < t.buttons.length; i++)r += this.createButton(t.buttons[i]); r += "</div></div></div>", n = this.element, this.popup && this.popup.destroy(), (o = this.popup = e(r).appendTo(n).eq(0).on("click", ".k-button", function (i) { i.preventDefault(), o.close(); var n = e(i.currentTarget).index(); t.buttons[n].click() }).kendoWindow({ modal: !0, resizable: !1, draggable: !1, title: t.title, visible: !1, close: function () { this.destroy(), n.focus() } }).getKendoWindow()).center().open() }, _initTimezoneEditor: function (e, t) { var i, n = this, o = n.container.find(".k-scheduler-timezones"), r = o.find(".k-timezone-toggle"), s = o.find(".k-edit-label:last").add(o.find(".k-edit-field:last")), a = o.find(".k-scheduler-savetimezone"), l = o.find(".k-scheduler-canceltimezone"), c = n._timezonePopup, d = function (t) { if ("startTimezone" === t.field) { var i = e.startTimezone; r.prop("disabled", !i), i || (s.hide(), e.set("endTimezone", ""), r.prop("checked", !1)) } }; n._startTimezone = e.startTimezone, n._endTimezone = e.endTimezone, c || (n._timezonePopup = c = o.kendoWindow({ modal: !0, resizable: !1, draggable: !0, title: n.options.messages.editor.timezoneEditorTitle, visible: !1, close: function (i) { e.unbind("change", d), i.userTriggered && n._revertTimezones(e), t && t.focus() } }), r.click(function () { s.toggle(r.prop("checked")), e.set("endTimezone", "") }), a.click(function (e) { e.preventDefault(), i.close() }), l.click(function (t) { t.preventDefault(), n._revertTimezones(e), i.close() }), e.bind("change", d)), r.prop("checked", e.endTimezone).prop("disabled", !e.startTimezone), e.endTimezone ? s.show() : s.hide(), (i = c.data("kendoWindow")).center().open() } }), v = z.extend({ init: function (t, i) { var n = this; F.fn.init.call(n, t, i), n.options.views && n.options.views.length || (n.options.views = ["day", "week"]), n.resources = [], n._initModel(), n._wrapper(), n._views(), n._toolbar(), n._dataSource(), n._resources(), n._resizeHandler = function () { n.resize() }, n.wrapper.on("mousedown" + q + " selectstart" + q, function (t) { e(t.target).is(":kendoFocusable") || t.preventDefault() }), n.options.editable && !1 !== n.options.editable.resize && n._resizable(), n._movable(), n._bindResize(), n.options.messages && n.options.messages.recurrence && (I.options = n.options.messages.recurrence), n._selectable(), n._ariaId = C.guid(), n._createEditor() }, _bindResize: function () { e(window).on("resize" + q, this._resizeHandler) }, _unbindResize: function () { e(window).off("resize" + q, this._resizeHandler) }, dataItems: function () { var i, n, o, r, s, a = this.items(), l = this._data, c = e.map(a, function (t) { return e(t).attr("data-uid") }), d = {}, u = c.length; for (i = 0; i < u; i++)d[c[i]] = null; for (o = l.length, i = 0; i < o; i++)r = l[i], d[r.uid] !== t && (d[r.uid] = r); for (n in s = [], d) s.push(d[n]); return s }, _isMobile: function () { var e = this.options; return !0 === e.mobile && C.support.mobileOS || "phone" === e.mobile || "tablet" === e.mobile }, _isMobilePhoneView: function () { var e = this.options; return !0 === e.mobile && C.support.mobileOS && !C.support.mobileOS.tablet || "phone" === e.mobile }, _groupsByResource: function (e, t, i, n, o) { var r, s, a, l, c, d, u; if (i || (i = []), r = e[0]) { for (a = r.dataSource.view(), l = 0, c = 0; c < a.length; c++)d = C.getter(r.dataValueField)(a[c]), u = t + l + c, (s = this._groupsByResource(e.slice(1), u, i, d, r.field))[r.field] = d, l = s.groupIndex, o && n && (s[o] = n), 1 === e.length && (s.groupIndex = t + c, i.push(s)); return s } return {} }, data: function () { return this._data }, select: function (i) { var n, o, r, s, a, l, c, d, u, h, f = this, p = f.view(), m = f._selection, g = p.groups; if (i === t) return r = p._selectedSlots, m ? (m && m.events && (o = f._selectedEvents()), { start: m.start, end: m.end, events: o, slots: r, resources: p._resourceBySlot(m) }) : []; if (!i) return f._selection = null, f._old = null, p.clearSelection(), t; if (e.isArray(i) && (i = { events: i.splice(0) }), i.resources) { for (s in a = [], l = [], p.groupedResources && f._groupsByResource(p.groupedResources, 0, l), i.resources) a.push({ field: s, operator: "eq", value: i.resources[s] }); n = new C.data.Query(l).filter(a).toArray() } return i.events && i.events.length ? (f._selectEvents(i.events, n), f._select(), t) : (g && i.start && i.end && (c = A(p._startDate), d = C.date.addDays(A(p._endDate), 1), i.start < d && c <= i.end && (u = n && n.length ? g[n[0].groupIndex] : g[0], (h = u.ranges(i.start, i.end, i.isAllDay, !1)).length && (f._selection = { start: C.timezone.toLocalDate(h[0].start.start), end: C.timezone.toLocalDate(h[h.length - 1].end.end), groupIndex: h[0].start.groupIndex, index: h[0].start.index, isAllDay: h[0].start.isDaySlot, events: [] }, f._select()))), t) }, _selectEvents: function (e, t) { var i, n, o, r, s, a, l, c, d = this, u = d.view(), h = u.groups, f = e.length, p = t && t.length; for (i = 0; i < f; i++)if (h && p) { for (n = h[t[0].groupIndex], o = [], r = n.timeSlotCollectionCount(), s = n.daySlotCollectionCount(), a = 0; a < r; a++)o = o.concat(n.getTimeSlotCollection(a).events()); for (l = 0; l < s; l++)o = o.concat(n.getDaySlotCollection(l).events()); (o = new C.data.Query(o).filter({ field: "element[0].getAttribute('data-uid')", operator: "eq", value: e[i] }).toArray())[0] && d._createSelection(o[0].element) } else (c = u.element.find(C.format(".k-event[data-uid={0}], .k-task[data-uid={0}]", e[i]))).length && d._createSelection(c[0]) }, _selectable: function () { var t, i = this, n = i.wrapper, o = C.support.mobileOS ? "touchend" : "mousedown"; i.options.selectable && (i._tabindex(), n.on(o + q, ".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event", function (e) { var t = e.which, o = e.button, r = C.support.browser, s = t && 3 === t || o && 2 == o; C.support.mobileOS && e.isDefaultPrevented() || (s || i._createSelection(e.currentTarget), n.focus(), r.msie && r.version < 9 && setTimeout(function () { n.focus() })) }), t = e.proxy(i._mouseMove, i), n.on("mousedown" + q, ".k-scheduler-header-all-day td, .k-scheduler-content td", function (e) { var i = e.which, o = e.button, r = i && 3 === i || o && 2 == o; r || n.on("mousemove" + q, ".k-scheduler-header-all-day td, .k-scheduler-content td", t) }), n.on("mouseup" + q + " mouseleave" + q, function () { n.off("mousemove" + q, ".k-scheduler-header-all-day td, .k-scheduler-content td", t) }), n.on("focus" + q, function () { i._selection || i._selectFirstSlot(), i._select() }), n.on("focusout" + q, function () { i._ctrlKey = i._shiftKey = !1 }), n.on("keydown" + q, V(i._keydown, i)), n.on("keyup" + q, function (e) { i._ctrlKey = e.ctrlKey, i._shiftKey = e.shiftKey })) }, _selectFirstSlot: function () { this._createSelection(this.wrapper.find(".k-scheduler-content").find("td:first")) }, _select: function () { var t, i, n, o, r, s = this, a = s.view(), l = s.wrapper, c = a.current(), d = s._selection; if (d && (c && (c.removeAttribute("id"), c.removeAttribute("aria-label"), l.removeAttr("aria-activedescendant")), a.select(d), (c = a.current()) && s._old !== c)) { if (t = e(c).data("uid"), s._old && t && t === e(s._old).data("uid")) return; n = d, o = s._selectedEvents(), r = a._selectedSlots, o[0] ? (n = o[0] || d, i = C.format(s.options.messages.ariaEventLabel, n.title, n.start, n.start)) : i = C.format(s.options.messages.ariaSlotLabel, n.start, n.end), c.setAttribute("id", s._ariaId), c.setAttribute("aria-label", i), l.attr("aria-activedescendant", s._ariaId), s._old = c, s.trigger("change", { start: d.start, end: d.end, events: o, slots: r, resources: a._resourceBySlot(d) }) } }, _selectedEvents: function () { for (var e, t = this._selection.events, i = t.length, n = 0, o = []; n < i; n++)(e = this.occurrenceByUid(t[n])) && o.push(e); return o }, _mouseMove: function (t) { var i = this; clearTimeout(i._moveTimer), i._moveTimer = setTimeout(function () { var n, o, r, s = i.view(), a = i._selection; a && ((n = s.selectionByElement(e(t.currentTarget))) && a.groupIndex === n.groupIndex && (o = n.startDate(), r = n.endDate(), o >= a.end ? a.backward = !1 : r <= a.start && (a.backward = !0), a.backward ? a.start = o : a.end = r, i._select())) }, 5) }, _viewByIndex: function (e) { var t, i = this.views; for (t in i) { if (!e) return t; e-- } }, _keydown: function (i) { var n = this, o = i.keyCode, r = n.view(), s = r.options.editable, a = n._selection, l = i.shiftKey; return n._ctrlKey = i.ctrlKey, n._shiftKey = i.shiftKey, a ? (o === M.TAB ? r.moveToEvent(a, l) && (n._select(), i.preventDefault()) : s && o === M.ENTER ? a.events.length ? !1 !== s.update && n.editEvent(a.events[0]) : !1 !== s.create && (a.isAllDay && (a = e.extend({}, a, { end: C.date.addDays(a.end, -1) })), n.addEvent(O({}, a, r._resourceBySlot(a)))) : o === M.DELETE && !1 !== s && !1 !== s.destroy ? n.removeEvent(a.events[0]) : o >= 49 && o <= 57 ? n.view(n._viewByIndex(o - 49)) : r.move(a, o, l) && (r.inRange(a) ? n._select() : n.date(a.start), i.preventDefault()), n._adjustSelectedDate(), t) : (n._selectFirstSlot(), n._select(), t) }, _createSelection: function (t) { var i, n, o; this._selection && (this._ctrlKey || this._shiftKey) || (this._selection = { events: [], groupIndex: 0 }), t = e(t), o = this._selection, t.is(".k-event") && (i = t.attr(C.attr("uid"))), (n = this.view().selectionByElement(t)) && (o.groupIndex = n.groupIndex || 0), i && (n = s(this._data, i)), n && n.uid && (i = [n.uid]), this._updateSelection(n, i), this._adjustSelectedDate() }, _updateSelection: function (e, i, n) { var o, r, s = this._selection; e && s && (o = this.view(), e.uid && (e = o._updateEventForSelection(e)), this._shiftKey && s.start && s.end ? (r = e.end < s.end, s.end = e.endDate ? e.endDate() : e.end, r && o._timeSlotInterval && C.date.setTime(s.end, -o._timeSlotInterval())) : (s.start = e.startDate ? e.startDate() : e.start, s.end = e.endDate ? e.endDate() : e.end), s.isAllDay = "isDaySlot" in e ? e.isDaySlot : e.isAllDay, null !== n && n !== t && (s.groupIndex = n), s.index = e.index, s.events = this._ctrlKey ? s.events.concat(i || []) : i || []) }, options: { name: "Scheduler", date: Z, editable: !0, autoBind: !0, snap: !0, mobile: !1, timezone: "", allDaySlot: !0, min: new Date(1900, 0, 1), max: new Date(2099, 11, 31), toolbar: null, footer: {}, messages: { today: "Today", pdf: "Export to PDF", save: "Save", cancel: "Cancel", destroy: "Delete", deleteWindowTitle: "Delete event", next: "Next", previous: "Previous", ariaSlotLabel: "Selected from {0:t} to {1:t}", ariaEventLabel: "{0} on {1:D} at {2:t}", views: { day: "Day", week: "Week", workWeek: "Work Week", agenda: "Agenda", month: "Month", timeline: "Timeline", timelineWeek: "Timeline Week", timelineWorkWeek: "Timeline Work Week", timelineMonth: "Timeline Month" }, recurrenceMessages: { deleteWindowTitle: "Delete Recurring Item", deleteWindowOccurrence: "Delete current occurrence", deleteWindowSeries: "Delete the series", editWindowTitle: "Edit Recurring Item", editWindowOccurrence: "Edit current occurrence", editWindowSeries: "Edit the series" }, editable: { confirmation: "Are you sure you want to delete this event?" }, editor: { title: "Title", start: "Start", end: "End", allDayEvent: "All day event", description: "Description", repeat: "Repeat", timezone: "Timezone", startTimezone: "Start timezone", endTimezone: "End timezone", separateTimezones: "Use separate start and end time zones", timezoneEditorTitle: "Timezones", timezoneEditorButton: "Time zone", timezoneTitle: "Time zones", noTimezone: "No timezone", editorTitle: "Event" } }, height: null, width: null, resources: [], group: { resources: [], orientation: "horizontal" }, views: [], selectable: !1 }, events: [Y, Q, $, K, "add", "dataBinding", "dataBound", "moveStart", "move", "moveEnd", "resizeStart", "resize", "resizeEnd", "navigate", "change"], destroy: function () { var t = this; F.fn.destroy.call(t), t.dataSource && (t.dataSource.unbind(G, t._refreshHandler), t.dataSource.unbind("progress", t._progressHandler), t.dataSource.unbind("error", t._errorHandler)), t.calendar && (t.calendar.destroy(), t.popup.destroy()), t.view() && t.view().destroy(), t._editor && t._editor.destroy(), this._moveDraggable && this._moveDraggable.destroy(), this._resizeDraggable && this._resizeDraggable.destroy(), t.element.add(t.wrapper).add(t.toolbar).add(t.popup).off(q), clearTimeout(t._moveTimer), t._model = null, t.toolbar = null, t.element = null, e(window).off("resize" + q, t._resizeHandler), C.destroy(t.wrapper) }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.options.autoBind && e.fetch() }, items: function () { var e = this.wrapper.find(".k-scheduler-content"), t = this.view(); return t && "agenda" === t.options.name ? e.find(".k-task") : e.find(".k-event").add(this.wrapper.find(".k-scheduler-header-wrap").find(".k-scheduler-header-all-day").siblings()) }, _movable: function () { var i, n, o, r, s, a, l, c = this, d = 0, h = c._isMobile(), f = c.options.editable && !1 !== c.options.editable.move, p = c.options.editable && !1 !== c.options.editable.resize; (f || p && h) && (h && C.support.mobileOS.android && (d = 5), c._moveDraggable = new C.ui.Draggable(c.element, { distance: d, filter: ".k-event", ignore: ".k-resize-handle", holdToDrag: h, autoScroll: !0 }), f && c._moveDraggable.bind("dragstart", function (e) { var r = c.view(), d = e.currentTarget; return r.options.editable && !1 !== r.options.editable.move ? h && !d.hasClass("k-event-active") ? (c.element.find(".k-event-active").removeClass("k-event-active"), e.preventDefault(), t) : (s = c.occurrenceByUid(d.attr(C.attr("uid"))), (a = s.clone()).update(r._eventOptionsForMove(a)), i = r._slotByPosition(e.x.startLocation, e.y.startLocation), o = i.startOffset(e.x.startLocation, e.y.startLocation, c.options.snap), n = i, l = i, i && !c.trigger("moveStart", { event: s }) || e.preventDefault(), t) : (e.preventDefault(), t) }).bind("drag", function (e) { var t, l, d = c.view(), h = d._slotByPosition(e.x.location, e.y.location); h && (r = h.startOffset(e.x.location, e.y.location, c.options.snap), h.isDaySlot !== i.isDaySlot ? (i = d._slotByPosition(e.x.location, e.y.location), o = i.startOffset(e.x.location, e.y.location, c.options.snap), t = r - o, a.isAllDay = h.isDaySlot, a.start = C.timezone.toLocalDate(o), a.end = C.timezone.toLocalDate(r), d._updateMoveHint(a, h.groupIndex, t), l = { start: a.start, end: a.end }) : (t = r - o, d._updateMoveHint(a, h.groupIndex, t), l = u(a, t)), c.trigger("move", { event: s, slot: { element: h.element, start: h.startDate(), end: h.endDate(), isDaySlot: h.isDaySlot }, resources: d._resourceBySlot(h), start: l.start, end: l.end }) ? d._updateMoveHint(a, h.groupIndex, t) : n = h) }).bind("dragend", function (t) { var d, h, f, p, m, g, v; c.view()._removeMoveHint(), d = u(a, r - o), h = d.start, f = d.end, p = c.view()._resourceBySlot(n), m = c.view()._resourceBySlot(i), c.trigger("moveEnd", { event: s, slot: { element: n.element, start: n.startDate(), end: n.endDate() }, start: h, end: f, resources: p }) || s.start.getTime() === h.getTime() && s.end.getTime() === f.getTime() && l.isDaySlot === n.isDaySlot && C.stringify(p) === C.stringify(m) || (g = c.view()._eventOptionsForMove(s), v = l.isDaySlot !== n.isDaySlot ? n.isDaySlot ? e.extend({ start: n.startDate(), end: n.startDate(), isAllDay: n.isDaySlot }, g, p) : e.extend({ isAllDay: n.isDaySlot, start: h, end: f }, g, p) : e.extend({ isAllDay: s.isAllDay, start: h, end: f }, g, p), c._updateEvent(null, s, v, n.groupIndex)), t.currentTarget.removeClass("k-event-active"), this.cancelHold() }).bind("dragcancel", function () { c.view()._removeMoveHint(), this.cancelHold() }), h && (c._moveDraggable.bind("hold", function (e) { c.element.find(".k-scheduler-monthview").length && e.preventDefault(), c.element.find(".k-event-active").removeClass("k-event-active"), e.currentTarget.addClass("k-event-active") }), C.support.mobileOS.android || c._moveDraggable.userEvents.bind("press", function (e) { e.preventDefault() }))) }, _resizable: function () { function t(e) { var t, i = { "k-resize-e": "east", "k-resize-w": "west", "k-resize-n": "north", "k-resize-s": "south" }; for (t in i) if (e.hasClass(t)) return i[t] } var i, n, o, r, s, a = this, l = 0; a._isMobile() && C.support.mobileOS.android && (l = 5), a._resizeDraggable = new C.ui.Draggable(a.element, { distance: l, filter: ".k-resize-handle", autoScroll: !0, dragstart: function (t) { var l = e(t.currentTarget), c = l.closest(".k-event"), d = c.attr(C.attr("uid")), u = a.view(); o = a.occurrenceByUid(d), r = o.clone(), u._updateEventForResize(r), s = u._slotByPosition(t.x.startLocation, t.y.startLocation), a.trigger("resizeStart", { event: o }) && t.preventDefault(), i = C.date.toUtcTime(r.start), n = C.date.toUtcTime(r.end) }, drag: function (l) { var c, d, u, h, f, p; s && (c = e(l.currentTarget), d = t(c), u = a.view(), (h = u._slotByPosition(l.x.location, l.y.location)) && s.groupIndex == h.groupIndex && (s = h, f = i, p = n, "south" == d ? !s.isDaySlot && s.end - C.date.toUtcTime(r.start) >= u._timeSlotInterval() && (n = r.isAllDay ? s.startOffset(l.x.location, l.y.location, a.options.snap) : s.endOffset(l.x.location, l.y.location, a.options.snap)) : "north" == d ? !s.isDaySlot && C.date.toUtcTime(r.end) - s.start >= u._timeSlotInterval() && (i = s.startOffset(l.x.location, l.y.location, a.options.snap)) : "east" == d ? s.isDaySlot && C.date.toUtcTime(C.date.getDate(s.endDate())) >= C.date.toUtcTime(C.date.getDate(r.start)) ? n = r.isAllDay ? s.startOffset(l.x.location, l.y.location, a.options.snap) : s.endOffset(l.x.location, l.y.location, a.options.snap) : !s.isDaySlot && s.end - C.date.toUtcTime(r.start) >= u._timeSlotInterval() && (n = s.endOffset(l.x.location, l.y.location, a.options.snap)) : "west" == d && (s.isDaySlot && C.date.toUtcTime(C.date.getDate(r.end)) >= C.date.toUtcTime(C.date.getDate(s.startDate())) ? i = s.startOffset(l.x.location, l.y.location, a.options.snap) : !s.isDaySlot && C.date.toUtcTime(r.end) - s.start >= u._timeSlotInterval() && (i = s.startOffset(l.x.location, l.y.location, a.options.snap))), a.trigger("resize", { event: o, slot: { element: s.element, start: s.startDate(), end: s.endDate() }, start: C.timezone.toLocalDate(i), end: C.timezone.toLocalDate(n), resources: u._resourceBySlot(s) }) ? (i = f, n = p) : u._updateResizeHint(r, s.groupIndex, i, n))) }, dragend: function (l) { var c = e(l.currentTarget), d = new Date(r.start.getTime()), u = new Date(r.end.getTime()), h = t(c); a.view()._removeResizeHint(), "south" == h ? u = C.timezone.toLocalDate(n) : "north" == h ? d = C.timezone.toLocalDate(i) : "east" == h ? u = s.isDaySlot ? C.date.getDate(C.timezone.toLocalDate(n)) : C.timezone.toLocalDate(n) : "west" == h && (s.isDaySlot ? ((d = new Date(C.timezone.toLocalDate(i))).setHours(0), d.setMinutes(0)) : d = C.timezone.toLocalDate(i)), !a.trigger("resizeEnd", { event: o, slot: { element: s.element, start: s.startDate(), end: s.endDate() }, start: d, end: u, resources: a.view()._resourceBySlot(s) }) && u.getTime() >= d.getTime() && (r.start.getTime() == d.getTime() && r.end.getTime() == u.getTime() || (a.view()._updateEventForResize(o), a._updateEvent(h, o, { start: d, end: u }))), s = null, o = null }, dragcancel: function () { a.view()._removeResizeHint(), s = null, o = null } }) }, _updateEvent: function (e, t, i, n) { var o, r = this, s = function (e, t) { try { r._preventRefresh = !0, e.update(i), r._convertDates(e) } finally { r._preventRefresh = !1 } r.trigger(K, { event: e }) || (t && t(), r._updateSelection(e, [e.uid], n), r.dataSource.sync()) }, a = function (e) { return e.recurrenceRule ? r.dataSource.getByUid(e.uid) : r.dataSource.get(e.recurrenceId) }; t.recurrenceRule || t.isOccurrence() ? (o = r.options.messages.recurrenceMessages, r._showRecurringDialog(t, function () { var e = a(t), i = e.toOccurrence({ start: t.start, end: t.end }); s(r.dataSource.add(i), function () { r._convertDates(e) }) }, function () { var n, o, l = a(t); "south" != e && "north" != e || (i.start && (n = C.date.getDate(l.start), C.date.setTime(n, E(i.start)), i.start = n), i.end && (o = C.date.getDate(l.end), C.date.setTime(o, E(i.end)), i.end = o)), r.dataSource._removeExceptions(l), s(l) }, { title: o.editWindowTitle, text: o.editRecurring ? o.editRecurring : te, occurrenceText: o.editWindowOccurrence, seriesText: o.editWindowSeries })) : s(r.dataSource.getByUid(t.uid)) }, _modelForContainer: function (t) { return t = e(t).closest("[" + C.attr("uid") + "]"), this.dataSource.getByUid(t.attr(C.attr("uid"))) }, showDialog: function (e) { this._editor.showDialog(e) }, focus: function () { this.wrapper.focus() }, _confirmation: function (e, t) { var i, n, o, r, s, a = this.options.editable; !0 === a || !1 !== a.confirmation ? (i = this.options.messages, n = i.deleteWindowTitle, o = typeof a.confirmation === P ? a.confirmation : i.editable.confirmation, this._isEditorOpened() && t.isRecurring() && (r = this.options.messages.recurrenceMessages, n = r.deleteWindowTitle, o = t.isException() ? r.deleteRecurringConfirmation ? r.deleteRecurringConfirmation : "Are you sure you want to delete this event occurrence?" : r.deleteSeriesConfirmation ? r.deleteSeriesConfirmation : "Are you sure you want to delete the whole series?"), s = [{ name: "destroy", text: i.destroy, click: function () { e() } }], this._isMobile() && C.mobile.ui.Pane || s.push({ name: "canceledit", text: i.cancel, click: function () { e(!0) } }), this._unbindResize(), this.showDialog({ model: t, text: o, title: n, buttons: s }), this._bindResize()) : e() }, addEvent: function (e) { var t, i = this._editor.editable, n = this.dataSource; e = e || {}, !this.trigger("add", { event: e }) && (i && i.end() || !i) && (this.cancelEvent(), e && e.toJSON && (e = e.toJSON()), (t = n.add(e)) && (this.cancelEvent(), this._editEvent(t))) }, saveEvent: function () { var e, t, i, n = this._editor; n && (e = n.editable, t = n.container, i = this._modelForContainer(t), t && e && e.end() && !this.trigger(K, { container: t, event: i }) && (i.isRecurrenceHead() && this.dataSource._removeExceptions(i), i.dirty || i.isOccurrence() || this._convertDates(i, "remove"), this.dataSource.sync())) }, cancelEvent: function () { var e, t = this._editor, i = t.container; i && ((e = this._modelForContainer(i)) && e.isOccurrence() && (this._convertDates(e, "remove"), this._convertDates(this.dataSource.get(e.recurrenceId), "remove")), this.dataSource.cancelChanges(e), t.close()) }, editEvent: function (e) { var t = "string" == typeof e ? this.occurrenceByUid(e) : e; t && (this.cancelEvent(), t.isRecurring() ? this._editRecurringDialog(t) : this._editEvent(t)) }, _editEvent: function (e) { this._unbindResize(), this._createPopupEditor(e), this._bindResize() }, _editRecurringDialog: function (e) { var t = this, i = t.options.messages.recurrenceMessages; t._showRecurringDialog(e, function () { e.isException() ? t._editEvent(e) : t.addEvent(e) }, function () { e.recurrenceId && (e = t.dataSource.get(e.recurrenceId)), t._editEvent(e) }, { title: i.editWindowTitle, text: i.editRecurring ? i.editRecurring : te, occurrenceText: i.editWindowOccurrence, seriesText: i.editWindowSeries }) }, _showRecurringDialog: function (e, t, i, n) { var o = this.options.editable, r = N(o) ? o.editRecurringMode : "dialog"; "series" === r ? i() : "occurrence" === r ? t() : (this._unbindResize(), this.showDialog({ model: e, title: n.title, text: n.text, buttons: [{ text: n.occurrenceText, click: t }, { text: n.seriesText, click: i }] }), this._bindResize()) }, _createButton: function (e) { var t = e.template || '<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>', i = typeof e === P ? e : e.name || e.text, n = { className: "k-scheduler-" + (i || "").replace(/\s/g, ""), text: i, attr: "" }; if (!(i || N(e) && e.template)) throw Error("Custom commands should have name specified"); return N(e) ? (e.className && (e.className += " " + n.className), "edit" === i && N(e.text) && ((e = O(!0, {}, e)).text = e.text.edit), n = O(!0, n, h[i], e)) : n = O(!0, n, h[i]), C.template(t)(n) }, _convertDates: function (e, t) { var i = this.dataSource.reader.timezone, n = e.startTimezone, o = e.endTimezone, r = e.start, s = e.start; t = t || "apply", n = n || o, o = o || n, n && (i ? "apply" === t ? (r = C.timezone.convert(e.start, i, n), s = C.timezone.convert(e.end, i, o)) : (r = C.timezone.convert(e.start, n, i), s = C.timezone.convert(e.end, o, i)) : (r = C.timezone[t](e.start, n), s = C.timezone[t](e.end, o)), e._set("start", r), e._set("end", s)) }, _createEditor: function () { var e, i = this; (e = i._editor = this._isMobile() && C.mobile.ui.Pane ? new m(this.wrapper, O({}, this.options, { target: this, timezone: i.dataSource.reader.timezone, resources: i.resources, createButton: V(this._createButton, this) })) : new g(this.wrapper, O({}, this.options, { target: this, createButton: V(this._createButton, this), timezone: i.dataSource.reader.timezone, resources: i.resources }))).bind("cancel", function (e) { return i.trigger("cancel", { container: e.container, event: e.model }) ? (e.preventDefault(), t) : (i.cancelEvent(), i.focus(), t) }), e.bind("edit", function (e) { i.trigger(Q, { container: e.container, event: e.model }) && e.preventDefault() }), e.bind("save", function () { i.saveEvent() }), e.bind("remove", function (e) { i.removeEvent(e.model) }) }, _createPopupEditor: function (e) { var t = this._editor; e.isNew() && !e.isOccurrence() || (e.isOccurrence() && this._convertDates(e.recurrenceId ? this.dataSource.get(e.recurrenceId) : e), this._convertDates(e)), this.editable = t.editEvent(e) }, removeEvent: function (e) { var t = this, i = "string" == typeof e ? t.occurrenceByUid(e) : e; i && (i.isRecurring() ? t._deleteRecurringDialog(i) : t._confirmation(function (e) { e || t._removeEvent(i) }, i)) }, occurrenceByUid: function (e) { var t = this.dataSource.getByUid(e); return t || (t = s(this._data, e)), t }, occurrencesInRange: function (e, t) { return new C.data.Query(this._data).filter({ logic: "or", filters: [{ logic: "and", filters: [{ field: "start", operator: "gte", value: e }, { field: "end", operator: "gte", value: e }, { field: "start", operator: "lt", value: t }] }, { logic: "and", filters: [{ field: "start", operator: "lte", value: e }, { field: "end", operator: "gt", value: e }] }] }).toArray() }, _removeEvent: function (e) { this.trigger(Y, { event: e }) || this.dataSource.remove(e) && this.dataSource.sync() }, _deleteRecurringDialog: function (e) { var t, i, n, o, r, s = this, a = e, l = s.options.editable, c = N(l) ? l.editRecurringMode : "dialog", d = function () { var e = a.recurrenceId ? a : a.toOccurrence(), t = s.dataSource.get(e.recurrenceId); s._convertDates(t), s._removeEvent(e) }, u = function () { a.recurrenceId && (a = s.dataSource.get(a.recurrenceId)), s._removeEvent(a) }; ("dialog" != c || s._isEditorOpened()) && (t = function () { s._confirmation(function (e) { e || d() }, a) }, i = function () { s._confirmation(function (e) { e || u() }, a) }), n = i || u, o = t || d, s._isEditorOpened() ? e.isException() ? o() : n() : (r = s.options.messages.recurrenceMessages, s._showRecurringDialog(e, o, n, { title: r.deleteWindowTitle, text: r.deleteRecurring ? r.deleteRecurring : "Do you want to delete only this event occurrence or the whole series?", occurrenceText: r.deleteWindowOccurrence, seriesText: r.deleteWindowSeries })) }, _isEditorOpened: function () { return !!this._editor.container }, _unbindView: function (e) { var t = this; t.angular("cleanup", function () { return { elements: t.items() } }), e.destroy() }, _bindView: function (e) { var t = this; t.options.editable && (t._viewRemoveHandler && e.unbind(Y, t._viewRemoveHandler), t._viewRemoveHandler = function (e) { t.removeEvent(e.uid) }, e.bind(Y, t._viewRemoveHandler), t._viewAddHandler && e.unbind("add", t._viewAddHandler), t._viewAddHandler = function (e) { t.addEvent(e.eventInfo) }, e.bind("add", this._viewAddHandler), t._viewEditHandler && e.unbind(Q, t._viewEditHandler), t._viewEditHandler = function (e) { t.editEvent(e.uid) }, e.bind(Q, this._viewEditHandler)), t._viewNavigateHandler && e.unbind("navigate", t._viewNavigateHandler), t._viewNavigateHandler = function (e) { var i, n; e.view && (n = (i = "isWorkDay" in e) ? "changeWorkDay" : "changeView", t.trigger("navigate", { view: e.view, isWorkDay: e.isWorkDay, action: n, date: e.date }) || (i && (t._workDayMode = e.isWorkDay), t._selectView(e.view), t.date(e.date))) }, e.bind("navigate", t._viewNavigateHandler), t._viewActivateHandler && e.unbind("activate", t._viewActivateHandler), t._viewActivateHandler = function () { t._selection && (this.constrainSelection(t._selection), t._select(), t._adjustSelectedDate()) }, e.bind("activate", t._viewActivateHandler) }, _selectView: function (e) { var t, i, n = this; e && n.views[e] && (n._selectedView && n._unbindView(n._selectedView), n._selectedView = n._renderView(e), n._selectedViewName = e, n._viewsCount > 1 && (t = ie({ views: n.views, view: e, ns: C.ns }), (i = n.toolbar.find(".k-scheduler-views li:first-child")).is(".k-current-view") ? i.replaceWith(t) : n.toolbar.find(".k-scheduler-views").prepend(t), n.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-" + e.replace(/\./g, "\\.").toLowerCase()).addClass("k-state-selected"))) }, view: function (e) { var i = this; return e ? (i._selectView(e), i.rebind(), t) : i._selectedView }, viewName: function () { return this.view().name }, _renderView: function (e) { var t = this._initializeView(e); return this._bindView(t), this._model.set("formattedDate", t.dateForTitle()), this._model.set("formattedShortDate", t.shortDateForTitle()), t }, resize: function (e) { var t = this.getSize(), i = this._size, n = this.view(); n && n.groups && (!e && i && t.width === i.width && t.height === i.height || (this.refresh({ action: "resize" }), this._size = t)) }, _adjustSelectedDate: function () { var e = this._model.selectedDate, t = this._selection, i = t.start; i && !C.date.isInDateRange(e, A(i), A(t.end)) && e.setFullYear(i.getFullYear(), i.getMonth(), i.getDate()) }, _initializeView: function (e) { var t, i, n = this.views[e]; if (n) { if (t = N(n), typeof (i = n.type) === P && (i = C.getter(n.type)(window)), !i) throw Error("There is no such view"); n = new i(this.wrapper, function (e) { return delete e.name, delete e.prefix, delete e.remove, delete e.edit, delete e.add, delete e.navigate, e }(O(!0, {}, this.options, t ? n : {}, { resources: this.resources, date: this.date(), showWorkHours: this._workDayMode }))) } return n }, _views: function () { var e, t, i, n, o, r, s, a, l = this.options.views; for (this.views = {}, this._viewsCount = 0, r = 0, s = l.length; r < s; r++)a = !1, e = l[r], (n = N(e)) ? typeof (o = e.type ? e.type : e) !== P && (o = e.name || e.title, a = !0) : o = e, (t = _[o]) && !a && (e.type = t.type, t.title = this.options.messages.views[o], "day" === t.type ? t.messages = { allDay: this.options.messages.allDay } : "agenda" === t.type && (t.messages = { event: this.options.messages.event, date: this.options.messages.date, time: this.options.messages.time })), e = O({ title: o }, t, n ? e : {}), o && (this.views[o] = e, this._viewsCount++, i && !e.selected || (i = o)); i && (this._selectedViewName = i) }, rebind: function () { this.dataSource.fetch() }, _dataSource: function () { var e = this, t = e.options, i = t.dataSource; i = W(i) ? { data: i } : i, !t.timezone || i instanceof ae ? i instanceof ae && (t.timezone = i.options.schema ? i.options.schema.timezone : "") : i = O(!0, i, { schema: { timezone: t.timezone } }), e.dataSource && e._refreshHandler ? e.dataSource.unbind(G, e._refreshHandler).unbind("progress", e._progressHandler).unbind("error", e._errorHandler) : (e._refreshHandler = V(e.refresh, e), e._progressHandler = V(e._requestStart, e), e._errorHandler = V(e._error, e)), e.dataSource = C.data.SchedulerDataSource.create(i).bind(G, e._refreshHandler).bind("progress", e._progressHandler).bind("error", e._errorHandler), e.options.dataSource = e.dataSource }, _error: function () { this._progress(!1) }, _requestStart: function () { this._progress(!0) }, _progress: function (e) { var t = this.element.find(".k-scheduler-content"); C.ui.progress(t, e) }, _resources: function () { var t, i, n, o, r, s = this, a = s.options.resources; for (t = 0; t < a.length; t++) { if (i = a[t], n = i.field, o = i.dataSource, !n || !o) throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.'); s.resources.push({ field: n, name: i.name || n, title: i.title || n, dataTextField: i.dataTextField || "text", dataValueField: i.dataValueField || "value", dataColorField: i.dataColorField || "color", valuePrimitive: null == i.valuePrimitive || i.valuePrimitive, multiple: i.multiple || !1, dataSource: C.data.DataSource.create(o) }) } r = e.map(s.resources, function (e) { return e.dataSource.fetch() }), e.when.apply(null, r).then(function () { s.options.autoBind ? s.view(s._selectedViewName) : s._selectView(s._selectedViewName) }) }, _initModel: function () { var e = this; e._model = C.observable({ selectedDate: new Date(this.options.date), formattedDate: "", formattedShortDate: "" }), e._model.bind("change", function (t) { "selectedDate" === t.field && e.view(e._selectedViewName) }) }, _wrapper: function () { var e = this, t = e.options, i = t.height, n = t.width; e.wrapper = e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role", "grid").attr("aria-multiselectable", !0), e._isMobile() && e.wrapper.addClass("k-scheduler-mobile"), e._isMobilePhoneView() && e.wrapper.addClass("k-scheduler-phone"), i && e.wrapper.height(i), n && e.wrapper.width(n) }, date: function (e) { return null != e && A(e) >= A(this.options.min) && A(e) <= A(this.options.max) && this._model.set("selectedDate", e), A(this._model.get("selectedDate")) }, _toolbar: function () { var i, n, o = this, r = o.options, s = []; r.toolbar && (s = e.isArray(r.toolbar) ? r.toolbar : [r.toolbar]), i = this._isMobilePhoneView() ? oe : ne, n = e(i({ messages: r.messages, pdf: e.grep(s, function (e) { return "pdf" == e || "pdf" == e.name }).length > 0, ns: C.ns, views: o.views, viewsCount: o._viewsCount })), o.wrapper.append(n), o.toolbar = n, C.bind(o.toolbar, o._model), n.on(j + q, ".k-pdf", function (e) { e.preventDefault(), o.saveAsPDF() }), n.on(j + q, ".k-scheduler-navigation li", function (i) { var n = e(this), r = new Date(o.date()), s = ""; if (i.preventDefault(), n.hasClass("k-nav-today")) s = "today", r = new Date; else if (n.hasClass("k-nav-next")) s = "next", r = o.view().nextDate(); else if (n.hasClass("k-nav-prev")) s = "previous", r = o.view().previousDate(); else if (n.hasClass("k-nav-current") && !o._isMobilePhoneView()) return o._showCalendar(), t; o.trigger("navigate", { view: o._selectedViewName, action: s, date: r }) || o.date(r) }), n.on(j + q, ".k-scheduler-views li:not(.k-current-view), .k-scheduler-refresh", function (t) { t.preventDefault(); var i = e(this).attr(C.attr("name")); o.trigger("navigate", { view: i, action: "changeView", date: o.date() }) || (o.view(i), o.element.find(".k-state-expanded").removeClass("k-state-expanded")) }), n.on(j + q, ".k-scheduler-views li.k-current-view", function () { o.element.find(".k-scheduler-views").toggleClass("k-state-expanded"), e(document).on("mousedown" + q, function (t) { 0 === e(t.target).closest(".k-scheduler-views").length && (o.element.find(".k-state-expanded").removeClass("k-state-expanded"), e(document).off(j + q)) }) }), n.find("li").hover(function () { e(this).addClass("k-state-hover") }, function () { e(this).removeClass("k-state-hover") }) }, _showCalendar: function () { var t = this, i = t.toolbar.find(".k-nav-current"), n = e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>'); t.popup || (t.popup = new B(n, { anchor: i, open: function () { t.calendar || (t.calendar = new L(this.element.find(".k-scheduler-calendar"), { change: function () { var e = this.value(); t.trigger("navigate", { view: t._selectedViewName, action: "changeDate", date: e }) || (t.date(e), t.popup.close()) }, min: t.options.min, max: t.options.max })), t.calendar.value(t.date()) }, copyAnchorStyles: !1 })), t.popup.open() }, refresh: function (e) { var t = this, i = this.view(); this._progress(!1), this.angular("cleanup", function () { return { elements: t.items() } }), e = e || {}, i && (e && "itemchange" === e.action && (this._editor.editable || this._preventRefresh) || this.trigger("dataBinding", { action: e.action || "rebind", index: e.index, items: e.items }) || (e && "resize" === e.action || !this._editor || this._editor.close(), this._data = this.dataSource.expand(i.startDate(), i.endDate()), i.refreshLayout(), i.render(this._data), this.trigger("dataBound"))) }, slotByPosition: function (e, t) { var i, n = this.view(); return n._slotByPosition ? (i = n._slotByPosition(e, t)) ? { startDate: i.startDate(), endDate: i.endDate(), groupIndex: i.groupIndex, element: i.element, isDaySlot: i.isDaySlot } : null : null }, slotByElement: function (t) { var i = e(t).offset(); return this.slotByPosition(i.left, i.top) }, resourcesBySlot: function (e) { return this.view()._resourceBySlot(e) } }), _ = { day: { type: "kendo.ui.DayView" }, week: { type: "kendo.ui.WeekView" }, workWeek: { type: "kendo.ui.WorkWeekView" }, agenda: { type: "kendo.ui.AgendaView" }, month: { type: "kendo.ui.MonthView" }, timeline: { type: "kendo.ui.TimelineView" }, timelineWeek: { type: "kendo.ui.TimelineWeekView" }, timelineWorkWeek: { type: "kendo.ui.TimelineWorkWeekView" }, timelineMonth: { type: "kendo.ui.TimelineMonthView" } }, R.plugin(v), C.PDFMixin && (C.PDFMixin.extend(v.prototype), b = "k-scheduler-pdf-export", v.fn._drawPDF = function (t) { var i, n, o, r = this.wrapper, s = r[0].style.cssText; return r.css({ width: r.width(), height: r.height() }), r.addClass(b), i = this, n = new e.Deferred, o = r.find(".k-scheduler-content").find("table").css("table-layout", "auto"), setTimeout(function () { o.css("table-layout", "fixed"), i.resize(!0), i._drawPDFShadow({}, { avoidLinks: i.options.pdf.avoidLinks }).done(function (e) { var i = { page: e, pageNumber: 1, progress: 1, totalPages: 1 }; t.notify(i), n.resolve(i.page) }).fail(function (e) { n.reject(e) }).always(function () { r[0].style.cssText = s, r.removeClass(b), i.resize(!0), i.resize(!0) }) }), n }), w = F.extend({ init: function (e, t) { var i = this, n = C.timezone.windows_zones; if (!n || !C.timezone.zones_titles) throw Error("kendo.timezones.min.js is not included."); F.fn.init.call(i, e, t), i.wrapper = i.element, i._zonesQuery = new C.data.Query(n), i._zoneTitleId = C.guid(), i._zoneTitlePicker(), i._zonePicker(), i._zoneTitle.bind("cascade", function () { this.value() || i._zone.wrapper.hide() }), i._zone.bind("cascade", function () { i._value = this.value(), i.trigger("change") }), i.value(i.options.value) }, options: { name: "TimezoneEditor", value: "", optionLabel: "No timezone" }, events: ["change"], _zoneTitlePicker: function () { var t = this, i = e('<input id="' + t._zoneTitleId + '" aria-label="' + t.options.title + '"/>').appendTo(t.wrapper); t._zoneTitle = new C.ui.DropDownList(i, { dataSource: C.timezone.zones_titles, dataValueField: "other_zone", dataTextField: "name", optionLabel: t.options.optionLabel }) }, _zonePicker: function () { var t = this, i = e('<input aria-label="' + t.options.title + '"/>').appendTo(this.wrapper); t._zone = new C.ui.DropDownList(i, { dataValueField: "zone", dataTextField: "territory", dataSource: t._zonesQuery.data, cascadeFrom: t._zoneTitleId, dataBound: function () { t._value = this.value(), this.wrapper.toggle(this.dataSource.view().length > 1) } }), t._zone.wrapper.hide() }, destroy: function () { F.fn.destroy.call(this), C.destroy(this.wrapper) }, value: function (e) { var i, n = this; return e === t ? n._value : ((i = n._zonesQuery.filter({ field: "zone", operator: "eq", value: e }).data[0]) ? (n._zoneTitle.value(i.other_zone), n._zone.value(i.zone)) : n._zoneTitle.select(0), t) } }), R.plugin(w), y = C.template('<option value="#=other_zone#">#=name#</option>'), k = C.template('<option value="#=zone#">#=territory#</option>'), x = F.extend({ init: function (e, t) { var i = this, n = C.timezone.windows_zones; if (!n || !C.timezone.zones_titles) throw Error("kendo.timezones.min.js is not included."); F.fn.init.call(i, e, t), i.wrapper = i.element, i._zonesQuery = new C.data.Query(n), i._zoneTitlePicker(), i._zonePicker(), i.value(i.options.value) }, options: { name: "MobileTimezoneEditor", optionLabel: "No timezone", value: "" }, events: ["change"], _bindZones: function (e) { var t = e ? this._filter(e) : []; this._zone.html(this._options(t, k)) }, _filter: function (e) { return this._zonesQuery.filter({ field: "other_zone", operator: "eq", value: e }).data }, _options: function (e, t, i) { var n = 0, o = "", r = e.length; for (i && (o += t({ other_zone: "", name: i })); n < r; n++)o += t(e[n]); return o }, _zoneTitlePicker: function () { var t = this, i = t._options(C.timezone.zones_titles, y, t.options.optionLabel); t._zoneTitle = e("<select>" + i + "</select>").appendTo(t.wrapper).change(function () { var e = this.value, i = t._zone; t._bindZones(e), e && i[0].children.length > 1 ? i.show() : i.hide(), t._value = i[0].value, t.trigger("change") }) }, _zonePicker: function () { var t = this; t._zone = e('<select style="display:none"></select>').appendTo(this.wrapper).change(function () { t._value = this.value, t.trigger("change") }), t._bindZones(t._zoneTitle.val()), t._value = t._zone[0].value }, destroy: function () { F.fn.destroy.call(this), C.destroy(this.wrapper) }, value: function (e) { var i, n = this, o = n._zone, r = "", s = ""; return e === t ? n._value : ((i = n._zonesQuery.filter({ field: "zone", operator: "eq", value: e }).data[0]) && (s = i.zone, r = i.other_zone), n._zoneTitle.val(r), n._bindZones(r), o.val(s), (s = o[0].value) && o[0].children.length > 1 ? o.show() : o.hide(), n._value = s, t) } }), R.plugin(x) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.touch.min", ["kendo.core.min", "kendo.userevents.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.ui.Widget, n = e.proxy, o = Math.abs, r = i.extend({ init: function (e, o) { function r(e) { return function (t) { a._triggerTouch(e, t) } } function s(e) { return function (t) { a.trigger(e, { touches: t.touches, distance: t.distance, center: t.center, event: t.event }) } } var a = this; i.fn.init.call(a, e, o), o = a.options, e = a.element, a.wrapper = e, a.events = new t.UserEvents(e, { filter: o.filter, surface: o.surface, minHold: o.minHold, multiTouch: o.multiTouch, allowSelection: !0, fastTap: o.fastTap, press: r("touchstart"), hold: r("hold"), tap: n(a, "_tap"), gesturestart: s("gesturestart"), gesturechange: s("gesturechange"), gestureend: s("gestureend") }), o.enableSwipe ? (a.events.bind("start", n(a, "_swipestart")), a.events.bind("move", n(a, "_swipemove"))) : (a.events.bind("start", n(a, "_dragstart")), a.events.bind("move", r("drag")), a.events.bind("end", r("dragend"))), t.notify(a) }, events: ["touchstart", "dragstart", "drag", "dragend", "tap", "doubletap", "hold", "swipe", "gesturestart", "gesturechange", "gestureend"], options: { name: "Touch", surface: null, global: !1, fastTap: !1, filter: null, multiTouch: !1, enableSwipe: !1, minXDelta: 30, maxYDelta: 20, maxDuration: 1e3, minHold: 800, doubleTapTimeout: 800 }, cancel: function () { this.events.cancel() }, destroy: function () { this.events.destroy() }, _triggerTouch: function (e, t) { this.trigger(e, { touch: t.touch, event: t.event }) && t.preventDefault() }, _tap: function (e) { var i = this, n = i.lastTap, o = e.touch; n && o.endTime - n.endTime < i.options.doubleTapTimeout && t.touchDelta(o, n).distance < 20 ? (i._triggerTouch("doubletap", e), i.lastTap = null) : (i._triggerTouch("tap", e), i.lastTap = o) }, _dragstart: function (e) { this._triggerTouch("dragstart", e) }, _swipestart: function (e) { 2 * o(e.x.velocity) >= o(e.y.velocity) && e.sender.capture() }, _swipemove: function (e) { var t = this.options, i = e.touch, n = e.event.timeStamp - i.startTime, r = i.x.initialDelta > 0 ? "right" : "left"; o(i.x.initialDelta) >= t.minXDelta && o(i.y.initialDelta) < t.maxYDelta && n < t.maxDuration && (this.trigger("swipe", { direction: r, touch: e.touch }), i.cancel()) } }), t.ui.plugin(r), window.kendo; var e, t, i, n, o, r }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.gantt.list.min", ["kendo.dom.min", "kendo.touch.min", "kendo.draganddrop.min", "kendo.columnsorter.min", "kendo.datetimepicker.min", "kendo.editable.min"], function () { return function (e) { function t() { var t = i._activeElement(); t && "body" !== t.nodeName.toLowerCase() && e(t).blur() } var i = window.kendo, n = i.dom, o = n.element, r = n.text, s = i.support.browser, a = i.support.mobileOS, l = i.ui, c = l.Widget, d = e.extend, u = i._outerWidth, h = i._outerHeight, f = e.map, p = e.isFunction, m = s.msie && s.version < 9, g = i.keys, v = { title: "Title", start: "Start Time", end: "End Time", percentComplete: "% Done", parentId: "Predecessor ID", id: "ID", orderId: "Order ID" }, _ = "string", b = ".kendoGanttList", w = "click", y = ".", k = l.GanttList = c.extend({ init: function (t, i) { c.fn.init.call(this, t, i), 0 === this.options.columns.length && this.options.columns.push("title"), this.dataSource = this.options.dataSource, this._columns(), this._layout(), this._domTrees(), this._header(), this._sortable(), this._editable(), this._selectable(), this._draggable(), this._resizable(), this._attachEvents(), this._adjustHeight(), this.bind("render", function () { var t, i; this.options.resizable && (t = this.header.find("col"), i = this.content.find("col"), this.header.find("th").not(":last").each(function (n) { var o = u(e(this)); t.eq(n).width(o), i.eq(n).width(o) }), t.last().css("width", "auto"), i.last().css("width", "auto")) }, !0) }, _adjustHeight: function () { this.content && this.content.height(this.element.height() - h(this.header.parent())) }, destroy: function () { c.fn.destroy.call(this), this._reorderDraggable && this._reorderDraggable.destroy(), this._tableDropArea && this._tableDropArea.destroy(), this._contentDropArea && this._contentDropArea.destroy(), this._columnResizable && this._columnResizable.destroy(), this.touch && this.touch.destroy(), this.timer && clearTimeout(this.timer), this.content.off(b), this.header.find("thead").off(b), this.header.find(y + k.link).off(b), this.header = null, this.content = null, this.levels = null, i.destroy(this.element) }, options: { name: "GanttList", selectable: !0, editable: !0, resizable: !1 }, _attachEvents: function () { var t = this, i = k.styles; t.content.on(w + b, "td > span." + i.icon + ":not(." + i.iconHidden + ")", function (i) { var n = e(this), o = t._modelFromElement(n); o.set("expanded", !o.get("expanded")), i.stopPropagation() }) }, _domTrees: function () { this.headerTree = new n.Tree(this.header[0]), this.contentTree = new n.Tree(this.content[0]) }, _columns: function () { var e = this.options.columns; this.columns = f(e, function (e) { return e = typeof e === _ ? { field: e, title: v[e] } : e, d(new function () { this.field = "", this.title = "", this.editable = !1, this.sortable = !1 }, e) }) }, _layout: function () { var t = this, n = this.options, o = this.element, r = k.styles; o.addClass(r.wrapper).append("<div class='" + r.gridHeader + "'><div class='" + r.gridHeaderWrap + "'></div></div>").append("<div class='" + r.gridContentWrap + "'></div>"), this.header = o.find(y + r.gridHeaderWrap), this.content = o.find(y + r.gridContent), n.rowHeight && (this._rowHeight = function () { var o, r = typeof n.rowHeight === _ ? n.rowHeight : n.rowHeight + "px", s = e(i.format("<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>", r)); return t.content.append(s), o = h(s.find("tr")), s.remove(), o }()) }, _header: function () { var e = this.headerTree, t = o("colgroup", null, this._cols()), i = o("thead", { role: "rowgroup" }, [o("tr", { role: "row" }, this._ths())]), n = o("table", { style: { minWidth: this.options.listWidth + "px" }, role: "grid" }, [t, i]); e.render([n]) }, _render: function (e) { var t, i, n, r = { style: { minWidth: this.options.listWidth + "px" }, tabIndex: 0, role: "treegrid" }; this._rowHeight && (r.style.height = e.length * this._rowHeight + "px"), this.levels = [{ field: null, value: 0 }], t = o("colgroup", null, this._cols()), i = o("tbody", { role: "rowgroup" }, this._trs(e)), n = o("table", r, [t, i]), this.contentTree.render([n]), this.trigger("render") }, _ths: function () { var e, t, i, n, s = this.columns, a = []; for (i = 0, n = s.length; i < n; i++)e = s[i], t = { "data-field": e.field, "data-title": e.title, className: k.styles.header, role: "columnheader" }, a.push(o("th", t, [r(e.title)])); return this.options.resizable && a.push(o("th", { className: k.styles.header, role: "columnheader" })), a }, _cols: function () { var e, t, i, n, r, s = this.columns, a = []; for (n = 0, r = s.length; n < r; n++)e = s[n], i = e.width, t = i && 0 !== parseInt(i, 10) ? { style: { width: typeof i === _ ? i : i + "px" } } : null, a.push(o("col", t, [])); return this.options.resizable && a.push(o("col", { style: { width: "1px" } })), a }, _trs: function (e) { var t, i, n, o, r, s = [], a = [], l = k.styles; for (o = 0, r = e.length; o < r; o++)t = e[o], n = this._levels({ idx: t.parentId, id: t.id, summary: t.summary }), i = { "data-uid": t.uid, "data-level": n, role: "row" }, t.summary && (i["aria-expanded"] = t.expanded), o % 2 != 0 && a.push(l.alt), t.summary && a.push(l.group), a.length && (i.className = a.join(" ")), s.push(this._tds({ task: t, attr: i, level: n })), a = []; return s }, _tds: function (e) { var t, i, n, r = [], s = this.columns; for (i = 0, n = s.length; i < n; i++)t = s[i], r.push(this._td({ task: e.task, column: t, level: e.level })); return this.options.resizable && r.push(o("td", { role: "gridcell" })), o("tr", e.attr, r) }, _td: function (e) { var t, n, s, a = [], l = this.options.resourcesField, c = k.styles, d = e.task, u = e.column, h = d.get(u.field); if (u.field == l) { for (h = h || [], t = [], s = 0; s < h.length; s++)t.push(i.format("{0} [{1}]", h[s].get("name"), h[s].get("formatedValue"))); t = t.join(", ") } else t = u.format ? i.format(u.format, h) : h; return "title" === u.field && ((a = function (e) { var t, i, n = [], r = e.className; for (t = 0, i = e.level; t < i; t++)n.push(o("span", { className: r })); return n }({ level: e.level, className: c.iconPlaceHolder })).push(o("span", { className: c.icon + " " + (d.summary ? d.expanded ? c.iconCollapse : c.iconExpand : c.iconHidden) })), n = i.format("{0}, {1:P0}", t, d.percentComplete)), a.push(o("span", { "aria-label": n }, [r(t)])), o("td", { role: "gridcell" }, a) }, _levels: function (e) { var t, i, n, o = this.levels, r = e.summary, s = e.idx, a = e.id; for (i = 0, n = o.length; i < n; i++)if ((t = o[i]).field == s) return r && o.push({ field: a, value: t.value + 1 }), t.value }, _sortable: function () { var e, t, n, o, r, s = this, a = this.options.resourcesField, l = this.columns, c = this.header.find("th[" + i.attr("field") + "]"), d = function (e) { (0 === s.dataSource.total() || s.editable && s.editable.trigger("validate")) && e.preventDefault() }; for (o = 0, r = c.length; o < r; o++)(e = l[o]).sortable && e.field !== a && (n = c.eq(o), (t = n.data("kendoColumnSorter")) && t.destroy(), n.attr("data-" + i.ns + "field", e.field).kendoColumnSorter({ dataSource: this.dataSource, change: d })); c = null }, _selectable: function () { var t = this, i = this.options.selectable; i && this.content.on(w + b, "tr", function (i) { var n = e(this); t.editable && t.editable.trigger("validate"), i.ctrlKey ? t.clearSelection() : t.select(n) }) }, select: function (e) { var t = this.content.find(e), i = k.styles.selected; return t.length ? (t.siblings(y + i).removeClass(i).attr("aria-selected", !1).end().addClass(i).attr("aria-selected", !0), void this.trigger("change")) : this.content.find(y + i) }, clearSelection: function () { var e = this.select(); e.length && (e.removeClass(k.styles.selected), this.trigger("change")) }, _setDataSource: function (e) { this.dataSource = e, this._sortable() }, _editable: function () { var i = this, n = this.options.editable, o = k.styles, r = "span." + o.icon + ":not(" + o.iconHidden + ")", s = function () { var e = i.editable; e && (e.end() ? i._closeCell() : e.trigger("validate")) }, l = function (i) { var n = e(i.currentTarget); n.hasClass(o.editCell) || t() }; n && !1 !== n.update && (this._startEditHandler = function (t) { var n = t.currentTarget ? e(t.currentTarget) : t, o = i._columnFromElement(n); i.editable || o && o.editable && i._editCell({ cell: n, column: o }) }, i.content.on("focusin" + b, function () { clearTimeout(i.timer), i.timer = null }).on("focusout" + b, function () { i.timer = setTimeout(s, 1) }).on("keydown" + b, function (e) { e.keyCode === g.ENTER && e.preventDefault() }).on("keyup" + b, function (e) { var n, o, r = e.keyCode; switch (r) { case g.ENTER: t(), s(); break; case g.ESC: i.editable && (n = i._editableContainer, o = i._modelFromElement(n), i.trigger("cancel", { model: o, cell: n }) || i._closeCell(!0)) } }), a ? i.touch = i.content.kendoTouch({ filter: "td", touchstart: function (e) { l(e.touch) }, doubletap: function (t) { e(t.touch.initialTouch).is(r) || i._startEditHandler(t.touch) } }).data("kendoTouch") : i.content.on("mousedown" + b, "td", function (e) { l(e) }).on("dblclick" + b, "td", function (t) { e(t.target).is(r) || i._startEditHandler(t) })) }, _editCell: function (t) { var n, o = this.options.resourcesField, r = k.styles, s = t.cell, a = t.column, l = this._modelFromElement(s), c = this.dataSource._createNewModel(l.toJSON()), d = c.fields[a.field] || c[a.field], u = d.validation, h = i.attr("type"), f = i.attr("bind"), g = i.attr("format"), v = { name: a.field, required: !!d.validation && !0 === d.validation.required }; return a.field === o ? void a.editor(s, c) : (this._editableContent = s.children().detach(), this._editableContainer = s, s.data("modelCopy", c), "date" !== d.type && "date" !== e.type(d) || a.format && !/H|m|s|F|g|u/.test(a.format) || (v[f] = "value:" + a.field, v[h] = "date", a.format && (v[g] = i._extractFormat(a.format)), n = function (t, i) { e('<input type="text"/>').attr(v).appendTo(t).kendoDateTimePicker({ format: i.format }) }), this.editable = s.addClass(r.editCell).kendoEditable({ fields: { field: a.field, format: a.format, editor: a.editor || n }, model: c, clearContainer: !1 }).data("kendoEditable"), u && u.dateCompare && p(u.dateCompare) && u.message && (e("<span " + i.attr("for") + '="' + a.field + '" class="k-invalid-msg"/>').hide().appendTo(s), s.find("[name=" + a.field + "]").attr(i.attr("dateCompare-msg"), u.message)), this.editable.bind("validate", function (e) { var t = this.element.find(":kendoFocusable:first").focus(); m && t.focus(), e.preventDefault() }), void (this.trigger("edit", { model: l, cell: s }) && this._closeCell(!0))) }, _closeCell: function (e) { var t = k.styles, i = this._editableContainer, n = this._modelFromElement(i), o = this._columnFromElement(i), r = o.field, s = i.data("modelCopy"), a = {}; a[r] = s.get(r), i.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent), this.editable.unbind(), this.editable.destroy(), this.editable = null, this._editableContainer = null, this._editableContent = null, e || ("start" === r && (a.end = new Date(a.start.getTime() + n.duration())), this.trigger("update", { task: n, updateInfo: a })) }, _draggable: function () { var t, n = this, o = null, r = !0, s = k.styles, l = i.support.isRtl(this.element), c = "tr[" + i.attr("level") + " = 0]:last", u = {}, h = this.options.editable, f = function () { o = null, t = null, r = !0, u = {} }, p = function () { var n = e(t).height(), o = i.getOffset(t).top; d(t, { beforeLimit: o + .25 * n, afterLimit: o + .75 * n }) }, m = function () { return n._reorderDraggable.hint.children(y + s.dragStatus).removeClass(s.dropPositions) }; h && !1 !== h.reorder && !1 !== h.update && (this._reorderDraggable = this.content.kendoDraggable({ distance: 10, holdToDrag: a, group: "listGroup", filter: "tr[data-uid]", ignore: y + s.input, hint: function (t) { return e('<div class="' + s.header + " " + s.dragClue + '"/>').css({ width: 300, paddingLeft: t.css("paddingLeft"), paddingRight: t.css("paddingRight"), lineHeight: t.height() + "px", paddingTop: t.css("paddingTop"), paddingBottom: t.css("paddingBottom") }).append('<span class="' + s.icon + " " + s.dragStatus + '" /><span class="' + s.dragClueText + '"/>') }, cursorOffset: { top: -20, left: 0 }, container: this.content, dragstart: function (e) { var t = n.editable; return t && !1 !== t.reorder && t.trigger("validate") ? void e.preventDefault() : (o = n._modelFromElement(e.currentTarget), this.hint.children(y + s.dragClueText).text(o.get("title")), void (l && this.hint.addClass(s.rtl))) }, drag: function (e) { r && (function (e) { var n, o, r, a, l; t && (n = e.location, o = s.dropAdd, r = "add", a = parseInt(t.attr(i.attr("level")), 10), n <= t.beforeLimit ? (l = t.prev(), o = s.dropTop, r = "insert-before") : n >= t.afterLimit && (l = t.next(), o = s.dropBottom, r = "insert-after"), l && parseInt(l.attr(i.attr("level")), 10) === a && (o = s.dropMiddle), u.className = o, u.command = r) }(e.y), m().addClass(u.className)) }, dragend: function () { f() }, dragcancel: function () { f() } }).data("kendoDraggable"), this._tableDropArea = this.content.kendoDropTargetArea({ distance: 0, group: "listGroup", filter: "tr[data-uid]", dragenter: function (e) { t = e.dropTarget, function (e) { for (var t = e; t;) { if (o.get("id") === t.get("id")) { r = !1; break } t = n.dataSource.taskParent(t) } }(n._modelFromElement(t)), p(), m().toggleClass(s.dropDenied, !r) }, dragleave: function () { r = !0, m() }, drop: function () { var e = n._modelFromElement(t), i = e.orderId, s = { parentId: e.parentId }; if (r) { switch (u.command) { case "add": s.parentId = e.id; break; case "insert-before": s.orderId = e.parentId === o.parentId && e.orderId > o.orderId ? i - 1 : i; break; case "insert-after": s.orderId = e.parentId === o.parentId && e.orderId > o.orderId ? i : i + 1 }n.trigger("update", { task: o, updateInfo: s }) } } }).data("kendoDropTargetArea"), this._contentDropArea = this.element.kendoDropTargetArea({ distance: 0, group: "listGroup", filter: y + s.gridContent, drop: function () { var e = n._modelFromElement(n.content.find(c)), t = e.orderId, i = { parentId: null, orderId: null !== o.parentId ? t + 1 : t }; n.trigger("update", { task: o, updateInfo: i }) } }).data("kendoDropTargetArea")) }, _resizable: function () { var t = this, i = k.styles; this.options.resizable && (this._columnResizable && this._columnResizable.destroy(), this.header.find("thead").on("mousemove" + b, "th", function (n) { var o, r = e(n.currentTarget), s = t.resizeHandle, a = r.position(), l = a.left, c = u(r), d = r.closest("div"), f = n.clientX + e(window).scrollLeft(), p = t.options.columnResizeHandleWidth; return l += d.scrollLeft(), s || (s = t.resizeHandle = e('<div class="' + i.resizeHandle + '"><div class="' + i.resizeHandleInner + '" /></div>')), o = r.offset().left + c, f > o - p && f < o + p ? (d.append(s), void s.show().css({ top: a.top, left: l + c - p - 1, height: h(r), width: 3 * p }).data("th", r)) : void s.hide() }), this._columnResizable = this.header.kendoResizable({ handle: y + i.resizeHandle, start: function (i) { var n = e(i.currentTarget).data("th"), o = "col:eq(" + n.index() + ")", r = t.header.find("table"), s = t.content.find("table"); t.element.addClass("k-grid-column-resizing"), this.col = s.children("colgroup").find(o).add(r.find(o)), this.th = n, this.startLocation = i.x.location, this.columnWidth = u(n), this.table = r.add(s), this.totalWidth = this.table.width() - u(r.find("th:last")) }, resize: function (e) { var t = e.x.location - this.startLocation; this.columnWidth + t < 11 && (t = 11 - this.columnWidth), this.table.css({ minWidth: this.totalWidth + t }), this.col.width(this.columnWidth + t) }, resizeend: function () { var e, i, n; t.element.removeClass("k-grid-column-resizing"), e = Math.floor(this.columnWidth), i = Math.floor(u(this.th)), n = t.columns[this.th.index()], t.trigger("columnResize", { column: n, oldWidth: e, newWidth: i }), this.table = this.col = this.th = null } }).data("kendoResizable")) }, _modelFromElement: function (e) { var t = e.closest("tr"), n = this.dataSource.getByUid(t.attr(i.attr("uid"))); return n }, _columnFromElement: function (e) { var t = e.closest("td"), i = t.parent(), n = i.children().index(t); return this.columns[n] } }); d(!0, l.GanttList, { styles: { wrapper: "k-treelist k-grid k-widget", header: "k-header", alt: "k-alt", rtl: "k-rtl", editCell: "k-edit-cell", group: "k-treelist-group", gridHeader: "k-grid-header", gridHeaderWrap: "k-grid-header-wrap", gridContent: "k-grid-content", gridContentWrap: "k-grid-content", selected: "k-state-selected", icon: "k-icon", iconCollapse: "k-i-collapse", iconExpand: "k-i-expand", iconHidden: "k-i-none", iconPlaceHolder: "k-icon k-i-none", input: "k-input", link: "k-link", resizeHandle: "k-resize-handle", resizeHandleInner: "k-resize-handle-inner", dropPositions: "k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle", dropTop: "k-i-insert-up", dropBottom: "k-i-insert-down", dropAdd: "k-i-plus", dropMiddle: "k-i-insert-middle", dropDenied: "k-i-cancel", dragStatus: "k-drag-status", dragClue: "k-drag-clue", dragClueText: "k-clue-text" } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.gantt.timeline.min", ["kendo.dom.min", "kendo.touch.min", "kendo.draganddrop.min"], function () { return function (e) { function t() { var t = kendo._activeElement(); t && "body" !== t.nodeName.toLowerCase() && e(t).blur() } var i, n, o = kendo.ui.Widget, r = kendo.dom.element, s = kendo.dom.text, a = kendo.dom.html, l = e.isPlainObject, c = kendo._outerWidth, d = kendo._outerHeight, u = e.extend, h = e.proxy, f = kendo.support.browser, p = !1, m = kendo.keys, g = kendo.data.Query, v = ".kendoGanttTimeline", _ = "click", b = "mousemove", w = "mouseleave", y = ".", k = kendo.template("#=kendo.toString(start, 't')#"), x = kendo.template("#=kendo.toString(start, 'ddd M/dd')#"), C = kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"), S = kendo.template("#=kendo.toString(start, 'MMM')#"), T = kendo.template("#=kendo.toString(start, 'yyyy')#"), D = kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'), A = kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>#=messages.start#: #=kendo.toString(start, format)#</div><div>#=messages.end#: #=kendo.toString(end, format)#</div></div></div>'), E = kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'), I = kendo.template('<div class="#=kendo.htmlEncode(styles.taskDetails)#"><strong>#=kendo.htmlEncode(task.title)#</strong><div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div><ul class="#=styles.reset#"><li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li><li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li></ul></div>'), M = { day: { type: "kendo.ui.GanttDayView" }, week: { type: "kendo.ui.GanttWeekView" }, month: { type: "kendo.ui.GanttMonthView" }, year: { type: "kendo.ui.GanttYearView" } }, R = kendo.ui.GanttView = o.extend({ init: function (e, t) { o.fn.init.call(this, e, t), this.title = this.options.title || this.options.name, this.header = this.element.find(y + R.styles.gridHeader), this.content = this.element.find(y + R.styles.gridContent), this.contentWidth = this.content.width(), this._workDays = function (e) { var t = [], i = e.workWeekStart; for (t.push(i); e.workWeekEnd != i;)i > 6 ? i -= 7 : i++, t.push(i); return t }(this.options), this._headerTree = t.headerTree, this._taskTree = t.taskTree, this._taskTemplate = t.taskTemplate ? kendo.template(t.taskTemplate, u({}, kendo.Template, t.templateSettings)) : null, this._dependencyTree = t.dependencyTree, this._taskCoordinates = {}, this._currentTime() }, destroy: function () { o.fn.destroy.call(this), clearTimeout(this._tooltipTimeout), this.headerRow = null, this.header = null, this.content = null, this._dragHint = null, this._resizeHint = null, this._resizeTooltip = null, this._taskTooltip = null, this._percentCompleteResizeTooltip = null, this._headerTree = null, this._taskTree = null, this._dependencyTree = null }, options: { showWorkHours: !1, showWorkDays: !1, workDayStart: new Date(1980, 1, 1, 8, 0, 0), workDayEnd: new Date(1980, 1, 1, 17, 0, 0), workWeekStart: 1, workWeekEnd: 5, hourSpan: 1, slotSize: 100, currentTimeMarker: { updateInterval: 1e4 } }, renderLayout: function () { this._slots = this._createSlots(), this._tableWidth = this._calculateTableWidth(), this.createLayout(this._layout()), this._slotDimensions(), this._adjustHeight(), this.content.find(y + R.styles.dependenciesWrapper).width(this._tableWidth) }, _adjustHeight: function () { this.content && this.content.height(this.element.height() - d(this.header)) }, createLayout: function (e) { var t = this._headers(e), i = this._colgroup(), n = this._headerTree, o = r("thead", null, t), s = r("table", { style: { width: this._tableWidth + "px" } }, [i, o]); n.render([s]), this.headerRow = this.header.find("table:first tr").last() }, _slotDimensions: function () { var e, t, i, n, o = this.headerRow[0].children, r = this._timeSlots(); for (i = 0, n = o.length; i < n; i++)t = o[i], (e = r[i]).offsetLeft = t.offsetLeft, e.offsetWidth = t.offsetWidth }, render: function (e) { var t, i, n = e.length, o = R.styles, r = this._rowsTable(n), s = this._columnsTable(n), a = this._tasksTable(e), l = this.options.currentTimeMarker, c = this.options.calculatedSize; this._taskTree.render([r, s, a]), t = this.content.find(y + o.rowsTable), c && (i = c.row * e.length, this.content.find(y + o.tasksTable).height(i), t.height(i)), this._contentHeight = t.height(), this._rowHeight = c ? c.row : this._contentHeight / t.find("tr").length, this.content.find(y + o.columnsTable).height(this._contentHeight), !1 !== l && void 0 !== l.updateInterval && this._renderCurrentTime() }, _rowsTable: function (e) { var t, i, n = [], o = R.styles, a = [null, { className: o.alt }]; for (i = 0; i < e; i++)t = r("tr", a[i % 2], [r("td", null, [s(" ")])]), n.push(t); return this._createTable(1, n, { className: o.rowsTable }) }, _columnsTable: function () { var e, t, i, n, o, a = [], l = R.styles, c = this._timeSlots(), d = c.length, u = 0; for (o = 0; o < d; o++)t = c[o], n = {}, i = t.span, u += i, 1 !== i && (n.colspan = i), t.isNonWorking && (n.className = l.nonWorking), a.push(r("td", n, [s(" ")])); return e = r("tr", null, a), this._createTable(u, [e], { className: l.columnsTable }) }, _tasksTable: function (e) { var t, i, n, o, s, a, l, c, d = [], u = R.styles, h = this._taskCoordinates = {}, f = this._calculateMilestoneWidth(), m = Math.round(f.width), g = this.options.resourcesField, v = [u.resource, u.resourceAlt], _ = this.options.calculatedSize, b = this._calculateResourcesMargin(), w = this._calculateTaskBorderWidth(), y = function (e) { var t = n.left, i = t + n.width; o.isMilestone() && (i = (t -= m / 2) + m), h[o.id] = { start: t, end: i, rowIndex: e } }; for (l = 0, c = e.length; l < c; l++)o = e[l], (n = this._taskPosition(o)).borderWidth = w, t = r("tr", null), i = r("td"), o.start <= this.end && o.end >= this.start && (i.children.push(this._renderTask(e[l], n)), o[g] && o[g].length && (s = p ? this._tableWidth - n.left : Math.max(n.width || f.clientWidth, 0) + n.left, (a = { width: this._tableWidth - (s + b) + "px" })[p ? "right" : "left"] = s + "px", _ && (a.height = _.cell + "px"), i.children.push(r("div", { className: u.resourcesWrap, style: a }, this._renderResources(o[g], v[l % 2])))), y(l)), t.children.push(i), d.push(t); return this._createTable(1, d, { className: R.styles.tasksTable }) }, _createTable: function (e, t, i) { var n, o, s, a = []; for (s = 0; s < e; s++)a.push(r("col")); return n = r("colgroup", null, a), o = r("tbody", null, t), i.style || (i.style = {}), i.style.width = this._tableWidth + "px", r("table", i, [n, o]) }, _calculateTableWidth: function () { var e, t, i, n = this._timeSlots(), o = 0, r = 0; for (t = 0, i = n.length; t < i; t++)e = n[t].span, r += e, e > o && (o = e); return Math.round(r * this.options.slotSize / o) }, _calculateMilestoneWidth: function () { var t, i, n = R.styles.task + " " + R.styles.taskMilestone, o = e("<div class='" + n + "' style='visibility: hidden; position: absolute'>"); return this.content.append(o), i = o[0].getBoundingClientRect(), t = { width: i.right - i.left, clientWidth: o[0].clientWidth }, o.remove(), t }, _calculateResourcesMargin: function () { var t, i = e("<div class='" + R.styles.resourcesWrap + "' style='visibility: hidden; position: absolute'>"); return this.content.append(i), t = parseInt(i.css(p ? "margin-right" : "margin-left"), 10), i.remove(), t }, _calculateTaskBorderWidth: function () { var t, i, n = R.styles.task + " " + R.styles.taskSingle, o = e("<div class='" + n + "' style='visibility: hidden; position: absolute'>"); return this.content.append(o), i = kendo.getComputedStyles(o[0], ["border-left-width"]), t = parseFloat(i["border-left-width"], 10), o.remove(), t }, _renderTask: function (e, t) { var i, n, o, s = this.options.editable, a = t.left, l = R.styles, c = l.taskWrap, d = this.options.calculatedSize, u = {}, h = { className: c, style: { left: a + "px" } }; return d && (h.style.height = d.cell + "px"), e.summary ? n = this._renderSummary(e, t) : e.isMilestone() ? (n = this._renderMilestone(e, t), h.className += " " + l.taskMilestoneWrap) : n = this._renderSingleTask(e, t), i = r("div", h, [n]), s && !1 !== s.dependencyCreate && (i.children.push(r("div", { className: l.taskDot + " " + l.taskDotStart })), i.children.push(r("div", { className: l.taskDot + " " + l.taskDotEnd }))), e.summary || e.isMilestone() || !s || !1 === s.dragPercentComplete || !1 === s.update || null !== this._taskTemplate || (o = Math.round(t.width * e.percentComplete), u[p ? "right" : "left"] = o + "px", i.children.push(r("div", { className: l.taskDragHandle, style: u }))), i }, _renderSingleTask: function (e, t) { var i, n, o = R.styles, l = Math.round(t.width * e.percentComplete), c = [], d = this.options.editable; return null !== this._taskTemplate ? i = a(this._taskTemplate(e)) : (i = s(e.title), c.push(r("div", { className: o.taskComplete, style: { width: l + "px" } }))), n = r("div", { className: o.taskContent }, [r("div", { className: o.taskTemplate }, [i])]), c.push(n), d && (!1 !== d.destroy && n.children.push(r("span", { className: o.taskActions }, [r("a", { className: o.link + " " + o.taskDelete, href: "#", "aria-label": "Delete" }, [r("span", { className: o.icon + " " + o.iconDelete })])])), !1 !== d.resize && !1 !== d.update && (n.children.push(r("span", { className: o.taskResizeHandle + " " + o.taskResizeHandleWest })), n.children.push(r("span", { className: o.taskResizeHandle + " " + o.taskResizeHandleEast })))), r("div", { className: o.task + " " + o.taskSingle, "data-uid": e.uid, style: { width: Math.max(t.width - 2 * t.borderWidth, 0) + "px" } }, c) }, _renderMilestone: function (e) { var t = R.styles, i = r("div", { className: t.task + " " + t.taskMilestone, "data-uid": e.uid }); return i }, _renderSummary: function (e, t) { var i = R.styles, n = Math.round(t.width * e.percentComplete), o = r("div", { className: i.task + " " + i.taskSummary, "data-uid": e.uid, style: { width: t.width + "px" } }, [r("div", { className: i.taskSummaryProgress, style: { width: n + "px" } }, [r("div", { className: i.taskSummaryComplete, style: { width: t.width + "px" } })])]); return o }, _renderResources: function (e, t) { var i, n, o, a = []; for (n = 0, o = e.length; n < o; n++)i = e[n], a.push(r("span", { className: t, style: { color: i.get("color") } }, [s(i.get("name"))])); return p && a.reverse(), a }, _taskPosition: function (e) { var t = Math.round, i = t(this._offset(p ? e.end : e.start)), n = t(this._offset(p ? e.start : e.end)); return { left: i, width: n - i } }, _offset: function (e) { var t, i, n, o, r = this._timeSlots(), s = 0; return r.length ? (o = this._slotIndex("start", e), (t = r[o]).end < e ? s = t.offsetWidth : t.start <= e && (i = e - t.start, n = t.end - t.start, s = i / n * t.offsetWidth), p && (s = t.offsetWidth + 1 - s), t.offsetLeft + s) : 0 }, _slotIndex: function (e, t, i) { var n, o = this._timeSlots(), r = 0, s = o.length - 1; i && (o = [].slice.call(o).reverse()); do { n = Math.ceil((s + r) / 2), o[n][e] < t ? r = n : (n === s && n--, s = n) } while (r !== s); return i && (r = o.length - 1 - r), r }, _timeByPosition: function (t, i, n) { var o, r, s, a = this._slotByPosition(t); return i ? n ? a.end : a.start : (o = t - e(y + R.styles.tasksTable).offset().left, r = a.end - a.start, s = o - a.offsetLeft, p && (s = a.offsetWidth - s), new Date(a.start.getTime() + r * (s / a.offsetWidth))) }, _slotByPosition: function (t) { var i = t - e(y + R.styles.tasksTable).offset().left, n = this._slotIndex("offsetLeft", i, p); return this._timeSlots()[n] }, _renderDependencies: function (e) { var t, i, n = [], o = this._dependencyTree; for (t = 0, i = e.length; t < i; t++)n.push.apply(n, this._renderDependency(e[t])); o.render(n) }, _renderDependency: function (e) { var t, i, n, o, r = this._taskCoordinates[e.predecessorId], s = this._taskCoordinates[e.successorId]; if (!r || !s) return []; for (i = "_render" + ["FF", "FS", "SF", "SS"][p ? 3 - e.type : e.type], t = this[i](r, s), n = 0, o = t.length; n < o; n++)t[n].attr["data-uid"] = e.uid; return t }, _renderFF: function (e, t) { var i = this._dependencyFF(e, t, !1); return i[i.length - 1].children[0] = this._arrow(!0), i }, _renderSS: function (e, t) { var i = this._dependencyFF(t, e, !0); return i[0].children[0] = this._arrow(!1), i.reverse() }, _renderFS: function (e, t) { var i = this._dependencyFS(e, t, !1); return i[i.length - 1].children[0] = this._arrow(!1), i }, _renderSF: function (e, t) { var i = this._dependencyFS(t, e, !0); return i[0].children[0] = this._arrow(!0), i.reverse() }, _dependencyFF: function (e, t, i) { var n, o = this, r = [], s = 0, a = 0, l = 0, c = 0, d = i ? "start" : "end", u = this._rowHeight, h = e.rowIndex * u + Math.floor(u / 2) - 1, f = t.rowIndex * u + Math.floor(u / 2) - 1, p = R.styles, m = function () { r.push(o._line(p.line + " " + p.lineHorizontal, { left: s + "px", top: a + "px", width: l + "px" })) }, g = function () { r.push(o._line(p.line + " " + p.lineVertical, { left: s + "px", top: a + "px", height: c + "px" })) }; return s = e[d], a = h, l = 10, (n = t[d] - e[d]) > 0 !== i && (l = Math.abs(n) + 10), i ? (s -= l, l -= 1, m()) : (m(), s += l - 2), f < a ? (c = a - f, c += 2, a = f, g()) : (c = f - a, c += 2, g(), a += c - 2), l = Math.abs(s - t[d]), i || (s -= l -= 1), m(), r }, _dependencyFS: function (e, t, i) { var n = this, o = [], r = 0, s = 0, a = 0, l = 0, c = this._rowHeight, d = Math.floor(c / 2), u = t.start - e.end, h = e.rowIndex * c + Math.floor(c / 2) - 1, f = t.rowIndex * c + Math.floor(c / 2) - 1, p = R.styles, m = function () { o.push(n._line(p.line + " " + p.lineHorizontal, { left: r + "px", top: s + "px", width: a + "px" })) }, g = function () { o.push(n._line(p.line + " " + p.lineVertical, { left: r + "px", top: s + "px", height: l + "px" })) }; return r = e.end, s = h, a = 10, i && (r += 1, u > 20 && (a = u - 8), a -= 1), m(), r += a - 2, u <= 20 && (l = i ? Math.abs(f - h) - d : d, f < h ? (s -= l, l += 2, g()) : (g(), s += l), (a = e.end - t.start + 20) < 10 && (a = 10), r -= a - 2, m()), f < h ? (l = s - f, s = f, l += 2, g()) : (l = f - s, g(), s += l), a = t.start - r, i || (a -= 1), m(), o }, _line: function (e, t) { return r("div", { className: e, style: t }) }, _arrow: function (e) { return r("span", { className: e ? R.styles.arrowWest : R.styles.arrowEast }) }, _colgroup: function () { var e, t, i, n = this._timeSlots(), o = n.length, s = []; for (e = 0; e < o; e++)for (t = 0, i = n[e].span; t < i; t++)s.push(r("col")); return r("colgroup", null, s) }, _createDragHint: function (e) { this._dragHint = e.clone().addClass(R.styles.dragHint).css("cursor", "move"), e.parent().append(this._dragHint) }, _updateDragHint: function (e) { var t = this._offset(e); this._dragHint.css({ left: t }) }, _removeDragHint: function () { this._dragHint.remove(), this._dragHint = null }, _createResizeHint: function (t) { var i, n, o = R.styles, r = this._taskCoordinates[t.id].rowIndex * this._rowHeight, s = this.options, a = s.messages; this._resizeHint = e(D({ styles: o })).css({ top: 0, height: this._contentHeight }), this.content.append(this._resizeHint), this._resizeTooltip = e(A({ styles: o, start: t.start, end: t.end, messages: a.views, format: s.resizeTooltipFormat })).css({ top: 0, left: 0 }), this.content.append(this._resizeTooltip), this._resizeTooltipWidth = c(this._resizeTooltip), i = d(this._resizeTooltip), (n = r - i) < 0 && (n = r + this._rowHeight), this._resizeTooltipTop = n }, _updateResizeHint: function (t, i, n) { var o = this._offset(p ? i : t), r = this._offset(p ? t : i), s = r - o, a = n !== p ? o : r, l = this._tableWidth - kendo.support.scrollbar(), c = this._resizeTooltipWidth, d = this.options, u = d.messages, h = e(y + R.styles.tasksTable).offset().left - e(y + R.styles.tasksWrapper).offset().left; p && (o += h), this._resizeHint.css({ left: o, width: s }), this._resizeTooltip && this._resizeTooltip.remove(), (a -= Math.round(c / 2)) < 0 ? a = 0 : a + c > l && (a = l - c), p && (a += h), this._resizeTooltip = e(A({ styles: R.styles, start: t, end: i, messages: u.views, format: d.resizeTooltipFormat })).css({ top: this._resizeTooltipTop, left: a, "min-width": c }).appendTo(this.content) }, _removeResizeHint: function () { this._resizeHint.remove(), this._resizeHint = null, this._resizeTooltip.remove(), this._resizeTooltip = null }, _updatePercentCompleteTooltip: function (t, i, n) { var o, r, s, a; this._removePercentCompleteTooltip(), o = this._percentCompleteResizeTooltip = e(E({ styles: R.styles, text: n })).appendTo(this.element), r = Math.round(c(o) / 2), s = o.find(y + R.styles.callout), a = Math.round(c(s) / 2), o.css({ top: t - (d(o) + a), left: i - r }), s.css("left", r - a) }, _removePercentCompleteTooltip: function () { this._percentCompleteResizeTooltip && this._percentCompleteResizeTooltip.remove(), this._percentCompleteResizeTooltip = null }, _updateDependencyDragHint: function (e, t, i) { this._removeDependencyDragHint(), i ? this._creteVmlDependencyDragHint(e, t) : this._creteDependencyDragHint(e, t) }, _creteDependencyDragHint: function (t, i) { var n = R.styles, o = i.x - t.x, r = i.y - t.y, s = Math.sqrt(o * o + r * r), a = Math.atan(r / o); o < 0 && (a += Math.PI), e("<div class='" + n.line + " " + n.lineHorizontal + " " + n.dependencyHint + "'></div>").css({ top: t.y, left: t.x, width: s, "transform-origin": "0% 0", "-ms-transform-origin": "0% 0", "-webkit-transform-origin": "0% 0", transform: "rotate(" + a + "rad)", "-ms-transform": "rotate(" + a + "rad)", "-webkit-transform": "rotate(" + a + "rad)" }).appendTo(this.content) }, _creteVmlDependencyDragHint: function (t, i) { var n = e("<kvml:line class='" + R.styles.dependencyHint + "' style='position:absolute; top: 0px; left: 0px;' strokecolor='black' strokeweight='2px' from='" + t.x + "px," + t.y + "px' to='" + i.x + "px," + i.y + "px'></kvml:line>").appendTo(this.content); n[0].outerHTML = n[0].outerHTML }, _removeDependencyDragHint: function () { this.content.find(y + R.styles.dependencyHint).remove() }, _createTaskTooltip: function (t, i, n) { var o, r = R.styles, s = this.options, a = this.content, l = a.offset(), u = a.width(), h = kendo.scrollLeft(a), f = e(i).parents("tr").first(), m = f.offset(), g = s.tooltip && s.tooltip.template ? kendo.template(s.tooltip.template) : I, v = p ? n - (l.left + h + kendo.support.scrollbar()) : n - (l.left - h), _ = m.top + d(f) - l.top + a.scrollTop(), b = this._taskTooltip = e('<div style="z-index: 100002;" class="' + r.tooltipWrapper + '" ><div class="' + r.taskContent + '"></div></div>'); b.css({ left: v, top: _ }).appendTo(a).find(y + r.taskContent).append(g({ styles: r, task: t, messages: s.messages.views })), d(b) < m.top - l.top && b.css("top", m.top - l.top - d(b) + a.scrollTop()), (o = c(b)) + v - h > u && ((v -= o) < h && (v = h + u - (o + 17)), b.css("left", v)) }, _removeTaskTooltip: function () { this._taskTooltip && this._taskTooltip.remove(), this._taskTooltip = null }, _scrollTo: function (e) { var t = e.offset().left, i = e.width(), n = t + i, o = e.closest("tr"), r = o.offset().top, s = o.height(), a = r + s, l = this.content, c = l.offset(), d = c.top, u = l.height(), h = d + u, f = c.left, p = l.width(), m = f + p, g = kendo.support.scrollbar(); r < d ? l.scrollTop(l.scrollTop() + (r - d)) : a > h && l.scrollTop(l.scrollTop() + (a + g - h)), t < f && i > p && n < m || n > m && i < p ? l.scrollLeft(l.scrollLeft() + (n + g - m)) : (n > m && i > p && t > f || t < f && i < p) && l.scrollLeft(l.scrollLeft() + (t - f)) }, _scrollToDate: function (e) { var t, i = this.start, n = this.end; e >= i && e < n && (t = this._offset(e), kendo.support.isRtl(this.element) && (t = this._tableWidth - t), kendo.scrollLeft(this.content, t)) }, _timeSlots: function () { return this._slots && this._slots.length ? this._slots[this._slots.length - 1] : [] }, _headers: function (e) { var t, i, n, o, a, l, c, d, u = [], h = R.styles; for (a = 0, l = e.length; a < l; a++) { for (t = e[a], i = [], c = 0, d = t.length; c < d; c++)n = t[c], o = s(n.text), i.push(r("th", { colspan: n.span, className: h.header + (n.isNonWorking ? " " + h.nonWorking : "") }, [o])); u.push(r("tr", null, i)) } return u }, _hours: function (e, t) { var i, n, o, r = [], s = this.options, a = s.workDayStart.getHours(), l = s.workDayEnd.getHours(), c = s.hourSpan; for (e = new Date(e), t = new Date(t); e < t;)i = new Date(e), o = i.getHours(), n = o >= a && o < l, i.setHours(i.getHours() + c), o == i.getHours() && i.setHours(i.getHours() + 2 * c), s.showWorkHours && !n || r.push({ start: e, end: i, isNonWorking: !n, span: 1 }), e = i; return r }, _days: function (e, t) { var i, n, o = []; for (e = new Date(e), t = new Date(t); e < t;)i = t < kendo.date.nextDay(e) ? t : kendo.date.nextDay(e), n = this._isWorkDay(e), this.options.showWorkDays && !n || o.push({ start: e, end: i, isNonWorking: !n, span: 1 }), e = i; return o }, _weeks: function (e, t) { var i, n, o, r = [], s = this.calendarInfo().firstDay; for (e = new Date(e), t = new Date(t); e < t;)(i = kendo.date.dayOfWeek(kendo.date.addDays(e, 1), s, 1)) > t && (i = t), n = this._days(e, i), (o = n.length) > 0 && r.push({ start: n[0].start, end: n[o - 1].end, span: o }), e = i; return r }, _months: function (e, t) { var i, n, o, r, s = []; for (e = new Date(e), t = new Date(t); e < t;)i = new Date(e), n = kendo.date.firstDayOfMonth(new Date(i.setMonth(i.getMonth() + 1))), i = t < n ? t : n, o = this._days(e, i), (r = o.length) > 0 && s.push({ start: o[0].start, end: o[r - 1].end, span: r }), e = i; return s }, _years: function (e, t) { var i, n, o, r = []; for (e = new Date(e), t = new Date(t); e < t;)i = new Date(e), (i = kendo.date.firstDayOfMonth(new Date(i.setMonth(12)))) >= t && (i = t), o = i.getMonth() || 12, n = o - e.getMonth(), r.push({ start: e, end: i, span: n }), e = i; return r }, _slotHeaders: function (e, t) { var i, n, o, r = []; for (n = 0, o = e.length; n < o; n++)i = e[n], r.push({ text: t(i), isNonWorking: !!i.isNonWorking, span: i.span }); return r }, _isWorkDay: function (e) { var t, i, n = e.getDay(), o = this._workDays; for (t = 0, i = o.length; t < i; t++)if (o[t] === n) return !0; return !1 }, calendarInfo: function () { return kendo.getCulture().calendars.standard }, _renderCurrentTime: function () { var t, i = this._getCurrentTime(), n = this._offset(i), o = e("<div class='k-current-time'></div>"), r = R.styles, s = e(y + r.tasksWrapper), a = e(y + r.tasksTable); this.content && this._timeSlots().length && (this.content.find(".k-current-time").remove(), t = this._timeSlots()[this._slotIndex("start", i)], i < t.start || i > t.end || (s.length && a.length && (n += a.offset().left - s.offset().left), o.css({ left: n + "px", top: "0px", width: "1px", height: this._contentHeight + "px" }).appendTo(this.content))) }, _getCurrentTime: function () { return new Date }, _currentTime: function () { var e = this.options.currentTimeMarker; !1 !== e && void 0 !== e.updateInterval && (this._renderCurrentTime(), this._currentTimeUpdateTimer = setInterval(h(this._renderCurrentTime, this), e.updateInterval)) } }); u(!0, R, { styles: { alt: "k-alt", reset: "k-reset", nonWorking: "k-nonwork-hour", header: "k-header", gridHeader: "k-grid-header", gridHeaderWrap: "k-grid-header-wrap", gridContent: "k-grid-content", tasksWrapper: "k-gantt-tables", rowsTable: "k-gantt-rows", columnsTable: "k-gantt-columns", tasksTable: "k-gantt-tasks", dependenciesWrapper: "k-gantt-dependencies", resource: "k-resource", resourceAlt: "k-resource k-alt", task: "k-task", taskSingle: "k-task-single", taskMilestone: "k-task-milestone", taskSummary: "k-task-summary", taskWrap: "k-task-wrap", taskMilestoneWrap: "k-milestone-wrap", resourcesWrap: "k-resources-wrap", taskDot: "k-task-dot", taskDotStart: "k-task-start", taskDotEnd: "k-task-end", taskDragHandle: "k-task-draghandle", taskContent: "k-task-content", taskTemplate: "k-task-template", taskActions: "k-task-actions", taskDelete: "k-task-delete", taskComplete: "k-task-complete", taskDetails: "k-task-details", taskDetailsPercent: "k-task-pct", link: "k-link", icon: "k-icon", iconDelete: "k-i-close", taskResizeHandle: "k-resize-handle", taskResizeHandleWest: "k-resize-w", taskResizeHandleEast: "k-resize-e", taskSummaryProgress: "k-task-summary-progress", taskSummaryComplete: "k-task-summary-complete", line: "k-line", lineHorizontal: "k-line-h", lineVertical: "k-line-v", arrowWest: "k-arrow-w", arrowEast: "k-arrow-e", dragHint: "k-drag-hint", dependencyHint: "k-dependency-hint", tooltipWrapper: "k-widget k-tooltip k-popup k-group k-reset", tooltipContent: "k-tooltip-content", tooltipCallout: "k-callout k-callout-s", callout: "k-callout", marquee: "k-marquee k-gantt-marquee", marqueeColor: "k-marquee-color" } }), kendo.ui.GanttDayView = R.extend({ name: "day", options: { timeHeaderTemplate: k, dayHeaderTemplate: x, resizeTooltipFormat: "h:mm tt ddd, MMM d" }, range: function (e) { var t = this.options.range; this.start = kendo.date.getDate(e.start), this.end = kendo.date.getDate(e.end), (kendo.date.getMilliseconds(e.end) > 0 || this.end.getTime() === this.start.getTime()) && (this.end = kendo.date.addDays(this.end, 1)), t && t.start && (this.start = kendo.date.getDate(t.start), this.start.setHours(t.start.getHours())), t && t.end && (this.end = kendo.date.getDate(t.end), this.end.setHours(t.end.getHours())) }, _createSlots: function () { var e, t, i, n, o = [], r = this._days(this.start, this.end), s = []; for (i = 0, n = r.length; i < n; i++)e = r[i], t = this._hours(e.start, e.end), e.span = t.length, s.push.apply(s, t); return o.push(r), o.push(s), o }, _layout: function () { var e = [], t = this.options; return e.push(this._slotHeaders(this._slots[0], kendo.template(t.dayHeaderTemplate))), e.push(this._slotHeaders(this._slots[1], kendo.template(t.timeHeaderTemplate))), e } }), kendo.ui.GanttWeekView = R.extend({ name: "week", options: { dayHeaderTemplate: x, weekHeaderTemplate: C, resizeTooltipFormat: "h:mm tt ddd, MMM d" }, range: function (e) { var t, i = this.options.range, n = this.calendarInfo(), o = n.firstDay, r = e.end; o === r.getDay() && r.setDate(r.getDate() + 7), this.start = kendo.date.getDate(kendo.date.dayOfWeek(e.start, o, -1)), this.end = kendo.date.getDate(kendo.date.dayOfWeek(r, o, 1)), i && i.start && (this.start = kendo.date.getDate(i.start)), i && i.end && (t = new Date(i.end), this.end = kendo.date.getDate(t) < i.end ? kendo.date.getDate(new Date(t.setDate(t.getDate() + 1))) : kendo.date.getDate(t)) }, _createSlots: function () { var e = []; return e.push(this._weeks(this.start, this.end)), e.push(this._days(this.start, this.end)), e }, _layout: function () { var e = [], t = this.options; return e.push(this._slotHeaders(this._slots[0], kendo.template(t.weekHeaderTemplate))), e.push(this._slotHeaders(this._slots[1], kendo.template(t.dayHeaderTemplate))), e } }), kendo.ui.GanttMonthView = R.extend({ name: "month", options: { weekHeaderTemplate: C, monthHeaderTemplate: S, resizeTooltipFormat: "dddd, MMM d, yyyy" }, range: function (e) { var t, i = this.options.range; this.start = kendo.date.firstDayOfMonth(e.start), this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)), 1), i && i.start && (this.start = kendo.date.getDate(i.start)), i && i.end && (t = new Date(i.end), this.end = kendo.date.getDate(t) < i.end ? kendo.date.getDate(new Date(t.setDate(t.getDate() + 1))) : kendo.date.getDate(t)) }, _createSlots: function () { var e = []; return e.push(this._months(this.start, this.end)), e.push(this._weeks(this.start, this.end)), e }, _layout: function () { var e = [], t = this.options; return e.push(this._slotHeaders(this._slots[0], kendo.template(t.monthHeaderTemplate))), e.push(this._slotHeaders(this._slots[1], kendo.template(t.weekHeaderTemplate))), e } }), kendo.ui.GanttYearView = R.extend({ name: "year", options: { yearHeaderTemplate: T, monthHeaderTemplate: S, resizeTooltipFormat: "dddd, MMM d, yyyy" }, range: function (e) { var t, i = this.options.range; this.start = kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))), this.end = kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12))), i && i.start && (this.start = kendo.date.firstDayOfMonth(i.start)), i && i.end && (t = kendo.date.firstDayOfMonth(i.end), this.end = kendo.date.getDate(new Date(t.setMonth(t.getMonth() + 1)))) }, _createSlots: function () { var t = [], i = this._months(this.start, this.end); return e(i).each(function (e, t) { t.span = 1 }), t.push(this._years(this.start, this.end)), t.push(i), t }, _layout: function () { var e = [], t = this.options; return e.push(this._slotHeaders(this._slots[0], kendo.template(t.yearHeaderTemplate))), e.push(this._slotHeaders(this._slots[1], kendo.template(t.monthHeaderTemplate))), e } }), i = { wrapper: "k-timeline k-grid k-widget", gridHeader: "k-grid-header", gridHeaderWrap: "k-grid-header-wrap", gridContent: "k-grid-content", gridContentWrap: "k-grid-content", tasksWrapper: "k-gantt-tables", dependenciesWrapper: "k-gantt-dependencies", task: "k-task", line: "k-line", taskResizeHandle: "k-resize-handle", taskResizeHandleWest: "k-resize-w", taskDragHandle: "k-task-draghandle", taskComplete: "k-task-complete", taskDelete: "k-task-delete", taskWrapActive: "k-task-wrap-active", taskWrap: "k-task-wrap", taskDot: "k-task-dot", taskDotStart: "k-task-start", taskDotEnd: "k-task-end", hovered: "k-state-hover", selected: "k-state-selected", origin: "k-origin" }, n = kendo.ui.GanttTimeline = o.extend({ init: function (e, t) { o.fn.init.call(this, e, t), this.options.views && this.options.views.length || (this.options.views = ["day", "week", "month"]), p = kendo.support.isRtl(e), this._wrapper(), this._domTrees(), this._views(), this._selectable(), this._draggable(), this._resizable(), this._percentResizeDraggable(), this._createDependencyDraggable(), this._attachEvents(), this._tooltip() }, options: { name: "GanttTimeline", messages: { views: { day: "Day", week: "Week", month: "Month", year: "Year", start: "Start", end: "End" } }, snap: !0, selectable: !0, editable: !0 }, destroy: function () { o.fn.destroy.call(this), clearTimeout(this._tooltipTimeout), this._currentTimeUpdateTimer && clearInterval(this._currentTimeUpdateTimer), this._unbindView(this._selectedView), this._moveDraggable && this._moveDraggable.destroy(), this._resizeDraggable && this._resizeDraggable.destroy(), this._percentDraggable && this._percentDraggable.destroy(), this._dependencyDraggable && this._dependencyDraggable.destroy(), this.touch && this.touch.destroy(), this._headerTree = null, this._taskTree = null, this._dependencyTree = null, this.wrapper.off(v), kendo.destroy(this.wrapper) }, _wrapper: function () { var t = n.styles, i = this, o = this.options; this.wrapper = this.element.addClass(t.wrapper).append("<div class='" + t.gridHeader + "'><div class='" + t.gridHeaderWrap + "'></div></div>").append("<div class='" + t.gridContentWrap + "'><div class='" + t.tasksWrapper + "'></div><div class='" + t.dependenciesWrapper + "'></div></div>"), o.rowHeight && (this._calculatedSize = function () { var n, r, s = "string" == typeof o.rowHeight ? o.rowHeight : o.rowHeight + "px", a = e(kendo.format("<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>", s)); return i.wrapper.find(y + t.tasksWrapper).append(a), n = d(a.find("tr")), r = a.find("td").height(), a.remove(), { row: n, cell: r } }()) }, _domTrees: function () { var e = n.styles, t = kendo.dom.Tree, i = this.wrapper; this._headerTree = new t(i.find(y + e.gridHeaderWrap)[0]), this._taskTree = new t(i.find(y + e.tasksWrapper)[0]), this._dependencyTree = new t(i.find(y + e.dependenciesWrapper)[0]) }, _views: function () { var e, t, i, n, o, r, s, a = this.options.views; for (this.views = {}, r = 0, s = a.length; r < s; r++)e = a[r], (t = l(e)) && !1 === e.selectable || (i = t ? "string" != typeof e.type ? e.title : e.type : e, (n = M[i]) && (t && (e.type = n.type), n.title = this.options.messages.views[i]), e = u({ title: i }, n, t ? e : {}), i && (this.views[i] = e, o && !e.selected || (o = i))); o && (this._selectedViewName = o) }, view: function (e) { return e && (this._selectView(e), this.trigger("navigate", { view: e, action: "changeView" })), this._selectedView }, _selectView: function (e) { e && this.views[e] && (this._selectedView && this._unbindView(this._selectedView), this._selectedView = this._initializeView(e), this._selectedViewName = e) }, _viewByIndex: function (e) { var t, i = this.views; for (t in i) { if (!e) return t; e-- } }, _initializeView: function (e) { var t, i, n, o = this.views[e]; if (o) { if ("string" == typeof (t = o.type) && (t = kendo.getter(o.type)(window)), !t) throw Error("There is no such view"); u(i = {}, this.options.range, o.range), n = o.date || this.options.date, o = new t(this.wrapper, function (e) { return delete e.name, delete e.prefix, delete e.views, e }(u(!0, { headerTree: this._headerTree, taskTree: this._taskTree, dependencyTree: this._dependencyTree, calculatedSize: this._calculatedSize }, o, this.options, { date: n, range: i }))) } return o }, _unbindView: function (e) { e && e.destroy() }, _range: function (e) { var t, i; return e && e.length ? (t = new g(e).sort({ field: "start", dir: "asc" }).toArray()[0].start || new Date, i = new g(e).sort({ field: "end", dir: "desc" }).toArray()[0].end || new Date, { start: new Date(t), end: new Date(i) }) : { start: new Date, end: new Date } }, _render: function (e) { var t = this.view(), i = this._range(e), n = t.options.date; this._tasks = e, t.range(i), t.renderLayout(), t.render(e), n && t._scrollToDate(n) }, _renderDependencies: function (e) { this.view()._renderDependencies(e) }, _taskByUid: function (e) { var t, i, n = this._tasks, o = n.length; for (i = 0; i < o; i++)if ((t = n[i]).uid === e) return t }, _draggable: function () { var e, i, o, r, s = this, a = this.options.snap, l = n.styles, c = this.options.editable, d = function () { s.view()._removeDragHint(), e && e.css("opacity", 1), e = null, i = null, s.dragInProgress = !1 }; c && !1 !== c.move && !1 !== c.update && (this._moveDraggable = new kendo.ui.Draggable(this.wrapper, { distance: 0, filter: y + l.task, holdToDrag: kendo.support.mobileOS, ignore: y + l.taskResizeHandle }), this._moveDraggable.bind("dragstart", function (t) { var n = s.view(); return e = t.currentTarget.parent(), i = s._taskByUid(t.currentTarget.attr("data-uid")), s.trigger("moveStart", { task: i }) ? void t.preventDefault() : (o = i.start, r = n._timeByPosition(t.x.location, a) - o, n._createDragHint(e), e.css("opacity", .5), clearTimeout(s._tooltipTimeout), void (s.dragInProgress = !0)) }).bind("drag", kendo.throttle(function (e) { var t, n, l; s.dragInProgress && (t = s.view(), n = new Date(t._timeByPosition(e.x.location, a) - r), l = n, s.trigger("move", { task: i, start: n }) || (o = n, p && (l = new Date(o.getTime() + i.duration())), t._updateDragHint(l))) }, 15)).bind("dragend", function () { s.trigger("moveEnd", { task: i, start: o }), d() }).bind("dragcancel", function () { d() }).userEvents.bind("select", function () { t() })) }, _resizable: function () { var e, i, o, r, s, a = this, l = this.options.snap, c = n.styles, d = this.options.editable, u = function () { a.view()._removeResizeHint(), e = null, i = null, a.dragInProgress = !1 }; d && !1 !== d.resize && !1 !== d.update && (this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, { distance: 0, filter: y + c.taskResizeHandle, holdToDrag: !1 }), this._resizeDraggable.bind("dragstart", function (t) { return s = t.currentTarget.hasClass(c.taskResizeHandleWest), p && (s = !s), e = t.currentTarget.closest(y + c.task), i = a._taskByUid(e.attr("data-uid")), a.trigger("resizeStart", { task: i }) ? void t.preventDefault() : (o = i.start, r = i.end, a.view()._createResizeHint(i), clearTimeout(a._tooltipTimeout), void (a.dragInProgress = !0)) }).bind("drag", kendo.throttle(function (e) { var t, n; a.dragInProgress && (t = a.view(), n = t._timeByPosition(e.x.location, l, !s), s ? o = n < r ? n : r : r = n > o ? n : o, a.trigger("resize", { task: i, start: o, end: r }) || t._updateResizeHint(o, r, s)) }, 15)).bind("dragend", function () { a.trigger("resizeEnd", { task: i, resizeStart: s, start: o, end: r }), u() }).bind("dragcancel", function () { u() }).userEvents.bind("select", function () { t() })) }, _percentResizeDraggable: function () { var e, i, o, r, s, a, l, d, u, h, f = this, m = n.styles, g = this.options.editable, v = function () { f.view()._removePercentCompleteTooltip(), i = null, e = null, f.dragInProgress = !1 }, _ = function (e) { i.find(y + m.taskComplete).width(e).end().siblings(y + m.taskDragHandle).css(p ? "right" : "left", e) }; g && !1 !== g.dragPercentComplete && !1 !== g.update && (this._percentDraggable = new kendo.ui.Draggable(this.wrapper, { distance: 0, filter: y + m.taskDragHandle, holdToDrag: !1 }), this._percentDraggable.bind("dragstart", function (t) { return f.trigger("percentResizeStart") ? void t.preventDefault() : (i = t.currentTarget.siblings(y + m.task), e = f._taskByUid(i.attr("data-uid")), l = e.percentComplete, o = i.offset(), r = this.element.offset(), s = i.find(y + m.taskComplete).width(), a = c(i), clearTimeout(f._tooltipTimeout), void (f.dragInProgress = !0)) }).bind("drag", kendo.throttle(function (e) { if (f.dragInProgress) { h = p ? -e.x.initialDelta : e.x.initialDelta; var t = Math.max(0, Math.min(a, s + h)); l = Math.round(t / a * 100), _(t), d = o.top - r.top, u = o.left + t - r.left, p && (u += a - 2 * t), f.view()._updatePercentCompleteTooltip(d, u, l) } }, 15)).bind("dragend", function () { f.trigger("percentResizeEnd", { task: e, percentComplete: l / 100 }), v() }).bind("dragcancel", function () { _(s), v() }).userEvents.bind("select", function () { t() })) }, _createDependencyDraggable: function () { var i, o, r, s = this, a = e(), l = e(), u = f.msie && f.version < 9, h = n.styles, p = this.options.editable, m = function () { i.css("display", "").removeClass(h.hovered), i.parent().removeClass(h.origin), i = null, g(!1), l = e(), a = e(), s.view()._removeDependencyDragHint(), s.dragInProgress = !1 }, g = function (e) { l.hasClass(h.origin) || (l.find(y + h.taskDot).css("display", e ? "block" : ""), a.toggleClass(h.hovered, e)) }; p && !1 !== p.dependencyCreate && (u && document.namespaces && document.namespaces.add("kvml", "urn:schemas-microsoft-com:vml", "#default#VML"), this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, { distance: 0, filter: y + h.taskDot, holdToDrag: !1 }), this._dependencyDraggable.bind("dragstart", function (e) { var t, n; return s.trigger("dependencyDragStart") ? void e.preventDefault() : ((i = e.currentTarget.css("display", "block").addClass(h.hovered)).parent().addClass(h.origin), t = i.offset(), n = s.wrapper.find(y + h.tasksWrapper).offset(), o = Math.round(t.left - n.left + d(i) / 2), r = Math.round(t.top - n.top + c(i) / 2), clearTimeout(s._tooltipTimeout), void (s.dragInProgress = !0)) }).bind("drag", kendo.throttle(function (t) { var i, n, c, d; s.dragInProgress && (s.view()._removeDependencyDragHint(), i = e(kendo.elementUnderCursor(t)), n = s.wrapper.find(y + h.tasksWrapper).offset(), c = t.x.location - n.left, d = t.y.location - n.top, s.view()._updateDependencyDragHint({ x: o, y: r }, { x: c, y: d }, u), g(!1), a = i.hasClass(h.taskDot) ? i : e(), l = i.closest(y + h.taskWrap), g(!0)) }, 15)).bind("dragend", function () { var e, t, n, o, r; a.length && (e = i.hasClass(h.taskDotStart), t = a.hasClass(h.taskDotStart), n = e ? t ? 3 : 2 : t ? 1 : 0, o = s._taskByUid(i.siblings(y + h.task).attr("data-uid")), r = s._taskByUid(a.siblings(y + h.task).attr("data-uid")), o !== r && s.trigger("dependencyDragEnd", { type: n, predecessor: o, successor: r })), m() }).bind("dragcancel", function () { m() }).userEvents.bind("select", function () { t() })) }, _selectable: function () { var t = this, i = n.styles; this.options.selectable && this.wrapper.on(_ + v, y + i.task, function (i) { i.stopPropagation(), i.ctrlKey ? t.trigger("clear") : t.trigger("select", { uid: e(this).attr("data-uid") }) }).on(_ + v, y + i.taskWrap, function (t) { t.stopPropagation(), e(this).css("z-index", "0"); var n = e(document.elementFromPoint(t.clientX, t.clientY)); n.hasClass(i.line) && n.click(), e(this).css("z-index", "") }).on(_ + v, y + i.tasksWrapper, function () { t.selectDependency().length > 0 ? t.clearSelection() : t.trigger("clear") }).on(_ + v, y + i.line, function (e) { e.stopPropagation(), t.selectDependency(this) }) }, select: function (e) { var t = this.wrapper.find(e), i = n.styles; return t.length ? (this.clearSelection(), t.addClass(i.selected), void (kendo.support.mobileOS && t.parent().addClass(i.taskWrapActive))) : this.wrapper.find(y + i.task + y + i.selected) }, selectDependency: function (t) { var i, o = this.wrapper.find(t), r = n.styles; return o.length ? (this.clearSelection(), this.trigger("clear"), i = e(o).attr("data-uid"), void this.wrapper.find(y + r.line + "[data-uid='" + i + "']").addClass(r.selected)) : this.wrapper.find(y + r.line + y + r.selected) }, clearSelection: function () { var e = n.styles; this.wrapper.find(y + e.selected).removeClass(e.selected), kendo.support.mobileOS && this.wrapper.find(y + e.taskWrapActive).removeClass(e.taskWrapActive) }, _attachEvents: function () { var t = this, i = n.styles, o = this.options.editable; o && (this._tabindex(), this.wrapper.on(_ + v, y + i.taskDelete, function (n) { t.trigger("removeTask", { uid: e(this).closest(y + i.task).attr("data-uid") }), n.stopPropagation(), n.preventDefault() }).on("keydown" + v, function (e) { var i, n = t.options.editable; e.keyCode === m.DELETE && n && !1 !== n.dependencyDestroy && ((i = t.selectDependency()).length && (t.trigger("removeDependency", { uid: i.attr("data-uid") }), t.clearSelection())) }), kendo.support.mobileOS ? this.touch = this.wrapper.kendoTouch({ filter: y + i.task, doubletap: function (i) { !1 !== t.options.editable.update && t.trigger("editTask", { uid: e(i.touch.currentTarget).attr("data-uid") }) } }).data("kendoTouch") : this.wrapper.on("dblclick" + v, y + i.task, function (i) { !1 !== t.options.editable.update && (t.trigger("editTask", { uid: e(this).attr("data-uid") }), i.stopPropagation(), i.preventDefault()) })) }, _tooltip: function () { var t, i = this, o = this.options.tooltip, r = n.styles, s = function (e) { t = e.clientX }; o && !1 === o.visible || (kendo.support.mobileOS ? (this.wrapper.on(_ + v, y + r.taskDelete, function (e) { e.stopPropagation(), i.view()._removeTaskTooltip() }).on(w + v, y + r.task, function (t) { var n = e(t.relatedTarget).parents(y + r.taskWrap, y + r.task); 0 === n.length && i.view()._removeTaskTooltip() }), this.touch && this.touch.bind("tap", function (t) { var n = t.touch.target, o = i._taskByUid(e(n).attr("data-uid")), r = t.touch.x.client; i.view()._taskTooltip && i.view()._removeTaskTooltip(), i.view()._createTaskTooltip(o, n, r) }).bind("doubletap", function () { i.view()._removeTaskTooltip() })) : this.wrapper.on("mouseenter" + v, y + r.task, function () { var n = this, o = i._taskByUid(e(this).attr("data-uid")); i.dragInProgress || (i._tooltipTimeout = setTimeout(function () { i.view()._createTaskTooltip(o, n, t) }, 800), e(this).on(b, s)) }).on(w + v, y + r.task, function () { clearTimeout(i._tooltipTimeout), i.view()._removeTaskTooltip(), e(this).off(b, s) })) } }), u(!0, n, { styles: i }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.gantt.min", ["kendo.data.min", "kendo.popup.min", "kendo.window.min", "kendo.resizable.min", "kendo.gantt.list.min", "kendo.gantt.timeline.min", "kendo.grid.min", "kendo.pdf.min"], function () { return function (e, t) { function i(e) { return "[" + h.attr("uid") + (e ? "='" + e + "']" : "]") } function n(t, i) { var n = t.parents("[" + h.attr("role") + '="gantt"]'), o = [], r = function (t) { return e(t).parentsUntil("body").filter(function (e, t) { var i = h.getComputedStyles(t, ["overflow"]); return "visible" != i.overflow }).add(window) }(n); t.attr(z, 0), i && r.each(function (t, i) { o[t] = e(i).scrollTop() }); try { t[0].setActive() } catch (e) { t[0].focus() } i && r.each(function (t, i) { e(i).scrollTop(o[t]) }) } var o, r, s, a, l, c, d, u, h = window.kendo, f = "matchMedia" in window, p = h.support.browser, m = h.support.mobileOS, g = h.Observable, v = h.ui.Widget, _ = h.data.DataSource, b = h.data.ObservableObject, w = h.data.ObservableArray, y = h.data.Query, k = e.isArray, x = e.inArray, C = h.isFunction, S = e.proxy, T = e.extend, D = e.isPlainObject, A = e.map, E = h._outerWidth, I = h._outerHeight, M = h.keys, R = ".kendoGantt", F = "p0", z = "tabIndex", P = "click", B = "width", L = "string", H = { down: { origin: "bottom left", position: "top left" }, up: { origin: "top left", position: "bottom left" } }, N = "aria-activedescendant", O = "gantt_active_cell", V = "action-option-focused", U = ".", W = h.template('<button class="#=styles.buttonToggle#" type="button" aria-label="Toggle"><span class="#=styles.iconToggle#"></span></button>'), q = '<button class="#=styles.button# #=className#" type="button" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span><span>#=text#</span></button>', j = h.template('<li class="#=styles.currentView# #=styles.viewButtonDefault#"><a href="\\#" class="#=styles.link#">&nbps;</a></li>'), G = h.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'), $ = h.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'), Y = g.extend({ init: function (e, t) { g.fn.init.call(this), this.element = e, this.options = T(!0, {}, this.options, t), this._popup() }, options: { direction: "down", navigatable: !1 }, _current: function (e) { var t = u.styles, i = this.list.find(U + t.focused), n = i[e](); n.length && (i.removeClass(t.focused).removeAttr("id"), n.addClass(t.focused).attr("id", V), this.list.find("ul").removeAttr(N).attr(N, V)) }, _popup: function () { var t = this, i = u.styles, n = "li." + i.item, o = U + i.toolbar.appendButton, r = this.options.messages.actions, s = this.options.navigatable; this.list = e($({ styles: i, actions: [{ data: "add", text: r.addChild }, { data: "insert-before", text: r.insertBefore }, { data: "insert-after", text: r.insertAfter }] })), this.element.append(this.list), this.popup = new h.ui.Popup(this.list, T({ anchor: this.element.find(o), open: function () { t._adjustListWidth() }, animation: this.options.animation }, H[this.options.direction])), this.element.on(P + R, o, function (n) { var o = e(this), r = o.attr(h.attr("action")); n.preventDefault(), r ? t.trigger("command", { type: r }) : (t.popup.open(), s && t.list.find("li:first").addClass(i.focused).attr("id", V).end().find("ul").attr({ TABINDEX: 0, "aria-activedescendant": V }).focus()) }), this.list.find(n).hover(function () { e(this).addClass(i.hovered) }, function () { e(this).removeClass(i.hovered) }).end().on(P + R, n, function () { t.trigger("command", { type: e(this).attr(h.attr("action")) }), t.popup.close() }), s && (this.popup.bind("close", function () { t.list.find(n).removeClass(i.focused).end().find("ul").attr(z, 0), t.element.parents("[" + h.attr("role") + '="gantt"]').find(U + i.gridContent + " > table:first").focus() }), this.list.find("ul").on("keydown" + R, function (e) { var n = e.keyCode; switch (n) { case M.UP: e.preventDefault(), t._current("prev"); break; case M.DOWN: e.preventDefault(), t._current("next"); break; case M.ENTER: t.list.find(U + i.focused).click(); break; case M.ESC: e.preventDefault(), t.popup.close() } })) }, _adjustListWidth: function () { var e, t, i = this.list, n = u.styles, o = i[0].style.width, r = this.element.find(U + n.toolbar.appendButton), s = E(i); !i.data(B) && o || (e = window.getComputedStyle ? window.getComputedStyle(r[0], null) : 0, t = e ? parseFloat(e.width) : E(r), e && (p.mozilla || p.msie) && (t += parseFloat(e.paddingLeft) + parseFloat(e.paddingRight) + parseFloat(e.borderLeftWidth) + parseFloat(e.borderRightWidth)), o = "border-box" !== i.css("box-sizing") ? t - (E(i) - i.width()) : t, s > o && (o = s), i.css({ fontFamily: r.css("font-family"), width: o }).data(B, o)) }, destroy: function () { clearTimeout(this._focusTimeout), this.popup.destroy(), this.element.off(R), this.list.off(R), this.unbind() } }), K = function (e, t) { return function (i) { var n, o; if (i = k(i) ? { data: i } : i, o = (n = i || {}).data, n.data = o, !(n instanceof e) && n instanceof _) throw Error("Incorrect DataSource type. Only " + t + " instances are supported"); return n instanceof e ? n : new e(n) } }, Q = h.data.Model.define({ id: "id", fields: { id: { type: "number" }, predecessorId: { type: "number" }, successorId: { type: "number" }, type: { type: "number" } } }), X = _.extend({ init: function (e) { _.fn.init.call(this, T(!0, {}, { schema: { modelBase: Q, model: Q } }, e)) }, successors: function (e) { return this._dependencies("predecessorId", e) }, predecessors: function (e) { return this._dependencies("successorId", e) }, dependencies: function (e) { var t = this.predecessors(e), i = this.successors(e); return t.push.apply(t, i), t }, _dependencies: function (e, t) { var i = this.view(), n = { field: e, operator: "eq", value: t }; return i = new y(i).filter(n).toArray() } }); X.create = K(X, "GanttDependencyDataSource"), r = h.data.Model.define({ duration: function () { var e = this.end, t = this.start; return e - t }, isMilestone: function () { return 0 === this.duration() }, _offset: function (e) { var t, i, n = ["start", "end"]; for (i = 0; i < n.length; i++)t = new Date(this.get(n[i]).getTime() + e), this.set(n[i], t) }, id: "id", fields: { id: { type: "number" }, parentId: { type: "number", defaultValue: null, validation: { required: !0 } }, orderId: { type: "number", validation: { required: !0 } }, title: { type: "string", defaultValue: "New task" }, start: { type: "date", validation: { required: !0 } }, end: { type: "date", validation: { required: !0, dateCompare: function (e) { var t, i, n, o, r, s; if (e.filter("[name=end], [name=start]").length) { for (t = e.attr("name"), i = h.widgetInstance(e, h.ui), n = {}, o = e; o !== window && !r;)o = o.parent(), r = o.data("kendoEditable"); return !(s = r ? r.options.model : null) || (n.start = s.start, n.end = s.end, n[t] = i ? i.value() : h.parseDate(e.value()), n.start <= n.end) } return !0 }, message: "End date should be after or equal to the start date" } }, percentComplete: { type: "number", validation: { required: !0, min: 0, max: 1, step: .01 } }, summary: { type: "boolean" }, expanded: { type: "boolean", defaultValue: !0 } } }), (s = _.extend({ init: function (e) { _.fn.init.call(this, T(!0, {}, { schema: { modelBase: r, model: r } }, e)) }, remove: function (e) { var t = e.get("parentId"), i = this.taskAllChildren(e); return this._removeItems(i), e = _.fn.remove.call(this, e), this._childRemoved(t, e.get("orderId")), e }, add: function (e) { if (e) return e = this._toGanttTask(e), this.insert(this.taskSiblings(e).length, e) }, insert: function (e, t) { if (t) return (t = this._toGanttTask(t)).set("orderId", e), t = _.fn.insert.call(this, e, t), this._reorderSiblings(t, this.taskSiblings(t).length - 1), this._resolveSummaryFields(this.taskParent(t)), t }, taskChildren: function (e) { var i, n = this.view(), o = { field: "parentId", operator: "eq", value: null }, r = this._sort && this._sort.length ? this._sort : { field: "orderId", dir: "asc" }; if (e) { if ((i = e.get("id")) === t || null === i || "" === i) return []; o.value = i } return n = new y(n).filter(o).sort(r).toArray() }, taskAllChildren: function (e) { var t = [], i = this, n = function (e) { var o = i.taskChildren(e); t.push.apply(t, o), A(o, n) }; return e ? n(e) : t = this.view(), t }, taskSiblings: function (e) { if (!e) return null; var t = this.taskParent(e); return this.taskChildren(t) }, taskParent: function (e) { return e && null !== e.get("parentId") ? this.get(e.parentId) : null }, taskLevel: function (e) { for (var t = 0, i = this.taskParent(e); null !== i;)t += 1, i = this.taskParent(i); return t }, taskTree: function (e) { var t, i, n, o, r = [], s = this.taskChildren(e); for (i = 0, n = s.length; i < n; i++)t = s[i], r.push(t), t.get("expanded") && (o = this.taskTree(t), r.push.apply(r, o)); return r }, update: function (e, i) { var n, o, r = this, s = function (e) { var t = e.field, i = e.sender; switch (t) { case "start": r._resolveSummaryStart(r.taskParent(i)), function (e, t) { var i, n, o = r.taskAllChildren(e); for (i = 0, n = o.length; i < n; i++)o[i]._offset(t) }(i, i.get(t).getTime() - n.getTime()); break; case "end": r._resolveSummaryEnd(r.taskParent(i)); break; case "percentComplete": r._resolveSummaryPercentComplete(r.taskParent(i)); break; case "orderId": r._reorderSiblings(i, n) } }; for (o in i.parentId !== t && ((n = e.get("parentId")) !== i.parentId && (e.set("parentId", i.parentId), r._childRemoved(n, e.get("orderId")), e.set("orderId", r.taskSiblings(e).length - 1), r._resolveSummaryFields(r.taskParent(e))), delete i.parentId), e.bind("change", s), i) n = e.get(o), e.set(o, i[o]); e.unbind("change", s) }, _resolveSummaryFields: function (e) { e && (this._updateSummary(e), this.taskChildren(e).length && (this._resolveSummaryStart(e), this._resolveSummaryEnd(e), this._resolveSummaryPercentComplete(e))) }, _resolveSummaryStart: function (e) { var t = this; this._updateSummaryRecursive(e, "start", function (e) { var i, n, o, r = t.taskChildren(e), s = r[0].start.getTime(); for (n = 1, o = r.length; n < o; n++)(i = r[n].start.getTime()) < s && (s = i); return new Date(s) }) }, _resolveSummaryEnd: function (e) { var t = this; this._updateSummaryRecursive(e, "end", function (e) { var i, n, o, r = t.taskChildren(e), s = r[0].end.getTime(); for (n = 1, o = r.length; n < o; n++)(i = r[n].end.getTime()) > s && (s = i); return new Date(s) }) }, _resolveSummaryPercentComplete: function (e) { var t = this; this._updateSummaryRecursive(e, "percentComplete", function (e) { var i = t.taskChildren(e); return new y(i).aggregate([{ field: "percentComplete", aggregate: "average" }]).percentComplete.average }) }, _updateSummaryRecursive: function (e, t, i) { var n, o; e && (n = i(e), e.set(t, n), (o = this.taskParent(e)) && this._updateSummaryRecursive(o, t, i)) }, _childRemoved: function (e, t) { var i, n, o = null === e ? null : this.get(e), r = this.taskChildren(o); for (i = t, n = r.length; i < n; i++)r[i].set("orderId", i); this._resolveSummaryFields(o) }, _reorderSiblings: function (e, t) { var i, n = e.get("orderId"), o = n > t, r = o ? t : n, s = o ? n : t, a = o ? r : r + 1, l = this.taskSiblings(e); for (s = Math.min(s, l.length - 1), i = r; i <= s; i++)l[i] !== e && (l[i].set("orderId", a), a += 1) }, _updateSummary: function (e) { if (null !== e) { var t = this.taskChildren(e).length; e.set("summary", t > 0) } }, _toGanttTask: function (e) { if (!(e instanceof r)) { var t = e; (e = this._createNewModel()).accept(t) } return e } })).create = K(s, "GanttDataSource"), T(!0, h.data, { GanttDataSource: s, GanttTask: r, GanttDependencyDataSource: X, GanttDependency: Q }), a = { desktop: { dateRange: function (t, i) { var n = { name: i.field, title: i.title }, o = i.model.fields[i.field].validation; o && D(o) && o.message && (n[h.attr("dateCompare-msg")] = o.message), e('<input type="text" required ' + h.attr("type") + '="date" ' + h.attr("role") + '="datetimepicker" ' + h.attr("bind") + '="value:' + i.field + '" ' + h.attr("validate") + "='true' />").attr(n).appendTo(t), e("<span " + h.attr("for") + '="' + i.field + '" class="k-invalid-msg"/>').hide().appendTo(t) }, resources: function (t, i) { e('<a href="#" class="' + i.styles.button + '">' + i.messages.assignButton + "</a>").click(i.click).appendTo(t) } } }, l = h.Observable.extend({ init: function (e, t) { h.Observable.fn.init.call(this), this.element = e, this.options = T(!0, {}, this.options, t), this.createButton = this.options.createButton }, fields: function (t, i) { var n, o = this, r = this.options, s = r.messages.editor, a = r.resources; return r.editable.template ? n = e.map(i.fields, function (e, t) { return { field: t } }) : (n = [{ field: "title", title: s.title }, { field: "start", title: s.start, editor: t.dateRange }, { field: "end", title: s.end, editor: t.dateRange }, { field: "percentComplete", title: s.percentComplete, format: F }], i.get(a.field) && n.push({ field: a.field, title: s.resources, messages: s, editor: t.resources, click: function (e) { e.preventDefault(), a.editor(o.container.find(U + u.styles.popup.resourcesField), i) }, styles: u.styles.popup })), n }, _buildEditTemplate: function (e, t, i) { var n, o, r, s, a = this.options.resources, l = this.options.editable.template, c = T({}, h.Template, this.options.templateSettings), d = c.paramName, f = u.styles.popup, p = ""; if (l) typeof l === L && (l = window.unescape(l)), p += h.template(l, c)(e); else for (n = 0, o = t.length; n < o; n++)r = t[n], p += '<div class="' + f.editLabel + '"><label for="' + r.field + '">' + (r.title || r.field || "") + "</label></div>", r.field === a.field && (p += '<div class="' + f.resourcesField + '" style="display:none"></div>'), !e.editable || e.editable(r.field) ? (i.push(r), p += "<div " + h.attr("container-for") + '="' + r.field + '" class="' + f.editField + '"></div>') : (s = "#:", r.field ? (r = h.expr(r.field, d), s += r + "==null?'':" + r) : s += "''", s += "#", s = h.template(s, c), p += '<div class="' + f.editField + '">' + s(e) + "</div>"); return p } }), c = l.extend({ destroy: function () { this.close(), this.unbind() }, editTask: function (e) { this.editable = this._createPopupEditor(e) }, close: function () { var e = this, t = function () { e.editable && (e.editable.destroy(), e.editable = null, e.container = null), e.popup && (e.popup.destroy(), e.popup = null) }; this.editable && this.container.is(":visible") ? (e.trigger("close", { window: e.container }), this.container.data("kendoWindow").bind("deactivate", t).close()) : t() }, showDialog: function (t) { var i, n, o, r, s = t.buttons, a = u.styles.popup, l = h.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">', a.form, a.formContainer, a.message, t.text, a.buttonsContainer); for (i = 0, n = s.length; i < n; i++)l += this.createButton(s[i]); l += "</div></div></div>", o = this.element, this.popup && this.popup.destroy(), (r = this.popup = e(l).appendTo(o).eq(0).on("click", U + a.button, function (t) { t.preventDefault(), r.close(); var i = e(t.currentTarget).index(); s[i].click() }).kendoWindow({ modal: !0, resizable: !1, draggable: !1, title: t.title, visible: !1, deactivate: function () { this.destroy(), o.focus() } }).getKendoWindow()).center().open() }, _createPopupEditor: function (t) { var i, n, o = this, r = this.options.messages, s = u.styles, l = s.popup, c = h.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">', h.attr("uid"), t.uid, l.form, l.editForm, l.formContainer), d = this.fields(a.desktop, t), f = []; return c += this._buildEditTemplate(t, d, f), c += '<div class="' + l.buttonsContainer + '">', c += this.createButton({ name: "update", text: r.save, className: u.styles.primary }), c += this.createButton({ name: "cancel", text: r.cancel }), !1 !== o.options.editable.destroy && (c += this.createButton({ name: "delete", text: r.destroy })), c += "</div></div></div>", i = this.container = e(c).appendTo(this.element).eq(0).kendoWindow(T({ modal: !0, resizable: !1, draggable: !0, title: r.editor.editorTitle, visible: !1, close: function (e) { e.userTriggered && o.trigger("cancel", { container: i, model: t }) && e.preventDefault() } }, {})), n = i.kendoEditable({ fields: f, model: t, clearContainer: !1, validateOnBlur: !0, target: o.options.target }).data("kendoEditable"), h.cycleForm(i), this.trigger("edit", { container: i, model: t }) ? o.trigger("cancel", { container: i, model: t }) : (i.data("kendoWindow").center().open(), i.on(P + R, U + s.buttonCancel, function (e) { e.preventDefault(), e.stopPropagation(), o.trigger("cancel", { container: i, model: t }) }), i.on(P + R, U + s.buttonSave, function (e) { var n, r, s, l, c; for (e.preventDefault(), e.stopPropagation(), n = o.fields(a.desktop, t), r = {}, l = 0, c = n.length; l < c; l++)s = n[l].field, r[s] = t.get(s); o.trigger("save", { container: i, model: t, updateInfo: r }) }), i.on(P + R, U + s.buttonDelete, function (e) { e.preventDefault(), e.stopPropagation(), o.trigger("remove", { container: i, model: t }) })), n } }), d = v.extend({ init: function (e, t) { v.fn.init.call(this, e, t), this.wrapper = this.element, this.model = this.options.model, this.resourcesField = this.options.resourcesField, this.createButton = this.options.createButton, this._initContainer(), this._attachHandlers() }, events: ["save"], open: function () { this.window.center().open() }, close: function () { this.window.bind("deactivate", S(this.destroy, this)).close() }, destroy: function () { this._dettachHandlers(), this.grid.destroy(), this.grid = null, this.window.destroy(), this.window = null, v.fn.destroy.call(this), h.destroy(this.wrapper), this.element = this.wrapper = null }, _attachHandlers: function () { var t = u.styles, i = this.grid, n = this._cancelProxy = S(this._cancel, this); this.container.on(P + R, U + t.buttonCancel, this._cancelProxy), this._saveProxy = S(this._save, this), this.container.on(P + R, U + t.buttonSave, this._saveProxy), this.window.bind("close", function (e) { e.userTriggered && n(e) }), i.wrapper.on(P + R, "input[type='checkbox']", function () { var t = e(this), n = e(t).closest("tr"), o = i.dataSource.getByUid(n.attr(h.attr("uid"))), r = e(t).is(":checked") ? 1 : ""; o.set("value", r) }) }, _dettachHandlers: function () { this._cancelProxy = null, this._saveProxy = null, this.container.off(R), this.grid.wrapper.off() }, _cancel: function (e) { e.preventDefault(), this.close() }, _save: function (e) { e.preventDefault(), this._updateModel(), this.wrapper.is(U + u.styles.popup.resourcesField) || this.trigger("save", { container: this.wrapper, model: this.model }), this.close() }, _initContainer: function () { var t = this, i = u.styles.popup, n = h.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"', i.form, i.editForm, i.formContainer, i.resourcesFormContainer); n = e(n), this.container = n.find(U + i.resourcesFormContainer), this.window = n.kendoWindow({ modal: !0, resizable: !1, draggable: !0, visible: !1, title: this.options.messages.resourcesEditorTitle, open: function () { t.grid.resize(!0) } }).data("kendoWindow"), this._resourceGrid(), this._createButtons() }, _resourceGrid: function () { var t = this.options.messages, i = e('<div id="resources-grid"/>').appendTo(this.container); this.grid = new h.ui.Grid(i, { columns: [{ field: "name", title: t.resourcesHeader, template: "<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>" }, { field: "value", title: t.unitsHeader, template: function (e) { var t = e.format, i = null !== e.value ? e.value : ""; return t ? h.toString(i, t) : i } }], height: 280, sortable: !0, editable: !0, filterable: !0, dataSource: { data: this.options.data, schema: { model: { id: "id", fields: { id: { from: "id" }, name: { from: "name", type: "string", editable: !1 }, value: { from: "value", type: "number", defaultValue: "" }, format: { from: "format", type: "string" } } } } }, save: function (e) { var t = !!e.values.value; e.container.parent().find("input[type='checkbox']").prop("checked", t) } }) }, _createButtons: function () { var e, t, i = this.options.buttons, n = '<div class="' + u.styles.popup.buttonsContainer + '">'; for (e = 0, t = i.length; e < t; e++)n += this.createButton(i[e]); n += "</div>", this.container.append(n) }, _updateModel: function () { var e, t, i, n = [], o = this.grid.dataSource.data(); for (t = 0, i = o.length; t < i; t++)null !== (e = o[t].get("value")) && e > 0 && n.push(o[t]); this.model[this.resourcesField] = n } }), u = v.extend({ init: function (e, t, i) { k(t) && (t = { dataSource: t }), o = { append: { text: "Add Task", action: "add", className: u.styles.toolbar.appendButton, iconClass: u.styles.toolbar.iconPlus }, pdf: { text: "Export to PDF", className: u.styles.toolbar.pdfButton, iconClass: u.styles.toolbar.iconPdf } }, v.fn.init.call(this, e, t), i && (this._events = i), this._wrapper(), this._resources(), this.options.views && this.options.views.length || (this.options.views = ["day", "week", "month"]), this._timeline(), this._toolbar(), this._footer(), this._adjustDimensions(), this._preventRefresh = !0, this.view(this.timeline._selectedViewName), this._preventRefresh = !1, this._dataSource(), this._assignments(), this._dropDowns(), this._list(), this._dependencies(), this._resizable(), this._scrollable(), this._dataBind(), this._attachEvents(), this._createEditor(), h.notify(this) }, events: ["dataBinding", "dataBound", "add", "edit", "remove", "cancel", "save", "change", "navigate", "moveStart", "move", "moveEnd", "resizeStart", "resize", "resizeEnd", "columnResize"], options: { name: "Gantt", autoBind: !0, navigatable: !1, selectable: !0, editable: !0, resizable: !1, columnResizeHandleWidth: 3, columns: [], views: [], dataSource: {}, dependencies: {}, resources: {}, assignments: {}, taskTemplate: null, messages: { save: "Save", cancel: "Cancel", destroy: "Delete", deleteTaskConfirmation: "Are you sure you want to delete this task?", deleteDependencyConfirmation: "Are you sure you want to delete this dependency?", deleteTaskWindowTitle: "Delete task", deleteDependencyWindowTitle: "Delete dependency", views: { day: "Day", week: "Week", month: "Month", year: "Year", start: "Start", end: "End" }, actions: { append: "Add Task", addChild: "Add Child", insertBefore: "Add Above", insertAfter: "Add Below", pdf: "Export to PDF" }, editor: { editorTitle: "Task", resourcesEditorTitle: "Resources", title: "Title", start: "Start", end: "End", percentComplete: "Complete", resources: "Resources", assignButton: "Assign", resourcesHeader: "Resources", unitsHeader: "Units" } }, showWorkHours: !0, showWorkDays: !0, toolbar: null, workDayStart: new Date(1980, 1, 1, 8, 0, 0), workDayEnd: new Date(1980, 1, 1, 17, 0, 0), workWeekStart: 1, workWeekEnd: 5, hourSpan: 1, snap: !0, height: 600, listWidth: "30%", rowHeight: null }, select: function (e) { var i = this.list; return e ? (i.select(e), t) : i.select() }, clearSelection: function () { this.list.clearSelection() }, destroy: function () { v.fn.destroy.call(this), this.dataSource && (this.dataSource.unbind("change", this._refreshHandler), this.dataSource.unbind("progress", this._progressHandler), this.dataSource.unbind("error", this._errorHandler)), this.dependencies && (this.dependencies.unbind("change", this._dependencyRefreshHandler), this.dependencies.unbind("error", this._dependencyErrorHandler)), this.timeline && (this.timeline.unbind(), this.timeline.destroy()), this.list && (this.list.unbind(), this.list.destroy()), this.footerDropDown && this.footerDropDown.destroy(), this.headerDropDown && this.headerDropDown.destroy(), this._editor && this._editor.destroy(), this._resizeDraggable && this._resizeDraggable.destroy(), this.toolbar.off(R), f && (this._mediaQuery.removeListener(this._mediaQueryHandler), this._mediaQuery = null), e(window).off("resize" + R, this._resizeHandler), e(this.wrapper).off(R), this.toolbar = null, this.footer = null }, setOptions: function (t) { var i, n = h.deepExtend({}, this.options, t), o = this._events; t.views || (i = this.view().name, n.views = e.map(this.options.views, function (e) { var t = D(e), n = t ? "string" != typeof e.type ? e.title : e.type : e; return i === n ? t ? e.selected = !0 : e = { type: n, selected: !0 } : t && (e.selected = !1), e })), t.dataSource || (n.dataSource = this.dataSource), t.dependencies || (n.dependencies = this.dependencies), t.resources || (n.resources = this.resources), t.assignments || (n.assignments = this.assignments), this.destroy(), this.element.empty(), this.options = null, this.init(this.element, n, o), v.fn._setEvents.call(this, n) }, _attachEvents: function () { this._resizeHandler = S(this.resize, this, !1), e(window).on("resize" + R, this._resizeHandler) }, _wrapper: function () { var e = u.styles, t = [e.icon, e.resizeHandle].join(" "), i = this.options, n = i.height, o = i.width; this.wrapper = this.element.addClass(e.wrapper).append("<div class='" + e.listWrapper + "'><div></div></div>").append("<div class='" + e.splitBarWrapper + "'><div class='" + t + "'></div></div>").append("<div class='" + e.timelineWrapper + "'><div></div></div>"), this.wrapper.find(U + e.list).width(i.listWidth), n && this.wrapper.height(n), o && this.wrapper.width(o), i.rowHeight && this.wrapper.addClass(e.rowHeight) }, _toolbar: function () { var t, i, n, o = this, r = u.styles, s = U + r.toolbar.views + " > li", a = U + r.toolbar.pdfButton, l = U + r.buttonToggle, c = U + r.gridContent, d = e(U + r.list), p = e(U + r.timeline), m = r.hovered, g = this.options.toolbar, v = e("<div class='" + r.toolbar.actions + "'>"); C(g) || (g = typeof g === L ? g : this._actions(g), g = S(h.template(g), this)), n = e(W({ styles: r.toolbar })), i = e(G({ ns: h.ns, views: this.timeline.views, styles: r.toolbar })), v.append(g({})), t = e("<div class='" + r.toolbar.headerWrapper + "'>").append(n).append(i).append(v), i.find("li").length > 1 && i.prepend(j({ styles: r.toolbar })), this.wrapper.prepend(t), this.toolbar = t, f && (this._mediaQueryHandler = S(function (e) { e.matches ? d.css({ display: "none", "max-width": 0 }) : (d.css({ display: "inline-block", width: "30%", "max-width": "none" }), p.css("display", "inline-block"), o.refresh(), p.find(c).scrollTop(o.scrollTop)), o._resize() }, this), this._mediaQuery = window.matchMedia("(max-width: 480px)"), this._mediaQuery.addListener(this._mediaQueryHandler)), t.on(P + R, s, function (t) { var n, s, a; t.preventDefault(), n = o.list, s = e(this).attr(h.attr("name")), (a = i.find(U + r.toolbar.currentView)).is(":visible") && a.parent().toggleClass(r.toolbar.expanded), n.editable && n.editable.trigger("validate") || o.trigger("navigate", { view: s }) || o.view(s) }).on(P + R, a, function (e) { e.preventDefault(), o.saveAsPDF() }).on(P + R, l, function (e) { e.preventDefault(), d.is(":visible") ? (d.css({ display: "none", width: "0" }), p.css({ display: "inline-block", width: "100%" }), o.refresh(), p.find(c).scrollTop(o.scrollTop)) : (p.css({ display: "none", width: 0 }), d.css({ display: "inline-block", width: "100%", "max-width": "none" }).find(c).scrollTop(o.scrollTop)), o._resize() }), this.wrapper.find(U + r.toolbar.toolbar + " li").hover(function () { e(this).addClass(m) }, function () { e(this).removeClass(m) }) }, _actions: function () { var e, t, i = this.options, n = i.editable, o = i.toolbar, r = ""; if (!k(o)) { if (!n || !1 === n.create) return r; o = ["append"] } for (e = 0, t = o.length; e < t; e++)r += this._createButton(o[e]); return r }, _footer: function () { var t, i, n, r, s, a = this.options.editable; a && !1 !== a.create && (t = u.styles.toolbar, i = this.options.messages.actions, n = e(h.template(q)(T(!0, { styles: t }, o.append, { text: i.append }))), r = e("<div class='" + t.actions + "'>").append(n), s = e("<div class='" + t.footerWrapper + "'>").append(r), this.wrapper.append(s), this.footer = s) }, _createButton: function (e) { var t = e.template || q, i = this.options.messages.actions, n = typeof e === L ? e : e.name || e.text, r = o[n] ? o[n].className : "k-gantt-" + (n || "").replace(/\s/g, ""), s = { iconClass: "", action: "", text: n, className: r, styles: u.styles.toolbar }; if (!(n || D(e) && e.template)) throw Error("Custom commands should have name specified"); return s = T(!0, s, o[n], { text: i[n] }), D(e) && (e.className && x(s.className, e.className.split(" ")) < 0 && (e.className += " " + s.className), s = T(!0, s, e)), h.template(t)(s) }, _adjustDimensions: function () { var e = this.element, t = u.styles, i = U + t.list, n = U + t.timeline, o = U + t.splitBar, r = I(this.toolbar), s = this.footer ? I(this.footer) : 0, a = e.height(), l = e.width(), c = E(e.find(o)), d = E(e.find(i)); e.children([i, n, o].join(",")).height(a - (r + s)).end().children(n).width(l - (c + d)), l < d + c && e.find(i).width(l - c) }, _scrollTo: function (e) { var t, n, o = this.timeline.view(), r = this.list, s = h.attr("uid"), a = "string" == typeof e ? e : e.closest("tr" + i()).attr(s); o.content.is(":visible") ? (n = o.content.find(i(a)), t = function () { o._scrollTo(n) }) : (n = r.content.find(i(a)), t = function () { n.get(0).scrollIntoView() }), 0 !== n.length && t() }, _dropDowns: function () { var e = this, t = U + u.styles.toolbar.actions, i = this.options.messages.actions, n = this.timeline, o = this.options.editable, r = function (t) { var i, o = t.type, r = e.dataSource, s = r._createNewModel(), a = e.dataItem(e.select()), l = r.taskParent(a), c = n.view()._timeSlots()[0], d = "add" === o ? a : l, u = e.list.editable; u && u.trigger("validate") || (s.set("title", "New task"), d ? (s.set("parentId", d.get("id")), s.set("start", d.get("start")), s.set("end", d.get("end"))) : (s.set("start", c.start), s.set("end", c.end)), "add" !== o && (i = a.get("orderId"), i = "insert-before" === o ? i : i + 1), e._createTask(s, i)) }; o && !1 !== o.create && (this.footerDropDown = new Y(this.footer.children(t).eq(0), { messages: { actions: i }, direction: "up", animation: { open: { effects: "slideIn:up" } }, navigatable: e.options.navigatable }), this.headerDropDown = new Y(this.toolbar.children(t).eq(0), { messages: { actions: i }, navigatable: e.options.navigatable }), this.footerDropDown.bind("command", r), this.headerDropDown.bind("command", r)) }, _list: function () { var e, t, i = this, o = i.options.navigatable, r = u.styles, s = this.wrapper.find(U + r.list), a = s.find("> div"), l = this.wrapper.find(U + r.toolbar.actions + " > button"), c = { columns: this.options.columns || [], dataSource: this.dataSource, selectable: this.options.selectable, editable: this.options.editable, resizable: this.options.resizable, columnResizeHandleWidth: this.options.columnResizeHandleWidth, listWidth: E(s), resourcesField: this.resources.field, rowHeight: this.options.rowHeight }, d = c.columns, f = function () { o && (i._current(i._cachedCurrent), n(i.list.content.find("table"), !0)), delete i._cachedCurrent }; for (t = 0; t < d.length; t++)(e = d[t]).field === this.resources.field && "function" != typeof e.editor && (e.editor = S(this._createResourceEditor, this)); this.list = new h.ui.GanttList(a, c), this.list.bind("render", function () { i._navigatable() }, !0).bind("edit", function (e) { i._cachedCurrent = e.cell, i.trigger("edit", { task: e.model, container: e.cell }) && e.preventDefault() }).bind("cancel", function (e) { i.trigger("cancel", { task: e.model, container: e.cell }) && e.preventDefault(), f() }).bind("update", function (e) { i._updateTask(e.task, e.updateInfo), f() }).bind("change", function () { i.trigger("change"); var e = i.list.select(); e.length ? (l.removeAttr("data-action", "add"), i.timeline.select("[data-uid='" + e.attr("data-uid") + "']")) : (l.attr("data-action", "add"), i.timeline.clearSelection()) }).bind("columnResize", function (e) { i.trigger("columnResize", { column: e.column, oldWidth: e.oldWidth, newWidth: e.newWidth }) }) }, _timeline: function () { var e = this, i = u.styles, n = function (e) { return delete e.name, delete e.prefix, delete e.remove, delete e.edit, delete e.add, delete e.navigate, e }(T(!0, { resourcesField: this.resources.field }, this.options)), o = this.wrapper.find(U + i.timeline + " > div"), r = U + i.toolbar.currentView + " > " + U + i.toolbar.link; this.timeline = new h.ui.GanttTimeline(o, n), this.timeline.bind("navigate", function (t) { var n = t.view.replace(/\./g, "\\.").toLowerCase(), o = e.toolbar.find(U + i.toolbar.views + " > li").removeClass(i.selected).end().find(U + i.toolbar.viewButton + "-" + n).addClass(i.selected).find(U + i.toolbar.link).text(); e.toolbar.find(r).text(o), e.refresh() }).bind("moveStart", function (i) { var n = e.list.editable; return n && n.trigger("validate") ? (i.preventDefault(), t) : (e.trigger("moveStart", { task: i.task }) && i.preventDefault(), t) }).bind("move", function (t) { var i = t.task, n = t.start, o = new Date(n.getTime() + i.duration()); e.trigger("move", { task: i, start: n, end: o }) && t.preventDefault() }).bind("moveEnd", function (t) { var i = t.task, n = t.start, o = new Date(n.getTime() + i.duration()); e.trigger("moveEnd", { task: i, start: n, end: o }) || e._updateTask(e.dataSource.getByUid(i.uid), { start: n, end: o }) }).bind("resizeStart", function (i) { var n = e.list.editable; return n && n.trigger("validate") ? (i.preventDefault(), t) : (e.trigger("resizeStart", { task: i.task }) && i.preventDefault(), t) }).bind("resize", function (t) { e.trigger("resize", { task: t.task, start: t.start, end: t.end }) && t.preventDefault() }).bind("resizeEnd", function (t) { var i = t.task, n = {}; t.resizeStart ? n.start = t.start : n.end = t.end, e.trigger("resizeEnd", { task: i, start: t.start, end: t.end }) || e._updateTask(e.dataSource.getByUid(i.uid), n) }).bind("percentResizeStart", function (t) { var i = e.list.editable; i && i.trigger("validate") && t.preventDefault() }).bind("percentResizeEnd", function (t) { e._updateTask(e.dataSource.getByUid(t.task.uid), { percentComplete: t.percentComplete }) }).bind("dependencyDragStart", function (t) { var i = e.list.editable; i && i.trigger("validate") && t.preventDefault() }).bind("dependencyDragEnd", function (t) { var i = e.dependencies._createNewModel({ type: t.type, predecessorId: t.predecessor.id, successorId: t.successor.id }); e._createDependency(i) }).bind("select", function (t) { var i = e.list.editable; i && i.trigger("validate"), e.select("[data-uid='" + t.uid + "']") }).bind("editTask", function (t) { var i = e.list.editable; i && i.trigger("validate") || e.editTask(t.uid) }).bind("clear", function () { e.clearSelection() }).bind("removeTask", function (t) { var i = e.list.editable; i && i.trigger("validate") || e.removeTask(e.dataSource.getByUid(t.uid)) }).bind("removeDependency", function (t) { var i = e.list.editable; i && i.trigger("validate") || e.removeDependency(e.dependencies.getByUid(t.uid)) }) }, _dataSource: function () { var e = this.options, t = e.dataSource; t = k(t) ? { data: t } : t, this.dataSource && this._refreshHandler ? this.dataSource.unbind("change", this._refreshHandler).unbind("progress", this._progressHandler).unbind("error", this._errorHandler) : (this._refreshHandler = S(this.refresh, this), this._progressHandler = S(this._requestStart, this), this._errorHandler = S(this._error, this)), this.dataSource = h.data.GanttDataSource.create(t).bind("change", this._refreshHandler).bind("progress", this._progressHandler).bind("error", this._errorHandler) }, _dependencies: function () { var e = this.options.dependencies || {}, t = k(e) ? { data: e } : e; this.dependencies && this._dependencyRefreshHandler ? this.dependencies.unbind("change", this._dependencyRefreshHandler).unbind("error", this._dependencyErrorHandler) : (this._dependencyRefreshHandler = S(this.refreshDependencies, this), this._dependencyErrorHandler = S(this._error, this)), this.dependencies = h.data.GanttDependencyDataSource.create(t).bind("change", this._dependencyRefreshHandler).bind("error", this._dependencyErrorHandler) }, _resources: function () { var e = this.options.resources, t = e.dataSource || {}; this.resources = { field: "resources", dataTextField: "name", dataColorField: "color", dataFormatField: "format" }, T(this.resources, e), this.resources.dataSource = h.data.DataSource.create(t) }, _assignments: function () { var e = this.options.assignments, t = e.dataSource || {}; this.assignments ? this.assignments.dataSource.unbind("change", this._assignmentsRefreshHandler) : this._assignmentsRefreshHandler = S(this.refresh, this), this.assignments = { dataTaskIdField: "taskId", dataResourceIdField: "resourceId", dataValueField: "value" }, T(this.assignments, e), this.assignments.dataSource = h.data.DataSource.create(t), this.assignments.dataSource.bind("change", this._assignmentsRefreshHandler) }, _createEditor: function () { var e = this, i = this._editor = new c(this.wrapper, T({}, this.options, { target: this, resources: { field: this.resources.field, editor: S(this._createResourceEditor, this) }, createButton: S(this._createPopupButton, this) })); i.bind("cancel", function (i) { var n = e.dataSource.getByUid(i.model.uid); return e.trigger("cancel", { container: i.container, task: n }) ? (i.preventDefault(), t) : (e.cancelTask(), t) }).bind("edit", function (t) { var i = e.dataSource.getByUid(t.model.uid); e.trigger("edit", { container: t.container, task: i }) && t.preventDefault() }).bind("save", function (t) { var i = e.dataSource.getByUid(t.model.uid); e.saveTask(i, t.updateInfo) }).bind("remove", function (t) { e.removeTask(t.model.uid) }).bind("close", e._onDialogClose) }, _onDialogClose: function () { }, _createResourceEditor: function (e, t) { var i = this, n = t instanceof b ? t : t.model, o = n.get("id"), r = this.options.messages, s = i.resources.field, a = this._resourceEditor = new d(e, { resourcesField: s, data: this._wrapResourceData(o), model: n, messages: T({}, r.editor), buttons: [{ name: "update", text: r.save, className: u.styles.primary }, { name: "cancel", text: r.cancel }], createButton: S(this._createPopupButton, this), save: function (e) { i._updateAssignments(e.model.get("id"), e.model.get(s)) } }); a.open() }, _createPopupButton: function (e) { var t = e.name || e.text, i = { className: u.styles.popup.button + " k-gantt-" + (t || "").replace(/\s/g, ""), text: t, attr: "" }; if (!(t || D(e) && e.template)) throw Error("Custom commands should have name specified"); return D(e) && (e.className && (e.className += " " + i.className), i = T(!0, i, e)), h.template('<a class="#=className#" #=attr# href="\\#">#=text#</a>')(i) }, view: function (e) { return this.timeline.view(e) }, range: function (e) { var t = this.dataSource, i = this.view(), n = this.timeline; return e && (i.options.range = { start: e.start, end: e.end }, n._render(t.taskTree()), n._renderDependencies(this.dependencies.view())), { start: i.start, end: i.end } }, date: function (e) { var t = this.view(); return e && (t.options.date = e, t._scrollToDate(e)), t.options.date }, dataItem: function (e) { var t, i; return e ? (t = this.list, i = t.content.find(e), t._modelFromElement(i)) : null }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.list._setDataSource(this.dataSource), this.options.autoBind && e.fetch() }, setDependenciesDataSource: function (e) { this.options.dependencies = e, this._dependencies(), this.options.autoBind && e.fetch() }, items: function () { return this.wrapper.children(".k-task") }, _updateAssignments: function (e, t) { for (var i, n, o, r, s, a, l, c = this.assignments.dataSource, d = this.assignments.dataTaskIdField, u = this.assignments.dataResourceIdField, h = !1, f = new y(c.view()).filter({ field: d, operator: "eq", value: e }).toArray(); f.length;) { for (i = f[0], r = 0, s = t.length; r < s; r++)if (n = t[r], i.get(u) === n.get("id")) { o = t[r].get("value"), this._updateAssignment(i, o), t.splice(r, 1), h = !0; break } h || this._removeAssignment(i), h = !1, f.shift() } for (a = 0, l = t.length; a < l; a++)n = t[a], this._createAssignment(n, e); c.sync() }, cancelTask: function () { var e = this._editor, t = e.container; t && e.close() }, editTask: function (e) { var t, i = "string" == typeof e ? this.dataSource.getByUid(e) : e; i && ((t = this.dataSource._createNewModel(i.toJSON())).uid = i.uid, this.cancelTask(), this._editTask(t)) }, _editTask: function (e) { this._editor.editTask(e) }, saveTask: function (e, t) { var i = this._editor, n = i.container, o = i.editable; n && o && o.end() && this._updateTask(e, t) }, _updateTask: function (e, t) { var i = this.resources.field; this.trigger("save", { task: e, values: t }) || (this._preventRefresh = !0, this.dataSource.update(e, t), t[i] && this._updateAssignments(e.get("id"), t[i]), this._syncDataSource()) }, _updateAssignment: function (e, t) { var i = this.assignments.dataValueField; e.set(i, t) }, removeTask: function (e) { var t = this, i = "string" == typeof e ? this.dataSource.getByUid(e) : e; i && this._taskConfirm(function (e) { e || t._removeTask(i) }, i) }, _createTask: function (e, i) { if (!this.trigger("add", { task: e, dependency: null })) { var n = this.dataSource; this._preventRefresh = !0, i === t ? n.add(e) : n.insert(i, e), this._scrollToUid = e.uid, this._syncDataSource() } }, _createDependency: function (e) { this.trigger("add", { task: null, dependency: e }) || (this._preventDependencyRefresh = !0, this.dependencies.add(e), this._preventDependencyRefresh = !1, this.dependencies.sync()) }, _createAssignment: function (e, t) { var i = this.assignments, n = i.dataSource, o = i.dataTaskIdField, r = i.dataResourceIdField, s = i.dataValueField, a = n._createNewModel(); a[o] = t, a[r] = e.get("id"), a[s] = e.get("value"), n.add(a) }, removeDependency: function (e) { var t = this, i = "string" == typeof e ? this.dependencies.getByUid(e) : e; i && this._dependencyConfirm(function (e) { e || t._removeDependency(i) }, i) }, _removeTaskDependencies: function (e, t) { this._preventDependencyRefresh = !0; for (var i = 0, n = t.length; i < n; i++)this.dependencies.remove(t[i]); this._preventDependencyRefresh = !1, this.dependencies.sync() }, _removeTaskAssignments: function (e) { var t, i, n = this.assignments.dataSource, o = n.view(), r = { field: this.assignments.dataTaskIdField, operator: "eq", value: e.get("id") }; for (o = new y(o).filter(r).toArray(), this._preventRefresh = !0, t = 0, i = o.length; t < i; t++)n.remove(o[t]); this._preventRefresh = !1, n.sync() }, _removeTask: function (e) { var t = this.dependencies.dependencies(e.id); this.trigger("remove", { task: e, dependencies: t }) || (this._removeTaskDependencies(e, t), this._removeTaskAssignments(e), this._preventRefresh = !0, this.dataSource.remove(e) && this._syncDataSource(), this._preventRefresh = !1) }, _removeDependency: function (e) { this.trigger("remove", { task: null, dependencies: [e] }) || this.dependencies.remove(e) && this.dependencies.sync() }, _removeAssignment: function (e) { this.assignments.dataSource.remove(e) }, _taskConfirm: function (e, t) { var i = this.options.messages; this._confirm(e, { model: t, text: i.deleteTaskConfirmation, title: i.deleteTaskWindowTitle }) }, _dependencyConfirm: function (e, t) { var i = this.options.messages; this._confirm(e, { model: t, text: i.deleteDependencyConfirmation, title: i.deleteDependencyWindowTitle }) }, _confirm: function (e, t) { var i, n, o = this.options.editable; !0 === o || !1 !== o.confirmation ? (i = this.options.messages, n = [{ name: "delete", text: i.destroy, className: u.styles.primary, click: function () { e() } }, { name: "cancel", text: i.cancel, click: function () { e(!0) } }], this.showDialog(T(!0, {}, t, { buttons: n }))) : e() }, showDialog: function (e) { this._editor.showDialog(e) }, refresh: function () { var e, t, n, o, r, s; this._preventRefresh || this.list.editable || (this._progress(!1), e = this.dataSource, t = e.taskTree(), n = this._scrollToUid, s = -1, this.current && (r = this.current.closest("tr").attr(h.attr("uid")), s = this.current.index()), this.trigger("dataBinding") || (0 !== this.resources.dataSource.data().length && this._assignResources(t), this._editor && this._editor.close(), this.clearSelection(), this.list._render(t), this.timeline._render(t), this.timeline._renderDependencies(this.dependencies.view()), n && (this._scrollTo(n), this.select(i(n))), (n || r) && s >= 0 && (o = this.list.content.find("tr" + i(n || r) + " > td:eq(" + s + ")"), this._current(o)), this._scrollToUid = null, this.trigger("dataBound"))) }, refreshDependencies: function () { this._preventDependencyRefresh || this.trigger("dataBinding") || (this.timeline._renderDependencies(this.dependencies.view()), this.trigger("dataBound")) }, _assignResources: function (e) { var t, i, n = this.resources, o = this.assignments, r = function () { var e = o.dataSource.view(), t = { field: o.dataTaskIdField }; return e = new y(e).group(t).toArray() }(), s = function (e, t) { var i, o, s = e.get("id"); for (h.setter(n.field)(e, new w([])), i = 0, o = r.length; i < o; i++)r[i].value === s && t(e, r[i].items) }, a = function (e, t) { var i, r, s, a, l, c, d, u; for (i = 0, r = t.length; i < r; i++)s = t[i], a = n.dataSource.get(s.get(o.dataResourceIdField)), l = s.get(o.dataValueField), c = s.get(o.dataResourceIdField), d = a.get(n.dataFormatField) || F, u = h.toString(l, d), e[n.field].push(new b({ id: c, name: a.get(n.dataTextField), color: a.get(n.dataColorField), value: l, formatedValue: u })) }; for (t = 0, i = e.length; t < i; t++)s(e[t], a) }, _wrapResourceData: function (e) { var t, i, n, o = this, r = [], s = this.resources.dataSource.view(), a = this.assignments.dataSource.view(), l = new y(a).filter({ field: o.assignments.dataTaskIdField, operator: "eq", value: e }).toArray(), c = function (e) { var t = null; return new y(l).filter({ field: o.assignments.dataResourceIdField, operator: "eq", value: e }).select(function (e) { t += e.get(o.assignments.dataValueField) }), t }; for (i = 0, n = s.length; i < n; i++)t = s[i], r.push({ id: t.get("id"), name: t.get(o.resources.dataTextField), format: t.get(o.resources.dataFormatField) || F, value: c(t.id) }); return r }, _syncDataSource: function () { this._preventRefresh = !1, this._requestStart(), this.dataSource.sync() }, _requestStart: function () { this._progress(!0) }, _error: function () { this._progress(!1) }, _progress: function (e) { h.ui.progress(this.element, e) }, _resizable: function () { var t, i, n, o = this, r = this.wrapper, s = u.styles, a = U + s.gridContent, l = r.find(U + s.list), c = r.find(U + s.timeline); this._resizeDraggable = r.find(U + s.splitBar).height(l.height()).hover(function () { e(this).addClass(s.splitBarHover) }, function () { e(this).removeClass(s.splitBarHover) }).end().kendoResizable({ orientation: "horizontal", handle: U + s.splitBar, start: function () { t = l.width(), i = c.width(), n = c.find(a).scrollLeft() }, resize: function (e) { var s = e.x.initialDelta; h.support.isRtl(r) && (s *= -1), t + s < 0 || i - s < 0 || (l.width(t + s), c.width(i - s), c.find(a).scrollLeft(n + s), o.timeline.view()._renderCurrentTime()) } }).data("kendoResizable") }, _scrollable: function () { var t = this, i = u.styles, n = U + i.gridContent, o = U + i.gridHeaderWrap, r = this.timeline.element.find(o), s = this.timeline.element.find(n), a = this.list.element.find(o), l = this.list.element.find(n); m && l.css("overflow-y", "auto"), s.on("scroll", function () { t.scrollTop = this.scrollTop, r.scrollLeft(this.scrollLeft), l.scrollTop(this.scrollTop) }), l.on("scroll", function () { a.scrollLeft(this.scrollLeft) }).on("DOMMouseScroll" + R + " mousewheel" + R, function (t) { var i = s.scrollTop(), n = h.wheelDeltaY(t); n && (t.preventDefault(), e(t.currentTarget).one("wheel" + R, !1), s.scrollTop(i + -n)) }) }, _navigatable: function () { var o, r = this, s = this.options.navigatable, a = this.options.editable, l = this.list.header.find("table"), c = this.list.content.find("table"), d = u.styles, f = h.support.isRtl(this.wrapper), p = this.timeline.element.find(U + d.gridContent), m = l.add(c), g = i(), v = { collapse: !1, expand: !0 }, _ = function (e) { var t = r.timeline.view()._timeSlots()[0].offsetWidth; p.scrollLeft(p.scrollLeft() + (e ? -t : t)) }, b = function (e) { var t = r.current.parent("tr" + i()), o = r.current.index(), s = t[e](); 0 !== r.select().length && r.clearSelection(), 0 !== s.length ? (r._current(s.children("td:eq(" + o + ")")), r._scrollTo(r.current)) : r.current.is("td") && "prev" == e ? n(l) : r.current.is("th") && "next" == e && n(c) }, w = function (e) { var t = r.current[e](); 0 !== t.length && (r._current(t), o = r.current.index()) }, y = function (e) { var t = r.dataItem(r.current); t.summary && t.expanded !== e && t.set("expanded", e) }, k = function () { var e, t, i = r.options.editable; i && !1 !== i.destroy && !r.list.editable && (e = r.select(), t = h.attr("uid"), e.length && r.removeTask(e.attr(t))) }; return e(this.wrapper).on("mousedown" + R, "tr" + g + ", div" + g + ":not(" + U + d.line + ")", function (t) { var o, l = e(t.currentTarget), c = e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"); t.ctrlKey || (s && (o = l.is("tr") ? e(t.target).closest("td") : r.list.content.find("tr" + i(l.attr(h.attr("uid"))) + " > td:first"), r._current(o)), !s && !a || c || (r._focusTimeout = setTimeout(function () { n(r.list.content.find("table"), !0) }, 2))) }), !0 !== s ? (c.on("keydown" + R, function (e) { e.keyCode == M.DELETE && k() }), t) : (m.on("focus" + R, function () { var t = this === c.get(0) ? "td" : "th", i = r.select(), n = r.current || e(i.length ? i : this).find(t + ":eq(" + (o || 0) + ")"); r._current(n) }).on("blur" + R, function () { r._current(), this == l && e(this).attr(z, -1) }).on("keydown" + R, function (t) { var i, n = t.keyCode; if (r.current) switch (i = r.current.is("td"), n) { case M.RIGHT: t.preventDefault(), t.altKey ? _() : t.ctrlKey ? y(f ? v.collapse : v.expand) : w(f ? "prev" : "next"); break; case M.LEFT: t.preventDefault(), t.altKey ? _(!0) : t.ctrlKey ? y(f ? v.expand : v.collapse) : w(f ? "next" : "prev"); break; case M.UP: t.preventDefault(), b("prev"); break; case M.DOWN: t.preventDefault(), b("next"); break; case M.SPACEBAR: t.preventDefault(), i && r.select(r.current.closest("tr")); break; case M.ENTER: t.preventDefault(), i ? r.options.editable && !1 !== r.options.editable.update && (r._cachedCurrent = r.current, r.list._startEditHandler(r.current), e(this).one("keyup", function (e) { e.stopPropagation() })) : r.current.children("a.k-link").click(); break; case M.ESC: t.stopPropagation(); break; case M.DELETE: i && k(); break; default: n >= 49 && n <= 57 && r.view(r.timeline._viewByIndex(n - 49)) } }), t) }, _current: function (t) { var i, n = u.styles; this.current && this.current.length && this.current.removeClass(n.focused).removeAttr("id"), t && t.length ? (this.current = t.addClass(n.focused).attr("id", O), (i = e(h._activeElement())).is("table") && this.wrapper.find(i).length > 0 && i.removeAttr(N).attr(N, O)) : this.current = null }, _dataBind: function () { var t, i = this; i.options.autoBind && (this._preventRefresh = !0, this._preventDependencyRefresh = !0, t = e.map([this.dataSource, this.dependencies, this.resources.dataSource, this.assignments.dataSource], function (e) { return e.fetch() }), e.when.apply(null, t).done(function () { i._preventRefresh = !1, i._preventDependencyRefresh = !1, i.refresh() })) }, _resize: function () { this._adjustDimensions(), this.timeline.view()._adjustHeight(), this.timeline.view()._renderCurrentTime(), this.list._adjustHeight() } }), h.PDFMixin && (h.PDFMixin.extend(u.fn), u.fn._drawPDF = function () { var e = u.styles, t = "." + e.list, i = this.wrapper.find(t).width(), n = this.wrapper.clone(); return n.find(t).css("width", i), this._drawPDFShadow({ content: n }, { avoidLinks: this.options.pdf.avoidLinks }) }), h.ui.plugin(u), T(!0, u, { styles: { wrapper: "k-widget k-gantt", rowHeight: "k-gantt-rowheight", listWrapper: "k-gantt-layout k-gantt-treelist", list: "k-gantt-treelist", timelineWrapper: "k-gantt-layout k-gantt-timeline", timeline: "k-gantt-timeline", splitBarWrapper: "k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout", splitBar: "k-splitbar", splitBarHover: "k-splitbar-horizontal-hover", popupWrapper: "k-list-container", popupList: "k-list k-reset", resizeHandle: "k-resize-handle", icon: "k-icon", item: "k-item", line: "k-line", buttonDelete: "k-gantt-delete", buttonCancel: "k-gantt-cancel", buttonSave: "k-gantt-update", buttonToggle: "k-gantt-toggle", primary: "k-primary", hovered: "k-state-hover", selected: "k-state-selected", focused: "k-state-focused", gridHeader: "k-grid-header", gridHeaderWrap: "k-grid-header-wrap", gridContent: "k-grid-content", popup: { form: "k-popup-edit-form", editForm: "k-gantt-edit-form", formContainer: "k-edit-form-container", resourcesFormContainer: "k-resources-form-container", message: "k-popup-message", buttonsContainer: "k-edit-buttons k-state-default", button: "k-button", editField: "k-edit-field", editLabel: "k-edit-label", resourcesField: "k-gantt-resources" }, toolbar: { headerWrapper: "k-floatwrap k-header k-gantt-toolbar", footerWrapper: "k-floatwrap k-header k-gantt-toolbar", toolbar: "k-gantt-toolbar", expanded: "k-state-expanded", views: "k-gantt-views", viewsWrapper: "k-reset k-header k-gantt-views", actions: "k-gantt-actions", button: "k-button k-button-icontext", buttonToggle: "k-button k-button-icon k-gantt-toggle", iconPlus: "k-icon k-i-plus", iconPdf: "k-icon k-i-file-pdf", iconToggle: "k-icon k-i-layout-1-by-4", viewButtonDefault: "k-state-default", viewButton: "k-view", currentView: "k-current-view", link: "k-link", pdfButton: "k-gantt-pdf", appendButton: "k-gantt-create" } } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.treelist.min", ["kendo.dom.min", "kendo.data.min", "kendo.columnsorter.min", "kendo.editable.min", "kendo.window.min", "kendo.filtermenu.min", "kendo.selectable.min", "kendo.resizable.min", "kendo.treeview.draganddrop.min"], function () { return function (e, t) { function i(e) { return function (t) { return t[e] } } function n(e) { return function (t) { return !e(t) } } function o() { return "none" !== this.style.display } function r(i) { var n, o = i.find(">tr:not(.k-filter-row)"), r = function () { var t = e(this); return !t.hasClass("k-group-cell") && !t.hasClass("k-hierarchy-cell") }, s = e(); return o.length > 1 && (s = o.find("th").filter(r).filter(function () { return this.rowSpan > 1 })), s = s.add(o.last().find("th").filter(r)), n = kendo.attr("index"), s.sort(function (i, o) { var r, s; return i = e(i), o = e(o), r = i.attr(n), s = o.attr(n), r === t && (r = e(i).index()), s === t && (s = e(o).index()), r = parseInt(r, 10), s = parseInt(s, 10), r > s ? 1 : r < s ? -1 : 0 }), s } function s(e) { var t, i, n = [], o = e.className; for (t = 0, i = e.level; t < i; t++)n.push(m("span", { className: o })); return n } function a(e) { var t, i, n, o = 0; for (i = 0, n = e.length; i < n; i++)(t = e[i].style.width) && -1 == t.indexOf("%") && (o += parseInt(t, 10)); return o } var l, c, d, u, h = kendo.data, f = e.extend, p = kendo.dom, m = p.element, g = p.text, v = p.html, _ = kendo._outerWidth, b = kendo._outerHeight, w = kendo.ui, y = w.DataBoundWidget, k = h.DataSource, x = h.ObservableArray, C = h.Query, S = h.Model, T = e.proxy, D = e.map, A = e.grep, E = e.inArray, I = e.isPlainObject, M = Array.prototype.push, R = "string", F = "change", z = "error", P = "progress", B = ".", L = ".kendoTreeList", H = "click", N = "edit", O = "save", V = "expand", U = "collapse", W = "remove", q = "dataBinding", j = "dataBound", G = "cancel", $ = "filterMenuInit", Y = "columnHide", K = "columnShow", Q = "columnReorder", X = "columnResize", Z = "columnMenuInit", J = "columnLock", ee = "columnUnlock", te = "parentId", ie = "dragstart", ne = "dragend", oe = { wrapper: "k-treelist k-grid k-widget k-display-block", header: "k-header", button: "k-button", alt: "k-alt", editCell: "k-edit-cell", group: "k-treelist-group", gridToolbar: "k-grid-toolbar", gridHeader: "k-grid-header", gridHeaderWrap: "k-grid-header-wrap", gridContent: "k-grid-content", gridContentWrap: "k-grid-content", gridFilter: "k-grid-filter", footerTemplate: "k-footer-template", loading: "k-i-loading", refresh: "k-i-reload", retry: "k-request-retry", selected: "k-state-selected", status: "k-status", link: "k-link", withIcon: "k-with-icon", filterable: "k-filterable", icon: "k-icon", iconFilter: "k-i-filter", iconCollapse: "k-i-collapse", iconExpand: "k-i-expand", iconHidden: "k-i-none", iconPlaceHolder: "k-icon k-i-none", input: "k-input", dropPositions: "k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle", dropTop: "k-i-insert-up", dropBottom: "k-i-insert-down", dropAdd: "k-i-plus", dropMiddle: "k-i-insert-middle", dropDenied: "k-i-cancel", dragStatus: "k-drag-status", dragClue: "k-drag-clue", dragClueText: "k-clue-text" }, re = { create: { imageClass: "k-i-plus", className: "k-grid-add", methodName: "addRow" }, createchild: { imageClass: "k-i-plus", className: "k-grid-add", methodName: "addRow" }, destroy: { imageClass: "k-i-close", className: "k-grid-delete", methodName: "removeRow" }, edit: { imageClass: "k-i-edit", className: "k-grid-edit", methodName: "editRow" }, update: { imageClass: "k-i-check", className: "k-primary k-grid-update", methodName: "saveRow" }, canceledit: { imageClass: "k-i-cancel", className: "k-grid-cancel", methodName: "_cancelEdit" }, excel: { imageClass: "k-i-file-excel", className: "k-grid-excel", methodName: "saveAsExcel" }, pdf: { imageClass: "k-i-file-pdf", className: "k-grid-pdf", methodName: "saveAsPDF" } }, se = S.define({ id: "id", parentId: te, fields: { id: { type: "number" }, parentId: { type: "number", nullable: !0 } }, init: function (e) { S.fn.init.call(this, e), this._loaded = !1, this.parentIdField || (this.parentIdField = te), this.parentId = this.get(this.parentIdField) }, accept: function (e) { S.fn.accept.call(this, e), this.parentId = this.get(this.parentIdField) }, set: function (e, t, i) { e == te && this.parentIdField != te && (this[this.parentIdField] = t), S.fn.set.call(this, e, t, i), e == this.parentIdField && (this.parentId = this.get(this.parentIdField)) }, loaded: function (e) { return e === t ? this._loaded : (this._loaded = e, t) }, shouldSerialize: function (e) { return S.fn.shouldSerialize.call(this, e) && "_loaded" !== e && "_error" != e && "_edit" != e && !("parentId" !== this.parentIdField && "parentId" === e) } }); se.parentIdField = te, se.define = function (e, i) { var n, o; return i === t && (i = e, e = se), n = i.parentId || te, i.parentIdField = n, o = S.define(e, i), n && (o.parentIdField = n), o }, (l = k.extend({ init: function (e) { k.fn.init.call(this, f(!0, {}, { schema: { modelBase: se, model: se } }, e)) }, _createNewModel: function (e) { var t = {}, i = e instanceof S; return i && (t = e), t = k.fn._createNewModel.call(this, t), i || (e.parentId && (e[t.parentIdField] = e.parentId), t.accept(e)), t }, _shouldWrap: function () { return !0 }, _push: function (e, t) { var i = k.fn._readData.call(this, e); i || (i = e), this[t](i) }, _readData: function (e) { var t = this.data(); return e = k.fn._readData.call(this, e), this._replaceData(t.toJSON().concat(e), t), e instanceof x ? e : t }, _replaceData: function (e, t) { var i, n = e.length; for (i = 0; i < n; i++)t[i] = e[i]; t.length = n }, _readAggregates: function (e) { var t = f(this._aggregateResult, this.reader.aggregates(e)); return "" in t && (t[this._defaultParentId()] = t[""], delete t[""]), t }, remove: function (e) { var t = this._subtree(this._childrenMap(this.data()), e.id); this._removeItems(t), k.fn.remove.call(this, e) }, _filterCallback: function (e) { var t, i, n = {}, o = [], r = e.toArray(); for (t = 0; t < r.length; t++)for (i = r[t]; i && (n[i.id] || (n[i.id] = !0, o.push(i)), !n[i.parentId]);)n[i.parentId] = !0, (i = this.parentNode(i)) && o.push(i); return new C(o) }, _subtree: function (e, t) { var i, n, o = e[t] || [], r = this._defaultParentId(); for (i = 0, n = o.length; i < n; i++)o[i].id !== r && (o = o.concat(this._subtree(e, o[i].id))); return o }, _childrenMap: function (e) { var t, i, n, o, r = {}; for (e = this._observeView(e), t = 0; t < e.length; t++)i = e[t], n = i.id, o = i.parentId, r[n] = r[n] || [], r[o] = r[o] || [], r[o].push(i); return r }, _calculateAggregates: function (e, t) { var i, n, o, r, s, a; for (i = {}, (s = (t = t || {}).filter) && (e = C.process(e, { filter: s, filterCallback: T(this._filterCallback, this) }).data), a = this._childrenMap(e), i[this._defaultParentId()] = new C(this._subtree(a, this._defaultParentId())).aggregate(t.aggregate), r = 0; r < e.length; r++)n = e[r], o = this._subtree(a, n.id), i[n.id] = new C(o).aggregate(t.aggregate); return i }, _queryProcess: function (e, t) { var i, n, o, r, s, a, l; for ((t = t || {}).filterCallback = T(this._filterCallback, this), i = this._defaultParentId(), n = C.process(e, t), o = this._childrenMap(n.data), e = o[i] || [], s = 0; s < e.length; s++)(a = e[s]).id !== i && (l = o[a.id], r = !(!l || !l.length), a.loaded() || a.loaded(r || !a.hasChildren), (a.loaded() || !0 !== a.hasChildren) && (a.hasChildren = r), r && (e = e.slice(0, s + 1).concat(l, e.slice(s + 1)))); return n.data = e, n }, _queueRequest: function (e, t) { t.call(this) }, _modelLoaded: function (e) { var t = this.get(e); t.loaded(!0), t.hasChildren = this.childNodes(t).length > 0 }, _modelError: function (e, t) { this.get(e)._error = t }, success: function (e, i) { return i && t !== i.id || (this._data = this._observe([])), k.fn.success.call(this, e, i) }, load: function (t) { var i = "_query", n = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates, o = e.Deferred().resolve().promise(); if (t.loaded()) { if (n) return o } else t.hasChildren && (i = "read"); return this[i]({ id: t.id }).done(T(this._modelLoaded, this, t.id)).fail(T(this._modelError, this, t.id)) }, contains: function (e, t) { for (var i = e.id; t;) { if (t.parentId === i) return !0; t = this.parentNode(t) } return !1 }, _byParentId: function (e, t) { var i, n, o = [], r = this.view(); if (e === t) return []; for (n = 0; n < r.length; n++)(i = r.at(n)).parentId == e && o.push(i); return o }, _defaultParentId: function () { return this.reader.model.fn.defaults[this.reader.model.parentIdField] }, childNodes: function (e) { return this._byParentId(e.id, this._defaultParentId()) }, rootNodes: function () { return this._byParentId(this._defaultParentId()) }, parentNode: function (e) { return this.get(e.parentId) }, level: function (e) { var t = -1; e instanceof se || (e = this.get(e)); do { e = this.parentNode(e), t++ } while (e); return t }, filter: function (e) { var i = k.fn.filter; return e === t ? i.call(this, e) : (i.call(this, e), t) } })).create = function (t) { return e.isArray(t) ? t = { data: t } : t instanceof x && (t = { data: t.toJSON() }), t instanceof l ? t : new l(t) }, c = kendo.Observable.extend({ init: function (e, t) { kendo.Observable.fn.init.call(this), t = this.options = f(!0, {}, this.options, t), this.element = e, this.bind(this.events, t), this.model = this.options.model, this.fields = this._fields(this.options.columns), this._initContainer(), this.createEditable() }, events: [], _initContainer: function () { this.wrapper = this.element }, createEditable: function () { var e = this.options; this.editable = new w.Editable(this.wrapper, { fields: this.fields, target: e.target, clearContainer: e.clearContainer, model: this.model }) }, _isEditable: function (e) { return e.field && this.model.editable(e.field) }, _fields: function (e) { var t, i, n, o = []; for (t = 0, i = e.length; t < i; t++)n = e[t], this._isEditable(n) && o.push({ field: n.field, format: n.format, editor: n.editor }); return o }, end: function () { return this.editable.end() }, close: function () { this.destroy() }, destroy: function () { this.editable.destroy(), this.editable.element.find("[" + kendo.attr("container-for") + "]").empty().end().removeAttr(kendo.attr("role")), this.model = this.wrapper = this.element = this.columns = this.editable = null } }), d = c.extend({ init: function (e, t) { c.fn.init.call(this, e, t), this._attachHandlers(), kendo.cycleForm(this.wrapper), this.open() }, events: [G, O], options: { window: { modal: !0, resizable: !1, draggable: !0, title: "Edit", visible: !1 } }, _initContainer: function () { var t = this.options, i = []; this.wrapper = e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"), this.model.uid).append('<div class="k-edit-form-container"/>'), t.template ? (this._appendTemplate(i), this.fields = []) : this._appendFields(i), this._appendButtons(i), new p.Tree(this.wrapper.children()[0]).render(i), this.wrapper.appendTo(t.appendTo), this.window = new w.Window(this.wrapper, t.window) }, _appendTemplate: function (e) { var t = this.options.template; typeof t === R && (t = window.unescape(t)), t = kendo.template(t)(this.model), e.push(v(t)) }, _appendFields: function (e) { var t, i, n, o = this.options.columns; for (t = 0, i = o.length; t < i; t++)(n = o[t]).command || (e.push(v('<div class="k-edit-label"><label for="' + n.field + '">' + (n.title || n.field || "") + "</label></div>")), e.push(this._isEditable(n) ? v("<div " + kendo.attr("container-for") + '="' + n.field + '" class="k-edit-field"></div>') : m("div", { class: "k-edit-field" }, [this.options.fieldRenderer(n, this.model)]))) }, _appendButtons: function (e) { e.push(m("div", { class: "k-edit-buttons k-state-default" }, this.options.commandRenderer())) }, _attachHandlers: function () { var e = this._cancelProxy = T(this._cancel, this); this.wrapper.on(H + L, ".k-grid-cancel", this._cancelProxy), this._saveProxy = T(this._save, this), this.wrapper.on(H + L, ".k-grid-update", this._saveProxy), this.window.bind("close", function (t) { t.userTriggered && e(t) }) }, _dettachHandlers: function () { this._cancelProxy = null, this._saveProxy = null, this.wrapper.off(L) }, _cancel: function (e) { this.trigger(G, e) }, _save: function () { this.trigger(O) }, open: function () { this.window.center().open() }, close: function () { this.window.bind("deactivate", T(this.destroy, this)).close() }, destroy: function () { this.window.destroy(), this.window = null, this._dettachHandlers(), c.fn.destroy.call(this) } }), u = y.extend({ init: function (t, i) { if (y.fn.init.call(this, t, i), this._dataSource(this.options.dataSource), this._columns(), this._layout(), this._selectable(), this._sortable(), this._resizable(), this._filterable(), this._attachEvents(), this._toolbar(), this._scrollable(), this._reorderable(), this._columnMenu(), this._minScreenSupport(), this._draggable(), this.options.autoBind && this.dataSource.fetch(), this._hasLockedColumns) { var n = this; this.wrapper.addClass("k-grid-lockedcolumns"), this._resizeHandler = function () { n.resize() }, e(window).on("resize" + L, this._resizeHandler) } kendo.notify(this) }, _draggable: function () { var t = this.options.editable; t && t.move && (this._dragging = new kendo.ui.HierarchicalDragAndDrop(this.wrapper, { $angular: this.$angular, autoScroll: !0, filter: "tbody>tr", itemSelector: "tr", allowedContainers: this.wrapper, hintText: function (t) { return t.children("td").map(function () { return e(this).text() }).toArray().join("<span class='k-header k-drag-separator' />") }, contains: T(function (e, t) { var i = this.dataItem(t), n = this.dataItem(e); return n == i || this.dataSource.contains(n, i) }, this), itemFromTarget: function (e) { var t = e.closest("tr"); return { item: t, content: t } }, dragstart: T(function (e) { this.wrapper.addClass("k-treelist-dragging"); var t = this.dataItem(e); return this.trigger(ie, { source: t }) }, this), drag: T(function (e) { e.source = this.dataItem(e.source), this.trigger("drag", e) }, this), drop: T(function (e) { return e.source = this.dataItem(e.source), e.destination = this.dataItem(e.destination), this.wrapper.removeClass("k-treelist-dragging"), this.trigger("drop", e) }, this), dragend: T(function (e) { var t = this.dataItem(e.destination), i = this.dataItem(e.source); i.set("parentId", t ? t.id : null), e.source = i, e.destination = t, this.trigger(ne, e) }, this), reorderable: !1, dropHintContainer: function (e) { return e.children("td:eq(1)") }, dropPositionFrom: function (e) { return e.prevAll(".k-i-none").length > 0 ? "after" : "before" } })) }, itemFor: function (e) { return "number" == typeof e && (e = this.dataSource.get(e)), this.tbody.find("[" + kendo.attr("uid") + "=" + e.uid + "]") }, _scrollable: function () { var t, i, n; this.options.scrollable && (t = this.thead.closest(".k-grid-header-wrap"), i = e(this.lockedContent).bind("DOMMouseScroll" + L + " mousewheel" + L, T(this._wheelScroll, this)), this.content.bind("scroll" + L, function () { t.scrollLeft(this.scrollLeft), i.scrollTop(this.scrollTop) }), (n = kendo.touchScroller(this.content)) && n.movable && (this._touchScroller = n, n.movable.bind("change", function (e) { t.scrollLeft(-e.sender.x), i && i.scrollTop(-e.sender.y) }))) }, _wheelScroll: function (t) { var i, n; t.ctrlKey || (i = kendo.wheelDeltaY(t), n = e(t.currentTarget), i && (n[0].scrollHeight > n[0].clientHeight && (n[0].scrollTop < n[0].scrollHeight - n[0].clientHeight && i < 0 || n[0].scrollTop > 0 && i > 0) && t.preventDefault(), n.one("wheel" + L, !1), this.content.scrollTop(this.content.scrollTop() + -i))) }, _progress: function () { var e = this.options.messages; this.tbody.find("tr").length || this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({ className: oe.icon + " " + oe.loading, messages: e })) }, _error: function (e) { this.dataSource.rootNodes().length || this._render({ error: e }) }, refresh: function (e) { "itemchange" == (e = e || {}).action && this.editor || this.trigger(q) || (this._cancelEditor(), this._render(), this._adjustHeight(), this.trigger(j)) }, _angularFooters: function (e) { var t, i, n, o = this.dataSource.aggregates(), r = this._footerItems(); for (t = 0; t < r.length; t++)i = r.eq(t), n = o[i.attr("data-parentId")], this._angularFooter(e, i.find("td").get(), n) }, _angularFooter: function (e, t, i) { var n = this.columns; this.angular(e, function () { return { elements: t, data: D(n, function (e) { return { column: e, aggregate: i && i[e.field] } }) } }) }, items: function () { return this._hasLockedColumns ? this._items(this.tbody).add(this._items(this.lockedTable)) : this._items(this.tbody) }, _items: function (t) { return t.find("tr").filter(function () { return !e(this).hasClass(oe.footerTemplate) }) }, _footerItems: function () { var t = this.tbody; return this._hasLockedColumns && (t = t.add(this.lockedTable)), t.find("tr").filter(function () { return e(this).hasClass(oe.footerTemplate) }) }, dataItems: function () { var e, t, i, n = kendo.ui.DataBoundWidget.fn.dataItems.call(this); if (this._hasLockedColumns) { for (e = n.length, t = Array(2 * e), i = e; --i >= 0;)t[i] = t[i + e] = n[i]; n = t } return n }, _showStatus: function (t) { var i = this.element.find(".k-status"), n = e(this.content).add(this.lockedContent); i.length || (i = e("<div class='k-status' />").appendTo(this.element)), this._contentTree.render([]), this._hasLockedColumns && this._lockedContentTree.render([]), n.hide(), i.html(t) }, _hideStatus: function () { this.element.find(".k-status").remove(), e(this.content).add(this.lockedContent).show() }, _adjustHeight: function () { var e, t = this.element, i = t.find(B + oe.gridContentWrap), n = t.find(B + oe.gridHeader), o = t.find(B + oe.gridToolbar), r = kendo.support.scrollbar(); t.height(this.options.height), function (e) { var t, i; return !!e[0].style.height || (t = e.height(), e.height("auto"), i = e.height(), e.height(""), t != i) }(t) && (e = t.height() - b(n) - b(o), i.height(e), this._hasLockedColumns && (r = this.table[0].offsetWidth > this.table.parent()[0].clientWidth ? r : 0, this.lockedContent.height(e - r))) }, _resize: function () { this._applyLockedContainersWidth(), this._adjustHeight() }, _minScreenSupport: function () { var t = this.hideMinScreenCols(); t && (this.minScreenResizeHandler = T(this.hideMinScreenCols, this), e(window).on("resize", this.minScreenResizeHandler)) }, hideMinScreenCols: function () { var e, i, n, o = this.columns, r = !1, s = window.innerWidth > 0 ? window.innerWidth : screen.width; for (e = 0; e < o.length; e++)i = o[e], (n = i.minScreenWidth) !== t && null !== n && (r = !0, n > s ? this.hideColumn(i) : this.showColumn(i)); return r }, destroy: function () { y.fn.destroy.call(this); var t = this.dataSource; t.unbind(F, this._refreshHandler), t.unbind(z, this._errorHandler), t.unbind(P, this._progressHandler), this._resizeHandler && e(window).off("resize" + L, this._resizeHandler), this._dragging && (this._dragging.destroy(), this._dragging = null), this.resizable && (this.resizable.destroy(), this.resizable = null), this.reorderable && (this.reorderable.destroy(), this.reorderable = null), this._draggableInstance && this._draggableInstance.element && (this._draggableInstance.destroy(), this._draggableInstance = null), this.minScreenResizeHandler && e(window).off("resize", this.minScreenResizeHandler), this._destroyEditor(), this.element.off(L), this._touchScroller && this._touchScroller.destroy(), this._autoExpandable = null, this._refreshHandler = this._errorHandler = this._progressHandler = this._dataSourceFetchProxy = null, this.thead = this.content = this.tbody = this.table = this.element = this.lockedHeader = this.lockedContent = null, this._statusTree = this._headerTree = this._contentTree = this._lockedHeaderColsTree = this._lockedContentColsTree = this._lockedHeaderTree = this._lockedContentTree = null }, options: { name: "TreeList", columns: [], autoBind: !0, scrollable: !0, selectable: !1, sortable: !1, toolbar: null, height: null, columnMenu: !1, messages: { noRows: "No records to display", loading: "Loading...", requestFailed: "Request failed.", retry: "Retry", commands: { edit: "Edit", update: "Update", canceledit: "Cancel", create: "Add new record", createchild: "Add child record", destroy: "Delete", excel: "Export to Excel", pdf: "Export to PDF" } }, excel: { hierarchy: !0 }, resizable: !1, filterable: !1, editable: !1, reorderable: !1 }, events: [F, N, O, W, V, U, q, j, G, ie, "drag", "drop", ne, $, Y, K, Q, X, Z, J, ee], _toggle: function (i, n) { var o = e.Deferred().resolve().promise(), r = i.loaded(); return i._error && (i.expanded = !1, i._error = t), !r && i.expanded ? o : (t === n && (n = !i.expanded), i.expanded = n, r || (o = this.dataSource.load(i).always(T(function () { this._render(), this._syncLockedContentHeight() }, this))), this._render(), this._syncLockedContentHeight(), o) }, expand: function (e) { return this._toggle(this.dataItem(e), !0) }, collapse: function (e) { return this._toggle(this.dataItem(e), !1) }, _toggleChildren: function (t) { var i = e(t.currentTarget), n = this.dataItem(i), o = n.expanded ? U : V; this.trigger(o, { model: n }) || this._toggle(n), t.preventDefault() }, _attachEvents: function () { var e = B + oe.iconCollapse + ", ." + oe.iconExpand + ", ." + oe.refresh, t = B + oe.retry; this.element.on("mousedown" + L, e, T(this._toggleChildren, this)).on(H + L, t, this._dataSourceFetchProxy).on(H + L, ".k-button[data-command]", T(this._commandClick, this)) }, _commandByName: function (t) { var i, n, o, r, s = this.columns, a = e.isArray(this.options.toolbar) ? this.options.toolbar : []; if (t = t.toLowerCase(), re[t]) return re[t]; for (i = 0; i < s.length; i++)if (o = s[i].command) for (n = 0; n < o.length; n++)if ((r = o[n].name) && r.toLowerCase() == t) return o[n]; for (i = 0; i < a.length; i++)if ((r = a[i].name) && r.toLowerCase() == t) return a[i] }, _commandClick: function (i) { var n = e(i.currentTarget), o = n.attr("data-command"), r = this._commandByName(o), s = n.parentsUntil(this.wrapper, "tr"); s = s.length ? s : t, r && (r.methodName ? this[r.methodName](s) : r.click && r.click.call(this, i), i.preventDefault()) }, _ensureExpandableColumn: function () { var e, t; this._autoExpandable && delete this._autoExpandable.expandable, e = A(this.columns, n(i("hidden"))), t = A(e, i("expandable")), this.columns.length && !t.length && (this._autoExpandable = e[0], e[0].expandable = !0) }, _columns: function () { var e, t = this.options.columns || []; this.columns = D(t, function (e) { return f({ encoded: !0 }, e = "string" == typeof e ? { field: e } : e) }), (e = this._lockedColumns()).length > 0 && (this._hasLockedColumns = !0, this.columns = e.concat(this._nonLockedColumns())), this._ensureExpandableColumn(), this._columnTemplates(), this._columnAttributes() }, _columnTemplates: function () { var e, t, i, n = this.columns; for (e = 0, t = n.length; e < t; e++)(i = n[e]).template && (i.template = kendo.template(i.template)), i.headerTemplate && (i.headerTemplate = kendo.template(i.headerTemplate)), i.footerTemplate && (i.footerTemplate = kendo.template(i.footerTemplate)) }, _columnAttributes: function () { function t(t) { var i, n, o, r; if (t && t.style) for (i = t.style.split(";"), t.style = {}, n = 0; n < i.length; n++)o = i[n].split(":"), (r = e.trim(o[0])) && (t.style[e.camelCase(r)] = e.trim(o[1])) } var i, n, o = this.columns; for (i = 0, n = o.length; i < n; i++)t(o[i].attributes), t(o[i].headerAttributes) }, _layout: function () { var e, t, i, n = this.columns, o = this.element, r = ""; this.wrapper = o.addClass(oe.wrapper), r = "<div class='#= gridHeader #'>", this._hasLockedColumns && (r += "<div class='k-grid-header-locked'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div>"), r += "<div class='#= gridHeaderWrap #'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div></div>", this._hasLockedColumns && (r += "<div class='k-grid-content-locked'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>"), r += "<div class='#= gridContentWrap # k-auto-scrollable'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>", this.options.scrollable || (r = "<table role='treegrid' tabindex='0'><colgroup></colgroup><thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"), this.options.toolbar && (r = "<div class='#= header # #= gridToolbar #' />" + r), o.append(kendo.template(r)(oe) + "<div class='k-status' />"), this.toolbar = o.find(B + oe.gridToolbar), e = o.find(B + oe.gridHeader).find("thead").addBack().filter("thead"), this.thead = e.last(), this.options.scrollable && (t = kendo.support.isRtl(o), o.find("div." + oe.gridHeader).css(t ? "padding-left" : "padding-right", kendo.support.scrollbar())), (i = o.find(B + oe.gridContentWrap)).length ? this.content = i : i = o, this.table = i.find(">table"), this.tbody = this.table.find(">tbody"), this._hasLockedColumns && (this.lockedHeader = e.first().closest(".k-grid-header-locked"), this.lockedContent = o.find(".k-grid-content-locked"), this.lockedTable = this.lockedContent.children()), this._initVirtualTrees(), this._renderCols(), this._renderHeader(), this.angular("compile", function () { return { elements: e.find("th.k-header").get(), data: D(n, function (e) { return { column: e } }) } }) }, _initVirtualTrees: function () { this._headerColsTree = new p.Tree(this.thead.prev()[0]), this._contentColsTree = new p.Tree(this.tbody.prev()[0]), this._headerTree = new p.Tree(this.thead[0]), this._contentTree = new p.Tree(this.tbody[0]), this._statusTree = new p.Tree(this.element.children(".k-status")[0]), this.lockedHeader && (this._lockedHeaderColsTree = new p.Tree(this.lockedHeader.find("colgroup")[0]), this._lockedContentColsTree = new p.Tree(this.lockedTable.find(">colgroup")[0]), this._lockedHeaderTree = new p.Tree(this.lockedHeader.find("thead")[0]), this._lockedContentTree = new p.Tree(this.lockedTable.find(">tbody")[0])) }, _toolbar: function () { var t, i = this.options.toolbar, n = this.toolbar; i && (e.isArray(i) ? (t = this._buildCommands(i), new p.Tree(n[0]).render(t)) : n.append(kendo.template(i)({})), this.angular("compile", function () { return { elements: n.get() } })) }, _lockedColumns: function () { return A(this.columns, i("locked")) }, _nonLockedColumns: function () { return A(this.columns, n(i("locked"))) }, _templateColumns: function () { return A(this.columns, i("template")) }, _flushCache: function () { this.options.$angular && this._templateColumns().length && (this._contentTree.render([]), this._hasLockedColumns && this._lockedContentTree.render([])) }, _render: function (t) { var i, n, o, r; t = t || {}, i = this.options.messages, n = this.dataSource.rootNodes(), o = kendo.attr("uid"), r = this.select().removeClass("k-state-selected").map(function (t, i) { return e(i).attr(o) }), this._absoluteIndex = 0, this._angularItems("cleanup"), this._angularFooters("cleanup"), this._flushCache(), t.error ? this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({ buttonClass: [oe.button, oe.retry].join(" "), messages: i })) : n.length ? (this._hideStatus(), this._contentTree.render(this._trs({ columns: this._nonLockedColumns(), aggregates: t.aggregates, selected: r, data: n, visible: !0, level: 0 })), this._hasLockedColumns && (this._absoluteIndex = 0, this._lockedContentTree.render(this._trs({ columns: this._lockedColumns(), aggregates: t.aggregates, selected: r, data: n, visible: !0, level: 0 })))) : this._showStatus(kendo.htmlEncode(i.noRows)), this._touchScroller && this._touchScroller.contentResized(), this._muteAngularRebind(function () { this._angularItems("compile"), this._angularFooters("compile") }), this.items().filter(function () { return e.inArray(e(this).attr(o), r) >= 0 }).addClass("k-state-selected"), this._adjustRowsHeight() }, _adjustRowsHeight: function () { var e, t, i, n, o, r, s, a, l, c, d, u, h, f; if (this._hasLockedColumns) { for (e = this.table, t = this.lockedTable, i = e[0].rows, n = i.length, r = t[0].rows, s = e.add(t), a = s.length, l = [], c = this.lockedHeader.find("tr"), d = this.thead.find("tr"), c.add(d).height("auto").height(Math.max(c.height(), d.height())), o = 0; o < n && r[o]; o++)i[o].style.height && (i[o].style.height = r[o].style.height = ""); for (o = 0; o < n && r[o]; o++)u = i[o].offsetHeight, h = r[o].offsetHeight, f = 0, u > h ? f = u : u < h && (f = h), l.push(f); for (o = 0; o < a; o++)s[o].style.display = "none"; for (o = 0; o < n; o++)l[o] && (i[o].style.height = r[o].style.height = l[o] + 1 + "px"); for (o = 0; o < a; o++)s[o].style.display = "" } }, _ths: function (e) { var t, i, n, o, r, s, a, l, c = []; for (a = 0, l = e.length; a < l; a++)t = e[a], n = [], o = [oe.header], i = t.headerTemplate ? t.headerTemplate({}) : t.title || t.field || "", s = t.headerTemplate ? v(i) : g(i), n.push(t.sortable ? m("a", { href: "#", className: oe.link }, [s]) : s), r = { "data-field": t.field, "data-title": t.title, style: !0 === t.hidden ? { display: "none" } : {}, className: o.join(" "), role: "columnheader" }, r = f(!0, {}, r, t.headerAttributes), c.push(m("th", r, n)); return c }, _cols: function (e) { var t, i, n, o = []; for (n = 0; n < e.length; n++)!0 !== e[n].hidden && (t = e[n].width, i = {}, t && 0 !== parseInt(t, 10) && (i.style = { width: "string" == typeof t ? t : t + "px" }), o.push(m("col", i))); return o }, _renderCols: function () { var e = this._nonLockedColumns(); this._headerColsTree.render(this._cols(e)), this.options.scrollable && this._contentColsTree.render(this._cols(e)), this._hasLockedColumns && (e = this._lockedColumns(), this._lockedHeaderColsTree.render(this._cols(e)), this._lockedContentColsTree.render(this._cols(e))) }, _renderHeader: function () { var e = this._nonLockedColumns(); this._headerTree.render([m("tr", { role: "row" }, this._ths(e))]), this._hasLockedColumns && (e = this._lockedColumns(), this._lockedHeaderTree.render([m("tr", { role: "row" }, this._ths(e))]), this._applyLockedContainersWidth()) }, _applyLockedContainersWidth: function () { var e, t, i, n, o, r; this._hasLockedColumns && (e = a(this.lockedHeader.find(">table>colgroup>col")), t = this.thead.parent(), i = a(t.find(">colgroup>col")), n = this.wrapper[0].clientWidth, o = kendo.support.scrollbar(), e >= n && (e = n - 3 * o), this.lockedHeader.add(this.lockedContent).width(e), t.add(this.table).width(i), r = n - e - 2, this.content.width(r), t.parent().width(r - o)) }, _trs: function (t) { var i, n, o, r, s, a, l, c = [], d = t.level, u = t.data, h = this.dataSource, f = h.aggregates() || {}, p = t.columns; for (a = 0, l = u.length; a < l; a++)o = [], i = u[a], s = i.loaded() && h.childNodes(i), r = s && s.length, (n = { role: "row" })[kendo.attr("uid")] = i.uid, r && (n["aria-expanded"] = !!i.expanded), t.visible ? (this._absoluteIndex % 2 != 0 && o.push(oe.alt), this._absoluteIndex++) : n.style = { display: "none" }, e.inArray(i.uid, t.selected) >= 0 && o.push(oe.selected), r && o.push(oe.group), i._edit && o.push("k-grid-edit-row"), n.className = o.join(" "), c.push(this._tds({ model: i, attr: n, level: d }, p, T(this._td, this))), r && (c = c.concat(this._trs({ columns: p, aggregates: f, selected: t.selected, visible: t.visible && !!i.expanded, data: s, level: d + 1 }))); return this._hasFooterTemplate() && (n = { className: oe.footerTemplate, "data-parentId": i.parentId }, t.visible || (n.style = { display: "none" }), c.push(this._tds({ model: f[i.parentId], attr: n, level: d }, p, this._footerTd))), c }, _footerTd: function (t) { var i = [], n = t.column, o = t.column.footerTemplate || e.noop, r = t.model[n.field] || {}, a = { role: "gridcell", style: !0 === n.hidden ? { display: "none" } : {} }; return n.expandable && (i = i.concat(s({ level: t.level + 1, className: oe.iconPlaceHolder }))), n.attributes && f(a, n.attributes), i.push(v(o(r) || "")), m("td", a, i) }, _hasFooterTemplate: function () { return !!A(this.columns, function (e) { return e.footerTemplate }).length }, _tds: function (e, t, i) { var n, o, r, s = []; for (o = 0, r = t.length; o < r; o++)n = t[o], s.push(i({ model: e.model, column: n, level: e.level })); return m("tr", e.attr, s) }, _td: function (e) { var t, i = [], n = e.model, o = e.column, r = { role: "gridcell", style: !0 === o.hidden ? { display: "none" } : {} }; return n._edit && o.field && n.editable(o.field) ? r[kendo.attr("container-for")] = o.field : (o.expandable && (i = s({ level: e.level, className: oe.iconPlaceHolder }), (t = [oe.icon]).push(n.hasChildren ? n.expanded ? oe.iconCollapse : oe.iconExpand : oe.iconHidden), n._error ? t.push(oe.refresh) : !n.loaded() && n.expanded && t.push(oe.loading), i.push(m("span", { className: t.join(" ") })), r.style["white-space"] = "nowrap"), o.attributes && f(!0, r, o.attributes), o.command ? i = this._buildCommands(n._edit ? ["update", "canceledit"] : o.command) : i.push(this._cellContent(o, n))), m("td", r, i) }, _cellContent: function (e, i) { var n; return e.template ? n = e.template(i) : e.field && (null !== (n = i.get(e.field)) && e.format && (n = kendo.format(e.format, n))), null !== n && t !== n || (n = ""), e.template || !e.encoded ? v(n) : g(n) }, _buildCommands: function (e) { var t, i = []; for (t = 0; t < e.length; t++)i.push(this._button(e[t])); return i }, _button: function (e) { var t = (e.name || e).toLowerCase(), i = this.options.messages.commands[t], n = []; return (e = f({}, re[t], { text: i }, e)).imageClass && n.push(m("span", { className: ["k-icon", e.imageClass].join(" ") })), m("button", { type: "button", "data-command": t, className: ["k-button k-button-icontext", e.className].join(" ") }, n.concat([g(e.text || e.name)])) }, _positionResizeHandle: function (i) { var n, o, r = e(i.currentTarget), s = this.resizeHandle, a = r.position(), l = a.left, c = _(r), d = r.closest("div"), u = i.clientX + e(window).scrollLeft(), h = this.options.columnResizeHandleWidth || 3; return l += d.scrollLeft(), s || (s = this.resizeHandle = e('<div class="k-resize-handle"><div class="k-resize-handle-inner" /></div>')), n = r.offset().left + c, u > n - h && u < n + h ? (d.append(s), s.show().css({ top: a.top, left: l + c - h - 1, height: b(r), width: 3 * h }).data("th", r), o = this, s.off("dblclick" + L).on("dblclick" + L, function () { var t = r.index(); e.contains(o.thead[0], r[0]) && (t += A(o.columns, function (e) { return e.locked && !e.hidden }).length), o.autoFitColumn(t) }), t) : (s.hide(), t) }, autoFitColumn: function (t) { var i, n, s, a, l, c, d, u, h, f, p, m, g, v, b, w, y, k = this, x = k.options, C = k.columns, S = kendo.support.browser, T = k.lockedHeader ? r(k.lockedHeader.find(">table>thead")).filter(o).length : 0; if ((t = "number" == typeof t ? C[t] : I(t) ? A(C, function (e) { return e === t })[0] : A(C, function (e) { return e.field === t })[0]) && !t.hidden) { for (i = E(t, C), a = t.locked, s = a ? k.lockedHeader.children("table") : k.thead.parent(), n = s.find("[data-index='" + i + "']"), c = a ? k.lockedTable : k.table, d = k.footer || e(), k.footer && k.lockedContent && (d = k.footer.children(a ? ".k-grid-footer-locked" : ".k-grid-footer-wrap")), u = d.find("table").first(), k.lockedHeader && T >= i && !a && (i -= T), h = 0; h < C.length && C[h] !== t; h++)C[h].hidden && i--; if (l = x.scrollable ? s.find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + i + ")").add(c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + i + ")")).add(u.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + i + ")")) : c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq(" + i + ")"), f = s.add(c).add(u), p = _(n), l.width(""), f.css("table-layout", "fixed"), l.width("auto"), f.addClass("k-autofitting"), f.css("table-layout", ""), m = Math.ceil(Math.max(_(n), _(c.find("tr").eq(0).children("td:visible").eq(i)), _(u.find("tr").eq(0).children("td:visible").eq(i)))), l.width(m), t.width = m, x.scrollable) { for (g = s.find("col"), b = 0, w = 0, y = g.length; w < y; w += 1) { if (!(v = g[w].style.width) || -1 != v.indexOf("%")) { b = 0; break } b += parseInt(v, 10) } b && f.each(function () { this.style.width = b + "px" }) } S.msie && 8 == S.version && (f.css("display", "inline-table"), setTimeout(function () { f.css("display", "table") }, 1)), f.removeClass("k-autofitting"), k.trigger(X, { column: t, oldWidth: p, newWidth: m }), k._applyLockedContainersWidth(), k._syncLockedContentHeight(), k._syncLockedHeaderHeight() } }, _adjustLockedHorizontalScrollBar: function () { var e = this.table, t = e.parent(), i = e[0].offsetWidth > t[0].clientWidth ? kendo.support.scrollbar() : 0; this.lockedContent.height(t.height() - i) }, _syncLockedContentHeight: function () { this.lockedTable && (this._touchScroller || this._adjustLockedHorizontalScrollBar(), this._adjustRowsHeight(this.table, this.lockedTable)) }, _syncLockedHeaderHeight: function () { var e, t; this.lockedHeader && (e = this.lockedHeader.children("table"), t = this.thead.parent(), this._adjustRowsHeight(e, t), function (e, t) { var i, n, o, r; e = e[0], t = t[0], e.rows.length !== t.rows.length && (i = e.offsetHeight, n = t.offsetHeight, i > n ? (o = t.rows[t.rows.length - 1], r = i - n) : (o = e.rows[e.rows.length - 1], r = n - i), o.style.height = o.offsetHeight + r + "px") }(e, t)) }, _resizable: function () { if (this.options.resizable) { this.resizable && this.resizable.destroy(); var t = this; e(this.lockedHeader).find("thead").add(this.thead).on("mousemove" + L, "th", e.proxy(this._positionResizeHandle, this)), this.resizable = new kendo.ui.Resizable(this.wrapper, { handle: ".k-resize-handle", start: function (i) { var n, o, r = e(i.currentTarget).data("th"), s = "col:eq(" + e.inArray(r[0], r.parent().children().filter(":visible")) + ")"; t.wrapper.addClass("k-grid-column-resizing"), t.lockedHeader && e.contains(t.lockedHeader[0], r[0]) ? (n = t.lockedHeader, o = t.lockedTable) : (n = t.thead.parent(), o = t.table), this.col = o.children("colgroup").find(s).add(n.find(s)), this.th = r, this.startLocation = i.x.location, this.columnWidth = _(r), this.table = this.col.closest("table"), this.totalWidth = this.table.width() }, resize: function (e) { var t = e.x.location - this.startLocation; this.columnWidth + t < 11 && (t = 11 - this.columnWidth), this.table.width(this.totalWidth + t), this.col.width(this.columnWidth + t) }, resizeend: function () { var e, i, n; t.wrapper.removeClass("k-grid-column-resizing"), e = this.th.attr("data-field"), i = A(t.columns, function (t) { return t.field == e }), n = Math.floor(_(this.th)), i[0].width = n, t._resize(), t._adjustRowsHeight(), t.trigger(X, { column: i, oldWidth: this.columnWidth, newWidth: n }), this.table = this.col = this.th = null } }) } }, _sortable: function () { var t, i, n, o, r, s = this.columns, a = e(this.lockedHeader).add(this.thead).find("th"), l = kendo.attr("field"), c = this.options.sortable; if (c) for (o = 0, r = a.length; o < r; o++)!1 !== (t = s[o]).sortable && !t.command && t.field && (n = a.eq(o), (i = n.data("kendoColumnSorter")) && i.destroy(), n.attr(l, t.field).kendoColumnSorter(f({}, c, t.sortable, { dataSource: this.dataSource }))) }, _filterable: function () { var t, i, n, o, r, s, a = e(this.lockedHeader).add(this.thead).find("th"), l = this.options.filterable; if (l && !this.options.columnMenu) for (s = T(function (e) { this.trigger($, { field: e.field, container: e.container }) }, this), t = 0, i = a.length; t < i; t++)n = this.columns[t], o = a.eq(t), (r = o.data("kendoFilterMenu")) && r.destroy(), n.command || !1 === n.filterable || o.kendoFilterMenu(f(!0, {}, l, n.filterable, { dataSource: this.dataSource, init: s })) }, _change: function () { this.trigger(F) }, _selectable: function () { var e, i, n = this.options.selectable, o = this.table; n && (n = kendo.ui.Selectable.parseOptions(n), this._hasLockedColumns && (o = o.add(this.lockedTable), i = n.multiple && n.cell), e = ">tbody>tr:not(.k-footer-template)", n.cell && (e += ">td"), this.selectable = new kendo.ui.Selectable(o, { filter: e, aria: !0, multiple: n.multiple, change: T(this._change, this), useAllItems: i, continuousItems: T(this._continuousItems, this, e, n.cell), relatedTarget: !n.cell && this._hasLockedColumns ? T(this._selectableTarget, this) : t })) }, _continuousItems: function (t, i) { var n, o, r, s, a, l; if (this.lockedContent) { for (n = e(t, this.lockedTable), o = e(t, this.table), r = i ? this._lockedColumns().length : 1, s = i ? this.columns.length - r : 1, a = [], l = 0; l < n.length; l += r)M.apply(a, n.slice(l, l + r)), M.apply(a, o.splice(0, s)); return a } }, _selectableTarget: function (t) { var i, n, o, r = e(); for (n = 0, o = t.length; n < o; n++)i = this._relatedRow(t[n]), E(i[0], t) < 0 && (r = r.add(i)); return r }, _relatedRow: function (t) { var i, n, o = this.lockedTable; return t = e(t), o ? (i = t.closest(this.table.add(this.lockedTable)), n = i.find(">tbody>tr").index(t), (i = i[0] === this.table[0] ? o : this.table).find(">tbody>tr").eq(n)) : t }, select: function (i) { var n = this.selectable; return n ? (t !== i && (n.options.multiple || (n.clear(), i = i.first()), this._hasLockedColumns && (i = i.add(e.map(i, T(this._relatedRow, this))))), n.value(i)) : e() }, clearSelection: function () { var e = this.select(); e.length && (this.selectable.clear(), this.trigger(F)) }, _dataSource: function (e) { var t = this.dataSource; t && (t.unbind(F, this._refreshHandler), t.unbind(z, this._errorHandler), t.unbind(P, this._progressHandler)), this._refreshHandler = T(this.refresh, this), this._errorHandler = T(this._error, this), this._progressHandler = T(this._progress, this), (t = this.dataSource = l.create(e)).bind(F, this._refreshHandler), t.bind(z, this._errorHandler), t.bind(P, this._progressHandler), this._dataSourceFetchProxy = T(function () { this.dataSource.fetch() }, this) }, setDataSource: function (e) { this._dataSource(e), this._sortable(), this._filterable(), this._contentTree.render([]), this.options.autoBind && this.dataSource.fetch() }, dataItem: function (t) { var i; return t instanceof se ? t : (i = e(t).closest("tr"), this.dataSource.getByUid(i.attr(kendo.attr("uid")))) }, editRow: function (e) { var t; typeof e === R && (e = this.tbody.find(e)), (t = this.dataItem(e)) && ("popup" != this._editMode() && (t._edit = !0), this._cancelEditor(), this._render(), this._createEditor(t), this.trigger(N, { container: this.editor.wrapper, model: t })) }, _cancelEdit: function (e) { e = f(e, { container: this.editor.wrapper, model: this.editor.model }), this.trigger(G, e) || this.cancelRow() }, cancelRow: function () { this._cancelEditor(), this._render() }, saveRow: function () { var e, t = this.editor; t && (e = { model: t.model, container: t.wrapper }, t.end() && !this.trigger(O, e) && this.dataSource.sync()) }, addRow: function (e) { var i = this.editor, n = 0, o = {}; if (!i || i.end()) return e ? (e instanceof se || (e = this.dataItem(e)), o[e.parentIdField] = e.id, n = this.dataSource.indexOf(e) + 1, this.expand(e).then(T(this._insertAt, this, o, n)), t) : (this._insertAt(o, n), t) }, _insertAt: function (e, t) { e = this.dataSource.insert(t, e); var i = this.itemFor(e); this.editRow(i) }, removeRow: function (e) { var t = this.dataItem(e), i = { model: t, row: e }; t && !this.trigger(W, i) && (this.dataSource.remove(t), this.dataSource.sync()) }, _cancelEditor: function () { var e, t = this.editor; t && (e = t.model, this._destroyEditor(), this.dataSource.cancelChanges(e), e._edit = !1) }, _destroyEditor: function () { this.editor && (this.editor.close(), this.editor = null) }, _createEditor: function (e) { var t, i, n = this.itemFor(e); n = n.add(this._relatedRow(n)), t = this._editMode(), i = { columns: this.columns, model: e, target: this, clearContainer: !1, template: this.options.editable.template }, "inline" == t ? this.editor = new c(n, i) : (f(i, { window: this.options.editable.window, commandRenderer: T(function () { return this._buildCommands(["update", "canceledit"]) }, this), fieldRenderer: this._cellContent, save: T(this.saveRow, this), cancel: T(this._cancelEdit, this), appendTo: this.wrapper }), this.editor = new d(n, i)) }, _editMode: function () { var e = "inline", t = this.options.editable; return !0 !== t && (e = "string" == typeof t ? t : t.mode || e), e.toLowerCase() }, hideColumn: function (e) { this._toggleColumnVisibility(e, !0) }, showColumn: function (e) { this._toggleColumnVisibility(e, !1) }, _toggleColumnVisibility: function (e, t) { (e = this._findColumn(e)) && e.hidden !== t && (e.hidden = t, this._ensureExpandableColumn(), this._renderCols(), this._renderHeader(), this._render(), this._adjustTablesWidth(), this.trigger(t ? Y : K, { column: e }), t || e.width || this.table.add(this.thead.closest("table")).width("")) }, _findColumn: function (e) { return e = "number" == typeof e ? this.columns[e] : I(e) ? A(this.columns, function (t) { return t === e })[0] : A(this.columns, function (t) { return t.field === e })[0] }, _adjustTablesWidth: function () { var e, t, i, n = this.thead.prev().children(), o = 0; for (e = 0, t = n.length; e < t; e++) { if (!(i = n[e].style.width) || -1 != i.indexOf("%")) { o = 0; break } o += parseInt(i, 10) } o && this.table.add(this.thead.closest("table")).width(o) }, _reorderable: function () { var t, i, n; this.options.reorderable && (t = !0 === this.options.scrollable, i = (t ? ".k-grid-header:first " : "table:first>.k-grid-header ") + "th.k-header", n = this, this._draggableInstance = new w.Draggable(this.wrapper, { group: kendo.guid(), filter: i, hint: function (t) { return e('<div class="k-header k-drag-clue" />').css({ width: t.width(), paddingLeft: t.css("paddingLeft"), paddingRight: t.css("paddingRight"), lineHeight: t.height() + "px", paddingTop: t.css("paddingTop"), paddingBottom: t.css("paddingBottom") }).html(t.attr(kendo.attr("title")) || t.attr(kendo.attr("field")) || t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />') } }), this.reorderable = new w.Reorderable(this.wrapper, { draggable: this._draggableInstance, dragOverContainers: T(this._allowDragOverContainers, this), inSameContainer: function (t) { return e(t.source).parent()[0] === e(t.target).parent()[0] }, change: function (e) { var t = e.newIndex, i = e.oldIndex, o = "before" === e.position, r = n.columns[i]; n.trigger(Q, { newIndex: t, oldIndex: i, column: r }), n.reorderColumn(t, r, o) } })) }, _allowDragOverContainers: function (e) { return !1 !== this.columns[e].lockable }, reorderColumn: function (i, n, o) { var r, s, a, l = this.columns, c = E(n, l), d = l[i], u = !!d.locked, h = this._nonLockedColumns().length; c !== i && (u && !n.locked && 1 == h || !u && n.locked && l.length - h == 1 || (o === t && (o = i < c), r = (r = !!n.locked) != u, n.locked = u, l.splice(o ? i : i + 1, 0, n), l.splice(c < i ? c : c + 1, 1), this._renderCols(), (s = e(this.lockedHeader).add(this.thead).find("th")).eq(c)[o ? "insertBefore" : "insertAfter"](s.eq(i)), a = this._headerTree.children[0].children, this._hasLockedColumns && (a = this._lockedHeaderTree.children[0].children.concat(a)), a.splice(o ? i : i + 1, 0, a[c]), a.splice(c < i ? c : c + 1, 1), this._hasLockedColumns && (this._lockedHeaderTree.children[0].children = a.splice(0, this._lockedColumns().length), this._headerTree.children[0].children = a), this._applyLockedContainersWidth(), this.refresh(), r && (u ? this.trigger(J, { column: n }) : this.trigger(ee, { column: n })))) }, lockColumn: function (e) { var t, i = this.columns; (e = "number" == typeof e ? i[e] : A(i, function (t) { return t.field === e })[0]) && !e.hidden && (t = this._lockedColumns().length - 1, this.reorderColumn(t, e, !1)) }, unlockColumn: function (e) { var t, i = this.columns; (e = "number" == typeof e ? i[e] : A(i, function (t) { return t.field === e })[0]) && !e.hidden && (t = this._lockedColumns().length, this.reorderColumn(t, e, !0)) }, _columnMenu: function () { var t, i, n, o, r, s, a = e(this.lockedHeader).add(this.thead).find("th"), l = this.columns, c = this.options, d = c.columnMenu, u = T(this._columnMenuInit, this), h = this._lockedColumns().length; if (d) for ("boolean" == typeof d && (d = {}), s = 0; s < a.length; s++)(t = l[s]).field && ((i = a.eq(s).data("kendoColumnMenu")) && i.destroy(), o = !1, !1 !== t.sortable && !1 !== d.sortable && !1 !== c.sortable && (o = f({}, c.sortable, { compare: (t.sortable || {}).compare })), r = !1, c.filterable && !1 !== t.filterable && !1 !== d.filterable && (r = f({ pane: this.pane }, t.filterable, c.filterable)), n = { dataSource: this.dataSource, values: t.values, columns: d.columns, sortable: o, filterable: r, messages: d.messages, owner: this, closeCallback: e.noop, init: u, pane: this.pane, lockedColumns: !1 !== t.lockable && h > 0 }, c.$angular && (n.$angular = c.$angular), a.eq(s).kendoColumnMenu(n)) }, _columnMenuInit: function (e) { this.trigger(Z, { field: e.field, container: e.container }) } }), kendo.ExcelMixin && kendo.ExcelMixin.extend(u.prototype), kendo.PDFMixin && (kendo.PDFMixin.extend(u.prototype), u.fn._drawPDF = function (t) { var i = new e.Deferred; return this._drawPDFShadow({ width: this.wrapper.width() }, { avoidLinks: this.options.pdf.avoidLinks }).done(function (e) { var n = { page: e, pageNumber: 1, progress: 1, totalPages: 1 }; t.notify(n), i.resolve(n.page) }).fail(function (e) { i.reject(e) }), i }), f(!0, kendo.data, { TreeListDataSource: l, TreeListModel: se }), f(!0, kendo.ui, { TreeList: u }), w.plugin(u) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("util/main.min", ["kendo.core.min"], function () { return function () { var e, t = window.kendo, i = t.deepExtend, n = Date.now; n || (n = function () { return (new Date).getTime() }), i(t, { util: { now: n, renderPos: function (e) { var i, n, o = []; if (e) for (i = t.toHyphens(e).split("-"), n = 0; n < i.length; n++)o.push("k-pos-" + i[n]); return o.join(" ") }, renderSize: function (e) { return "string" != typeof e && (e += "px"), e }, sqr: function (e) { return e * e }, romanToArabic: function (e) { var t, i, n, o, r; for (e = e.toLowerCase(), t = { i: 1, v: 5, x: 10, l: 50, c: 100, d: 500, m: 1e3 }, i = 0, n = 0, o = 0; o < e.length; ++o) { if (!(r = t[e.charAt(o)])) return null; i += r, r > n && (i -= 2 * n), n = r } return i }, arabicToRoman: function (e) { for (var t = { 1: "i", 10: "x", 100: "c", 2: "ii", 20: "xx", 200: "cc", 3: "iii", 30: "xxx", 300: "ccc", 4: "iv", 40: "xl", 400: "cd", 5: "v", 50: "l", 500: "d", 6: "vi", 60: "lx", 600: "dc", 7: "vii", 70: "lxx", 700: "dcc", 8: "viii", 80: "lxxx", 800: "dccc", 9: "ix", 90: "xc", 900: "cm", 1000: "m" }, i = [1e3, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1], n = ""; e > 0;)e < i[0] ? i.shift() : (n += t[i[0]], e -= i[0]); return n }, memoize: function (e) { var t = Object.create(null); return function () { var i, n = ""; for (i = arguments.length; --i >= 0;)n += ":" + arguments[i]; return n in t ? t[n] : t[n] = e.apply(this, arguments) } }, isUnicodeLetter: function (t) { return e.test(t) } } }), e = RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]") }(), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("util/parse-xml.min", ["kendo.core.min", "util/main.min"], function () { "use strict"; function e(e) { var t, i = []; for (t = 0; t < e.length; ++t)i.push(e.charCodeAt(t)); return i } function t(e, t) { t > 65535 ? (t -= 65536, e.push(t >>> 10 & 1023 | 55296, 56320 | 1023 & t)) : e.push(t) } function i(e, i) { function C(i) { var n = e[q++]; 240 & n ^ 240 ? 224 & n ^ 224 ? 192 & n ^ 192 ? i.push(n) : t(i, (31 & n) << 6 | 63 & e[q++]) : t(i, (15 & n) << 12 | (63 & e[q++]) << 6 | 63 & e[q++]) : t(i, (3 & n) << 18 | (63 & e[q++]) << 12 | (63 & e[q++]) << 6 | 63 & e[q++]) } function S(e) { throw Error(e + ", at " + q) } function T(t) { for (var i = []; q < e.length && t(e[q]);)i.push(e[q++]); return i } function D(e) { return n.apply(0, T(e)) } function A() { T(M) } function E(t) { var i, n = q; for (i = 0; i < t.length; ++i)if (e[q++] != t[i]) return q = n, !1; return t } function I(e) { E(e) || S("Expecting " + e.join(", ")) } function M(e) { return 9 == e || 10 == e || 13 == e || 32 == e } function R(e) { return e >= 48 && e <= 57 } function F(e) { return e >= 48 && e <= 57 || (e |= 32) >= 97 && e <= 102 } function z(e) { return 58 == e || 95 == e || (e |= 32) >= 97 && e <= 122 } function P(e) { return 45 == e || R(e) || z(e) } function B() { for (var t = []; q < e.length;) { if (E(a)) return W("comment", n.apply(0, t)); C(t) } } function L() { var e, t; E(h) ? (W("decl", N(), U()), I(u)) : E(l) ? B() : (e = N(), t = U(e), j.push(t), E(c) ? W("enter", e, t, !0) : (I(p), W("enter", e, t), H(e), e != N() && S("Bad closing tag"), W("leave", e, t), A(), I(p)), j.pop()) } function H(t) { for (var i = []; q < e.length;) { if (E(d)) return i.length && W("text", n.apply(0, i)); if (E(r)) for (; q < e.length && !E(s);)C(i); else E(f) ? (i.length && W("text", n.apply(0, i)), L(), i = []) : E(v) ? V(i) : C(i) } S("Unclosed tag " + t) } function N() { return z(e[q]) || S("Expecting XML name"), D(P) } function O() { var t, i = E(_) || E(b); for (i || S("Expecting string"), t = []; q < e.length;) { if (E(i)) return n.apply(0, t); E(v) ? V(t) : C(t) } S("Unfinished string") } function V(e) { var i, n; E(w) ? (i = E(y) || E(k) ? parseInt(D(F), 16) : parseInt(D(R), 10), isNaN(i) && S("Bad numeric entity")) : (n = N(), void 0 === (i = o[n]) && S("Unknown entity " + n)), t(e, i), I(m) } function U(t) { for (var i, n = { $tag: t }; q < e.length && (A(), 63 != (i = e[q]) && 62 != i && 47 != i);)n[N()] = (I(g), O()); return n } function W(e, t, n, o) { var r = i && i[e]; r && r.call(G, t, n, o) } var q = 0, j = [], G = { is: function (e) { for (var t = j.length, i = e.length; --t >= 0 && --i >= 0;)if (j[t].$tag != e[i] && "*" != e[i]) return !1; return i < 0 ? j[j.length - 1] : null }, exit: function () { throw x }, stack: j }, $ = []; for (C($), 65279 != $[0] && (q = 0); q < e.length;)A(), I(f), L(), A() } var n = String.fromCharCode, o = { amp: 38, lt: 60, gt: 62, quot: 34, apos: 39, nbsp: 160 }, r = e("<![CDATA["), s = e("]]>"), a = e("--\x3e"), l = e("!--"), c = e("/>"), d = e("</"), u = e("?>"), h = e("?"), f = e("<"), p = e(">"), m = e(";"), g = e("="), v = e("&"), _ = e('"'), b = e("'"), w = e("#"), y = e("x"), k = e("X"), x = {}; kendo.util.parseXML = function () { try { return i.apply(this, arguments) } catch (e) { if (e !== x) throw e } } }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/commands.min", ["kendo.core.min", "kendo.binder.min", "kendo.window.min", "kendo.list.min", "kendo.tabstrip.min"], function () { !function (e) { function t(e) { var t = document.createElement("textarea"); i(t).addClass("k-spreadsheet-clipboard").val(e).appendTo(document.body).focus().select(), document.execCommand("copy"), i(t).remove() } var i, n, o, r, s, a, l, c; e.support.browser.msie && e.support.browser.version < 9 || (i = e.jQuery, n = e.spreadsheet.Command = e.Class.extend({ init: function (e) { this.options = e, this._workbook = e.workbook, this._property = e && e.property, this._state = {} }, range: function (e) { return void 0 !== e && this._setRange(e), this._range }, _setRange: function (e) { this._range = e }, redo: function () { this.exec() }, undo: function () { this.setState(this._state) }, getState: function () { this._state = this.range().getState(this._property) }, setState: function (e) { this.range().setState(e) }, _forEachCell: function (e) { var t = this.range(), i = t._ref; i.forEach(function (i) { t.sheet().forEach(i.toRangeRef(), e.bind(this)) }.bind(this)) } }), o = n.extend({ init: function (e) { n.fn.init.call(this, e), this._target = e.target, this._value = e.value }, exec: function () { this.getState(), this.setState(this._value) } }), e.spreadsheet.ColumnWidthCommand = o.extend({ getState: function () { this._state = this.range().sheet().columnWidth(this._target) }, setState: function (e) { this.range().sheet().columnWidth(this._target, e) } }), e.spreadsheet.RowHeightCommand = o.extend({ getState: function () { this._state = this.range().sheet().rowHeight(this._target) }, setState: function (e) { this.range().sheet().rowHeight(this._target, e) } }), e.spreadsheet.HyperlinkCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._link = e.link }, exec: function () { var e = this.range(); this._prevLink = e.link(), this._prevUnderline = e.underline(), e.link(this._link), e.underline(!0), null == e.value() && (this._hasSetValue = !0, e.value(this._link)) }, undo: function () { var e = this.range(); e.link(this._prevLink), e.underline(this._prevUnderline), this._hasSetValue && e.value(null) } }), e.spreadsheet.GridLinesChangeCommand = o.extend({ getState: function () { this._state = this._range.sheet().showGridLines() }, setState: function (e) { this._range.sheet().showGridLines(e) } }), r = e.spreadsheet.PropertyChangeCommand = n.extend({ _setRange: function (e) { n.prototype._setRange.call(this, e.skipHiddenCells()) }, init: function (e) { n.fn.init.call(this, e), this._value = e.value }, exec: function () { var e = this.range(); e.enable() && (this.getState(), "format" === this.options.property && this._workbook.trigger("changeFormat", { range: e }), e[this._property](this._value)) } }), e.spreadsheet.ClearContentCommand = n.extend({ exec: function () { this.getState(), this.range().clearContent() } }), e.spreadsheet.EditCommand = r.extend({ init: function (e) { e.property = e.property || "input", r.fn.init.call(this, e) }, rejectState: function (e) { return this.undo(), { title: e.title, body: e.message, reason: "error", type: "validationError" } }, getState: function () { this._state = this.range().getState() }, exec: function () { var t, i, n = this.range(); if (!n.enable()) return { reason: "error", type: "rangeDisabled" }; if (t = this._value, this.getState(), "value" != this._property) try { if (n.link(null), "" === t ? n.value(null) : (n.input(t), /\n/.test(n.value()) && n.wrap(!0)), n._adjustRowHeight(), i = n._getValidationState()) return this.rejectState(i) } catch (t) { if (t instanceof e.spreadsheet.calc.ParseError) return { title: "Error in formula", body: t + "", reason: "error" }; throw t } else n.value(t) } }), e.spreadsheet.TextWrapCommand = r.extend({ init: function (e) { e.property = "wrap", r.fn.init.call(this, e), this._value = e.value }, getState: function () { var e = {}; this.range().forEachRow(function (t) { var i = t.topLeft().row; e[i] = t.sheet().rowHeight(i) }), this._state = this.range().getState(this._property), this._rowHeight = e }, undo: function () { var e, t = this.range().sheet(), i = this._rowHeight; for (e in this.range().setState(this._state), i) t.rowHeight(e, i[e]) } }), e.spreadsheet.AdjustDecimalsCommand = n.extend({ init: function (e) { this._decimals = e.value, e.property = "format", n.fn.init.call(this, e) }, exec: function () { var t = this.range().sheet(), i = this._decimals, n = e.spreadsheet.formatting; this.getState(), t.batch(function () { this.range().forEachCell(function (e, o, r) { var s = r.format; (s || i > 0) && (s = n.adjustDecimals(s || "#", i), t.range(e, o).format(s)) }) }.bind(this)) } }), e.spreadsheet.BorderChangeCommand = n.extend({ init: function (e) { e.property = "border", n.fn.init.call(this, e), this._type = e.border, this._style = e.style }, _batch: function (e) { return this.range().sheet().batch(e, {}) }, exec: function () { var e = this; e.getState(), e._batch(function () { e[e._type](e._style) }) }, noBorders: function () { this.range().insideBorders(null), this.outsideBorders(null) }, allBorders: function (e) { this.range().insideBorders(e), this.outsideBorders(e) }, leftBorder: function (e) { this.range().leftColumn().borderLeft(e) }, rightBorder: function (e) { this.range().rightColumn().borderRight(e) }, topBorder: function (e) { this.range().topRow().borderTop(e) }, bottomBorder: function (e) { this.range().bottomRow().borderBottom(e) }, outsideBorders: function (e) { var t = this.range(); t.leftColumn().borderLeft(e), t.topRow().borderTop(e), t.rightColumn().borderRight(e), t.bottomRow().borderBottom(e) }, insideBorders: function (e) { this.range().insideBorders(e), this.outsideBorders(null) }, insideHorizontalBorders: function (e) { this.range().insideHorizontalBorders(e) }, insideVerticalBorders: function (e) { this.range().insideVerticalBorders(e) } }), e.spreadsheet.MergeCellCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._type = e.value }, exec: function () { this.getState(), this[this._type]() }, activate: function (e) { this.range().sheet().activeCell(e) }, getState: function () { this._state = this.range().getState() }, undo: function () { "unmerge" !== this._type && (this.range().unmerge(), this.activate(this.range().topLeft())), this.range().setState(this._state) }, cells: function () { var e = this.range(), t = e._ref; e.merge(), this.activate(t) }, horizontally: function () { var e = this.range().topRow()._ref; this.range().forEachRow(function (e) { e.merge() }), this.activate(e) }, vertically: function () { var e = this.range().leftColumn()._ref; this.range().forEachColumn(function (e) { e.merge() }), this.activate(e) }, unmerge: function () { var e = this.range(), t = e._ref.topLeft; e.unmerge(), this.activate(t) } }), e.spreadsheet.FreezePanesCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._type = e.value }, exec: function () { this.getState(), this._topLeft = this.range().topLeft(), this[this._type]() }, getState: function () { this._state = this.range().sheet().getState() }, undo: function () { this.range().sheet().setState(this._state) }, panes: function () { var e = this._topLeft, t = this.range().sheet(); t.frozenColumns(e.col).frozenRows(e.row) }, rows: function () { var e = this._topLeft, t = this.range().sheet(); t.frozenRows(e.row) }, columns: function () { var e = this._topLeft, t = this.range().sheet(); t.frozenColumns(e.col) }, unfreeze: function () { var e = this.range().sheet(); e.frozenRows(0).frozenColumns(0) } }), e.spreadsheet.PasteCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._clipboard = e.workbook.clipboard(), this._event = e.event }, getState: function () { this._range = this._workbook.activeSheet().range(this._clipboard.pasteRef()), this._state = this._range.getState() }, exec: function () { var e, t; return this.getState(), this._clipboard.parse(), (e = this._clipboard.canPaste()).canPaste ? (t = this._workbook.activeSheet().selection(), void (this._workbook.trigger("paste", { range: t }) ? this._event.preventDefault() : (this._clipboard.paste(), t._adjustRowHeight()))) : e.menuInvoked ? { reason: "error", type: "useKeyboard" } : e.pasteOnMerged ? { reason: "error", type: "modifyMerged" } : e.overflow ? { reason: "error", type: "overflow" } : e.pasteOnDisabled ? (this._event.preventDefault(), { reason: "error", type: "cannotModifyDisabled" }) : { reason: "error" } } }), e.spreadsheet.AdjustRowHeightCommand = n.extend({ exec: function () { var e = this.options, t = this._workbook.activeSheet(), i = e.range || t.range(e.rowIndex); i._adjustRowHeight() } }), e.spreadsheet.ToolbarPasteCommand = n.extend({ exec: function () { return e.support.clipboard.paste ? (this._workbook._view.clipboard.focus().select(), void document.execCommand("paste")) : { reason: "error", type: "useKeyboard" } } }), e.spreadsheet.CopyCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._clipboard = e.workbook.clipboard(), this._event = e.event }, undo: i.noop, exec: function () { var e, t = this._clipboard.canCopy(); if (this._clipboard.menuInvoked = !0, t.canCopy) e = this._workbook.activeSheet().selection(), this._workbook.trigger("copy", { range: e }) ? this._event.preventDefault() : this._clipboard.copy(); else { if (t.menuInvoked) return { reason: "error", type: "useKeyboard" }; if (t.multiSelection) return { reason: "error", type: "unsupportedSelection" } } } }), e.spreadsheet.ToolbarCopyCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._clipboard = e.workbook.clipboard() }, undo: i.noop, exec: function () { if (!e.support.clipboard.copy) return { reason: "error", type: "useKeyboard" }; var i = this._workbook._view.clipboard; t(i.html()), i.trigger("copy") } }), e.spreadsheet.CutCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._clipboard = e.workbook.clipboard(), this._event = e.event }, exec: function () { var e; return this.range().enable() && this._clipboard.canCopy() ? (this.getState(), e = this._workbook.activeSheet().selection(), this._workbook.trigger("cut", { range: e }) ? void this._event.preventDefault() : void this._clipboard.cut()) : (this._event.preventDefault(), { reason: "error", type: "cannotModifyDisabled" }) } }), e.spreadsheet.AutoFillCommand = n.extend({ init: function (e) { n.fn.init.call(this, e) }, origin: function (e) { this._origin = e }, exec: function () { var t = this.range(); if (!t.enable()) return { reason: "error", type: "rangeDisabled" }; this.getState(); try { t.fillFrom(this._origin) } catch (t) { if (t instanceof e.spreadsheet.Range.FillError) return { reason: "error", type: t.code }; throw t } } }), e.spreadsheet.ToolbarCutCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._clipboard = e.workbook.clipboard() }, exec: function () { if (!e.support.clipboard.copy) return { reason: "error", type: "useKeyboard" }; var i = this._workbook._view.clipboard; t(i.html()), i.trigger("cut") } }), e.spreadsheet.FilterCommand = n.extend({ undo: function () { this.range().filter(this._state) }, exec: function () { var e = this.range(); this._state = e.hasFilter(), e.filter(!this._state) } }), e.spreadsheet.SortCommand = n.extend({ undo: function () { var e = this.range().sheet(); e.setState(this._state) }, exec: function () { var e, t = this.range(), i = t.sheet(), n = i.activeCell(), o = this.options.sheet ? n.topLeft.col : this.options.column || 0, r = "asc" === this.options.value; return this._state = i.getState(), this.options.sheet && (t = this.expandRange()), (e = t.cantSort()) ? { reason: "error", type: e.code } : void t.sort({ column: o, ascending: r }) }, expandRange: function () { var t = this.range().sheet(); return new e.spreadsheet.Range(t._sheetRef, t) } }), s = e.spreadsheet.ApplyFilterCommand = n.extend({ column: function () { return this.options.column || 0 }, undo: function () { var e = this.range().sheet(); e.clearFilter(this.column()), this._state.length && this.range().filter(this._state) }, getState: function () { var e = this.range().sheet(), t = e.filter(); t && (this._state = t.columns.filter(function (e) { return e.index == this.column() }.bind(this))) }, exec: function () { var t, i, n = this.range(), o = this.column(), r = n.sheet().filter(), s = !1; this.options.valueFilter ? i = { column: o, filter: new e.spreadsheet.ValueFilter(this.options.valueFilter) } : this.options.customFilter && (i = { column: o, filter: new e.spreadsheet.CustomFilter(this.options.customFilter) }), this.getState(), r && r.ref.eq(n._ref) && r.columns.length ? (r.columns.forEach(function (e) { e.index === o && (s = !0) }), t = r.columns.map(function (e) { return e.index === o ? i : { column: e.index, filter: e.filter } }), s || t.push(i)) : t = i, n.filter(t) } }), e.spreadsheet.ClearFilterCommand = s.extend({ exec: function () { var e = this.range(), t = this.column(); this.getState(), e.clearFilter(t) } }), e.spreadsheet.HideLineCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this.axis = e.axis }, undo: function () { var e = this.range().sheet(); e.setAxisState(this._state) }, exec: function () { var e = this.range().sheet(); this._state = e.getAxisState(), "row" == this.axis ? e.axisManager().hideSelectedRows() : e.axisManager().hideSelectedColumns() } }), e.spreadsheet.UnHideLineCommand = e.spreadsheet.HideLineCommand.extend({ exec: function () { var e = this.range().sheet(); this._state = e.getAxisState(), "row" == this.axis ? e.axisManager().unhideSelectedRows() : e.axisManager().unhideSelectedColumns() } }), a = e.spreadsheet.DeleteCommand = n.extend({ undo: function () { var e = this.range().sheet(); e.setState(this._state) } }), e.spreadsheet.DeleteRowCommand = a.extend({ exec: function () { var e = this.range().sheet(); this._state = e.getState(), e.axisManager().deleteSelectedRows() } }), e.spreadsheet.DeleteColumnCommand = a.extend({ exec: function () { var e = this.range().sheet(); this._state = e.getState(), e.axisManager().deleteSelectedColumns() } }), l = n.extend({ init: function (e) { n.fn.init.call(this, e), this._value = e.value }, undo: function () { var e = this.range().sheet(); e.setState(this._state) } }), e.spreadsheet.AddColumnCommand = l.extend({ exec: function () { var e = this.range().sheet(), t = e.axisManager().preventAddColumn(); return t || (this._state = e.getState(), void ("left" === this._value ? e.axisManager().addColumnLeft() : e.axisManager().addColumnRight())) } }), e.spreadsheet.AddRowCommand = l.extend({ exec: function () { var e = this.range().sheet(), t = e.axisManager().preventAddRow(); return t || (this._state = e.getState(), void ("above" === this._value ? e.axisManager().addRowAbove() : e.axisManager().addRowBelow())) } }), e.spreadsheet.EditValidationCommand = n.extend({ init: function (e) { n.fn.init.call(this, e), this._value = e.value }, exec: function () { this.range().validation(this._value) } }), e.spreadsheet.OpenCommand = n.extend({ cannotUndo: !0, exec: function () { var e, t = this.options.file; return null === t.name.match(/.xlsx$/i) ? { reason: "error", type: "openUnsupported" } : void (e = this.options.workbook).fromFile(this.options.file).then(function () { var t = e.excelImportErrors; t && t.length && e._view.openDialog("importError", { errors: t }) }) } }), e.spreadsheet.SaveAsCommand = n.extend({ exec: function () { var e = this.options.name + this.options.extension; ".xlsx" === this.options.extension ? this.options.workbook.saveAsExcel({ fileName: e }) : ".pdf" === this.options.extension && this.options.workbook.saveAsPDF(i.extend(this.options.pdf, { workbook: this.options.workbook, fileName: e })) } }), c = n.extend({ init: function (e) { n.fn.init.call(this, e), this._name = e.name, this._value = e.value }, getState: function () { this._state = this._workbook.nameDefinition(this._name) }, setState: function () { this._workbook.nameDefinition(this._name, this._state), this._workbook.trigger("change", { recalc: !0 }) } }), e.spreadsheet.DefineNameCommand = c.extend({ exec: function () { this.getState(); try { this._workbook.defineName(this._name, this._value), this._workbook.trigger("change", { recalc: !0 }) } catch (e) { return { title: "Error", body: e + "", reason: "error" } } } }), e.spreadsheet.DeleteNameCommand = c.extend({ exec: function () { this.getState(), this._workbook.undefineName(this._name), this._workbook.trigger("change", { recalc: !0 }) } })) }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/formulabar.min", ["kendo.core.min"], function () { e = window.kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.jQuery, i = { wrapper: "k-spreadsheet-formula-bar" }, n = e.ui.Widget.extend({ init: function (i, o) { e.ui.Widget.call(this, i, o), i = this.element.addClass(n.classNames.wrapper), this.formulaInput = new e.spreadsheet.FormulaInput(t("<div/>").appendTo(i)) }, destroy: function () { this.formulaInput && this.formulaInput.destroy(), this.formulaInput = null } }), e.spreadsheet.FormulaBar = n, t.extend(!0, n, { classNames: i })); var e, t, i, n }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/formulainput.min", ["kendo.core.min"], function () { !function (e, t) { function i(e) { return "(" == e || "[" == e || "{" == e } function n(e, t) { return e.begin <= t.begin && e.end >= t.end } function o(t) { return e.spreadsheet.calc.runtime.FUNCS[t.toLowerCase()] } function r(e, t) { return !(!e || !t) && ("ref" == e.type && "ref" == t.type ? e.ref.eq(t.ref) : e.value === t.value) } var s, a, l, c, d, u, h, f, p; e.support.browser.msie && e.support.browser.version < 9 || (s = e.jQuery, a = e.ui.Widget, l = ".kendoFormulaInput", c = e.keys, d = { wrapper: "k-spreadsheet-formula-input", listWrapper: "k-spreadsheet-formula-list" }, u = ["font-family", "font-size", "font-stretch", "font-style", "font-weight", "letter-spacing", "text-transform", "line-height"], h = { 27: "esc", 37: "left", 39: "right", 35: "end", 36: "home", 32: "spacebar" }, f = /(^_|[^a-z0-9]$)/i, p = a.extend({ init: function (e, t) { a.call(this, e, t), (e = this.element).addClass(p.classNames.wrapper).attr("contenteditable", !0).attr("spellcheck", !1).css("white-space", "pre"), this.options.autoScale && e.on("input", this.scale.bind(this)), this._highlightedRefs = [], this._staticTokens = [], this._formulaSource(), this._formulaList(), this._popup(), this._tooltip(), e.on("keydown", this._keydown.bind(this)).on("keyup", this._keyup.bind(this)).on("blur", this._blur.bind(this)).on("input click", this._input.bind(this)).on("focus", this._focus.bind(this)).on("paste", this._paste.bind(this)) }, options: { name: "FormulaInput", autoScale: !1, filterOperator: "startswith", scalePadding: 30, minLength: 1 }, events: ["keyup", "focus"], enable: function (e) { return void 0 === e ? "true" === this.element.attr("contenteditable") : (e ? this.element.attr("contenteditable", e) : this.element.removeAttr("contenteditable"), void this.element.toggleClass("k-state-disabled", !e)) }, getPos: function () { function e(e, t) { try { !function i(n) { if (n === e) throw t; if (1 == n.nodeType) for (var o = n.firstChild; o; o = o.nextSibling)i(o); else 3 == n.nodeType && (t += n.nodeValue.length) }(n) } catch (e) { return e } } var i, n = this.element[0], o = t.getSelection(), r = e(o.focusNode, o.focusOffset), s = e(o.anchorNode, o.anchorOffset); if (null != r && null != s) return r > s && (i = r, r = s, s = i), { begin: r, end: s, collapsed: r == s } }, setPos: function (e, i) { function n(e, t) { try { !function e(i) { var n, o; if (3 == i.nodeType) { if ((n = i.nodeValue.length) >= t) throw i; t -= n } else if (1 == i.nodeType) for (o = i.firstChild; o; o = o.nextSibling)e(o) }(e) } catch (e) { return { node: e, pos: t } } } var o, r, s, a = this.element[0]; e = n(a, e), i = null != i ? n(a, i) : e, e && i && ((o = document.createRange()).setStart(e.node, e.pos), o.setEnd(i.node, i.pos), r = t.getSelection(), s = r.getRangeAt(0), function (e, t) { return e.startOffset != t.startOffset || e.endOffset != t.endOffset || e.startContainer != t.endContainer || e.endContainer != t.endContainer }(o, s) && (r.removeAllRanges(), r.addRange(o))) }, end: function () { this.setPos(this.length()) }, home: function () { this.setPos(0) }, select: function () { this.setPos(0, this.length()) }, length: function () { return this.value().length }, _formulaSource: function () { var t, i, n = []; for (i in e.spreadsheet.calc.runtime.FUNCS) f.test(i) || (t = i.toUpperCase(), n.push({ value: t, text: t })); this.formulaSource = new e.data.DataSource({ data: n }) }, _formulaList: function () { this.list = new e.ui.StaticList(s("<ul />").addClass(p.classNames.listWrapper).insertAfter(this.element), { autoBind: !1, selectable: !0, change: this._formulaListChange.bind(this), dataSource: this.formulaSource, dataValueField: "value", template: "#:data.value#" }), this.list.element.on("mousedown", function (e) { e.preventDefault() }) }, _formulaListChange: function () { var e, t, i, n = this._tokenContext(); n && !this._mute && (e = n.token, t = this.list.value()[0], i = { replace: !0, token: e, end: e.end }, n.nextToken && "(" == n.nextToken.value || (t += "("), this._replaceAt(i, t), this.popup.close()) }, _popup: function () { this.popup = new e.ui.Popup(this.list.element, { anchor: this.element }) }, _blur: function () { this.popup.close(), clearTimeout(this._focusId), this.trigger("blur") }, _isFormula: function () { return /^=/.test(this.value()) }, _keydown: function (e) { var t = e.keyCode; h[t] ? (this.popup.close(), this._navigated = !0) : this._move(t) && (this._navigated = !0, e.preventDefault()), this._keyDownTimeout = setTimeout(this._syntaxHighlight.bind(this)) }, _keyup: function () { var e, t = this.popup; this._isFormula() && !this._navigated && (e = ((this._tokenContext() || {}).token || {}).value, this.filter(e), e && this.formulaSource.view().length ? (t[t.visible() ? "position" : "open"](), this.list.focusFirst()) : t.close()), this._navigated = !1, this._syntaxHighlight(), this.trigger("keyup") }, _input: function () { this._syntaxHighlight() }, _focus: function () { this._focusTimeout = setTimeout(this._syntaxHighlight.bind(this)), this.trigger("focus") }, _paste: function (i) { var n, o, r; i.preventDefault(), n = this.getPos(), o = e.support.browser.msie ? t.clipboardData.getData("Text") : i.originalEvent.clipboardData.getData("text/plain"), r = (r = this.value()).substr(0, n.begin) + o + r.substr(n.end), this.value(r), this.setPos(n.begin + o.length), this.scale() }, _move: function (e) { var t = this.list, i = this.popup; if (i.visible()) { if (e === c.DOWN) return t.focusNext(), t.focus() || t.focusFirst(), !0; if (e === c.UP) return t.focusPrev(), t.focus() || t.focusLast(), !0; if (e === c.ENTER) return t.select(t.focus()), i.close(), !0; if (e === c.TAB) return t.select(t.focus()), i.close(), !0; if (e === c.PAGEUP) return t.focusFirst(), !0; if (e === c.PAGEDOWN) return t.focusLast(), !0 } return e === c.ENTER || e === c.TAB }, _tokenContext: function () { var t, i, o, r = this.getPos(), s = this.value(); if (!s || !r || !r.collapsed) return null; for (t = e.spreadsheet.calc.tokenize(s, this.row(), this.col()), o = 0; o < t.length; ++o)if (n(i = t[o], r) && /^(?:str|sym|func)$/.test(i.type)) return { token: i, nextToken: t[o + 1] }; return null }, _sync: function () { this._editorToSync && this.isActive() && this._editorToSync.value(this.value()) }, _textContainer: function () { var t = e.getComputedStyles(this.element[0], u); t.position = "absolute", t.visibility = "hidden", t.whiteSpace = "pre", t.top = -3333, t.left = -3333, this._span = s("<span style='white-space: pre'/>").css(t).insertAfter(this.element) }, _tooltip: function () { this._cellTooltip = s('<div class="k-widget k-tooltip" style="position:absolute; display:none">A1</div>').insertAfter(this.element) }, tooltip: function (e) { this._cellTooltip.text(e) }, toggleTooltip: function (e) { this._cellTooltip.toggle(e) }, isActive: function () { return this.element[0] === e._activeElement() }, filter: function (e) { !e || e.length < this.options.minLength || (this._mute = !0, this.list.select(-1), this._mute = !1, this.formulaSource.filter({ field: this.list.options.dataValueField, operator: this.options.filterOperator, value: e })) }, hide: function () { this.enable(!1), this.element.hide(), this._cellTooltip.hide() }, show: function () { this.enable(!0), this.element.show() }, row: function () { if (this.activeCell) return this.activeCell.row }, col: function () { if (this.activeCell) return this.activeCell.col }, position: function (e) { e && (this.show(), this.element.css({ top: e.top + 1 + "px", left: e.left + 1 + "px" }), this._cellTooltip.css({ top: e.top - this._cellTooltip.height() - 10 + "px", left: e.left })) }, resize: function (e) { e && this.element.css({ width: e.width - 1, height: e.height - 1 }) }, canInsertRef: function (e) { var t, i = this._canInsertRef(e), n = i && i.token; if (n) for (t = 0; t < this._staticTokens.length; t++)if (r(n, this._staticTokens[t])) return null; return i }, _canInsertRef: function (t) { function o(e) { return e.begin > l.begin } function r(e) { if (e) { if (/^(?:num|str|bool|sym|ref)$/.test(e.type)) return { replace: !0, token: e, end: e.end }; if (/^(?:op|punc|startexp)$/.test(e.type)) return e.end == l.end ? s(e, c[u + 1]) : s(c[u - 1], e) } } function s(e, t) { if (null == e) return null; if (null == t) return /^(?:op|startexp)$/.test(e.type) || i(e.value) ? { token: e, end: l.end } : null; if (a) { if ("op" == e.type && /^(?:punc|op)$/.test(t.type)) return { token: e, end: l.end } } else { if ("startexp" == e.type) return { token: e, end: l.end }; if (/^(?:ref|op|punc)$/.test(e.type)) return { token: e, end: l.end }; if (/^(?:punc|op)$/.test(e.type)) return /^[,;({]$/.test(e.value) ? { token: e, end: l.end } : null } return !1 } var a, l, c, d, u; if (this.popup.visible()) return null; if (a = t, (l = this.getPos()) && this._isFormula()) { if (0 === l.begin) return null; for (c = e.spreadsheet.calc.tokenize(this.value(), this.row(), this.col()), u = 0; u < c.length; ++u) { if (n(d = c[u], l)) return r(d); if (o(d)) return s(c[u - 1], d) } return s(d, null) } return null }, refAtPoint: function (e) { var t = this._canInsertRef(); t && this._replaceAt(t, "" + e.simplify()) }, _replaceAt: function (e, t) { var i, n = this.value(), o = e.token, r = n.substr(e.end); n = n.substr(0, e.replace ? o.begin : e.end) + t, i = n.length, n += r, this._value(n), this.setPos(i), this.scale(), this._syntaxHighlight(), this._sync() }, syncWith: function (t) { var i, n = this, o = "input" + l, r = n._sync.bind(n); e.support.browser.msie && (o = "keydown" + l, i = function () { setTimeout(r) }), n._editorToSync = t, n.element.off(o).on(o, i || r) }, scale: function () { var e, t, i = this.element; this._span || this._textContainer(), this._span.html(i.html()), e = this._span.width() + this.options.scalePadding, t = this._span.height(), e > i.width() && i.width(e), t > i.height() && i.height(t) }, _value: function (e) { this.element.text(e) }, value: function (e) { if (void 0 === e) { var t = this.element[0].innerText; return t.replace(/\n$/, "") } this._value(e), this._syntaxHighlight() }, highlightedRefs: function () { return this._highlightedRefs.slice() }, _syntaxHighlight: function () { var t, r = this.getPos(), s = this.value(), a = e.spreadsheet.Pane.classNames.series, l = [], c = 0, d = [], u = []; if (!r || r.collapsed) { if (!/^=/.test(s)) return (this._staticTokens.length || this._highlightedRefs.length) && (this._staticTokens = [], this._highlightedRefs = [], this.element.text(s)), void (this.popup && this.popup.close()); (u = e.spreadsheet.calc.tokenize(s, this.row(), this.col())).forEach(function (e) { if (e.active = !1, e.cls = ["k-syntax-" + e.type], "ref" == e.type && (e.colorClass = a[c++ % a.length], e.cls.push(e.colorClass), l.push(e)), r && "punc" == e.type) if (i(e.value)) d.unshift(e); else if (function (e) { return ")" == e || "]" == e || "}" == e }(e.value)) { var s = d.shift(); s ? function (e, t) { return "(" == t ? ")" == e : "[" == t ? "]" == e : "{" == t && "}" == e }(e.value, s.value) ? (n(e, r) || n(s, r)) && (e.cls.push("k-syntax-paren-match"), s.cls.push("k-syntax-paren-match")) : (e.cls.push("k-syntax-error"), s.cls.push("k-syntax-error")) : e.cls.push("k-syntax-error") } r && n(e, r) && (e.cls.push("k-syntax-at-point"), e.active = !0, t = e), "func" != e.type || o(e.value) || r && n(e, r) || e.cls.push("k-syntax-error") }), u.reverse().forEach(function (t) { var i = t.begin, n = t.end, o = e.htmlEncode(s.substring(i, n)); s = s.substr(0, i) + "<span class='" + t.cls.join(" ") + "'>" + o + "</span>" + s.substr(n) }), this.element.html(s), r && this.setPos(r.begin, r.end), t && /^(?:startexp|op|punc)$/.test(t.type) && this._setStaticTokens(u), this._highlightedRefs = l } }, _setStaticTokens: function (e) { var t, i; for (this._staticTokens = [], t = 0; t < e.length; t++)i = e[t], /^(?:num|str|bool|sym|ref)$/.test(i.type) && this._staticTokens.push(i) }, destroy: function () { this._editorToSync = null, this.element.off(l), clearTimeout(this._focusTimeout), clearTimeout(this._keyDownTimeout), this._cellTooltip = null, this._span = null, this.popup.destroy(), this.popup = null, a.fn.destroy.call(this) }, insertNewline: function () { var e = this.value(), t = this.getPos(), i = t.end == e.length; e = e.substr(0, t.begin) + (i ? "\n\n" : "\n" + e.substr(t.end)), this.value(e), this.setPos(t.begin + 1) } }), e.spreadsheet.FormulaInput = p, s.extend(!0, p, { classNames: d })) }(kendo, window) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/eventlistener.min", ["kendo.core.min"], function () { e = window.kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.jQuery, i = { 8: "backspace", 9: "tab", 13: "enter", 27: "esc", 37: "left", 38: "up", 39: "right", 40: "down", 35: "end", 36: "home", 32: "spacebar", 33: "pageup", 34: "pagedown", 46: "delete", 113: ":edit" }, n = navigator.platform.toUpperCase().indexOf("MAC") >= 0, o = function (e) { return e > 47 && e < 58 || e > 64 && e < 91 || e > 95 && e < 112 || e > 185 && e < 193 || e > 218 && e < 223 }, r = function (e) { var t = e.keyCode, n = i[t]; return !n && o(t) && (n = ":alphanum"), !n && e.key && 1 == e.key.length && (n = ":alphanum"), n }, s = e.Class.extend({ init: function (e, i, n) { if (this._handlers = {}, this.target = e, this._observer = i || window, this.keyDownProxy = this.keyDown.bind(this), this.mouseProxy = this.mouse.bind(this), this.threshold = 5, this._pressLocation = null, e.on("keydown", this.keyDownProxy), e.on("contextmenu mousedown cut copy paste scroll wheel click dblclick focus", this.mouseProxy), t(document.documentElement).on("mousemove mouseup", this.mouseProxy), n) for (var o in n) this.on(o, n[o]) }, keyDown: function (e) { this.handleEvent(e, r(e.originalEvent)) }, mouse: function (e) { var t, i, n, o; e.which ? t = 3 == e.which : e.button && (t = 2 == e.button), "mousedown" === (i = e.type) && (t ? i = "rightmousedown" : this._pressLocation = { x: e.pageX, y: e.pageY }), "mouseup" === i && (t || (this._pressLocation = null)), "mousemove" === i && this._pressLocation && (n = this._pressLocation.x - e.pageX, o = this._pressLocation.y - e.pageY, Math.sqrt(n * n + o * o) > this.threshold && (i = "mousedrag")), this.handleEvent(e, i) }, handleEvent: function (e, t) { var i, o, r = ""; e.mod = n ? e.metaKey : e.ctrlKey && !e.altKey, e.altKey && (r += "alt+"), e.shiftKey && (r += "shift+"), e.ctrlKey && (r += "ctrl+"), r += t, (i = this._handlers["*+" + t]) && i.call(this._observer, e, r), (o = this._handlers[r]) && o.call(this._observer, e, r) }, on: function (e, t) { var i = this._handlers; "string" == typeof t && (t = this._observer[t]), "string" == typeof e && (e = e.split(",")), e.forEach(function (e) { i[e] = t }) }, destroy: function () { this.target.off("keydown", this.keyDownProxy), this.target.off("keydown", this.mouseProxy), t(document.documentElement).off("mousemove mouseup", this.mouseProxy) } }), e.spreadsheet.EventListener = s); var e, t, i, n, o, r, s }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/rangelist.min", ["kendo.core.min"], function () { !function (e) { function t(e) { return e } function i(e) { if (e.left.level === e.level) { var t = e; e = e.left, t.left = e.right, e.right = t } return e } function n(e) { if (e.right.right.level === e.level) { var t = e; e = e.right, t.right = e.left, e.left = t, e.level += 1 } return e } var o, r, s, a, l, c, d; e.support.browser.msie && e.support.browser.version < 9 || (o = e.Class.extend({ init: function (e, t, i, n) { this.level = e, this.value = t, this.left = i, this.right = n } }), r = new function () { this.left = this, this.right = this, this.level = 0 }, s = e.Class.extend({ init: function (e, t, i) { this.start = e, this.end = t, this.value = i }, intersects: function (e) { return e.start <= this.end && e.end >= this.start } }), a = e.Class.extend({ init: function () { this.root = r }, insert: function (e) { this.root = function e(t, s) { return t === r ? new o(1, s, r, r) : (t.value.start > s.start ? t.left = e(t.left, s) : t.right = e(t.right, s), n(i(t))) }(this.root, e) }, remove: function (e) { this.root = function e(t, o) { var s, a; if (t === r) return t; if (s = t.value.start - o.start, 0 === s) if (t.left !== r && t.right !== r) { for (a = t.left; a.right !== r;)a = a.right; t.value = a.value, t.left = e(t.left, t.value) } else t = t.left === r ? t.right : t.left; else s > 0 ? t.left = e(t.left, o) : t.right = e(t.right, o); return (t.left.level < t.level - 1 || t.right.level < t.level - 1) && (t.level -= 1, t.right.level > t.level && (t.right.level = t.level), t = i(t), t.right = i(t.right), t.right.right = i(t.right.right), t = n(t), t.right = n(t.right)), t }(this.root, e) }, findrange: function (e) { for (var t = this.root; t != r;)if (e < t.value.start) t = t.left; else { if (!(e > t.value.end)) return t.value; t = t.right } return null }, values: function () { var e = []; return function e(t, i) { t !== r && (e(t.left, i), i.push(t.value), e(t.right, i)) }(this.root, e), e }, intersecting: function (e, t) { var i = []; return function e(t, i, n) { if (t !== r) { var o = t.value; i.start < o.start && e(t.left, i, n), o.intersects(i) && n.push(o), i.end > o.end && e(t.right, i, n) } }(this.root, new s(e, t), i), i }, map: function (e) { var t = new a; return function e(t, i, n) { i !== r && (e(t, i.left, n), t.insert(n(i.value)), e(t, i.right, n)) }(t, this.root, e), t }, clone: function () { return this.map(t) }, first: function () { for (var e = this.root; e.left != r;)e = e.left; return e }, last: function () { for (var e = this.root; e.right != r;)e = e.right; return e } }), l = e.Class.extend({ init: function (e, t, i) { void 0 === t ? this.tree = e : (this.tree = new a, this.tree.insert(new s(e, t, i))) }, values: function () { return this.tree.values() }, map: function (e) { return new l(this.tree.map(e)) }, intersecting: function (e, t) { return this.tree.intersecting(e, t) }, first: function () { return this.tree.first().value }, last: function () { return this.tree.last().value }, insert: function (e, t, i) { return this.tree.insert(new s(e, t, i)) }, value: function (e, t, i) { var n, o, r, s, a, l, c, d, u; if (void 0 === i) return void 0 === t && (t = e), this.intersecting(e, t)[0].value; if ((n = this.tree.intersecting(e - 1, t + 1)).length) for (o = n[0], r = n[n.length - 1], o.end < e && (o.value === i ? e = o.start : n.shift()), r.start > t && (r.value === i ? t = r.end : n.pop()), s = 0, a = n.length; s < a; s++)l = n[s], c = l.value, d = l.start, u = l.end, this.tree.remove(l), d < e && (c !== i ? this.insert(d, e - 1, c) : e = d), u > t && (c !== i ? this.insert(t + 1, u, c) : t = u); this.insert(e, t, i) }, expandedValues: function (e, t) { var i, n = this.intersecting(e, t), o = [], r = 0; for (i = e; i <= t; i++)n[r].end < i && r++, o.push({ index: i - e, value: n[r].value }); return o }, sortedIndices: function (e, t, i, n) { var o = this.expandedValues(e, t), r = function (e, t) { return e.value === t.value ? e.index - t.index : i(e.value, t.value) }; return n && (r = function (e, t) { var o = n[e.index], r = n[t.index]; return o.value === r.value ? i(e.value, t.value) : e.index - t.index }), o.sort(r), o }, sort: function (e, t, i) { var n, o, r; if (1 !== this.intersecting(e, t).length) for (n = this.expandedValues(e, t), o = 0, r = i.length; o < r; o++)this.value(o + e, o + e, n[i[o].index].value) }, copy: function (e, t, i) { var n, o, r, s, a, l = this.intersecting(e, t), c = i; for (o = 0, r = l.length; o < r; o++)(s = l[o].start) < e && (s = e), (a = l[o].end) > t && (a = t), n = c + (a - s), this.value(c, n, l[o].value), c = ++n }, iterator: function (e, t) { return new c(e, t, this.intersecting(e, t)) }, getState: function () { return this.tree.clone() }, setState: function (e) { this.tree = e } }), c = e.Class.extend({ init: function (e, t, i) { this.start = e, this.end = t, this.index = 0, this.ranges = i }, unique: function () { return this.ranges.map(function (e) { return e.value }) }, at: function (e) { for (; this.ranges[this.index].end < e;)this.index++; return this.ranges[this.index].value }, forEach: function (e) { for (var t = this.start; t <= this.end; t++)e(this.at(t), t); this.index = 0 } }), d = l.extend({ init: function (e, t, i) { this.tree = new a, this.range = new s(e, t, i) }, intersecting: function (e, t) { var i, n, o, r = this.tree.intersecting(e, t), a = []; if (!r.length) return [this.range]; for (n = 0, o = r.length; n < o; n++)(i = r[n]).start > e && a.push(new s(e, i.start - 1, this.range.value)), a.push(i), e = i.end + 1; return i.end < t && a.push(new s(i.end + 1, t, this.range.value)), a }, insert: function (e, t, i) { i !== this.range.value && this.tree.insert(new s(e, t, i)) }, lastRangeStart: function () { var e = this.tree.root; if (e === r) return this.range.start; for (; e.right !== r;)e = e.right; return e.value.end + 1 } }), e.spreadsheet.RangeTree = a, e.spreadsheet.RangeList = l, e.spreadsheet.SparseRangeList = d, e.spreadsheet.ValueRange = s) }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/propertybag.min", ["kendo.core.min"], function () { !function (e) { var t, i, n; e.support.browser.msie && e.support.browser.version < 9 || (t = e.Class.extend({ init: function (e) { this.list = e }, get: function (e) { return this.parse(this.list.value(e, e)) }, set: function (e, t, i) { void 0 === i && (i = t, t = e), this.list.value(e, t, i) }, parse: function (e) { return e }, copy: function (e, t, i) { this.list.copy(e, t, i) }, iterator: function (e, t) { return this.list.iterator(e, t) } }), i = t.extend({ set: function (e, t, i) { this.list.value(e, t, JSON.stringify(i)) }, parse: function (e) { return JSON.parse(e) } }), n = t.extend({ init: function (e, i) { t.prototype.init.call(this, e), this.formats = i }, set: function (t, i, n) { n instanceof Date && (n = e.spreadsheet.dateToNumber(n), this.formats.value(t, i, function (e) { return e.replace(/M/g, "m").replace(/'/g, '"').replace(/tt/, "am/pm") }(e.culture().calendar.patterns.d))), this.list.value(t, i, n) } }), e.spreadsheet.PropertyBag = e.Class.extend({ specs: [{ property: t, name: "format", value: null, sortable: !0, serializable: !0 }, { property: n, name: "value", value: null, sortable: !0, serializable: !0, depends: "format" }, { property: t, name: "formula", value: null, sortable: !0, serializable: !0 }, { property: t, name: "background", value: null, sortable: !0, serializable: !0 }, { property: i, name: "vBorders", value: null, sortable: !1, serializable: !1 }, { property: i, name: "hBorders", value: null, sortable: !1, serializable: !1 }, { property: t, name: "color", value: null, sortable: !0, serializable: !0 }, { property: t, name: "fontFamily", value: null, sortable: !0, serializable: !0 }, { property: t, name: "underline", value: null, sortable: !0, serializable: !0 }, { property: t, name: "fontSize", value: null, sortable: !0, serializable: !0 }, { property: t, name: "italic", value: null, sortable: !0, serializable: !0 }, { property: t, name: "bold", value: null, sortable: !0, serializable: !0 }, { property: t, name: "textAlign", value: null, sortable: !0, serializable: !0 }, { property: t, name: "verticalAlign", value: null, sortable: !0, serializable: !0 }, { property: t, name: "wrap", value: null, sortable: !0, serializable: !0 }, { property: t, name: "validation", value: null, sortable: !1, serializable: !0 }, { property: t, name: "enable", value: null, sortable: !1, serializable: !0 }, { property: t, name: "link", value: null, sortable: !1, serializable: !0 }, { property: t, name: "editor", value: null, sortable: !1, serializable: !0 }], init: function (t, i, n) { n = n || {}; var o = t * i - 1; this.rowCount = t, this.columnCount = i, this.cellCount = o, this.properties = {}, this.lists = {}, this.specs.forEach(function (t) { var i = t.name, r = n[i]; void 0 === r && (r = t.value), this.lists[i] = new e.spreadsheet.SparseRangeList(0, o, r), this.properties[i] = new t.property(this.lists[i], this.lists[t.depends]) }, this) }, getState: function () { var e = {}; return this.specs.forEach(function (t) { e[t.name] = this.lists[t.name].getState() }, this), e }, setState: function (e) { this.specs.forEach(function (t) { this.lists[t.name].setState(e[t.name]) }, this) }, get: function (e, t) { if (void 0 === t) return this.lists[e]; switch (e) { case "borderRight": t += this.rowCount; case "borderLeft": e = "vBorders"; break; case "borderBottom": t++; case "borderTop": e = "hBorders" }return t > this.cellCount ? null : this.properties[e].get(t) }, set: function (e, t, i, n) { switch (e) { case "borderRight": t += this.rowCount, i += this.rowCount; case "borderLeft": e = "vBorders"; break; case "borderBottom": t++, i++; case "borderTop": e = "hBorders" }t <= i && i <= this.cellCount && this.properties[e].set(t, i, n) }, fromJSON: function (e, t) { var i, n; for (i = 0; i < this.specs.length; i++)(n = this.specs[i]).serializable && void 0 !== t[n.name] && this.set(n.name, e, e, t[n.name], !1);["borderLeft", "borderRight", "borderTop", "borderBottom"].forEach(function (i) { void 0 !== t[i] && this.set(i, e, e, t[i]) }, this) }, copy: function (e, t, i) { this.specs.forEach(function (n) { this.properties[n.name].copy(e, t, i) }, this) }, iterator: function (e, t, i) { var n = this.properties[e], o = n.iterator(t, i), r = o.at, s = this.cellCount; return o.at = function (e) { return e > s ? null : n.parse(r.call(o, e)) }, o.name = e, o.value = n.list.range.value, o }, sortable: function () { return this.specs.filter(function (e) { return e.sortable }).map(function (e) { return this.lists[e.name] }, this) }, iterators: function (e, t) { return this.specs.reduce(function (i, n) { return n.serializable && i.push(this.iterator(n.name, e, t)), i }.bind(this), []) }, forEach: function (e, t, i) { function n(e, t, i) { var n = t.at(i); n !== t.value && (o[e] = n) } var o, r, s, a, l, c = this.iterators(e, t), d = this.iterator("hBorders", e, t + 1), u = this.iterator("vBorders", e, t), h = this.iterator("vBorders", e + this.rowCount, t + this.rowCount); for (r = e; r <= t; r++) { for (o = {}, s = 0; s < c.length; s++)a = c[s], (l = a.at(r)) !== a.value && (o[a.name] = l); n("borderLeft", u, r), n("borderRight", h, r + this.rowCount), n("borderTop", d, r), (r + 1) % this.rowCount && n("borderBottom", d, r + 1), i(o) } }, forEachProperty: function (e) { for (var t in this.properties) e(this.properties[t]) } }), e.spreadsheet.ALL_PROPERTIES = e.spreadsheet.PropertyBag.prototype.specs.reduce(function (e, t) { return t.serializable && e.push(t.name), e }, ["borderTop", "borderRight", "borderBottom", "borderLeft"])) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/references.min", ["kendo.core.min"], function () { "use strict"; function e(e) { return /^[a-z0-9_]*$/i.test(e) ? e : "'" + e.replace(/\x27/g, "\\'") + "'" } function t(t, i, n, o) { var r = ""; return ++i, isFinite(i) ? null == o || 2 & o || (i = "$" + i) : i = "", isFinite(n) ? (r = function e(t) { var i = Math.floor(t / 26) - 1; return (i >= 0 ? e(i) : "") + String.fromCharCode(65 + t % 26) }(n), null == o || 1 & o || (r = "$" + r)) : n = "", t ? e(t) + "!" + r + i : r + i } var i, n, o, r, s, a, l, c; kendo.support.browser.msie && kendo.support.browser.version < 9 || (i = kendo.spreadsheet, n = kendo.Class, (o = n.extend({ type: "ref", sheet: "", clone: function () { return this }, hasSheet: function () { return this._hasSheet }, simplify: function () { return this }, setSheet: function (e, t) { return this.sheet = e, null != t && (this._hasSheet = t), this }, absolute: function () { return this }, relative: function () { return this }, adjust: function () { return this }, toString: function () { return this.relative(0, 0, 3, 3).print(0, 0) }, forEach: function (e, t) { e.call(t, this) }, map: function (e, t) { return e.call(t, this) }, intersects: function (e) { return this.intersect(e) !== r }, isCell: function () { return !1 }, toRow: function () { return this }, toColumn: function () { return this }, first: function () { return this }, lastRange: function () { return this }, size: function () { return 1 }, rangeAt: function () { return this }, nextRangeIndex: function () { return 0 }, previousRangeIndex: function () { return 0 }, eq: function (e) { var t, i, n, o, s = this, d = e; if (s === r || d === r) return s === d; if ((d instanceof a || d instanceof l && !(s instanceof a)) && (s = e, d = this), s instanceof a) return (d = d.simplify()) instanceof a && s.row == d.row && s.col == d.col && s.sheet == d.sheet; if (s instanceof l) { if (d instanceof l) return d.topLeft.eq(s.topLeft) && d.bottomRight.eq(s.bottomRight); if (d instanceof c) return d.single() && s.eq(d.refs[0]) } else if (s instanceof c && d instanceof c) { if (t = s.refs, i = d.refs, t.length != i.length) return !1; for (n = 0, o = t.length; n < o; n++)if (!t[n].eq(i[n])) return !1; return !0 } return s === d }, concat: function (e) { return new c([this, e]) }, replaceAt: function (e, t) { return t }, forEachColumnIndex: function (e) { this.forEachAxisIndex("col", e) }, forEachRowIndex: function (e) { this.forEachAxisIndex("row", e) }, forEachAxisIndex: function (e, t) { var i = [], n = "row" === e ? "forEachRow" : "forEachColumn"; this[n](function (t) { var n = t.first()[e]; -1 === i.indexOf(n) && i.push(n) }), i.sort(function (e, t) { return e > t ? 1 : e < t ? -1 : 0 }).forEach(t) }, valid: function () { return !1 }, renameSheet: function (e, t) { if (this.sheet && this.sheet.toLowerCase() == e.toLowerCase()) return this.sheet = t, !0 } })).display = t, r = new (o.extend({ init: function () { }, print: function () { return "#NULL!" }, eq: function (e) { return e === this }, forEach: function () { } })), s = o.extend({ ref: "name", init: function (e) { this.name = e }, clone: function () { return new s(this.name).setSheet(this.sheet, this.hasSheet()) }, print: function () { var t = e(this.name); return this.hasSheet() && (t = e(this.sheet) + "!" + t), t } }), a = o.extend({ ref: "cell", init: function (e, t, i) { this.row = e, this.col = t, this.rel = i || 0 }, clone: function () { return new a(this.row, this.col, this.rel).setSheet(this.sheet, this.hasSheet()) }, intersect: function (e) { return e instanceof a ? this.eq(e) ? this : r : e.intersect(this) }, print: function (i, n, o) { var r, s, a = this.col, l = this.row, c = this.rel; return null == i && c ? (s = this.hasSheet() ? e(this.sheet) + "!" : "", a = isFinite(a) ? 1 & c ? "C[" + a + "]" : "C" + (a + 1) : "", l = isFinite(l) ? 2 & c ? "R[" + l + "]" : "R" + (l + 1) : "", s + l + a) : (r = this.absolute(i, n), o ? (l = r.row % 1048576, a = r.col % 16384, l < 0 && (l += 1048576), a < 0 && (a += 16384), t(this._hasSheet && this.sheet, l, a, c)) : r.valid() ? t(this._hasSheet && this.sheet, r.row, r.col, c) : "#REF!") }, absolute: function (e, t) { var i = this.clone(); return !1 & i.rel ? i : (1 & i.rel && (i.col = (i.col + t) % 16384), 2 & i.rel && (i.row = (i.row + e) % 1048576), i.rel = 0, i) }, toRangeRef: function () { return new l(this, this) }, relative: function (e, t, i) { var n, o; return null == i && (i = this.rel), n = 2 & i ? this.row - e : this.row, o = 1 & i ? this.col - t : this.col, new a(n, o, i).setSheet(this.sheet, this.hasSheet()) }, height: function () { return 1 }, width: function () { return 1 }, toString: function () { return t(null, this.row, this.col, 3) }, isCell: function () { return !0 }, leftColumn: function () { return this }, rightColumn: function () { return this }, topRow: function () { return this }, bottomRow: function () { return this }, forEachRow: function (e) { e(this.toRangeRef()) }, forEachColumn: function (e) { e(this.toRangeRef()) }, adjust: function (e, t, i, n, o, s, a) { var l = this.absolute(e, t); if (o) { if (l.row >= s) { if (a < 0 && l.row < s - a) return r; l.row += a } } else if (l.col >= s) { if (a < 0 && l.col < s - a) return r; l.col += a } return null != i && null != n && (l = l.relative(i, n, this.rel)), l }, valid: function () { if (this.rel) throw Error("valid() called on relative reference"); var e = this.col, t = this.row; return !(isFinite(e) && e < 0 || isFinite(t) && t < 0) } }), l = o.extend({ ref: "range", init: function (e, t) { e._hasSheet && t._hasSheet && e.sheet.toLowerCase() != t.sheet.toLowerCase() && (this.endSheet = t.sheet), this.topLeft = new a(e.row, e.col, e.rel), this.bottomRight = new a(t.row, t.col, t.rel), this.normalize() }, clone: function () { return new l(this.topLeft.clone(), this.bottomRight.clone()).setSheet(this.sheet, this.hasSheet()) }, _containsRange: function (e) { return this._containsCell(e.topLeft) && this._containsCell(e.bottomRight) }, _containsCell: function (e) { return e.sheet == this.sheet && e.row >= this.topLeft.row && e.col >= this.topLeft.col && e.row <= this.bottomRight.row && e.col <= this.bottomRight.col }, contains: function (e) { if (e instanceof Array) { var t = this; return e.some(function (e) { return t.contains(e) }) } return e instanceof a ? this._containsCell(e) : e instanceof l && this._containsRange(e) }, _intersectRange: function (e) { var t, i, n, o, s, c, d, u; return this.sheet != e.sheet ? r : (t = this.topLeft.col, i = this.topLeft.row, n = this.bottomRight.col, o = this.bottomRight.row, s = e.topLeft.col, c = e.topLeft.row, d = e.bottomRight.col, u = e.bottomRight.row, t <= d && s <= n && i <= u && c <= o ? new l(new a(Math.max(i, c), Math.max(t, s)), new a(Math.min(o, u), Math.min(n, d))).setSheet(this.sheet, this.hasSheet()) : r) }, intersect: function (e) { return e instanceof a ? this._containsCell(e) ? e : r : e instanceof l ? this._intersectRange(e).simplify() : e instanceof c ? e.intersect(this) : r }, simplify: function () { return this.isCell() ? new a(this.topLeft.row, this.topLeft.col, this.topLeft.rel).setSheet(this.sheet, this.hasSheet()) : this }, normalize: function () { var e, t = this.topLeft, i = this.bottomRight, n = t.row, o = t.col, r = i.row, s = i.col, l = 2 & t.rel, c = 1 & t.rel, d = 2 & i.rel, u = 1 & i.rel, h = !1; return n > r && (h = !0, e = n, n = r, r = e, e = l, l = d, d = e), o > s && (h = !0, e = o, o = s, s = e, e = c, c = u, u = e), h && (this.topLeft = new a(n, o, c | l), this.bottomRight = new a(r, s, u | d)), this }, print: function (t, i, n) { if (n || this.absolute(t, i).valid()) { var o = this.topLeft.print(t, i, n) + ":" + this.bottomRight.print(t, i, n); return this.hasSheet() && (o = e(this.sheet) + (this.endSheet ? ":" + e(this.endSheet) : "") + "!" + o), o } return "#REF!" }, absolute: function (e, t) { return new l(this.topLeft.absolute(e, t), this.bottomRight.absolute(e, t)).setSheet(this.sheet, this.hasSheet()) }, relative: function (e, t, i, n) { return null == n && (n = i), new l(this.topLeft.relative(e, t, i), this.bottomRight.relative(e, t, n)).setSheet(this.sheet, this.hasSheet()) }, height: function () { if (this.topLeft.rel != this.bottomRight.rel) throw Error("Mixed relative/absolute references"); return this.bottomRight.row - this.topLeft.row + 1 }, width: function () { if (this.topLeft.rel != this.bottomRight.rel) throw Error("Mixed relative/absolute references"); return this.bottomRight.col - this.topLeft.col + 1 }, collapse: function () { return this.topLeft.toRangeRef() }, leftColumn: function () { return new l(this.topLeft, new a(this.bottomRight.row, this.topLeft.col)) }, rightColumn: function () { return new l(new a(this.topLeft.row, this.bottomRight.col), this.bottomRight) }, topRow: function () { return new l(this.topLeft, new a(this.topLeft.row, this.bottomRight.col)) }, bottomRow: function () { return new l(new a(this.bottomRight.row, this.topLeft.col), this.bottomRight) }, toRangeRef: function () { return this }, toRow: function (e) { return e += Math.max(0, this.topLeft.row), new l(new a(e, this.topLeft.col), new a(e, this.bottomRight.col)).setSheet(this.sheet, this.hasSheet()) }, toColumn: function (e) { return e += Math.max(0, this.topLeft.col), new l(new a(this.topLeft.row, e), new a(this.bottomRight.row, e)).setSheet(this.sheet, this.hasSheet()) }, toCell: function (e, t) { return e += Math.max(0, this.topLeft.row), t += Math.max(0, this.topLeft.col), new a(e, t, 0).setSheet(this.sheet, this.hasSheet()) }, forEachRow: function (e) { var t, i = this.topLeft.row, n = this.bottomRight.row, o = this.topLeft.col, r = this.bottomRight.col; for (t = i; t <= n; t++)e(new l(new a(t, o), new a(t, r))) }, forEachColumn: function (e) { var t, i = this.topLeft.row, n = this.bottomRight.row, o = this.topLeft.col, r = this.bottomRight.col; for (t = o; t <= r; t++)e(new l(new a(i, t), new a(n, t))) }, intersecting: function (e) { return e.filter(function (e) { return e.toRangeRef().intersects(this) }, this) }, union: function (e, t) { var i, n = this.intersecting(e), o = this.topLeft.row, r = this.topLeft.col, s = this.bottomRight.row, c = this.bottomRight.col, d = !1; return n.forEach(function (e) { (e = e.toRangeRef()).topLeft.row < o && (d = !0, o = e.topLeft.row), e.topLeft.col < r && (d = !0, r = e.topLeft.col), e.bottomRight.row > s && (d = !0, s = e.bottomRight.row), e.bottomRight.col > c && (d = !0, c = e.bottomRight.col), t && t(e) }), i = new l(new a(o, r), new a(s, c)), d ? i.union(e, t) : i }, resize: function (e) { function t(e) { return e || 0 } var i = Math.max.bind(Math, 0), n = this.topLeft.row + t(e.top), o = this.topLeft.col + t(e.left), s = this.bottomRight.row + t(e.bottom), c = this.bottomRight.col + t(e.right); return o < 0 && c < 0 || n < 0 && s < 0 ? r : n <= s && o <= c ? new l(new a(i(n), i(o)), new a(i(s), i(c))) : r }, move: function (e, t) { return new l(new a(this.topLeft.row + e, this.topLeft.col + t), new a(this.bottomRight.row + e, this.bottomRight.col + t)) }, first: function () { return this.topLeft }, isCell: function () { return !this.endSheet && this.topLeft.eq(this.bottomRight) }, toString: function () { return this.topLeft + ":" + this.bottomRight }, adjust: function (e, t, i, n, o, s, a) { var c = this.topLeft.adjust(e, t, i, n, o, s, a), d = this.bottomRight.adjust(e, t, i, n, o, s, a); return c === r && d === r ? r : (c === r ? (c = this.topLeft.absolute(e, t), o ? c.row = s : c.col = s, null != i && null != n && (c = c.relative(i, n, this.topLeft.rel))) : d === r && (d = this.bottomRight.absolute(e, t), o ? d.row = s - 1 : d.col = s - 1, null != i && null != n && (d = d.relative(i, n, this.bottomRight.rel))), new l(c, d).setSheet(this.sheet, this.hasSheet()).simplify()) }, valid: function () { return this.topLeft.valid() && this.bottomRight.valid() } }), c = o.extend({ init: function (e) { this.refs = e, this.length = e.length }, clone: function () { return new c(this.refs.slice()) }, intersect: function (e) { var t, i, n = []; for (t = 0; t < this.length; ++t)(i = e.intersect(this.refs[t])) !== r && n.push(i); return n.length > 0 ? new c(n).simplify() : r }, simplify: function () { var e = new c(this.refs.reduce(function (e, t) { return (t = t.simplify()) !== r && e.push(t), e }, [])); return e.empty() ? r : e.single() ? e.refs[0] : e }, absolute: function (e, t) { return new c(this.refs.map(function (i) { return i.absolute(e, t) })) }, forEach: function (e, t) { this.refs.forEach(function (i) { i instanceof c ? i.forEach(e, t) : e.call(t, i) }, t) }, toRangeRef: function () { return this.refs[0].toRangeRef() }, contains: function (e) { return this.refs.some(function (t) { return t.contains(e) }) }, map: function (e, t) { var i = []; return this.forEach(function (n) { i.push(e.call(t, n)) }), new c(i) }, first: function () { return this.refs[0].first() }, lastRange: function () { return this.refs[this.length - 1] }, size: function () { return this.length }, single: function () { return 1 == this.length }, empty: function () { return 0 === this.length }, isCell: function () { return this.single() && this.refs[0].isCell() }, rangeAt: function (e) { return this.refs[e] }, nextRangeIndex: function (e) { return e === this.length - 1 ? 0 : e + 1 }, previousRangeIndex: function (e) { return 0 === e ? this.length - 1 : e - 1 }, concat: function (e) { return new c(this.refs.concat([e])) }, print: function (e, t, i) { return this.refs.map(function (n) { return n.print(e, t, i) }).join(",") }, replaceAt: function (e, t) { var i = this.refs.slice(); return i.splice(e, 1, t), new c(i) }, leftColumn: function () { return this.map(function (e) { return e.leftColumn() }) }, rightColumn: function () { return this.map(function (e) { return e.rightColumn() }) }, topRow: function () { return this.map(function (e) { return e.topRow() }) }, bottomRow: function () { return this.map(function (e) { return e.bottomRow() }) }, forEachRow: function (e) { this.forEach(function (t) { t.forEachRow(e) }) }, forEachColumn: function (e) { this.forEach(function (t) { t.forEachColumn(e) }) }, adjust: function (e, t, i, n, o, r, s) { return this.map(function (a) { return a.adjust(e, t, i, n, o, r, s) }).simplify() }, toString: function () { return this.refs.map(function (e) { return "" + e }).join(", ") }, valid: function () { for (var e = this.refs.length; --e >= 0;)if (this.refs[e].valid()) return !1; return !0 }, renameSheet: function (e, t) { this.refs.forEach(function (i) { i.renameSheet(e, t) }) } }), i.NULLREF = r, i.SHEETREF = new l(new a(0, 0), new a(1 / 0, 1 / 0)), i.FIRSTREF = new a(0, 0), i.Ref = o, i.NameRef = s, i.CellRef = a, i.RangeRef = l, i.UnionRef = c, i.SHEETREF.print = function () { return "#SHEET" }) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/autofillcalculator.min", ["kendo.core.min"], function () { e = kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.spreadsheet.RangeRef, i = e.spreadsheet.CellRef, n = e.Class.extend({ init: function (e) { this._grid = e }, rectIsVertical: function (e, t, i, n) { var o = this._grid.rectangle(e.toRangeRef()), r = this._grid.rectangle(t.toRangeRef()); return Math.abs(r[n] - o[n]) > Math.abs(o[i] - r[i]) }, autoFillDest: function (e, n) { var o, r, s, a, l, c, d = e.topLeft, u = e.bottomRight, h = n.row >= d.row, f = n.col >= d.col; return 4 == (o = h ? f ? 4 : 3 : f ? 2 : 1) ? (r = d, s = u, (n.row > s.row || n.col > s.col) && (n = new i(Math.max(n.row, s.row), Math.max(n.col, s.col))), a = this.rectIsVertical(s, n, "right", "bottom") ? new i(n.row, s.col) : new i(s.row, n.col)) : 3 === o ? (l = new i(d.col, u.row), n.row > u.row && this.rectIsVertical(l, n, "left", "bottom") ? (r = d, a = new i(n.row, u.col)) : (r = u, a = new i(d.row, n.col))) : 2 === o ? (c = new i(d.row, u.col), n.col > u.col && !this.rectIsVertical(c, n, "right", "top") ? (r = d, a = new i(u.row, n.col)) : (r = u, a = new i(n.row, d.col))) : (r = u, a = this.rectIsVertical(d, n, "left", "top") ? new i(n.row, d.col) : new i(d.row, n.col)), this._grid.normalize(new t(r, a)) } }), e.spreadsheet.AutoFillCalculator = n); var e, t, i, n }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/navigator.min", ["kendo.core.min", "spreadsheet/autofillcalculator.min"], function () { e = kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.spreadsheet.RangeRef, i = e.spreadsheet.CellRef, n = e.Class.extend({ init: function (e, t, i, n) { this.rangeGetter = i, this.prevLeft = function (i) { var o = n(this.range(i)), r = this.range(t.prevVisible(o.topLeft[e])); return n(r).topLeft[e] }, this.nextRight = function (i) { var o = n(this.range(i)), r = this.range(t.nextVisible(o.bottomRight[e])); return n(r).bottomRight[e] }, this.nextLeft = function (i) { var o = n(this.range(i)); return t.nextVisible(o.bottomRight[e]) }, this.prevRight = function (i) { var o = n(this.range(i)); return t.prevVisible(o.topLeft[e]) } }, boundary: function (e, t) { this.top = e, this.bottom = t }, range: function (e) { return this.rangeGetter(e, this.top, this.bottom) } }), o = e.Class.extend({ init: function (t) { this._sheet = t, this.columns = this._sheet._grid._columns, this.autoFillCalculator = new e.spreadsheet.AutoFillCalculator(t._grid), this.colEdge = new n("col", this._sheet._grid._columns, this.columnRange.bind(this), this.union.bind(this)), this.rowEdge = new n("row", this._sheet._grid._rows, this.rowRange.bind(this), this.union.bind(this)) }, height: function (e) { this._viewPortHeight = e }, union: function (e) { return this._sheet.unionWithMerged(e) }, columnRange: function (e, t, i) { return this._sheet._ref(t, e, i - t, 1) }, rowRange: function (e, t, i) { return this._sheet._ref(e, t, 1, i - t) }, selectionIncludesMergedCells: function () { return this._sheet.select().contains(this._sheet._mergedCells) }, setSelectionValue: function (e) { var t = this._sheet.selection(); setTimeout(function () { t.value(e()) }) }, selectAll: function () { this._sheet.select(this._sheet._sheetRef) }, select: function (e, t, i) { e = this.refForMode(e, t), i && (e = this._sheet.select().concat(e)), this._sheet.select(e) }, refForMode: function (e, t) { var i = this._sheet._grid; switch (t) { case "range": e = i.normalize(e); break; case "row": e = i.rowRef(e.row); break; case "column": e = i.colRef(e.col); break; case "sheet": e = this._sheet._sheetRef }return e }, startSelection: function (e, i, n, o) { if ("autofill" == i) this._sheet.startAutoFill(); else if (o && "range" == i) { var r = new t(this._sheet.activeCell().first(), e); this._sheet.select(r, !1, !1), this._sheet.startSelection() } else this._sheet.startSelection(), this.select(e, i, n) }, completeSelection: function () { this._sheet.completeSelection() }, selectForContextMenu: function (e, t) { var i = this._sheet; i.select().contains(this.refForMode(e, t)) || this.select(e, t) }, modifySelection: function (e) { var i, n, o = this.determineDirection(e), r = this._sheet, s = this._viewPortHeight, a = r._grid._rows, l = r._grid._columns, c = r.currentOriginalSelectionRange(), d = r.select().toRangeRef(), u = r.activeCell(), h = c.topLeft.clone(), f = c.bottomRight.clone(); switch (this.colEdge.boundary(d.topLeft.row, d.bottomRight.row), this.rowEdge.boundary(d.topLeft.col, d.bottomRight.col), o) { case "expand-left": h.col = this.colEdge.prevLeft(h.col), i = h; break; case "shrink-right": h.col = this.colEdge.nextLeft(h.col), i = h; break; case "expand-right": f.col = this.colEdge.nextRight(f.col), i = f; break; case "shrink-left": f.col = this.colEdge.prevRight(f.col), i = f; break; case "expand-up": h.row = this.rowEdge.prevLeft(h.row), i = h; break; case "shrink-down": h.row = this.rowEdge.nextLeft(h.row), i = h; break; case "expand-down": f.row = this.rowEdge.nextRight(f.row), i = f; break; case "shrink-up": f.row = this.rowEdge.prevRight(f.row), i = f; break; case "expand-page-up": h.row = a.prevPage(h.row, s); break; case "shrink-page-up": f.row = a.prevPage(f.row, s); break; case "expand-page-down": f.row = a.nextPage(f.row, s); break; case "shrink-page-down": h.row = a.nextPage(h.row, s); break; case "first-col": h.col = l.firstVisible(), f.col = u.bottomRight.col, i = h; break; case "last-col": f.col = l.lastVisible(), h.col = u.topLeft.col, i = f; break; case "first-row": h.row = a.firstVisible(), f.row = u.bottomRight.row, i = h; break; case "last-row": f.row = a.lastVisible(), h.row = u.topLeft.row, i = f; break; case "last": f.row = a.lastVisible(), f.col = l.lastVisible(), h = u.topLeft, i = f; break; case "first": h.row = a.firstVisible(), h.col = l.firstVisible(), f = u.bottomRight, i = h }return n = new t(h, f), this.union(n).intersects(u) ? (i && r.focus(i), void this.updateCurrentSelectionRange(n)) : void this.modifySelection(o.replace("shrink", "expand")) }, moveActiveCell: function (e) { var t = this._sheet, n = t.activeCell(), o = n.topLeft, r = n.bottomRight, s = t.originalActiveCell(), a = t._grid._rows, l = t._grid._columns, c = s.row, d = s.col; switch (e) { case "left": d = l.prevVisible(o.col); break; case "up": c = a.prevVisible(o.row); break; case "right": d = l.nextVisible(r.col); break; case "down": c = a.nextVisible(r.row); break; case "first-col": d = l.firstVisible(); break; case "last-col": d = l.lastVisible(); break; case "first-row": c = a.firstVisible(); break; case "last-row": c = a.lastVisible(); break; case "last": c = a.lastVisible(), d = l.lastVisible(); break; case "first": c = a.firstVisible(), d = l.firstVisible(); break; case "next-page": c = a.nextPage(r.row, this._viewPortHeight); break; case "prev-page": c = a.prevPage(r.row, this._viewPortHeight) }t.select(new i(c, d)) }, navigateInSelection: function (e) { for (var t, n = this._sheet, o = n.activeCell(), r = o.topLeft, s = n.originalActiveCell(), a = n._grid._rows, l = n._grid._columns, c = s.row, d = s.col, u = n.currentNavigationRange(), h = u.topLeft, f = u.bottomRight, p = !1, m = r.col, g = r.row; !p;) { switch (t = new i(c, d), e) { case "next": f.eq(t) ? (u = n.nextNavigationRange(), c = u.topLeft.row, d = u.topLeft.col) : (d = l.nextVisible(m, !0)) > f.col && (d = h.col, c = a.nextVisible(c, !0)); break; case "previous": h.eq(t) ? (u = n.previousNavigationRange(), c = u.bottomRight.row, d = u.bottomRight.col) : (d = l.prevVisible(m, !0)) < h.col && (d = f.col, c = a.prevVisible(c, !0)); break; case "lower": f.eq(t) ? (u = n.nextNavigationRange(), c = u.topLeft.row, d = u.topLeft.col) : (c = a.nextVisible(g, !0)) > f.row && (c = h.row, d = l.nextVisible(d, !0)); break; case "upper": h.eq(t) ? (u = n.previousNavigationRange(), c = u.bottomRight.row, d = u.bottomRight.col) : (c = a.prevVisible(g, !0)) < h.row && (c = f.row, d = l.prevVisible(d, !0)); break; default: throw Error("Unknown entry navigation: " + e) }p = !this.shouldSkip(c, d), m = d, g = c } n.singleCellSelection() ? n.select(new i(c, d)) : n.activeCell(new i(c, d)) }, extendSelection: function (e, i) { var n, o = this._sheet, r = o._grid; return "autofill" === i ? void this.resizeAutoFill(e) : ("range" === i ? e = r.normalize(e) : "row" === i ? e = r.rowRef(e.row).bottomRight : "column" === i && (e = r.colRef(e.col).bottomRight), n = o.originalActiveCell().toRangeRef(), void this.updateCurrentSelectionRange(new t(n.topLeft, e))) }, shouldSkip: function (e, t) { var n = new i(e, t), o = !1; return this._sheet.forEachMergedCell(function (e) { e.intersects(n) && !e.collapse().eq(n) && (o = !0) }), o }, resizeAutoFill: function (e) { var t, i, n, o, r, s = this._sheet, a = s.select(), l = s._autoFillOrigin, c = this.autoFillCalculator.autoFillDest(a, e), d = this.punch(a, c); d || (o = s.range(c)._previewFillFrom(s.range(l))) && (i = o.direction, r = o.props, 0 === i || 1 == i ? (n = r[r.length - 1], t = n[n.length - 1].value) : 2 === i ? (n = r[0], t = n[n.length - 1].value) : 3 === i && (n = r[r.length - 1], t = n[0].value)), s.updateAutoFill(c, d, t, i) }, determineDirection: function (e) { var t = this._sheet.currentSelectionRange(), i = this._sheet.activeCell(), n = i.topLeft.col == t.topLeft.col, o = i.bottomRight.col == t.bottomRight.col, r = i.topLeft.row == t.topLeft.row, s = i.bottomRight.row == t.bottomRight.row; switch (e) { case "left": e = o ? "expand-left" : "shrink-left"; break; case "right": e = n ? "expand-right" : "shrink-right"; break; case "up": e = s ? "expand-up" : "shrink-up"; break; case "down": e = r ? "expand-down" : "shrink-down"; break; case "prev-page": e = s ? "expand-page-up" : "shrink-page-up"; break; case "next-page": e = r ? "expand-page-down" : "shrink-page-down" }return e }, updateCurrentSelectionRange: function (e) { var t = this._sheet; t.select(t.originalSelect().replaceAt(t.selectionRangeIndex(), e), !1) }, punch: function (e, n) { var o, r, s; return n.topLeft.eq(e.topLeft) && (n.bottomRight.row < e.bottomRight.row ? (r = this.rowEdge.nextRight(n.bottomRight.row), o = new t(new i(r, e.topLeft.col), e.bottomRight)) : n.bottomRight.col < e.bottomRight.col && (s = this.colEdge.nextRight(n.bottomRight.col), o = new t(new i(e.topLeft.row, s), e.bottomRight))), o } }), e.spreadsheet.SheetNavigator = o); var e, t, i, n, o }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/axismanager.min", ["kendo.core.min"], function () { !function (e) { if (!(e.support.browser.msie && e.support.browser.version < 9)) { var t = e.Class.extend({ init: function (e) { this._sheet = e }, forEachSelectedColumn: function (e) { var t = this._sheet; t.batch(function () { t.select().forEachColumnIndex(function (i, n) { e(t, i, n) }) }, { layout: !0, recalc: !0 }) }, forEachSelectedRow: function (e) { var t = this._sheet; t.batch(function () { t.select().forEachRowIndex(function (i, n) { e(t, i, n) }) }, { layout: !0, recalc: !0 }) }, includesHiddenColumns: function (e) { return this._sheet._grid._columns.includesHidden(e.topLeft.col, e.bottomRight.col) }, includesHiddenRows: function (e) { return this._sheet._grid._rows.includesHidden(e.topLeft.row, e.bottomRight.row) }, selectionIncludesHiddenColumns: function () { return this.includesHiddenColumns(this._sheet.select()) }, selectionIncludesHiddenRows: function () { return this.includesHiddenRows(this._sheet.select()) }, deleteSelectedColumns: function () { this.forEachSelectedColumn(function (e, t, i) { e.deleteColumn(t - i) }) }, deleteSelectedRows: function () { this.forEachSelectedRow(function (e, t, i) { e.deleteRow(t - i) }) }, hideSelectedColumns: function () { var t, i, n, o, r, s, a; for (this.forEachSelectedColumn(function (e, t) { e.hideColumn(t) }), t = this._sheet, i = t.select().toRangeRef(), n = i.topLeft.col, o = i.bottomRight.col, r = null; s = o < t._columns._count, (a = n >= 0) || s;) { if (s && !t.isHiddenColumn(o)) { r = o; break } if (a && !t.isHiddenColumn(n)) { r = n; break } n--, o++ } null !== r && (i = new e.spreadsheet.RangeRef(new e.spreadsheet.CellRef(0, r), new e.spreadsheet.CellRef(t._rows._count - 1, r)), t.range(i).select()) }, hideSelectedRows: function () { var t, i, n, o, r, s, a; for (this.forEachSelectedRow(function (e, t) { e.hideRow(t) }), t = this._sheet, i = t.select().toRangeRef(), n = i.topLeft.row, o = i.bottomRight.row, r = null; s = o < t._rows._count, (a = n >= 0) || s;) { if (s && !t.isHiddenRow(o)) { r = o; break } if (a && !t.isHiddenRow(n)) { r = n; break } n--, o++ } null !== r && (i = new e.spreadsheet.RangeRef(new e.spreadsheet.CellRef(r, 0), new e.spreadsheet.CellRef(r, t._columns._count - 1)), t.range(i).select()) }, unhideSelectedColumns: function () { this.forEachSelectedColumn(function (e, t) { e.unhideColumn(t) }) }, unhideSelectedRows: function () { this.forEachSelectedRow(function (e, t) { e.unhideRow(t) }) }, addColumnLeft: function () { this.forEachSelectedColumn(function (e, t, i) { e.insertColumn(t - i) }) }, addColumnRight: function () { this.forEachSelectedColumn(function (e, t, i) { e.insertColumn(t + (i + 1)) }) }, preventAddRow: function () { var e = this._sheet.select().toRangeRef(), t = e.height(); return this._sheet.preventInsertRow(0, t) }, preventAddColumn: function () { var e = this._sheet.select().toRangeRef(), t = e.width(); return this._sheet.preventInsertColumn(0, t) }, addRowAbove: function () { this.forEachSelectedRow(function (e, t, i) { e.insertRow(t - i) }) }, addRowBelow: function () { this.forEachSelectedRow(function (e, t, i) { e.insertRow(t + (i + 1)) }) } }); e.spreadsheet.AxisManager = t } }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/clipboard.min", ["kendo.core.min"], function () { !function (e) { function t() { var e = new l(0, 0, 0); return { ref: e, mergedCells: [], data: [], foreign: !0, origRef: e.toRangeRef() } } function i(e, t, i, n) { var o, r = e.data || (e.data = []); r[t] || (r[t] = []), r[t][i] = n, (o = e.origRef.bottomRight).row = Math.max(o.row, t), o.col = Math.max(o.col, i) } function n(e) { return e.replace(/^-(?:ms|moz|webkit)-/, "") } function o(e) { var t = window.getComputedStyle(e[0]), i = e[0].innerText, o = function (e) { var t = {}; return ["borderBottom", "borderRight", "borderLeft", "borderTop"].forEach(function (i) { t[i] = "none" == e[i + "Style"] ? null : { size: 1, color: e[i + "Color"] } }), t }(t), r = { value: "" === i ? null : i, borderBottom: o.borderBottom, borderRight: o.borderRight, borderLeft: o.borderLeft, borderTop: o.borderTop, fontSize: parseInt(t["font-size"], 10) }; return "rgb(0, 0, 0)" !== t["background-color"] && "rgba(0, 0, 0, 0)" !== t["background-color"] && (r.background = t["background-color"]), "rgb(0, 0, 0)" !== t.color && "rgba(0, 0, 0, 0)" !== t.color && (r.color = t.color), "underline" == t["text-decoration"] && (r.underline = !0), "italic" == t["font-style"] && (r.italic = !0), "bold" == t["font-weight"] && (r.bold = !0), "right" !== n(t["text-align"]) && (r.textAlign = n(t["text-align"])), "middle" !== t["vertical-align"] && (r.verticalAlign = t["vertical-align"]), "normal" !== t["word-wrap"] && (r.wrap = !0), r } function r(e) { var n = t(); return e.find(">tr, >tbody>tr").each(function (t, i) { a(i).find(">td, >th").each(function (n, o) { var r, s, l, c, d, u = parseInt(a(o).attr("rowspan"), 10) - 1 || 0, h = parseInt(a(o).attr("colspan"), 10) - 1 || 0, f = "<td/>"; if (u) { for (s = t + u, l = t; l <= s; l++)if (c = e.find("tr").eq(l), l > t && (f = "<td class='rowspan'></td>", 0 === n ? c.find("td").eq(n).after(f) : (d = Math.min(c.find("td").length, n), c.find("td").eq(d - 1).after(f))), h) for (r = n; r < h + n; r++)f = "<td class='rowspan colspan'></td>", c.find("td").eq(r).after(f) } else if (h) for (r = n; r < h + n; r++)f = "<td class='colspan'></td>", a(i).find("td").eq(r).after(f) }) }), e.find(">tr, >tbody>tr").each(function (e, t) { a(t).find(">td, >th").each(function (t, r) { var s, l, c, d = parseInt(a(r).attr("rowspan"), 10) - 1 || 0, u = parseInt(a(r).attr("colspan"), 10) - 1 || 0; i(n, e, t, o(a(r))), (d || u) && (s = String.fromCharCode(65 + t), l = String.fromCharCode(65 + t + u), c = s + (e + 1) + ":" + l + (e + 1 + d), n.mergedCells.push(c)) }) }), n } function s(e) { var n, o, r, s, a = t(); if (-1 === e.indexOf("\t") && -1 == e.indexOf("\n")) i(a, 0, 0, { value: e }); else for (n = e.split("\n"), o = 0; o < n.length; o++)for (r = n[o].split("\t"), s = 0; s < r.length; s++)i(a, o, s, { value: r[s] }); return a } var a, l, c; e.support.browser.msie && e.support.browser.version < 9 || (a = e.jQuery, l = e.spreadsheet.CellRef, c = e.Class.extend({ init: function (t) { this._content = {}, this._externalContent = {}, this._internalContent = {}, this.workbook = t, this.origin = e.spreadsheet.NULLREF, this.iframe = document.createElement("iframe"), this.iframe.className = "k-spreadsheet-clipboard-paste", this.menuInvoked = !0, this._uid = e.guid(), document.body.appendChild(this.iframe) }, destroy: function () { document.body.removeChild(this.iframe) }, canCopy: function () { var t = { canCopy: !0 }, i = this.workbook.activeSheet().select(); return i === e.spreadsheet.NULLREF && (t.canCopy = !1), i instanceof e.spreadsheet.UnionRef && (t.canCopy = !1, t.multiSelection = !0), this.menuInvoked && (t.canCopy = !1, t.menuInvoked = !0), t }, canPaste: function () { var e = this.workbook.activeSheet(), t = this.pasteRef(), i = e.range(t), n = { canPaste: !0, pasteOnMerged: !1, pasteOnDisabled: !1 }; return i.enable() || (n.canPaste = !1, n.pasteOnDisabled = !0), t.eq(e.unionWithMerged(t)) || (n.canPaste = !1, n.pasteOnMerged = !0), this.menuInvoked && (n.canPaste = !1, n.menuInvoked = !0), (t.bottomRight.row >= e._rows._count || t.bottomRight.col >= e._columns._count) && (n.canPaste = !1, n.overflow = !0), n }, intersectsMerged: function () { var e, t = this.workbook.activeSheet(); return this.parse(), this.origin = this._content.origRef, !(e = this.pasteRef()).eq(t.unionWithMerged(e)) }, copy: function () { var e = this.workbook.activeSheet(); this.origin = e.select(), this._internalContent = e.selection().getState(), delete this._externalContent.html, delete this._externalContent.plain }, cut: function () { var e = this.workbook.activeSheet(); this.copy(), e.range(e.select()).clear() }, pasteRef: function () { var e = this.workbook.activeSheet(), t = e.activeCell().first(), i = this.origin.first(), n = i.row - t.row, o = i.col - t.col; return this.origin.relative(n, o, 3) }, paste: function () { var e = this.workbook.activeSheet(), t = this.pasteRef(); e.range(t).setState(this._content, this), e.triggerChange({ recalc: !0, ref: t }) }, external: function (e) { return e && (e.html || e.plain) ? void (this._externalContent = e) : this._externalContent }, isExternal: function () { return !this._isInternal() }, parse: function () { var e, i, n, o = t(); this._isInternal() ? o = this._internalContent : ((e = this._externalContent).html ? ((i = this.iframe.contentWindow.document).open(), i.write(e.html), i.close(), n = a(i).find("table:first"), o = n.length ? r(n) : s(e.plain)) : o = s(e.plain), this.origin = o.origRef), this._content = o }, _isInternal: function () { var e, t; return void 0 === this._externalContent.html || (e = !!a("<div/>").html(this._externalContent.html).find("table.kendo-clipboard-" + this._uid).length, t = !!a("<div/>").html(this._externalContent.plain).find("table.kendo-clipboard-" + this._uid).length, e || t) } }), e.spreadsheet.Clipboard = c) }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/range.min", ["kendo.core.min", "util/text-metrics.min"], function () { !function (e) { function t(e, i, n) { for (; e <= i && n(e);)e++; if (e > i) return []; for (var o = e + 1; o <= i; ++o)if (n(o)) return [{ begin: e, end: o - 1 }].concat(t(o + 1, i, n)); return [{ begin: e, end: i }] } var i, n, o, r, s, a, l; e.support.browser.msie && e.support.browser.version < 9 || (i = e.jQuery, n = e.spreadsheet.UnionRef, o = e.spreadsheet.CellRef, r = e.spreadsheet.RangeRef, s = ["color", "fontFamily", "underline", "italic", "bold", "textAlign", "verticalAlign", "background", "format", "link", "editor", "borderTop", "borderRight", "borderBottom", "borderLeft"], a = e.Class.extend({ init: function (e, t) { this._sheet = t, this._ref = e }, clone: function () { return new a(this._ref.clone(), this._sheet) }, skipHiddenCells: function () { var e = [], i = this, s = i._sheet, a = s.isHiddenRow.bind(s), l = s.isHiddenColumn.bind(s); return i._ref.forEach(function (n) { var s, c, d, u, h, f; for (n = i._normalize(n.toRangeRef()), s = n.topLeft, c = n.bottomRight, d = t(s.row, c.row, a), u = t(s.col, c.col, l), h = 0; h < d.length; ++h)for (f = 0; f < u.length; ++f)e.push(new r(new o(d[h].begin, u[f].begin), new o(d[h].end, u[f].end))) }), s.range(e.length > 1 ? new n(e) : e[0]) }, _normalize: function (e) { return this._sheet._grid.normalize(e) }, _set: function (e, t, i) { var n = this, o = n._sheet; return n._ref.forEach(function (i) { o._set(i.toRangeRef(), e, t) }), i || o.triggerChange({ recalc: "formula" == e || "value" == e || "validation" == e, value: t, range: n, ref: n._ref }), n }, _get: function (e) { return this._sheet._get(this._ref.toRangeRef(), e) }, _property: function (e, t) { return void 0 === t ? this._get(e) : this._set(e, t) }, value: function (e) { return void 0 !== e && this._set("formula", null, !0), this._property("value", e) }, resize: function (e) { var t = this._resizedRef(e); return new a(t, this._sheet) }, _resizedRef: function (e) { return this._ref.map(function (t) { return t.toRangeRef().resize(e) }) }, input: function (t) { var i, n, o, r, s, a, l = this._get("format"); return void 0 !== t ? (n = this._ref.toRangeRef().topLeft, i = e.spreadsheet.calc.parse(this._sheet.name(), n.row, n.col, t), this._sheet.batch(function () { var n, o = null; "exp" == i.type ? o = e.spreadsheet.calc.compile(i) : "@" != l ? (n = l && e.spreadsheet.formatting.type(i.value, l), "date" == i.type && "date" != n ? this.format(i.format || function (e) { return e.replace(/M/g, "m").replace(/'/g, '"').replace(/tt/, "am/pm") }(e.culture().calendar.patterns.d)) : "percent" == i.type && "percent" != n ? this.format(100 * i.value == (100 * i.value | 0) ? "0%" : "0.00%") : i.format && !l && this.format(i.format)) : "string" != i.type && (i.value = t), this.formula(o), o || this.value(i.value) }.bind(this), { recalc: !0, value: t, ref: this._ref, editorChange: this._sheet.isInEditMode() }), this) : (t = this._get("value"), o = this._get("formula"), r = l && !o && e.spreadsheet.formatting.type(t, l), o ? t = "=" + o : l && "date" == r && (s = e.spreadsheet.formatting.text(t, l), "number" == typeof (i = e.spreadsheet.calc.parse(null, null, null, s)).value && (a = e.spreadsheet.formatting.text(i.value, l), s == a)) ? t = s : "date" === r ? t = e.toString(e.spreadsheet.numberToDate(t), e.culture().calendar.patterns.d) : "percent" === r ? t = 100 * t + "%" : "string" == typeof t && (/^[=']/.test(t) || /^(?:true|false)$/i.test(t) || function (t) { return !/^=/.test(t) && /number|percent/.test(e.spreadsheet.calc.parse(null, 0, 0, t).type) }(t)) && (t = "'" + t), t) }, enable: function (e) { return void 0 === e ? (e = !0, this._sheet.forEach(this._ref.toRangeRef(), function (t, i, n) { !1 === n.enable && (e = !1) }), e) : this._property("enable", e) }, formula: function (e) { if (void 0 === e) { var t = this._get("formula"); return t ? "" + t : null } return this._property("formula", e) }, validation: function (e) { if (void 0 === e) { var t = this._get("validation"); return t ? t.toJSON() : null } return this._property("validation", e) }, _getValidationState: function () { var e, t, i, n = this._ref.toRangeRef(), o = n.topLeft.row, r = n.topLeft.col, s = n.bottomRight.row, a = n.bottomRight.col; for (e = r; e <= a; e++)for (t = o; t <= s; t++)if ((i = this._sheet._validation(t, e)) && "reject" === i.type && !1 === i.value) return i; return !1 }, merge: function () { return this._ref = this._sheet._merge(this._ref), this }, unmerge: function () { var e = this._sheet._mergedCells; return this._ref.forEach(function (t) { t.toRangeRef().intersecting(e).forEach(function (t) { e.splice(e.indexOf(t), 1) }) }), this._sheet.triggerChange({}), this }, select: function () { return this._sheet.select(this._ref), this }, values: function (t) { var i, o, r, s, a, l, c, d, u, h; if (this._ref instanceof n) throw Error("Unsupported for multiple ranges."); if (this._ref === e.spreadsheet.NULLREF) { if (void 0 !== t) throw Error("Unsupported for NULLREF."); return [] } if (i = this._ref.toRangeRef(), o = i.topLeft.row, r = i.topLeft.col, s = i.bottomRight.row, a = i.bottomRight.col, void 0 === t) { for (t = Array(i.height()), d = 0; d < t.length; d++)t[d] = Array(i.width()); for (l = r; l <= a; l++)for (c = o; c <= s; c++)t[c - o][l - r] = this._sheet._value(c, l); return t } for (this._sheet._set(i, "formula", null), l = r; l <= a; l++)for (c = o; c <= s; c++)(u = t[c - o]) && (void 0 !== (h = u[l - r]) && this._sheet._value(c, l, h)); return this._sheet.triggerChange({ recalc: !0, ref: i }), this }, _properties: function (t) { var i, o, r, s, a, l, c, d, u, h, f; if (this._ref instanceof n) throw Error("Unsupported for multiple ranges."); if (this._ref === e.spreadsheet.NULLREF) { if (void 0 !== t) throw Error("Unsupported for NULLREF."); return [] } if (i = this._ref.toRangeRef(), o = i.topLeft.row, r = i.topLeft.col, s = i.bottomRight.row, a = i.bottomRight.col, d = this._sheet, void 0 === t) return t = Array(i.height()), d.forEach(i, function (e, i, n) { i -= r; var s = t[e -= o] || (t[e] = []); s[i] = n }), t; for (i = i.clone(), h = function (e) { var t = u[e]; i.topLeft.row = i.bottomRight.row = c, i.topLeft.col = i.bottomRight.col = l, "value" == e && d._set(i, "formula", null), d._set(i, e, t) }, l = r; l <= a; l++)if (!d.isHiddenColumn(l)) for (c = o; c <= s; c++)(f = t[c - o]) && !d.isHiddenRow(c) && ((u = f[l - r]) && Object.keys(u).forEach(h)); return d.triggerChange({ recalc: !0, ref: this._ref }), this }, clear: function (e) { var t, i, n; return t = (e = e || {}).clearAll || !Object.keys(e).length, i = this._sheet, n = { recalc: t || e.contentsOnly, ref: this._ref }, i.batch(function () { n.recalc && this.formula(null), t && this.validation(null), (t || e.formatOnly) && (s.forEach(function (t) { e.keepBorders && /^border/i.test(t) || this[t](null) }.bind(this)), this.unmerge()) }.bind(this), n), this }, clearContent: function () { return this.clear({ contentsOnly: !0 }) }, clearFormat: function () { return this.clear({ formatOnly: !0 }) }, isSortable: function () { return !this.cantSort() }, cantSort: function () { var t, i, r, s, a, l; if (this._ref instanceof n) return { code: "cantSortMultipleSelection", message: "Unsupported for multiple ranges." }; if (this._ref === e.spreadsheet.NULLREF) return { code: "cantSortNullRef", message: "Unsupported for NULLREF." }; t = this._sheet._getMergedCells(this._ref.toRangeRef()), i = t.primary, r = t.secondary, s = null, a = null, l = {}; try { this._sheet.forEach(this, function (e, n) { var c = new o(e, n).print(), d = i[c]; if (d) { if (null === s) s = d.width(), a = d.height(); else if (s != d.width() || a != d.height()) throw l } else if (!r[c] && t.hasMerged) throw l }) } catch (e) { if (e !== l) throw e; return { code: "cantSortMixedCells", message: "Unsupported for range containing cells of different shapes." } } return !1 }, sort: function (e) { var t = this.cantSort(); if (t) throw Error(t.message); return void 0 === e && (e = { column: 0 }), e = e instanceof Array ? e : [e], this._sheet._sortBy(this._ref.toRangeRef(), e.map(function (e, t) { return "number" == typeof e && (e = { column: e }), { index: void 0 === e.column ? t : e.column, ascending: void 0 === e.ascending || e.ascending } })), this }, isFilterable: function () { return !(this._ref instanceof n) }, filter: function (e) { if (this._ref instanceof n) throw Error("Unsupported for multiple ranges."); return !1 === e ? this.clearFilters() : (e = !0 === e ? [] : e instanceof Array ? e : [e], this._sheet._filterBy(this._ref.toRangeRef(), e.map(function (e, t) { return { index: void 0 === e.column ? t : e.column, filter: e.filter } }))), this }, clearFilter: function (e) { this._sheet.clearFilter(e) }, clearFilters: function () { var e, t = this._sheet.filter(), i = []; if (t) { for (e = 0; e < t.columns.length; e++)i.push(e); this._sheet.batch(function () { this.clearFilter(i), this._filter = null }, { layout: !0, filter: !0 }) } }, hasFilter: function () { var e = this._sheet.filter(); return !!e }, leftColumn: function () { return new a(this._ref.leftColumn(), this._sheet) }, rightColumn: function () { return new a(this._ref.rightColumn(), this._sheet) }, topRow: function () { return new a(this._ref.topRow(), this._sheet) }, bottomRow: function () { return new a(this._ref.bottomRow(), this._sheet) }, column: function (e) { return new a(this._ref.toColumn(e), this._sheet) }, row: function (e) { return new a(this._ref.toRow(e), this._sheet) }, forEachRow: function (e) { this._ref.forEachRow(function (t) { e(new a(t, this._sheet)) }.bind(this)) }, forEachColumn: function (e) { this._ref.forEachColumn(function (t) { e(new a(t, this._sheet)) }.bind(this)) }, sheet: function () { return this._sheet }, topLeft: function () { return this._ref.toRangeRef().topLeft }, intersectingMerged: function () { var e = this._sheet, t = []; return e._mergedCells.forEach(function (e) { e.intersects(this._ref) && t.push("" + e) }.bind(this)), t }, getState: function (t) { var i, n, o = this._ref.first(), r = { ref: o, data: [], origRef: this._ref }; return t ? i = "input" === t ? ["value", "formula"] : "border" === t ? ["borderLeft", "borderTop", "borderRight", "borderBottom"] : [t] : (i = e.spreadsheet.ALL_PROPERTIES, r.mergedCells = this.intersectingMerged()), n = r.data, this.forEachCell(function (e, t, r) { var s = {}, a = e - o.row, l = t - o.col; n[a] || (n[a] = []), n[a][l] = s, i.forEach(function (e) { s[e] = void 0 === r[e] ? null : r[e] }) }), r }, setState: function (e, t) { var i = this._sheet, n = this._ref.first(), o = e.ref.row - n.row, r = e.ref.col - n.col; i.batch(function () { var s, a; e.mergedCells && this.unmerge(), s = n.row, a = this.hasFilter(), e.data.forEach(function (o, r) { if (!a || !t || t.isExternal() || !i.isHiddenRow(e.ref.row + r)) { var l = n.col; o.forEach(function (o, c) { var d, u; if (!a || !t || t.isExternal() || !i.isHiddenColumn(e.ref.col + c)) { if ((d = t ? i.range(s, l) : i.range(n.row + r, n.col + c)).enable()) { for (u in o) "value" != u && (t && "enable" == u || d._set(u, o[u])); if (!o.formula) if (t && t.isExternal()) try { null == o.value ? d._set("value", null) : d.input(o.value) } catch (e) { d._set("value", o.value) } else d._set("value", o.value) } l++ } }), s++ } }), e.mergedCells && e.mergedCells.forEach(function (e) { e = i._ref(e).relative(o, r, 3), i.range(e).merge() }, this) }.bind(this), { recalc: !0 }) }, _adjustRowHeight: function () { var t, i = this._sheet, n = this.getState(), o = []; for (t = 0; t < n.mergedCells.length; t++)o.push(i.range(n.mergedCells[t])); this.forEachRow(function (t) { if (!(t.topLeft().row >= t.sheet()._rows._count)) { var n = t.sheet().rowHeight(t.topLeft().row); t.forEachCell(function (t, r, s) { var a, l, c = i.range(t, r), d = 0; for (a = 0; a < o.length; a++)if (c._ref.intersects(o[a]._ref)) { d += s.width; break } l = Math.max(i.columnWidth(r), d), n = Math.max(n, e.spreadsheet.util.getTextHeight(s.value, l, s.fontSize, s.wrap)) }), i.rowHeight(t.topLeft().row, Math.max(i.rowHeight(t.topLeft().row), n)) } }) }, forEachCell: function (e) { this._ref.forEach(function (t) { this._sheet.forEach(t.toRangeRef(), e.bind(this)) }.bind(this)) }, hasValue: function () { var e = {}, t = this._sheet._defaultCellStyle; try { this.forEachCell(function (i, n, o) { var r, s; for (r in o) if (null != (s = o[r]) && s !== t[r]) throw e }) } catch (t) { if (t === e) return !0; throw t } return !1 }, wrap: function (t) { return void 0 === t ? !!this._property("wrap") : (this.forEachRow(function (t) { var i = t.sheet().rowHeight(t.topLeft().row); t.forEachCell(function (t, n, o) { var r = this._sheet.columnWidth(n); null !== o.value && void 0 !== o.value && (i = Math.max(i, e.spreadsheet.util.getTextHeight(o.value, r, o.fontSize, !0))) }), t.sheet().rowHeight(t.topLeft().row, i) }.bind(this)), this._property("wrap", t), this) }, fontSize: function (t) { return void 0 === t ? this._property("fontSize") : (this.forEachRow(function (i) { var n = i.sheet().rowHeight(i.topLeft().row); i.forEachCell(function (i, o, r) { var s = this._sheet.columnWidth(o); null !== r.value && void 0 !== r.value && (n = Math.max(n, e.spreadsheet.util.getTextHeight(r.value, s, t, r.wrap))) }), i.sheet().rowHeight(i.topLeft().row, n) }.bind(this)), this._property("fontSize", t), this) }, draw: function (e, t) { this._sheet.draw(this, e, t) }, insideBorders: function (e) { return this.insideVerticalBorders(e).insideHorizontalBorders(e) }, insideVerticalBorders: function (e) { return this._ref.forEach(function (t) { t instanceof r && t.width() > 1 && ((t = t.clone()).topLeft.col++, this._sheet.range(t)._set("vBorders", e)) }, this), this }, insideHorizontalBorders: function (e) { return this._ref.forEach(function (t) { t instanceof r && t.height() > 1 && ((t = t.clone()).topLeft.row++, this._sheet.range(t)._set("hBorders", e)) }, this), this } }), i.each(s, function (e, t) { a.prototype[t] = function (e) { return this._property(t, e) } }), l = i('<div style="position: absolute !important; top: -4000px !important; height: auto !important;padding: 1px !important; margin: 0 !important; border: 1px solid black !important;line-height: normal !important; visibility: hidden !important;white-space: pre-wrap; word-break: break-all;" />')[0], e.spreadsheet.util = { getTextHeight: function (t, i, n, o) { var r = { baselineMarkerSize: 0, width: !0 === o ? i + "px" : "auto", "font-size": (n || 12) + "px", "word-break": !0 === o ? "break-all" : "normal", "white-space": !0 === o ? "pre-wrap" : "pre" }; return e.util.measureText(t, r, l).height } }, e.spreadsheet.Range = a) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/runtime.min", ["spreadsheet/references.min"], function () { "use strict"; function e(t) { return t instanceof e ? t : void (this.code = t) } function t(e, t, i) { for (var n, o = i(e), r = e; ++e < t;)(n = i(e)) > o && (o = n, r = e); return r } function i(t, i) { function o() { return l ? "$" + a : (f = !0, l = !0, u += "toResolve.push(args[i++]); ", "($" + a + " = this.force($" + a + "))") } function r(e) { return "(" + (e ? "(typeof " + o() + " == 'number' ? ($" + a + " = round($" + a + "), true) : false) || " : "(typeof " + o() + " == 'number') || ") + "(typeof $" + a + " == 'boolean') || (typeof $" + a + " == 'string' && !/^(?:=|true|false)/i.test($" + a + ") ? (tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $" + a + "), /^date|number|percent$/.test(tmp.type) ? ($" + a + " = +tmp.value, true) : false) : false))" } function s(e) { if (Array.isArray(e)) { if ("or" == e[0]) return "(" + e.slice(1).map(s).join(") || (") + ")"; if ("and" == e[0]) return "(" + e.slice(1).map(s).join(") && (") + ")"; if ("values" == e[0]) return "(" + e.slice(1).map(function (e) { return o() + " === " + e }).join(") || (") + ")"; if ("null" == e[0]) return "(" + s("null") + " ? (($" + a + " = " + e[1] + "), true) : false)"; if ("between" == e[0] || "[between]" == e[0]) return "(" + o() + " >= " + e[1] + " && $" + a + " <= " + e[2] + " ? true : ((err = 'NUM'), false))"; if ("(between)" == e[0]) return "(" + o() + " > " + e[1] + " && $" + a + " < " + e[2] + " ? true : ((err = 'NUM'), false))"; if ("(between]" == e[0]) return "(" + o() + " > " + e[1] + " && $" + a + " <= " + e[2] + " ? true : ((err = 'NUM'), false))"; if ("[between)" == e[0]) return "(" + o() + " >= " + e[1] + " && $" + a + " < " + e[2] + " ? true : ((err = 'NUM'), false))"; if ("assert" == e[0]) { var t = e[2] || "N/A"; return "((" + e[1] + ") ? true : (err = " + JSON.stringify(t) + ", false))" } if ("not" == e[0]) return "!(" + s(e[1]) + ")"; throw Error("Unknown array type condition: " + e[0]) } if ("number" == e || "datetime" == e) return r(!0); if ("integer" == e || "date" == e) return "(" + r() + " && (($" + a + " |= 0), true))"; if ("divisor" == e) return "(" + r(!0) + " && ($" + a + " == 0 ? ((err = 'DIV/0'), false) : true))"; if ("number+" == e) return "(" + r(!0) + " && ($" + a + " >= 0 ? true : ((err = 'NUM'), false)))"; if ("integer+" == e) return "(" + r() + " && (($" + a + " |= 0) >= 0 ? true : ((err = 'NUM'), false)))"; if ("number++" == e) return "(" + r(!0) + " && ($" + a + " > 0 ? true : ((err = 'NUM'), false)))"; if ("integer++" == e) return "(" + r() + " && (($" + a + " |= 0) > 0 ? true : ((err = 'NUM'), false)))"; if ("string" == e) return "((typeof " + o() + " == 'string' || typeof $" + a + " == 'boolean' || typeof $" + a + " == 'number') ? ($" + a + " += '', true) : ($" + a + " === undefined ? (($" + a + " = ''), true) : false))"; if ("boolean" == e) return "(typeof " + o() + " == 'boolean')"; if ("logical" == e) return "(typeof " + o() + " == 'boolean' || (typeof $" + a + " == 'number' ? ($" + a + " = !!$" + a + ", true) : false))"; if ("matrix" == e) return o(), "((m = this.asMatrix($" + a + ")) ? ($" + a + " = m) : false)"; if ("#matrix" == e) return "((m = this.asMatrix($" + a + ")) ? ($" + a + " = m) : false)"; if ("ref" == e) return "($" + a + " instanceof kendo.spreadsheet.Ref)"; if ("area" == e) return "($" + a + " instanceof kendo.spreadsheet.CellRef || $" + a + " instanceof kendo.spreadsheet.RangeRef)"; if ("cell" == e) return "($" + a + " instanceof kendo.spreadsheet.CellRef)"; if ("null" == e) return "(" + o() + " == null)"; if ("anyvalue" == e) return "(" + o() + " != null && i <= args.length)"; if ("forced" == e) return "(" + o() + ", i <= args.length)"; if ("anything" == e) return "(i <= args.length)"; if ("blank" == e) return "(" + o() + " == null || $" + a + " === '')"; throw Error("Can't check for type: " + e) } var a, l, c, d = "function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; ", u = "function resolve(args, callback) { var toResolve = [], i = 0; ", h = "'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; ", f = !1, p = !1, m = !1; return h += i.map(function e(t) { var i, n, r, c; return a = t[0], i = "{ ", Array.isArray(a) ? (d += "while (i < args.length) { ", u += "while (i < args.length) { ", i += "xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ", i += "while (i < args.length) { ", i += t.map(e).join(""), i += "} ", i += "xargs = stack.pop(); ", u += "} ", d += "} ") : "+" == a ? (d += "while (i < args.length) { ", u += "while (i < args.length) { ", i += "if (i >= args.length) return new CalcError('N/A'); ", i += "xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ", i += "do { ", i += t.slice(1).map(e).join(""), i += "} while (i < args.length); ", i += "xargs = stack.pop(); ", u += "} ", d += "} ") : "?" == a ? i += "if (!(" + s(t[1]) + ")) return new CalcError(err); " : (n = t[1], Array.isArray(n) && /^#?collect/.test(n[0]) ? (r = n[2], o(), i += "try {var $" + a + " = this.cellValues(args.slice(i", r && (i += ", i + " + r), i += ")).filter(function($" + a + "){ ", "collect" == n[0] && (i += "if ($" + a + " instanceof CalcError) throw $" + a + "; "), i += "return " + s(n[1]) + "; }, this); ", i += r ? "i += " + r + "; " : "i = args.length; ", i += "xargs.push($" + a + ")} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } ", u += "toResolve.push(args.slice(i)); ") : "rest" == n ? i += "xargs.push(args.slice(i)); i = args.length; " : ((p = /^\*/.test(a)) && (m = !0, a = a.substr(1)), i += "var $" + a + " = args[i++]; ", c = !1, /!$/.test(n) ? (n = n.substr(0, n.length - 1), c = !0) : i += "if ($" + a + " instanceof CalcError) return $" + a + "; ", i += function (e, t) { l = !1; var i = "if (!(" + s(e) + ")) { "; return l && !t && (i += " if ($" + a + " instanceof CalcError) return $" + a + "; "), l || (u += "i++; "), d += p ? "var $" + a + " = this.asMatrix(args[i]); if ($" + a + ") { xargs.push($" + a + "); width = Math.max(width, $" + a + ".width); height = Math.max(height, $" + a + ".height); arrays.push(true) } else { xargs.push(args[i]); arrays.push(false); } i++; " : "xargs.push(args[i++]); arrays.push(false); ", i += "return new CalcError(err); } " }(n, c) + "xargs.push($" + a + "); ")), i += "} " }).join(""), h += "if (i < args.length) return new CalcError('N/A'); ", h += "return xargs; } ", d += "return { args: xargs, width: width, height: height, arrays: arrays }; } ", f ? (u += "this.resolveCells(toResolve, callback); } ", c = Function("CalcError", "round", h + u + d + " return { resolve: resolve, check: check, arrayArgs: arrayArgs };")) : c = Function("CalcError", "round", h + " return { check: check };"), c = c(e, n), m || delete c.arrayArgs, c } function n(e) { var t = Math.floor(e), i = e - t; return t + Math.round(1e15 * i) / 1e15 } function o(t, i, n) { if (n instanceof e) return n; try { return i.apply(t, n) } catch (t) { if (t instanceof e) return t; throw t } } function r(e, t, i, n) { return function (r, s) { function a() { var t, a, l, c, d, u, h; if (n && (t = n.call(this, s), s = t.args, t.width > 0 && t.height > 0)) { for (a = new D(this), l = 0; l < t.height; ++l)for (c = 0; c < t.width; ++c) { for (d = [], u = 0; u < s.length; ++u)t.arrays[u] ? (h = s[u], d[u] = h.get(l % h.height, c % h.width)) : d[u] = s[u]; d = i.call(this, d), a.set(l, c, o(this, e, d)) } return r(a) } d = i.call(this, s), r(o(this, e, d)) } t ? t.call(this, s, a) : a.call(this) } } function s(t, i, n, o) { return function (r, s) { function a() { var i, a, l, c, d, u, h, f, p; if (o && (i = o.call(this, s), s = i.args, i.width > 0 && i.height > 0)) for (a = new D(this), l = i.width * i.height, c = function (e, t) { return function (i) { if (a.set(e, t, i), 0 === --l) return r(a) } }, d = 0; d < i.height && l > 0; ++d)for (u = 0; u < i.width && l > 0; ++u) { for (h = [], f = 0; f < s.length; ++f)i.arrays[f] ? (p = s[f], h[f] = p.get(d % p.height, u % p.width)) : h[f] = s[f]; if ((h = n.call(this, h)) instanceof e) { if (a.set(d, u, h), 0 === --l) return r(a) } else h.unshift(c(d, u)), t.apply(this, h) } else (i = n.call(this, s)) instanceof e ? r(i) : (i.unshift(r), t.apply(this, i)) } i ? i.call(this, s, a) : a.call(this) } } function a(e, t) { return e = e.toLowerCase(), E[e] = t, { args: function (n, o) { var s = i(e, n); return o && (s.arrayArgs && console.log("" + s.arrayArgs), s.resolve && console.log("" + s.resolve), s.check && console.log("" + s.check)), (E[e] = r(t, s.resolve, s.check, s.arrayArgs)).kendoSpreadsheetArgs = n, this }, argsAsync: function (n, o) { var r = i(e, n); return o && (r.arrayArgs && console.log("" + r.arrayArgs), r.resolve && console.log("" + r.resolve), r.check && console.log("" + r.check)), (E[e] = s(t, r.resolve, r.check, r.arrayArgs)).kendoSpreadsheetArgs = n, this } } } function l(e, t, i) { return (1461 * (e + 4800 + ((++t - 14) / 12 | 0)) / 4 | 0) + (367 * (t - 2 - 12 * ((t - 14) / 12 | 0)) / 12 | 0) - (3 * ((e + 4900 + ((t - 14) / 12 | 0)) / 100 | 0) / 4 | 0) + i - 32075 } function c(e) { return e % 4 ? 0 : e % 100 ? 1 : e % 400 ? 0 : 1 } function d(e) { return function (e) { var t, i, n, o, r, s, a; return t = e + 68569, s = (t = (t -= (146097 * (i = 4 * t / 146097 | 0) + 3) / 4 | 0) - (1461 * (o = 4e3 * (t + 1) / 1461001 | 0) / 4 | 0) + 31) - (2447 * (n = 80 * t / 2447 | 0) / 80 | 0), r = n + 2 - 12 * (t = n / 11 | 0), { year: a = 100 * (i - 49) + o + t, month: --r, date: s, day: (e + 1) % 7, ord: R[c(a)][r] + s } }((0 | e) + I) } function u(e, t, i) { return l(e, t, i) - I } function h(e) { var t, i, n, o, r = e - (0 | e); return r < 0 && r++, t = Math.round(P * r), i = Math.floor(t / z), t -= i * z, n = Math.floor(t / F), t -= n * F, o = Math.floor(t / 1e3), { hours: i, minutes: n, seconds: o, milliseconds: t -= 1e3 * o } } function f(e) { var t = d(e), i = h(e); return new Date(t.year, t.month, t.date, i.hours, i.minutes, i.seconds, i.milliseconds) } function p(e, t, i, n) { return (e + (t + (i + n / 1e3) / 60) / 60) / 24 } function m(e) { var t = p(e.getHours(), e.getMinutes(), e.getSeconds(), e.getMilliseconds()); return (e = u(e.getFullYear(), e.getMonth(), e.getDate())) < 0 ? e - 1 + t : e + t } function g(t) { return function (i, n) { return "string" == typeof i && "string" != typeof n && (n = null == n ? "" : n + ""), "string" != typeof i && "string" == typeof n && (i = null == i ? "" : i + ""), "number" == typeof i && null == n && (n = 0), "number" == typeof n && null == i && (i = 0), "string" == typeof i && "string" == typeof n && (i = i.toLowerCase(), n = n.toLowerCase()), typeof n == typeof i ? t(i, n) : new e("VALUE") } } var v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H; kendo.support.browser.msie && kendo.support.browser.version < 9 || (v = {}, (_ = kendo.spreadsheet).calc = v, b = v.runtime = {}, w = kendo.Class, y = _.Ref, k = _.CellRef, x = _.RangeRef, C = _.UnionRef, S = _.NULLREF, e.prototype.toString = function () { return "#" + this.code + ("NAME" == this.code ? "?" : "!") }, T = w.extend({ init: function (e, t, i, n) { this.callback = e, this.formula = t, this.ss = i, this.parent = n }, resolve: function (e) { var t = this; e instanceof y ? t.resolveCells([e], function () { t._resolve(e) }) : t._resolve(e) }, error: function (t) { return new e(t) }, _resolve: function (e) { e = void 0 === e ? null : Array.isArray(e) ? this.asMatrix(e) : function (e) { return "number" == typeof e ? n(e) : e }(e); var t = this.formula; t.value = e, this.ss.onFormula(t) && this.callback && this.callback.call(t, e) }, resolveCells: function (e, t) { function i(e) { e.exec(s.ss, function () { --o || t.call(s) }, s) } function n(e) { var t, i; for (t = 0; t < e.length; ++t)(i = e[t]).formula && a.push(i.formula); return !0 } var o, r, s = this, a = []; if (function e(t) { var i, o; for (i = 0; i < t.length; ++i)(o = t[i]) instanceof y && n(s.getRefCells(o)), Array.isArray(o) && e(o) }(e), !a.length) return t.call(s); for (o = a.length, r = 0; r < a.length; ++r)i(a[r]) }, cellValues: function (e, t) { var i, n, o = []; for (i = 0; i < e.length; ++i)(n = e[i]) instanceof y ? (n = this.getRefData(n), o = o.concat(n)) : Array.isArray(n) ? o = o.concat(this.cellValues(n)) : n instanceof D ? o = o.concat(this.cellValues(n.data)) : o.push(n); return t ? t.apply(this, o) : o }, fetchName: function (t, i) { var n, o = this.formula, r = this.ss.nameValue(t, o.sheet, o.row, o.col); r instanceof A ? (r = r.clone(o.sheet, o.row, o.col, !0), n = new _.ValidationFormulaContext(this.ss.workbook), r.exec(n, i, this)) : (r instanceof y && ((r = r.absolute(o.row, o.col)).sheet || (r.sheet = o.sheet)), i(null == r ? new e("NAME") : r)) }, force: function (e) { return e instanceof y ? this.getRefData(e) : e }, func: function (t, i, n) { t = t.toLowerCase(); var o = E[t]; return o ? o.call(this, i, n) : void i(new e("NAME")) }, bool: function (e) { return e instanceof y && (e = this.getRefData(e)), "string" == typeof e ? "true" == e.toLowerCase() : "number" == typeof e ? 0 !== e : "boolean" == typeof e ? e : null != e }, asMatrix: function (e) { var t, i, n, o, r, s, a; return e instanceof D ? e : (t = this, e instanceof x ? (i = e.topLeft, n = i.row, o = i.col, r = t.getRefCells(e), s = new D(t), isFinite(e.width()) && (s.width = e.width()), isFinite(e.height()) && (s.height = e.height()), isFinite(n) || (n = 0), isFinite(o) || (o = 0), r.forEach(function (e) { s.set(e.row - n, e.col - o, e.value) }), s) : Array.isArray(e) && e.length > 0 ? (s = new D(t), a = 0, e.forEach(function (e) { var i = 0, n = 1; e.forEach(function (e) { var o = e instanceof x; e instanceof y && !o && (e = t.getRefData(e)), (o || Array.isArray(e)) && (e = t.asMatrix(e)), e instanceof D ? (e.each(function (e, t, n) { s.set(a + t, i + n, e) }), n = Math.max(n, e.height), i += e.width) : s.set(a, i++, e) }), a += n }), s) : void 0) }, getRefCells: function (e, t) { var i = this.formula; return this.ss.getRefCells(e, t, i.sheet, i.row, i.col) }, getRefData: function (e) { var t = this.formula; return this.ss.getData(e, t.sheet, t.row, t.col) }, workbook: function () { return this.ss.workbook } }), D = w.extend({ init: function (e) { this.context = e, this.height = 0, this.width = 0, this.data = [] }, clone: function () { var e = new D(this.context); return e.height = this.height, e.width = this.width, e.data = this.data.map(function (e) { return e.slice() }), e }, get: function (e, t) { var i = this.data[e], n = i ? i[t] : null; return n instanceof y ? this.context.getRefData(n) : n }, set: function (e, t, i) { var n = this.data[e]; null == n && (n = this.data[e] = []), n[t] = i, e >= this.height && (this.height = e + 1), t >= this.width && (this.width = t + 1) }, each: function (e, t) { var i, n, o; for (i = 0; i < this.height; ++i)for (n = 0; n < this.width; ++n)if (o = this.get(i, n), (t || null != o) && void 0 !== (o = e.call(this.context, o, i, n))) return o }, map: function (e, t) { var i = new D(this.context); return this.each(function (t, n, o) { i.set(n, o, e.call(this, t, n, o)) }, t), i }, eachRow: function (e) { var t, i; for (t = 0; t < this.height; ++t)if (void 0 !== (i = e.call(this.context, t))) return i }, eachCol: function (e) { var t, i; for (t = 0; t < this.width; ++t)if (void 0 !== (i = e.call(this.context, t))) return i }, mapRow: function (e) { var t = new D(this.context); return this.eachRow(function (i) { t.set(i, 0, e.call(this.context, i)) }), t }, mapCol: function (e) { var t = new D(this.context); return this.eachCol(function (i) { t.set(0, i, e.call(this.context, i)) }), t }, toString: function () { return JSON.stringify(this.data) }, transpose: function () { var e = new D(this.context); return this.each(function (t, i, n) { e.set(n, i, t) }), e }, unit: function (e) { var t, i, n, o; for (this.width = this.height = e, t = this.data = Array(e), i = e; --i >= 0;)for (n = t[i] = Array(e), o = e; --o >= 0;)n[o] = i == o ? 1 : 0; return this }, multiply: function (t) { var i, n, o, r, s, a, l = this, c = new D(l.context); for (i = 0; i < l.height; ++i)for (n = 0; n < t.width; ++n) { for (o = 0, r = 0; r < l.width; ++r) { if (s = l.get(i, r), a = t.get(r, n), "number" != typeof s || "number" != typeof a) throw new e("VALUE"); o += s * a } c.set(i, n, o) } return c }, adds: function (e, t) { var i, n, o, r, s = this, a = new D(s.context), l = t ? -1 : 1; for (i = 0; i < s.height; ++i)for (n = 0; n < s.width; ++n)o = s.get(i, n), r = e.get(i, n), a.set(i, n, o + l * r); return a }, determinant: function () { var e, t, i, n, o, r = this.clone().data, s = r.length, a = 1; for (e = 0; e < s; e++) { for (t = e; t < s && !r[t][e]; t++); if (t == s) return 0; if (t != e) for (a = -a, n = e; n < s; n++)o = r[e][n], r[e][n] = r[t][n], r[t][n] = o; for (i = e + 1; i < s; i++)for (n = e + 1; n < s; n++)r[i][n] -= r[e][n] * r[i][e] / r[e][e]; a *= r[e][e] } return a }, inverse: function () { var e, i, n, o, r, s, a = this.width, l = this.augment(new D(this.context).unit(a)), c = l.data; for (i = 0; i < a; ++i) { if (n = t(i, a, function (e) { return c[e][i] }), !c[n][i]) return null; for (i != n && (e = c[i], c[i] = c[n], c[n] = e), o = i + 1; o < a; ++o) { for (r = i + 1; r < 2 * a; ++r)c[o][r] -= c[i][r] * c[o][i] / c[i][i]; c[o][i] = 0 } } for (o = 0; o < a; ++o)for (s = c[o][o], r = 0; r < 2 * a; ++r)c[o][r] /= s; for (i = a; --i >= 0;)for (o = i; --o >= 0;)if (c[o][i]) for (r = 2 * a; --r >= a;)c[o][r] -= c[i][r] * c[o][i]; return l.slice(0, a, a, a) }, augment: function (e) { var t = this.clone(), i = t.width; return e.each(function (e, n, o) { t.set(n, o + i, e) }), t }, slice: function (e, t, i, n) { var o, r, s = new D(this.context); for (o = 0; o < i; ++o)for (r = 0; r < n; ++r)s.set(o, r, this.get(e + o, t + r)); return s } }), A = w.extend({ init: function (e, t, i, n, o, r) { this.refs = e, this.handler = t, this.print = i, this.absrefs = null, this.sheet = n, this.row = o, this.col = r, this.onReady = [], this.pending = !1 }, clone: function (e, t, i, n) { var o = e.toLowerCase(), r = this.refs; return (n || o != this.sheet.toLowerCase()) && (r = r.map(function (t) { return t.hasSheet() || t.sheet && t.sheet.toLowerCase() == o || (t = t.clone().setSheet(e)), t })), new A(r, this.handler, this.print, e, t, i) }, resolve: function (e) { this.pending = !1, this.onReady.forEach(function (t) { t(e) }) }, exec: function (t, i, n) { var o, r, s; if ("value" in this) i && i(this.value); else { for (i && this.onReady.push(i), o = new T(this.resolve, this, t, n), r = 0; n;) { if (n.formula === this) return this.pending = !1, void o.resolve(new e("CIRCULAR")); n = n.parent, ++r } if (this.pending) return; this.pending = !0, s = function () { this.absrefs || (this.absrefs = this.refs.map(function (e) { return e.absolute(this.row, this.col) }, this)), this.handler.call(o) }.bind(this), r < 20 ? s() : setTimeout(s, 0) } }, reset: function () { this.onReady = [], this.pending = !1, delete this.value }, renameSheet: function (e, t) { e = e.toLowerCase(), this.absrefs = null, this.sheet.toLowerCase() == e && (this.sheet = t), this.refs.forEach(function (i) { i.renameSheet(e, t) }) }, adjust: function (e, t, i, n) { var o, r, s, a, l, c; e = e.toLowerCase(), o = this.row, r = this.col, s = this.sheet.toLowerCase(), a = !1, s == e && ("row" == t && o >= i && (this.row += n, a = !0), "col" == t && r >= i && (this.col += n, a = !0)), l = this.row, c = this.col, this.absrefs = null, this.refs = this.refs.map(function (s) { return s === S ? s : s.sheet.toLowerCase() != e ? (a && ("row" == t && o >= i && (s = s.relative(n, 0)), "col" == t && r >= i && (s = s.relative(0, n))), s) : s.adjust(o, r, l, c, "row" == t, i, n) }, this) }, toString: function () { return this.print(this.row, this.col) } }), (E = Object.create(null)).if = function (t, i) { var n = this, o = i[0], r = i[1], s = i[2]; this.resolveCells([o], function () { var i = n.asMatrix(o); i ? r(function (o) { s(function (r) { var s = n.asMatrix(o), a = n.asMatrix(r); t(i.map(function (t, i, l) { return t instanceof e ? t : n.bool(t) ? s ? s.get(i, l) : o : a ? a.get(i, l) : r })) }) }) : (o = this.force(o)) instanceof e ? t(o) : n.bool(o) ? r(t) : s(t) }) }, E[""] = function (e) { e((1 + Math.sqrt(5)) / 2) }, I = l(1900, 0, -1), M = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], R = [[0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334], [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335]], P = 24 * (z = 60 * (F = 6e4)), b.CalcError = e, b.Formula = A, b.Matrix = D, b.packDate = u, b.unpackDate = d, b.packTime = p, b.unpackTime = h, b.serialToDate = f, b.dateToSerial = m, b.daysInMonth = function (e, t) { return c(e) && 1 == t ? 29 : M[t] }, b.isLeapYear = c, b.daysInYear = function (e) { return c(e) ? 366 : 365 }, b.parseDate = function (e) { return kendo.parseDate(e) || kendo.parseDate(e, ["MMMM dd yyyy", "MMMM dd yy", "MMM dd yyyy", "MMM dd yy", "dd MMMM yyyy", "dd MMMM yy", "dd MMM yyyy", "dd MMM yy", "MMMM dd, yyyy", "MMMM dd, yy", "MMM dd, yyyy", "MMM dd, yy", "MMMM dd", "MMM dd", "MMMM yyyy", "MMM yyyy", "dd MMMM", "dd MMM"]) }, _.dateToNumber = m, _.numberToDate = f, _.defineFunction = a, _.CalcError = e, b.defineFunction = a, b.defineAlias = function (e, t) { var i = E[t]; if (!i) throw Error("Function " + t + " is not yet defined"); i.kendoSpreadsheetAliases || (i.kendoSpreadsheetAliases = [t]), i.kendoSpreadsheetAliases.push(e), E[e] = i }, b.FUNCS = E, L = [["*a", B = ["or", "number", ["null", 0]]], ["*b", B]], H = [["*a", ["or", "anyvalue", ["null", 0]]], ["*b", ["or", "anyvalue", ["null", 0]]]], a("binary+", function (e, t) { return e + t }).args(L), a("binary-", function (e, t) { return e - t }).args(L), a("binary*", function (e, t) { return e * t }).args(L), a("binary/", function (e, t) { return e / t }).args([["*a", B], ["*b", "divisor"]]), a("binary^", function (e, t) { return Math.pow(e, t) }).args(L), a("binary&", function (e, t) { return null == e && (e = ""), null == t && (t = ""), "" + e + t }).args([["*a", ["or", "number", "string", "boolean", "null"]], ["*b", ["or", "number", "string", "boolean", "null"]]]), a("binary=", function (e, t) { return e === t }).args(H), a("binary<>", function (e, t) { return e !== t }).args(H), a("binary<", g(function (e, t) { return e < t })).args(H), a("binary<=", g(function (e, t) { return e <= t })).args(H), a("binary>", g(function (e, t) { return e > t })).args(H), a("binary>=", g(function (e, t) { return e >= t })).args(H), a("unary+", function (e) { return e }).args([["*a", B]]), a("unary-", function (e) { return -e }).args([["*a", B]]), a("unary%", function (e) { return e / 100 }).args([["*a", B]]), a("binary:", function (e, t) { return new x(e, t).setSheet(e.sheet || this.formula.sheet, e.hasSheet()) }).args([["a", "cell"], ["b", "cell"]]), a("binary,", function (e, t) { return new C([e, t]) }).args([["a", "ref"], ["b", "ref"]]), a("binary ", function (e, t) { return e.intersect(t) }).args([["a", "ref"], ["b", "ref"]]), a("not", function (e) { return !this.bool(e) }).args([["*a", ["or", "anyvalue", ["null", 0]]]]), a("isblank", function (e) { return e instanceof k && null == (e = this.getRefData(e)) }).args([["*value", "anything!"]]), a("iserror", function (t) { return t instanceof e }).args([["*value", "forced!"]]), a("iserr", function (t) { return t instanceof e && "N/A" != t.code }).args([["*value", "forced!"]]), a("isna", function (t) { return t instanceof e && "N/A" == t.code }).args([["*value", "forced!"]]), a("islogical", function (e) { return "boolean" == typeof e }).args([["*value", "forced!"]]), a("isnontext", function (e) { return "string" != typeof e }).args([["*value", "forced!"]]), a("istext", function (e) { return "string" == typeof e }).args([["*value", "forced!"]]), a("isnumber", function (e) { return "number" == typeof e }).args([["*value", "forced!"]]), a("isref", function (e) { return e instanceof k || e instanceof x }).args([["*value", "anything!"]]), E[",getname"] = function (e, t) { this.fetchName(t[0], e) }) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/validation.min", ["spreadsheet/runtime.min"], function () { "use strict"; var e, t, i, n, o, r, s, a = kendo.jQuery; kendo.support.browser.msie && kendo.support.browser.version < 9 || (e = kendo.spreadsheet, t = {}, e.validation = t, i = e.calc, n = kendo.Class, o = "_matrix({0})", r = 'DATEVALUE("{0}")', i.runtime.defineFunction("_matrix", function (e) { return "string" == typeof e && (e = this.asMatrix([e.split(/\s*,\s*/)])), e }).args([["m", ["or", "matrix", "string"]]]), s = n.extend({ init: function (e) { this.handler = e.handler, this.from = e.from, this.to = e.to, this.dataType = e.dataType, this.comparerType = e.comparerType, this.type = e.type ? e.type : "warning", this.allowNulls = !!e.allowNulls, this.fromIsDateValue = !!e.fromIsDateValue, this.toIsDateValue = !!e.toIsDateValue, this.showButton = e.showButton, this.fromIsListValue = !!e.fromIsListValue, this.sheet = e.sheet, this.row = e.row, this.col = e.col, e.tooltipMessageTemplate && (this.tooltipMessageTemplate = e.tooltipMessageTemplate), e.tooltipTitleTemplate && (this.tooltipTitleTemplate = e.tooltipTitleTemplate), e.messageTemplate && (this.messageTemplate = e.messageTemplate), e.titleTemplate && (this.titleTemplate = e.titleTemplate) }, _formatMessages: function (e) { var t = this.from ? this.from_value : "", i = this.to ? this.to_value : "", n = this.from ? "" + this.from : "", o = this.to ? "" + this.to : "", r = this.dataType, s = this.type, a = this.comparerType; return kendo.format(e, t, i, n, o, r, s, a) }, _setMessages: function () { this.title = "", this.message = "", this.tooltipTitleTemplate && (this.tooltipTitle = this._formatMessages(this.tooltipTitleTemplate)), this.tooltipMessageTemplate && (this.tooltipMessage = this._formatMessages(this.tooltipMessageTemplate)), this.titleTemplate && (this.title = this._formatMessages(this.titleTemplate)), this.messageTemplate && (this.message = this._formatMessages(this.messageTemplate)) }, _getListData: function () { var e, t, i, n, o; if (!this.from_value || !this.from_value.data) return []; for (e = this.from_value.data, n = [], t = 0; t < e.length; t++)if (o = e[t]) for (i = 0; i < o.length; i++)n.push(o[i]); return n }, clone: function (e, t, i) { var n = this._getOptions(); return n.from && (n.from = n.from.clone(e, t, i)), n.to && (n.to = n.to.clone(e, t, i)), new s(a.extend(n, { handler: this.handler }, { sheet: e, row: t, col: i })) }, exec: function (e, t, i, n) { function o(t) { return t instanceof kendo.spreadsheet.Ref && (t = e.getData(t), Array.isArray(t) && (t = t[0])), t } var r = this, s = function (e) { r.from_value = o(e), r.value = r.handler.call(r, t, i), r._setMessages(), n && n(r.value) }; r.to ? r.to.exec(e, function (t) { r.to_value = o(t), r.from.exec(e, s) }) : r.from.exec(e, s) }, reset: function () { this.from && this.from.reset(), this.to && this.to.reset(), delete this.value }, adjust: function (e, t, i, n) { var o, r; if (this.from && this.from.adjust(e, t, i, n), this.to && this.to.adjust(e, t, i, n), this.sheet.toLowerCase() == e.toLowerCase()) switch (o = this.row, r = this.col, t) { case "row": o >= i && (this.row += n); break; case "col": r >= i && (this.col += n) } }, toJSON: function () { var e = this._getOptions(); return e.from && (e.from = "" + e.from, "list" === e.dataType && (e.from = e.from.replace(/^_matrix\((.*)\)$/i, "$1"), delete e.fromIsListValue), "date" === e.dataType && this.fromIsDateValue && (e.from = e.from.replace(/^DATEVALUE\("(.*)"\)$/i, "$1"), delete e.fromIsDateValue)), e.to && (e.to = "" + e.to, "date" === e.dataType && this.toIsDateValue && (e.to = e.to.replace(/^DATEVALUE\("(.*)"\)$/i, "$1"), delete e.toIsDateValue)), e }, _getOptions: function () { return { from: this.from, to: this.to, dataType: this.dataType, type: this.type, comparerType: this.comparerType, row: this.row, col: this.col, sheet: this.sheet, allowNulls: this.allowNulls, fromIsListValue: this.fromIsListValue, fromIsDateValue: this.fromIsDateValue, toIsDateValue: this.toIsDateValue, tooltipMessageTemplate: this.tooltipMessageTemplate, tooltipTitleTemplate: this.tooltipTitleTemplate, messageTemplate: this.messageTemplate, titleTemplate: this.titleTemplate, showButton: this.showButton } } }), t.compile = function (e, n, s, l) { var c, d; if ("string" == typeof l && (l = JSON.parse(l)), l.from && ("list" !== l.dataType || l.fromIsListValue || (l.from = kendo.format(o, l.from), l.fromIsListValue = !0), "date" === l.dataType && i.runtime.parseDate(l.from) && (l.from = kendo.format(r, l.from), l.fromIsDateValue = !0), l.from = i.compile(i.parseFormula(e, n, s, l.from))), l.to && ("date" === l.dataType && i.runtime.parseDate(l.to) && (l.to = kendo.format(r, l.to), l.toIsDateValue = !0), l.to = i.compile(i.parseFormula(e, n, s, l.to))), !(d = "custom" == l.dataType ? t.validationComparers.custom : "list" == l.dataType ? t.validationComparers.list : t.validationComparers[l.comparerType])) throw kendo.format("'{0}' comparer is not implemented.", l.comparerType); return c = function (e) { var t, i = this.to && this.to_value ? this.to_value : void 0; return null === e || "" === e ? this.value = !!this.allowNulls : "custom" == this.dataType ? this.value = d(e, this.from_value, i) : "list" == this.dataType ? (t = this._getListData(), this.value = d(e, t, i)) : this.value = d(e, this.from_value, i), this.value }, new kendo.spreadsheet.validation.Validation(a.extend(l, { handler: c, sheet: e, row: n, col: s })) }, t.validationComparers = { greaterThan: function (e, t) { return e > t }, lessThan: function (e, t) { return e < t }, between: function (e, t, i) { return e >= t && e <= i }, equalTo: function (e, t) { return e == t }, notEqualTo: function (e, t) { return e != t }, greaterThanOrEqualTo: function (e, t) { return e >= t }, lessThanOrEqualTo: function (e, t) { return e <= t }, notBetween: function (e, t, i) { return e < t || e > i }, custom: function (e, t) { return t }, list: function (e, t) { return t.indexOf(e) > -1 } }, t.Validation = s) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/sheet.min", ["kendo.core.min", "kendo.color.min", "spreadsheet/runtime.min", "spreadsheet/validation.min", "spreadsheet/references.min"], function () { e = kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.spreadsheet.RangeRef, i = e.spreadsheet.CellRef, n = e.spreadsheet.Range, o = e.Class.extend({ init: function (t) { this._sheet = t, this.selection = e.spreadsheet.FIRSTREF.toRangeRef(), this.originalSelection = e.spreadsheet.FIRSTREF.toRangeRef(), this._activeCell = e.spreadsheet.FIRSTREF.toRangeRef(), this.originalActiveCell = e.spreadsheet.FIRSTREF }, currentSelectionRange: function () { return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef() }, currentOriginalNavigationRange: function () { return this.originalSelection.rangeAt(this.selectionRangeIndex).toRangeRef() }, currentNavigationRange: function () { return this.singleCellSelection() ? this._sheet._sheetRef : this.selection.rangeAt(this.selectionRangeIndex).toRangeRef() }, nextNavigationRange: function () { return this.singleCellSelection() || (this.selectionRangeIndex = this.selection.nextRangeIndex(this.selectionRangeIndex)), this.currentNavigationRange() }, previousNavigationRange: function () { return this.singleCellSelection() || (this.selectionRangeIndex = this.selection.previousRangeIndex(this.selectionRangeIndex)), this.currentNavigationRange() }, activeCell: function (e) { return e && (this.originalActiveCell = e.first(), this._activeCell = this._sheet.unionWithMerged(e.toRangeRef()), this._sheet.focus(e), this._sheet.triggerChange({ activeCell: !0, selection: !0 })), this._activeCell }, select: function (e, t, i) { if (e) { if (e.eq(this.originalSelection)) return; this._sheet.triggerSelect(new n(e, this._sheet)), this.originalSelection = e, this.selection = t, !1 !== i ? (this.activeCell(e.isCell() ? e : this.selection.lastRange().first()), this.selectionRangeIndex = this.selection.size() - 1) : this._sheet.triggerChange({ selection: !0 }) } return this.selection }, singleCellSelection: function () { return this._activeCell.eq(this.selection) } }), r = e.Observable.extend({ init: function () { e.Observable.prototype.init.call(this), this._reinit.apply(this, arguments) }, events: ["commandRequest", "afterInsertRow", "afterDeleteRow", "insertRow", "insertColumn", "deleteRow", "deleteColumn", "hideRow", "hideColumn", "unhideRow", "unhideColumn", "select"], _reinit: function (t, i, n, r, s, a, l) { l = l || {}, this._defaultCellStyle = { background: l.background, color: l.color, fontFamily: l.fontFamily, fontSize: l.fontSize, italic: l.italic, bold: l.bold, underline: l.underline, wrap: l.wrap }, this._rows = new e.spreadsheet.Axis(t, n), this._columns = new e.spreadsheet.Axis(i, r), this._mergedCells = [], this._frozenRows = 0, this._frozenColumns = 0, this._suspendChanges = !1, this._filter = null, this._showGridLines = !0, this._gridLinesColor = null, this._grid = new e.spreadsheet.Grid(this._rows, this._columns, t, i, s, a), this._sheetRef = this._grid.normalize(e.spreadsheet.SHEETREF), this._properties = new e.spreadsheet.PropertyBag(t, i, this._defaultCellStyle), this._sorter = new e.spreadsheet.Sorter(this._grid, this._properties.sortable()), this._viewSelection = new o(this), this._editSelection = new o(this), this._formulaSelections = [] }, _selectionState: function () { return this._inEdit ? this._editSelection : this._viewSelection }, navigator: function () { return this._navigator || (this._navigator = new e.spreadsheet.SheetNavigator(this)), this._navigator }, axisManager: function () { return this._axisManager || (this._axisManager = new e.spreadsheet.AxisManager(this)), this._axisManager }, _name: function (e) { return e ? (this._sheetName = e, this) : this._sheetName }, name: function () { return this._name() }, _property: function (e, t, i) { return void 0 === t ? e() : (e(t), this.triggerChange(i)) }, _field: function (e, t, i) { return void 0 === t ? this[e] : (this[e] = t, this.triggerChange(i)) }, suspendChanges: function (e) { return void 0 === e ? this._suspendChanges : (this._suspendChanges = e, this) }, triggerChange: function (e) { return this._suspendChanges || this.trigger("change", e), this }, triggerSelect: function (e) { this.trigger("select", { range: e }) }, setDataSource: function (t, i) { this.dataSourceBinder && this.dataSourceBinder.destroy(), this.dataSourceBinder = new e.spreadsheet.SheetDataSourceBinder({ dataSource: t, sheet: this, columns: i }), this.dataSource = this.dataSourceBinder.dataSource }, hideColumn: function (e) { if (!this.trigger("hideColumn", { index: e })) return this._property(this._columns.hide.bind(this._columns), e, { layout: !0 }) }, unhideColumn: function (e) { if (!this.trigger("unhideColumn", { index: e })) return this._property(this._columns.unhide.bind(this._columns), e, { layout: !0 }) }, isHiddenColumn: function (e) { return this._grid._columns.hidden(e) }, _copyRange: function (e, t) { var i = this._grid, n = i.rowCount, o = i.normalize(e.topLeft), r = i.normalize(e.bottomRight), s = o.col * n + o.row, a = r.col * n + r.row, l = t.col * n + t.row; this._properties.copy(s, a, l) }, _adjustReferences: function (i, n, o, r) { var s, a; this._mergedCells = r.reduce(function (e, r) { return (r = r.adjust(null, null, null, null, "row" == i, n, o)) instanceof t && e.push(r), e }, []), this._workbook && (s = this._name(), this._workbook._sheets.forEach(function (e) { e._forFormulas(function (e) { e.adjust(s, i, n, o) }), e._forValidations(function (e) { e.adjust(s, i, n, o) }) }), this._workbook.adjustNames(s, "row" == i, n, o)), (a = (a = this.select()).adjust(null, null, null, null, "row" == i, n, o)) !== e.spreadsheet.NULLREF && this.select(a), ("col" == i ? this._columns : this._rows).adjust(n, o) }, _forFormulas: function (e) { var t = this._properties, i = t.get("formula").values(), n = i.length; i.forEach(function (t, i) { e.call(this, t.value, i, n) }, this) }, _forValidations: function (e) { var t = this._properties; t.get("validation").values().forEach(function (t) { e.call(this, t.value) }, this) }, preventInsertRow: function (e, t) { var i; return this.selectedHeaders().allRows ? { reason: "error", type: "insertRowWhenColumnIsSelected" } : (t = t || 1, i = this._grid, !!this.range(i.rowCount - t, 0, t, i.columnCount).hasValue() && { reason: "error", type: "shiftingNonblankCells" }) }, preventInsertColumn: function (e, t) { var i; return this.selectedHeaders().allCols ? { reason: "error", type: "insertColumnWhenRowIsSelected" } : (t = t || 1, i = this._grid, !!this.range(0, i.columnCount - t, i.rowCount, t).hasValue() && { reason: "error", type: "shiftingNonblankCells" }) }, insertRow: function (e) { var o = this.preventInsertRow(e); if (o) throw Error("Shifting nonblank cells off the worksheet is not supported!"); if (!this.trigger("insertRow", { index: e })) return this.batch(function () { var o, r, s, a, l, c, d = this._grid, u = d.columnCount, h = d.rowCount, f = this.frozenRows(); for (e < f && this.frozenRows(f + 1), o = this._mergedCells.slice(), r = 0; r < u; r++)s = new t(new i(e, r), new i(e, r)), a = d.normalize(s.topLeft), l = d.normalize(s.bottomRight), c = new t(new i(a.row, a.col), new i(h - 2, l.col)), this._copyRange(c, new i(a.row + 1, a.col)), new n(s, this).clear({ clearAll: !0, keepBorders: !0 }); this._adjustReferences("row", e, 1, o) }, { recalc: !0, layout: !0, insertRow: { index: e }, ref: new t(new i(e, 0), new i(1 / 0, 1 / 0)) }), this.trigger("afterInsertRow", { index: e }), this }, isEnabledRow: function (e) { var o = new t(new i(e, 0), new i(e, this._grid.columnCount)); return new n(o, this).enable() }, deleteRow: function (e) { return this.isEnabledRow(e) ? this.trigger("deleteRow", { index: e }) ? void 0 : (this.batch(function () { var o, r, s, a, l, c, d, u = this._grid, h = u.columnCount, f = this.frozenRows(); for (e < f && this.frozenRows(f - 1), o = this._mergedCells.slice(), r = 0; r < h; r++)s = new t(new i(e, r), new i(e, r)), new n(s, this).clear({ clearAll: !0, keepBorders: !0 }), a = u.normalize(s.topLeft), l = u.normalize(s.bottomRight), c = new t(new i(a.row + 1, a.col), new i(1 / 0, l.col)), this._copyRange(c, a), d = u.normalize(c.bottomRight), new n(new t(d, d), this).clear(); this._adjustReferences("row", e, -1, o) }, { recalc: !0, layout: !0, deleteRow: { index: e }, ref: new t(new i(e, 0), new i(1 / 0, 1 / 0)) }), this.trigger("afterDeleteRow", { index: e }), this) : this }, insertColumn: function (e) { if (!this.trigger("insertColumn", { index: e })) return this.batch(function () { var o, r, s, a, l, c, d = this._grid, u = d.columnCount, h = this.frozenColumns(); for (e < h && this.frozenColumns(h + 1), o = this._mergedCells.slice(), r = u; r >= e && (s = new t(new i(0, r), new i(1 / 0, r)), new n(s, this).clear({ clearAll: !0, keepBorders: !0 }), r != e); r--)a = d.normalize(s.topLeft), l = d.normalize(s.bottomRight), c = new t(new i(a.row, a.col - 1), new i(l.row, l.col - 1)), this._copyRange(c, a); this._adjustReferences("col", e, 1, o) }, { recalc: !0, layout: !0, insertColumn: { index: e }, ref: new t(new i(0, e), new i(1 / 0, 1 / 0)) }), this }, isEnabledColumn: function (e) { var o = new t(new i(0, e), new i(1 / 0, e)); return new n(o, this).enable() }, deleteColumn: function (e) { return this.isEnabledColumn(e) ? this.trigger("deleteColumn", { index: e }) ? void 0 : (this.batch(function () { var o, r, s, a, l, c, d = this._grid, u = d.columnCount, h = this.frozenColumns(); for (e < h && this.frozenColumns(h - 1), o = this._mergedCells.slice(), r = e; r < u && (s = new t(new i(0, r), new i(1 / 0, r)), new n(s, this).clear({ clearAll: !0, keepBorders: !0 }), r != u - 1); r++)a = d.normalize(s.topLeft), l = d.normalize(s.bottomRight), c = new t(new i(a.row, a.col + 1), new i(l.row, l.col + 1)), this._copyRange(c, a); this._adjustReferences("col", e, -1, o) }, { recalc: !0, layout: !0, deleteColumn: { index: e }, ref: new t(new i(0, e), new i(1 / 0, 1 / 0)) }), this) : this }, hideRow: function (e) { if (!this.trigger("hideRow", { index: e })) return this._property(this._rows.hide.bind(this._rows), e, { layout: !0 }) }, unhideRow: function (e) { if (!this.trigger("unhideRow", { index: e })) return this._property(this._rows.unhide.bind(this._rows), e, { layout: !0 }) }, isHiddenRow: function (e) { return this._grid._rows.hidden(e) }, columnWidth: function (e, t) { return this._property(this._columns.value.bind(this._columns, e, e), t, { layout: !0 }) }, rowHeight: function (e, t) { return this._property(this._rows.value.bind(this._rows, e, e), t, { layout: !0 }) }, frozenRows: function (e) { return this._field("_frozenRows", e, { layout: !0 }) }, frozenColumns: function (e) { return this._field("_frozenColumns", e, { layout: !0 }) }, showGridLines: function (e) { return this._field("_showGridLines", e, { layout: !0 }) }, gridLinesColor: function (e) { return this._field("_gridLinesColor", e, { layout: !0 }) }, _ref: function (n, o, r, s) { var a = null; return n instanceof e.spreadsheet.Ref ? n : n instanceof e.spreadsheet.Range ? n._ref.toRangeRef() : ("string" == typeof n ? a = e.spreadsheet.calc.parseReference(n) : (r || (r = 1), s || (s = 1), a = new t(new i(n, o), new i(n + r - 1, o + s - 1))), a) }, range: function (e, t, i, o) { return new n(this._ref(e, t, i, o), this) }, _getMergedCells: function (e) { var t = this._grid, i = {}, n = {}, o = !1; return this.forEachMergedCell(e, function (r) { var s = r.topLeft; t.forEach(r, function (t) { s.eq(t) ? (i[t.print()] = r, o = !0) : e.contains(t) && (n[t.print()] = s, o = !0) }) }), { primary: i, secondary: n, hasMerged: o } }, forEachMergedCell: function (e, t) { var i = !1; void 0 === t && (t = e, i = !0), this._mergedCells.forEach(function (n) { (i || n.intersects(e)) && t(n) }) }, forEachFilterHeader: function (e, t) { var i, n = !1; void 0 === t && (t = e, n = !0), this._filter && (i = [], this._filter.ref.forEachColumn(function (t) { (n || t.intersects(e)) && i.push(t.topLeft) }), this._mergedCells.forEach(function (e) { i = i.map(function (t) { return e.intersects(t) ? e : t }) }), i.reduce(function (e, t) { return e.indexOf(t) < 0 && e.push(t), e }, []).forEach(t)) }, forEach: function (e, i) { function n(e) { i(a++, s, e) } var o, r, s, a, l, c; for (e instanceof t || (e = this._ref(e)), o = this._grid.normalize(e.topLeft), r = this._grid.normalize(e.bottomRight), s = o.col; s <= r.col; s++)a = o.row, l = this._grid.index(a, s), c = this._grid.index(r.row, s), this._properties.forEach(l, c, n) }, startResizing: function (e) { this._initialPosition = e, this._resizeInProgress = !0 }, startAutoFill: function () { this._autoFillInProgress = !0; var e = this.select(); this._autoFillOrigin = e, this._autoFillDest = e, this.triggerChange({ selection: !0 }) }, updateAutoFill: function (e, t, i, n) { this._autoFillDest = e, this._autoFillPunch = t, this._autoFillHint = i, this._autoFillDirection = n, this.triggerChange({ selection: !0 }) }, autoFillRef: function () { return this._autoFillDest }, autoFillPunch: function () { return this._autoFillPunch }, autoFillInProgress: function () { return this._autoFillInProgress }, resizingInProgress: function () { return this._resizeInProgress }, completeResizing: function () { var e, t; this._resizeInProgress && (this._resizeInProgress = !1, e = this.resizeHintPosition(), this._initialPosition && e ? (t = this.resizeHandlePosition()).col !== -1 / 0 ? this.trigger("commandRequest", { command: "ColumnWidthCommand", options: { target: t.col, value: this.columnWidth(t.col) - (this._initialPosition.x - e.x) } }) : this.trigger("commandRequest", { command: "RowHeightCommand", options: { target: t.row, value: this.rowHeight(t.row) - (this._initialPosition.y - e.y) } }) : this.trigger("change", { resize: !0 })) }, resizeHandlePosition: function () { return this._resizeHandlePosition }, resizeHintPosition: function (e) { return void 0 !== e && (this._resizeHintPosition = e, this.trigger("change", { resize: !0 })), this._resizeHintPosition }, removeResizeHandle: function () { this._resizeHandlePosition && (this._resizeHintPosition = void 0, this._resizeHandlePosition = void 0, this._initialPosition = void 0, this.trigger("change", { resize: !0 })) }, positionResizeHandle: function (e) { this._resizeHandlePosition = e, this.trigger("change", { resize: !0 }) }, startSelection: function () { this._selectionInProgress = !0 }, completeSelection: function () { var e, t; this._selectionInProgress && (this._selectionInProgress = !1, this._resizeHintPosition = void 0, this.trigger("change", { selection: !0 })), this._autoFillInProgress && (this._autoFillInProgress = !1, e = this._autoFillDest, t = this._autoFillOrigin, this._autoFillPunch ? this.trigger("commandRequest", { command: "ClearContentCommand", options: { operatingRange: this.range(this._autoFillPunch) } }) : e.eq(t) ? this.triggerChange({ selection: !0 }) : this.trigger("commandRequest", { command: "AutoFillCommand", options: { operatingRange: this.range(e), origin: this.range(t) } }), this._autoFillDest = null, this._autoFillPunch = null, this._autoFillOrigin = null, this.select(e)) }, selectionInProgress: function () { return this._selectionInProgress }, select: function (e, t) { var i, n = this._selectionState(); return e && (e = this._ref(e), e = this._grid.normalize(e), i = this._grid.isAxis(e) ? e : this.unionWithMerged(e)), n.select(e, i, t) }, originalSelect: function () { return this._selectionState().originalSelection }, currentSelectionRange: function () { return this._selectionState().currentSelectionRange() }, currentOriginalSelectionRange: function () { return this._selectionState().currentOriginalNavigationRange() }, currentNavigationRange: function () { return this._selectionState().currentNavigationRange() }, nextNavigationRange: function () { return this._selectionState().nextNavigationRange() }, previousNavigationRange: function () { return this._selectionState().previousNavigationRange() }, selectionRangeIndex: function () { return this._selectionState().selectionRangeIndex }, activeCell: function (e) { return this._selectionState().activeCell(e) }, originalActiveCell: function () { return this._selectionState().originalActiveCell }, singleCellSelection: function () { return this._selectionState().singleCellSelection() }, unionWithMerged: function (e) { var t = this._mergedCells; return e.map(function (e) { return e.toRangeRef().union(t) }) }, trim: function (e) { var t = [], i = this._grid; return this._properties.forEachProperty(function (n) { t.push(i.trim(e, n.list)) }), this.unionWithMerged(e.topLeft.toRangeRef().union(t)) }, focus: function (e) { if (!e) { var t = this._focus; return this._focus = null, t } this._focus = e.toRangeRef() }, activeCellSelection: function () { return new n(this._grid.normalize(this.activeCell()), this) }, selection: function () { return new n(this._grid.normalize(this._selectionState().selection), this) }, selectedHeaders: function () { var e = this.select(), t = {}, i = {}, n = !1, o = !1, r = this._grid.rowCount - 1, s = this._grid.columnCount - 1; return e.forEach(function (e) { var a, l, c, d, u, h = "partial", f = "partial"; if (e = e.toRangeRef(), l = e.bottomRight, c = e.topLeft, d = c.col <= 0 && l.col >= s, (u = c.row <= 0 && l.row >= r) && (o = !0, f = "full"), d && (n = !0, h = "full"), !u) for (a = c.row; a <= l.row; a++)"full" !== t[a] && (t[a] = h); if (!d) for (a = c.col; a <= l.col; a++)"full" !== i[a] && (i[a] = f) }), { rows: t, cols: i, allRows: o, allCols: n, all: o && n } }, isInEditMode: function (e) { return void 0 === e ? this._inEdit : (this._inEdit = e, void (e && (this._editSelection.selection = this._viewSelection.selection.clone(), this._editSelection.originalSelection = this._viewSelection.originalSelection.clone(), this._editSelection._activeCell = this._viewSelection._activeCell.clone(), this._editSelection.originalActiveCell = this._viewSelection.originalActiveCell.clone()))) }, _setFormulaSelections: function (e) { this._formulaSelections = (e || []).slice(), this.triggerChange({ selection: !0 }) }, _viewActiveCell: function () { return this._viewSelection._activeCell.toRangeRef() }, toJSON: function () { function t(e) { Object.keys(l).forEach(function (t) { e[t] === l[t] && delete e[t] }) } var i, n = {}, o = this._rows.toJSON("height", n), r = this._columns.toJSON("width", {}), s = this._viewSelection, a = [], l = this._defaultCellStyle || {}; return this.forEach(e.spreadsheet.SHEETREF, function (i, r, s) { if (t(s), 0 !== Object.keys(s).length) { s.link && a.push({ ref: e.spreadsheet.Ref.display(null, i, r), target: s.link }); var l = n[i]; void 0 === l && (l = o.length, o.push({ index: i }), n[i] = l), i = o[l], s.index = r, void 0 === i.cells && (i.cells = []), s.formula && (s.formula = "" + s.formula), s.validation && (s.validation = s.validation.toJSON()), s.color && (s.color = e.parseColor(s.color).toCss()), s.background && (s.background = e.parseColor(s.background).toCss()), s.borderTop && s.borderTop.color && (s.borderTop.color = e.parseColor(s.borderTop.color).toCss()), s.borderBottom && s.borderBottom.color && (s.borderBottom.color = e.parseColor(s.borderBottom.color).toCss()), s.borderRight && s.borderRight.color && (s.borderRight.color = e.parseColor(s.borderRight.color).toCss()), s.borderLeft && s.borderLeft.color && (s.borderLeft.color = e.parseColor(s.borderLeft.color).toCss()), i.cells.push(s) } }), i = { name: this._name(), rows: o, columns: r, selection: "" + s.selection, activeCell: "" + s.activeCell(), frozenRows: this.frozenRows(), frozenColumns: this.frozenColumns(), showGridLines: this.showGridLines(), gridLinesColor: this.gridLinesColor(), mergedCells: this._mergedCells.map(function (e) { return "" + e }), hyperlinks: a, defaultCellStyle: l }, this._sort && (i.sort = { ref: "" + this._sort.ref, columns: this._sort.columns.map(function (e) { return { index: e.index, ascending: e.ascending } }) }), this._filter && (i.filter = { ref: "" + this._filter.ref, columns: this._filter.columns.map(function (e) { var t = e.filter.toJSON(); return t.index = e.index, t }) }), i }, fromJSON: function (t) { this.batch(function () { var i, n, o, r, s, a, l, c, d; if (void 0 !== t.name && this._name(t.name), void 0 !== t.frozenColumns && this.frozenColumns(t.frozenColumns), void 0 !== t.frozenRows && this.frozenRows(t.frozenRows), void 0 !== t.columns && this._columns.fromJSON("width", t.columns), void 0 !== t.rows) for (this._rows.fromJSON("height", t.rows), i = 0; i < t.rows.length; i++)if (n = t.rows[i], void 0 === (o = n.index) && (o = i), n.cells) for (r = 0; r < n.cells.length; r++)s = n.cells[r], void 0 === (a = s.index) && (a = r), s.formula && (s.formula = this._compileFormula(o, a, s.formula)), s.validation && (s.validation = this._compileValidation(o, a, s.validation)), this._properties.fromJSON(this._grid.index(o, a), s); t.selection && (this._viewSelection.selection = this._viewSelection.originalSelection = this._ref(t.selection)), t.activeCell && (l = this._ref(t.activeCell), this._viewSelection._activeCell = l.toRangeRef(), this._viewSelection.originalActiveCell = l), t.mergedCells && t.mergedCells.forEach(function (e) { this.range(e).merge() }, this), t.sort && (this._sort = { ref: this._ref(t.sort.ref), columns: t.sort.columns.slice(0) }), t.filter && (c = t.filter.ref, d = void 0 === t.filter.columns ? [] : t.filter.columns, c ? (this._filter = { ref: this._ref(c), columns: d.map(function (t) { return { index: t.index, filter: e.spreadsheet.Filter.create(t) } }) }, this._refreshFilter()) : e.logToConsole("Dropping filter for sheet '" + t.name + "' due to missing ref")), void 0 !== t.showGridLines && (this._showGridLines = t.showGridLines), this._gridLinesColor = t.gridLinesColor }), this._rows._refresh(), this._columns._refresh() }, formula: function (e) { return this._properties.get("formula", this._grid.cellRefIndex(e)) }, validation: function (e) { return this._properties.get("validation", this._grid.cellRefIndex(e)) }, resetFormulas: function () { this._forFormulas(function (e) { e.reset() }) }, resetValidations: function () { this._forValidations(function (e) { e.reset() }) }, recalc: function (e, t) { function i() { r--, s != o || r || t() } var n = this._properties.get("formula").values(), o = n.length, r = 0, s = 0; if (!o && t) return t(); for (; s < o;)r++, n[s++].value.exec(e, t ? i : null) }, revalidate: function (e) { var n = this; this._forValidations(function (o) { var r = new i(o.row, o.col), s = new t(r, r); o.exec(e, n._get(s, "value"), n._get(s, "format")) }) }, _value: function (e, t, i) { var n = this._grid.index(e, t); return void 0 === i ? this._properties.get("value", n) : void this._properties.set("value", n, n, i) }, _validation: function (e, t) { var i = this._grid.index(e, t); return this._properties.get("validation", i) }, _compileValidation: function (t, i, n) { return n instanceof e.spreadsheet.validation.Validation ? n.clone(this._name(), t, i) : (null != n.from && (n.from = (n.from + "").replace(/^=/, "")), null != n.to && (n.to = (n.to + "").replace(/^=/, "")), e.spreadsheet.validation.compile(this._name(), t, i, n)) }, _compileFormula: function (t, i, n) { return n = n.replace(/^=/, ""), n = e.spreadsheet.calc.parseFormula(this._name(), t, i, n), e.spreadsheet.calc.compile(n) }, _copyValuesInRange: function (e, t, i, n) { var o, r, s, a, l; for (o = e.col; o <= t.col; o++)for (r = this._grid.index(e.row, o), s = this._grid.index(t.row, o), a = r, l = e.row; a <= s; ++a, ++l)i = i.clone(this._name(), l, o), this._properties.set(n, a, a, i); return i }, _set: function (e, t, i) { var n, o, r, s = this._grid.normalize(e.topLeft), a = this._grid.normalize(e.bottomRight); if (i && "formula" == t) "string" == typeof i && (i = this._compileFormula(s.row, s.col, i)), i = this._copyValuesInRange(s, a, i, "formula"); else if (i && "validation" == t) i = this._compileValidation(s.row, s.col, i), i = this._copyValuesInRange(s, a, i, "validation"); else for (n = s.col; n <= a.col; n++)o = this._grid.index(s.row, n), r = this._grid.index(a.row, n), this._properties.set(t, o, r, i), "formula" == t && this._properties.set("value", o, r, null) }, _get: function (e, t) { var i = this._grid.normalize(e.topLeft), n = this._grid.index(i.row, i.col); return this._properties.get(t, n) }, batch: function (e, t) { var i = this.suspendChanges(); return this.suspendChanges(!0), e.call(this), this.suspendChanges(i).triggerChange(t || { recalc: !0 }) }, _sortBy: function (e, t) { var i = null; t.forEach(function (t) { i = this._sorter.sortBy(e, t.index, this._properties.get("value"), t.ascending, i) }, this), this._sort = { ref: e, columns: t }, this._refreshFilter(), this.triggerChange({ recalc: !0 }) }, _refreshFilter: function () { this._filter && this._filterBy(this._filter.ref, this._filter.columns) }, _filterBy: function (t, i) { this.batch(function () { for (var n = t.topLeft.row; n <= t.bottomRight.row; n++)this._rows.hidden(n) && this._rows.unhide(n); i.forEach(function (i) { var n, o, r, s = t.resize({ top: 1 }).toColumn(i.index), a = []; if (s !== e.spreadsheet.NULLREF) for (this.forEach(s, function (e, t, i) { i.row = e, a.push(i) }), i.filter.prepare(a), n = 0; n < a.length; n++)o = a[n], r = i.filter.value(o), !1 === i.filter.matches(r) && this.hideRow(o.row) }, this), this._filter = { ref: t, columns: i } }, { layout: !0, filter: !0 }) }, filterColumn: function (e) { var t = this.filter().ref; return e.toRangeRef().topLeft.col - t.topLeft.col }, filter: function () { return this._filter }, clearFilter: function (e) { this._clearFilter(e instanceof Array ? e : [e]) }, _clearFilter: function (e) { this._filter && this.batch(function () { this._filter.columns = this._filter.columns.filter(function (t) { return e.indexOf(t.index) < 0 }), this._refreshFilter() }, { layout: !0, filter: !0 }) }, getAxisState: function () { return { rows: this._rows.getState(), columns: this._columns.getState() } }, setAxisState: function (e) { this._rows.setState(e.rows), this._columns.setState(e.columns), this.triggerChange({ layout: !0 }) }, getState: function () { return { rows: this._rows.getState(), columns: this._columns.getState(), mergedCells: this._mergedCells.map(function (e) { return e.clone() }), properties: this._properties.getState() } }, setState: function (t) { this._rows.setState(t.rows), this._columns.setState(t.columns), this._mergedCells = t.mergedCells, this._properties.setState(t.properties), this.triggerChange(e.spreadsheet.ALL_REASONS) }, _merge: function (t) { var i, o = this._mergedCells, r = this; return this.batch(function () { i = t.map(function (t) { var i, s, a, l, c, d, u; return t instanceof e.spreadsheet.CellRef ? t : (i = t.toRangeRef().union(o, function (e) { o.splice(o.indexOf(e), 1) }), s = new n(i, r), a = s._get("formula"), l = s.value(), c = s.format(), d = s.background(), s.value(null), s.format(null), s.background(null), u = new n(i.collapse(), r), a ? u._set("formula", a) : u.value(l), u.format(c), u.background(d), o.push(i), i) }); var s = r._viewSelection; s.selection = r.unionWithMerged(s.originalSelection), s._activeCell = r.unionWithMerged(s.originalActiveCell) }, { activeCell: !0, selection: !0 }), i } }), e.spreadsheet.Sheet = r); var e, t, i, n, o, r }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/sheetsbar.min", ["kendo.core.min", "kendo.sortable.min"], function () { e = window.kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.jQuery, i = e._outerWidth, n = ".", o = " ", r = { sheetsBarWrapper: "k-widget k-header", sheetsBarSheetsWrapper: "k-tabstrip k-floatwrap k-tabstrip-bottom", sheetsBarActive: "k-spreadsheet-sheets-bar-active", sheetsBarInactive: "k-spreadsheet-sheets-bar-inactive", sheetsBarAdd: "k-spreadsheet-sheets-bar-add", sheetsBarRemove: "k-spreadsheet-sheets-remove", sheetsBarItems: "k-spreadsheet-sheets-items", sheetsBarEditor: "k-spreadsheet-sheets-editor", sheetsBarScrollable: "k-tabstrip-scrollable", sheetsBarNext: "k-tabstrip-next", sheetsBarPrev: "k-tabstrip-prev", sheetsBarKItem: "k-item k-state-default", sheetsBarKActive: "k-state-active k-state-tab-on-top", sheetsBarKTextbox: "k-textbox", sheetsBarKLink: "k-link", sheetsBarKIcon: "k-icon", sheetsBarKFontIcon: "k-icon", sheetsBarKButton: "k-button k-button-icon", sheetsBarKButtonBare: "k-bare", sheetsBarKArrowW: "k-i-arrow-60-left", sheetsBarKArrowE: "k-i-arrow-60-right", sheetsBarKReset: "k-reset k-tabstrip-items", sheetsBarKIconX: "k-i-close", sheetsBarKSprite: "k-sprite", sheetsBarKIconPlus: "k-i-plus", sheetsBarHintWrapper: "k-widget k-tabstrip k-tabstrip-bottom k-spreadsheet-sheets-items-hint", sheetsBarKResetItems: "k-reset k-tabstrip-items" }, s = e.ui.Widget.extend({ init: function (t, i) { var o = s.classNames; e.ui.Widget.call(this, t, i), (t = this.element).addClass(o.sheetsBarWrapper), this._openDialog = i.openDialog, this._tree = new e.dom.Tree(t[0]), this._tree.render([this._addButton(), this._createSheetsWrapper([])]), this._toggleScrollEvents(!0), this._createSortable(), this._sortable.bind("start", this._onSheetReorderStart.bind(this)), this._sortable.bind("end", this._onSheetReorderEnd.bind(this)), t.on("click", n + o.sheetsBarRemove, this._onSheetRemove.bind(this)), t.on("click", "li", this._onSheetSelect.bind(this)), t.on("dblclick", "li." + o.sheetsBarActive, this._createEditor.bind(this)), t.on("click", n + o.sheetsBarAdd, this._onAddSelect.bind(this)) }, options: { name: "SheetsBar", scrollable: { distance: 200 } }, events: ["select", "reorder", "rename"], _createEditor: function () { this._editor || (this._renderSheets(this._sheets, this._selectedIndex, !0), this._editor = this.element.find(e.format("input{0}{1}", n, s.classNames.sheetsBarEditor)).focus().on("keydown", this._onEditorKeydown.bind(this)).on("blur", this._onEditorBlur.bind(this))) }, _destroyEditor: function (e) { var t = e ? null : this._editor.val(); this._editor.off(), this._editor = null, this._renderSheets(this._sheets, this._selectedIndex, !1), this._onSheetRename(t) }, renderSheets: function (e, t) { !e || t < 0 || this._renderSheets(e, t, !1) }, _renderSheets: function (t, r, a) { var l, c, d, u, h, f, p, m, g, v, _ = this, b = s.classNames; _._isRtl = e.support.isRtl(_.element), _._sheets = t, _._selectedIndex = r, _._renderHtml(a, !0), _._scrollableAllowed() && (d = _._sheetsWrapper(), u = d.children(n + b.sheetsBarPrev), h = d.children(n + b.sheetsBarNext), f = _.element.find(n + b.sheetsBarAdd), p = i(f) + f.position().left + 2, m = i(u) + 2, g = _._sheetsGroup(), u.css({ left: p }), d.addClass(b.sheetsBarScrollable + o + b.sheetsBarSheetsWrapper), g.css({ marginLeft: p }), l = d[0].offsetWidth, (c = g[0].scrollWidth) + p > l ? (v = Math.ceil(e.parseFloat(h.css("right"))), _._scrollableModeActive || (_._nowScrollingSheets = !1, _._scrollableModeActive = !0), g.css({ marginLeft: m + p, marginRight: i(h) + v + 2 })) : _._scrollableModeActive && c <= l ? (_._scrollableModeActive = !1, g.css({ marginLeft: p, marginRight: "" })) : g.css({ marginLeft: p }), _._toggleScrollButtons()) }, _toggleScrollButtons: function (e) { var t = this, i = t._sheetsGroup(), o = t._sheetsWrapper(), r = i.scrollLeft(), a = o.find(n + s.classNames.sheetsBarPrev), l = o.find(n + s.classNames.sheetsBarNext); !1 === e ? (a.toggle(!1), l.toggle(!1)) : (a.toggle(t._isRtl ? r < i[0].scrollWidth - i[0].offsetWidth - 1 : 0 !== r), l.toggle(t._isRtl ? 0 !== r : r < i[0].scrollWidth - i[0].offsetWidth - 1)) }, _toggleScrollEvents: function (e) { var t = this, i = s.classNames, o = t.options, r = t._sheetsWrapper(), a = r.children(n + i.sheetsBarPrev), l = r.children(n + i.sheetsBarNext); e ? (a.on("mousedown", function () { t._nowScrollingSheets = !0, t._scrollSheetsByDelta(o.scrollable.distance * (t._isRtl ? 1 : -1)) }), l.on("mousedown", function () { t._nowScrollingSheets = !0, t._scrollSheetsByDelta(o.scrollable.distance * (t._isRtl ? -1 : 1)) }), a.add(l).on("mouseup", function () { t._nowScrollingSheets = !1 })) : (a.off(), l.off()) }, _renderHtml: function (t, i) { var n, r, a, l, c, d, u = [], h = e.dom, f = h.element, p = this._sheets, m = this._selectedIndex, g = s.classNames; for (n = 0; n < p.length; n++)r = p[n], a = n === m, l = { className: g.sheetsBarKItem + o }, c = [], l.className += a ? g.sheetsBarKActive + o + g.sheetsBarActive : g.sheetsBarInactive, a && t ? c.push(f("input", { type: "text", value: r.name(), className: g.sheetsBarKTextbox + o + g.sheetsBarEditor, maxlength: 50 }, [])) : (c.push(f("span", { className: g.sheetsBarKLink, title: r.name() }, [h.text(r.name())])), p.length > 1 && (d = f("span", { className: g.sheetsBarKIcon + o + g.sheetsBarKFontIcon + o + g.sheetsBarKIconX }, []), c.push(f("span", { className: g.sheetsBarKLink + o + g.sheetsBarRemove }, [d])))), u.push(f("li", l, c)); this._tree.render([this._addButton(), this._createSheetsWrapper(u, i)]) }, _createSheetsWrapper: function (t, i) { var n, r = e.dom.element, a = s.classNames, l = [r("ul", { className: a.sheetsBarKReset }, t)]; return n = a.sheetsBarKButton + o + a.sheetsBarKButtonBare + o, l.push(r("span", { className: n + a.sheetsBarPrev }, [r("span", { className: a.sheetsBarKIcon + o + a.sheetsBarKArrowW }, [])])), l.push(r("span", { className: n + a.sheetsBarNext }, [r("span", { className: a.sheetsBarKIcon + o + a.sheetsBarKArrowE }, [])])), r("div", { className: a.sheetsBarItems }, l) }, _createSortable: function () { var i = s.classNames; this._sortable = new e.ui.Sortable(this.element, { filter: e.format("ul li.{0},ul li.{1}", i.sheetsBarActive, i.sheetsBarInactive), container: n + i.sheetsBarItems, axis: "x", animation: !1, ignore: "input", end: function () { this.draggable.hint && this.draggable.hint.remove() }, hint: function (e) { var n = t(e).clone(); return n.wrap("<div class='" + i.sheetsBarHintWrapper + "'><ul class='" + i.sheetsBarKResetItems + "'></ul></div>").closest("div") } }) }, _onEditorKeydown: function (e) { this._editor && (13 === e.which && this._destroyEditor(), 27 === e.which && this._destroyEditor(!0)) }, _onEditorBlur: function () { this._editor && this._destroyEditor() }, _onSheetReorderEnd: function (e) { e.preventDefault(), this.trigger("reorder", { oldIndex: e.oldIndex, newIndex: e.newIndex }) }, _onSheetReorderStart: function (e) { this._editor && e.preventDefault() }, _onSheetRemove: function (e) { var i, n = t(e.target).closest("li").text(); this._editor && this._destroyEditor(), i = function (e) { var t = e.sender; t.isConfirmed() && this.trigger("remove", { name: n, confirmation: !0 }) }.bind(this), this._openDialog("confirmation", { close: i }) }, _onSheetSelect: function (e) { var i = t(e.target).text(); return t(e.target).is(n + s.classNames.sheetsBarEditor) || !i ? void e.preventDefault() : (this._editor && this._destroyEditor(), this._scrollSheetsToItem(t(e.target).closest("li")), void this.trigger("select", { name: i, isAddButton: !1 })) }, _onSheetRename: function (e) { this._sheets[this._selectedIndex].name() !== e && null !== e && this.trigger("rename", { name: e, sheetIndex: this._selectedIndex }) }, _onAddSelect: function () { this.trigger("select", { isAddButton: !0 }) }, _addButton: function () { var t = e.dom.element, i = s.classNames; return t("a", { className: i.sheetsBarAdd + o + i.sheetsBarKButton }, [t("span", { className: i.sheetsBarKIcon + o + i.sheetsBarKFontIcon + o + i.sheetsBarKIconPlus }, [])]) }, destroy: function () { this._sortable.destroy() }, _scrollableAllowed: function () { var e = this.options; return e.scrollable && !isNaN(e.scrollable.distance) }, _scrollSheetsToItem: function (e) { var t, n, o, r, s, a, l, c = this; c._scrollableModeActive && (t = c._sheetsGroup(), n = t.scrollLeft(), o = i(e), r = c._isRtl ? e.position().left : e.position().left - t.children().first().position().left, s = t[0].offsetWidth, a = Math.ceil(parseFloat(t.css("padding-left"))), c._isRtl ? r < 0 ? l = n + r - (s - n) - a : r + o > s && (l = n + r - o + 2 * a) : n + s < r + o ? l = r + o - s + 2 * a : n > r && (l = r - a), t.finish().animate({ scrollLeft: l }, "fast", "linear", function () { c._toggleScrollButtons() })) }, _sheetsGroup: function () { return this._sheetsWrapper().children("ul") }, _sheetsWrapper: function () { return this.element.find(n + s.classNames.sheetsBarItems) }, _scrollSheetsByDelta: function (e) { var t = this, i = t._sheetsGroup(), n = i.scrollLeft(); i.finish().animate({ scrollLeft: n + e }, "fast", "linear", function () { t._nowScrollingSheets ? t._scrollSheetsByDelta(e) : t._toggleScrollButtons() }) } }), e.spreadsheet.SheetsBar = s, t.extend(!0, s, { classNames: r })); var e, t, i, n, o, r, s }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/calc.min", ["spreadsheet/runtime.min"], function () { "use strict"; function e(e) { e = e.toUpperCase(); for (var t = 0, i = 0; i < e.length; ++i)t = 26 * t + e.charCodeAt(i) - 64; return t - 1 } function t(e) { return parseInt(e, 10) - 1 } function i(e, t, i, n) { function o(e) { return e.index = u.length, u.push(e), e } function r(e, t, i) { if (d(e, t)) return n.next(); var o = n.peek(); o ? n.croak("Expected " + e + " " + t + " but found " + o.type + " " + o.value + "") : i || n.croak("Expected " + e + " " + t + "") } function a(e) { return function e(t, i, o) { var r, s, a = d("op"); return a && (o || "," != a.value) && (r = _[a.value], r > i) ? (n.next(), s = e(c(o), r, o), e({ type: "binary", op: a.value, left: t, right: s }, i, o)) : t }(function (e) { return d("punc", "(") || d("ref") || d("num") || d("func") ? { type: "binary", op: " ", left: e, right: a(!1) } : e }(c(e)), 0, e) } function l(t) { return t.hasSheet() || t.setSheet(e), o(t) } function c(e) { var t; return d("ref") ? t = l(n.next()) : d("func") ? t = function () { var e, t = n.next(); for (t = t.value, r("punc", "("), e = []; !d("punc", ")");)if (d("op", ",")) e.push({ type: "null" }), n.next(); else { if (e.push(a(!1)), n.eof() || d("punc", ")")) break; r("op", ",") } return r("punc", ")", !0), { type: "func", func: t, args: e } }() : d("punc", "(") ? (n.next(), t = a(!0), r("punc", ")", !0)) : d("punc", "{") ? (n.next(), t = function () { for (var e = [], t = [e], i = !0; !n.eof() && !d("punc", "}");)i ? i = !1 : d("punc", ";") ? (t.push(e = []), n.next()) : r("op", ","), e.push(a(!1)); return { type: "matrix", value: t } }(), r("punc", "}", !0)) : d("num") || d("str") || d("error") ? t = n.next() : d("sym") ? t = function (e) { return "TRUE" == e.upper || "FALSE" == e.upper ? "TRUE" == e.upper ? w : y : o(new m(e.value)) }(n.next()) : d("op", "+") || d("op", "-") ? t = { type: "prefix", op: n.next().value, exp: c(e) } : n.croak(n.peek() ? d("punc", "[") ? "External reference not supported" : "Parse error" : "Incomplete expression"), function e(t) { return d("op", "%") ? (n.next(), e({ type: "postfix", op: "%", exp: t })) : t }(t) } var d, u = []; return n = s(n, { row: t, col: i }), d = n.is, { type: "exp", ast: a(!0), refs: u, sheet: e, row: t, col: i } } function n(e, t) { function i(e, t) { switch (e.type) { case "ref": return function (e, t) { return "name" == e.ref ? function (e, t) { return { type: "func", func: ",getname", args: [o(t), e] } }(e, t) : n(e, t) }(e, t); case "num": case "str": case "null": case "error": case "bool": return n(e, t); case "prefix": case "postfix": return function (e, t) { return i({ type: "func", func: "unary" + e.op, args: [e.exp] }, t) }(e, t); case "binary": return function (e, t) { return i({ type: "func", func: "binary" + e.op, args: [e.left, e.right] }, t) }(e, t); case "func": return function (e, t) { switch (e.func.toLowerCase()) { case "if": return function (e, t, n, s) { return i(e, function (e) { var a = o(s), l = r("T"), c = r("E"); return { type: "func", func: "if", args: [a, e, { type: "lambda", vars: [l], body: i(t || w, function (e) { return { type: "call", func: { type: "var", name: l }, args: [e] } }) }, { type: "lambda", vars: [c], body: i(n || y, function (e) { return { type: "call", func: { type: "var", name: c }, args: [e] } }) }] } }) }(e.args[0], e.args[1], e.args[2], t); case "and": return function (e, t) { return 0 === e.length ? n(w, t) : i({ type: "func", func: "IF", args: [e[0], { type: "func", func: "AND", args: e.slice(1) }, y] }, t) }(e.args, t); case "or": return function (e, t) { return 0 === e.length ? n(y, t) : i({ type: "func", func: "IF", args: [e[0], w, { type: "func", func: "OR", args: e.slice(1) }] }, t) }(e.args, t); case "true": return t(w); case "false": return t(y) }return function t(n, o) { return o == e.args.length ? { type: "func", func: e.func, args: n } : i(e.args[o], function (e) { return t(n.concat([e]), o + 1) }) }([o(t)], 0) }(e, t); case "lambda": return function (e, t) { var n = r("K"), o = i(e.body, function (e) { return { type: "call", func: { type: "var", value: n }, args: [e] } }); return t({ type: "lambda", vars: [n].concat(e.vars), body: o }) }(e, t); case "matrix": return function e(t, n, o) { var r = []; return function s(a) { return a == t.length ? n({ type: "matrix", value: r }) : (o ? e : i)(t[a], function (e) { return r[a] = e, s(a + 1) }) }(0) }(e.value, t, !0) }throw Error("Cannot CPS " + e.type) } function n(e, t) { return t(e) } function o(e) { var t = r("R"); return { type: "lambda", vars: [t], body: e({ type: "var", name: t }) } } function r(e) { return e || (e = ""), (e = "_" + e) + ++s } var s = 0; return i(e, t) } function o(e) { function t(e) { var n = e.type; if ("num" == n) return e.value + ""; if ("str" == n) return JSON.stringify(e.value); if ("error" == n) return "context.error(" + JSON.stringify(e.value) + ")"; if ("return" == n) return "context.resolve(" + t(e.value) + ")"; if ("func" == n) return "context.func(" + JSON.stringify(e.func) + ", " + t(e.args[0]) + ", " + i(e.args.slice(1)) + ")"; if ("call" == n) return t(e.func) + "(" + e.args.map(t).join(", ") + ")"; if ("ref" == n) return "refs[" + e.index + "]"; if ("bool" == n) return "" + e.value; if ("if" == n) return "(context.bool(" + t(e.co) + ") ? " + t(e.th) + " : " + t(e.el) + ")"; if ("lambda" == n) return "(function(" + e.vars.join(", ") + "){ return(" + t(e.body) + ") })"; if ("var" == n) return e.name; if ("matrix" == n) return i(e.value); if ("null" == n) return "null"; throw Error("Cannot compile expression " + n) } function i(e) { return "[ " + e.map(t).join(", ") + " ]" } var o, r = function (e) { function t(e, t) { return t ? "'(' + " + e + " + ')'" : e } return k("function(row, col, mod){return(" + function e(i, n, o) { function r(e) { var r = i.op, s = _[r] < o || !o && "," == r || "prefix" == n.type && o == _[r] && "-" == n.op || "binary" == n.type && o == _[r] && i === n.right; return t(e(), s) } switch (i.type) { case "num": case "bool": return JSON.stringify(i.value); case "error": return JSON.stringify("#" + i.value); case "str": return JSON.stringify(JSON.stringify(i.value)); case "ref": return "this.refs[" + i.index + "].print(row, col, mod)"; case "prefix": return r(function () { return JSON.stringify(i.op) + " + " + e(i.exp, i, _[i.op]) }); case "postfix": return r(function () { return e(i.exp, i, _[i.op]) + " + " + JSON.stringify(i.op) }); case "binary": return r(function () { var n = t(e(i.left, i, _[i.op]), i.left instanceof m && ":" == i.op), o = t(e(i.right, i, _[i.op]), i.right instanceof m && ":" == i.op); return n + " + " + JSON.stringify(i.op) + " + " + o }); case "func": return JSON.stringify(i.func + "(") + " + " + (i.args.length > 0 ? i.args.map(function (t) { return e(t, i, 0) }).join(" + ', ' + ") : "''") + " + ')'"; case "matrix": return "'{ ' + " + i.value.map(function (t) { return t.map(function (t) { return e(t, i, 0) }).join(" + ', ' + ") }).join(" + '; ' + ") + "+ ' }'"; case "null": return "''" }throw Error("Cannot make printer for node " + i.type) }(e.ast, e, 0) + ")}") }(e), s = r.call(e), a = x[s]; return a ? a.clone(e.sheet, e.row, e.col) : (o = ["function(){", "var context = this, refs = context.formula.absrefs", o = t(n(e.ast, function (e) { return { type: "return", value: e } })), "}"].join(";\n"), a = new v.Formula(e.refs, k(o), r, e.sheet, e.row, e.col), x[s] = a, a) } function r(e) { return e } function s(i, n) { function o() { return null == k && (k = s()), k } function s() { var e, t = i.peek(); return t && ("sym" != t.type && "rc" != t.type && "num" != t.type || (e = w(8, d) || w(6, u) || w(6, h) || w(4, g) || w(4, v) || w(2, _) || w(2, b)), e || (e = i.next())), e } function a(o, r) { var s, a, l, c, d; if ("rc" == o.type) return !o.rel || n.forEditor || null != n.row && null != n.col || i.croak("Cannot read relative cell in RC notation"), new p(o.row, o.col, o.rel); if ("num" == o.type) return o.value <= 1048577 ? x(new p(t(o.value), r ? -1 / 0 : 1 / 0, 2)) : null; if (s = o.value, a = /^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(s)) return l = t(a[4]), c = e(a[2]), l <= 1048576 && c <= 16383 ? x(new p(t(a[4]), e(a[2]), (a[1] ? 0 : 1) | (a[3] ? 0 : 2))) : null; if ((d = "$" == s.charAt(0)) && (s = s.substr(1)), /^\d+$/.test(s)) { if ((l = t(s)) <= 1048576) return x(new p(t(s), r ? -1 / 0 : 1 / 0, d ? 0 : 2)) } else if ((c = e(s)) <= 16383) return x(new p(r ? -1 / 0 : 1 / 0, e(s), d ? 0 : 1)) } function d(e, t, i, n, o, r, s, l) { if ("sym" == e.type && "op" == t.type && ":" == t.value && "sym" == i.type && "punc" == n.type && "!" == n.value && ("sym" == o.type || "rc" == o.type || "num" == o.type && o.value == o.value | 0) && "op" == r.type && ":" == r.value && ("sym" == s.type || "rc" == s.type || "num" == s.type && s.value == s.value | 0) && s.type == o.type && ("punc" != l.type || "(" != l.value || s.space)) { var c = a(o, !0), d = a(s, !1); if (c && d) return y(7), C(new f(c.setSheet(e.value, !0), d.setSheet(i.value, !0)).setSheet(e.value, !0), e, s) } } function u(e, t, i, n, o, r) { var s, l; if ("sym" == e.type && "op" == t.type && ":" == t.value && "sym" == i.type && "punc" == n.type && "!" == n.value && ("sym" == o.type || "rc" == o.type || "num" == o.type && o.value == o.value | 0) && ("punc" != r.type || "(" != r.value || o.space) && (s = a(o))) return y(5), l = s.clone(), C(new f(s.setSheet(e.value, !0), l.setSheet(i.value, !0)).setSheet(e.value, !0), e, o) } function h(e, t, i, n, o, r) { if ("sym" == e.type && "punc" == t.type && "!" == t.value && ("sym" == i.type || "rc" == i.type || "num" == i.type && i.value == i.value | 0) && "op" == n.type && ":" == n.value && ("sym" == o.type || "rc" == o.type || "num" == o.type && o.value == o.value | 0) && ("punc" != r.type || "(" != r.value || o.space)) { var s = a(i, !0), l = a(o, !1); if (s && l) return y(5), C(new f(s, l).setSheet(e.value, !0), e, o) } } function g(e, t, i, n) { if ("sym" == e.type && "punc" == t.type && "!" == t.value && ("sym" == i.type || "rc" == i.type || "num" == i.type && i.value == i.value | 0) && ("punc" != n.type || "(" != n.value || i.space)) { y(3); var o = a(i); return o && isFinite(o.row) || (o = new m(i.value)), C(o.setSheet(e.value, !0), e, i) } } function v(e, t, i, n) { if (("sym" == e.type || "rc" == e.type || "num" == e.type && e.value == e.value | 0) && "op" == t.type && ":" == t.value && ("sym" == i.type || "rc" == i.type || "num" == i.type && i.value == i.value | 0) && ("punc" != n.type || "(" != n.value || i.space)) { var o = a(e, !0), r = a(i, !1); if (o && r) return y(3), C(new f(o, r), e, i) } } function _(e, t) { if (("sym" == e.type || "rc" == e.type) && ("punc" != t.type || "(" != t.value || e.space)) { var i = a(e); if (i && isFinite(i.row) && isFinite(i.col)) return y(1), C(i, e, e) } } function b(e, t) { if ("sym" == e.type && "punc" == t.type && "(" == t.value && !e.space) return e.type = "func", y(1), e } var w, y, k, x, C; return i = l(c(i), n), w = i.ahead, y = i.skip, k = null, x = null != n.row && null != n.col ? function (e) { return 1 & e.rel && (e.col -= n.col), 2 & e.rel && (e.row -= n.row), e } : r, C = n.forEditor ? function (e, t, i) { return e.begin = t.begin, e.end = i.end, e } : r, { peek: o, next: function () { if (null != k) { var e = k; return k = null, e } return s() }, croak: i.croak, eof: i.eof, is: function (e, t) { var i = o(); return null == i || null != e && i.type !== e || null != t && i.value !== t ? null : i } } } function a(e) { return " \t\n ".indexOf(e) >= 0 } function l(e, t) { function i(e) { return /[0-9]/i.test(e) } function n(e) { return /[a-z$_]/i.test(e) || d.isUnicodeLetter(e) } function o(e) { return n(e) || i(e) || "." == e } function r(t, i) { return { type: "sym", value: t, upper: t.toUpperCase(), space: a(e.peek()), quote: i } } function s(e, t, i) { if (!e && !t && !i) return null; if (!e && !i || e && i) { var n = t ? parseInt(t, 10) : 0; return e ? n : n - 1 } } function l() { var t, i, n = e.lookingAt(/^R(\[)?(-?[0-9]+)?(\])?C(\[)?(-?[0-9]+)?(\])?/i); return n && (t = s(n[1], n[2], n[3]), i = s(n[4], n[5], n[6]), null != t && null != i) ? (e.skip(n), { type: "rc", row: t, col: i, rel: (n[4] || !(n[4] || n[5] || n[6]) ? 1 : 0) | (n[1] || !(n[1] || n[2] || n[3]) ? 2 : 0) }) : r(g(o)) } function c() { return e.next(), r(e.readEscaped("'"), !0) } function u() { if (e.eof()) return null; var o, r = e.peek(); return '"' == r ? (e.next(), { type: "str", value: e.readEscaped('"') }) : "'" == r ? c() : i(r) || "." == r ? function () { var e = !1, t = g(function (t) { return "." == t ? !e && (e = !0, !0) : i(t) }); return { type: "num", value: parseFloat(t) } }() : n(r) ? l() : function (e) { return e in _ }(r) ? { type: "op", value: g(function (e, t) { return t + e in _ }) } : function (e) { return "!;(){}[]".indexOf(e) >= 0 }(r) ? { type: "punc", value: e.next() } : (o = e.lookingAt(/^#([a-z\/]+)[?!]?/i)) ? (e.skip(o), { type: "error", value: o[1] }) : (t.forEditor || e.croak("Can't handle character: " + r), { type: "error", value: e.next() }) } function h() { for (var i, n; p.length <= m;)g(a), i = e.pos(), n = u(), t.forEditor && n && (n.begin = i, n.end = e.pos()), p.push(n); return p[m] } function f() { var e = h(); return e && m++, e } var p = [], m = 0, g = e.readWhile; return { next: f, peek: h, eof: function () { return null == h() }, croak: e.croak, ahead: function (e, t) { for (var i = m, n = []; e-- > 0;)n.push(f() || C); return m = i, t.apply(n, n) }, skip: function (e) { m += e } } } function c(e) { function t() { var t = e.charAt(s++); return "\n" == t ? (0, 0) : 0, t } function i() { return e.charAt(s) } function n() { return "" === i() } function o(t) { throw new b(t + " (input: " + e + ")", s) } function r(e) { for (; e-- > 0;)t() } var s = 0; return { next: t, peek: i, eof: n, croak: o, readWhile: function (e) { for (var o = ""; !n() && e(i(), o);)o += t(); return o }, readEscaped: function (e) { for (var i, o = !1, r = ""; !n();)if (i = t(), o) r += i, o = !1; else if ("\\" == i) o = !0; else { if (i == e) break; r += i } return r }, lookingAt: function (t) { return t.exec(e.substr(s)) }, skip: function (t) { if ("string" == typeof t) e.substr(s, t.length) != t && o("Expected " + t), r(t.length); else if (t instanceof RegExp) { var i = t.exec(e.substr(s)); if (i) return r(i[0].length), i } else r(t[0].length) }, forward: r, pos: function () { return s } } } var d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D; kendo.support.browser.msie && kendo.support.browser.version < 9 || (d = kendo.util, u = kendo.spreadsheet, h = u.Ref, f = u.RangeRef, p = u.CellRef, m = u.NameRef, g = u.calc, v = g.runtime, _ = Object.create(null), b = kendo.Class.extend({ init: function (e, t) { this.message = e, this.pos = t }, toString: function () { return this.message } }), function (e) { e.forEach(function (t, i) { t.forEach(function (t) { _[t] = e.length - i }) }) }([[":"], [" "], [","], ["%"], ["^"], ["*", "/"], ["+", "-"], ["&"], ["=", "<", ">", "<=", ">=", "<>"]]), w = { type: "bool", value: !0 }, y = { type: "bool", value: !1 }, k = function (e) { return function (t) { var i = e[t]; return i || (i = e[t] = Function("'use strict';return(" + t + ")")()), i } }(Object.create(null)), x = Object.create(null), C = { type: "eof" }, S = [], T = g.registerFormatParser = function (e) { S.push(e) }, g.parse = function (e, t, n, o) { var r, s, a, l, c; if (o instanceof Date) return { type: "date", value: v.dateToSerial(o) }; if ("number" == typeof o) return { type: "number", value: o }; if ("boolean" == typeof o) return { type: "boolean", value: o }; if (/^'/.test(o += "")) return { type: "string", value: o.substr(1) }; if (/^[0-9.]+%$/.test(o) && (r = o.substr(0, o.length - 1), s = parseFloat(r), !isNaN(s) && s == r)) return { type: "percent", value: s / 100 }; if (/^=/.test(o)) return o = o.substr(1), /\S/.test(o) ? i(e, t, n, o) : { type: "string", value: "=" + o }; for (a = 0; a < S.length; ++a)if (l = S[a](o)) return l; return "true" == o.toLowerCase() ? { type: "boolean", value: !0 } : "false" == o.toLowerCase() ? { type: "boolean", value: !1 } : (c = v.parseDate(o)) ? { type: "date", value: v.dateToSerial(c) } : (s = parseFloat(o), !isNaN(s) && o.length > 0 && s == o ? { type: "number", value: s } : { type: "string", value: o }) }, g.parseNameDefinition = function (e, t) { var n, r = i(null, 0, 0, e); if (!(r.ast instanceof m)) throw new b("Invalid name: " + e); return r = r.ast, t instanceof h || (n = i(r.sheet, 0, 0, t), t = n.ast instanceof h ? n.ast : /^(?:str|num|bool|error)$/.test(n.ast.type) ? n.ast.value : o(n)), { name: r, value: t } }, g.parseFormula = i, g.parseReference = function (i, n) { var o, r, a, l, c, d; if ("#sheet" == i.toLowerCase()) return u.SHEETREF; e: { if (!(o = /^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(i))) { for (l = s(i, {}), c = []; ;) { if ((d = l.next()) instanceof p) d.rel = 0; else { if (!(d instanceof f)) break e; d.topLeft.rel = 0, d.bottomRight.rel = 0 } if (c.push(d), l.eof()) break; if (!l.is("op", ",")) break e; l.next() } return 1 == c.length ? c[0] : new u.UnionRef(c) } if (r = t(o[4]), a = e(o[2]), r < 1048576 && a < 16384) return new p(t(o[4]), e(o[2])) } if (!n) throw Error("Cannot parse reference: " + i) }, g.compile = o, g.parseSqref = function (e, t, i) { var n, o; for (e = s(e, { row: t = t || 0, col: i = i || 0 }), n = []; !e.eof();) { if ("ref" != (o = e.next()).type) throw new b("Expecting a reference but got: " + JSON.stringify(o)); n.push(o.absolute(t, i)) } return n }, g.InputStream = c, g.ParseError = b, g.tokenize = function (e, t, i) { function n() { var n = e.next(); return "sym" == n.type ? "TRUE" == n.upper ? (n.type = "bool", n.value = !0) : "FALSE" == n.upper && (n.type = "bool", n.value = !1) : "ref" == n.type && (n = { type: "ref", ref: null != t && null != i ? n.absolute(t, i) : n, begin: n.begin, end: n.end }), n } var o, r = []; for (e = s(e, { forEditor: !0, row: t, col: i }); !e.eof();)r.push(n()); return "op" == (o = r[0]).type && "=" == o.value && (o.type = "startexp"), r }, T(function (e) { var t, i, n, o, r; return (t = /^(\d+):(\d+)$/.exec(e)) ? (i = parseInt(t[1], 10), n = parseInt(t[2], 10), { type: "date", format: "hh:mm", value: v.packTime(i, n, 0, 0) }) : (t = /^(\d+):(\d+)(\.\d+)$/.exec(e)) ? (n = parseInt(t[1], 10), o = parseInt(t[2], 10), r = 1e3 * parseFloat(t[3]), { type: "date", format: "mm:ss.00", value: v.packTime(0, n, o, r) }) : (t = /^(\d+):(\d+):(\d+)$/.exec(e)) ? (i = parseInt(t[1], 10), n = parseInt(t[2], 10), o = parseInt(t[3], 10), { type: "date", format: "hh:mm:ss", value: v.packTime(i, n, o, 0) }) : (t = /^(\d+):(\d+):(\d+)(\.\d+)$/.exec(e)) ? (i = parseInt(t[1], 10), n = parseInt(t[2], 10), o = parseInt(t[3], 10), r = 1e3 * parseFloat(t[4]), { type: "date", format: "hh:mm:ss.00", value: v.packTime(i, n, o, r) }) : void 0 }), T(function (e) { var t, i, n, o = kendo.culture(), r = o.numberFormat[","], s = o.numberFormat["."], a = o.numberFormat.currency.symbol, l = function (e, t) { var i = e + t, n = D[i]; return n || (n = (n = "^(\\d+(COM\\d{3})*(DOT\\d+)?)").replace(/DOT/g, "\\" + t).replace(/COM/g, "\\" + e), n = RegExp(n), D[i] = n), n }(r, s), d = RegExp("^\\s*\\" + a + "\\s*"), u = 1, h = "", f = "", p = !1; if ((e = c(e.replace(/^\s+|\s+$/g, ""))).skip(/^-\s*/) && (u = -1), (t = e.skip(d)) && (p = !0, h += '"' + t[0] + '"'), e.skip(/^-\s*/)) { if (u < 0) return null; u = -1 } if (!(i = e.skip(l))) return null; if (h += "#", t = e.skip(d)) { if (p) return null; p = !0, f = '"' + t[0] + '"' } return e.eof() ? ((i[2] || p) && (h += ",#"), i[3] && (h += "." + function (e, t) { for (var i = ""; t-- > 0;)i += e; return i }("0", i[3].length - 1)), n = i[0].replace(RegExp("\\" + r, "g"), "").replace(RegExp("\\" + s, "g"), "."), h += f, p && (h += ";-" + h), { type: "number", format: h, value: u * parseFloat(n) }) : null }), D = {}) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/excel-reader.min", ["kendo.core.min", "kendo.color.min", "util/parse-xml.min", "spreadsheet/calc.min"], function () { "use strict"; function e(e) { return e = /^\//.test(e) ? e.substr(1) : "xl/" + e } function t(e, t, n) { var r, s, a, l, d, _, w; x = t.excelImportErrors = [], r = h(e), s = f(e, "_rels/workbook.xml"), a = m(e, s.byType.theme[0]), l = p(e, a), d = [], _ = 0, u(e, "xl/workbook.xml", { enter: function (i, n) { var a, c, u, h; this.is(R) ? (a = n["r:id"], c = s.byId[a], u = n.name, h = o(e, c), d.push({ workbook: t, zip: e, strings: r, styles: l, file: c, options: { name: u, rows: Math.max(t.options.rows || 0, h.rows), columns: Math.max(t.options.columns || 0, h.cols), columnWidth: h.columnWidth, rowHeight: h.rowHeight } })) : this.is(L) && n.activeTab && (_ = g(n.activeTab)) }, text: function (e) { var i, n, o, r = this.is(T); !r || v(r.function) || v(r.vbProcedure) || (i = r.localSheetId, n = null, null != i && (n = d[i].options.name), o = r.name, n && (o = "'" + n.replace(/\'/g, "\\'") + "'!" + o), c(n, null, function () { t.defineName(o, e, v(r.hidden)) }, "reading user-defined name: " + o)) } }), (w = new b.Deferred).progress(function (e) { n && n.notify(e) }).then(function () { var e = t.sheets(); (function (e) { for (var t = 0; t < e.length; t++)e[t].suspendChanges(!1).triggerChange({ recalc: !0 }) })(e), t.activeSheet(e[_]), n && n.resolve() }), i(d, t, w) } function i(e, t, i) { var o, r = (new b.Deferred).resolve(); for (o = 0; o < e.length; o++)!function (o, s) { r = r.then(function () { var r, a, l = t.insertSheet(o.options); return l.suspendChanges(!0), r = n(l, o), a = { sheet: l, progress: s / (e.length - 1) }, r.then(function () { i.notify(a) }), r }) }(e[o], o); r.then(function () { i.resolve() }) } function n(e, t) { var i = new b.Deferred; return setTimeout(function () { a(t.zip, t.file, e, t.strings, t.styles), i.resolve() }, 0), i } function o(t, i) { var n = { rows: 0, cols: 0 }; return u(t, e(i), { enter: function (e, t) { if ("dimension" == e) { var i = y(t.ref); i.bottomRight && (n.cols = i.bottomRight.col + 1, n.rows = i.bottomRight.row + 1) } else "sheetFormatPr" === e ? (t.defaultColWidth && (n.columnWidth = r(parseFloat(t.defaultColWidth))), t.defaultRowHeight && (n.rowHeight = s(parseFloat(t.defaultRowHeight)))) : this.is(I) && this.exit() } }), n } function r(e) { var t = (256 * e + Math.floor(128 / 7)) / 256; return 7 * Math.floor(t) } function s(e) { return 1.5625 * e } function a(t, i, n, o, a) { var h, p, m, _, b, w, T, R, z, P, L, W, q, j = n._columns._count, G = null, $ = i.replace(/worksheets\//, "worksheets/_rels/"), Y = f(t, $), K = []; x = n._workbook.excelImportErrors, u(t, e(i), { enter: function (e, t) { var i, o, c, u, f, w, k, x, T, D, F; if (this.is(C)) m = null, _ = null, b = null, null == (h = t.r) && ((h = y(G)).col++, h = "" + h), G = h, p = t.t, null != (o = t.s) && d(n, h, a, o); else if (this.is(A)) n.range(t.ref).merge(); else if (this.is(S)) { if (c = g(t.min) - 1, u = Math.min(j, g(t.max)) - 1, t.width && (0 !== (f = r(parseFloat(t.width))) && n._columns.values.value(c, u, f)), "1" === t.hidden || 0 === f) for (w = c; w <= u; w++)n.hideColumn(w); null != t.style && d(n, new kendo.spreadsheet.RangeRef(new kendo.spreadsheet.CellRef(-1 / 0, c), new kendo.spreadsheet.CellRef(1 / 0, u)), a, t.style) } else this.is(I) ? (k = g(t.r) - 1, t.ht && (0 !== (x = s(parseFloat(t.ht))) && n._rows.values.value(k, k, x)), "1" !== t.hidden && 0 !== x || n.hideRow(k)) : this.is(M) ? t.activeCell && (T = y(t.activeCell), n.select(T, !0)) : this.is(E) ? "frozen" == t.state && (t.xSplit && n.frozenColumns(g(t.xSplit)), t.ySplit && n.frozenRows(g(t.ySplit))) : this.is(H) ? n.showGridLines(v(t.showGridLines, !0)) : this.is(N) ? (D = t["r:id"], (F = Y.byId[D]) && n.range(t.ref).link(F)) : this.is(["autoFilter"]) ? R = t.ref : R && (this.is(["filterColumn"]) ? z = parseInt(t.colId, 10) : this.is(["customFilters"]) ? (P = v(t.and) ? "and" : "or", L = []) : this.is(["customFilter"]) ? (i = function (e, t) { var i = { equal: "eq", notEqual: "ne", greaterThan: "gt", greaterThanOrEqual: "gte", lessThan: "lt", lessThanOrEqual: "lte" }[e]; return t = l(t), i && "number" == typeof t ? { operator: i, value: t } : "notEqual" != e && e || "string" != typeof t ? void 0 : { operator: e ? "doesnotmatch" : "matches", value: t } }(t.operator, t.val)) && L.push({ operator: i.operator, value: i.value }) : this.is(["dynamicFilter"]) ? K.push({ column: z, filter: new kendo.spreadsheet.DynamicFilter({ type: function (e) { return { Q1: "quarter1", Q2: "quarter2", Q3: "quarter3", Q4: "quarter4", M1: "january", M2: "february", M3: "march", M4: "april", M5: "may", M6: "june", M7: "july", M8: "august", M9: "september", M10: "october", M11: "november", M12: "december" }[e.toUpperCase()] || e }(t.type) }) }) : this.is(["top10"]) ? K.push({ column: z, filter: new kendo.spreadsheet.TopFilter({ value: l(t.val), type: function (e, t) { return e && t ? "topPercent" : t ? "topNumber" : e ? "bottomPercent" : "bottomNumber" }(v(t.percent), v(t.top)) }) }) : this.is(["filters"]) ? (W = v(t.blank), q = []) : this.is(["filter"]) && q.push(l(t.val))) }, leave: function (e, t) { var i; this.is(C) ? null != _ ? c(n, b || h, function () { n.range(b || h).formula(_) }, "parsing formula") && n.range(b || h).value(_).background("#ffaaaa") : null != m && ((i = n.range(h))._get("formula") || (p && "n" != p ? "s" == p ? m = o[g(m)] : "b" == p ? m = "1" === m : "d" == p && (m = kendo.parseDate(m)) : m = parseFloat(m), null != m && i.value(m))) : this.is(O) ? function () { var e = kendo.spreadsheet.calc.parseSqref(t.sqref), i = t.type.toLowerCase(), o = t.operator; /^(?:whole|decimal)$/.test(i) ? i = "number" : "list" == i && (o = "list"), !o && /^(?:number|date)$/.test(i) && (o = "between"), e.forEach(function (e) { c(n, e, function () { n.range(e).validation({ type: v(t.showErrorMessage, !0) ? "reject" : "warning", from: w, to: T, dataType: i, comparerType: k[o] || o, allowNulls: v(t.allowBlank), showButton: v(t.showDropDown) || "date" == i || "list" == i, messageTemplate: t.error, titleTemplate: t.errorTitle }) }, "parsing validation") }) }() : "cols" == e ? n._columns._refresh() : "sheetData" == e ? n._rows._refresh() : "autoFilter" == e ? (n.range(R).filter(K), R = null) : R && ("customFilters" == e ? K.push({ column: z, filter: new kendo.spreadsheet.CustomFilter({ logic: P, criteria: L }) }) : "filters" == e && K.push({ column: z, filter: new kendo.spreadsheet.ValueFilter({ values: q, blanks: W }) })) }, text: function (e) { var t; this.is(B) || this.is(F) ? m = e : (t = this.is(D)) ? (_ = e, "shared" == t.t && (b = t.ref)) : this.is(V) ? w = e : this.is(U) && (T = e) } }) } function l(e) { var t = parseFloat(e); return isNaN(t) || t != e ? e : t } function c(e, t, i, n) { try { return i(), !1 } catch (i) { var o = { context: n, error: i + "" }; return e && (o.sheet = e.name()), t && (o.location = t + ""), x.push(o), !0 } } function d(e, t, i, n) { function o(e, t) { var i = l[e]; if (null != i && !i) return !1; if (s = l[t], r && null == s) { if (null != (i = r[e]) && !i) return !1; s = r[t] } return null != s } var r, s, a = e.range(t), l = i.inlineStyles[n]; l.xfId && (r = i.namedStyles[l.xfId]), o("applyBorder", "borderId") && function (e) { function t(t, i) { var n, o, r = e[t]; r && (0 !== (n = W[r.style]) && (null == (o = r.color) && (o = "#000"), a._property(i, { size: n, color: o }))) } t("left", "borderLeft"), t("top", "borderTop"), t("right", "borderRight"), t("bottom", "borderBottom") }(i.borders[s]), o("applyFont", "fontId") && function (e) { a.fontFamily(e.name), a._property("fontSize", e.size), e.bold && a.bold(!0), e.italic && a.italic(!0) }(i.fonts[s]), o("applyAlignment", "textAlign") && a.textAlign(s), o("applyAlignment", "verticalAlign") && a.verticalAlign(s), o("applyAlignment", "wrapText") && a._property("wrap", s), o("applyFill", "fillId") && function (e) { "solid" == e.type && a.background(e.color) }(i.fills[s]), o("applyNumberFormat", "numFmtId") && function (e) { var t = "string" == typeof e ? e : e.formatCode; null == t || /^general$/i.test(t) || (t = t.replace(/^\[\$-[0-9]+\]/, ""), a.format(t)) }(i.numFmts[s] || q[s]) } function u(e, t, i) { var n = e.files[t]; n && w(n.asUint8Array(), i) } function h(e) { var t = [], i = null; return u(e, "xl/sharedStrings.xml", { leave: function () { this.is(P) && (t.push(i), i = null) }, text: function (e) { this.is(z) && (null == i && (i = ""), i += e) } }), t } function f(t, i) { var n = { byId: {}, byType: { theme: [] } }; return u(t, e(i) + ".rels", { enter: function (e, t) { var i, o; "Relationship" == e && (n.byId[t.Id] = t.Target, i = t.Type.match(/\w+$/)[0], (o = n.byType[i] || []).push(t.Target), n.byType[i] = o) } }), n } function p(e, t) { function i(e) { function t(t) { null != e[t] && (i[t] = v(e[t])) } var i = { borderId: g(e.borderId), fillId: g(e.fillId), fontId: g(e.fontId), numFmtId: g(e.numFmtId), pivotButton: v(e.pivotButton), quotePrefix: v(e.quotePrefix), xfId: g(e.xfId) }; return t("applyAlignment"), t("applyBorder"), t("applyFill"), t("applyFont"), t("applyNumberFormat"), t("applyProtection"), i } function n(e) { var i, n, o; return e.rgb ? _(e.rgb) : e.indexed ? X[g(e.indexed)] : e.theme ? (i = t.colorScheme[g(e.theme)]) ? (n = kendo.parseColor(i), e.tint && (n = n.toHSL(), o = parseFloat(e.tint), n.l = o < 0 ? n.l * (1 + o) : n.l * (1 - o) + (100 - 100 * (1 - o))), n.toCssRgba()) : X[0] : void 0 } var o = { fonts: [], numFmts: {}, fills: [], borders: [], namedStyles: [], inlineStyles: [] }, r = null, s = null, a = null, l = null; return u(e, "xl/styles.xml", { enter: function (e, t, c) { if (this.is(Q)) o.numFmts[t.numFmtId] = t; else if (this.is($)) o.fonts.push(r = {}); else if (r) "sz" == e ? r.size = parseFloat(t.val) : "name" == e ? r.name = t.val : "b" == e ? r.bold = v(t.val, !0) : "i" == e && (r.italic = v(t.val, !0)); else if (this.is(G)) o.fills.push(s = {}); else if (s) "patternFill" == e ? s.type = t.patternType : "fgColor" == e && "solid" === s.type ? s.color = n(t) : "bgColor" == e && "solid" !== s.type && (s.color = n(t)); else if (this.is(j)) o.borders.push(a = {}); else if (a) { if (/^(?:left|top|right|bottom)$/.test(e) && t.style && (a[e] = { style: t.style }), "color" == e) { var d = this.stack[this.stack.length - 2].$tag; a[d].color = n(t) } } else this.is(K) ? (l = i(t), o.namedStyles.push(l), c && (l = null)) : this.is(Y) ? (l = i(t), o.inlineStyles.push(l), c && (l = null)) : l && "alignment" == e && (/^(?:left|center|right|justify)$/.test(t.horizontal) && (l.textAlign = t.horizontal), /^(?:top|center|bottom)$/.test(t.vertical) && (l.verticalAlign = t.vertical), null != t.wrapText && (l.wrapText = v(t.wrapText))) }, leave: function (e) { this.is($) ? r = null : this.is(G) ? s = null : this.is(j) ? a = null : "xf" == e && (l = null) } }), o } function m(t, i) { function n(e, t, i) { var n = e[t]; e[t] = e[i], e[i] = n } var o = [], r = { colorScheme: o }, s = e(i); return t.files[s] && (u(t, s, { enter: function (e, t) { this.is(J) ? o.push(_("window" == t.val ? "FFFFFFFF" : "FF000000")) : this.is(Z) && o.push(_("FF" + t.val)) } }), o.length > 3 && (n(o, 0, 1), n(o, 2, 3))), r } function g(e) { return null == e ? null : parseInt(e, 10) } function v(e, t) { return null == e ? t : "true" == e || !0 === e || 1 == e } function _(e) { var t = /^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e); return "rgba(" + parseInt(t[2], 16) + ", " + parseInt(t[3], 16) + ", " + parseInt(t[4], 16) + ", " + parseInt(t[1], 16) / 255 + ")" } var b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H, N, O, V, U, W, q, j, G, $, Y, K, Q, X, Z, J; kendo.support.browser.msie && kendo.support.browser.version < 9 || (b = kendo.jQuery, w = kendo.util.parseXML, y = kendo.spreadsheet.calc.parseReference, k = { greaterThanOrEqual: "greaterThanOrEqualTo", lessThanOrEqual: "lessThanOrEqualTo" }, x = null, C = ["sheetData", "row", "c"], S = ["cols", "col"], T = ["definedNames", "definedName"], D = ["sheetData", "row", "c", "f"], A = ["mergeCells", "mergeCell"], E = ["sheetViews", "sheetView", "pane"], I = ["sheetData", "row"], M = ["sheetViews", "sheetView", "selection"], R = ["sheets", "sheet"], F = ["sheetData", "row", "c", "is"], z = ["t"], P = ["si"], B = ["sheetData", "row", "c", "v"], L = ["bookViews", "workbookView"], H = ["sheetViews", "sheetView"], N = ["hyperlinks", "hyperlink"], O = ["dataValidations", "dataValidation"], V = ["dataValidations", "dataValidation", "formula1"], U = ["dataValidations", "dataValidation", "formula2"], W = { none: 0, thin: 1, medium: 2, dashed: 1, dotted: 1, thick: 3, double: 3, hair: 1, mediumDashed: 2, dashDot: 1, mediumDashDot: 2, dashDotDot: 1, mediumDashDotDot: 2, slantDashDot: 1 }, q = { 0: "General", 1: "0", 2: "0.00", 3: "#,##0", 4: "#,##0.00", 9: "0%", 10: "0.00%", 11: "0.00E+00", 12: "# ?/?", 13: "# ??/??", 14: "mm-dd-yy", 15: "d-mmm-yy", 16: "d-mmm", 17: "mmm-yy", 18: "h:mm AM/PM", 19: "h:mm:ss AM/PM", 20: "h:mm", 21: "h:mm:ss", 22: "m/d/yy h:mm", 37: "#,##0 ;(#,##0)", 38: "#,##0 ;[Red](#,##0)", 39: "#,##0.00;(#,##0.00)", 40: "#,##0.00;[Red](#,##0.00)", 45: "mm:ss", 46: "[h]:mm:ss", 47: "mmss.0", 48: "##0.0E+0", 49: "@" }, j = ["borders", "border"], G = ["fills", "fill"], $ = ["fonts", "font"], Y = ["cellXfs", "xf"], K = ["cellStyleXfs", "xf"], Q = ["numFmts", "numFmt"], X = [_("FF000000"), _("FFFFFFFF"), _("FFFF0000"), _("FF00FF00"), _("FF0000FF"), _("FFFFFF00"), _("FFFF00FF"), _("FF00FFFF"), _("FF000000"), _("FFFFFFFF"), _("FFFF0000"), _("FF00FF00"), _("FF0000FF"), _("FFFFFF00"), _("FFFF00FF"), _("FF00FFFF"), _("FF800000"), _("FF008000"), _("FF000080"), _("FF808000"), _("FF800080"), _("FF008080"), _("FFC0C0C0"), _("FF808080"), _("FF9999FF"), _("FF993366"), _("FFFFFFCC"), _("FFCCFFFF"), _("FF660066"), _("FFFF8080"), _("FF0066CC"), _("FFCCCCFF"), _("FF000080"), _("FFFF00FF"), _("FFFFFF00"), _("FF00FFFF"), _("FF800080"), _("FF800000"), _("FF008080"), _("FF0000FF"), _("FF00CCFF"), _("FFCCFFFF"), _("FFCCFFCC"), _("FFFFFF99"), _("FF99CCFF"), _("FFFF99CC"), _("FFCC99FF"), _("FFFFCC99"), _("FF3366FF"), _("FF33CCCC"), _("FF99CC00"), _("FFFFCC00"), _("FFFF9900"), _("FFFF6600"), _("FF666699"), _("FF969696"), _("FF003366"), _("FF339966"), _("FF003300"), _("FF333300"), _("FF993300"), _("FF993366"), _("FF333399"), _("FF333333"), _("FF000000"), _("FFFFFFFF")], Z = ["a:clrScheme", "*", "a:srgbClr"], J = ["a:clrScheme", "*", "a:sysClr"], kendo.spreadsheet.readExcel = function (e, i, n) { var o = new FileReader; o.onload = function (e) { var o = new JSZip(e.target.result); t(o, i, n) }, o.readAsArrayBuffer(e) }, kendo.spreadsheet._readSheet = a, kendo.spreadsheet._readStrings = h, kendo.spreadsheet._readStyles = p, kendo.spreadsheet._readTheme = m, kendo.spreadsheet._readWorkbook = t) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/workbook.min", ["kendo.core.min", "spreadsheet/runtime.min", "spreadsheet/references.min", "spreadsheet/excel-reader.min"], function () { !function (e) { function t(e, t) { function i(e, t, i) { return void 0 !== e ? e : void 0 !== t ? t : i } var n, o, r, s, a, l, c = i(e.rowCount, t.rows, 200), d = i(e.columnCount, t.columns, 50), u = i(e.rowHeight, t.rowHeight, 20), h = i(e.columnWidth, t.columnWidth, 64), f = i(e.headerHeight, t.headerHeight, 20), p = i(e.headerWidth, t.headerWidth, 32); if (void 0 !== e.rows) for (n = 0; n < e.rows.length; ++n)if (o = e.rows[n], (r = i(o.index, n)) >= c && (c = r + 1), o.cells) for (s = 0; s < o.cells.length; ++s)a = o.cells[s], (l = i(a.index, s)) >= d && (d = l + 1); return { rowCount: c, columnCount: d, rowHeight: u, columnWidth: h, headerHeight: f, headerWidth: p } } var i, n, o, r, s; e.support.browser.msie && e.support.browser.version < 9 || (i = e.jQuery, n = e.spreadsheet.calc.runtime.Formula, o = e.spreadsheet.Ref, r = e.spreadsheet.CalcError, s = e.Observable.extend({ init: function (t, i) { e.Observable.fn.init.call(this), this.options = t, this._view = i, this._sheets = [], this._sheetsSearchCache = {}, this._sheet = this.insertSheet({ rows: this.options.rows, columns: this.options.columns, rowHeight: this.options.rowHeight, columnWidth: this.options.columnWidth, headerHeight: this.options.headerHeight, headerWidth: this.options.headerWidth, dataSource: this.options.dataSource }), this.undoRedoStack = new e.util.UndoRedoStack, this.undoRedoStack.bind(["undo", "redo"], this._onUndoRedo.bind(this)), this._context = new e.spreadsheet.FormulaContext(this), this._validationContext = new e.spreadsheet.ValidationFormulaContext(this), this._names = Object.create(null), this.fromJSON(this.options) }, clipboard: function () { return this._clipboard || (this._clipboard = new e.spreadsheet.Clipboard(this)), this._clipboard }, destroy: function () { this.unbind(), this._clipboard && this._clipboard.destroy() }, events: ["cut", "copy", "paste", "change", "excelImport", "excelExport", "insertSheet", "removeSheet", "selectSheet", "renameSheet", "insertRow", "insertColumn", "deleteRow", "deleteColumn", "hideRow", "hideColumn", "unhideRow", "unhideColumn", "select", "changeFormat"], _sheetChange: function (e) { this.trigger("change", e) }, _sheetInsertRow: function (e) { this.trigger("insertRow", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetInsertColumn: function (e) { this.trigger("insertColumn", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetDeleteRow: function (e) { this.trigger("deleteRow", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetDeleteColumn: function (e) { this.trigger("deleteColumn", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetHideRow: function (e) { this.trigger("hideRow", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetHideColumn: function (e) { this.trigger("hideColumn", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetUnhideRow: function (e) { this.trigger("unhideRow", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetUnhideColumn: function (e) { this.trigger("unhideColumn", { sheet: e.sender, index: e.index }) && e.preventDefault() }, _sheetSelect: function (e) { this.trigger("select", e) }, _sheetCommandRequest: function (e) { this.trigger("commandRequest", e) }, _inputForRef: function (t) { return new e.spreadsheet.Range(t, this._sheet).input() }, _onUndoRedo: function (e) { e.command.range().select() }, execute: function (t) { var n, o = i.extend({ workbook: this }, t.options), r = new e.spreadsheet[t.command](o), s = this.activeSheet(); return o.origin && r.origin(o.origin), r.range(o.operatingRange ? o.operatingRange : o.editActiveCell ? s.activeCellSelection() : s.selection()), (n = r.exec()) && "error" === n.reason || (r.cannotUndo ? this.undoRedoStack.clear() : this.undoRedoStack.push(r)), n }, resetFormulas: function () { this._sheets.forEach(function (e) { e.resetFormulas() }) }, resetValidations: function () { this._sheets.forEach(function (e) { e.resetValidations() }) }, refresh: function (e) { e.recalc && (this.resetFormulas(), this.resetValidations(), this._sheet.recalc(this._context), this._sheet.revalidate(this._validationContext)) }, activeSheet: function (t) { return void 0 === t ? this._sheet : void (this.sheetByName(t.name()) && (this._sheet = t, t.triggerChange(e.spreadsheet.ALL_REASONS))) }, moveSheetToIndex: function (e, t) { var i = this.sheetIndex(e), n = this._sheets; -1 !== i && (this._sheetsSearchCache = {}, n.splice(t, 0, n.splice(i, 1)[0]), this.trigger("change", { sheetSelection: !0 })) }, insertSheet: function (t) { var i, n, o, r, s, a; if (i = this, n = "number" == typeof (t = t || {}).index ? t.index : i._sheets.length, r = i._sheets, s = function (e) { var t = "Sheet" + (e = e || 1); return i.sheetByName(t) ? s(e + 1) : t }, !t.name || !i.sheetByName(t.name)) return this._sheetsSearchCache = {}, o = t.name || s(), (a = new e.spreadsheet.Sheet(t.rows || this.options.rows, t.columns || this.options.columns, t.rowHeight || this.options.rowHeight, t.columnWidth || this.options.columnWidth, t.headerHeight || this.options.headerHeight, t.headerWidth || this.options.headerWidth, t.defaultCellStyle || this.options.defaultCellStyle))._workbook = this, a._name(o), this._bindSheetEvents(a), r.splice(n, 0, a), t.data && a.fromJSON(t.data), t.dataSource && a.setDataSource(t.dataSource), this.trigger("change", { sheetSelection: !0 }), a }, _bindSheetEvents: function (e) { e.bind("change", this._sheetChange.bind(this)), e.bind("insertRow", this._sheetInsertRow.bind(this)), e.bind("insertColumn", this._sheetInsertColumn.bind(this)), e.bind("deleteRow", this._sheetDeleteRow.bind(this)), e.bind("deleteColumn", this._sheetDeleteColumn.bind(this)), e.bind("hideRow", this._sheetHideRow.bind(this)), e.bind("hideColumn", this._sheetHideColumn.bind(this)), e.bind("unhideRow", this._sheetUnhideRow.bind(this)), e.bind("unhideColumn", this._sheetUnhideColumn.bind(this)), e.bind("select", this._sheetSelect.bind(this)), e.bind("commandRequest", this._sheetCommandRequest.bind(this)) }, sheets: function () { return this._sheets.slice() }, sheetByName: function (e) { return this._sheets[this.sheetIndex(e)] }, sheetByIndex: function (e) { return this._sheets[e] }, sheetIndex: function (e) { var t, i = this._sheets, n = ("string" == typeof e ? e : e.name()).toLowerCase(), o = this._sheetsSearchCache[n]; if (o >= 0) return o; for (o = 0; o < i.length; o++)if (t = i[o].name().toLowerCase(), this._sheetsSearchCache[t] = o, t === n) return o; return -1 }, renameSheet: function (e, t) { var i = e.name().toLowerCase(); if (t && i !== t.toLowerCase() && !this.sheetByName(t) && ((e = this.sheetByName(i)) && (this._sheetsSearchCache = {}, !this.trigger("renameSheet", { sheet: e, newSheetName: t })))) return this._sheets.forEach(function (e) { e._forFormulas(function (e) { e.renameSheet(i, t) }) }), this.forEachName(function (e, r) { e.nameref.renameSheet(i, t) && (this.undefineName(r), e.name = e.nameref.print(), this.nameDefinition(e.name, e)), (e.value instanceof o || e.value instanceof n) && e.value.renameSheet(i, t) }.bind(this)), e._name(t), this.trigger("change", { sheetSelection: !0 }), e }, removeSheet: function (e) { var t, i = this, n = i._sheets, o = e.name(), r = i.sheetIndex(e); 1 !== n.length && (this.trigger("removeSheet", { sheet: e }) || (this._sheetsSearchCache = {}, r > -1 && (e.unbind(), n.splice(r, 1), i.activeSheet().name() === o ? (t = n[r === n.length ? r - 1 : r], i.activeSheet(t)) : this.trigger("change", { recalc: !0, sheetSelection: !0 })))) }, _clearSheets: function () { for (var e = 0; e < this._sheets.length; e++)this._sheets[e].unbind(); this._sheets = [], this._sheetsSearchCache = {}, this._names = {} }, fromJSON: function (e) { var i, n, o, r; if (e.sheets) for (this._clearSheets(), i = 0; i < e.sheets.length; i++)n = e.sheets[i], o = t(n, this.options), r = this.insertSheet({ rows: o.rowCount, columns: o.columnCount, rowHeight: o.rowHeight, columnWidth: o.columnWidth, headerHeight: o.headerHeight, headerWidth: o.headerWidth, data: n }), n.dataSource && r.setDataSource(n.dataSource); this.activeSheet(e.activeSheet ? this.sheetByName(e.activeSheet) : this._sheets[0]), e.names && e.names.forEach(function (e) { this.defineName(e.name, e.value, e.hidden) }, this) }, toJSON: function () { this.resetFormulas(), this.resetValidations(); var e = Object.keys(this._names).map(function (e) { var t = this._names[e], i = t.value; return i instanceof o || i instanceof n ? i = i.print(0, 0, !0) : i instanceof r ? i += "" : i = JSON.stringify(i), { value: i, hidden: t.hidden, name: t.name, sheet: t.nameref.sheet, localName: t.nameref.name } }, this); return { activeSheet: this.activeSheet().name(), sheets: this._sheets.map(function (e) { return e.recalc(this._context), e.revalidate(this._validationContext), e.toJSON() }, this), names: e, columnWidth: this.options.columnWidth, rowHeight: this.options.rowHeight } }, fromFile: function (t) { var n = new i.Deferred, o = n.promise(), r = { file: t, promise: o }; return t && !this.trigger("excelImport", r) ? (this._clearSheets(), e.spreadsheet.readExcel(t, this, n)) : n.reject(), o }, saveAsExcel: function (t) { var n, o; t = i.extend({}, this.options.excel, t), n = this.toJSON(), this.trigger("excelExport", { workbook: n }) || (o = new e.ooxml.Workbook(n), e.saveAs({ dataURI: o.toDataURL(), fileName: n.fileName || t.fileName, proxyURL: t.proxyURL, forceProxy: t.forceProxy })) }, draw: function (t, i) { "function" != typeof t || i || (i = t, t = {}); var n = [], o = this._sheets; !function r(s) { if (s < o.length) o[s].draw(e.spreadsheet.SHEETREF, t, function (e) { n.push(e), r(s + 1) }); else { var a = n[0]; for (s = 1; s < n.length; ++s)a.children = a.children.concat(n[s].children); i(a) } }(0) }, nameForRef: function (e, t) { var i, n, r, s; for (n in void 0 === t && (t = e.sheet), t = t.toLowerCase(), i = e + "", this._names) if (r = this._names[n], (s = r.value) instanceof o && (!s.sheet || s.sheet && t == s.sheet.toLowerCase()) && s + "" == i) return r; return { name: i } }, defineName: function (t, i, n) { var o = e.spreadsheet.calc.parseNameDefinition(t, i); t = o.name.print(), this._names[t.toLowerCase()] = { value: o.value, hidden: n, name: t, nameref: o.name } }, undefineName: function (e) { delete this._names[e.toLowerCase()] }, nameValue: function (e) { return (e = e.toLowerCase()) in this._names ? this._names[e].value : null }, nameDefinition: function (e, t) { return e = e.toLowerCase(), arguments.length > 1 && (void 0 === t ? delete this._names[e] : this._names[e] = t), this._names[e] }, forEachName: function (e) { Object.keys(this._names).forEach(function (t) { e(this._names[t], t) }, this) }, adjustNames: function (e, t, i, r) { e = e.toLowerCase(), Object.keys(this._names).forEach(function (s) { var a = this._names[s], l = a.value; l instanceof o && l.sheet.toLowerCase() == e ? a.value = l.adjust(null, null, null, null, t, i, r) : l instanceof n && l.adjust(e, t ? "row" : "col", i, r) }, this) }, options: {} }), e.spreadsheet.Workbook = s, e.PDFMixin && (e.PDFMixin.extend(s.prototype), s.prototype.saveAsPDF = function (t) { var n = new i.Deferred, o = n.promise(), r = { promise: o }; if (!this.trigger("pdfExport", r)) return this._drawPDF(t, n).then(function (t) { return e.drawing.exportPDF(t) }).done(function (i) { e.saveAs({ dataURI: i, fileName: t.fileName, proxyURL: t.proxyURL, forceProxy: t.forceProxy, proxyTarget: t.proxyTarget }), n.resolve() }).fail(function (e) { n.reject(e) }), o }, s.prototype._drawPDF = function (e) { var t = new i.Deferred, n = function (e) { t.resolve(e) }; switch (e.area) { case "workbook": e.workbook.draw(e, n); break; case "sheet": e.workbook.activeSheet().draw(e, n); break; case "selection": e.workbook.activeSheet().selection().draw(e, n) }return t.promise() })) }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/formulacontext.min", ["kendo.core.min"], function () { var e, t, i, n, o, r, s, a; kendo.support.browser.msie && kendo.support.browser.version < 9 || (e = kendo.spreadsheet, t = e.CellRef, i = e.RangeRef, n = e.UnionRef, o = e.NameRef, r = e.Ref, s = kendo.Class.extend({ init: function (e) { this.workbook = e }, getRefCells: function (e, s, a, l, c) { var d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T; if (e instanceof t) return (d = this.workbook.sheetByName(e.sheet)) && e.valid() ? (u = d.formula(e), h = d.range(e.row, e.col).value(), null != u || null != h ? [{ formula: u, value: h, row: e.row, col: e.col, sheet: e.sheet, hidden: !!s && (0 === d.columnWidth(e.col) || 0 === d.rowHeight(e.row)) }] : []) : [{ value: new kendo.spreadsheet.calc.runtime.CalcError("REF") }]; if (e instanceof i) { if (f = this.workbook.sheetIndex(e.sheet), p = [], m = f, e.endSheet && (m = this.workbook.sheetIndex(e.endSheet), f > m && (g = f, f = m, m = g)), f < 0 || m < 0 || !e.valid()) return [{ value: new kendo.spreadsheet.calc.runtime.CalcError("REF") }]; for (; f <= m;)for (d = this.workbook.sheetByIndex(f++), v = d._grid.normalize(e.topLeft), _ = d._grid.normalize(e.bottomRight), b = d._grid.cellRefIndex(v), w = d._grid.cellRefIndex(_), y = d._properties.iterator("value", b, w), k = v.col; k <= _.col; ++k)for (x = v.row; x <= _.row; ++x)C = d._grid.index(x, k), u = d._properties.get("formula", C), h = y.at(C), null == u && null == h || p.push({ formula: u, value: h, row: x, col: k, sheet: d.name(), hidden: !!s && (0 === d.columnWidth(k) || 0 === d.rowHeight(x)) }); return p } if (e instanceof n) { for (S = [], f = 0; f < e.refs.length; ++f)S = S.concat(this.getRefCells(e.refs[f], s, a, l, c)); return S } return e instanceof o ? (T = this.nameValue(e, a, l, c)) instanceof r ? this.getRefCells(T, s, a, l, c) : [{ value: null == T ? new kendo.spreadsheet.calc.runtime.CalcError("NAME") : T }] : [] }, nameValue: function (e, t, i, n) { var o; return e.hasSheet() ? o = this.workbook.nameValue(e.print()) : (e = e.clone().setSheet(t, !0), null == (o = this.workbook.nameValue(e.print())) && (o = this.workbook.nameValue(e.name))), o instanceof r && (o = o.absolute(i, n)), o }, getData: function (e, i, n, r) { var s, a = e instanceof t; return e instanceof o && (a = this.workbook.nameValue(e.name) instanceof t), s = this.getRefCells(e, !1, i, n, r).map(function (e) { var t = e.value; return t instanceof kendo.spreadsheet.calc.runtime.Formula && (t = t.value), t }), a ? s[0] : s }, onFormula: function (e) { var t = this.workbook.sheetByName(e.sheet), i = e.row, n = e.col, o = e.value, s = t.formula({ row: i, col: n }); return s === e && (o instanceof r && (o = this.getData(o, e.sheet, i, n), Array.isArray(o) && (o = o[0]), void 0 === o && (o = null)), o instanceof kendo.spreadsheet.calc.runtime.Matrix ? o.each(function (e, o, r) { t._value(i + o, n + r, e) }) : t._value(i, n, o), clearTimeout(t._formulaContextRefresh), t._formulaContextRefresh = setTimeout(function () { t.batch(function () { }, { layout: !0 }) }, 50), !0) } }), a = s.extend({ onFormula: function () { return !0 } }), e.FormulaContext = s, e.ValidationFormulaContext = a) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/controller.min", ["kendo.core.min"], function () { !function (e) { "use strict"; function t(e) { return e.map(function (e) { return '[data-action="' + e + '"]' }).join(",") } var i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _; if (!(e.support.browser.msie && e.support.browser.version < 9)) { for (v in i = e.jQuery, n = /:alphanum$/, o = { up: "up", down: "down", left: "left", right: "right", home: "first-col", "ctrl+left": "first-col", end: "last-col", "ctrl+right": "last-col", "ctrl+up": "first-row", "ctrl+down": "last-row", "ctrl+home": "first", "ctrl+end": "last", pageup: "prev-page", pagedown: "next-page" }, r = { tab: "next", "shift+tab": "previous", enter: "lower", "shift+enter": "upper", delete: "clearContents", backspace: "clearContents", "shift+:alphanum": "edit", ":alphanum": "edit", "ctrl+:alphanum": "ctrl", "alt+ctrl+:alphanum": "edit", ":edit": "edit" }, s = { wheel: "onWheel", "*+mousedown": "onMouseDown", contextmenu: "onContextMenu", "*+mousedrag": "onMouseDrag", "*+mouseup": "onMouseUp", "*+dblclick": "onDblClick", mousemove: "onMouseMove" }, a = { "*+pageup": "onPageUp", "*+pagedown": "onPageDown", mouseup: "onMouseUp", "*+cut": "onCut", "*+paste": "onPaste", "*+copy": "onCopy" }, l = { esc: "onEditorEsc", enter: "onEditorBlur", "alt+enter": "insertNewline", "shift+enter": "onEditorBlur", tab: "onEditorBlur", "shift+tab": "onEditorBlur" }, c = i.extend({ focus: "onEditorBarFocus" }, l), d = i.extend({ focus: "onEditorCellFocus" }, l), u = { cell: "range", rowheader: "row", columnheader: "column", topcorner: "sheet", autofill: "autofill" }, h = t(["cut", "copy", "paste", "insert-left", "insert-right", "insert-above", "insert-below"]), f = t(["unhide-row", "unhide-column"]), p = [], m = [], g = [], o) p.push(v), m.push("shift+" + v); for (v in r) g.push(v); a[p] = "onAction", a[m] = "onShiftAction", a[g] = "onEntryAction", d[p] = "onEditorAction", d[m] = "onEditorShiftAction", _ = e.Class.extend({ init: function (t, n) { this.view = t, this.workbook(n), this.container = i(t.container), this.clipboardElement = i(t.clipboard), this.cellContextMenu = t.cellContextMenu, this.rowHeaderContextMenu = t.rowHeaderContextMenu, this.colHeaderContextMenu = t.colHeaderContextMenu, this.scroller = t.scroller, this.tabstrip = t.tabstrip, this.sheetsbar = t.sheetsbar, t.nameEditor.bind("enter", this.onNameEditorEnter.bind(this)), t.nameEditor.bind("cancel", this.onNameEditorCancel.bind(this)), t.nameEditor.bind("select", this.onNameEditorSelect.bind(this)), t.nameEditor.bind("delete", this.onNameEditorDelete.bind(this)), this.editor = t.editor, this.editor.bind("change", this.onEditorChange.bind(this)), this.editor.bind("activate", this.onEditorActivate.bind(this)), this.editor.bind("deactivate", this.onEditorDeactivate.bind(this)), this.editor.bind("update", this.onEditorUpdate.bind(this)), i(t.scroller).on("scroll", this.onScroll.bind(this)), this.listener = new e.spreadsheet.EventListener(this.container, this, s), this._enableEditorEvents(), this.sheetsbar && (this.sheetsbar.bind("select", this.onSheetBarSelect.bind(this)), this.sheetsbar.bind("reorder", this.onSheetBarReorder.bind(this)), this.sheetsbar.bind("rename", this.onSheetBarRename.bind(this)), this.sheetsbar.bind("remove", this.onSheetBarRemove.bind(this))), this.cellContextMenu.bind("select", this.onContextMenuSelect.bind(this)), this.rowHeaderContextMenu.bind("select", this.onContextMenuSelect.bind(this)), this.colHeaderContextMenu.bind("select", this.onContextMenuSelect.bind(this)), this.cellContextMenu.element.add(this.rowHeaderContextMenu.element).add(this.colHeaderContextMenu.element).on("contextmenu", !1), this.tabstrip && (this.tabstrip.bind("action", this.onCommandRequest.bind(this)), this.tabstrip.bind("dialog", this.onDialogRequest.bind(this))) }, _enableEditorEvents: function (t) { void 0 === t || t ? (this.keyListener = new e.spreadsheet.EventListener(this.clipboardElement, this, a), this.barKeyListener = new e.spreadsheet.EventListener(this.editor.barElement(), this, c), this.inputKeyListener = new e.spreadsheet.EventListener(this.editor.cellElement(), this, d)) : (this.keyListener.destroy(), this.barKeyListener.destroy(), this.inputKeyListener.destroy()) }, _execute: function (e) { var t = this._workbook.execute(e); return "EditCommand" !== e.command || t || this._workbook.trigger("change", { editorClose: !0 }), t && (this._preventNavigation = !0, "error" === t.reason ? this.view.showError(t, function () { this.activateEditor(), this.editor.value(this._lastEditorValue), this.editor._value = this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell()), this.editor.select() }.bind(this)) : this.view.openDialog(t.reason)), t }, _activeTooltip: function () { return "" + this._workbook.activeSheet().activeCell().simplify() }, onContextMenuSelect: function (e) { var t, n = i(e.item).data("action"); switch (n) { case "cut": t = { command: "ToolbarCutCommand", options: { workbook: this._workbook } }; break; case "copy": t = { command: "ToolbarCopyCommand", options: { workbook: this._workbook } }; break; case "paste": t = { command: "ToolbarPasteCommand", options: { workbook: this._workbook } }; break; case "unmerge": t = { command: "MergeCellCommand", options: { value: "unmerge" } }; break; case "merge": this.view.openDialog("merge"); break; case "hide-row": t = { command: "HideLineCommand", options: { axis: "row" } }; break; case "hide-column": t = { command: "HideLineCommand", options: { axis: "column" } }; break; case "unhide-row": t = { command: "UnHideLineCommand", options: { axis: "row" } }; break; case "unhide-column": t = { command: "UnHideLineCommand", options: { axis: "column" } }; break; case "delete-row": t = { command: "DeleteRowCommand" }; break; case "delete-column": t = { command: "DeleteColumnCommand" } }t && this._execute(t) }, onSheetBarRemove: function (e) { var t = this._workbook.sheetByName(e.name); t && this._workbook.removeSheet(t) }, destroy: function () { this.listener.destroy(), this._enableEditorEvents(!1), this.keyListener.destroy(), this.inputKeyListener.destroy() }, onSheetBarSelect: function (e) { var t, i = this._workbook; if (e.isAddButton) { if (this._workbook.trigger("insertSheet")) return; t = i.insertSheet() } else t = i.sheetByName(e.name); if (i.activeSheet().name() !== t.name()) { if (this._workbook.trigger("selectSheet", { sheet: t })) return; i.activeSheet(t) } }, onSheetBarReorder: function (e) { var t = this._workbook.sheetByIndex(e.oldIndex); this._workbook.moveSheetToIndex(t, e.newIndex), this._workbook.activeSheet(t) }, onSheetBarRename: function (e) { var t = this._workbook.sheetByIndex(e.sheetIndex); return this._workbook.sheetByName(e.name) ? void this.view.showError({ reason: "error", type: "duplicateSheetName" }) : (this._workbook.renameSheet(t, e.name), void this.clipboardElement.focus()) }, sheet: function (e) { this.navigator = e.navigator(), this.axisManager = e.axisManager() }, workbook: function (e) { this._workbook = e, this.clipboard = e.clipboard(), e.bind("commandRequest", this.onCommandRequest.bind(this)) }, refresh: function () { var e, t, i = this.editor, n = this._workbook, o = n.activeSheet(); this._viewPortHeight = this.view.scroller.clientHeight, this.navigator.height(this._viewPortHeight), i.isActive() || this.isEditorDisabled || (i.enable(!1 !== o.selection().enable()), i.value(n._inputForRef(o.activeCell()))), e = o.selection()._ref.simplify(), t = this._workbook.nameForRef(e, o.name()), this.view.nameEditor.value(t.name) }, onScroll: function () { this.view.render() }, onWheel: function (e) { var t = e.originalEvent.deltaX, i = e.originalEvent.deltaY; 1 === e.originalEvent.deltaMode && (t *= 10, i *= 10), this.scrollWith(t, i), e.preventDefault() }, onAction: function (e, t) { this.navigator.moveActiveCell(o[t]), e.preventDefault() }, onPageUp: function () { this.scrollDown(-this._viewPortHeight) }, onPageDown: function () { this.scrollDown(this._viewPortHeight) }, onEntryAction: function (e, t) { var i, o; if (e.mod) { switch (i = !0, String.fromCharCode(e.keyCode)) { case "A": this.navigator.selectAll(); break; case "Y": this._workbook.undoRedoStack.redo(); break; case "Z": this._workbook.undoRedoStack.undo(); break; default: i = !1 }i && e.preventDefault() } else if (o = !1 === this._workbook.activeSheet().selection().enable(), "delete" == t || "backspace" == t) o || this._execute({ command: "ClearContentCommand" }), e.preventDefault(); else if (n.test(t) || ":edit" === t) { if (o) return void e.preventDefault(); ":edit" !== t && this.editor.value(""), this.activateEditor() } else this.navigator.navigateInSelection(r[t]), e.preventDefault() }, onShiftAction: function (e, t) { this.navigator.modifySelection(o[t.replace("shift+", "")], this.appendSelection), e.preventDefault() }, onMouseMove: function (e) { var t, i = this._workbook.activeSheet(); i.resizingInProgress() || i.selectionInProgress() || ("columnresizehandle" === (t = this.objectAt(e)).type || "rowresizehandle" === t.type ? i.positionResizeHandle(t.ref) : i.removeResizeHandle()) }, onMouseDown: function (e) { var t, i = this.objectAt(e); if (i.pane && (this.originFrame = i.pane), "editor" === i.type) return this.onEditorEsc(), this.openCustomEditor(), void e.preventDefault(); if (this.editor.canInsertRef(!1) && i.ref) return this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs()), this.navigator.startSelection(i.ref, this._selectionMode, this.appendSelection, e.shiftKey), void e.preventDefault(); if (this._preventNavigation = !1, this.editor.deactivate(), !this._preventNavigation) { if (t = this._workbook.activeSheet(), "columnresizehandle" === i.type || "rowresizehandle" === i.type) return t.startResizing({ x: i.x, y: i.y }), void e.preventDefault(); if ("filtericon" === i.type) return this.openFilterMenu(e), void e.preventDefault(); this._selectionMode = u[i.type], this.appendSelection = e.mod, this.navigator.startSelection(i.ref, this._selectionMode, this.appendSelection, e.shiftKey) } }, onContextMenu: function (t) { var i, n, o, r, s, a = this._workbook.activeSheet(); a.resizingInProgress() || (t.preventDefault(), this.cellContextMenu.close(), this.colHeaderContextMenu.close(), this.rowHeaderContextMenu.close(), "columnresizehandle" !== (n = this.objectAt(t)).type && "rowresizehandle" !== n.type && (this.navigator.selectForContextMenu(n.ref, u[n.type]), o = this.navigator._sheet.select() instanceof e.spreadsheet.UnionRef, r = !1, s = !1, "columnheader" == n.type ? (i = this.colHeaderContextMenu, r = !o && this.axisManager.selectionIncludesHiddenColumns()) : "rowheader" == n.type ? (i = this.rowHeaderContextMenu, r = !o && this.axisManager.selectionIncludesHiddenRows()) : (i = this.cellContextMenu, s = this.navigator.selectionIncludesMergedCells()), i.element.find(h).toggle(!o), i.element.find(f).toggle(r), i.element.find("[data-action=unmerge]").toggle(s), setTimeout(function () { i.open(t.pageX, t.pageY) }))) }, prevent: function (e) { e.preventDefault() }, constrainResize: function (e, t) { var i = this._workbook.activeSheet(), n = i.resizeHandlePosition(); return !n || "outside" === e || "topcorner" === e || t.col < n.col || t.row < n.row }, onMouseDrag: function (e) { var t, i, n, o; if ("sheet" !== this._selectionMode) { if (t = { clientX: e.clientX, clientY: e.clientY }, i = this.objectAt(t), (n = this._workbook.activeSheet()).resizingInProgress()) return void (this.constrainResize(i.type, i.ref) || n.resizeHintPosition({ x: i.x, y: i.y })); if ("outside" === i.type) return void this.startAutoScroll(i); this.originFrame === i.pane ? this.selectToLocation(t) : (o = this.originFrame._grid, i.x > o.right && this.scrollLeft(), i.y > o.bottom && this.scrollTop(), i.y < o.top || i.x < o.left ? this.startAutoScroll(i, t) : this.selectToLocation(t)), e.preventDefault() } }, onMouseUp: function (e) { var t, i, n, o = this._workbook.activeSheet(); if (o.completeResizing(), this.navigator.completeSelection(), this.stopAutoScroll(), t = this.editor.activeEditor()) { for (i = e.target; i;) { if (i === t.element[0]) return; i = i.parentNode } (n = this.objectAt(e)) && n.ref && t.canInsertRef(!1) && (t.refAtPoint(o.selection()._ref), o._setFormulaSelections(t.highlightedRefs())) } }, onDblClick: function (e) { var t = this.objectAt(e), i = !1 === this._workbook.activeSheet().selection().enable(); "cell" !== t.type || i || (this.editor.activate({ range: this._workbook.activeSheet()._viewActiveCell(), rect: this.view.activeCellRectangle(), tooltip: this._activeTooltip() }).focus(), this.onEditorUpdate()) }, onCut: function (e) { if (e) { var t = this.clipboardElement.find("table.kendo-clipboard-" + this.clipboard._uid).detach(); this.clipboardElement.append(t.clone(!1)), setTimeout(function () { this.clipboardElement.empty().append(t) }.bind(this)) } this._execute({ command: "CutCommand", options: { workbook: this.view._workbook, event: e.originalEvent || e } }) }, clipBoardValue: function () { return this.clipboardElement.html() }, onPaste: function (t) { var i, n, o, r = "", s = ""; if (this.clipboard.menuInvoked = void 0 === t, t) { if (!t.originalEvent.clipboardData || !t.originalEvent.clipboardData.getData) return o = this.clipboardElement.find("table.kendo-clipboard-" + this.clipboard._uid).detach(), this.clipboardElement.empty(), void setTimeout(function () { var e = this.clipboardElement.html(), i = window.clipboardData.getData("Text").trim(); (e || i) && (this.clipboard.external({ html: e, plain: i }), this.clipboardElement.empty().append(o), this._execute({ command: "PasteCommand", options: { workbook: this.view._workbook, event: t.originalEvent || t } }), this.clipboard.menuInvoked = !0) }.bind(this)); t.preventDefault(), i = !1, n = !1, window.DOMStringList && t.originalEvent.clipboardData.types instanceof window.DOMStringList ? (i = t.originalEvent.clipboardData.types.contains("text/html"), n = t.originalEvent.clipboardData.types.contains("text/plain")) : (i = /text\/html/.test(t.originalEvent.clipboardData.types), n = /text\/plain/.test(t.originalEvent.clipboardData.types)), i && (r = t.originalEvent.clipboardData.getData("text/html")), n && (s = t.originalEvent.clipboardData.getData("text/plain").trim()) } else { if (e.support.browser.msie) return this.clipboardElement.focus().select(), void document.execCommand("paste"); this.clipboard.menuInvoked = !0 } (r || s) && (this.clipboard.external({ html: r, plain: s }), this._execute({ command: "PasteCommand", options: { workbook: this.view._workbook, event: t.originalEvent || t } })) }, onCopy: function (e) { this.clipboard.menuInvoked = void 0 === e, this._execute({ command: "CopyCommand", options: { workbook: this.view._workbook, event: e.originalEvent || e } }) }, scrollTop: function () { this.scroller.scrollTop = 0 }, scrollLeft: function () { this.scroller.scrollLeft = 0 }, scrollDown: function (e) { this.scroller.scrollTop += e }, scrollRight: function (e) { this.scroller.scrollLeft += e }, scrollWith: function (e, t) { this.scroller.scrollTop += t, this.scroller.scrollLeft += e }, objectAt: function (e) { var t = this.container[0].getBoundingClientRect(); return this.view.objectAt(e.clientX - t.left, e.clientY - t.top) }, selectToLocation: function (e) { var t = this.objectAt(e); t.pane && (this.extendSelection(t), this.lastKnownCellLocation = e, this.originFrame = t.pane), this.stopAutoScroll() }, extendSelection: function (e) { this.navigator.extendSelection(e.ref, this._selectionMode, this.appendSelection) }, autoScroll: function () { var e = this._autoScrollTarget.x, t = this._autoScrollTarget.y, i = this.originFrame._grid, n = this.view.scroller, o = n.scrollLeft, r = n.scrollTop; e < i.left && this.scrollRight(-8), e > i.right && this.scrollRight(8), t < i.top && this.scrollDown(-8), t > i.bottom && this.scrollDown(8), r === n.scrollTop && o === n.scrollLeft ? this.selectToLocation(this.finalLocation) : this.extendSelection(this.objectAt(this.lastKnownCellLocation)) }, startAutoScroll: function (e, t) { this._scrollInterval || (this._scrollInterval = setInterval(this.autoScroll.bind(this), 50)), this.finalLocation = t || this.lastKnownCellLocation, this._autoScrollTarget = e }, stopAutoScroll: function () { clearInterval(this._scrollInterval), this._scrollInterval = null }, openCustomEditor: function () { this.view.openCustomEditor() }, openFilterMenu: function (e) { var t = this.objectAt(e), i = this._workbook.activeSheet(), n = i.filterColumn(t.ref), o = this.view.createFilterMenu(n); o.bind("action", this.onCommandRequest.bind(this)), o.bind("action", o.close.bind(o)), o.openFor(e.target) }, onEditorChange: function (e) { this._workbook.activeSheet().isInEditMode(!1), this._lastEditorValue = e.value, this._execute({ command: "EditCommand", options: { editActiveCell: !0, value: e.value } }) }, onEditorActivate: function () { var e = this._workbook, t = e.activeSheet(); t._setFormulaSelections(this.editor.highlightedRefs()), t.isInEditMode(!0) }, onEditorDeactivate: function () { var e = this._workbook.activeSheet(); e.isInEditMode(!1), e._setFormulaSelections([]) }, onEditorUpdate: function () { this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs()) }, onEditorBarFocus: function () { var e = !1 === this._workbook.activeSheet().selection().enable(); e || this.editor.activate({ range: this._workbook.activeSheet()._viewActiveCell(), rect: this.view.activeCellRectangle(), tooltip: this._activeTooltip() }) }, onEditorCellFocus: function () { this.editor.scale() }, onEditorEsc: function () { this.resetEditorValue(), this.editor.deactivate(), this.clipboardElement.focus() }, insertNewline: function (e) { e.preventDefault(), this.editor.insertNewline() }, onEditorBlur: function (e, t) { this.editor.isFiltered() || (this._preventNavigation = !1, this.editor.deactivate(), this._preventNavigation || (this.clipboardElement.focus(), this.navigator.navigateInSelection(r[t]))) }, onEditorAction: function (e, t) { var i = this.editor, n = this._workbook.activeSheet(); i.canInsertRef(!0) && (this.navigator.moveActiveCell(o[t]), i.activeEditor().refAtPoint(n.selection()._ref), n._setFormulaSelections(i.highlightedRefs()), e.preventDefault()) }, onEditorShiftAction: function (e, t) { var i = this.editor, n = this._workbook.activeSheet(); i.canInsertRef(!0) && (this.navigator.modifySelection(o[t.replace("shift+", "")], this.appendSelection), i.activeEditor().refAtPoint(n.selection()._ref), n._setFormulaSelections(i.highlightedRefs()), e.preventDefault()) }, resetEditorValue: function () { this.editor.value(this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell())) }, activateEditor: function () { this.editor.activate({ range: this._workbook.activeSheet()._viewActiveCell(), rect: this.view.activeCellRectangle(), tooltip: this._activeTooltip() }).focus() }, deactivateEditor: function () { this.view.editor.deactivate() }, onCommandRequest: function (e) { e.command ? this._execute(e) : this._workbook.undoRedoStack[e.action]() }, onDialogRequest: function (e) { var t = { pdfExport: this._workbook.options.pdf, excelExport: this._workbook.options.excel }; e.options ? i.extend(!0, e.options, t) : e.options = t, this.view.openDialog(e.name, e.options) }, onNameEditorEnter: function () { var t, i = this._workbook, n = i.activeSheet(), o = this.view.nameEditor.value(), r = e.spreadsheet.calc.parseReference(o, !0) || i.nameValue(o); return r instanceof e.spreadsheet.Ref ? (r.sheet && r.sheet.toLowerCase() != n.name().toLowerCase() && ((t = i.sheetByName(r.sheet)) && (i.activeSheet(t), n = t)), void n.range(r).select()) : (r = n.selection()._ref.clone().simplify().setSheet(n.name(), !0), this._execute({ command: "DefineNameCommand", options: { name: o, value: r } }), void this.clipboardElement.focus()) }, onNameEditorCancel: function () { this.clipboardElement.focus() }, onNameEditorSelect: function (t) { var i, n = t.name, o = this._workbook, r = o.activeSheet(), s = o.nameValue(n); return s instanceof e.spreadsheet.Ref ? (s.sheet && s.sheet.toLowerCase() != r.name().toLowerCase() && ((i = o.sheetByName(s.sheet)) && (o.activeSheet(i), r = i)), void r.range(s).select()) : void this.clipboardElement.focus() }, onNameEditorDelete: function (e) { this._execute({ command: "DeleteNameCommand", options: { name: e.name } }), this.clipboardElement.focus() } }), e.spreadsheet.Controller = _ } }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/view.min", ["kendo.core.min", "kendo.menu.min", "spreadsheet/sheetsbar.min"], function () { !function (e) { function t(e) { return (e.size || 1) + "px solid " + (e.color || "#000") } function i(i, n, o, r) { function s(t) { var i, o = n.link; return o || "object" == typeof n.value && (o = n.value.link), o ? (i = { textDecoration: "none" }, n.color && (i.color = n.color), n.underline && (i.textDecoration = "underline"), e.dom.element("a", { href: function (e) { return /:\/\//.test(e) || (e = "http://" + e), e }(o), style: i, target: "_blank" }, t ? [t] : [])) : t } var a, l, c, d, u, f, p, m, g, v, _, b = null != n.value || null != n.validation && !n.validation.value || n.background || n.merged; if (o || b) { if (a = {}, (l = n.background) && (c = l, r && ((c = e.parseColor(c).toHSV()).v *= .9, c = c.toCssRgba()), c = t({ color: c }), a.outline = c), l && (a.backgroundColor = l), n.color && (a.color = n.color), n.fontFamily && (a.fontFamily = n.fontFamily), n.underline && (a.textDecoration = "underline"), n.italic && (a.fontStyle = "italic"), n.textAlign && (a.textAlign = n.textAlign), n.bold && (a.fontWeight = "bold"), n.fontSize && (a.fontSize = n.fontSize + "px"), !0 === n.wrap && (a.whiteSpace = "pre-wrap", a.overflowWrap = "break-word", a.wordWrap = "break-word"), a.left = n.left + 1 + "px", a.top = n.top + 1 + "px", a.width = n.width - 1 + "px", a.height = n.height - 1 + "px", d = n.value, u = typeof d, n.format && null != d ? (d = e.spreadsheet.formatting.format(d, n.format)).__dataType && (u = d.__dataType) : null != d && (d = e.dom.text(d)), !a.textAlign) switch (u) { case "number": case "date": case "percent": a.textAlign = "right"; break; case "boolean": a.textAlign = "center" }return f = [h.cell], o && f.push(o), !1 === n.enable && f.push("k-state-disabled"), n.merged && f.push("k-spreadsheet-merged-cell"), p = n.verticalAlign || "bottom", d = p && d ? e.dom.element("div", { className: "k-vertical-align-" + p }, [s(d)]) : s(d), m = d ? [d] : [], g = { style: a }, (v = n.validation) && !v.value && (m.push(e.dom.element("span", { className: "k-dirty" })), f.push("k-dirty-cell"), g.title = v.message), g.className = f.join(" "), _ = e.dom.element("div", g, m), i.push(_), _ } } function n(i, n, o) { var r, s, a, l, c, d, u = {}; if (o.background && (u.backgroundColor = o.background), o.color && (u.color = o.color), o.fontFamily && (u.fontFamily = o.fontFamily), o.underline && (u.textDecoration = "underline"), o.italic && (u.fontStyle = "italic"), o.textAlign && (u.textAlign = o.textAlign), o.verticalAlign && (u.verticalAlign = "center" === o.verticalAlign ? "middle" : o.verticalAlign), o.bold && (u.fontWeight = "bold"), o.fontSize && (u.fontSize = o.fontSize + "px"), !0 === o.wrap && (u.whiteSpace = "pre-wrap", u.wordBreak = "break-all"), o.borderRight ? u.borderRight = t(o.borderRight) : o.background && (u.borderRightColor = o.background), o.borderBottom ? u.borderBottom = t(o.borderBottom) : o.background && (u.borderBottomColor = o.background), r = o.value, s = typeof r, o.format && null != r && ((r = e.spreadsheet.formatting.format(r, o.format)).__dataType && (s = r.__dataType)), !u.textAlign) switch (s) { case "number": case "date": case "percent": u.textAlign = "right"; break; case "boolean": u.textAlign = "center" }return a = null, !1 === o.enable && (a = "k-state-disabled"), l = i.addCell(n, r, u, a, o.validation), o.borderLeft ? (d = function (e, t) { var i = e.trs[t].children; return i[i.length - 2] }(i, n), c = t(o.borderLeft), d && c && (d.attr.style.borderRight = c)) : o.background && (u.borderLeftColor = o.background), o.borderTop ? (d = function (e, t) { var i = e.trs[t - 1], n = e.trs[t].children.length - 1; if (i && n >= 0) return i.children[n] }(i, n), c = t(o.borderTop), d && c && (d.attr.style.borderBottom = c)) : o.background && (u.borderTopColor = o.background), l } function o(e, t, i) { return e >= t && e <= i } var r, s, a, l, c, d, u, h, f; e.support.browser.msie && e.support.browser.version < 9 || (r = e.jQuery, s = e.spreadsheet.CellRef, a = ".", 7, l = { view: "k-spreadsheet-view", fixedContainer: "k-spreadsheet-fixed-container", editContainer: "k-spreadsheet-edit-container", scroller: "k-spreadsheet-scroller", viewSize: "k-spreadsheet-view-size", clipboard: "k-spreadsheet-clipboard", cellEditor: "k-spreadsheet-cell-editor", barEditor: "k-spreadsheet-editor", topCorner: "k-spreadsheet-top-corner", filterHeadersWrapper: "k-filter-wrapper", filterRange: "k-filter-range", filterButton: "k-spreadsheet-filter", filterButtonActive: "k-state-active", horizontalResize: "k-horizontal-resize", verticalResize: "k-vertical-resize", icon: "k-icon", iconFilterDefault: "k-i-arrow-60-down", sheetsBar: "k-spreadsheet-sheets-bar", sheetsBarActive: "k-spreadsheet-sheets-bar-active", sheetsBarInactive: "k-spreadsheet-sheets-bar-inactive", cellContextMenu: "k-spreadsheet-cell-context-menu", rowHeaderContextMenu: "k-spreadsheet-row-header-context-menu", colHeaderContextMenu: "k-spreadsheet-col-header-context-menu" }, e.spreadsheet.messages.view = { nameBox: "Name Box", errors: { openUnsupported: "Unsupported format. Please select an .xlsx file.", shiftingNonblankCells: "Cannot insert cells due to data loss possibility. Select another insert location or delete the data from the end of your worksheet.", insertColumnWhenRowIsSelected: "Cannot insert column when all columns are selected.", insertRowWhenColumnIsSelected: "Cannot insert row when all rows are selected.", filterRangeContainingMerges: "Cannot create a filter within a range containing merges", sortRangeContainingMerges: "Cannot sort a range containing merges", cantSortMultipleSelection: "Cannot sort multiple selection", cantSortNullRef: "Cannot sort empty selection", cantSortMixedCells: "Cannot sort range containing cells of mixed shapes", validationError: "The value that you entered violates the validation rules set on the cell.", cannotModifyDisabled: "Cannot modify disabled cells." }, tabs: { home: "Home", insert: "Insert", data: "Data" } }, c = e.Class.extend({ init: function () { this.cols = [], this.trs = [], this._height = 0, this._width = 0 }, addColumn: function (t) { this._width += t; var i = e.dom.element("col", { style: { width: t + "px" } }); i.visible = t > 0, this.cols.push(i) }, addRow: function (t) { var i, n = null; n = { style: { height: t + "px" } }, this._height += t, (i = e.dom.element("tr", n)).visible = t > 0, this.trs.push(i) }, addCell: function (t, i, n, o, r) { var s, a, l; return null != i || (i = ""), i instanceof e.dom.Node || (i = e.dom.text(i)), s = [i], a = { style: n }, r && !r.value && (s.push(e.dom.element("span", { className: "k-dirty" })), o = (o || "") + (o ? " " : "") + "k-dirty-cell", a.title = r.message), o && (a.className = o), l = e.dom.element("td", a, s), this.trs[t].children.push(l), l }, toDomTree: function (t, i, n) { this.trs = this.trs.filter(function (e) { return e.visible }); var o = 0; return this.cols = this.cols.filter(function (e, t) { return e.visible || (this.trs.forEach(function (e) { e.children.splice(t - o, 1) }), o++), e.visible }, this), e.dom.element("table", { style: { left: t + "px", top: i + "px", height: this._height + "px", width: this._width + "px" }, className: n }, [e.dom.element("colgroup", null, this.cols), e.dom.element("tbody", null, this.trs)]) } }), '<ul class="#=classNames.cellContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action=merge>Merge</li><li data-action=unmerge>Unmerge</li></ul>', '<ul class="#=classNames.rowHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-row">Delete</li><li data-action="hide-row">Hide</li><li data-action="unhide-row">Unhide</li></ul>', '<ul class="#=classNames.colHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-column">Delete</li><li data-action="hide-column">Hide</li><li data-action="unhide-column">Unhide</li></ul>', e.spreadsheet.ContextMenu = e.ui.ContextMenu, d = e.template('<div class="#=classNames.view#"><div class="#=classNames.fixedContainer#"></div><div class="#=classNames.scroller#"><div class="#=classNames.viewSize#"></div></div><div tabindex="0" class="#=classNames.clipboard#" contenteditable=true></div><div class="#=classNames.cellEditor#"></div></div><div class="#=classNames.sheetsBar#"></div><ul class="#=classNames.cellContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action=merge>Merge</li><li data-action=unmerge>Unmerge</li></ul><ul class="#=classNames.rowHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-row">Delete</li><li data-action="hide-row">Hide</li><li data-action="unhide-row">Unhide</li></ul><ul class="#=classNames.colHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-column">Delete</li><li data-action="hide-column">Hide</li><li data-action="unhide-column">Unhide</li></ul>'), u = e.Class.extend({ init: function (t, i) { var n, o, s = u.classNames; this.element = t, this.options = r.extend(!0, { messages: e.spreadsheet.messages.view }, this.options, i), this._chrome(), this._dialogs = [], t.append(d({ classNames: s })), this._formulaInput(), this.wrapper = t.find(a + s.view), this.container = t.find(a + s.fixedContainer)[0], this.scroller = t.find(a + s.scroller)[0], this.clipboard = t.find(a + s.clipboard), this.viewSize = r(this.scroller.firstChild), this.tree = new e.dom.Tree(this.container), this.clipboardContents = new e.dom.Tree(this.clipboard[0]), this.editor = new e.spreadsheet.SheetEditor(this), this._sheetsbar(), n = { target: t, animation: !1, showOn: "never" }, this.cellContextMenu = new e.spreadsheet.ContextMenu(t.find(a + s.cellContextMenu), n), this.colHeaderContextMenu = new e.spreadsheet.ContextMenu(t.find(a + s.colHeaderContextMenu), n), this.rowHeaderContextMenu = new e.spreadsheet.ContextMenu(t.find(a + s.rowHeaderContextMenu), n), o = e.support.scrollbar(), r(this.container).css({ width: this.wrapper[0].clientWidth - o, height: this.wrapper[0].clientHeight - o }) }, enableClipboard: function (e) { this.isClipboardDeactivated = !e, e ? this.clipboard.attr("contenteditable", e) : this.clipboard.removeAttr("contenteditable") }, _resize: function () { var t = e._outerHeight, i = this.tabstrip ? t(this.tabstrip.element) : 0, n = this.formulaBar ? t(this.formulaBar.element) : 0, o = this.sheetsbar ? t(this.sheetsbar.element) : 0; this.wrapper.height(this.element.height() - (i + n + o)), this.tabstrip && this.tabstrip.quickAccessAdjust() }, _chrome: function () { var t, i = r("<div class='k-spreadsheet-action-bar' />").prependTo(this.element), n = r("<div class='k-spreadsheet-name-editor' />").appendTo(i); this.nameEditor = new e.spreadsheet.NameEditor(n, this.options), t = r("<div />").appendTo(i), this.formulaBar = new e.spreadsheet.FormulaBar(t), this.options.toolbar && this._tabstrip() }, _formulaInput: function () { var t = this.element.find(a + u.classNames.cellEditor); this.formulaInput = new e.spreadsheet.FormulaInput(t, { autoScale: !0 }) }, _sheetsbar: function () { if (this.options.sheetsbar) { var t = r.extend(!0, { openDialog: this.openDialog.bind(this) }, this.options.sheetsbar); this.sheetsbar = new e.spreadsheet.SheetsBar(this.element.find(a + u.classNames.sheetsBar), t) } }, _tabstrip: function () { var t, i = this.options.messages.tabs, n = r.extend(!0, { home: !0, insert: !0, data: !0 }, this.options.toolbar), o = []; for (t in this.tabstrip && (this.tabstrip.destroy(), this.element.children(".k-tabstrip").remove()), n) (!0 === n[t] || n[t] instanceof Array) && o.push({ id: t, text: i[t], content: "" }); this.tabstrip = new e.spreadsheet.TabStrip(r("<div />").prependTo(this.element), { animation: !1, dataTextField: "text", dataContentField: "content", dataSource: o, toolbarOptions: n, view: this }), this.tabstrip.select(0) }, _executeCommand: function (e) { this._sheet.trigger("commandRequest", e) }, workbook: function (e) { this._workbook = e, this.nameEditor._workbook = e }, sheet: function (e) { this._sheet = e }, activeCellRectangle: function () { return this.cellRectangle(this._sheet._viewActiveCell()) }, _rectangle: function (e, t) { return e._grid.boundingRectangle(t.toRangeRef()) }, isColumnResizer: function (e, t, i) { var n, o = this._rectangle(t, i); return e -= this._sheet._grid._headerWidth, 3.5, (n = o.right - this.scroller.scrollLeft) - 3.5 <= e && e <= n + 3.5 }, isRowResizer: function (e, t, i) { var n, o = this._rectangle(t, i); return e -= this._sheet._grid._headerHeight, 3.5, (n = o.bottom - this.scroller.scrollTop) - 3.5 <= e && e <= n + 3.5 }, isFilterIcon: function (e, t, i, n) { var o, r = i._grid, s = r.rows.frozen ? 0 : this.scroller.scrollTop, a = r.columns.frozen ? 0 : this.scroller.scrollLeft; return e -= this._sheet._grid._headerWidth - a, t -= this._sheet._grid._headerHeight - s, o = !1, this._sheet.forEachFilterHeader(n, function (n) { if (!o) { var r = this._rectangle(i, n); o = i.filterIconRect(r).intersects(e, t) } }.bind(this)), o }, isAutoFill: function (e, t, i) { var n, o = this._sheet.select(); return !(o.size > 1) && (e -= this._sheet._grid._headerWidth, t -= this._sheet._grid._headerHeight, i._grid.columns.frozen || (e += this.scroller.scrollLeft), i._grid.rows.frozen || (t += this.scroller.scrollTop), n = this._rectangle(i, o), Math.abs(n.right - e) < 8 && Math.abs(n.bottom - t) < 8) }, isEditButton: function (e, t) { var i, n = this._sheet.activeCellCustomEditor(); if (n && (i = this.activeCellRectangle(), e > i.right && e <= i.right + 20 && t >= i.top && t <= i.bottom)) return !0 }, objectAt: function (e, t) { var i, n, o, r, a, l, c, d = this._sheet._grid; return e < 0 || t < 0 || e > this.scroller.clientWidth || t > this.scroller.clientHeight ? i = { type: "outside" } : e < d._headerWidth && t < d._headerHeight ? i = { type: "topcorner" } : (n = this.paneAt(e, t)) ? (o = n._grid.rows.indexVisible(t, this.scroller.scrollTop), r = n._grid.columns.indexVisible(e, this.scroller.scrollLeft), a = "cell", l = new s(o, r), c = this._sheet.selectionInProgress(), this.isAutoFill(e, t, n) ? a = "autofill" : this.isFilterIcon(e, t, n, l) ? a = "filtericon" : !c && e < d._headerWidth ? (l = new s(o, -1 / 0), a = this.isRowResizer(t, n, l) ? "rowresizehandle" : "rowheader") : !c && t < d._headerHeight ? (l = new s(-1 / 0, r), a = this.isColumnResizer(e, n, l) ? "columnresizehandle" : "columnheader") : this.isEditButton(e, t) && (a = "editor"), i = { type: a, ref: l }) : i = { type: "outside" }, i.pane = n, i.x = e, i.y = t, i }, paneAt: function (e, t) { return this.panes.filter(function (i) { var n = i._grid; return o(t, n.top, n.bottom) && o(e, n.left, n.right) })[0] }, containingPane: function (e) { return this.panes.filter(function (t) { return !!t._grid.contains(e) })[0] }, cellRectangle: function (e) { var t = this.containingPane(e)._grid, i = this._sheet._grid.rectangle(e); return i.offset(t.headerWidth - (t.columns.frozen ? 0 : this.scroller.scrollLeft), t.headerHeight - (t.rows.frozen ? 0 : this.scroller.scrollTop)) }, refresh: function (e) { var t, i, n = this._sheet; this.tabstrip && this.tabstrip.refreshTools(n.range(n.activeCell())), e.sheetSelection && this.sheetsbar && this.sheetsbar.renderSheets(this._workbook.sheets(), this._workbook.sheetIndex(this._sheet)), this._resize(), this.viewSize[0].style.height = n._grid.totalHeight() + "px", this.viewSize[0].style.width = n._grid.totalWidth() + "px", e.layout && (t = n.frozenColumns(), i = n.frozenRows(), this.panes = [this._pane(i, t)], t > 0 && this.panes.push(this._pane(i, 0, null, t)), i > 0 && this.panes.push(this._pane(0, t, i, null)), i > 0 && t > 0 && this.panes.push(this._pane(0, 0, i, t))), e.filter && this._destroyFilterMenu(), e.activeCell && (this._focus = n.activeCell().toRangeRef()) }, createFilterMenu: function (t) { var i, n, o, s, a, l; return this._filterMenu && this._filterMenu.options.column == t ? this._filterMenu : (this._destroyFilterMenu(), i = this._sheet, n = i.filter().ref, o = new e.spreadsheet.Range(n, i), s = r("<div />").appendTo(this.element), a = { column: t, range: o }, l = new e.spreadsheet.FilterMenu(s, a), this._filterMenu = l, l) }, selectClipBoardContents: function () { this.isClipboardDeactivated || (this.clipboard.focus(), function (e) { var t, i = window.getSelection(); i.removeAllRanges(), (t = document.createRange()).selectNodeContents(e), i.addRange(t) }(this.clipboard[0])) }, scrollIntoView: function (e) { var t = !1, i = this.containingPane(e)._grid, n = i.scrollBoundaries(e), o = this.scroller, r = i.rows.frozen ? 0 : o.scrollTop, s = i.columns.frozen ? 0 : o.scrollLeft; return n.top < r && (t = !0, o.scrollTop = n.scrollTop), n.bottom > r && (t = !0, o.scrollTop = n.scrollBottom), n.left < s && (t = !0, o.scrollLeft = n.scrollLeft), n.right > s && (t = !0, o.scrollLeft = n.scrollRight), t }, _destroyDialog: function () { this._dialogs.pop() }, openCustomEditor: function () { var e = this, t = e._sheet.activeCell().first(), i = e._sheet.activeCellCustomEditor(), n = e._sheet.range(t); i.edit({ range: n, rect: e.activeCellRectangle(), view: this, validation: this._sheet.validation(t), callback: function (t, i) { e._executeCommand({ command: "EditCommand", options: { operatingRange: n, property: i ? "input" : "value", value: t } }) } }) }, openDialog: function (t, i) { var n, o, r, s = e.spreadsheet.dialogs.create(t, i); if (s) return s.bind("action", this._executeCommand.bind(this)), s.bind("deactivate", this._destroyDialog.bind(this)), this._dialogs.push(s), n = this._sheet, o = n.activeCell(), r = new e.spreadsheet.Range(o, n), s.open(r), s }, showError: function (t, i) { var n, o = this.options.messages.errors, s = function (t) { var i = t.sender.dialog().element; i.find(".k-button:first").focus(), i.find(".k-button, input").on("keydown", function (i) { i.keyCode == e.keys.ESC && t.sender.close() }) }, a = function (e) { var t = e.sender; this.selectClipBoardContents(), t._retry && i && i() }.bind(this); e.spreadsheet.dialogs.registered(t.type) ? (n = { close: a }, "validationError" === t.type && (n = r.extend(n, { title: t.title || "Error", text: t.body ? t.body : o[t.type], activate: s })), this.openDialog(t.type, n)) : this.openDialog("message", { title: t.title || "Error", text: t.body ? t.body : o[t.type], activate: s, close: a }) }, destroy: function () { this._dialogs.forEach(function (e) { e.destroy() }), this.cellContextMenu.destroy(), this.rowHeaderContextMenu.destroy(), this.colHeaderContextMenu.destroy(), this.tabstrip && this.tabstrip.destroy(), this._destroyFilterMenu() }, _destroyFilterMenu: function () { this._filterMenu && (this._filterMenu.destroy(), this._filterMenu = void 0, this._filterMenuColumn = void 0) }, render: function () { var t, i, n, o, r, s, a, c; this.element.is(":visible") && (t = this._sheet, (i = t.focus()) && this.scrollIntoView(i) || (n = t.resizingInProgress() ? t.resizeHandlePosition().col === -1 / 0 ? "column" : "row" : "none", this.wrapper.toggleClass(l.editContainer, this.editor.isActive()).toggleClass(l.horizontalResize, "row" == n).toggleClass(l.verticalResize, "column" == n), o = t._grid, r = this.scroller.scrollTop, s = this.scroller.scrollLeft, r < 0 && (r = 0), s < 0 && (s = 0), a = this.panes.map(function (e) { return e.render(s, r) }), c = e.dom.element("div", { style: { width: o._headerWidth + "px", height: o._headerHeight + "px" }, className: u.classNames.topCorner }), a.push(c), t.resizeHandlePosition() && t.resizeHintPosition() && a.push(this.renderResizeHint()), this.tree.render(a), this.editor.isActive() ? this.editor.toggleTooltip(this.activeCellRectangle()) : t.selectionInProgress() || t.resizingInProgress() || t.isInEditMode() || this.renderClipboardContents())) }, renderResizeHint: function () { var t, i, n = this._sheet, o = n.resizeHandlePosition(), r = o.col !== -1 / 0; return t = r ? { height: this.scroller.clientHeight + "px", width: "7px", left: n.resizeHintPosition().x + "px", top: "0px" } : { height: "7px", width: this.scroller.clientWidth + "px", top: n.resizeHintPosition().y + "px", left: "0px" }, i = f.classNames, e.dom.element("div", { className: i.resizeHint + (r ? "" : " " + i.resizeHintVertical), style: t }, [e.dom.element("div", { className: i.resizeHintHandle }), e.dom.element("div", { className: i.resizeHintMarker })]) }, renderClipboardContents: function () { var e, t, i, o, r, a = this._sheet, l = a._grid, d = a.select().toRangeRef(), u = this._workbook.clipboard().canCopy(); return !1 === u.canCopy && u.multiSelection ? (this.clipboardContents.render([]), void this.selectClipBoardContents()) : (d = a.trim(d), e = new c, (t = l.rangeDimensions(d)).rows.forEach(function (t) { e.addRow(t) }), t.columns.forEach(function (t) { e.addColumn(t) }), i = a._getMergedCells(d), o = i.primary, r = i.secondary, a.forEach(d, function (t, i, a) { var l, c, u = new s(t, i).print(); r[u] || (l = n(e, t - d.topLeft.row, a), (c = o[u]) && (l.attr.colspan = c.width(), l.attr.rowspan = c.height())) }), this.clipboardContents.render([e.toDomTree(0, 0, "kendo-clipboard-" + this._workbook.clipboard()._uid)]), void this.selectClipBoardContents()) }, _pane: function (e, t, i, n) { var o = new f(this._sheet, this._sheet._grid.pane({ row: e, column: t, rowCount: i, columnCount: n })); return o.refresh(this.scroller.clientWidth, this.scroller.clientHeight), o } }), h = { cell: "k-spreadsheet-cell", vaxis: "k-spreadsheet-vaxis", haxis: "k-spreadsheet-haxis", vborder: "k-spreadsheet-vborder", hborder: "k-spreadsheet-hborder", rowHeader: "k-spreadsheet-row-header", columnHeader: "k-spreadsheet-column-header", pane: "k-spreadsheet-pane", data: "k-spreadsheet-data", mergedCell: "k-spreadsheet-merged-cell", mergedCellsWrapper: "k-merged-cells-wrapper", activeCell: "k-spreadsheet-active-cell", selection: "k-spreadsheet-selection", selectionWrapper: "k-selection-wrapper", autoFillWrapper: "k-auto-fill-wrapper", single: "k-single", top: "k-top", right: "k-right", bottom: "k-bottom", left: "k-left", resizeHandle: "k-resize-handle", columnResizeHandle: "k-column-resize-handle", rowResizeHandle: "k-row-resize-handle", resizeHint: "k-resize-hint", resizeHintHandle: "k-resize-hint-handle", resizeHintMarker: "k-resize-hint-marker", resizeHintVertical: "k-resize-hint-vertical", selectionHighlight: "k-spreadsheet-selection-highlight", series: ["k-series-a", "k-series-b", "k-series-c", "k-series-d", "k-series-e", "k-series-f"] }, f = e.Class.extend({ init: function (e, t) { this._sheet = e, this._grid = t }, refresh: function (e, t) { this._grid.refresh(e, t) }, isVisible: function (e, t, i) { return this._grid.view(e, t).ref.intersects(i) }, render: function (t, i) { var n, o, r, s, a, l, c = f.classNames, d = this._sheet, u = this._grid, h = u.view(t, i); return this._currentView = h, this._currentRect = this._rectangle(h.ref), this._selectedHeaders = d.selectedHeaders(), (n = []).push(this.renderData()), n.push(this.renderSelection()), n.push(this.renderAutoFill()), n.push(this.renderEditorSelection()), n.push(this.renderFilterHeaders()), u.hasRowHeader && (o = e.dom.element("div", { className: c.rowHeader, style: { width: u.headerWidth + "px", top: h.rowOffset + "px" } }), n.push(o), d.forEach(h.ref.leftColumn(), function (t) { if (!d.isHiddenRow(t)) { var i = t + 1, n = d.rowHeight(t); o.children.push(e.dom.element("div", { className: this.headerClassName(t, "row"), style: { width: u.headerWidth + "px", height: n + "px" } }, [e.dom.element("div", { className: "k-vertical-align-center" }, [e.dom.text(i + "")])])) } }.bind(this))), u.hasColumnHeader && (r = e.dom.element("div", { className: c.columnHeader, style: { top: "0px", left: h.columnOffset + "px", width: this._currentRect.width + "px", height: u.headerHeight + "px" } }), n.push(r), s = 0, d.forEach(h.ref.topRow(), function (t, i) { if (!d.isHiddenColumn(i)) { var n = e.spreadsheet.Ref.display(null, 1 / 0, i), o = d.columnWidth(i); r.children.push(e.dom.element("div", { className: this.headerClassName(i, "col"), style: { position: "absolute", left: s + "px", width: o + "px", height: u.headerHeight + "px" } }, [e.dom.element("div", { className: "k-vertical-align-center" }, [e.dom.text(n + "")])])), s += o } }.bind(this))), d.resizeHandlePosition() && (u.hasColumnHeader || u.hasRowHeader) && (a = d._grid.normalize(d.resizeHandlePosition()), h.ref.intersects(a) && (d.resizeHintPosition() || n.push(this.renderResizeHandle()))), l = [c.pane], u.hasColumnHeader && l.push(c.top), u.hasRowHeader && l.push(c.left), e.dom.element("div", { style: u.style, className: l.join(" ") }, n) }, headerClassName: function (e, t) { var i, n, o, r = this._selectedHeaders; return "row" === t ? (i = r.rows[e], n = r.allRows) : (i = r.cols[e], n = r.allCols), (o = i || (r.all ? "full" : n ? "partial" : "none")) && (o = "k-selection-" + o), o }, renderData: function () { var t, n, o = this._sheet, r = this._currentView, s = e.dom.element("div", { className: f.classNames.data, style: { position: "relative", left: r.columnOffset + "px", top: r.rowOffset + "px" } }), a = this._currentRect, l = e.spreadsheet.draw.doLayout(o, r.ref, { forScreen: !0 }), c = o._showGridLines; return c && (t = null, l.xCoords.forEach(function (i) { i !== t && (t = i, s.children.push(e.dom.element("div", { className: h.vaxis, style: { left: i + "px", height: a.height + "px", borderColor: o.gridLinesColor() } }))) }), t = null, l.yCoords.forEach(function (i) { i !== t && (t = i, s.children.push(e.dom.element("div", { className: h.haxis, style: { top: i + "px", width: a.width + "px", borderColor: o.gridLinesColor() } }))) })), n = e.spreadsheet.draw.Borders(), l.cells.forEach(function (e) { n.add(e), i(s.children, e, null, c) }), n.vert.forEach(function (t) { t.forEach(function (t) { if (!t.rendered) { t.rendered = !0; var i = { left: t.x + "px", top: t.top + "px", height: t.bottom - t.top + 1 + "px", borderWidth: t.size + "px", borderColor: t.color }; 1 != t.size && (i.transform = "translateX(-" + (t.size - 1) / 2 + "px)"), s.children.push(e.dom.element("div", { className: h.vborder, style: i })) } }) }), n.horiz.forEach(function (t) { t.forEach(function (t) { if (!t.rendered) { t.rendered = !0; var i = { top: t.y + "px", left: t.left + "px", width: t.right - t.left + "px", borderWidth: t.size + "px", borderColor: t.color }; 1 != t.size && (i.transform = "translateY(-" + (t.size - 1) / 2 + "px)"), s.children.push(e.dom.element("div", { className: h.hborder, style: i })) } }) }), s }, renderResizeHandle: function () { var t, i = this._sheet, n = i.resizeHandlePosition(), o = this._rectangle(n), r = [f.classNames.resizeHandle]; return n.col !== -1 / 0 ? (t = { height: this._grid.headerHeight + "px", width: "7px", left: o.right - 3.5 + "px", top: "0px" }, r.push(l.horizontalResize)) : (t = { height: "7px", width: this._grid.headerWidth + "px", top: o.bottom - 3.5 + "px", left: "0px" }, r.push(l.verticalResize)), e.dom.element("div", { className: r.join(" "), style: t }) }, filterIconRect: function (t) { return new e.spreadsheet.Rectangle(t.right - 16 - 3, t.top + 3, 16, 16) }, renderFilterHeaders: function () { function t(t) { return e.dom.element("span", { className: r.icon + " " + t }) } function i(i, n, o) { var r = { left: n.left + "px", top: n.top + "px" }, a = s && s.columns.some(function (e) { return e.index === o }), l = i.filterButton; return a && (l += " " + i.filterButtonActive), e.dom.element("span", { className: l, style: r }, [t(i.iconFilterDefault)]) } var n = this._sheet, o = [], r = u.classNames, s = n.filter(); return s && this._addDiv(o, s.ref, r.filterRange), n.forEachFilterHeader(this._currentView.ref, function (e) { var t = this._rectangle(e), n = this.filterIconRect(t), s = this._sheet.filterColumn(e), a = i(r, n, s); o.push(a) }.bind(this)), e.dom.element("div", { className: r.filterHeadersWrapper }, o) }, renderEditorSelection: function () { var t = f.classNames, i = this._sheet, n = []; return i._formulaSelections.forEach(function (i) { var o = i.ref; o !== e.spreadsheet.NULLREF && this._addDiv(n, o, t.selectionHighlight + " " + i.colorClass) }.bind(this)), e.dom.element("div", { className: t.selectionWrapper }, n) }, renderSelection: function () { var t = f.classNames, i = [], n = [t.activeCell], o = [t.selection], r = this._sheet, s = r.activeCell().toRangeRef(), a = this._activeFormulaColor(), l = r.select(); return n = n.concat(a, this._directionClasses(s)), o = o.concat(a), r.singleCellSelection() && n.push(t.single), 1 === l.size() && o.push("k-single-selection"), this._sheet.autoFillPunch() && o.push("k-dim-auto-fill-handle"), l.forEach(function (t) { t !== e.spreadsheet.NULLREF && this._addDiv(i, t, o.join(" ")) }.bind(this)), this._addTable(i, s, n.join(" ")), e.dom.element("div", { className: t.selectionWrapper }, i) }, renderAutoFill: function () { var t, i, n, o, r, a, l, c = []; if (this._sheet.autoFillInProgress()) if (t = this._sheet.autoFillRef(), i = this._sheet.autoFillPunch(), n = this._sheet._autoFillDirection, this._addDiv(c, t, "k-auto-fill"), i) this._addDiv(c, i, "k-auto-fill-punch"); else if (void 0 !== n) { switch (n) { case 0: case 1: o = t.bottomRight, r = "k-auto-fill-br-hint"; break; case 2: o = new s(t.topLeft.row, t.bottomRight.col), r = "k-auto-fill-tr-hint"; break; case 3: o = new s(t.bottomRight.row, t.topLeft.col), r = "k-auto-fill-bl-hint" }a = e.dom.element("span", { className: "k-tooltip" }, [e.dom.text(this._sheet._autoFillHint)]), (l = this._addDiv(c, o, r)) && l.children.push(a) } return e.dom.element("div", { className: f.classNames.autoFillWrapper }, c) }, _addDiv: function (e, t, i) { var n, o = this._currentView; return o.ref.intersects(t) && (n = this._rectangle(t).resize(1, 1).toDiv(i), e.push(n)), n }, _addTable: function (t, n, o) { var r, s, a = this, l = a._sheet, c = a._currentView; c.ref.intersects(n) && (r = a._rectangle(n), s = a._sheet.activeCellCustomEditor(), l.forEach(n.collapse(), function (n, a, l) { if (l.left = r.left, l.top = r.top, l.width = r.width, l.height = r.height, i(t, l, o, !0), s) { var c = e.dom.element("div", { className: "k-button k-spreadsheet-editor-button", style: { left: l.left + l.width + "px", top: l.top + "px", height: l.height + "px" } }); s.icon && c.children.push(e.dom.element("span", { className: "k-icon " + s.icon })), t.push(c) } })) }, _activeFormulaColor: function () { var e, t = []; return this._sheet.isInEditMode() && ((e = this._sheet._formulaSelections.filter(function (e) { return e.active && "ref" == e.type })[0]) && t.push(e.colorClass)), t }, _directionClasses: function (e) { var t = [], i = f.classNames, n = this._currentView.ref; return e.move(0, -1).intersects(n) || t.push(i.left), e.move(-1, 0).intersects(n) || t.push(i.top), e.move(0, 1).intersects(n) || t.push(i.right), e.move(1, 0).intersects(n) || t.push(i.bottom), t }, _rectangle: function (e) { return this._grid.boundingRectangle(e.toRangeRef()).offset(-this._currentView.mergedCellLeft, -this._currentView.mergedCellTop) } }), e.spreadsheet.View = u, e.spreadsheet.Pane = f, e.spreadsheet.drawCell = i, r.extend(!0, u, { classNames: l }), r.extend(!0, f, { classNames: h })) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/customeditors.min", ["kendo.core.min", "kendo.popup.min", "kendo.calendar.min", "kendo.listview.min", "spreadsheet/sheet.min"], function () { !function (e) { "use strict"; var t, i; e.support.browser.msie && e.support.browser.version < 9 || (t = {}, i = e.spreadsheet.registerEditor = function (e, i) { t[e] = i }, e.spreadsheet.Sheet.prototype.activeCellCustomEditor = function () { var e, i, n, o = this.activeCell().first(); if (this.range(o).enable()) return e = this.validation(o), null != (i = this._properties.get("editor", this._grid.cellRefIndex(o))) ? n = t[i] : e && e.showButton && (i = "_validation_" + e.dataType, n = t[i]), "function" == typeof n && (n = t[i] = n()), n }, i("_validation_date", function () { function t() { var t, r, s, a; n || (n = $("<div>").kendoCalendar(), o = $("<div>").kendoPopup(), n.appendTo(o), n = n.getKendoCalendar(), o = o.getKendoPopup(), n.bind("change", function () { o.close(); var t = n.value(); i.range.format() || i.range.format("yyyy-mm-dd"), i.callback(e.spreadsheet.dateToNumber(t)) })), o.setOptions({ anchor: i.view.element.find(".k-spreadsheet-editor-button") }), t = i.range.value(), n.value(null != t ? e.spreadsheet.numberToDate(t) : null), (r = i.validation) ? (s = e.ui.Calendar.fn.options.min, a = e.ui.Calendar.fn.options.max, /^(?:greaterThan|between)/.test(r.comparerType) && (s = e.spreadsheet.numberToDate(r.from.value)), "between" == r.comparerType && (a = e.spreadsheet.numberToDate(r.to.value)), "lessThan" == r.comparerType && (a = e.spreadsheet.numberToDate(r.from.value)), n.setOptions({ disableDates: function (t) { var i = r.from ? 0 | r.from.value : 0, n = r.to ? 0 | r.to.value : 0; return t = 0 | e.spreadsheet.dateToNumber(t), !e.spreadsheet.validation.validationComparers[r.comparerType](t, i, n) }, min: s, max: a })) : n.setOptions({ disableDates: null, min: null, max: null }), o.open() } var i, n, o; return { edit: function (e) { i = e, t() }, icon: "k-i-calendar" } }), i("_validation_list", function () { function t() { var t, r, s; n || (n = $("<ul class='k-list k-reset'/>").kendoStaticList({ template: "#:value#", selectable: !0, autoBind: !1 }), o = $("<div>").kendoPopup(), n.appendTo(o), o = o.getKendoPopup(), (n = n.getKendoStaticList()).bind("change", function () { o.close(); var e = n.value()[0]; e && i.callback(e.value) })), o.setOptions({ anchor: i.view.element.find(".k-spreadsheet-editor-button") }), t = i.validation.from.value, r = [], t && t.each(function (e) { r.push({ value: e }) }), s = new e.data.DataSource({ data: r }), n.setDataSource(s), s.read(), o.open() } var i, n, o; return { edit: function (e) { i = e, t() }, icon: "k-i-arrow-60-down" } })) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/grid.min", ["kendo.core.min", "spreadsheet/references.min"], function () { e = kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.spreadsheet.CellRef, i = e.spreadsheet.RangeRef, n = e.spreadsheet.UnionRef, o = e.Class.extend({ init: function (e, t, i, n) { this.left = e, this.width = i, this.right = e + i, this.top = t, this.height = n, this.bottom = t + n }, offset: function (e, t) { return new o(this.left + e, this.top + t, this.width, this.height) }, resize: function (e, t) { return new o(this.left, this.top, this.width + e, this.height + t) }, intersects: function (e, t) { return this.left < e && e < this.left + this.width && this.top < t && t < this.top + this.height }, toDiv: function (t) { return e.dom.element("div", { className: t, style: { width: this.width + "px", height: this.height + "px", top: this.top + "px", left: this.left + "px" } }) } }), r = e.Class.extend({ init: function (e, t, i, n, o, r) { this.rowCount = i, this.columnCount = n, this._columns = t, this._rows = e, this._headerHeight = o, this._headerWidth = r }, isAxis: function (e) { var t, i; return e = e.toRangeRef(), t = e.topLeft, i = e.bottomRight, 0 === t.row && i.row === this.rowCount - 1 || 0 === t.col && i.col === this.columnCount - 1 }, width: function (e, t) { return this._columns.sum(e, t) }, height: function (e, t) { return this._rows.sum(e, t) }, totalHeight: function () { return this._rows.total + this._headerHeight }, totalWidth: function () { return this._columns.total + this._headerWidth }, index: function (e, t) { return t * this.rowCount + e }, cellRef: function (e) { return new t(e % this.rowCount, e / this.rowCount >> 0) }, rowRef: function (e) { return new i(new t(e, 0), new t(e, this.columnCount - 1)) }, colRef: function (e) { return new i(new t(0, e), new t(this.rowCount - 1, e)) }, cellRefIndex: function (e) { return this.index(e.row, e.col) }, normalize: function (e) { return e instanceof i ? new i(this.normalize(e.topLeft), this.normalize(e.bottomRight)).setSheet(e.sheet, e.hasSheet()) : e instanceof n ? e.map(function (e) { return this.normalize(e) }, this) : (e instanceof t && ((e = e.clone()).col = Math.max(0, Math.min(this.columnCount - 1, e.col)), e.row = Math.max(0, Math.min(this.rowCount - 1, e.row))), e) }, rectangle: function (e) { var t = this.normalize(e.topLeft), i = this.normalize(e.bottomRight); return new o(this.width(0, t.col - 1), this.height(0, t.row - 1), this.width(t.col, i.col), this.height(t.row, i.row)) }, pane: function (t) { return new s(new e.spreadsheet.PaneAxis(this._rows, t.row, t.rowCount, this._headerHeight), new e.spreadsheet.PaneAxis(this._columns, t.column, t.columnCount, this._headerWidth), this) }, rangeDimensions: function (e) { return { rows: this._rows.values.iterator(e.topLeft.row, e.bottomRight.row), columns: this._columns.values.iterator(e.topLeft.col, e.bottomRight.col) } }, forEach: function (e, i) { var n, o, r = this.normalize(e.topLeft), s = this.normalize(e.bottomRight); for (n = r.col; n <= s.col; n++)for (o = r.row; o <= s.row; o++)i(new t(o, n)) }, trim: function (e, n) { var o, r, s, a, l, c = e.topLeft, d = e.bottomRight, u = c.row, h = c.col; for (o = c.col; o <= d.col; o++)r = this.index(c.row, o), s = this.index(d.row, o), (a = n.tree.intersecting(r, s)).length && (l = this.cellRef(a[a.length - 1].end), u = Math.max(u, l.row), h = o); return new i(e.topLeft, new t(Math.min(u, e.bottomRight.row), h)) } }), s = e.Class.extend({ init: function (e, t, i) { this.rows = e, this.columns = t, this._grid = i, this.headerHeight = e.headerSize, this.headerWidth = t.headerSize, this.hasRowHeader = t.hasHeader, this.hasColumnHeader = e.hasHeader }, refresh: function (e, t) { var i, n; this.columns.viewSize(e), this.rows.viewSize(t), i = this.columns.paneSegment(), n = this.rows.paneSegment(), this.left = i.offset, this.top = n.offset, this.right = i.offset + i.length, this.bottom = n.offset + n.length, this.style = { top: n.offset + "px", left: i.offset + "px", height: n.length + "px", width: i.length + "px" } }, view: function (e, n) { var o = this.rows.visible(n), r = this.columns.visible(e); return { rows: o, columns: r, rowOffset: o.offset, columnOffset: r.offset, mergedCellLeft: r.start, mergedCellTop: o.start, ref: new i(new t(o.values.start, r.values.start), new t(o.values.end, r.values.end)) } }, contains: function (e) { return this.rows.contains(e.topLeft.row, e.bottomRight.row) && this.columns.contains(e.topLeft.col, e.bottomRight.col) }, index: function (e, t) { return this._grid.index(e, t) }, boundingRectangle: function (e) { return this._grid.rectangle(e) }, cellRefIndex: function (e) { return this._grid.cellRefIndex(e) }, scrollBoundaries: function (e) { var t = this.boundingRectangle(e), i = { top: Math.max(0, t.top - this.top + (this.hasColumnHeader ? 0 : this.headerHeight)), left: Math.max(0, t.left - this.left + (this.hasRowHeader ? 0 : this.headerWidth)), right: t.right - this.columns._viewSize + this.headerWidth, bottom: t.bottom - this.rows._viewSize + this.headerHeight }, n = this.columns.defaultValue / 2, o = this.rows.defaultValue / 2; return i.scrollTop = i.top - o, i.scrollBottom = i.bottom + o, i.scrollLeft = i.left - n, i.scrollRight = i.right + n, i } }), e.spreadsheet.Grid = r, e.spreadsheet.PaneGrid = s, e.spreadsheet.Rectangle = o); var e, t, i, n, o, r, s }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/axis.min", ["kendo.core.min"], function () { e = kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.Class.extend({ init: function (t, i) { this._value = i, this._count = t, this.values = new e.spreadsheet.RangeList(0, t - 1, i), this._hidden = new e.spreadsheet.RangeList(0, t - 1, 0), this.scrollBarSize = e.support.scrollbar(), this._refresh() }, adjust: function (e, t) { t < 0 ? (this.values.copy(e - t, this._count - 1, e), this._hidden.copy(e - t, this._count - 1, e)) : (this.values.copy(e, this._count, e + t), this._hidden.copy(e, this._count, e + t), this.values.value(e, e + t - 1, this._value), this._hidden.value(e, e + t - 1, 0)), this._refresh() }, toJSON: function (e, t) { var i, n, o, r, s = [], a = this.values.iterator(0, this._count - 1); for (i = 0; i < this._count; i++)(n = a.at(i)) !== this._value && void 0 === (o = t[i]) && (o = s.length, (r = { index: i })[e] = n, s.push(r), t[i] = o); return s }, fromJSON: function (e, t) { var i, n, o; for (i = 0; i < t.length; i++)n = t[i][e], void 0 === (o = t[i].index) && (o = i), this.value(o, o, n) }, hide: function (e) { if (!this.hidden(e)) { var t = this.value(e, e); this._hidden.value(e, e, t), this.value(e, e, 0) } }, hidden: function (e) { return 0 !== this._hidden.value(e, e) }, includesHidden: function (e, t) { return this._hidden.intersecting(e, t).length > 1 }, nextVisible: function (e, t) { var i, n = this._count - 1; return e === n ? t ? e + 1 : e : (e += 1, 0 !== (i = this._hidden.intersecting(e, e)[0]).value ? i.end === n ? e - 1 : i.end + 1 : e) }, nextPage: function (e, t) { return this.index(this.sum(0, e - 1) + t) }, prevPage: function (e, t) { return this.index(this.sum(0, e) - t) }, firstVisible: function () { var e = this._hidden.first(); return 0 === e.value ? 0 : e.end + 1 }, lastVisible: function () { var e = this._hidden.last(); return 0 === e.value ? this._count - 1 : e.start - 1 }, prevVisible: function (e, t) { if (0 === e) return t ? -1 : 0; e -= 1; var i = this._hidden.intersecting(e, e)[0]; return 0 !== i.value ? 0 === i.start ? e + 1 : i.start - 1 : e }, unhide: function (e) { if (this.hidden(e)) { var t = this._hidden.value(e, e); this._hidden.value(e, e, 0), this.value(e, e, t) } }, value: function (e, t, i) { return void 0 === i ? this.values.iterator(e, t).at(0) : (this.values.value(e, t, i), void this._refresh()) }, sum: function (e, t) { var i, n = this.values.iterator(e, t), o = 0; for (i = e; i <= t; i++)o += n.at(i); return o }, visible: function (e, t) { var i, n, o, r, s, a, l = null, c = null, d = !1; return t >= this.total + this.scrollBarSize && (d = !0), i = this._pixelValues.intersecting(e, t), l = i[0], c = i[i.length - 1], l ? (n = e - l.start, o = (n / l.value.value >> 0) + l.value.start, r = n - (o - l.value.start) * l.value.value, s = t - c.start, (a = (s / c.value.value >> 0) + c.value.start) > c.value.end && (a = c.value.end), d && (r += c.value.value - (s - (a - c.value.start) * c.value.value)), r = Math.min(-r, 0), { values: this.values.iterator(o, a), offset: r }) : { values: this.values.iterator(0, 0), offset: 0 } }, index: function (e) { for (var t = 0, i = this.values.iterator(0, this._count - 1), n = i.at(0); n < e && t < this._count - 1;)n += i.at(++t); return t }, indexVisible: function (e) { var t = this.index(e); return this.hidden(t) && (t = this.prevVisible(t)), t }, _refresh: function () { var t = 0; this._pixelValues = this.values.map(function (i) { var n, o = t; return t += (i.end - i.start + 1) * i.value, n = t - 1, new e.spreadsheet.ValueRange(o, n, i) }), this.total = t }, getState: function () { return { values: this.values.getState(), hidden: this._hidden.getState() } }, setState: function (e) { this.values.setState(e.values), this._hidden.setState(e.hidden), this._refresh() } }), i = e.Class.extend({ init: function (e, t, i, n) { this._axis = e, this._start = t, this._count = i, this.hasHeader = 0 === t, this.headerSize = n, this.defaultValue = e._value, this.frozen = i > 0 }, viewSize: function (e) { this._viewSize = e }, sum: function (e, t) { return this._axis.sum(e, t - 1) }, start: function () { return this.sum(0, this._start) }, size: function () { return this.sum(this._start, this._start + this._count) }, index: function (e, t) { return this._axis.index(e + (this.frozen ? 0 : t) - this.headerSize) }, indexVisible: function (e, t) { return this._axis.indexVisible(e + (this.frozen ? 0 : t) - this.headerSize) }, paneSegment: function () { var e, t = this.start(); return this.hasHeader || (t += this.headerSize), this.frozen ? (e = this.size(), this.hasHeader ? e += this.headerSize : e -= this.headerSize) : e = this._viewSize - t, { offset: t, length: e } }, visible: function (e) { var t, i, n = this.start(); return this.frozen ? (t = this.size(), this.hasHeader || (t -= this.headerSize)) : (t = this._viewSize - n - this.headerSize, n += e), i = this._axis.visible(n, n + t - 1), this.frozen && (i.offset = 0), i.start = n, this.hasHeader && (i.offset += this.headerSize, i.start -= this.headerSize), i }, contains: function (e, t) { return this.frozen ? !(e > this._start + this._count || t < this._start) : t >= this._start } }), e.spreadsheet.Axis = t, e.spreadsheet.PaneAxis = i); var e, t, i }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/filter.min", ["kendo.core.min", "kendo.data.min"], function () { !function (e) { function t(e) { var t = e.getMonth() + 1; return t >= 1 && t <= 3 ? 1 : t >= 4 && t <= 6 ? 2 : t >= 7 && t <= 9 ? 3 : 4 } function i(t, i) { if (t instanceof Date) { var n = e.date.today(); return n.setFullYear(n.getFullYear() + i), n.getFullYear() === t.getFullYear() } return !1 } function n(t, i) { if (t instanceof Date) { var n = e.date.firstDayOfMonth(e.date.today()); return n.setMonth(n.getMonth() + i, 1), n.getTime() === e.date.firstDayOfMonth(t).getTime() } return !1 } function o(t, i) { var n, o; return i instanceof Date && (n = e.date.dayOfWeek(e.date.getDate(t), 1), o = e.date.dayOfWeek(e.date.getDate(i), 1), n.getTime() === o.getTime()) } if (!(e.support.browser.msie && e.support.browser.version < 9)) { var r = e.spreadsheet.Filter = e.Class.extend({ prepare: function () { }, value: function (e) { return e.value }, matches: function () { throw Error("The 'matches' method is not implemented.") }, toJSON: function () { throw Error("The 'toJSON' method is not implemented.") } }); r.create = function (t) { var i, n = t.filter; if (!n) throw Error("Filter type not specified."); if (!(i = e.spreadsheet[n.charAt(0).toUpperCase() + n.substring(1) + "Filter"])) throw Error("Filter type not recognized."); return new i(t) }, e.spreadsheet.ValueFilter = r.extend({ _values: [], _dates: [], _blanks: !1, init: function (e) { void 0 !== e.values && (this._values = e.values), void 0 !== e.blanks && (this._blanks = e.blanks), void 0 !== e.dates && (this._dates = e.dates) }, value: function (t) { var i = t.value; return this._dates.length > 0 && t.format && "number" == typeof i && ("date" === e.spreadsheet.formatting.type(i, t.format) && (i = e.spreadsheet.numberToDate(i))), i }, matches: function (e) { return null == e ? this._blanks : e instanceof Date ? this._dates.some(function (t) { return !(t.year !== e.getFullYear() || void 0 !== t.month && t.month !== e.getMonth() || void 0 !== t.day && t.day !== e.getDate() || void 0 !== t.hours && t.hours !== e.getHours() || void 0 !== t.minutes && t.minutes !== e.getMinutes() || void 0 !== t.seconds && t.seconds !== e.getSeconds()) }) : this._values.indexOf(e) >= 0 }, toJSON: function () { return { filter: "value", blanks: this._blanks, values: this._values.slice(0) } } }), e.spreadsheet.CustomFilter = r.extend({ _logic: "and", init: function (t) { if (void 0 !== t.logic && (this._logic = t.logic), void 0 === t.criteria) throw Error("Must specify criteria."); this._criteria = t.criteria; var i = e.data.Query.filterExpr({ logic: this._logic, filters: this._criteria }).expression; this._matches = Function("d", "return " + i) }, matches: function (e) { return null !== e && this._matches(e) }, value: function (t) { var i = t.value, n = this._criteria[0].value, o = n instanceof Date ? "date" : typeof n, r = typeof i; return t.format && (r = e.spreadsheet.formatting.type(i, t.format)), r != o ? "string" == o && (t.format && (i = e.spreadsheet.formatting.text(i, t.format)), i += "") : "date" == r && (i = e.spreadsheet.numberToDate(i)), i }, toJSON: function () { return { filter: "custom", logic: this._logic, criteria: this._criteria } } }), e.spreadsheet.TopFilter = r.extend({ init: function (e) { this._type = e.type, this._value = e.value, this._values = [] }, prepare: function (e) { var t, i = e.map(this.value).sort().filter(function (e, t, i) { return 0 === t || e !== i[t - 1] }); i.sort("topNumber" === this._type || "topPercent" == this._type ? function (e, t) { return t - e } : function (e, t) { return e - t }), t = this._value, "topPercent" !== this._type && "bottomPercent" !== this._type || (t = i.length * t / 100 >> 0), this._values = i.slice(0, t) }, matches: function (e) { return this._values.indexOf(e) >= 0 }, toJSON: function () { return { filter: "top", type: this._type, value: this._value } } }), e.spreadsheet.DynamicFilter = r.extend({ init: function (e) { if (this._type = e.type, this._predicate = this[e.type], "function" != typeof this._predicate) throw Error("DynamicFilter type '" + e.type + "' not recognized.") }, value: function (t) { var i = t.value; return t.format && ("date" === e.spreadsheet.formatting.type(i, t.format) && (i = e.spreadsheet.numberToDate(i))), i }, prepare: function (e) { var t, i, n = 0, o = 0; for (t = 0; t < e.length; t++)"number" == typeof (i = this.value(e[t])) && (n += i, o++); this._average = o > 0 ? n / o : 0 }, matches: function (e) { return this._predicate(e) }, aboveAverage: function (t) { return t instanceof Date && (t = e.spreadsheet.dateToNumber(t)), "number" == typeof t && t > this._average }, belowAverage: function (t) { return t instanceof Date && (t = e.spreadsheet.dateToNumber(t)), "number" == typeof t && t < this._average }, tomorrow: function (t) { if (t instanceof Date) { var i = e.date.addDays(e.date.today(), 1); return e.date.getDate(t).getTime() === i.getTime() } return !1 }, today: function (t) { return t instanceof Date && e.date.isToday(t) }, yesterday: function (t) { if (t instanceof Date) { var i = e.date.addDays(e.date.today(), -1); return e.date.getDate(t).getTime() === i.getTime() } return !1 }, nextWeek: function (t) { return o(e.date.addDays(e.date.today(), 7), t) }, thisWeek: function (t) { return o(e.date.today(), t) }, lastWeek: function (t) { return o(e.date.addDays(e.date.today(), -7), t) }, nextMonth: function (e) { return n(e, 1) }, thisMonth: function (e) { return n(e, 0) }, lastMonth: function (e) { return n(e, -1) }, nextQuarter: function (i) { var n, o; return i instanceof Date && (n = e.date.today(), 1 === (o = t(i) - t(n)) && n.getFullYear() === i.getFullYear() || -3 == o && n.getFullYear() + 1 === i.getFullYear()) }, thisQuarter: function (i) { var n; return i instanceof Date && (n = e.date.today(), 0 === t(i) - t(n) && n.getFullYear() === i.getFullYear()) }, lastQuarter: function (i) { var n, o; return i instanceof Date && (n = e.date.today(), 1 === (o = t(n) - t(i)) && n.getFullYear() === i.getFullYear() || -3 == o && n.getFullYear() - 1 === i.getFullYear()) }, nextYear: function (e) { return i(e, 1) }, thisYear: function (e) { return i(e, 0) }, lastYear: function (e) { return i(e, -1) }, yearToDate: function (t) { if (t instanceof Date) { var i = e.date.today(); return t.getFullYear() === i.getFullYear() && t <= i } return !1 }, toJSON: function () { return { filter: "dynamic", type: this._type } } }), [1, 2, 3, 4].forEach(function (i) { e.spreadsheet.DynamicFilter.prototype["quarter" + i] = function (e) { return e instanceof Date && t(e) === i } }), e.cultures["en-US"].calendar.months.names.forEach(function (t, i) { e.spreadsheet.DynamicFilter.prototype[t.toLowerCase()] = function (e) { return e instanceof Date && e.getMonth() === i } }) } }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/sorter.min", ["kendo.core.min"], function () { !function (e) { if (!(e.support.browser.msie && e.support.browser.version < 9)) { var t = e.Class.extend({ init: function (e, t) { this._grid = e, this._lists = t }, indices: function (e, i, n, o) { var r = t.ascendingComparer; return !1 === n && (r = t.descendingComparer), i.sortedIndices(this._grid.cellRefIndex(e.topLeft), this._grid.cellRefIndex(e.bottomRight), r, o) }, sortBy: function (e, t, i, n, o) { var r, s, a, l, c = this.indices(e.toColumn(t), i, n, o); for (r = e.topLeft.col; r <= e.bottomRight.col; r++)for (s = this._grid.index(e.topLeft.row, r), a = this._grid.index(e.bottomRight.row, r), l = 0; l < this._lists.length; l++)s < this._lists[l].lastRangeStart() && this._lists[l].sort(s, a, c); return c } }); t.ascendingComparer = function (t, i) { var n, o; if (null === t && null === i) return 0; if (null === t) return 1; if (null === i) return -1; if (o = typeof i, "number" === (n = typeof t)) return "number" === o ? t - i : -1; if ("string" === n) switch (o) { case "number": return 1; case "string": return t.localeCompare(i); default: return -1 }if ("boolean" === n) switch (o) { case "number": case "string": return 1; case "boolean": return t - i; default: return -1 }if (t instanceof e.spreadsheet.calc.runtime.CalcError) return i instanceof e.spreadsheet.calc.runtime.CalcError ? 0 : 1; throw Error("Cannot compare " + t + " and " + i) }, t.descendingComparer = function (e, i) { return null === e && null === i ? 0 : null === e ? 1 : null === i ? -1 : t.ascendingComparer(i, e) }, e.spreadsheet.Sorter = t } }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/numformat.min", ["spreadsheet/calc.min", "kendo.dom.min"], function () { "use strict"; function e(e) { function t() { var t = e.skip(a); if (t) return t[1].toLowerCase() } function i() { var t, i = e.skip(l); if (i && (t = parseFloat(i[2]), !isNaN(t))) return { op: i[1], value: t } } function n() { for (var t, i = [], n = null; !e.eof() && (t = s());)"date" == t.type ? n && /^(el)?time$/.test(n.type) && "h" == n.part && "m" == t.part && t.format < 3 && (t.type = "time") : /^(el)?time$/.test(t.type) && "s" == t.part && n && "date" == n.type && "m" == n.part && n.format < 3 && (n.type = "time"), /^(?:str|space|fill)$/.test(t.type) || (n = t), i.push(t); return i } function o(t) { if ("date" != t.type || "m" == t.part && t.format < 3) { var i = e.skip(/^\.(0+)/); i && (t.fraction = i[1].length, "date" == t.type && (t.type = "time")) } return t } function s() { var t, i; if (i = e.skip(/^([#0?]+)(?:,([#0?]+))+/)) return { type: "digit", sep: !0, format: i[1] + i[2], decimal: h }; if (i = e.skip(/^[#0?]+/)) return { type: "digit", sep: !1, format: i[0], decimal: h }; if (i = e.skip(/^(e)([+-])/i)) return { type: "exp", ch: i[1], sign: i[2] }; if (i = e.skip(/^(d{1,4}|m{1,5}|yyyy|yy)/i)) return o({ type: "date", part: (i = i[1].toLowerCase()).charAt(0), format: i.length }); if (i = e.skip(/^(hh?|ss?)/i)) return o({ type: "time", part: (i = i[1].toLowerCase()).charAt(0), format: i.length }); if (i = e.skip(/^\[(hh?|mm?|ss?)\]/i)) return o({ type: "eltime", part: (i = i[1].toLowerCase()).charAt(0), format: i.length }); if (i = e.skip(/^(am\/pm|a\/p)/i)) return { type: "ampm", am: (i = i[1].split("/"))[0], pm: i[1] }; switch (t = e.next()) { case ";": return null; case "\\": return { type: "str", value: e.next() }; case '"': return { type: "str", value: e.readEscaped(t) }; case "@": return { type: "text" }; case "_": return { type: "space", value: e.next() }; case "*": return { type: "fill", value: e.next() }; case ".": return e.lookingAt(/^\s*[#0?]/) ? (h = !0, { type: "dec" }) : { type: "str", value: "." }; case "%": return { type: "percent" }; case ",": return { type: "comma" } }return { type: "str", value: t } } function c() { h = !1; var e = t(), o = i(); return !e && o && (e = t()), { color: e, cond: o, body: n() } } var d, u, h, f; for (e = r.InputStream(e), d = [], u = !1; !e.eof();)f = c(), d.push(f), f.cond && (u = !0); return u || (1 == d.length ? d[0].cond = "num" : 2 == d.length ? (d[0].cond = { op: ">=", value: 0 }, d[1].cond = { op: "<", value: 0 }) : d.length >= 3 && (d[0].cond = { op: ">", value: 0 }, d[1].cond = { op: "<", value: 0 }, d[2].cond = { op: "=", value: 0 }, d.length > 3 && (d[3].cond = "text", d = d.slice(0, 4)))), d } function t(e) { function t(e, t) { ("digit" == e.type && "comma" == t.type || "comma" == e.type && e.hidden && "comma" == t.type) && (t.hidden = !0, c++) } var i, n, o = function (e) { var t = 0; return { next: function () { return e[t++] }, eof: function () { return t >= e.length }, ahead: function (i, n) { if (t + i <= e.length) { var o = n.apply(null, e.slice(t, t + i)); return o && (t += i), o } }, restart: function () { t = 0 } } }(e.body), r = !1, s = !1, a = !1, l = 0, c = 0, d = "", u = !1, h = 0, f = [], p = [], m = e.cond, g = ""; for ("text" == m ? g = "if (typeof value == 'string' || value instanceof kendo.spreadsheet.CalcError) { " : "num" == m ? g = "if (typeof value == 'number') { " : m && (i = "=" == m.op ? "==" : m.op, g = "if (typeof value == 'number' && value " + i + " " + m.value + ") { ", d += "value = Math.abs(value); "), e.color && (d += "result.color = " + JSON.stringify(e.color) + "; "); !o.eof();)o.ahead(2, t), "percent" == (n = o.next()).type ? l++ : "digit" == n.type ? n.decimal ? (h += n.format.length, p.push(n.format)) : (f.push(n.format), n.sep && (u = !0)) : "time" == n.type ? s = !0 : "date" == n.type ? r = !0 : "ampm" == n.type && (a = s = !0); for (l > 0 && (d += "value *= " + Math.pow(100, l) + "; "), c > 0 && (d += "value /= " + Math.pow(1e3, c) + "; "), f.length && (d += "var intPart = runtime.formatInt(culture, value, " + JSON.stringify(f) + ", " + h + ", " + u + "); "), p.length && (d += "var decPart = runtime.formatDec(value, " + JSON.stringify(p) + ", " + h + "); "), (f.length || p.length) && (d += "type = 'number'; "), r && (d += "var date = runtime.unpackDate(value); "), s && (d += "var time = runtime.unpackTime(value); "), (r || s) && (d += "type = 'date'; "), (l > 0 || c > 0 || f.length || p.length || r || s) && (g || (g = "if (typeof value == 'number') { ")), o.restart(); !o.eof();)"dec" == (n = o.next()).type ? d += "output += culture.numberFormat['.']; " : "comma" != n.type || n.hidden ? "percent" == n.type ? (d += "type = 'percent'; ", d += "output += culture.numberFormat.percent.symbol; ") : "str" == n.type ? d += "output += " + JSON.stringify(n.value) + "; " : "text" == n.type ? (d += "type = 'text'; ", d += "output += value; ") : "space" == n.type ? (d += "if (output) result.body.push(output); ", d += "output = ''; ", d += "result.body.push({ type: 'space', value: " + JSON.stringify(n.value) + " }); ") : "fill" == n.type ? d += "output += runtime.fill(" + JSON.stringify(n.value) + "); " : "digit" == n.type ? d += "output += " + (n.decimal ? "decPart" : "intPart") + ".shift(); " : "date" == n.type ? d += "output += runtime.date(culture, date, " + JSON.stringify(n.part) + ", " + n.format + "); " : "time" == n.type ? d += "output += runtime.time(time, " + JSON.stringify(n.part) + ", " + n.format + ", " + a + ", " + n.fraction + "); " : "eltime" == n.type ? d += "output += runtime.eltime(value, " + JSON.stringify(n.part) + ", " + n.format + ", " + n.fraction + "); " : "ampm" == n.type && (d += "output += time.hours < 12 ? " + JSON.stringify(n.am) + " : " + JSON.stringify(n.pm) + "; ") : d += "output += ','; "; return d += "if (output) result.body.push(output); ", d += "result.type = type; ", d += "return result; ", g && (d = g + d + "}"), d } function i(i) { var n, o, r = c[i]; return r || (n = e(i), (o = n.map(t)).push(d), o = "'use strict'; return function(value, culture){ if (!culture) culture = kendo.culture(); var output = '', type = null, result = { body: [] }; " + (o = o.join("\n")) + "; return result; };", r = c[i] = Function("runtime", o)(u)), r } function n(e, t, i) { for (e += ""; e.length < t;)e = i + e; return e } function o(e) { var t, i, n = e.body, o = ""; for (t = 0; t < n.length; ++t)"string" == typeof (i = n[t]) ? o += i : "space" == i.type && (o += " "); return o } var r, s, a, l, c, d, u; kendo.support.browser.msie && kendo.support.browser.version < 9 || (r = kendo.spreadsheet.calc, s = kendo.dom, a = /^\[(black|green|white|blue|magenta|yellow|cyan|red)\]/i, l = /^\[(<=|>=|<>|<|>|=)(-?[0-9.]+)\]/, c = Object.create(null), d = t({ cond: "text", body: [{ type: "text" }] }), u = { unpackDate: r.runtime.unpackDate, unpackTime: r.runtime.unpackTime, date: function (e, t, i, o) { switch (i) { case "d": switch (o) { case 1: return t.date; case 2: return n(t.date, 2, "0"); case 3: return e.calendars.standard.days.namesAbbr[t.day]; case 4: return e.calendars.standard.days.names[t.day] }break; case "m": switch (o) { case 1: return t.month + 1; case 2: return n(t.month + 1, 2, "0"); case 3: return e.calendars.standard.months.namesAbbr[t.month]; case 4: return e.calendars.standard.months.names[t.month]; case 5: return e.calendars.standard.months.names[t.month].charAt(0) }break; case "y": switch (o) { case 2: return t.year % 100; case 4: return t.year } }return "##" }, time: function (e, t, i, o, r) { var s, a; switch (t) { case "h": s = n(o ? e.hours % 12 || 12 : e.hours, i, "0"), r && (a = (e.minutes + (e.seconds + e.milliseconds / 1e3) / 60) / 60); break; case "m": s = n(e.minutes, i, "0"), r && (a = (e.seconds + e.milliseconds / 1e3) / 60); break; case "s": s = n(e.seconds, i, "0"), r && (a = e.milliseconds / 1e3) }return a && (s += a.toFixed(r).replace(/^0+/, "")), s }, eltime: function (e, t, i, o) { var r, s; switch (t) { case "h": r = 24 * e; break; case "m": r = 24 * e * 60; break; case "s": r = 24 * e * 60 * 60 }return o && (s = r - (0 | r)), r = n(0 | r, i, "0"), s && (r += s.toFixed(o).replace(/^0+/, "")), r }, fill: function (e) { return e }, formatInt: function (e, t, i, n, o) { function r(t) { o && l && l % 3 == 0 && /^[0-9]$/.test(t) && (c = e.numberFormat[","] + c), c = t + c, l++ } var s, a, l, c, d, u, h, f; for (t = t.toFixed(n).replace(/\..*$/, ""), n > 0 && ("0" === t ? t = "" : "-0" === t && (t = "-")), s = t.length - 1, a = [], l = 0, d = i.length; --d >= 0;) { for (u = i[d], c = "", h = u.length; --h >= 0;)f = u.charAt(h), s < 0 ? "0" == f ? r("0") : "?" == f && r(" ") : r(t.charAt(s--)); if (0 === d) for (; s >= 0;)r(t.charAt(s--)); a.unshift(c) } return a }, formatDec: function (e, t, i) { var n, o, r, s, a, l, c, d; for (e = e.toFixed(i), n = e.indexOf("."), e = n >= 0 ? e.substr(n + 1).replace(/0+$/, "") : "", o = 0, r = [], s = 0; s < t.length; ++s) { for (a = t[s], l = "", c = 0; c < a.length; ++c)d = a.charAt(c), o < e.length ? l += e.charAt(o++) : "0" == d ? l += "0" : "?" == d && (l += " "); r.push(l) } return r } }, kendo.spreadsheet.formatting = { compile: i, parse: e, format: function (e, t, n) { var o, r, a, l = i(t)(e, n), c = s.element("span"); for (c.__dataType = l.type, o = l.body, l.color && (c.attr.style = { color: l.color }), r = 0; r < o.length; ++r)"string" == typeof (a = o[r]) ? c.children.push(s.text(a)) : "space" == a.type && c.children.push(s.element("span", { style: { visibility: "hidden" } }, [s.text(a.value)])); return c }, text: function (e, t, n) { var r = i(t)(e, n); return o(r) }, textAndColor: function (e, t, n) { var r = i(t)(e, n); return { text: o(r), color: r.color, type: r.type } }, type: function (e, t) { return i(t)(e).type }, adjustDecimals: function (t, i) { var o = e(t); return function (e, t) { e.forEach(function (e) { var i, o, r, s, a, l = t; if ("text" != e.cond) { for (i = e.body, o = !1, r = i.length; 0 !== l && --r >= 0;)if ("digit" == (s = i[r]).type) { if (s.decimal && (o = !0, l > 0 ? s.format += n("", l, "0") : l < 0 && (a = s.format.length, s.format = s.format.substr(0, a + l), l += a - s.format.length), 0 === s.format.length)) for (i.splice(r, 1); --r >= 0;) { if ("digit" == (s = i[r]).type && s.decimal) { ++r; break } if ("dec" == s.type) { i.splice(r, 1); break } } if (l > 0) break } !o && l > 0 && i.splice(r + 1, 0, { type: "dec" }, { type: "digit", sep: !1, decimal: !0, format: n("", l, "0") }) } }) }(o, i), function (e) { function t(e, t) { return t.fraction && (e += "." + n("", t.fraction, "0")), e } function i(e) { return "digit" == e.type ? e.sep ? e.format.charAt(0) + "," + e.format.substr(1) : e.format : "exp" == e.type ? e.ch + e.sign : "date" == e.type || "time" == e.type ? t(n("", e.format, e.part), e) : "eltime" == e.type ? t("[" + n("", e.format, e.part) + "]", e) : "ampm" == e.type ? e.am + "/" + e.pm : "str" == e.type ? JSON.stringify(e.value) : "text" == e.type ? "@" : "space" == e.type ? "_" + e.value : "fill" == e.type ? "*" + e.value : "dec" == e.type ? "." : "percent" == e.type ? "%" : "comma" == e.type ? "," : void 0 } return e.map(function (e) { var t = ""; return e.color && (t += "[" + e.color + "]"), e.cond && "text" != e.cond && "num" != e.cond && (t += "[" + e.cond.op + e.cond.value + "]"), t += e.body.map(i).join("") }).join(";") }(o) } }) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/runtime.functions.min", ["spreadsheet/runtime.min", "util/main.min"], function () { "use strict"; function e(e) { return (Math.exp(e) + Math.exp(-e)) / 2 } function t(e) { return (Math.exp(e) - Math.exp(-e)) / 2 } function i(i) { return t(i) / e(i) } function n(e, t) { for (; t;) { var i = e % t; e = t, t = i } return e } function o(e, t) { return Math.abs(e * t) / n(e, t) } function r(e, t) { for (var i, n, o, r = [], s = 0, a = e[0]; s < e.length;)r.push({ matrix: e[s++], pred: G(e[s++]) }); for (i = 0; i < a.height; ++i)e: for (n = 0; n < a.width; ++n) { for (s = 0; s < r.length; ++s)if (o = r[s].matrix.get(i, n), !r[s].pred(null == o || "" === o ? 0 : o)) continue e; t(i, n) } } function s(e) { return e.reduce(function (e, t) { return e + t }, 0) / e.length } function a(e, t, i) { return null == i && (i = s(e)), e.reduce(function (e, t) { return e + Math.pow(t - i, 2) }, 0) / t } function l(e, t) { return Math.sqrt(a(e, t)) } function c(e, t, i) { var n = 0, o = 0, r = null, s = null, a = !1; return e.forEach(function (e) { e < t ? (n++, r = null == r ? e : Math.max(r, e)) : e > t ? (o++, s = null == s ? e : Math.min(s, e)) : a = !0 }), n || o ? a ? i ? (n + 1) / (e.length + 1) : n / (n + o) : ((s - t) * c(e, r, i) + (t - r) * c(e, s, i)) / (s - r) : new A("N/A") } function d(e, t, i) { var n, o = 0, r = s(e), a = s(t), l = e.length; for (n = 0; n < l; ++n)o += (e[n] - r) * (t[n] - a); return o / i } function u(e, t) { var i, n, o; return e.sort(w), i = e.length, o = t - (n = 0 | t), 0 === n ? e[0] : n >= i ? e[i - 1] : e[--n] + o * (e[n + 1] - e[n]) } function h(e, t) { var i = t * (e.length - 1) + 1; return u(e, i) } function f(e, t) { var i = t * (e.length + 1); return u(e, i) } function p(e, t, i) { var n = []; return function t(o) { if (o instanceof F) e.getRefCells(o, !0).forEach(function (e) { var t, o = e.value; if (!(1 & i && e.hidden)) { if (e.formula) { if (t = e.formula.print(e.row, e.col), /^\s*(?:aggregate|subtotal)\s*\(/i.test(t) && !(4 & i)) return; "value" in e.formula && (o = e.formula.value) } 2 & i && o instanceof A || ("number" == typeof o || o instanceof A) && n.push(o) } }); else if (Array.isArray(o)) for (var r = 0; r < o.length; ++r)t(o[r]); else o instanceof R ? o.each(t) : "number" == typeof o ? n.push(o) : o instanceof A && !(2 & i) && n.push(o) }(t), n } function m(e, t, i, n) { var o, r; if (n) { for (o = 0, r = 0; r <= e; ++r)o += W(t, r) * Math.pow(i, r) * Math.pow(1 - i, t - r); return o } return W(t, e) * Math.pow(i, e) * Math.pow(1 - i, t - e) } function g(e) { var t = B(P(e, 0, 1)); return 4 == t.day || 3 == t.day && S.isLeapYear(e) ? 53 : 52 } function v(e, t, i) { var n = B(e), o = B(t); return i ? (31 == n.date && (n.date = 30), 31 == o.date && (o.date = 30)) : (1 == n.month && 1 == o.month && n.date == z(n.year, 1) && o.date == z(o.year, 1) && (o.date = 30), n.date == z(n.year, n.month) ? (n.date = 30, 31 == o.date && (o.date = 30)) : 30 == n.date && 31 == o.date && (o.date = 30)), 360 * (o.year - n.year) + 30 * (o.month - n.month) + (o.date - n.date) } function _(e, t) { this.link = e, this.text = t } function b(e) { return "number" == typeof e || "boolean" == typeof e || null == e || "" === e } function w(e, t) { return e === t ? 0 : e < t ? -1 : 1 } function y(e, t) { return e === t ? 0 : e < t ? 1 : -1 } var k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H, N, O, V, U, W, q, j, G; kendo.support.browser.msie && kendo.support.browser.version < 9 || (k = kendo.util, x = kendo.spreadsheet, C = x.calc, S = C.runtime, T = S.defineFunction, D = S.defineAlias, A = S.CalcError, E = x.RangeRef, I = x.CellRef, M = x.UnionRef, R = S.Matrix, F = x.Ref, z = S.daysInMonth, P = S.packDate, B = S.unpackDate, L = S.daysInYear, ["abs", "cos", "sin", "acos", "asin", "tan", "atan", "exp", "sqrt"].forEach(function (e) { T(e, Math[e]).args([["*n", "number"]]) }), T("ln", Math.log).args([["*n", "number"]]), T("log", function (e, t) { return Math.log(e) / Math.log(t) }).args([["*num", "number++"], ["*base", ["or", "number++", ["null", 10]]], ["?", ["assert", "$base != 1", "DIV/0"]]]), T("log10", function (e) { return Math.log(e) / Math.log(10) }).args([["*num", "number++"]]), T("pi", function () { return Math.PI }).args([]), T("sqrtpi", function (e) { return Math.sqrt(e * Math.PI) }).args([["*num", "number+"]]), T("degrees", function (e) { return 180 * e / Math.PI % 360 }).args([["*radians", "number"]]), T("radians", function (e) { return Math.PI * e / 180 }).args([["*degrees", "number"]]), T("cosh", e).args([["*num", "number"]]), T("acosh", function (e) { return Math.log(e + Math.sqrt(e - 1) * Math.sqrt(e + 1)) }).args([["*num", "number"], ["?", ["assert", "$num >= 1"]]]), T("sinh", t).args([["*num", "number"]]), T("asinh", function (e) { return Math.log(e + Math.sqrt(e * e + 1)) }).args([["*num", "number"]]), T("sec", function (e) { return 1 / Math.cos(e) }).args([["*num", "number"]]), T("sech", function (t) { return 1 / e(t) }).args([["*num", "number"]]), T("csc", function (e) { return 1 / Math.sin(e) }).args([["*num", "number"]]), T("csch", function (e) { return 1 / t(e) }).args([["*num", "number"]]), T("atan2", function (e, t) { return Math.atan(t / e) }).args([["*x", "divisor"], ["*y", "number"]]), T("tanh", i).args([["*num", "number"]]), T("atanh", function (e) { return Math.log(Math.sqrt(1 - e * e) / (1 - e)) }).args([["*num", ["and", "number", ["(between)", -1, 1]]]]), T("cot", function (e) { return 1 / Math.tan(e) }).args([["*num", "divisor"]]), T("coth", function (e) { return 1 / i(e) }).args([["*num", "divisor"]]), T("acot", function (e) { return Math.PI / 2 - Math.atan(e) }).args([["*num", "number"]]), T("acoth", function (e) { return Math.log((e + 1) / (e - 1)) / 2 }).args([["*num", "number"], ["?", ["or", ["assert", "$num < -1"], ["assert", "$num > 1"]]]]), T("power", function (e, t) { return Math.pow(e, t) }).args([["*a", "number"], ["*b", "number"]]), T("mod", function (e, t) { return e % t }).args([["*a", "number"], ["*b", "divisor"]]), T("quotient", function (e, t) { return Math.floor(e / t) }).args([["*a", "number"], ["*b", "divisor"]]), T("ceiling", function (e, t) { return t ? t * Math.ceil(e / t) : 0 }).args([["*number", "number"], ["*significance", "number"], ["?", ["assert", "$significance >= 0 || $number < 0"]]]), T("ceiling.precise", function (e, t) { return (t = Math.abs(t)) ? t * Math.ceil(e / t) : 0 }).args([["*number", "number"], ["*significance", ["or", "number", ["null", 1]]]]), D("iso.ceiling", "ceiling.precise"), T("ceiling.math", function (e, t, i) { return t && e ? (e < 0 && (!i && t < 0 || i && t > 0) && (t = -t), t ? t * Math.ceil(e / t) : 0) : 0 }).args([["*number", "number"], ["*significance", ["or", "number", ["null", "$number < 0 ? -1 : 1"]]], ["*mode", ["or", "logical", ["null", 0]]]]), T("floor", function (e, t) { return t ? t * Math.floor(e / t) : 0 }).args([["*number", "number"], ["*significance", "number"], ["?", ["assert", "$significance >= 0 || $number < 0"]]]), T("floor.precise", function (e, t) { return (t = Math.abs(t)) ? t * Math.floor(e / t) : 0 }).args([["*number", "number"], ["*significance", ["or", "number", ["null", 1]]]]), T("floor.math", function (e, t, i) { return t && e ? (e < 0 && (!i && t < 0 || i && t > 0) && (t = -t), t ? t * Math.floor(e / t) : 0) : 0 }).args([["*number", "number"], ["*significance", ["or", "number", ["null", "$number < 0 ? -1 : 1"]]], ["*mode", ["or", "logical", ["null", 0]]]]), T("int", Math.floor).args([["*number", "number"]]), T("mround", function (e, t) { return t ? t * Math.round(e / t) : 0 }).args([["*number", "number"], ["*multiple", "number"]]), T("round", function (e, t) { var i = e < 0 ? -1 : 1; return i < 0 && (e = -e), t = Math.pow(10, t), e *= t, e = Math.round(e), i * e / t }).args([["*number", "number"], ["*digits", "number"]]), T("roundup", function (e, t) { return t = Math.pow(10, t), (e = (e *= t) < 0 ? Math.floor(e) : Math.ceil(e)) / t }).args([["*number", "number"], ["*digits", "number"]]), T("rounddown", function (e, t) { return t = Math.pow(10, t), (e = (e *= t) < 0 ? Math.ceil(e) : Math.floor(e)) / t }).args([["*number", "number"], ["*digits", "number"]]), T("even", function (e) { var t = e < 0 ? Math.floor(e) : Math.ceil(e); return t % 2 ? t + (t < 0 ? -1 : 1) : t }).args([["*number", "number"]]), T("odd", function (e) { var t = e < 0 ? Math.floor(e) : Math.ceil(e); return t % 2 ? t : t + (t < 0 ? -1 : 1) }).args([["*number", "number"]]), T("sign", function (e) { return e < 0 ? -1 : e > 0 ? 1 : 0 }).args([["*number", "number"]]), T("gcd", function (e) { var t, i = e[0]; for (t = 1; t < e.length; ++t)i = n(i, e[t]); return i }).args([["numbers", ["collect", "number"]]]), T("lcm", function (e) { var t, i = e[0]; for (t = 1; t < e.length; ++t)i = o(i, e[t]); return i }).args([["numbers", ["collect", "number"]]]), T("sum", function (e) { return e.reduce(function (e, t) { return e + t }, 0) }).args([["numbers", ["collect", "number"]]]), T("product", function (e) { return e.reduce(function (e, t) { return e * t }, 1) }).args([["numbers", ["collect", "number"]]]), T("sumproduct", function (e, t) { var i = 0; return e.each(function (e, n, o) { var r, s; if ("number" == typeof e) { for (r = 0; r < t.length; ++r) { if ("number" != typeof (s = t[r].get(n, o))) return; e *= s } i += e } }), i }).args([["a1", "matrix"], ["+", ["a2", ["and", "matrix", ["assert", "$a2.width == $a1.width"], ["assert", "$a2.height == $a1.height"]]]]]), T("sumsq", function (e) { return e.reduce(function (e, t) { return e + t * t }, 0) }).args([["numbers", ["collect", "number"]]]), T("sumx2my2", function (e, t) { var i = 0; return e.each(function (e, n, o) { var r = t.get(n, o); "number" == typeof e && "number" == typeof r && (i += e * e - r * r) }), i }).args([["a", "matrix"], ["b", ["and", "matrix", ["assert", "$b.width == $a.width"], ["assert", "$b.height == $a.height"]]]]), T("sumx2py2", function (e, t) { var i = 0; return e.each(function (e, n, o) { var r = t.get(n, o); "number" == typeof e && "number" == typeof r && (i += e * e + r * r) }), i }).args([["a", "matrix"], ["b", ["and", "matrix", ["assert", "$b.width == $a.width"], ["assert", "$b.height == $a.height"]]]]), T("sumxmy2", function (e, t) { var i = 0; return e.each(function (e, n, o) { var r = t.get(n, o); "number" == typeof e && "number" == typeof r && (i += (e - r) * (e - r)) }), i }).args([["a", "matrix"], ["b", ["and", "matrix", ["assert", "$b.width == $a.width"], ["assert", "$b.height == $a.height"]]]]), T("seriessum", function (e, t, i, n) { var o = 0; return n.each(function (n) { if ("number" != typeof n) throw new A("VALUE"); o += n * Math.pow(e, t), t += i }), o }).args([["x", "number"], ["y", "number"], ["m", "number"], ["a", "matrix"]]), T("min", function (e) { return Math.min.apply(Math, e) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length > 0", "N/A"]]]), T("max", function (e) { return Math.max.apply(Math, e) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length > 0", "N/A"]]]), T("counta", function (e) { return e.length }).args([["values", ["#collect", "anyvalue"]]]), T("count", function (e) { return e.length }).args([["numbers", ["#collect", "number"]]]), T("countunique", function (e) { var t = 0, i = []; return e.forEach(function (e) { i.indexOf(e) < 0 && (t++, i.push(e)) }), t }).args([["values", ["#collect", "anyvalue"]]]), T("countblank", function (e) { function t(e) { null != e && "" !== e || i++ } var i = 0; return function (e) { var i, n; for (i = 0; i < e.length; ++i)(n = e[i]) instanceof R ? n.each(t, !0) : t(n) }(e), i }).args([["+", ["args", ["or", "matrix", "anyvalue"]]]]), T("iseven", function (e) { return e % 2 == 0 }).args([["*number", "number"]]), T("isodd", function (e) { return e % 2 != 0 }).args([["*number", "number"]]), T("n", function (e) { return "boolean" == typeof e ? e ? 1 : 0 : "number" == typeof e ? e : 0 }).args([["*value", "anyvalue"]]), T("na", function () { return new A("N/A") }).args([]), H = [["m1", "matrix"], ["c1", "anyvalue"], [["m2", "matrix"], ["c2", "anyvalue"]]], T("countifs", function (e, t, i) { var n = 0; return i.unshift(e, t), r(i, function () { n++ }), n }).args(H), N = [["range", "matrix"]].concat(H), T("sumifs", function (e, t, i, n) { n.unshift(e, b, t, i); var o = 0; return r(n, function (t, i) { var n = e.get(t, i); n && (o += n) }), o }).args(N), T("averageifs", function (e, t, i, n) { n.unshift(e, b, t, i); var o = 0, s = 0; return r(n, function (t, i) { var n = e.get(t, i); null != n && "" !== n || (n = 0), o += n, s++ }), s ? o / s : new A("DIV/0") }).args(N), T("countif", function (e, t) { t = G(t); var i = 0; return e.each(function (e) { t(e) && i++ }), i }).args([["range", "matrix"], ["*criteria", "anyvalue"]]), O = [["range", "matrix"], ["*criteria", "anyvalue"], ["sumRange", ["or", ["and", "matrix", ["assert", "$sumRange.width == $range.width"], ["assert", "$sumRange.height == $range.height"]], ["null", "$range"]]]], T("sumif", function (e, t, i) { var n = 0; return t = G(t), e.each(function (e, o, r) { if (t(e)) { var s = i.get(o, r); b(s) && (n += s || 0) } }), n }).args(O), T("averageif", function (e, t, i) { var n = 0, o = 0; return t = G(t), e.each(function (e, r, s) { if (t(e)) { var a = i.get(r, s); b(a) && (n += a || 0, o++) } }), o ? n / o : new A("DIV/0") }).args(O), function (e) { e("large", function (e, t) { return e.sort(y)[t] }), e("small", function (e, t) { return e.sort(w)[t] }) }(function (e, t) { T(e, function (e, i) { var n = [], o = e.each(function (e) { return e instanceof A ? e : void ("number" == typeof e && n.push(e)) }); return o || (i > n.length ? new A("NUM") : t(n, i - 1)) }).args([["array", "matrix"], ["*nth", "number++"]]) }), T("stdev.s", function (e) { return l(e, e.length - 1) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length >= 2", "NUM"]]]), T("stdev.p", function (e) { return l(e, e.length) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length >= 2", "NUM"]]]), T("var.s", function (e) { return a(e, e.length - 1) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length >= 2", "NUM"]]]), T("var.p", function (e) { return a(e, e.length) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length >= 2", "NUM"]]]), T("median", function (e) { var t = e.length; return e.sort(w), t % 2 ? e[t >> 1] : (e[t >> 1] + e[t >> 2]) / 2 }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length > 0", "N/A"]]]), T("mode.sngl", function (e) { var t, i, n, o, r, s; for (e.sort(w), t = null, i = 0, n = 1, o = null, r = 0; r < e.length; ++r)(s = e[r]) != t ? (i = 1, t = s) : i++, i > n && (n = i, o = s); return null == o ? new A("N/A") : o }).args([["numbers", ["collect", "number"]]]), T("mode.mult", function (e) { var t, i = Object.create(null), n = 2, o = []; return e.forEach(function (e) { var t = i[e] || 0; i[e] = ++t, t == n ? o.push(e) : t > n && (n = t, o = [e]) }), t = new R(this), o.forEach(function (e, i) { t.set(i, 0, e) }), t }).args([["numbers", ["collect", "number"]]]), T("geomean", function (e) { var t = e.length, i = e.reduce(function (e, t) { if (t < 0) throw new A("NUM"); return e * t }, 1); return Math.pow(i, 1 / t) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length > 0", "NUM"]]]), T("harmean", function (e) { var t = e.length, i = e.reduce(function (e, t) { if (!t) throw new A("DIV/0"); return e + 1 / t }, 0); return t / i }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length > 0", "NUM"]]]), T("trimmean", function (e, t) { var i, n, o, r = e.length; for (e.sort(w), (i = Math.floor(r * t)) % 2 && --i, n = 0, o = i /= 2; o < r - i; ++o)n += e[o]; return n / (r - 2 * i) }).args([["numbers", ["collect", "number", 1]], ["percent", ["and", "number", ["[between)", 0, 1]]], ["?", ["assert", "$numbers.length > 0", "NUM"]]]), T("frequency", function (e, t) { function i(t) { for (var i = 0; o < e.length && e[o] > n && e[o] <= t;)++i, ++o; return i } var n, o, r; return e.sort(w), t.sort(w), n = -1 / 0, o = 0, r = new R(this), t.forEach(function (e, t) { var o = i(e); n = e, r.set(t, 0, o) }), r.set(r.height, 0, e.length - o), r }).args([["data", ["collect", "number", 1]], ["bins", ["collect", "number", 1]]]), T("rank.eq", function (e, t, i) { t.sort(i ? w : y); var n = t.indexOf(e); return n < 0 ? new A("N/A") : n + 1 }).args([["value", "number"], ["numbers", ["collect", "number"]], ["order", ["or", "logical", ["null", !1]]]]), D("rank", "rank.eq"), T("rank.avg", function (e, t, i) { var n, o; if (t.sort(i ? w : y), (n = t.indexOf(e)) < 0) return new A("N/A"); for (o = n; t[o] == e; ++o); return (n + o + 1) / 2 }).args([["value", "number"], ["numbers", ["collect", "number"]], ["order", ["or", "logical", ["null", !1]]]]), T("kurt", function (e) { var t = e.length, i = s(e), n = a(e, t - 1, i), o = Math.sqrt(n), r = e.reduce(function (e, t) { return e + Math.pow((t - i) / o, 4) }, 0); return t * (t + 1) / ((t - 1) * (t - 2) * (t - 3)) * r - 3 * Math.pow(t - 1, 2) / ((t - 2) * (t - 3)) }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length >= 4", "NUM"]]]), V = [["array", ["collect", "number", 1]], ["x", "number"], ["significance", ["or", ["null", 3], "integer++"]], ["?", ["assert", "$array.length > 0", "NUM"]]], T("percentrank.inc", function (e, t, i) { var n = c(e, t, 0); return n = n.toFixed(i + 1), parseFloat(n.substr(0, n.length - 1)) }).args(V), T("percentrank.exc", function (e, t, i) { var n = c(e, t, 1); return n = n.toFixed(i + 1), parseFloat(n.substr(0, n.length - 1)) }).args(V), D("percentrank", "percentrank.inc"), T("covariance.p", function (e, t) { return d(e, t, e.length) }).args([["array1", ["collect", "number", 1]], ["array2", ["collect", "number", 1]], ["?", ["assert", "$array1.length == $array2.length", "N/A"]], ["?", ["assert", "$array1.length > 0", "DIV/0"]]]), T("covariance.s", function (e, t) { return d(e, t, e.length - 1) }).args([["array1", ["collect", "number", 1]], ["array2", ["collect", "number", 1]], ["?", ["assert", "$array1.length == $array2.length", "N/A"]], ["?", ["assert", "$array1.length > 1", "DIV/0"]]]), D("covar", "covariance.p"), U = k.memoize(function (e) { for (var t = 2, i = 1; t <= e; ++t)i *= t; return i }), T("fact", U).args([["*n", "integer+"]]), T("factdouble", function (e) { for (var t = 2 + (1 & e), i = 1; t <= e; t += 2)i *= t; return i }).args([["*n", "integer+"]]), T("multinomial", function (e) { var t = 1, i = 0; return e.forEach(function (e) { if (e < 0) throw new A("NUM"); i += e, t *= U(e) }), U(i) / t }).args([["numbers", ["collect", "number"]]]), W = k.memoize(function (e, t) { for (var i = t + 1, n = 1, o = 1, r = 1; n <= e - t; ++i, ++n)o *= i, r *= n; return o / r }), T("combin", W).args([["*n", "integer++"], ["*k", ["and", "integer", ["[between]", 0, "$n"]]]]), T("combina", function (e, t) { return W(e + t - 1, e - 1) }).args([["*n", "integer++"], ["*k", ["and", "integer", ["[between]", 1, "$n"]]]]), T("average", function (e) { var t = e.reduce(function (e, t) { return e + t }, 0); return t / e.length }).args([["numbers", ["collect", ["and", "number", ["not", "boolean"]]]], ["?", ["assert", "$numbers.length > 0", "DIV/0"]]]), T("averagea", function (e) { var t = 0, i = 0; return e.forEach(function (e) { "string" != typeof e && (t += e), ++i }), i ? t / i : new A("DIV/0") }).args([["values", ["collect", "anyvalue"]]]), T("percentile.inc", h).args([["numbers", ["collect", "number", 1]], ["p", ["and", "number", ["[between]", 0, 1]]]]), T("percentile.exc", f).args([["numbers", ["collect", "number", 1]], ["p", ["and", "number", ["(between)", 0, 1]]]]), T("quartile.inc", function (e, t) { return h(e, t / 4) }).args([["numbers", ["collect", "number", 1]], ["quarter", ["values", 0, 1, 2, 3, 4]]]), T("quartile.exc", function (e, t) { return f(e, t / 4) }).args([["numbers", ["collect", "number", 1]], ["quarter", ["values", 0, 1, 2, 3, 4]]]), D("quartile", "quartile.inc"), D("percentile", "percentile.inc"), q = ["AVERAGE", "COUNT", "COUNTA", "MAX", "MIN", "PRODUCT", "STDEV.S", "STDEV.P", "SUM", "VAR.S", "VAR.P", "MEDIAN", "MODE.SNGL", "LARGE", "SMALL", "PERCENTILE.INC", "QUARTILE.INC", "PERCENTILE.EXC", "QUARTILE.EXC"], T("aggregate", function (e, t, i, n) { var o = this; o.resolveCells(n, function () { var r, s; if (t > 12) { if (r = p(o, n[0], i), (s = n[1]) instanceof I && (s = o.getRefData(s)), "number" != typeof s) return e(new A("VALUE")) } else r = p(o, n, i); o.func(q[t - 1], e, r) }) }).argsAsync([["funcId", ["values", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]], ["options", ["or", ["null", 0], ["values", 0, 1, 2, 3, 4, 5, 6, 7]]], ["args", "rest"]]), T("subtotal", function (e, t) { var i, n, o = this, r = t > 100; for (r && (t -= 100), i = [], n = 2; n < arguments.length; ++n)i.push(arguments[n]); o.resolveCells(i, function () { var n = p(o, i, r ? 1 : 0); o.func(q[t - 1], e, n) }) }).argsAsync([["funcId", ["values", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111]], ["+", ["ref", ["or", "ref", "#matrix"]]]]), T("avedev", function (e) { var t = e.reduce(function (e, t) { return e + t }, 0) / e.length; return e.reduce(function (e, i) { return e + Math.abs(i - t) }, 0) / e.length }).args([["numbers", ["collect", "number"]], ["?", ["assert", "$numbers.length >= 2", "NUM"]]]), T("binom.dist", m).args([["successes", "integer+"], ["trials", ["and", "integer", ["assert", "$trials >= $successes"]]], ["probability", ["and", "number", ["[between]", 0, 1]]], ["cumulative", "logical"]]), D("binomdist", "binom.dist"), T("binom.inv", function (e, t, i) { for (var n = 0; n <= e; ++n)if (m(n, e, t, !0) >= i) return n; return new A("N/A") }).args([["trials", "integer+"], ["probability", ["and", "number", ["[between]", 0, 1]]], ["alpha", ["and", "number", ["[between]", 0, 1]]]]), D("critbinom", "binom.inv"), T("binom.dist.range", function (e, t, i, n) { var o, r = 0; for (o = i; o <= n; ++o)r += W(e, o) * Math.pow(t, o) * Math.pow(1 - t, e - o); return r }).args([["trials", "integer+"], ["probability", ["and", "number", ["[between]", 0, 1]]], ["successes_min", ["and", "integer", ["[between]", 0, "$trials"]]], ["successes_max", ["or", ["and", "integer", ["[between]", "$successes_min", "$trials"]], ["null", "$successes_min"]]]]), T("negbinom.dist", function (e, t, i, n) { if (n) { for (var o = 0; e >= 0;)o += W(e + t - 1, e) * Math.pow(i, t) * Math.pow(1 - i, e), e--; return o } return W(e + t - 1, e) * Math.pow(i, t) * Math.pow(1 - i, e) }).args([["number_f", "integer+"], ["number_s", "integer+"], ["probability_s", ["and", "number", ["[between]", 0, 1]]], ["cumulative", "logical"]]), D("negbinomdist", "negbinom.dist"), T("address", function (e, t, i, n, o) { var r = new I(e - 1, t - 1, i - 1); return o && r.setSheet(o, !0), n ? r.print(0, 0) : r.print() }).args([["row", "integer++"], ["col", "integer++"], ["abs", ["or", ["null", 1], ["values", 1, 2, 3, 4]]], ["a1", ["or", ["null", !0], "logical"]], ["sheet", ["or", "null", "string"]]]), T("areas", function (e) { var t = 0; return function e(i) { i instanceof I || i instanceof E ? t++ : i instanceof M && i.refs.forEach(e) }(e), t }).args([["ref", "ref"]]), T("choose", function (e, t) { return e > t.length ? new A("N/A") : t[e - 1] }).args([["*index", "integer"], ["+", ["value", "anything"]]]), T("column", function (e) { return e ? e instanceof I ? e.col + 1 : this.asMatrix(e).mapCol(function (t) { return t + e.topLeft.col + 1 }) : this.formula.col + 1 }).args([["ref", ["or", "area", "null"]]]), T("columns", function (e) { return e instanceof F ? e.width() : e.width }).args([["ref", ["or", "area", "#matrix"]]]), T("formulatext", function (e) { var t = this.getRefCells(e)[0]; return t.formula ? t.formula.print(t.row, t.col) : new A("N/A") }).args([["ref", "ref"]]), T("hlookup", function (e, t, i, n) { var o = null; return t.eachCol(function (i) { var r = t.get(0, i); if (n) { if (r > e) return !0; o = i } else if (r === e) return o = i, !0 }), null == o ? new A("N/A") : t.get(i - 1, o) }).args([["value", "anyvalue"], ["range", "matrix"], ["row", "integer++"], ["approx", ["or", "logical", ["null", !0]]]]), T("index", function (e, t, i, n, o) { var r, s, a, l = this; if (t instanceof M && (t = t.refs[o - 1]), !i && !n || !t) return e(new A("N/A")); if (t instanceof I && (t = t.toRangeRef()), t instanceof E) { if (i && n) return n > t.width() || i > t.height() ? e(new A("REF")) : (r = t.toCell(i - 1, n - 1), void l.resolveCells([r], function () { e(l.getRefData(r)) })); if (!i) return s = t.toColumn(n - 1), void l.resolveCells([s], function () { e(l.asMatrix(s)) }); if (!n) return a = t.toRow(i - 1), void l.resolveCells([a], function () { e(l.asMatrix(a)) }) } else if (t instanceof R) { if (t.width > 1 && t.height > 1) { if (i && n) return e(t.get(i - 1, n - 1)); if (!i) return e(t.mapRow(function (e) { return t.get(e, n - 1) })); if (!n) return e(t.mapCol(function (e) { return t.get(i - 1, e) })) } if (1 == t.width) return e(t.get(i - 1, 0)); if (1 == t.height) return e(t.get(0, n - 1)) } else e(new A("REF")) }).argsAsync([["range", ["or", "ref", "matrix"]], ["row", ["or", "integer+", "null"]], ["col", ["or", "integer+", "null"]], ["areanum", ["or", "integer++", ["null", 1]]]]), T("indirect", function (e) { var t, i; try { if (t = this.formula, !((i = C.parseFormula(t.sheet, t.row, t.col, e)).ast instanceof F)) throw 1; return i.ast.absolute(t.row, t.col) } catch (e) { return new A("REF") } }).args([["thing", "string"]]), T("match", function (e, t, i) { var n, o = 1; return 0 === i ? n = G(e) : -1 === i ? n = G("<=" + e) : 1 === i && (n = G(">=" + e)), t.each(function (t) { return null != t && n(t) ? (0 !== i && e != t && --o, !0) : void o++ }, !0) && o > 0 ? o : new A("N/A") }).args([["value", "anyvalue"], ["range", "matrix"], ["type", ["or", ["values", -1, 0, 1], ["null", 1]]]]), T("offset", function (e, t, i, n, o) { var r = (e instanceof I ? e : e.topLeft).clone(); return r.row += t, r.col += i, r.row < 0 || r.col < 0 ? new A("VALUE") : n > 1 || o > 1 ? new E(r, new I(r.row + n - 1, r.col + o - 1)).setSheet(e.sheet, e.hasSheet()) : r }).args([["ref", "area"], ["*rows", "integer"], ["*cols", "integer"], ["*height", ["or", "integer++", ["null", "$ref.height()"]]], ["*width", ["or", "integer++", ["null", "$ref.width()"]]]]), T("row", function (e) { return e ? e instanceof I ? e.row + 1 : this.asMatrix(e).mapRow(function (t) { return t + e.topLeft.row + 1 }) : this.formula.row + 1 }).args([["ref", ["or", "area", "null"]]]), T("rows", function (e) { return e instanceof F ? e.height() : e.height }).args([["ref", ["or", "area", "#matrix"]]]), T("vlookup", function (e, t, i, n) { var o = null; return "number" != typeof e && (n = !1), "string" == typeof e && (e = e.toLowerCase()), t.eachRow(function (i) { var r = t.get(i, 0); if (n) { if (r > e) return !0; o = i } else if ("string" == typeof r && (r = r.toLowerCase()), r === e) return o = i, !0 }), null == o ? new A("N/A") : t.get(o, i - 1) }).args([["value", "anyvalue"], ["range", "matrix"], ["col", "integer++"], ["approx", ["or", "logical", ["null", !0]]]]), T("date", function (e, t, i) { return P(e, t - 1, i) }).args([["*year", "integer"], ["*month", "integer"], ["*date", "integer"]]), T("day", function (e) { return B(e).date }).args([["*date", "date"]]), T("month", function (e) { return B(e).month + 1 }).args([["*date", "date"]]), T("year", function (e) { return B(e).year }).args([["*date", "date"]]), T("weekday", function (e) { return B(e).day + 1 }).args([["*date", "date"]]), T("weeknum", function (e, t) { var i, n = P(B(e).year, 0, 1), o = B(n); return 21 == t ? ((i = 3 - (o.day + 6) % 7) < 0 && (i += 7), n += i, o.date += i, o.day = 4, t = 1) : t = 1 == t ? 0 : 2 == t ? 1 : (t - 10) % 7, (i = o.day - t) < 0 && (i += 7), n -= i, Math.ceil((e + 1 - n) / 7) }).args([["*date", "date"], ["*type", ["or", ["null", 1], ["values", 1, 2, 11, 12, 13, 14, 15, 16, 17, 21]]]]), T("isoweeknum", function (e) { var t = B(e), i = t.day || 7, n = Math.floor((t.ord - i + 10) / 7); return n < 1 ? g(t.year - 1) : 53 == n && n > g(t.year) ? 1 : n }).args([["*date", "date"]]), T("now", function () { return S.dateToSerial(new Date) }).args([]), T("today", function () { return 0 | S.dateToSerial(new Date) }).args([]), T("time", function (e, t, i) { return S.packTime(e, t, i, 0) }).args([["*hours", "integer"], ["*minutes", "integer"], ["*seconds", "integer"]]), T("hour", function (e) { return S.unpackTime(e).hours }).args([["*time", "datetime"]]), T("minute", function (e) { return S.unpackTime(e).minutes }).args([["*time", "datetime"]]), T("second", function (e) { return S.unpackTime(e).seconds }).args([["*time", "datetime"]]), T("edate", function (e, t) { var i = B(e), n = i.month + t, o = i.year + Math.floor(n / 12); return (n %= 12) < 0 && (n += 12), i = Math.min(i.date, z(o, n)), P(o, n, i) }).args([["*start_date", "date"], ["*months", "integer"]]), T("eomonth", function (e, t) { var i = B(e), n = i.month + t, o = i.year + Math.floor(n / 12); return (n %= 12) < 0 && (n += 12), i = z(o, n), P(o, n, i) }).args([["*start_date", "date"], ["*months", "integer"]]), T("workday", function (e, t, i) { var n, o = t > 0 ? 1 : -1; for (t = Math.abs(t), n = B(e).day; t > 0;)e += o, (n = (n + o) % 7) > 0 && n < 6 && i.indexOf(e) < 0 && --t; return e }).args([["start_date", "date"], ["days", "integer"], ["holidays", ["collect", "date"]]]), T("networkdays", function (e, t, i) { var n, o, r; for (e > t && (n = e, e = t, t = n), o = 0, r = B(e).day; e <= t;)r > 0 && r < 6 && i.indexOf(e) < 0 && o++, e++, r = (r + 1) % 7; return o }).args([["start_date", "date"], ["end_date", "date"], ["holidays", ["collect", "date"]]]), T("days", function (e, t) { return t - e }).args([["*start_date", "date"], ["*end_date", "date"]]), S._days_360 = v, T("days360", v).args([["*start_date", "date"], ["*end_date", "date"], ["*method", ["or", "logical", ["null", !1]]]]), T("yearfrac", function (e, t, i) { switch (i) { case 0: return v(e, t, !1) / 360; case 1: return (t - e) / L(B(e).year); case 2: return (t - e) / 360; case 3: return (t - e) / 365; case 4: return v(e, t, !0) / 360 } }).args([["*start_date", "date"], ["*end_date", "date"], ["*method", ["or", ["null", 0], ["values", 0, 1, 2, 3, 4]]]]), T("datevalue", function (e) { var t = S.parseDate(e); return t ? S.dateToSerial(t) : new A("VALUE") }).args([["*text", "string"]]), T("timevalue", function (e) { var t, i, n, o, r = e.toLowerCase().match(/(\d+):(\d+)(:(\d+)(\.(\d+))?)?\s*(am?|pm?)?/); return r ? (t = parseFloat(r[1]), i = parseFloat(r[2]), n = r[3] ? parseFloat(r[4]) : 0, (o = r[7]) && (t > 12 || t < 1) ? new A("VALUE") : (/^p/.test(o) && (t += 12), S.packTime(t, i, n, 0))) : new A("VALUE") }).args([["*text", "string"]]), T("mdeterm", function (e) { var t = e.each(function (e) { if ("number" != typeof e) return new A("VALUE") }, !0); return t || e.determinant() }).args([["m", ["and", "matrix", ["assert", "$m.width == $m.height"]]]]), T("transpose", function (e) { return e.transpose() }).args([["range", "matrix"]]), T("mmult", function (e, t) { return e.multiply(t) }).args([["a", "matrix"], ["b", ["and", "matrix", ["assert", "$b.height == $a.width"]]]]), T("munit", function (e) { return new R(this).unit(e) }).args([["n", "integer+"]]), T("minverse", function (e) { var t = e.each(function (e) { if ("number" != typeof e) return new A("VALUE") }, !0); return t || e.inverse() || new A("VALUE") }).args([["m", ["and", "matrix", ["assert", "$m.width == $m.height"]]]]), T("rand", function () { return Math.random() }).args([]), T("randbetween", function (e, t) { return e + Math.floor((t - e + 1) * Math.random()) }).args([["min", "integer"], ["max", ["and", "integer", ["assert", "$max >= $min"]]]]), T("true", function () { return !0 }).args([]), T("false", function () { return !0 }).args([]), T("roman", function (e) { return k.arabicToRoman(e).toUpperCase() }).args([["*number", "integer"]]), T("arabic", function (e) { var t = k.romanToArabic(e); return null == t ? new A("VALUE") : t }).args([["*roman", "string"]]), T("base", function (e, t, i) { for (var n = e.toString(t).toUpperCase(); n.length < i;)n = "0" + n; return n }).args([["*number", "integer"], ["*radix", ["and", "integer", ["[between]", 2, 36]]], ["*minLen", ["or", "integer+", ["null", 0]]]]), T("decimal", function (e, t) { var i, n, o; for (e = e.toUpperCase(), i = 0, n = 0; n < e.length; ++n) { if ((o = e.charCodeAt(n)) >= 48 && o <= 57) o -= 48; else { if (!(o >= 65 && o < 55 + t)) return new A("VALUE"); o -= 55 } i = i * t + o } return i }).args([["*text", "string"], ["*radix", ["and", "integer", ["[between]", 2, 36]]]]), T("char", function (e) { return String.fromCharCode(e) }).args([["*code", "integer+"]]), j = /[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g, T("clean", function (e) { return e.replace(j, "") }).args([["*text", "string"]]), T("code", function (e) { return e.charAt(0) }).args([["*text", "string"]]), D("unichar", "char"), D("unicode", "code"), T("concatenate", function (e) { var t, i = ""; for (t = 0; t < e.length; ++t)i += e[t]; return i }).args([["+", ["*text", "string"]]]), T("dollar", function (e, t) { for (var i = "$#,##0.DECIMALS;($#,##0.DECIMALS)", n = ""; t-- > 0;)n += "0"; return i = i.replace(/DECIMALS/g, n), x.formatting.text(e, i) }).args([["*number", "number"], ["*decimals", ["or", "integer++", ["null", 2]]]]), T("exact", function (e, t) { return e === t }).args([["*text1", "string"], ["*text2", "string"]]), T("find", function (e, t, i) { var n = t.indexOf(e, i - 1); return n < 0 ? new A("VALUE") : n + 1 }).args([["*substring", "string"], ["*string", "string"], ["*start", ["or", "integer++", ["null", 1]]]]), T("fixed", function (e, t, i) { for (var n = i ? "0.DECIMALS" : "#,##0.DECIMALS", o = ""; t-- > 0;)o += "0"; return n = n.replace(/DECIMALS/g, o), x.formatting.text(e, n) }).args([["*number", "number"], ["*decimals", ["or", "integer++", ["null", 2]]], ["*noCommas", ["or", "boolean", ["null", !1]]]]), T("left", function (e, t) { return e.substr(0, t) }).args([["*text", "string"], ["*length", ["or", "integer+", ["null", 1]]]]), T("right", function (e, t) { return e.substr(-t) }).args([["*text", "string"], ["*length", ["or", "integer+", ["null", 1]]]]), T("len", function (e) { return e.length }).args([["*text", "string"]]), T("lower", function (e) { return e.toLowerCase() }).args([["*text", "string"]]), T("upper", function (e) { return e.toUpperCase() }).args([["*text", "string"]]), T("ltrim", function (e) { return e.replace(/^\s+/, "") }).args([["*text", "string"]]), T("rtrim", function (e) { return e.replace(/\s+$/, "") }).args([["*text", "string"]]), T("trim", function (e) { return e.replace(/^\s+|\s+$/, "") }).args([["*text", "string"]]), T("mid", function (e, t, i) { return e.substr(t - 1, i) }).args([["*text", "string"], ["*start", "integer++"], ["*length", "integer+"]]), T("proper", function (e) { return e.toLowerCase().replace(/\b./g, function (e) { return e.toUpperCase() }) }).args([["*text", "string"]]), T("replace", function (e, t, i, n) { return e.substr(0, --t) + n + e.substr(t + i) }).args([["*text", "string"], ["*start", "integer++"], ["*length", "integer+"], ["*newText", "string"]]), T("rept", function (e, t) { for (var i = ""; t-- > 0;)i += e; return i }).args([["*text", "string"], ["*number", "integer+"]]), T("search", function (e, t, i) { var n = t.toLowerCase().indexOf(e.toLowerCase(), i - 1); return n < 0 ? new A("VALUE") : n + 1 }).args([["*substring", "string"], ["*string", "string"], ["*start", ["or", "integer++", ["null", 1]]]]), T("substitute", function (e, t, i, n) { function o() { e = e.substring(0, r) + i + e.substring(r + t.length) } if (t === i) return e; for (var r = -1; (r = e.indexOf(t, r + 1)) >= 0;)if (null == n) o(); else if (0 == --n) { o(); break } return e }).args([["*text", "string"], ["*oldText", "string"], ["*newText", "string"], ["*nth", ["or", "integer++", "null"]]]), T("t", function (e) { return "string" == typeof e ? e : "" }).args([["*value", "anyvalue"]]), T("text", function (e, t) { return x.formatting.text(e, t) }).args([["*value", "anyvalue"], ["*format", "string"]]), T("value", function (e) { return "number" == typeof e ? e : "boolean" == typeof e ? +e : (e = (e + "").replace(/[$,]/g, ""), e = parseFloat(e), isNaN(e) ? new A("VALUE") : e) }).args([["*value", "anyvalue"]]), _.prototype.toString = function () { return this.text }, T("hyperlink", function (e, t) { return new _(e, t) }).args([["*link", "string"], ["*text", ["or", "string", ["null", "$link"]]]]), T("iferror", function (e, t) { return e instanceof A ? t : e }).args([["*value", "forced!"], ["*value_if_error", "anyvalue!"]]), G = function () { function e(e, t) { if ("string" == typeof t) { var i = parseFloat(t); isNaN(i) || i != t || (t = i) } return function (i) { var n = t; return "string" == typeof i && "string" == typeof n && (i = i.toLowerCase(), n = n.toLowerCase()), e(i, n) } } function t(e) { var t, i; return "string" == typeof e && (e = e.toLowerCase()), /^[0-9.]+%$/.test(e) ? (i = e.substr(0, e.length - 1), t = parseFloat(i), isNaN(t) || t != i || (e = t / 100)) : /^[0-9.]+$/.test(e) && (t = parseFloat(e), isNaN(t) || t != e || (e = t)), e } function i(e, i) { return t(e) < t(i) } function n(e, i) { return t(e) <= t(i) } function o(e, i) { return t(e) > t(i) } function r(e, i) { return t(e) >= t(i) } function s(e, t) { return !a(e, t) } function a(e, i) { return i instanceof RegExp ? i.test(e) : ("string" != typeof e && "string" != typeof i || (e += "", i += ""), t(e) == t(i)) } var l = Object.create(null); return function (t) { var c, d; return "function" == typeof t ? t : (c = /^=(.*)$/.exec(t)) ? e(a, c[1]) : (c = /^<>(.*)$/.exec(t)) ? e(s, c[1]) : (c = /^<=(.*)$/.exec(t)) ? e(n, c[1]) : (c = /^<(.*)$/.exec(t)) ? e(i, c[1]) : (c = /^>=(.*)$/.exec(t)) ? e(r, c[1]) : (c = /^>(.*)$/.exec(t)) ? e(o, c[1]) : /[?*]/.exec(t) ? ((d = l[t]) || (d = t.replace(/(~\?|~\*|[\]({\+\.\|\^\$\\})\[]|[?*])/g, function (e) { switch (e) { case "~?": return "\\?"; case "~*": return "\\*"; case "?": return "."; case "*": return ".*"; default: return "\\" + e } }), d = l[t] = RegExp("^" + d + "$", "i")), e(a, d)) : e(a, t) } }()) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/runtime.functions.2.min", ["spreadsheet/runtime.min"], function () { "use strict"; function e(e) { var i, n, o, r; if (ee(e) >= 3.3) return 1 - t(e); for (-1 == (i = e > 0 ? 1 : -1) && (e = -e), n = 0, o = 1, r = 1; r < 100; r++)n += o, o *= 2 * e * e / (2 * r + 1); return 2 * i / Math.sqrt(Math.PI) * e * Math.exp(-e * e) * n } function t(t) { var i, n, o; if (ee(t) < 3.3) return 1 - e(t); for (i = 1, t < 0 && (i = -1, t = -t), n = t, o = 8; o >= 1; o -= .5)n = t + o / n; return n = 1 / (t + n), 1 == i ? Math.exp(-t * t) / Math.sqrt(Math.PI) * n : 2 - Math.exp(-t * t) / Math.sqrt(Math.PI) * n } function i(e) { var t, i = [1.000000000190015, 76.18009172947146, -86.50532032941678, 24.01409824083091, -1.231739572450155, .001208650973866179, -5395239384953e-18], n = e, o = e + 5.5, r = i[0]; for (o -= (e + .5) * Math.log(o), t = 1; t <= 6; t++)r += i[t] / (n += 1); return -o + Math.log(Math.sqrt(2 * Math.PI) * r / e) } function n(e) { if (e > 0) return Math.exp(i(e)); var t = Math.PI, o = -e; return -t / (o * n(o) * Math.sin(t * o)) } function o(e, t) { return i(e) + i(t) - i(e + t) } function r(e, t) { return Math.exp(o(e, t)) } function s(e, t) { return t < e + 1 ? function (e, t) { var n, o = 1 / e, r = o, s = e, a = i(e); for (n = 1; n <= X && (o += r *= t / ++s, !(ee(r) < ee(o) * Z)); n++); return o * Math.exp(-t + e * Math.log(t) - a) }(e, t) : 1 - function (e, t) { var n, o, r = J, s = r, a = 0, l = 1, c = t + 1 - e, d = i(e); for (n = 1; n <= X && (ee(a = c + l * a) < J && (a = J), ee(s = c + l / s) < J && (s = J), r *= o = s * (a = 1 / a), !(ee(o - 1) < Z)); n++)c += 2, l = -n * (n - e); return r * Math.exp(-t - d + e * Math.log(t)) }(e, t) } function a(e, t, i, o) { return o ? s(t, e / i) : Math.pow(e / i, t - 1) * Math.exp(-e / i) / (i * n(t)) } function l(e, t, i) { var n, o, r, s, l, c; if (0 === e) return 0; if (1 == e) return 1 / 0; for (n = 0, o = 10, r = 0, (s = t * i) > 1 && (o *= s), l = 0; l < X && (c = a(r = .5 * (n + o), t, i, !0), !(ee(e - c) < 1e-16)); l++)c > e ? o = r : n = r; return r } function c(t, i) { return i ? .5 + .5 * e(t / Math.sqrt(2)) : Math.exp(-t * t / 2) / Math.sqrt(2 * Math.PI) } function d(e) { var t, i, n = [-39.69683028665376, 220.9460984245205, -275.9285104469687, 138.357751867269, -30.66479806614716, 2.506628277459239], o = [-54.47609879822406, 161.5858368580409, -155.6989798598866, 66.80131188771972, -13.28068155288572], r = [-.007784894002430293, -.3223964580411365, -2.400758277161838, -2.549732539343734, 4.374664141464968, 2.938163982698783], s = [.007784695709041462, .3224671290700398, 2.445134137142996, 3.754408661907416], a = .02425; return e < a ? (t = Math.sqrt(-2 * Math.log(e)), (((((r[0] * t + r[1]) * t + r[2]) * t + r[3]) * t + r[4]) * t + r[5]) / ((((s[0] * t + s[1]) * t + s[2]) * t + s[3]) * t + 1)) : .97575 < e ? (t = Math.sqrt(-2 * Math.log(1 - e)), -(((((r[0] * t + r[1]) * t + r[2]) * t + r[3]) * t + r[4]) * t + r[5]) / ((((s[0] * t + s[1]) * t + s[2]) * t + s[3]) * t + 1)) : (((((n[0] * (i = (t = e - .5) * t) + n[1]) * i + n[2]) * i + n[3]) * i + n[4]) * i + n[5]) * t / (((((o[0] * i + o[1]) * i + o[2]) * i + o[3]) * i + o[4]) * i + 1) } function u(e, t, i) { return t + i * d(e) } function h(e, t, i) { return Math.exp((t - 1) * Math.log(e) + (i - 1) * Math.log(1 - e) - o(t, i)) } function f(e, t, i) { var n = Math.exp(t * Math.log(e) + i * Math.log(1 - e) - o(t, i)); return e < (t + 1) / (t + i + 2) ? n * p(t, i, e) / t : 1 - n * p(i, t, 1 - e) / i } function p(e, t, i) { var n, o, r, s, a, l = e + t, c = e + 1, d = e - 1, u = 1, h = 1 - l * i / c; for (ee(h) < J && (h = J), a = h = 1 / h, n = 1; n <= X && (ee(h = 1 + (r = n * (t - n) * i / ((d + (o = 2 * n)) * (e + o))) * h) < J && (h = J), ee(u = 1 + r / u) < J && (u = J), a *= (h = 1 / h) * u, ee(h = 1 + (r = -(e + n) * (l + n) * i / ((e + o) * (c + o))) * h) < J && (h = J), ee(u = 1 + r / u) < J && (u = J), a *= s = (h = 1 / h) * u, !(ee(s - 1) < Z)); n++); return a } function m(e, t, i) { var n, o, r = 0, s = 1, a = 0; for (n = 0; n < X && (o = f(a = .5 * (r + s), t, i), !(ee(e - o) < Z)); n++)o > e ? s = a : r = a; return a } function g(e, t, i, n, o) { return n + (o - n) * m(e, t, i) } function v(e, t, i) { return a(e, t / 2, 2, i) } function _(e, t) { return 1 - v(e, t, !0) } function b(e, t) { return l(e, t / 2, 2) } function w(e, t, i, n) { if (n) return f(t * e / (i + t * e), t / 2, i / 2); var o = t / i; return o / r(t /= 2, i /= 2) * Math.pow(o * e, t - 1) / Math.pow(1 + o * e, t + i) } function y(e) { var t, i = 0, n = e.length; for (t = 0; t < n; t++)i += e[t]; return i / n } function k(e, t) { var i, n, o = 0, r = e.length; for (i = 0; i < r; i++)n = e[i] - t, o += n * n; return o / (r - 1) } function x(e, t, i) { return i ? 1 - .5 * f(t / (e * e + t), t / 2, .5) : 1 / (Math.sqrt(t) * r(.5, t / 2)) * Math.pow(1 + e * e / t, -(t + 1) / 2) } function C(e, t) { return 1 - x(e, t, !0) } function S(e, t) { return e < 0 && (e = -e), 2 * C(e, t) } function T(e, t) { var i = m(2 * Math.min(e, 1 - e), t / 2, .5); return i = Math.sqrt(t * (1 - i) / i), e > .5 ? i : -i } function D(e, t) { var i, n, o, r, s = y(e), a = y(t), l = 0, c = 0, d = 0; for (i = 0, n = e.length; i < n; i++)o = e[i] - s, r = t[i] - a, l += o * r, c += o * o, d += r * r; return l / Math.sqrt(c * d) } function A(e) { var t, i = e.height, n = 0; for (t = 0; t < i; t++)n += e.data[t][0]; return n / i } function E(e, t) { var i, n, o = e.height, r = 0; for (i = 0; i < o; i++)n = e.data[i][0] - t, r += n * n; return r } function I(e, t, i, n) { var o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k = 0; for (t || (t = e.map(function () { return ++k })), i && ((t = t.clone()).eachRow(function (e) { t.data[e].unshift(1) }), ++t.width), o = t.transpose(), r = o.multiply(t).inverse().multiply(o).multiply(e), s = [], k = r.height - 1; k >= 0; k--)s.push(r.data[k][0]); if (i || s.push(0), !n) return this.asMatrix([s]); for (a = t.multiply(r), l = e.adds(a, !0), c = i ? A(a) : 0, d = E(a, c), u = i ? A(l) : 0, h = E(l, u), (f = []).push(d, h), p = d / (d + h), m = e.height - t.width, g = Math.sqrt(h / m), (v = []).push(p, g), _ = i ? d / (t.width - 1) / (h / m) : p / t.width / ((1 - p) / m), (b = []).push(_, m), w = o.multiply(t).inverse(), y = [], k = w.height - 1; k >= 0; k--)y.push(Math.sqrt(w.data[k][k] * h / m)); return this.asMatrix([s, y, v, b, f]) } function M(e, t, i, n) { var o, r, s = 0; return t || (t = e.map(function () { return ++s })), n && ((t = t.clone()).eachRow(function (e) { t.data[e].unshift(1) }), ++t.width), o = t.transpose(), r = o.multiply(t).inverse().multiply(o).multiply(e), i ? n && ((i = i.clone()).eachRow(function (e) { i.data[e].unshift(1) }), ++i.width) : i = t, i.multiply(r) } function R(e, t, i, n) { var o, r, s, a, l, c = i || 20, d = n || 1e-7, u = t; for (o = 1; o <= c; o++)if (r = e(u), s = r[0], a = r[1], u -= l = s / a, Math.abs(l) < d) return u; return new q("NUM") } function F(e, t, i, n, o) { var r = Math.pow(1 + e, t), s = e ? (r - 1) / e : t; return -(n * r + i * s * (1 + e * o)) } function z(e, t, i, n, o) { if (!e) return -(n + i) / t; var r = Math.pow(1 + e, t); return -e * (n + i * r) / ((1 + e * o) * (r - 1)) } function P(e, t, i, n, o, r) { var s, a; return 1 == r && 1 == t ? 0 : (s = z(e, i, n, o, r), a = F(e, t - 1, s, n, r) * e, r ? a / (1 + e) : a) } function B(e, t) { var i = G(e), n = i.month + t, o = i.year + Math.floor(n / 12); return (n %= 12) < 0 && (n += 12), i = Math.min(i.date, Y(o, n)), j(o, n, i) } function L(e, t, i) { return 1 == i || 2 == i || 3 == i ? t - e : K(e, t, i) } function H(e, t, i) { var n, o, r, s = G(e), a = G(t), l = a.year - s.year; l > 0 && (l = (l - 1) * i), r = 12 / i; do { n = B(t, -++l * r) } while (e < n); return o = B(t, - --l * r), [n, o] } function N(e, t) { return 3 == t ? 365 : 1 == t ? $(e) ? 366 : 365 : 360 } var O, V, U, W, q, j, G, $, Y, K, Q, X, Z, J, ee; kendo.support.browser.msie && kendo.support.browser.version < 9 || (O = kendo.spreadsheet, V = O.calc, U = V.runtime, W = U.defineFunction, q = U.CalcError, j = U.packDate, G = U.unpackDate, $ = U.isLeapYear, Y = U.daysInMonth, K = U._days_360, W("ERF", function (t, i) { return null == i ? e(t) : e(i) - e(t) }).args([["lower_limit", "number"], ["upper_limit", ["or", "number", "null"]]]), W("ERFC", t).args([["x", "number"]]), W("GAMMALN", i).args([["x", "number++"]]), W("GAMMA", n).args([["x", "number"]]), W("GAMMA.DIST", a).args([["x", "number+"], ["alpha", "number++"], ["beta", "number++"], ["cumulative", "logical"]]), W("GAMMA.INV", l).args([["p", ["and", "number", ["[between]", 0, 1]]], ["alpha", "number++"], ["beta", "number++"]]), W("NORM.S.DIST", c).args([["z", "number"], ["cumulative", "logical"]]), W("NORM.S.INV", d).args([["p", ["and", "number", ["[between]", 0, 1]]]]), W("NORM.DIST", function (e, t, i, n) { return n ? c((e - t) / i, !0) : Math.exp(-(e - t) * (e - t) / (2 * i * i)) / (i * Math.sqrt(2 * Math.PI)) }).args([["x", "number"], ["mean", "number"], ["stddev", "number++"], ["cumulative", "logical"]]), W("NORM.INV", u).args([["p", ["and", "number", ["[between]", 0, 1]]], ["mean", "number"], ["stddev", "number++"]]), W("BETADIST", function (e, t, i, n, o) { return f((e - n) / (o - n), t, i) }).args([["x", "number"], ["alpha", "number++"], ["beta", "number++"], ["A", ["or", "number", ["null", 0]]], ["B", ["or", "number", ["null", 1]]], ["?", ["assert", "$x >= $A", "NUM"]], ["?", ["assert", "$x <= $B", "NUM"]], ["?", ["assert", "$A < $B", "NUM"]]]), W("BETA.DIST", function (e, t, i, n, o, r) { return n ? f((e - o) / (r - o), t, i) : h((e - o) / (r - o), t, i) / (r - o) }).args([["x", "number"], ["alpha", "number++"], ["beta", "number++"], ["cumulative", "logical"], ["A", ["or", "number", ["null", 0]]], ["B", ["or", "number", ["null", 1]]], ["?", ["assert", "$x >= $A", "NUM"]], ["?", ["assert", "$x <= $B", "NUM"]], ["?", ["assert", "$A < $B", "NUM"]]]), W("BETA.INV", g).args([["p", ["and", "number", ["[between]", 0, 1]]], ["alpha", "number++"], ["beta", "number++"], ["A", ["or", "number", ["null", 0]]], ["B", ["or", "number", ["null", 1]]]]), W("CHISQ.DIST", v).args([["x", "number+"], ["deg_freedom", "integer++"], ["cumulative", "logical"]]), W("CHISQ.DIST.RT", _).args([["x", "number+"], ["deg_freedom", "integer++"]]), W("CHISQ.INV", b).args([["p", ["and", "number", ["[between]", 0, 1]]], ["deg_freedom", "integer++"]]), W("CHISQ.INV.RT", function (e, t) { return b(1 - e, t) }).args([["p", ["and", "number", ["[between]", 0, 1]]], ["deg_freedom", "integer++"]]), W("CHISQ.TEST", function (e, t) { return function (e, t) { var i, n, o, r, s = e.length, a = e[0].length, l = 0; for (i = 0; i < s; i++)for (n = 0; n < a; n++)o = t[i][n], r = e[i][n] - o, l += (r *= r) / o; return _(l, (s - 1) * (a - 1)) }(e.data, t.data) }).args([["actual_range", "matrix"], ["expected_range", "matrix"], ["?", ["assert", "$actual_range.width == $expected_range.width"]], ["?", ["assert", "$actual_range.height == $expected_range.height"]]]), W("EXPON.DIST", function (e, t, i) { return i ? 1 - Math.exp(-t * e) : t * Math.exp(-t * e) }).args([["x", "number+"], ["lambda", "number++"], ["cumulative", "logical"]]), W("POISSON.DIST", function (e, t, i) { var n, o; if (i) return 1 - v(2 * t, 2 * (e + 1), !0); for (n = 0, o = 2; o <= e; o++)n += Math.log(o); return Math.exp(e * Math.log(t) - t - n) }).args([["x", "integer+"], ["mean", "number+"], ["cumulative", "logical"]]), W("F.DIST", w).args([["x", "number+"], ["deg_freedom1", "integer++"], ["deg_freedom2", "integer++"], ["cumulative", "logical"]]), W("F.DIST.RT", function (e, t, i) { return 1 - w(e, t, i, !0) }).args([["x", "number+"], ["deg_freedom1", "integer++"], ["deg_freedom2", "integer++"]]), W("F.INV", function (e, t, i) { return i / t * (1 / g(1 - e, i / 2, t / 2, 0, 1) - 1) }).args([["p", ["and", "number", ["[between]", 0, 1]]], ["deg_freedom1", "integer++"], ["deg_freedom2", "integer++"]]), W("F.INV.RT", function (e, t, i) { return i / t * (1 / g(e, i / 2, t / 2, 0, 1) - 1) }).args([["p", ["and", "number", ["[between]", 0, 1]]], ["deg_freedom1", "integer++"], ["deg_freedom2", "integer++"]]), W("F.TEST", function (e, t) { var i = e.length - 1, n = t.length - 1, o = k(e, y(e)), r = k(t, y(t)); if (!o || !r) throw new q("DIV/0"); return 2 * w(o / r, i, n, !0) }).args([["array1", ["collect", "number", 1]], ["array2", ["collect", "number", 1]], ["?", ["assert", "$array1.length >= 2", "DIV/0"]], ["?", ["assert", "$array2.length >= 2", "DIV/0"]]]), W("FISHER", function (e) { return .5 * Math.log((1 + e) / (1 - e)) }).args([["x", ["and", "number", ["(between)", -1, 1]]]]), W("FISHERINV", function (e) { var t = Math.exp(2 * e); return (t - 1) / (t + 1) }).args([["y", "number"]]), W("T.DIST", x).args([["x", "number"], ["deg_freedom", "integer++"], ["cumulative", "logical"]]), W("T.DIST.RT", C).args([["x", "number"], ["deg_freedom", "integer++"]]), W("T.DIST.2T", S).args([["x", "number+"], ["deg_freedom", "integer++"]]), W("T.INV", T).args([["p", ["and", "number", ["(between]", 0, 1]]], ["deg_freedom", "integer++"]]), W("T.INV.2T", function (e, t) { return T(1 - e / 2, t) }).args([["p", ["and", "number", ["(between]", 0, 1]]], ["deg_freedom", "integer++"]]), W("T.TEST", function (e, t, i, n) { var o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w = e.length, x = t.length; if (1 == n) { for (s = 0, a = 0, l = 0; l < w; l++)c = e[l] - t[l], s += c, a += c * c; return o = (d = s / w) / Math.sqrt((a - s * d) / (w * (w - 1))), 1 == i ? C(o, w - 1) : S(o, w - 1) } return u = y(e), h = y(t), f = k(e, u), p = k(t, h), 3 == n ? (r = 1 / ((_ = (m = f / w) / (v = m + (g = p / x))) * _ / (w - 1) + (b = g / v) * b / (x - 1)), o = ee(u - h) / Math.sqrt(v), 1 == i ? C(o, r) : S(o, r)) : (r = w + x - 2, o = ee(u - h) * Math.sqrt(r * w * x / ((w + x) * ((w - 1) * f + (x - 1) * p))), 1 == i ? C(o, r) : S(o, r)) }).args([["array1", ["collect", "number", 1]], ["array2", ["collect", "number", 1]], ["tails", ["and", "integer", ["values", 1, 2]]], ["type", ["and", "integer", ["values", 1, 2, 3]]], ["?", ["assert", "$type != 1 || $array1.length == $array2.length", "N/A"]], ["?", ["assert", "$array1.length >= 2", "DIV/0"]], ["?", ["assert", "$array2.length >= 2", "DIV/0"]]]), W("CONFIDENCE.T", function (e, t, i) { return -T(e / 2, i - 1) * t / Math.sqrt(i) }).args([["alpha", ["and", "number", ["(between)", 0, 1]]], ["standard_dev", "number++"], ["size", ["and", "integer++", ["assert", "$size != 1", "DIV/0"]]]]), W("CONFIDENCE.NORM", function (e, t, i) { return -d(e / 2) * t / Math.sqrt(i) }).args([["alpha", ["and", "number", ["(between)", 0, 1]]], ["standard_dev", "number++"], ["size", ["and", "integer++"]]]), W("GAUSS", function (e) { return c(e, !0) - .5 }).args([["z", "number"]]), W("PHI", function (e) { return c(e) }).args([["x", "number"]]), W("LOGNORM.DIST", function (t, i, n, o) { if (o) return .5 + .5 * e((Math.log(t) - i) / (n * Math.sqrt(2))); var r = Math.log(t) - i; return Math.exp(-r * r / (2 * n * n)) / (t * n * Math.sqrt(2 * Math.PI)) }).args([["x", "number++"], ["mean", "number"], ["standard_dev", "number++"], ["cumulative", "logical"]]), W("LOGNORM.INV", function (e, t, i) { return Math.exp(u(e, t, i)) }).args([["probability", ["and", "number", ["(between)", 0, 1]]], ["mean", "number"], ["standard_dev", "number++"]]), W("PROB", function (e, t, i, n) { var o, r, s, a = e.length, l = 0; for (o = 0; o < a; o++) { if (t[o] <= 0 || t[o] > 1) throw new q("NUM"); l += t[o] } if (1 != l) throw new q("NUM"); for (r = 0, o = 0; o < a; o++)(s = e[o]) >= i && s <= n && (r += t[o]); return r }).args([["x_range", ["collect", "number", 1]], ["prob_range", ["collect", "number", 1]], ["lower_limit", "number"], ["upper_limit", ["or", "number", ["null", "$lower_limit"]]], ["?", ["assert", "$prob_range.length == $x_range.length", "N/A"]]]), W("SLOPE", function (e, t) { var i, n, o, r = y(t), s = y(e), a = 0, l = 0; for (i = 0, n = e.length; i < n; i++)o = t[i] - r, a += o * (e[i] - s), l += o * o; return a / l }).args([["known_y", ["collect", "number", 1]], ["known_x", ["collect", "number", 1]], ["?", ["assert", "$known_x.length == $known_y.length", "N/A"]], ["?", ["assert", "$known_x.length > 0 && $known_y.length > 0", "N/A"]]]), W("INTERCEPT", function (e, t) { var i, n, o, r = y(t), s = y(e), a = 0, l = 0; for (i = 0, n = e.length; i < n; i++)o = t[i] - r, a += o * (e[i] - s), l += o * o; return s - a * r / l }).args([["known_y", ["collect", "number", 1]], ["known_x", ["collect", "number", 1]], ["?", ["assert", "$known_x.length == $known_y.length", "N/A"]], ["?", ["assert", "$known_x.length > 0 && $known_y.length > 0", "N/A"]]]), W("PEARSON", D).args([["array1", ["collect", "number", 1]], ["array2", ["collect", "number", 1]], ["?", ["assert", "$array2.length == $array1.length", "N/A"]], ["?", ["assert", "$array2.length > 0 && $array1.length > 0", "N/A"]]]), W("RSQ", function (e, t) { var i = D(e, t); return i * i }).args([["known_y", ["collect", "number", 1]], ["known_x", ["collect", "number", 1]], ["?", ["assert", "$known_x.length == $known_y.length", "N/A"]], ["?", ["assert", "$known_x.length > 0 && $known_y.length > 0", "N/A"]], ["?", ["assert", "$known_x.length != 1 && $known_y.length != 1", "N/A"]]]), W("STEYX", function (e, t) { var i, n, o, r = t.length, s = y(t), a = y(e), l = 0, c = 0, d = 0; for (i = 0; i < r; i++)n = t[i] - s, o = e[i] - a, l += o * o, c += n * o, d += n * n; return Math.sqrt((l - c * c / d) / (r - 2)) }).args([["known_y", ["collect", "number", 1]], ["known_x", ["collect", "number", 1]], ["?", ["assert", "$known_x.length == $known_y.length", "N/A"]], ["?", ["assert", "$known_x.length >= 3 && $known_y.length >= 3", "DIV/0"]]]), W("FORECAST", function (e, t, i) { var n, o, r, s, a, l = y(i), c = y(t), d = 0, u = 0; for (n = 0, o = i.length; n < o; n++)r = i[n] - l, s = t[n] - c, d += r * s, u += r * r; if (0 === u) throw new q("N/A"); return c - (a = d / u) * l + a * e }).args([["x", "number"], ["known_y", ["collect", "number", 1]], ["known_x", ["collect", "number", 1]], ["?", ["assert", "$known_x.length == $known_y.length", "N/A"]], ["?", ["assert", "$known_x.length > 0 && $known_y.length > 0", "N/A"]]]), W("LINEST", I).args([["known_y", "matrix"], ["known_x", ["or", "matrix", "null"]], ["const", ["or", "logical", ["null", !0]]], ["stats", ["or", "logical", ["null", !1]]]]), W("LOGEST", function (e, t, i, n) { return I.call(this, e.map(Math.log), t, i, n).map(Math.exp) }).args([["known_y", "matrix"], ["known_x", ["or", "matrix", "null"]], ["const", ["or", "logical", ["null", !0]]], ["stats", ["or", "logical", ["null", !1]]]]), W("TREND", M).args([["known_y", "matrix"], ["known_x", ["or", "matrix", "null"]], ["new_x", ["or", "matrix", "null"]], ["const", ["or", "logical", ["null", !0]]]]), W("GROWTH", function (e, t, i, n) { return M.call(this, e.map(Math.log), t, i, n).map(Math.exp) }).args([["known_y", "matrix"], ["known_x", ["or", "matrix", "null"]], ["new_x", ["or", "matrix", "null"]], ["const", ["or", "logical", ["null", !0]]]]), W("FV", F).args([["rate", "number"], ["nper", "number"], ["pmt", ["or", "number", ["null", 0]]], ["pv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["?", ["assert", "$pmt || $pv"]]]), W("PV", function (e, t, i, n, o) { if (!e) return -n - i * t; var r = Math.pow(1 + e, t); return -(n + i * (r - 1) / e * (1 + e * o)) / r }).args([["rate", "number"], ["nper", "number"], ["pmt", ["or", "number", ["null", 0]]], ["fv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["?", ["assert", "$pmt || $fv"]]]), W("PMT", z).args([["rate", "number"], ["nper", "number"], ["pmt", "number"], ["fv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]]]), W("NPER", function (e, t, i, n, o) { if (!e) return -(n + i) / t; var r = t * (1 + e * o); return Math.log((r - n * e) / (r + i * e)) / Math.log(1 + e) }).args([["rate", "number"], ["pmt", "number"], ["pv", "number"], ["fv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]]]), W("RATE", function (e, t, i, n, o, r) { return R(function (r) { var s = Math.pow(1 + r, e - 1), a = s * (1 + r); return [i * a + t * (1 / r + o) * (a - 1) + n, e * i * s + t * (-(a - 1) / (r * r) + (1 / r + o) * e * s)] }, r) }).args([["nper", "number"], ["pmt", ["or", "number", ["null", 0]]], ["pv", "number"], ["fv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["guess", ["or", "number++", ["null", .01]]], ["?", ["assert", "$pmt || $fv"]]]), W("IPMT", P).args([["rate", "number"], ["per", "number++"], ["nper", "number++"], ["pv", "number"], ["fv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["?", ["assert", "$per >= 1 && $per <= $nper"]]]), W("PPMT", function (e, t, i, n, o, r) { return z(e, i, n, o, r) - P(e, t, i, n, o, r) }).args([["rate", "number"], ["per", "number++"], ["nper", "number++"], ["pv", "number"], ["fv", ["or", "number", ["null", 0]]], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["?", ["assert", "$per >= 1 && $per <= $nper"]]]), W("CUMPRINC", function (e, t, i, n, o, r) { var s, a, l, c; return 1 == r && (n--, o--), s = Math.pow(1 + e, t), a = Math.pow(1 + e, n - 1), l = Math.pow(1 + e, o), l * i - (l - 1) / e * (c = e * i * s / (s - 1)) - (a * i - (a - 1) / e * c) }).args([["rate", "number++"], ["nper", "number++"], ["pv", "number++"], ["start_period", "number++"], ["end_period", "number++"], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["?", ["assert", "$end_period >= $start_period", "NUM"]]]), W("CUMIPMT", function (e, t, i, n, o, r) { var s, a = 0; for (s = n; s <= o; s++)a += P(e, s, t, i, 0, r); return a }).args([["rate", "number++"], ["nper", "number++"], ["pv", "number++"], ["start_period", "number++"], ["end_period", "number++"], ["type", ["or", ["values", 0, 1], ["null", 0]]], ["?", ["assert", "$end_period >= $start_period", "NUM"]]]), W("NPV", function (e, t) { var i, n, o = 0; for (i = 0, n = t.length; i < n; i++)o += t[i] * Math.pow(1 + e, -i - 1); return o }).args([["rate", "number"], ["values", ["collect", "number"]], ["?", ["assert", "$values.length > 0", "N/A"]]]), W("IRR", function (e, t) { return R(function (t) { var i, n, o = 0, r = 0; for (i = 0, n = e.length; i < n; i++)o += e[i] * Math.pow(1 + t, -i - 1), r += -i * e[i] * Math.pow(1 + t, -i - 2); return [o, r] }, t) }).args([["values", ["collect", "number", 1]], ["guess", ["or", "number", ["null", .1]]]]), W("EFFECT", function (e, t) { return Math.pow(1 + e / t, t) - 1 }).args([["nominal_rate", "number++"], ["npery", "integer++"]]), W("NOMINAL", function (e, t) { return t * (Math.pow(e + 1, 1 / t) - 1) }).args([["effect_rate", "number++"], ["npery", "integer++"]]), W("XNPV", function (e, t, i) { var n, o, r = 0; for (n = 0, o = t.length; n < o; n++)r += t[n] * Math.pow(1 + e, (i[0] - i[n]) / 365); return r }).args([["rate", "number"], ["values", ["collect", "number", 1]], ["dates", ["collect", "date", 1]], ["?", ["assert", "$values.length == $dates.length", "NUM"]]]), W("XIRR", function (e, t, i) { return R(function (i) { var n, o, r, s = e[0], a = 0; for (n = 1, o = e.length; n < o; n++)r = (t[0] - t[n]) / 365, s += e[n] * Math.pow(1 + i, r), a += r * e[n] * Math.pow(1 + i, r - 1); return [s, a] }, i) }).args([["values", ["collect", "number", 1]], ["dates", ["collect", "date", 1]], ["guess", ["or", "number", ["null", .1]]], ["?", ["assert", "$values.length == $dates.length", "NUM"]]]), W("ISPMT", function (e, t, i, n) { return -n * e * (1 - t / i) }).args([["rate", "number"], ["per", "number++"], ["nper", "number++"], ["pv", "number"], ["?", ["assert", "$per >= 1 && $per <= $nper"]]]), W("DB", function (e, t, i, n, o) { var r, s, a = 1 - Math.pow(t / e, 1 / i); if (a = Math.floor(1e3 * a + .5) / 1e3, r = e * a * o / 12, 1 == n) return r; for (s = 1; s < i; s++) { if (s == n - 1) return (e - r) * a; r += (e - r) * a } return (e - r) * a * (12 - o) / 12 }).args([["cost", "number"], ["salvage", "number"], ["life", "number++"], ["period", "number++"], ["month", ["or", "number", ["null", 12]]]]), W("DDB", function (e, t, i, n, o) { var r = o / i, s = -e * (Math.pow(1 - r, n - 1) - 1), a = (e - s) * r; return a = Math.min(a, Math.max(0, e - s - t)) }).args([["cost", "number"], ["salvage", "number"], ["life", "number++"], ["period", "number++"], ["factor", ["or", "number", ["null", 2]]]]), W("SLN", function (e, t, i) { return (e - t) / i }).args([["cost", "number"], ["salvage", "number"], ["life", "number++"]]), W("SYD", function (e, t, i, n) { return (e - t) * (i - n + 1) * 2 / (i * (i + 1)) }).args([["cost", "number"], ["salvage", "number"], ["life", "number++"], ["per", "number++"]]), W("VDB", function (e, t, i, n, o, r, s) { function a(e, i) { var n, o, r; return o = 1 == f ? 1 == i ? e : 0 : e * Math.pow(1 - f, i - 1), r = e * Math.pow(1 - f, i), (n = r < t ? o - t : o - r) < 0 ? 0 : n } function l(e, i, n) { var o, r, s, l = e - t, c = Math.ceil(n), d = 0, u = 0, h = !1; for (r = 1; r <= c; r++)h ? o = d : (s = a(e, r), (d = l / (i - r + 1)) > s ? (o = d, h = !0) : (o = s, l -= s)), r == c && (o *= n + 1 - c), u += o; return u } var c, d, u, h, f = r >= i ? 1 : r / i, p = Math.floor(n), m = Math.ceil(o), g = 0; if (s) for (c = p + 1; c <= m; c++)d = a(e, c), c == p + 1 ? d *= Math.min(o, p + 1) - n : c == m && (d *= o + 1 - m), g += d; else u = i, n != Math.floor(n) && r > 1 && n >= i / 2 && (h = n - i / 2, n = i / 2, o -= h, u += 1), e -= l(e, u, n), g = l(e, i - n, o - n); return g }).args([["cost", "number+"], ["salvage", "number+"], ["life", "number++"], ["start_period", "number+"], ["end_period", "number+"], ["factor", ["or", "number+", ["null", 2]]], ["no_switch", ["or", "logical", ["null", !1]]], ["?", ["assert", "$end_period >= $start_period", "NUM"]]]), Q = [["settlement", "date"], ["maturity", "date"], ["frequency", ["and", "integer", ["values", 1, 2, 4]]], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$settlement < $maturity", "NUM"]]], W("COUPDAYBS", function (e, t, i, n) { return L(H(e, t, i)[0], e, n) }).args(Q), W("COUPDAYS", function (e, t, i, n) { if (1 == n) { var o = H(e, t, i); return L(o[0], o[1], 1) } return 3 == n ? 365 / i : 360 / i }).args(Q), W("COUPDAYSNC", function (e, t, i, n) { var o = H(e, t, i)[1]; return L(e, o, n) }).args(Q), W("COUPPCD", function (e, t, i) { return H(e, t, i)[0] }).args(Q), W("COUPNCD", function (e, t, i) { return H(e, t, i)[1] }).args(Q), W("COUPNUM", function (e, t, i) { var n = G(e), o = G(t); return 1 + ((12 * (o.year - n.year) + o.month - n.month) * i / 12 | 0) }).args(Q), W("ACCRINTM", function (e, t, i, n, o) { var r = N(G(t).year, o); return i * n * L(e, t, o) / r }).args([["issue", "date"], ["settlement", "date"], ["rate", "number++"], ["par", ["or", ["null", 1e3], "number++"]], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$issue < $settlement", "NUM"]]]), W("ACCRINT", function (e, t, i, n, o, r, s, a) { function l(e, t) { return (t - e) * r / v | 0 } var c, d, u, h, f, p, m = 0, g = o * n / r, v = s % 2 == 0 ? 360 : 365; return i <= t ? (c = H(i, t, r), d = c[0], u = c[1], d <= e ? g * L(e, i, s) / L(d, u, s) : (c = H(e, d, r), h = c[0], f = c[1], p = l(f, i), g * (p + L(e, f, s) / L(h, f, s) + (i < u ? L(d, i, s) / L(d, u, s) : 0)))) : (c = function (e, t, i) { var n, o, r, s = G(t), a = G(e), l = s.year - a.year; for (l > 0 && (l = (l - 1) * i), n = e, r = 12 / i; t > n;)o = n, n = B(e, ++l * r); return [o, n] }(t, i, r), d = c[0], u = c[1], p = l(t, i), m = u == i ? g * p : g * (p + L(d, i, s) / L(d, u, s)), a ? (c = H(e, t, r), d = c[0], u = c[1], p = l(e, t), m += g * (p + L(e, u, s) / L(d, u, s))) : m) }).args([["issue", "date"], ["first_interest", "date"], ["settlement", "date"], ["rate", "number++"], ["par", ["or", ["null", 1e3], "number++"]], ["frequency", ["and", "integer", ["values", 1, 2, 4]]], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["calc_method", ["or", "logical", ["null", !0]]], ["?", ["assert", "$issue < $settlement", "NUM"]]]), W("DISC", function (e, t, i, n, o) { var r = o % 2 == 0 ? 360 : $(G(e).year) ? 366 : 365; return (n - i) / n * r / L(e, t, o) }).args([["settlement", "date"], ["maturity", "date"], ["pr", "number++"], ["redemption", "number++"], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$settlement < $maturity", "NUM"]]]), W("INTRATE", function (e, t, i, n, o) { var r = o % 2 == 0 ? 360 : $(G(e).year) ? 366 : 365; return (n - i) / i * r / L(e, t, o) }).args([["settlement", "date"], ["maturity", "date"], ["investment", "number++"], ["redemption", "number++"], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$settlement < $maturity", "NUM"]]]), W("RECEIVED", function (e, t, i, n, o) { var r = o % 2 == 0 ? 360 : $(G(e).year) ? 366 : 365; return i / (1 - n * L(e, t, o) / r) }).args([["settlement", "date"], ["maturity", "date"], ["investment", "number++"], ["discount", "number++"], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$settlement < $maturity", "NUM"]]]), W("PRICE", function (e, t, i, n, o, r, s) { var a = 1 + ((t - e) * r / (s % 2 == 0 ? 360 : 365) | 0), l = H(e, t, r), c = l[0], d = l[1], u = L(c, e, s), h = L(e, d, s), f = L(c, d, s), p = 100 * i / r, m = n / r, g = h / f; return 1 == a ? (o + p) / (1 + g * m) - u / f * p : o / Math.pow(1 + m, a - 1 + g) + p * Math.pow(1 + m, 1 - a - g) * (Math.pow(1 + m, a) - 1) / m - u / f * p }).args([["settlement", "date"], ["maturity", "date"], ["rate", "number++"], ["yld", "number++"], ["redemption", "number++"], ["frequency", ["and", "integer", ["values", 1, 2, 4]]], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$settlement < $maturity", "NUM"]]]), W("PRICEDISC", function (e, t, i, n, o) { var r = L(e, t, o), s = N(G(t).year, o); return n - i * n * r / s }).args([["settlement", "date"], ["maturity", "date"], ["discount", "number++"], ["redemption", "number++"], ["basis", ["or", ["null", 0], ["and", "integer", ["values", 0, 1, 2, 3, 4]]]], ["?", ["assert", "$settlement < $maturity", "NUM"]]]), X = 300, Z = 2.2204e-16, J = 1e-30, ee = Math.abs) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/borderpalette.min", ["kendo.core.min", "kendo.colorpicker.min", "kendo.popup.min"], function () { !function (e) { function t(e) { return function (t) { return t.preventDefault(), e.apply(this, arguments) } } var i, n, o, r, s; e.support.browser.msie && e.support.browser.version < 9 || (i = e.jQuery, n = ["allBorders", "insideBorders", "insideHorizontalBorders", "insideVerticalBorders", "outsideBorders", "leftBorder", "topBorder", "rightBorder", "bottomBorder", "noBorders"], o = e.spreadsheet.messages.borderPalette = { allBorders: "All borders", insideBorders: "Inside borders", insideHorizontalBorders: "Inside horizontal borders", insideVerticalBorders: "Inside vertical borders", outsideBorders: "Outside borders", leftBorder: "Left border", topBorder: "Top border", rightBorder: "Right border", bottomBorder: "Bottom border", noBorders: "No border", reset: "Reset color", customColor: "Custom color...", apply: "Apply", cancel: "Cancel" }, r = e.ui.Widget.extend({ init: function (i, n) { e.ui.Widget.call(this, i, n), this.element = i, this.color = n.color, this._resetButton(), this._colorPalette(), this._customColorPalette(), this._customColorButton(), this.resetButton.on("click", t(this.resetColor.bind(this))), this.customColorButton.on("click", t(this.customColor.bind(this))) }, options: { name: "ColorChooser" }, events: ["change"], destroy: function () { e.unbind(this.dialog.element.find(".k-action-buttons")), this.dialog.destroy(), this.colorPalette.destroy(), this.resetButton.off("click"), this.customColorButton.off("click") }, value: function (e) { return void 0 === e ? this.color : (this.color = e, this.customColorButton.find(".k-icon").css("background-color", this.color), this.colorPalette.value(null), void this.flatColorPicker.value(this.color)) }, _change: function (e) { this.color = e, this.trigger("change", { value: e }) }, _colorPalette: function () { var e = i("<div />", { class: "k-spreadsheet-color-palette" }), t = this.colorPalette = i("<div />").kendoColorPalette({ palette: ["#ffffff", "#000000", "#d6ecff", "#4e5b6f", "#7fd13b", "#ea157a", "#feb80a", "#00addc", "#738ac8", "#1ab39f", "#f2f2f2", "#7f7f7f", "#a7d6ff", "#d9dde4", "#e5f5d7", "#fad0e4", "#fef0cd", "#c5f2ff", "#e2e7f4", "#c9f7f1", "#d8d8d8", "#595959", "#60b5ff", "#b3bcca", "#cbecb0", "#f6a1c9", "#fee29c", "#8be6ff", "#c7d0e9", "#94efe3", "#bfbfbf", "#3f3f3f", "#007dea", "#8d9baf", "#b2e389", "#f272af", "#fed46b", "#51d9ff", "#aab8de", "#5fe7d5", "#a5a5a5", "#262626", "#003e75", "#3a4453", "#5ea226", "#af0f5b", "#c58c00", "#0081a5", "#425ea9", "#138677", "#7f7f7f", "#0c0c0c", "#00192e", "#272d37", "#3f6c19", "#750a3d", "#835d00", "#00566e", "#2c3f71", "#0c594f"], value: this.color, change: function (e) { this.customColorButton.find(".k-icon").css("background-color", "transparent"), this.flatColorPicker.value(null), this._change(e.value) }.bind(this) }).data("kendoColorPalette"); e.append(t.wrapper).appendTo(this.element) }, _customColorPalette: function () { var t, n, r = i("<div />", { class: "k-spreadsheet-window", html: "<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>" + o.apply + "</button><button class='k-button' data-bind='click: close'>" + o.cancel + "</button></div>" }), s = this.dialog = r.appendTo(document.body).kendoWindow({ animation: !1, scrollable: !1, resizable: !1, maximizable: !1, modal: !0, visible: !1, width: 268, open: function () { this.center() } }).data("kendoWindow"); s.one("activate", function () { this.element.find("[data-role=flatcolorpicker]").data("kendoFlatColorPicker")._hueSlider.resize() }), t = this.flatColorPicker = s.element.children().first().kendoFlatColorPicker().data("kendoFlatColorPicker"), n = e.observable({ apply: function () { this.customColorButton.find(".k-icon").css("background-color", t.value()), this.colorPalette.value(null), this._change(t.value()), s.close() }.bind(this), close: function () { t.value(null), s.close() } }), e.bind(s.element.find(".k-action-buttons"), n) }, _resetButton: function () { this.resetButton = i("<a class='k-button k-reset-color' href='#'><span class='k-icon k-i-reset-color'></span>" + o.reset + "</a>").appendTo(this.element) }, _customColorButton: function () { this.customColorButton = i("<a class='k-button k-custom-color' href='#'><span class='k-icon'></span>" + o.customColor + "</a>").appendTo(this.element) }, resetColor: function () { this.colorPalette.value(null), this.flatColorPicker.value(null), this._change(null) }, customColor: function () { this.dialog.open() } }), s = e.ui.Widget.extend({ init: function (i, n) { e.ui.Widget.call(this, i, n), this.element = i, this.color = "#000", this.element.addClass("k-spreadsheet-border-palette"), this._borderTypePalette(), this._borderColorPalette(), this.element.on("click", ".k-spreadsheet-border-type-palette .k-button", t(this._click.bind(this))) }, options: { name: "BorderPalette" }, events: ["change"], destroy: function () { this.colorChooser.destroy(), this.element.off("click") }, _borderTypePalette: function () { var t = o, r = n.map(function (i) { return '<a title="' + t[i] + '" aria-label="' + t[i] + '" href="#" data-border-type="' + i + '" class="k-button k-button-icon"><span class="k-icon k-i-' + e.toHyphens(i) + '"></span></a>' }).join(""), s = i("<div />", { class: "k-spreadsheet-border-type-palette", html: r }); s.appendTo(this.element) }, _borderColorPalette: function () { var e = i("<div />", { class: "k-spreadsheet-border-color-palette" }); e.appendTo(this.element), this.colorChooser = new r(e, { color: this.color, change: this._colorChange.bind(this) }) }, _click: function (e) { this.type = i(e.currentTarget).data("borderType"), this.trigger("change", { type: this.type, color: this.color }) }, _colorChange: function (e) { this.color = e.value, this.type && this.trigger("change", { type: this.type, color: this.color }) } }), e.spreadsheet.ColorChooser = r, e.spreadsheet.BorderPalette = s) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/toolbar.min", ["kendo.toolbar.min", "kendo.colorpicker.min", "kendo.combobox.min", "kendo.dropdownlist.min", "kendo.popup.min", "spreadsheet/borderpalette.min"], function () { e = window.kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.jQuery, i = e.ui.ToolBar, n = e.spreadsheet.messages.toolbar = { addColumnLeft: "Add column left", addColumnRight: "Add column right", addRowAbove: "Add row above", addRowBelow: "Add row below", alignment: "Alignment", alignmentButtons: { justtifyLeft: "Align left", justifyCenter: "Center", justifyRight: "Align right", justifyFull: "Justify", alignTop: "Align top", alignMiddle: "Align middle", alignBottom: "Align bottom" }, backgroundColor: "Background", bold: "Bold", borders: "Borders", colorPicker: { reset: "Reset color", customColor: "Custom color..." }, copy: "Copy", cut: "Cut", deleteColumn: "Delete column", deleteRow: "Delete row", filter: "Filter", fontFamily: "Font", fontSize: "Font size", format: "Custom format...", formatTypes: { automatic: "Automatic", number: "Number", percent: "Percent", financial: "Financial", currency: "Currency", date: "Date", time: "Time", dateTime: "Date time", duration: "Duration", moreFormats: "More formats..." }, formatDecreaseDecimal: "Decrease decimal", formatIncreaseDecimal: "Increase decimal", freeze: "Freeze panes", freezeButtons: { freezePanes: "Freeze panes", freezeRows: "Freeze rows", freezeColumns: "Freeze columns", unfreeze: "Unfreeze panes" }, italic: "Italic", merge: "Merge cells", mergeButtons: { mergeCells: "Merge all", mergeHorizontally: "Merge horizontally", mergeVertically: "Merge vertically", unmerge: "Unmerge" }, open: "Open...", paste: "Paste", quickAccess: { redo: "Redo", undo: "Undo" }, exportAs: "Export...", toggleGridlines: "Toggle gridlines", sort: "Sort", sortAsc: "Sort ascending", sortDesc: "Sort descending", sortButtons: { sortSheetAsc: "Sort sheet A to Z", sortSheetDesc: "Sort sheet Z to A", sortRangeAsc: "Sort range A to Z", sortRangeDesc: "Sort range Z to A" }, textColor: "Text Color", textWrap: "Wrap text", underline: "Underline", validation: "Data validation...", hyperlink: "Link" }, o = { home: ["open", "exportAs", ["cut", "copy", "paste"], ["bold", "italic", "underline"], "hyperlink", "backgroundColor", "textColor", "borders", "fontSize", "fontFamily", "alignment", "textWrap", ["formatDecreaseDecimal", "formatIncreaseDecimal"], "format", "merge", "freeze", "filter", "toggleGridlines"], insert: [["addColumnLeft", "addColumnRight", "addRowBelow", "addRowAbove"], ["deleteColumn", "deleteRow"]], data: ["sort", "filter", "validation"] }, r = { open: { type: "open", overflow: "never", iconClass: "file-excel" }, exportAs: { type: "exportAsDialog", dialogName: "exportAs", overflow: "never", text: "", iconClass: "file-excel" }, bold: { type: "button", command: "PropertyChangeCommand", property: "bold", value: !0, iconClass: "bold", togglable: !0 }, italic: { type: "button", command: "PropertyChangeCommand", property: "italic", value: !0, iconClass: "italic", togglable: !0 }, underline: { type: "button", command: "PropertyChangeCommand", property: "underline", value: !0, iconClass: "underline", togglable: !0 }, formatDecreaseDecimal: { type: "button", command: "AdjustDecimalsCommand", value: -1, iconClass: "decimal-decrease" }, formatIncreaseDecimal: { type: "button", command: "AdjustDecimalsCommand", value: 1, iconClass: "decimal-increase" }, textWrap: { type: "button", command: "TextWrapCommand", property: "wrap", value: !0, iconClass: "text-wrap", togglable: !0 }, cut: { type: "button", command: "ToolbarCutCommand", iconClass: "cut" }, copy: { type: "button", command: "ToolbarCopyCommand", iconClass: "copy" }, paste: { type: "button", command: "ToolbarPasteCommand", iconClass: "paste" }, separator: { type: "separator" }, alignment: { type: "alignment", iconClass: "align-left" }, backgroundColor: { type: "colorPicker", property: "background", iconClass: "paint" }, textColor: { type: "colorPicker", property: "color", iconClass: "foreground-color" }, fontFamily: { type: "fontFamily", property: "fontFamily", iconClass: "font-family" }, fontSize: { type: "fontSize", property: "fontSize", iconClass: "font-size" }, format: { type: "format", property: "format", iconClass: "custom-format" }, filter: { type: "filter", property: "hasFilter", iconClass: "filter" }, merge: { type: "merge", iconClass: "cells-merge" }, freeze: { type: "freeze", iconClass: "pane-freeze" }, borders: { type: "borders", iconClass: "borders-all" }, formatCells: { type: "dialog", dialogName: "formatCells", overflow: "never" }, hyperlink: { type: "dialog", dialogName: "hyperlink", iconClass: "link-horizontal", overflow: "never", text: "" }, toggleGridlines: { type: "button", command: "GridLinesChangeCommand", property: "gridLines", value: !0, iconClass: "border-no", togglable: !0 }, addColumnLeft: { type: "button", command: "AddColumnCommand", value: "left", iconClass: "table-column-insert-left" }, addColumnRight: { type: "button", command: "AddColumnCommand", value: "right", iconClass: "table-column-insert-right" }, addRowBelow: { type: "button", command: "AddRowCommand", value: "below", iconClass: "table-row-insert-below" }, addRowAbove: { type: "button", command: "AddRowCommand", value: "above", iconClass: "table-row-insert-above" }, deleteColumn: { type: "button", command: "DeleteColumnCommand", iconClass: "table-column-delete" }, deleteRow: { type: "button", command: "DeleteRowCommand", iconClass: "table-row-delete" }, sort: { type: "sort", iconClass: "sort-desc" }, validation: { type: "dialog", dialogName: "validation", iconClass: "exception", overflow: "never" } }, s = i.extend({ init: function (e, t) { t.items = this._expandTools(t.tools || s.prototype.options.tools[t.toolbarName]), i.fn.init.call(this, e, t); var n = this._click.bind(this); this.element.addClass("k-spreadsheet-toolbar"), this._addSeparators(this.element), this.bind({ click: n, toggle: n }) }, _addSeparators: function (e) { var t = e.children(".k-widget, a.k-button, .k-button-group"); t.before("<span class='k-separator' />") }, _expandTools: function (e) { function i(e) { var o = t.isPlainObject(e) ? e : r[e] || {}, s = "k-icon k-i-" + o.iconClass, a = o.type, l = { button: { showText: "overflow" }, colorPicker: { toolIcon: s, spriteCssClass: s }, borders: { spriteCssClass: s }, alignment: { spriteCssClass: s }, merge: { spriteCssClass: s }, freeze: { spriteCssClass: s } }, c = t.extend({ name: o.name || e, text: n[o.name || e], icon: o.iconClass, attributes: { title: n[o.name || e], "aria-label": n[o.name || e] } }, l[a], o); return "splitButton" == a && (c.menuButtons = c.menuButtons.map(i)), c.attributes["data-tool"] = e, o.property && (c.attributes["data-property"] = o.property), c } return e.reduce(function (e, n) { return e.push(t.isArray(n) ? { type: "buttonGroup", buttons: n.map(i) } : i.call(this, n)), e }, []) }, _click: function (e) { var t, i = e.target.attr("data-tool"), n = r[i] || {}, o = n.command; o && ("boolean" == typeof (t = { command: o, options: { property: n.property || null, value: n.value || null } }).options.value && (t.options.value = !!e.checked || null), this.action(t)) }, events: ["click", "toggle", "open", "close", "overflowOpen", "overflowClose", "action", "dialog"], options: { name: "SpreadsheetToolBar", resizable: !0, tools: o }, action: function (e) { this.trigger("action", e) }, dialog: function (e) { this.trigger("dialog", e) }, refresh: function (t) { function i(e, t) { var i, n = e.toolbar, o = e.overflow, r = n && n.options.togglable || o && o.options.togglable; r && (i = !1, "boolean" == typeof t ? i = t : "string" == typeof t && (i = n.options.value === t), n.toggle(i), o && o.toggle(i)) } function n(e, t) { var i = e.toolbar, n = e.overflow; i && i.update && i.update(t), n && n.update && n.update(t) } var o, r, s, a, l = t, c = this._tools(); for (o = 0; o < c.length; o++)r = c[o].property, s = c[o].tool, a = e.isFunction(l[r]) ? l[r]() : l, "gridLines" == r && (a = l.sheet().showGridLines()), "button" === s.type ? i(s, a) : n(s, a) }, _tools: function () { return this.element.find("[data-property]").toArray().map(function (e) { return { property: (e = t(e)).attr("data-property"), tool: this._getItem(e) } }.bind(this)) }, destroy: function () { this.element.find("[data-command],.k-button").each(function () { var e = t(this), i = e.data("instance"); i && i.destroy && i.destroy() }), i.fn.destroy.call(this) } }), e.spreadsheet.ToolBar = s, a = e.toolbar.Item.extend({ init: function (e, i) { var n = t("<select />").attr("title", e.attributes.title).attr("aria-label", e.attributes.title).kendoDropDownList({ height: "auto" }).data("kendoDropDownList"); this.dropDownList = n, this.element = n.wrapper, this.options = e, this.toolbar = i, this.attributes(), this.addUidAttr(), this.addOverflowAttr(), n.bind("open", this._open.bind(this)), n.bind("change", this._change.bind(this)), this.element.width(e.width).attr({ "data-command": "PropertyChangeCommand", "data-property": e.property }) }, _open: function () { var t, i = this.dropDownList, n = i.list; n.css({ whiteSpace: "nowrap", width: "auto" }), (t = n.width()) ? t += 20 : t = i._listWidth, n.css("width", t + e.support.scrollbar()), i._listWidth = t }, _change: function (e) { var t = e.sender, i = t.value(), n = t.dataItem(), o = n ? n.popup : void 0; o ? this.toolbar.dialog({ name: o }) : this.toolbar.action({ command: "PropertyChangeCommand", options: { property: this.options.property, value: "null" == i ? null : i } }) }, value: function (e) { return void 0 === e ? this.dropDownList.value() : void this.dropDownList.value(e) } }), l = e.toolbar.Item.extend({ init: function (e, i) { this.element = t("<a href='#' class='k-button k-button-icon'><span class='" + e.spriteCssClass + "'></span><span class='k-icon k-i-arrow-60-down'></span></a>"), this.element.on("click touchend", this.open.bind(this)).attr("data-command", e.command), this.options = e, this.toolbar = i, this.attributes(), this.addUidAttr(), this.addOverflowAttr(), this._popup() }, destroy: function () { this.popup.destroy() }, open: function (e) { e.preventDefault(), this.popup.toggle() }, _popup: function () { var e = this.element; this.popup = t("<div class='k-spreadsheet-popup' />").appendTo(e).kendoPopup({ anchor: e }).data("kendoPopup") } }), e.toolbar.registerComponent("dialog", e.toolbar.ToolBarButton.extend({ init: function (t, i) { e.toolbar.ToolBarButton.fn.init.call(this, t, i), this._dialogName = t.dialogName, this.element.bind("click touchend", this.open.bind(this)).data("instance", this) }, open: function () { this.toolbar.dialog({ name: this._dialogName }) } })), e.toolbar.registerComponent("exportAsDialog", e.toolbar.Item.extend({ init: function (e, i) { this._dialogName = e.dialogName, this.toolbar = i, this._title = e.attributes.title, this.element = t("<button class='k-button k-button-icon'><span class='k-icon k-i-file-excel' /></button>").attr("title", this._title).attr("aria-label", this._title).data("instance", this), this.element.bind("click", this.open.bind(this)).data("instance", this) }, open: function () { this.toolbar.dialog({ name: this._dialogName }) } })), c = e.toolbar.OverflowButton.extend({ init: function (t, i) { e.toolbar.OverflowButton.fn.init.call(this, t, i), this.element.on("click touchend", this._click.bind(this)), this.message = this.options.text; var n = this.element.data("button"); this.element.data(this.options.type, n) }, _click: t.noop }), d = l.extend({ init: function (t, i) { l.fn.init.call(this, t, i), this.popup.element.addClass("k-spreadsheet-colorpicker"), this.colorChooser = new e.spreadsheet.ColorChooser(this.popup.element, { change: this._colorChange.bind(this) }), this.element.attr({ "data-property": t.property }), this.element.data({ type: "colorPicker", colorPicker: this, instance: this }) }, destroy: function () { this.colorChooser.destroy(), l.fn.destroy.call(this) }, update: function (e) { this.value(e) }, value: function (e) { this.colorChooser.value(e) }, _colorChange: function (e) { this.toolbar.action({ command: "PropertyChangeCommand", options: { property: this.options.property, value: e.sender.value() } }), this.popup.close() } }), u = c.extend({ init: function (e, t) { e.iconName = "text", c.fn.init.call(this, e, t) }, _click: function () { this.toolbar.dialog({ name: "colorPicker", options: { title: this.options.property, property: this.options.property } }) } }), e.toolbar.registerComponent("colorPicker", d, u), h = [8, 9, 10, 11, 12, 13, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72], f = e.toolbar.Item.extend({ init: function (e, i) { var n = t("<input />").attr("aria-label", e.attributes.title).kendoComboBox({ change: this._valueChange.bind(this), clearButton: !1, dataSource: e.fontSizes || h, value: 12 }).data("kendoComboBox"); this.comboBox = n, this.element = n.wrapper, this.options = e, this.toolbar = i, this.attributes(), this.addUidAttr(), this.addOverflowAttr(), this.element.width(e.width).attr({ "data-command": "PropertyChangeCommand", "data-property": e.property }), this.element.data({ type: "fontSize", fontSize: this }) }, _valueChange: function (t) { this.toolbar.action({ command: "PropertyChangeCommand", options: { property: this.options.property, value: e.parseInt(t.sender.value()) } }) }, update: function (t) { this.value(e.parseInt(t) || 12) }, value: function (e) { return void 0 === e ? this.comboBox.value() : void this.comboBox.value(e) } }), p = c.extend({ _click: function () { this.toolbar.dialog({ name: "fontSize", options: { sizes: h, defaultSize: 12 } }) }, update: function (e) { this._value = e || 12, this.element.find(".k-text").text(this.message + " (" + this._value + ") ...") } }), e.toolbar.registerComponent("fontSize", f, p), m = ["Arial", "Courier New", "Georgia", "Times New Roman", "Trebuchet MS", "Verdana"], g = "Arial", v = a.extend({ init: function (e, t) { a.fn.init.call(this, e, t); var i = this.dropDownList; i.setDataSource(e.fontFamilies || m), i.value(g), this.element.data({ type: "fontFamily", fontFamily: this }) }, update: function (e) { this.value(e || g) } }), _ = c.extend({ _click: function () { this.toolbar.dialog({ name: "fontFamily", options: { fonts: m, defaultFont: g } }) }, update: function (e) { this._value = e || g, this.element.find(".k-text").text(this.message + " (" + this._value + ") ...") } }), e.toolbar.registerComponent("fontFamily", v, _), b = e.spreadsheet.formats = { automatic: null, number: "#,0.00", percent: "0.00%", financial: '_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)', currency: "$#,##0.00;[Red]$#,##0.00", date: "m/d/yyyy", time: "h:mm:ss AM/PM", dateTime: "m/d/yyyy h:mm", duration: "[h]:mm:ss" }, w = a.extend({ _revertTitle: function (e) { e.sender.value(""), e.sender.wrapper.width("auto") }, init: function (e, t) { var i, o; a.fn.init.call(this, e, t), i = this.dropDownList, o = "<span class='k-icon k-i-" + e.iconClass + "' style='line-height: 1em; width: 1.35em;'></span>", i.bind("change", this._revertTitle.bind(this)), i.bind("dataBound", this._revertTitle.bind(this)), i.setOptions({ dataValueField: "format", dataTextField: "name", dataValuePrimitive: !0, valueTemplate: o, template: "# if (data.sample) { #<span class='k-spreadsheet-sample'>#: data.sample #</span># } ##: data.name #" }), i.text(o), i.setDataSource([{ format: b.automatic, name: n.formatTypes.automatic }, { format: b.number, name: n.formatTypes.number, sample: "1,499.99" }, { format: b.percent, name: n.formatTypes.percent, sample: "14.50%" }, { format: b.financial, name: n.formatTypes.financial, sample: "(1,000.12)" }, { format: b.currency, name: n.formatTypes.currency, sample: "$1,499.99" }, { format: b.date, name: n.formatTypes.date, sample: "4/21/2012" }, { format: b.time, name: n.formatTypes.time, sample: "5:49:00 PM" }, { format: b.dateTime, name: n.formatTypes.dateTime, sample: "4/21/2012 5:49:00" }, { format: b.duration, name: n.formatTypes.duration, sample: "168:05:00" }, { popup: "formatCells", name: n.formatTypes.moreFormats }]), this.element.data({ type: "format", format: this }) } }), y = c.extend({ _click: function () { this.toolbar.dialog({ name: "formatCells" }) } }), e.toolbar.registerComponent("format", w, y), k = l.extend({ init: function (e, t) { l.fn.init.call(this, e, t), this._borderPalette(), this.element.data({ type: "borders", instance: this }) }, destroy: function () { this.borderPalette.destroy(), l.fn.destroy.call(this) }, _borderPalette: function () { var i = t("<div />").appendTo(this.popup.element); this.borderPalette = new e.spreadsheet.BorderPalette(i, { change: this._action.bind(this) }) }, _action: function (e) { this.toolbar.action({ command: "BorderChangeCommand", options: { border: e.type, style: { size: 1, color: e.color } } }) } }), x = c.extend({ _click: function () { this.toolbar.dialog({ name: "borders" }) } }), e.toolbar.registerComponent("borders", k, x), C = l.extend({ init: function (e, i) { l.fn.init.call(this, e, i), this.element.attr({ "data-property": "alignment" }), this._commandPalette(), this.popup.element.on("click", ".k-button", function (e) { this._action(t(e.currentTarget)) }.bind(this)), this.element.data({ type: "alignment", alignment: this, instance: this }) }, buttons: [{ property: "textAlign", value: "left", iconClass: "align-left", text: n.alignmentButtons.justtifyLeft }, { property: "textAlign", value: "center", iconClass: "align-center", text: n.alignmentButtons.justifyCenter }, { property: "textAlign", value: "right", iconClass: "align-right", text: n.alignmentButtons.justifyRight }, { property: "textAlign", value: "justify", iconClass: "align-justify", text: n.alignmentButtons.justifyFull }, { property: "verticalAlign", value: "top", iconClass: "align-top", text: n.alignmentButtons.alignTop }, { property: "verticalAlign", value: "center", iconClass: "align-middle", text: n.alignmentButtons.alignMiddle }, { property: "verticalAlign", value: "bottom", iconClass: "align-bottom", text: n.alignmentButtons.alignBottom }], destroy: function () { this.popup.element.off(), l.fn.destroy.call(this) }, update: function (e) { var t = e.textAlign(), i = e.verticalAlign(), n = this.popup.element; n.find(".k-button").removeClass("k-state-active"), t && n.find("[data-property=textAlign][data-value=" + t + "]").addClass("k-state-active"), i && n.find("[data-property=verticalAlign][data-value=" + i + "]").addClass("k-state-active") }, _commandPalette: function () { var e = this.buttons, i = t("<div />").appendTo(this.popup.element); e.forEach(function (n, o) { var r = "<a title='" + n.text + "' data-property='" + n.property + "' data-value='" + n.value + "' class='k-button k-button-icon'><span class='k-icon k-i-" + n.iconClass + "'></span></a>"; 0 !== o && e[o - 1].property !== n.property && i.append(t("<span class='k-separator' />")), i.append(r) }) }, _action: function (e) { var t = e.attr("data-property"), i = e.attr("data-value"); this.toolbar.action({ command: "PropertyChangeCommand", options: { property: t, value: i } }) } }), S = c.extend({ _click: function () { this.toolbar.dialog({ name: "alignment" }) } }), e.toolbar.registerComponent("alignment", C, S), T = l.extend({ init: function (e, i) { l.fn.init.call(this, e, i), this._commandPalette(), this.popup.element.on("click", ".k-button", function (e) { this._action(t(e.currentTarget)) }.bind(this)), this.element.data({ type: "merge", merge: this, instance: this }) }, buttons: [{ value: "cells", iconClass: "cells-merge", text: n.mergeButtons.mergeCells }, { value: "horizontally", iconClass: "cells-merge-horizontally", text: n.mergeButtons.mergeHorizontally }, { value: "vertically", iconClass: "cells-merge-vertically", text: n.mergeButtons.mergeVertically }, { value: "unmerge", iconClass: "table-unmerge", text: n.mergeButtons.unmerge }], destroy: function () { this.popup.element.off(), l.fn.destroy.call(this) }, _commandPalette: function () { var e = t("<div />").appendTo(this.popup.element); this.buttons.forEach(function (t) { var i = "<a title='" + t.text + "' data-value='" + t.value + "' class='k-button k-button-icontext'><span class='k-icon k-i-" + t.iconClass + "'></span>" + t.text + "</a>"; e.append(i) }) }, _action: function (e) { var t = e.attr("data-value"); this.toolbar.action({ command: "MergeCellCommand", options: { value: t } }) } }), D = c.extend({ _click: function () { this.toolbar.dialog({ name: "merge" }) } }), e.toolbar.registerComponent("merge", T, D), A = l.extend({ init: function (e, i) { l.fn.init.call(this, e, i), this._commandPalette(), this.popup.element.on("click", ".k-button", function (e) { this._action(t(e.currentTarget)) }.bind(this)), this.element.data({ type: "freeze", freeze: this, instance: this }) }, buttons: [{ value: "panes", iconClass: "pane-freeze", text: n.freezeButtons.freezePanes }, { value: "rows", iconClass: "row-freeze", text: n.freezeButtons.freezeRows }, { value: "columns", iconClass: "column-freeze", text: n.freezeButtons.freezeColumns }, { value: "unfreeze", iconClass: "table-unmerge", text: n.freezeButtons.unfreeze }], destroy: function () { this.popup.element.off(), l.fn.destroy.call(this) }, _commandPalette: function () { var e = t("<div />").appendTo(this.popup.element); this.buttons.forEach(function (t) { var i = "<a title='" + t.text + "' data-value='" + t.value + "' class='k-button k-button-icontext'><span class='k-icon k-i-" + t.iconClass + "'></span>" + t.text + "</a>"; e.append(i) }) }, _action: function (e) { var t = e.attr("data-value"); this.toolbar.action({ command: "FreezePanesCommand", options: { value: t } }) } }), E = c.extend({ _click: function () { this.toolbar.dialog({ name: "freeze" }) } }), e.toolbar.registerComponent("freeze", A, E), I = a.extend({ _revertTitle: function (e) { e.sender.value(""), e.sender.wrapper.width("auto") }, init: function (e, t) { a.fn.init.call(this, e, t); var i = this.dropDownList; i.bind("change", this._revertTitle.bind(this)), i.bind("dataBound", this._revertTitle.bind(this)), i.setOptions({ valueTemplate: "<span class='k-icon k-i-" + e.iconClass + "' style='line-height: 1em; width: 1.35em;'></span>", template: "<span class='k-icon k-i-#= iconClass #' style='line-height: 1em; width: 1.35em;'></span>#=text#", dataTextField: "text", dataValueField: "value" }), i.setDataSource([{ value: "asc", sheet: !1, text: n.sortButtons.sortRangeAsc, iconClass: "sort-asc" }, { value: "desc", sheet: !1, text: n.sortButtons.sortRangeDesc, iconClass: "sort-desc" }]), i.select(0), this.element.data({ type: "sort", sort: this }) }, _change: function (e) { var t = e.sender, i = t.dataItem(); i && this.toolbar.action({ command: "SortCommand", options: { value: i.value, sheet: i.sheet } }) }, value: t.noop }), M = c.extend({ _click: function () { this.toolbar.dialog({ name: "sort" }) } }), e.toolbar.registerComponent("sort", I, M), R = e.toolbar.ToolBarButton.extend({ init: function (t, i) { t.showText = "overflow", e.toolbar.ToolBarButton.fn.init.call(this, t, i), this.element.on("click", this._click.bind(this)), this.element.data({ type: "filter", filter: this }) }, _click: function () { this.toolbar.action({ command: "FilterCommand" }) }, update: function (e) { this.toggle(e) } }), F = c.extend({ init: function (e, t) { c.fn.init.call(this, e, t), this.element.data({ type: "filter", filter: this }) }, _click: function () { this.toolbar.action({ command: "FilterCommand" }) }, update: function (e) { this.toggle(e) } }), e.toolbar.registerComponent("filter", R, F), z = e.toolbar.Item.extend({ init: function (e, i) { this.toolbar = i, this.element = t("<div class='k-button k-upload-button k-button-icon'><span class='k-icon k-i-folder-open' /></div>").data("instance", this), this._title = e.attributes.title, this._reset() }, _reset: function () { this.element.remove("input"), t("<input type='file' autocomplete='off' accept='.xlsx'/>").attr("title", this._title).attr("aria-label", this._title).one("change", this._change.bind(this)).appendTo(this.element) }, _change: function (e) { this.toolbar.action({ command: "OpenCommand", options: { file: e.target.files[0] } }), this._reset() } }), e.toolbar.registerComponent("open", z), e.spreadsheet.TabStrip = e.ui.TabStrip.extend({ init: function (i, n) { e.ui.TabStrip.fn.init.call(this, i, n), i.addClass("k-spreadsheet-tabstrip"), this._quickAccessButtons(), this.toolbars = {}; var o = n.dataSource; this.contentElements.each(function (e, i) { this._toolbar(t(i), o[e].id, n.toolbarOptions[o[e].id]) }.bind(this)), this.one("activate", function () { this.toolbars[this.options.dataSource[0].id].resize() }) }, events: e.ui.TabStrip.fn.events.concat(["action", "dialog"]), destroy: function () { for (var t in this.quickAccessToolBar.off("click"), e.ui.TabStrip.fn.destroy.call(this), this.toolbars) this.toolbars[t].destroy() }, action: function (e) { this.trigger("action", e) }, dialog: function (e) { this.trigger("dialog", e) }, refreshTools: function (e) { var t, i = this.toolbars; for (t in i) i.hasOwnProperty(t) && i[t].refresh(e) }, _quickAccessButtons: function () { var i = [{ title: n.quickAccess.undo, iconClass: "undo", action: "undo" }, { title: n.quickAccess.redo, iconClass: "redo", action: "redo" }], o = e.template("<a href='\\#' title='#= title #' data-action='#= action #' class='k-button k-button-icon' aria-label='#= title #'><span class='k-icon k-i-#=iconClass#'></span></a>"); this.quickAccessToolBar = t("<div />", { class: "k-spreadsheet-quick-access-toolbar", html: e.render(o, i) }).insertBefore(this.wrapper), this.quickAccessToolBar.on("click", ".k-button", function (e) { e.preventDefault(); var i = t(e.currentTarget).attr("data-action"); this.action({ action: i }) }.bind(this)), this.quickAccessAdjust() }, quickAccessAdjust: function () { this.tabGroup.css("padding-left", e._outerWidth(this.quickAccessToolBar)) }, _toolbar: function (t, i, n) { var o, r; this.toolbars[i] && (this.toolbars[i].destroy(), t.children(".k-toolbar").remove()), n && (o = t.html("<div />").children("div"), r = { tools: "boolean" == typeof n ? void 0 : n, toolbarName: i, action: this.action.bind(this), dialog: this.dialog.bind(this) }, this.toolbars[i] = new e.spreadsheet.ToolBar(o, r)) } })); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/dialogs.min", ["kendo.core.min", "kendo.binder.min", "kendo.validator.min"], function () { !function (e) { function t(t, i) { return e.spreadsheet.formatting.text(t, i) } function i(e, t) { var i, n = [], r = []; for (i = 0; i < t.length; i++)-1 == o.inArray(t[i][e], r) && (n.push(t[i]), r.push(t[i][e])); return n } function n(t, i) { e.spreadsheet.dialogs.register(t, u.extend({ options: { messageId: i } })) } var o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A; e.support.browser.msie && e.support.browser.version < 9 || (o = e.jQuery, r = e.data.ObservableObject, s = e.spreadsheet.messages.dialogs = { apply: "Apply", save: "Save", cancel: "Cancel", remove: "Remove", retry: "Retry", revert: "Revert", okText: "OK", formatCellsDialog: { title: "Format", categories: { number: "Number", currency: "Currency", date: "Date" } }, fontFamilyDialog: { title: "Font" }, fontSizeDialog: { title: "Font size" }, bordersDialog: { title: "Borders" }, alignmentDialog: { title: "Alignment", buttons: { justtifyLeft: "Align left", justifyCenter: "Center", justifyRight: "Align right", justifyFull: "Justify", alignTop: "Align top", alignMiddle: "Align middle", alignBottom: "Align bottom" } }, mergeDialog: { title: "Merge cells", buttons: { mergeCells: "Merge all", mergeHorizontally: "Merge horizontally", mergeVertically: "Merge vertically", unmerge: "Unmerge" } }, freezeDialog: { title: "Freeze panes", buttons: { freezePanes: "Freeze panes", freezeRows: "Freeze rows", freezeColumns: "Freeze columns", unfreeze: "Unfreeze panes" } }, confirmationDialog: { text: "Are you sure you want to remove this sheet?", title: "Sheet remove" }, validationDialog: { title: "Data Validation", hintMessage: "Please enter a valid {0} value {1}.", hintTitle: "Validation {0}", criteria: { any: "Any value", number: "Number", text: "Text", date: "Date", custom: "Custom Formula", list: "List" }, comparers: { greaterThan: "greater than", lessThan: "less than", between: "between", notBetween: "not between", equalTo: "equal to", notEqualTo: "not equal to", greaterThanOrEqualTo: "greater than or equal to", lessThanOrEqualTo: "less than or equal to" }, comparerMessages: { greaterThan: "greater than {0}", lessThan: "less than {0}", between: "between {0} and {1}", notBetween: "not between {0} and {1}", equalTo: "equal to {0}", notEqualTo: "not equal to {0}", greaterThanOrEqualTo: "greater than or equal to {0}", lessThanOrEqualTo: "less than or equal to {0}", custom: "that satisfies the formula: {0}" }, labels: { criteria: "Criteria", comparer: "Comparer", min: "Min", max: "Max", value: "Value", start: "Start", end: "End", onInvalidData: "On invalid data", rejectInput: "Reject input", showWarning: "Show warning", showHint: "Show hint", hintTitle: "Hint title", hintMessage: "Hint message", ignoreBlank: "Ignore blank", showListButton: "Display button to show list", showCalendarButton: "Display button to show calendar" }, placeholders: { typeTitle: "Type title", typeMessage: "Type message" } }, exportAsDialog: { title: "Export...", labels: { scale: "Scale", fit: "Fit to page", fileName: "File name", saveAsType: "Save as type", exportArea: "Export", paperSize: "Paper size", margins: "Margins", orientation: "Orientation", print: "Print", guidelines: "Guidelines", center: "Center", horizontally: "Horizontally", vertically: "Vertically" } }, modifyMergedDialog: { errorMessage: "Cannot change part of a merged cell." }, rangeDisabledDialog: { errorMessage: "Destination range contains disabled cells." }, incompatibleRangesDialog: { errorMessage: "Incompatible ranges" }, noFillDirectionDialog: { errorMessage: "Cannot determine fill direction" }, duplicateSheetNameDialog: { errorMessage: "Duplicate sheet name" }, overflowDialog: { errorMessage: "Cannot paste, because the copy area and the paste area are not the same size and shape." }, useKeyboardDialog: { title: "Copying and pasting", errorMessage: "These actions cannot be invoked through the menu. Please use the keyboard shortcuts instead:", labels: { forCopy: "for copy", forCut: "for cut", forPaste: "for paste" } }, unsupportedSelectionDialog: { errorMessage: "That action cannot be performed on multiple selection." }, linkDialog: { title: "Hyperlink", labels: { text: "Text", url: "Address", removeLink: "Remove link" } } }, a = {}, e.spreadsheet.dialogs = { register: function (e, t) { a[e] = t }, registered: function (e) { return !!a[e] }, create: function (e, t) { var i = a[e]; if (i) return new i(t) } }, l = e.spreadsheet.SpreadsheetDialog = e.Observable.extend({ init: function (t) { e.Observable.fn.init.call(this, t), this.options = o.extend(!0, {}, this.options, t), this.bind(this.events, t) }, events: ["close", "activate"], options: { autoFocus: !0 }, dialog: function () { return this._dialog || (this._dialog = o("<div class='k-spreadsheet-window k-action-window k-popup-edit-form' />").addClass(this.options.className || "").append(e.template(this.options.template)({ messages: e.spreadsheet.messages.dialogs || s, errors: this.options.errors })).appendTo(document.body).kendoWindow({ autoFocus: this.options.autoFocus, scrollable: !1, resizable: !1, modal: !0, visible: !1, width: this.options.width || 320, title: this.options.title, open: function () { this.center() }, close: this._onDialogClose.bind(this), activate: this._onDialogActivate.bind(this), deactivate: this._onDialogDeactivate.bind(this) }).data("kendoWindow")), this._dialog }, _onDialogClose: function () { this.trigger("close", { action: this._action }) }, _onDialogActivate: function () { this.trigger("activate") }, _onDialogDeactivate: function () { this.trigger("deactivate"), this.destroy() }, destroy: function () { this._dialog && (this._dialog.destroy(), this._dialog = null) }, open: function () { this.dialog().open() }, apply: function () { this.close() }, close: function () { this._action = "close", this.dialog().close() } }), (c = e.spreadsheet.FormatCellsViewModel = r.extend({ init: function (e) { r.fn.init.call(this, e), this.useCategory(this.category) }, useCategory: function (e) { var t = e && e.type || "number", i = "currency" == t; this.category = e, this.set("showCurrencyFilter", i && this.currencies.length > 1), i ? this.currency(this.currencies[0]) : this.set("formats", this.allFormats[t + "Formats"]), this.useFirstFormat() }, useFirstFormat: function () { this.formats.length && this.set("format", this.formats[0].value) }, currency: function (e) { var i, n; return void 0 !== e && (this._currency = e, i = e.value, n = (n = [{ currency: i, decimals: !0 }, { currency: i, decimals: !0, iso: !0 }, { currency: i, decimals: !1 }]).map(function (e) { return { value: e = c.convert.currency(e), name: t(1e3, e) } }), this.set("formats", n), this.useFirstFormat()), this._currency || this.currencies[0] }, categoryFilter: function (e) { return void 0 !== e && this.useCategory(e), this.category }, preview: function () { var e = this.get("format"), i = this.value || 0; return e && e.length ? t(i, e) : i } })).convert = { currency: function (e) { var t = e.currency, i = t.pattern[1]; return e.decimals && (i = i.replace(/n/g, "n" + t["."] + function (e, t) { return Array(t + 1).join(e) }("0", t.decimals))), i = (i = e.iso ? '"' + t.abbr + '" ' + i.replace(/\s*\$\s*/g, "") : i.replace(/\$/g, t.symbol)).replace(/n/g, "?") }, date: function (e) { return /T|Z/.test(e) ? "" : e.toLowerCase().replace(/tt/g, "AM/PM").replace(/'/g, '"') } }, (d = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.formatCellsDialog || s, n = { title: i.title, categories: [{ type: "number", name: i.categories.number }, { type: "currency", name: i.categories.currency }, { type: "date", name: i.categories.date }] }; l.fn.init.call(this, o.extend(n, t)), this._generateFormats() }, options: { className: "k-spreadsheet-format-cells", template: "<div class='k-edit-form-container'><div class='k-root-tabs' data-role='tabstrip' data-text-field='name' data-bind='source: categories, value: categoryFilter' data-animation='false' /><div class='k-spreadsheet-preview' data-bind='text: preview' /><script type='text/x-kendo-template' id='format-item-template'>\\#: data.name \\#<\/script><select data-role='dropdownlist' class='k-format-filter' data-text-field='description' data-value-field='value.name' data-bind='visible: showCurrencyFilter, value: currency, source: currencies' /><ul data-role='staticlist' tabindex='0' class='k-list k-reset' data-template='format-item-template' data-value-primitive='true' data-value-field='value' data-bind='source: formats, value: format' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div></div>" }, _generateFormats: function () { var n, r = this.options; r.currencies || (r.currencies = d.currenciesFrom(e.cultures)), r.numberFormats || (r.numberFormats = [{ value: "#.00%", name: "100.00%" }, { value: "#%", name: "100%" }, { value: "#.00", name: "1024.00" }, { value: "#,###.00", name: "1,024.00" }]), r.dateFormats || (n = e.cultures.current.calendars.standard.patterns, r.dateFormats = i("value", o.map(n, function (e) { if (e = c.convert.date(e)) return { value: e, name: t(34567.7678, e) } }))) }, open: function (t) { var i, n, o = this.options, r = t.value(), s = o.categories.slice(0); this.viewModel = new c({ currencies: o.currencies.slice(0), allFormats: { numberFormats: o.numberFormats.slice(0), dateFormats: o.dateFormats.slice(0) }, categories: s, format: t.format(), category: r instanceof Date ? s[2] : s[0], apply: this.apply.bind(this), close: this.close.bind(this), value: r }), l.fn.open.call(this), i = this.dialog().element, e.bind(i, this.viewModel), n = i.find("select.k-format-filter").data("kendoDropDownList"), o.currencies.length > 10 && n.setOptions({ filter: "contains" }), i.find(e.roleSelector("staticlist")).parent().addClass("k-list-wrapper") }, apply: function () { var e = this.viewModel.format; l.fn.apply.call(this), this.trigger("action", { command: "PropertyChangeCommand", options: { property: "format", value: e } }) } })).currenciesFrom = function (t) { return i("description", o.map(t, function (t, i) { var n; if (/-/.test(i)) return n = t.numberFormat.currency, { description: e.format("{0} ({1}, {2})", n.name, n.abbr, n.symbol), value: n } })) }, e.spreadsheet.dialogs.register("formatCells", d), e.spreadsheet.dialogs.FormatCellsDialog = d, u = l.extend({ options: { className: "k-spreadsheet-message", title: "", messageId: "", text: "", template: "<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: close'>#= messages.okText #</button></div>" }, open: function () { var t, i; l.fn.open.call(this), t = this.options, i = t.text, t.messageId && (i = e.getter(t.messageId, !0)(e.spreadsheet.messages.dialogs)), e.bind(this.dialog().element, { text: i, close: this.close.bind(this) }) } }), e.spreadsheet.dialogs.register("message", u), h = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.confirmationDialog || s, n = { title: i.title, text: i.text }; l.fn.init.call(this, o.extend(n, t)) }, options: { className: "k-spreadsheet-message", messageId: "", template: "<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: confirm'>#= messages.okText #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>" }, open: function () { var t, i; l.fn.open.call(this), t = this.options, i = t.text, t.messageId && (i = e.getter(t.messageId, !0)(e.spreadsheet.messages.dialogs)), e.bind(this.dialog().element, { text: i, confirm: this.confirm.bind(this), cancel: this.close.bind(this) }) }, isConfirmed: function () { return this._confirmed }, confirm: function () { this._confirmed = !0, this.close() } }), e.spreadsheet.dialogs.register("confirmation", h), f = l.extend({ options: { className: "k-spreadsheet-message", title: "", messageId: "", text: "", template: "<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: retry'>#= messages.retry #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>" }, open: function () { var t, i; l.fn.open.call(this), t = this.options, i = t.text, t.messageId && (i = e.getter(t.messageId, !0)(e.spreadsheet.messages.dialogs)), e.bind(this.dialog().element, { text: i, retry: this.retry.bind(this), cancel: this.close.bind(this) }) }, retry: function () { this._retry = !0, this.close() } }), e.spreadsheet.dialogs.register("validationError", f), p = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.fontFamilyDialog || s; l.fn.init.call(this, o.extend({ title: i.title }, t)), this._list() }, options: { template: "<ul class='k-list k-reset'></ul>" }, _list: function () { var t = this.dialog().element.find("ul"), i = this.options.fonts, n = this.options.defaultFont; this.list = new e.ui.StaticList(t, { dataSource: new e.data.DataSource({ data: i }), template: "#: data #", value: n, change: this.apply.bind(this) }), this.list.dataSource.fetch() }, apply: function (e) { l.fn.apply.call(this), this.trigger("action", { command: "PropertyChangeCommand", options: { property: "fontFamily", value: e.sender.value()[0] } }) } }), e.spreadsheet.dialogs.register("fontFamily", p), m = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.fontSizeDialog || s; l.fn.init.call(this, o.extend({ title: i.title }, t)), this._list() }, options: { template: "<ul class='k-list k-reset'></ul>" }, _list: function () { var t = this.dialog().element.find("ul"), i = this.options.sizes, n = this.options.defaultSize; this.list = new e.ui.StaticList(t, { dataSource: new e.data.DataSource({ data: i }), template: "#: data #", value: n, change: this.apply.bind(this) }), this.list.dataSource.fetch() }, apply: function (t) { l.fn.apply.call(this), this.trigger("action", { command: "PropertyChangeCommand", options: { property: "fontSize", value: e.parseInt(t.sender.value()[0]) } }) } }), e.spreadsheet.dialogs.register("fontSize", m), g = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.bordersDialog || s; l.fn.init.call(this, o.extend({ title: i.title }, t)), this.element = this.dialog().element, this._borderPalette(), this.viewModel = e.observable({ apply: this.apply.bind(this), close: this.close.bind(this) }), e.bind(this.element.find(".k-action-buttons"), this.viewModel) }, options: { width: 177, template: "<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>" }, apply: function () { l.fn.apply.call(this); var e = this.value(); this.trigger("action", { command: "BorderChangeCommand", options: { border: e.type, style: { size: 1, color: e.color } } }) }, _borderPalette: function () { var t = this.dialog().element.find("div:first"); this.borderPalette = new e.spreadsheet.BorderPalette(t, { change: this.value.bind(this) }) }, value: function (e) { return void 0 === e ? this._state : void (this._state = e) } }), e.spreadsheet.dialogs.register("borders", g), v = l.extend({ init: function (t) { l.fn.init.call(this, t), this.element = this.dialog().element, this.property = t.property, this.options.title = t.title, this.viewModel = e.observable({ apply: this.apply.bind(this), close: this.close.bind(this) }), e.bind(this.element.find(".k-action-buttons"), this.viewModel) }, options: { template: "<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>" }, apply: function () { l.fn.apply.call(this), this.trigger("action", { command: "PropertyChangeCommand", options: { property: this.property, value: this.value() } }) }, value: function (e) { return void 0 === e ? this._value : void (this._value = e.value) } }), _ = v.extend({ init: function (e) { e.width = 177, v.fn.init.call(this, e), this._colorPalette() }, _colorPalette: function () { var e = this.dialog().element.find("div:first"); this.colorPalette = e.kendoColorPalette({ palette: ["#ffffff", "#000000", "#d6ecff", "#4e5b6f", "#7fd13b", "#ea157a", "#feb80a", "#00addc", "#738ac8", "#1ab39f", "#f2f2f2", "#7f7f7f", "#a7d6ff", "#d9dde4", "#e5f5d7", "#fad0e4", "#fef0cd", "#c5f2ff", "#e2e7f4", "#c9f7f1", "#d8d8d8", "#595959", "#60b5ff", "#b3bcca", "#cbecb0", "#f6a1c9", "#fee29c", "#8be6ff", "#c7d0e9", "#94efe3", "#bfbfbf", "#3f3f3f", "#007dea", "#8d9baf", "#b2e389", "#f272af", "#fed46b", "#51d9ff", "#aab8de", "#5fe7d5", "#a5a5a5", "#262626", "#003e75", "#3a4453", "#5ea226", "#af0f5b", "#c58c00", "#0081a5", "#425ea9", "#138677", "#7f7f7f", "#0c0c0c", "#00192e", "#272d37", "#3f6c19", "#750a3d", "#835d00", "#00566e", "#2c3f71", "#0c594f"], change: this.value.bind(this) }).data("kendoColorPalette") } }), e.spreadsheet.dialogs.register("colorPicker", _), b = v.extend({ init: function (e) { e.width = 268, v.fn.init.call(this, e), this.dialog().setOptions({ animation: !1 }), this.dialog().one("activate", this._colorPicker.bind(this)) }, _colorPicker: function () { var e = this.dialog().element.find("div:first"); this.colorPicker = e.kendoFlatColorPicker({ change: this.value.bind(this) }).data("kendoFlatColorPicker") } }), e.spreadsheet.dialogs.register("customColor", b), w = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.alignmentDialog || s, n = { title: i.title, buttons: [{ property: "textAlign", value: "left", iconClass: "align-left", text: i.buttons.justtifyLeft }, { property: "textAlign", value: "center", iconClass: "align-center", text: i.buttons.justifyCenter }, { property: "textAlign", value: "right", iconClass: "align-right", text: i.buttons.justifyRight }, { property: "textAlign", value: "justify", iconClass: "align-justify", text: i.buttons.justifyFull }, { property: "verticalAlign", value: "top", iconClass: "align-top", text: i.buttons.alignTop }, { property: "verticalAlign", value: "center", iconClass: "align-middle", text: i.buttons.alignMiddle }, { property: "verticalAlign", value: "bottom", iconClass: "align-bottom", text: i.buttons.alignBottom }] }; l.fn.init.call(this, o.extend(n, t)), this._list() }, options: { template: "<ul class='k-list k-reset'></ul>" }, _list: function () { var t = this.dialog().element.find("ul"); this.list = new e.ui.StaticList(t, { dataSource: new e.data.DataSource({ data: this.options.buttons }), template: "<a title='#=text#' data-property='#=property#' data-value='#=value#'><span class='k-icon k-i-#=iconClass#'></span>#=text#</a>", change: this.apply.bind(this) }), this.list.dataSource.fetch() }, apply: function (e) { var t = e.sender.value()[0]; l.fn.apply.call(this), this.trigger("action", { command: "PropertyChangeCommand", options: { property: t.property, value: t.value } }) } }), e.spreadsheet.dialogs.register("alignment", w), y = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.mergeDialog || s, n = { title: i.title, buttons: [{ value: "cells", iconClass: "cells-merge", text: i.buttons.mergeCells }, { value: "horizontally", iconClass: "cells-merge-horizontally", text: i.buttons.mergeHorizontally }, { value: "vertically", iconClass: "cells-merge-vertically", text: i.buttons.mergeVertically }, { value: "unmerge", iconClass: "table-unmerge", text: i.buttons.unmerge }] }; l.fn.init.call(this, o.extend(n, t)), this._list() }, options: { template: "<ul class='k-list k-reset'></ul>" }, _list: function () { var t = this.dialog().element.find("ul"); this.list = new e.ui.StaticList(t, { dataSource: new e.data.DataSource({ data: this.options.buttons }), template: "<a title='#=text#' data-value='#=value#'><span class='k-icon k-icon k-i-#=iconClass#'></span>#=text#</a>", change: this.apply.bind(this) }), this.list.dataSource.fetch() }, apply: function (e) { var t = e.sender.value()[0]; l.fn.apply.call(this), this.trigger("action", { command: "MergeCellCommand", options: { value: t.value } }) } }), e.spreadsheet.dialogs.register("merge", y), k = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.freezeDialog || s, n = { title: i.title, buttons: [{ value: "panes", iconClass: "pane-freeze", text: i.buttons.freezePanes }, { value: "rows", iconClass: "row-freeze", text: i.buttons.freezeRows }, { value: "columns", iconClass: "column-freeze", text: i.buttons.freezeColumns }, { value: "unfreeze", iconClass: "table-unmerge", text: i.buttons.unfreeze }] }; l.fn.init.call(this, o.extend(n, t)), this._list() }, options: { template: "<ul class='k-list k-reset'></ul>" }, _list: function () { var t = this.dialog().element.find("ul"); this.list = new e.ui.StaticList(t, { dataSource: new e.data.DataSource({ data: this.options.buttons }), template: "<a title='#=text#' data-value='#=value#'><span class='k-icon k-icon k-i-#=iconClass#'></span>#=text#</a>", change: this.apply.bind(this) }), this.list.dataSource.fetch() }, apply: function (e) { var t = e.sender.value()[0]; l.fn.apply.call(this), this.trigger("action", { command: "FreezePanesCommand", options: { value: t.value } }) } }), e.spreadsheet.dialogs.register("freeze", k), x = e.spreadsheet.ValidationCellsViewModel = r.extend({ init: function (e) { r.fn.init.call(this, e), this.bind("change", function (e) { "criterion" === e.field && (this.reset(), "custom" !== this.criterion && "list" !== this.criterion || this.setHintMessageTemplate()), "comparer" === e.field && this.setHintMessageTemplate(), "hintMessage" != e.field && "hintTitle" != e.field || this._mute || (this.shouldBuild = !1), "from" != e.field && "to" != e.field && "hintMessageTemplate" != e.field && "type" != e.field || !this.shouldBuild || this.buildMessages() }.bind(this)), this.reset() }, buildMessages: function () { this._mute = !0, this.set("hintTitle", this.hintTitleTemplate ? e.format(this.hintTitleTemplate, this.type) : ""), this.set("hintMessage", this.hintMessageTemplate ? e.format(this.hintMessageTemplate, this.from, this.to) : ""), this._mute = !1 }, reset: function () { this.setComparers(), this.set("comparer", this.comparers[0].type), this.set("from", null), this.set("to", null), this.set("useCustomMessages", !1), this.shouldBuild = !0, this.hintTitleTemplate = this.defaultHintTitle, this.buildMessages() }, setComparers: function () { var e, t, i = this.defaultComparers, n = []; if ("text" === this.criterion) for (e = ["equalTo", "notEqualTo"], t = 0; t < i.length; t++)e[0] == i[t].type && (n.push(i[t]), e.shift()); else n = i.slice(); this.set("comparers", n) }, setHintMessageTemplate: function () { "custom" !== this.criterion && "list" !== this.criterion ? this.set("hintMessageTemplate", e.format(this.defaultHintMessage, this.criterion, this.comparerMessages[this.comparer])) : (this.set("hintMessageTemplate", ""), this.set("hintMessage", "")) }, isAny: function () { return "any" === this.get("criterion") }, isNumber: function () { return "number" === this.get("criterion") }, showToForNumber: function () { return this.showTo() && this.isNumber() }, showToForDate: function () { return this.showTo() && this.isDate() }, isText: function () { return "text" === this.get("criterion") }, isDate: function () { return "date" === this.get("criterion") }, isList: function () { return "list" === this.get("criterion") }, isCustom: function () { return "custom" === this.get("criterion") }, showRemove: function () { return this.get("hasValidation") }, showTo: function () { return "between" == this.get("comparer") || "notBetween" == this.get("comparer") }, update: function (e) { this.set("hasValidation", !!e), e && this.fromValidationObject(e) }, fromValidationObject: function (e) { this.set("criterion", e.dataType), this.set("comparer", e.comparerType), this.set("from", e.from), this.set("to", e.to), this.set("type", e.type), this.set("ignoreBlank", e.allowNulls), this.set("showButton", e.showButton), e.messageTemplate || e.titleTemplate ? (this.hintMessageTemplate = e.messageTemplate, this.hintMessage = e.messageTemplate, this.hintTitleTemplate = e.titleTemplate, this.hintTitle = e.titleTemplate, this.useCustomMessages = !0, this.buildMessages()) : this.useCustomMessages = !1 }, toValidationObject: function () { if ("any" === this.criterion) return null; var e = { type: this.type, dataType: this.criterion, comparerType: this.comparer, from: this.from, to: this.to, allowNulls: this.ignoreBlank, showButton: this.showButton }; return this.useCustomMessages && (e.messageTemplate = this.shouldBuild ? this.hintMessageTemplate : this.hintMessage, e.titleTemplate = this.hintTitle), e } }), C = l.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.validationDialog || s, n = { title: i.title, hintMessage: i.hintMessage, hintTitle: i.hintTitle, criteria: [{ type: "any", name: i.criteria.any }, { type: "number", name: i.criteria.number }, { type: "text", name: i.criteria.text }, { type: "date", name: i.criteria.date }, { type: "custom", name: i.criteria.custom }, { type: "list", name: i.criteria.list }], comparers: [{ type: "greaterThan", name: i.comparers.greaterThan }, { type: "lessThan", name: i.comparers.lessThan }, { type: "between", name: i.comparers.between }, { type: "notBetween", name: i.comparers.notBetween }, { type: "equalTo", name: i.comparers.equalTo }, { type: "notEqualTo", name: i.comparers.notEqualTo }, { type: "greaterThanOrEqualTo", name: i.comparers.greaterThanOrEqualTo }, { type: "lessThanOrEqualTo", name: i.comparers.lessThanOrEqualTo }], comparerMessages: i.comparerMessages }; l.fn.init.call(this, o.extend(n, t)) }, options: { width: 450, criterion: "any", type: "reject", ignoreBlank: !0, showButton: !0, useCustomMessages: !1, errorTemplate: '<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-i-warning"> </span>#= message #<div class="k-callout k-callout-n"></div></div>', template: '<div class="k-edit-form-container"><div class="k-edit-label"><label>#: messages.validationDialog.labels.criteria #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: criterion, source: criteria" /></div><div data-bind="visible: isNumber"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.min #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.min #" placeholder="e.g. 10" class="k-textbox" data-bind="value: from, enabled: isNumber" required="required" /></div><div data-bind="visible: showTo"><div class="k-edit-label"><label>#: messages.validationDialog.labels.max #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.max #" placeholder="e.g. 100" class="k-textbox" data-bind="value: to, enabled: showToForNumber" required="required" /></div></div></div><div data-bind="visible: isText"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isText" required="required" /></div></div><div data-bind="visible: isDate"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.start #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.start #" class="k-textbox" data-bind="value: from, enabled: isDate" required="required" /></div><div data-bind="visible: showTo"><div class="k-edit-label"><label>#: messages.validationDialog.labels.end #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.end #" class="k-textbox" data-bind="value: to, enabled: showToForDate" required="required" /></div></div></div><div data-bind="visible: isCustom"><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isCustom" required="required" /></div></div><div data-bind="visible: isList"><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isList" required="required" /></div></div><div data-bind="visible: isList"><div class="k-edit-field"><input type="checkbox" name="showButton" id="showButton" class="k-checkbox" data-bind="checked: showButton"/><label for="showButton" class="k-checkbox-label"> #: messages.validationDialog.labels.showListButton #</label></div></div><div data-bind="visible: isDate"><div class="k-edit-field"><input type="checkbox" name="showButton" id="showButton" class="k-checkbox" data-bind="checked: showButton"/><label for="showButton" class="k-checkbox-label"> #: messages.validationDialog.labels.showCalendarButton #</label></div></div><div data-bind="invisible: isAny"><div class="k-edit-field"><input type="checkbox" name="ignoreBlank" id="ignoreBlank" class="k-checkbox" data-bind="checked: ignoreBlank"/><label for="ignoreBlank" class="k-checkbox-label"> #: messages.validationDialog.labels.ignoreBlank #</label></div></div><div data-bind="invisible: isAny"><div class="k-action-buttons"></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.onInvalidData #:</label></div><div class="k-edit-field"><input type="radio" id="validationTypeReject" name="validationType" value="reject" data-bind="checked: type" class="k-radio" /><label for="validationTypeReject" class="k-radio-label">#: messages.validationDialog.labels.rejectInput #</label> <input type="radio" id="validationTypeWarning" name="validationType" value="warning" data-bind="checked: type" class="k-radio" /><label for="validationTypeWarning" class="k-radio-label">#: messages.validationDialog.labels.showWarning #</label></div></div><div data-bind="invisible: isAny" class="hint-wrapper"><div class="k-edit-field"><input type="checkbox" name="useCustomMessages" id="useCustomMessages" class="k-checkbox" data-bind="checked: useCustomMessages" /><label class="k-checkbox-label" for="useCustomMessages"> #: messages.validationDialog.labels.showHint #</label></div><div data-bind="visible: useCustomMessages"><div class="k-edit-label"><label>#: messages.validationDialog.labels.hintTitle #:</label></div><div class="k-edit-field"><input class="k-textbox" placeholder="#: messages.validationDialog.placeholders.typeTitle #" data-bind="value: hintTitle" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.hintMessage #:</label></div><div class="k-edit-field"><input class="k-textbox" placeholder="#: messages.validationDialog.placeholders.typeMessage #" data-bind="value: hintMessage" /></div></div></div><div class="k-action-buttons"><button class="k-button" data-bind="visible: showRemove, click: remove">#: messages.remove #</button><button class="k-button k-primary" data-bind="click: apply">#: messages.apply #</button><button class="k-button" data-bind="click: close">#: messages.cancel #</button></div></div>' }, open: function (t) { var i, n = this.options; this.viewModel = new x({ type: n.type, defaultHintMessage: n.hintMessage, defaultHintTitle: n.hintTitle, defaultComparers: n.comparers.slice(0), comparerMessages: n.comparerMessages, criteria: n.criteria.slice(0), criterion: n.criterion, ignoreBlank: n.ignoreBlank, showButton: n.showButton, apply: this.apply.bind(this), close: this.close.bind(this), remove: this.remove.bind(this) }), this.viewModel.update(t.validation()), l.fn.open.call(this), i = this.dialog().element, this.validatable && this.validatable.destroy(), e.bind(i, this.viewModel), this.validatable = new e.ui.Validator(i.find(".k-edit-form-container"), { validateOnBlur: !1, errorTemplate: this.options.errorTemplate || void 0 }) }, apply: function () { this.validatable.validate() && (l.fn.apply.call(this), this.trigger("action", { command: "EditValidationCommand", options: { value: this.viewModel.toValidationObject() } })) }, remove: function () { this.viewModel.set("criterion", "any"), this.apply() } }), e.spreadsheet.dialogs.register("validation", C), e.spreadsheet.dialogs.ValidationDialog = C, S = l.extend({ init: function (t) { var i, n = e.spreadsheet.messages.dialogs.exportAsDialog || s; l.fn.init.call(this, o.extend({ title: n.title }, t)), this.viewModel = e.observable({ title: this.options.title, name: this.options.name, extension: this.options.extension, fileFormats: this.options.fileFormats, excel: t.excelExport, pdf: { proxyURL: t.pdfExport.proxyURL, forceProxy: t.pdfExport.forceProxy, title: t.pdfExport.title, author: t.pdfExport.author, subject: t.pdfExport.subject, keywords: t.pdfExport.keywords, creator: t.pdfExport.creator, date: t.pdfExport.date, fitWidth: this.options.pdf.fitWidth, area: this.options.pdf.area, areas: this.options.pdf.areas, paperSize: this.options.pdf.paperSize, paperSizes: this.options.pdf.paperSizes, margin: this.options.pdf.margin, margins: this.options.pdf.margins, landscape: this.options.pdf.landscape, guidelines: this.options.pdf.guidelines, hCenter: this.options.pdf.hCenter, vCenter: this.options.pdf.vCenter }, apply: this.apply.bind(this), close: this.close.bind(this) }), i = this.dialog(), this.viewModel.bind("change", function (e) { "extension" === e.field && (this.set("showPdfOptions", ".pdf" === this.extension), i.center()) }), e.bind(i.element, this.viewModel) }, options: { name: "Workbook", extension: ".xlsx", fileFormats: [{ description: "Excel Workbook (.xlsx)", extension: ".xlsx" }, { description: "Portable Document Format(.pdf)", extension: ".pdf" }], pdf: { fitWidth: !0, area: "workbook", areas: [{ area: "workbook", text: "Entire Workbook" }, { area: "sheet", text: "Active Sheet" }, { area: "selection", text: "Selection" }], paperSize: "a4", paperSizes: [{ value: "a2", text: "A2 (420 mm  594 mm)     " }, { value: "a3", text: "A3 (297 mm x 420 mm)     " }, { value: "a4", text: "A4 (210 mm x 297 mm)     " }, { value: "a5", text: "A5 (148 mm x 210 mm)     " }, { value: "b3", text: "B3 (353 mm  500 mm)     " }, { value: "b4", text: "B4 (250 mm x 353 mm)     " }, { value: "b5", text: "B5 (176 mm x 250 mm)     " }, { value: "folio", text: 'Folio (8.5" x 13")       ' }, { value: "legal", text: 'Legal (8.5" x 14")       ' }, { value: "letter", text: 'Letter (8.5" x 11")      ' }, { value: "tabloid", text: 'Tabloid (11" x 17")      ' }, { value: "executive", text: 'Executive (7.25" x 10.5")' }], margin: { bottom: "0.75in", left: "0.7in", right: "0.7in", top: "0.75in" }, margins: [{ value: { bottom: "0.75in", left: "0.7in", right: "0.7in", top: "0.75in" }, text: "Normal" }, { value: { bottom: "0.75in", left: "0.25in", right: "0.25in", top: "0.75in" }, text: "Narrow" }, { value: { bottom: "1in", left: "1in", right: "1in", top: "1in" }, text: "Wide" }], landscape: !0, guidelines: !0, hCenter: !0, vCenter: !0 }, width: 520, template: "<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: name' /></div><div ><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='description' data-value-field='extension' data-bind='value: extension, source: fileFormats' /></div></div><div class='export-config' data-bind='visible: showPdfOptions'><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.exportArea #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='text' data-value-field='area' data-bind='value: pdf.area, source: pdf.areas' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.paperSize#:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='text' data-value-field='value' data-bind='value: pdf.paperSize, source: pdf.paperSizes' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.margins #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-value-primitive='true'data-text-field='text' data-value-field='value' data-bind='value: pdf.margin, source: pdf.margins' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.orientation #:</label></div><div class='k-edit-field'><input type='radio' id='k-orientation-portrait' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='false' /><label class='k-orientation-label k-orientation-portrait-label' for='k-orientation-portrait'></label><input type='radio' id='k-orientation-landscape' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='true' /><label class='k-orientation-label k-orientation-landscape-label' for='k-orientation-landscape'></label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.print #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='guidelines' type='checkbox' data-bind='checked: pdf.guidelines'/><label class='k-checkbox-label' for='guidelines'>#: messages.exportAsDialog.labels.guidelines#</label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.scale #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='fitWidth' type='checkbox' data-bind='checked: pdf.fitWidth'/><label class='k-checkbox-label' for='fitWidth'>#: messages.exportAsDialog.labels.fit #</label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.center #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='hCenter' type='checkbox' data-bind='checked: pdf.hCenter'/><label class='k-checkbox-label' for='hCenter'>#: messages.exportAsDialog.labels.horizontally #</label><input class='k-checkbox' id='vCenter' type='checkbox' data-bind='checked: pdf.vCenter'/><label class='k-checkbox-label' for='vCenter'>#: messages.exportAsDialog.labels.vertically #</label></div><div class='k-page-orientation' data-bind='css: {k-page-landscape: pdf.landscape}'><div class='k-margins-horizontal'></div><div class='k-margins-vertical'></div></div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.save #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>" }, apply: function () { l.fn.apply.call(this), this.trigger("action", { command: "SaveAsCommand", options: this.viewModel }) } }), e.spreadsheet.dialogs.register("exportAs", S), n("modifyMerged", "modifyMergedDialog.errorMessage"), n("rangeDisabled", "rangeDisabledDialog.errorMessage"), n("overflow", "overflowDialog.errorMessage"), n("unsupportedSelection", "unsupportedSelectionDialog.errorMessage"), n("incompatibleRanges", "incompatibleRangesDialog.errorMessage"), n("noFillDirection", "noFillDirectionDialog.errorMessage"), n("duplicateSheetName", "duplicateSheetNameDialog.errorMessage"), T = u.extend({ options: { width: 640, title: "Errors in import", template: "<div class='k-spreadsheet-message-content k-spreadsheet-import-errors'><div class='k--header-message'>We encountered #= errors.length # errors while reading this file.  Please be aware that some formulas might be missing, or contain invalid results.</div><div class='k--errors'><table><thead><tr><th>Context</th><th>Error message</th></tr></thead># for (var i = 0; i < errors.length; ++i) { ## var err = errors[i]; #<tr><td>#: err.context #</td><td>#: err.error #</td></tr># } #</table></div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: close'>#: messages.okText #</button></div>" } }), e.spreadsheet.dialogs.register("importError", T), D = u.extend({ init: function (t) { var i = e.spreadsheet.messages.dialogs.useKeyboardDialog || s; l.fn.init.call(this, o.extend({ title: i.title }, t)) }, options: { template: "#: messages.useKeyboardDialog.errorMessage #<div>Ctrl+C #: messages.useKeyboardDialog.labels.forCopy #</div><div>Ctrl+X #: messages.useKeyboardDialog.labels.forCut #</div><div>Ctrl+V #: messages.useKeyboardDialog.labels.forPaste #</div><div class=\"k-action-buttons\"><button class='k-button k-primary' data-bind='click: close'>#= messages.okText #</button></div>" } }), e.spreadsheet.dialogs.register("useKeyboard", D), A = l.extend({ options: { template: "<div class='k-edit-label'><label>#: messages.linkDialog.labels.url #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: url' /></div><div class='k-action-buttons'><button style='float: left' class='k-button' data-bind='click: remove'>#= messages.linkDialog.labels.removeLink #</button><button class='k-button k-primary' data-bind='click: apply'>#= messages.okText #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>", title: s.linkDialog.title, autoFocus: !1 }, open: function (t) { var i, n, r = this; l.fn.open.apply(r, arguments), i = r.dialog().element, n = e.observable({ url: t.link(), apply: function () { /\S/.test(n.url) || (n.url = null), r.trigger("action", { command: "HyperlinkCommand", options: { link: n.url } }), r.close() }, remove: function () { n.url = null, n.apply() }, cancel: r.close.bind(r) }), e.bind(i, n), i.find("input").focus().on("keydown", function (e) { 13 == e.keyCode ? (n.url = o(this).val(), e.stopPropagation(), e.preventDefault(), n.apply()) : 27 == e.keyCode && (e.stopPropagation(), e.preventDefault(), n.cancel()) }) } }), e.spreadsheet.dialogs.register("hyperlink", A)) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/sheetbinder.min", ["kendo.core.min", "kendo.data.min", "spreadsheet/sheet.min"], function () { e = kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = function (e) { return e }, i = e.Class.extend({ init: function (e) { this.options = $.extend({}, this.options, e), this.columns = this._normalizeColumns(this.options.columns), this._sheet(), this._dataSource(), this._header(), this._boundRowsCount = 0, this.dataSource.fetch() }, _sheet: function () { this.sheet = this.options.sheet, this._sheetChangeHandler = this._sheetChange.bind(this), this._sheetDeleteRowHandler = this._sheetDeleteRow.bind(this), this._sheetInsertRowHandler = this._sheetInsertRow.bind(this), this.sheet.bind("change", this._sheetChangeHandler).bind("afterDeleteRow", this._sheetDeleteRowHandler).bind("afterInsertRow", this._sheetInsertRowHandler) }, _sheetInsertRow: function (e) { void 0 !== e.index && this.dataSource.insert(Math.max(e.index - 1, 0), {}) }, _sheetDeleteRow: function (e) { var t, i; void 0 !== e.index && (t = this.dataSource, (i = t.view()[e.index - 1]) && t.remove(i)) }, _header: function () { this.sheet.batch(function () { this.columns.forEach(function (e, t) { this.sheet.range(0, t).value(e.title) }.bind(this)) }.bind(this)) }, _sheetChange: function (i) { var n, o, r, s, a, l, c; i.insertRow || i.deleteRow || i.recalc && i.ref && (n = this.dataSource, o = n.view(), r = this.columns, n.reader.model && (s = n.reader.model.fields), !r.length && o.length && (r = Object.keys(o[0].toJSON())), a = r.map(function (i) { var n = i.field; return n && s && s[n] && "date" == s[n].type ? e.spreadsheet.numberToDate : t }), this._skipRebind = !0, l = this.sheet._grid.normalize(i.ref), c = this.sheet.range(l).values(), l.forEach(function (e) { var t, i, s, l, d; for (e = e.toRangeRef(), i = 0, s = e.topLeft.row; s <= e.bottomRight.row; s++) { for ((t = o[s - 1]) || (t = n.insert(s - 1, {}), o = n.view()), l = 0, d = e.topLeft.col; d <= e.bottomRight.col && d < r.length; d++)t.set(r[d].field, a[d](c[i][l++])); i++ } }), this._boundRowsCount = n.view().length, this._skipRebind = !1) }, _normalizeColumns: function (e) { return e.map(function (e) { var t = e.field || e; return { field: t, title: e.title || t } }) }, _dataSource: function () { var t = this.options, i = t.dataSource; i = Array.isArray(i) ? { data: i } : i, this.dataSource && this._changeHandler ? this.dataSource.unbind("change", this._changeHandler) : this._changeHandler = this._change.bind(this), this.dataSource = e.data.DataSource.create(i).bind("change", this._changeHandler) }, _change: function () { var t, i, n; this._skipRebind || (t = this.dataSource.view(), !(i = this.columns).length && t.length && (this.columns = i = this._normalizeColumns(Object.keys(t[0].toJSON())), this._header()), n = i.map(function (t) { return e.getter(t.field) }), this.sheet.batch(function () { var e, i, o, r = Math.max(t.length, this._boundRowsCount); for (e = 0; e < r; e++)for (i = 0; i < n.length; i++)o = t[e] ? n[i](t[e]) : null, this.sheet.range(e + 1, i).value(o) }.bind(this)), this._boundRowsCount = t.length) }, destroy: function () { this.dataSource.unbind("change", this._changeHandler), this.sheet.unbind("change", this._sheetChangeHandler).unbind("deleteRow", this._sheetDeleteRowHandler).unbind("insertRow", this._sheetInsertRowHandler) }, options: { columns: [] } }), e.spreadsheet.SheetDataSourceBinder = i); var e, t, i }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/filtermenu.min", ["kendo.core.min", "kendo.popup.min", "kendo.treeview.min", "kendo.numerictextbox.min", "kendo.datepicker.min", "kendo.datetimepicker.min"], function () { !function (e) { function t(i, n) { var o, r, s, a, l, c = !1, d = i instanceof e.data.HierarchicalDataSource && i.data(); for (o = 0; o < d.length; o++)r = d[o], s = ("" + r.text).toLowerCase(), a = !0 === n || "" === n || s.indexOf(n) >= 0, l = t(r.children, a || n), c = c || l || a, r.hidden = !a && !l, r.checked = !r.hidden; return d && i.filter({ field: "hidden", operator: "neq", value: !0 }), c } function i(t) { var n, o, r = t instanceof e.data.HierarchicalDataSource && t.data(); for (n = 0; n < r.length; n++)(o = r[n]).checked = !1, o.hasChildren && i(o.children) } var n, o, r, s, a, l, c, d, u; e.support.browser.msie && e.support.browser.version < 9 || (n = e.jQuery, o = e.ui.Widget, r = { details: "k-details", button: "k-button", detailsSummary: "k-details-summary", detailsContent: "k-details-content", icon: "k-icon", iconCollapse: "k-i-arrow-45-down-right", iconExpand: "k-i-arrow-60-right", iconSearch: "k-i-zoom", textbox: "k-textbox", wrapper: "k-spreadsheet-filter-menu", filterByCondition: "k-spreadsheet-condition-filter", filterByValue: "k-spreadsheet-value-filter", valuesTreeViewWrapper: "k-spreadsheet-value-treeview-wrapper", actionButtons: "k-action-buttons" }, s = o.extend({ init: function (t, i) { o.fn.init.call(this, t, i), this.element.addClass(u.classNames.details), this._summary = this.element.find("." + u.classNames.detailsSummary).on("click", this._toggle.bind(this)); var r = i.expanded ? u.classNames.iconCollapse : u.classNames.iconExpand; this._icon = n("<span />", { class: u.classNames.icon + " " + r }).prependTo(this._summary), this._container = e.wrap(this._summary.next(), !0), i.expanded || this._container.hide() }, options: { name: "Details" }, events: ["toggle"], visible: function () { return this.options.expanded }, toggle: function (t) { var i = e.fx(this._container).expand("vertical"); i.stop()[t ? "reverse" : "play"](), this._icon.toggleClass(u.classNames.iconExpand, t).toggleClass(u.classNames.iconCollapse, !t), this.options.expanded = !t }, _toggle: function () { var e = this.visible(); this.toggle(e), this.trigger("toggle", { show: e }) } }), a = e.spreadsheet.messages.filterMenu = { sortAscending: "Sort range A to Z", sortDescending: "Sort range Z to A", filterByValue: "Filter by value", filterByCondition: "Filter by condition", apply: "Apply", search: "Search", addToCurrent: "Add to current selection", clear: "Clear", blanks: "(Blanks)", operatorNone: "None", and: "AND", or: "OR", operators: { string: { contains: "Text contains", doesnotcontain: "Text does not contain", startswith: "Text starts with", endswith: "Text ends with", matches: "Text matches", doesnotmatch: "Text does not match" }, date: { eq: "Date is", neq: "Date is not", lt: "Date is before", gt: "Date is after" }, number: { eq: "Is equal to", neq: "Is not equal to", gte: "Is greater than or equal to", gt: "Is greater than", lte: "Is less than or equal to", lt: "Is less than" } } }, e.data.binders.spreadsheetFilterValue = e.data.Binder.extend({ init: function (t, i, o) { e.data.Binder.fn.init.call(this, t, i, o), this._change = n.proxy(this.change, this), n(this.element).on("change", this._change) }, refresh: function () { var e = this.bindings.spreadsheetFilterValue.get(); n(this.element).val(e instanceof Date ? "" : e) }, change: function () { var e = this.element.value; this.bindings.spreadsheetFilterValue.set(e) } }), e.data.binders.widget.spreadsheetFilterValue = e.data.Binder.extend({ init: function (t, i, o) { e.data.Binder.fn.init.call(this, t.element[0], i, o), this.widget = t, this._change = n.proxy(this.change, this), this.widget.first("change", this._change) }, refresh: function () { var e = this.bindings.spreadsheetFilterValue, t = e.get(), i = n(this.widget.element).data("filterType"); this.widget.value("date" === i && t instanceof Date || "number" === i && !isNaN(t) ? t : null) }, change: function () { var e = this.widget.value(), t = this.bindings.spreadsheetFilterValue; t.set(e) } }), l = { filterByValue: "<div class='" + r.detailsSummary + "'>#= messages.filterByValue #</div><div class='" + r.detailsContent + "'><div class='k-textbox k-space-right'><input placeholder='#= messages.search #' data-#=ns#bind='events: { input: filterValues }' /><span class='k-icon k-i-zoom' /></div><div data-#=ns#bind='visible: hasActiveSearch'><input class='k-checkbox' type='checkbox' data-#=ns#bind='checked: appendToSearch' id='_#=guid#' /><label class='k-checkbox-label' for='_#=guid#'>#= messages.addToCurrent #</label></div><div class='" + r.valuesTreeViewWrapper + "'><div data-#=ns#role='treeview' data-#=ns#checkboxes='{ checkChildren: true }' data-#=ns#bind='source: valuesDataSource, events: { check: valuesChange, select: valueSelect }' /></div></div>", filterByCondition: "<div class='" + r.detailsSummary + "'>#= messages.filterByCondition #</div><div class='" + r.detailsContent + '\'><div><select data-#=ns#role="dropdownlist"data-#=ns#bind="value: operator, source: operators, events: { change: operatorChange } "data-value-primitive="false"data-option-label="#=messages.operatorNone#"data-height="auto"data-text-field="text"data-value-field="unique"></select></div><div data-#=ns#bind="visible: isString"><input data-filter-type="string" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" class="k-textbox" /></div><div data-#=ns#bind="visible: isNumber"><input data-filter-type="number" data-#=ns#role="numerictextbox" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" /></div><div data-#=ns#bind="visible: isDate"><input data-filter-type="date" data-#=ns#role="datepicker" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" /></div></div>', menuItem: "<li data-command='#=command#' data-dir='#=dir#'><span class='k-icon k-i-#=iconClass#'></span>#=text#</li>", actionButtons: "<button data-#=ns#bind='click: apply' class='k-button k-primary'>#=messages.apply#</button><button data-#=ns#bind='click: clear' class='k-button'>#=messages.clear#</button>" }, c = e.spreadsheet.FilterMenuViewModel = e.data.ObservableObject.extend({ valuesChange: function (t) { var i = t ? t.sender.dataSource : this.valuesDataSource, n = i.data(), o = n[0].children.data().toJSON(), r = o.filter(function (e) { return "blank" === e.dataType }); r = !!r.length && r[0].checked, o = o.filter(function (e) { return e.checked }).map(function (t) { return "date" === t.dataType ? e.spreadsheet.dateToNumber(t.value) : t.value }), this.appendToSearch && this.valueFilter && this.valueFilter.values.length && (o = o.concat(this.valueFilter.values.toJSON()).sort().filter(function (e, t, i) { return i.lastIndexOf(e) === t })), this.set("valueFilter", { values: o, blanks: r }) }, valueSelect: function (e) { e.preventDefault(); var t = e.sender.dataItem(e.node); t.set("checked", !t.checked) }, hasActiveSearch: !1, appendToSearch: !1, filterValues: function (e) { var o = "string" == typeof e ? e : n(e.target).val().toLowerCase(), r = this.valuesDataSource; this.set("hasActiveSearch", !!o), i(r), t(r, o) }, reset: function () { this.set("customFilter", { logic: "and", criteria: [{ operator: null, value: null }] }), this.set("valueFilter", { values: [] }) }, operatorChange: function (e) { var t = e.sender.dataItem(); this.set("operatorType", t.type), this.set("customFilter.criteria[0].operator", t.value) }, isNone: function () { return void 0 === this.get("operatorType") }, isString: function () { return "string" === this.get("operatorType") }, isNumber: function () { return "number" === this.get("operatorType") }, isDate: function () { return "date" === this.get("operatorType") } }), d = e.spreadsheet.FilterMenuController = { valuesTree: function (e, t) { return [{ text: "All", expanded: !0, checked: !0, items: this.values(e.resize({ top: 1 }), t) }] }, values: function (t, i) { var n = [], o = a, r = t.column(i), s = t.sheet(); return r.forEachCell(function (t, i, r) { var a, l, c; s.isHiddenRow(t) || (a = r.value, l = r.dataType, c = r.text, l = void 0 === a ? "blank" : r.format ? e.spreadsheet.formatting.type(a, r.format) : typeof a, c = null !== a && r.format ? e.spreadsheet.formatting.text(a, r.format) : "blank" == l ? o.blanks : a, "percent" === l && (l = "number"), "date" === l && (a = e.spreadsheet.numberToDate(a)), n.push({ dataType: l, value: a, text: c, checked: !0 })) }), (n = function (e) { var t, i = {}, n = []; for (t = 0; t < e.length; t++)i[e[t].value] ? !i[e[t].value].checked && e[t].checked && (i[e[t].value].checked = !0) : (i[e[t].value] = e[t], n.push(e[t])); return n }(n)).sort(function (e, t) { return e.dataType === t.dataType ? 0 : "blank" === e.dataType || "blank" === t.dataType ? "blank" === e.dataType ? -1 : 1 : "number" === e.dataType || "number" === t.dataType ? "number" === e.dataType ? -1 : 1 : "date" === e.dataType || "date" === t.dataType ? "date" === e.dataType ? -1 : 1 : 0 }), n }, filterType: function (e, t) { var i, n, o, r = e.sheet(), s = this.filterForColumn(t, r); return (s = s && s.filter.toJSON()) && "custom" == s.filter && ((n = s.criteria[0].value) instanceof Date ? i = "date" : "string" == typeof n ? i = "string" : "number" == typeof n && (i = "number")), i || (o = this.values(e.row(1), t)[0], "blank" == (i = o && o.dataType) && (i = null)), i }, filterForColumn: function (e, t) { var i, n = t.filter(); return n && (i = n.columns.filter(function (t) { return t.index === e })[0]), i }, filter: function (e, t) { var i, n, o, r, s = this.filterForColumn(e, t); if (s) return i = s.filter.toJSON(), n = i.filter, delete i.filter, o = { type: n, options: i }, (r = i.criteria) && r.length && (o.operator = r[0].operator), o } }, u = o.extend({ init: function (e, t) { o.call(this, e, t), this.element.addClass(u.classNames.wrapper), this.viewModel = new c({ active: "value", operator: null, operators: function (e) { var t, i, n = a.operators, o = []; for (t in e) if (e.hasOwnProperty(t)) for (i in e[t]) e[t].hasOwnProperty(i) && o.push({ text: n[t][i], value: i, unique: t + "_" + i, type: t }); return o }(this.options.operators), clear: this.clear.bind(this), apply: this.apply.bind(this) }), this._filterInit(), this._popup(), this._sort(), this._filterByCondition(), this._filterByValue(), this._actionButtons() }, options: { name: "FilterMenu", column: 0, range: null, operators: { string: { contains: "Text contains", doesnotcontain: "Text does not contain", startswith: "Text starts with", endswith: "Text ends with", matches: "Text matches", doesnotmatch: "Text does not match" }, date: { eq: "Date is", neq: "Date is not", lt: "Date is before", gt: "Date is after" }, number: { eq: "Is equal to", neq: "Is not equal to", gte: "Is greater than or equal to", gt: "Is greater than", lte: "Is less than or equal to", lt: "Is less than" } } }, events: ["action"], destroy: function () { o.fn.destroy.call(this), this.menu.destroy(), this.valuesTreeView.destroy(), this.popup.destroy() }, openFor: function (e) { this.popup.setOptions({ anchor: e }), this.popup.open() }, close: function () { this.popup.close() }, clear: function () { this.action({ command: "ClearFilterCommand", options: { column: this.options.column } }), this.viewModel.reset(), this.close() }, apply: function () { var e, t, i; this._active(), e = { operatingRange: this.options.range, column: this.options.column }, "value" === this.viewModel.active ? (this.viewModel.valuesChange({ sender: this.valuesTreeView }), ((t = this.viewModel.valueFilter.toJSON()).blanks || t.values && t.values.length) && (e.valueFilter = t)) : "custom" === this.viewModel.active && ((i = this.viewModel.customFilter.toJSON()).criteria.length && null !== i.criteria[0].value && (e.customFilter = i)), (e.valueFilter || e.customFilter) && this.action({ command: "ApplyFilterCommand", options: e }) }, action: function (e) { this.trigger("action", n.extend({}, e)) }, _filterInit: function () { var e, t = this.options.column, i = this.options.range, n = i.sheet(), o = d.filter(t, n); o ? (e = d.filterType(i, t), this.viewModel.set("active", o.type), this.viewModel.set(o.type + "Filter", o.options), "custom" == o.type && (this.viewModel.set("operator", e + "_" + o.operator), this.viewModel.set("operatorType", e))) : this.viewModel.reset() }, _popup: function () { this.popup = this.element.kendoPopup({ copyAnchorStyles: !1 }).data("kendoPopup") }, _sort: function () { var t = e.template(u.templates.menuItem), i = a, o = [{ command: "sort", dir: "asc", text: i.sortAscending, iconClass: "sort-asc" }, { command: "sort", dir: "desc", text: i.sortDescending, iconClass: "sort-desc" }], r = n("<ul />", { html: e.render(t, o) }).appendTo(this.element); this.menu = r.kendoMenu({ orientation: "vertical", select: function (e) { var t = n(e.item).data("dir"), i = this.options.range.resize({ top: 1 }), o = { value: t, sheet: !1, operatingRange: i, column: this.options.column }; i.isSortable() ? this.action({ command: "SortCommand", options: o }) : this.close() }.bind(this) }).data("kendoMenu") }, _appendTemplate: function (t, i, o, r) { var l = e.template(t), c = n("<div class='" + i + "'/>").html(l({ messages: a, guid: e.guid(), ns: e.ns })); return this.element.append(c), o && (o = new s(c, { expanded: r, toggle: this._detailToggle.bind(this) })), e.bind(c, this.viewModel), c }, _detailToggle: function (e) { this.element.find("[data-role=details]").not(e.sender.element).data("kendoDetails").toggle(!e.show) }, _filterByCondition: function () { var e = "custom" === this.viewModel.active; this._appendTemplate(u.templates.filterByCondition, u.classNames.filterByCondition, !0, e) }, _filterByValue: function () { var t, i = "value" === this.viewModel.active, n = this._appendTemplate(u.templates.filterByValue, u.classNames.filterByValue, !0, i); this.valuesTreeView = n.find("[data-role=treeview]").data("kendoTreeView"), t = d.valuesTree(this.options.range, this.options.column), this.viewModel.set("valuesDataSource", new e.data.HierarchicalDataSource({ data: t })) }, _actionButtons: function () { this._appendTemplate(u.templates.actionButtons, u.classNames.actionButtons, !1) }, _active: function () { var e = this.element.find("[data-role=details]").filter(function (e, t) { return n(t).data("kendoDetails").visible() }); e.hasClass(u.classNames.filterByValue) ? this.viewModel.set("active", "value") : e.hasClass(u.classNames.filterByCondition) && this.viewModel.set("active", "custom") } }), e.spreadsheet.FilterMenu = u, n.extend(!0, u, { classNames: r, templates: l })) }(window.kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/editor.min", ["kendo.core.min"], function () { !function (e) { if (!(e.support.browser.msie && e.support.browser.version < 9)) { var t = e.Observable.extend({ init: function (t) { e.Observable.fn.init.call(this), this.view = t, this.formulaBar = t.formulaBar, this._active = !1, this.barInput = t.formulaBar.formulaInput, this.cellInput = t.formulaInput, this.barInput.syncWith(this.cellInput), this.cellInput.syncWith(this.barInput), this.barInput.bind("keyup", this._triggerUpdate.bind(this)), this.cellInput.bind("keyup", this._triggerUpdate.bind(this)), this.barInput.bind("blur", this._blur.bind(this)), this.cellInput.bind("blur", this._blur.bind(this)) }, events: ["activate", "deactivate", "change", "update"], _blur: function () { this.deactivate() }, _triggerUpdate: function () { this.trigger("update", { value: this.value() }) }, activeEditor: function () { var t = null, i = e._activeElement(); return this.barElement()[0] === i ? t = this.barInput : this.cellElement()[0] === i && (t = this.cellInput), t }, activate: function (e) { return this._active = !0, this._rect = e.rect, this.cellInput.position(e.rect), this.cellInput.resize(e.rect), this.cellInput.tooltip(e.tooltip), this.cellInput.activeCell = this.barInput.activeCell = e.range.topLeft, this.trigger("activate"), this }, deactivate: function () { var e = this.cellInput; this._active && (e.value() != this._value && this.trigger("change", { value: e.value() }), this._active = !1, this._rect = null, e.hide(), this.trigger("deactivate")) }, enable: function (e) { this.barInput.enable(e), this.cellInput.enable(e) }, barElement: function () { return this.barInput.element }, cellElement: function () { return this.cellInput.element }, focus: function (e) { "cell" === (e = e || "cell") ? (this.cellInput.element.focus(), this.cellInput.end()) : this.barInput.element.focus() }, isActive: function () { return this._active }, isFiltered: function () { return this.barInput.popup.visible() || this.cellInput.popup.visible() }, canInsertRef: function (e) { var t = this.activeEditor(); return t && t.canInsertRef(e) }, highlightedRefs: function () { var e = this.activeEditor(), t = []; return e && (t = e.highlightedRefs()), t }, scale: function () { this.cellInput.scale() }, toggleTooltip: function (e) { this.cellInput.toggleTooltip(function (e, t) { return e && (e.top !== t.top || e.left !== t.left) }(this._rect, e)) }, value: function (e) { return void 0 === e ? this.barInput.value() : (null === e && (e = ""), this._value = e, this.barInput.value(e), void this.cellInput.value(e)) }, insertNewline: function () { this.activeEditor().insertNewline(), this.scale() }, select: function () { this.activeEditor().select() } }); e.spreadsheet.SheetEditor = t } }(kendo) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/autofill.min", ["spreadsheet/runtime.min", "spreadsheet/range.min"], function () { "use strict"; function e(e) { var t, i, n, o, r, s = e.length, a = (s + 1) / 2, l = e.reduce(function (e, t) { return e + t }, 0) / s, c = 0, d = 0; for (t = 0; t < s; t++)i = t + 1 - a, n = e[t] - l, c += i * n, d += i * i; return d ? (r = l - (o = c / d) * a, function (e) { return r + o * (e + 1) }) : function (t) { return e[t % e.length] } } function t(t) { function o(e) { return e.map(function (e) { return e.number }) } var r = [], s = t.map(function (e) { return e.formula || e.value }); return n(s, function (n, a, l, c) { var d, u, h, f, p; for ("number" == l ? (1 == (u = o(c)).length && (n > 0 || a < s.length || "date" == i(u[0], t[n].format)) && u.push(u[0] + 1), d = e(u)) : "string" == l || "formula" == l || "boolean" == l ? d = function (e, t) { return s[t] } : Array.isArray(l) ? 1 == c.length ? d = function (e) { return l[(c[0].number + e) % l.length] } : (h = function (e) { var t, i = e[1] - e[0]; for (t = 2; t < e.length; ++t)if (e[t] - e[t - 1] != i) return null; return i }(o(c)), d = null == h ? function (e) { return c[e % c.length].value } : function (e) { var t = c[0].number + h * e; return l[t % l.length] }) : "null" != l ? (1 == (u = o(c)).length && u.push(u[0] + 1), u = e(u), d = function (e, t) { return s[t].replace(/^(.*\D)\d+/, "$1" + u(e, t)) }) : d = function () { return null }, f = { f: d, begin: n, end: a, len: a - n }, p = n; p < a; ++p)r[p] = f }), function (e, i) { var n = r[i], o = e / s.length | 0, a = e % s.length, l = o * n.len + a - n.begin, d = n.f(l, i), u = function (e) { var t = {}; return Object.keys(e || {}).forEach(function (i) { t[i] = e[i] }), t }(t[i]); return delete u.enable, d instanceof c ? u.formula = d : u.value = d, u } } function i(e, t) { if (null != t) return s.formatting.type(e, t) } function n(e, t) { var i, n, r = null, s = 0, a = []; for (n = 0; n < e.length; ++n)i = o(e[n]), a.push(i), null != r && i.type !== r.type && (t(s, n, r.type, a.slice(s, n)), s = n), r = i; t(s, n, r.type, a.slice(s, n)) } function o(e) { var t, i; if ("number" == typeof e) return { type: "number", number: e }; if ("string" == typeof e) return (t = function (e) { var t, i, n, o = e.toLowerCase(), r = function () { var e = kendo.culture(); return [e.calendars.standard.days.namesAbbr, e.calendars.standard.days.names, e.calendars.standard.months.namesAbbr, e.calendars.standard.months.names] }(); for (t = 0; t < r.length; ++t)for (i = r[t], n = i.length; --n >= 0;)if (i[n].toLowerCase() == o) return { type: i, number: n, value: e } }(e)) ? t : (i = /^(.*\D)(\d+)/.exec(e)) ? { type: e = e.replace(/^(.*\D)\d+/, "$1-######"), match: i, number: parseFloat(i[2]) } : { type: "string" }; if ("boolean" == typeof e) return { type: "boolean" }; if (null == e) return { type: "null" }; if (e instanceof c) return { type: "formula" }; throw window.console.error(e), Error("Cannot fill data") } function r(e) { var t, i, n = e.length, o = e[0].length, r = []; for (t = 0; t < o; ++t)for (r[t] = [], i = 0; i < n; ++i)r[t][i] = e[i][t]; return r } var s, a, l, c, d, u; kendo.support.browser.msie && kendo.support.browser.version < 9 || (s = kendo.spreadsheet, a = s.Range, l = s.calc.runtime, c = l.Formula, d = "incompatibleRanges", "noFillDirection", u = a.FillError = function (e) { this.code = e }, a.prototype._previewFillFrom = function (e, i) { var n, o, s, a, l, c, h, f, p, m, g, v, _, b, w = this, y = w._sheet; if ("string" == typeof e && (e = y.range(e)), n = e._ref.toRangeRef(), o = w._ref.toRangeRef(), n.intersects(o)) { if (n.eq(o)) return null; if (o = o.clone(), n.topLeft.eq(o.topLeft)) if (n.width() == o.width()) o.topLeft.row += n.height(), i = 0; else { if (n.height() != o.height()) throw new u(d); o.topLeft.col += n.width(), i = 1 } else { if (!n.bottomRight.eq(o.bottomRight)) throw new u(d); if (n.width() == o.width()) o.bottomRight.row -= n.height(), i = 2; else { if (n.height() != o.height()) throw new u(d); o.bottomRight.col -= n.width(), i = 3 } } return y.range(o)._previewFillFrom(e, i) } if (null == i) if (n.topLeft.col == o.topLeft.col) i = n.topLeft.row < o.topLeft.row ? 0 : 2; else { if (n.topLeft.row != o.topLeft.row) throw new u("noFillDirection"); i = n.topLeft.col < o.topLeft.col ? 1 : 3 } if (a = 2 & i, (s = 1 & i) && n.height() != o.height() || !s && n.width() != o.width()) throw new u(d); for (l = e._properties(), s ? c = o.width() : (l = r(l), c = o.height()), h = Array(l.length), f = 0; f < l.length; ++f)for (p = l[f], m = t(p), g = h[f] = Array(c), v = 0; v < c; ++v)_ = a ? -v - 1 : p.length + v, b = a ? p.length - v % p.length - 1 : v % p.length, g[a ? c - v - 1 : v] = m(_, b); return s || (h = r(h)), { props: h, direction: i, dest: w } }, a.prototype.fillFrom = function (e, t) { var i = this._previewFillFrom(e, t); return i.dest._properties(i.props), i.dest }) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/nameeditor.min", ["kendo.core.min"], function () { e = window.kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.jQuery, i = { input: "k-spreadsheet-name-editor", list: "k-spreadsheet-name-list" }, n = e.ui.Widget.extend({ init: function (n, o) { var r, s, a; e.ui.Widget.call(this, n, o), n.addClass(i.input), r = o.messages.nameBox || "Name Box", s = new e.data.DataSource({ transport: { read: function (t) { var i = []; this._workbook.forEachName(function (t) { !t.hidden && t.value instanceof e.spreadsheet.Ref && i.push({ name: t.name }) }), t.success(i) }.bind(this), cache: !1 } }), a = t("<input />").attr("title", r).attr("aria-label", r), this.combo = a.appendTo(n).kendoComboBox({ clearButton: !1, dataTextField: "name", dataValueField: "name", template: "#:data.name#<a class='k-button-delete' href='\\#'><span class='k-icon k-i-close'></span></a>", dataSource: s, autoBind: !1, ignoreCase: !0, change: this._on_listChange.bind(this), noDataTemplate: "<div></div>", open: function () { s.read() } }).getKendoComboBox(), this.combo.input.on("keydown", this._on_keyDown.bind(this)).on("focus", this._on_focus.bind(this)), this.combo.popup.element.addClass("k-spreadsheet-names-popup").on("mousemove", function (e) { e.stopPropagation() }).on("click", ".k-button-delete", function (e) { e.preventDefault(), e.stopPropagation(); var i = t(e.target).closest(".k-item"); i = this.combo.dataItem(i), this._deleteItem(i.name) }.bind(this)) }, value: function (e) { return void 0 === e ? this.combo.value() : void this.combo.value(e) }, _deleteItem: function (e) { this.trigger("delete", { name: e }) }, _on_keyDown: function (e) { switch (e.keyCode) { case 27: this.combo.value(this._prevValue), this.trigger("cancel"); break; case 13: this.trigger("enter") } }, _on_focus: function () { this._prevValue = this.combo.value() }, _on_listChange: function () { var e = this.combo.value(); e && this.trigger("select", { name: e }) } }), e.spreadsheet.NameEditor = n); var e, t, i, n }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("spreadsheet/print.min", ["kendo.pdf.min", "spreadsheet/sheet.min", "spreadsheet/range.min", "spreadsheet/references.min", "spreadsheet/numformat.min", "util/text-metrics.min"], function () { "use strict"; function e(e, t) { var i = 0, n = [], o = .2 * t, r = t; return e.forEach(function (e) { t && i + e > r && (r - i < o && (i = t * Math.ceil(i / t)), r += t * Math.ceil(e / t)), n.push(i), i += e }), n.push(i), n } function t(t, i, s) { var a, l, c, d, u, f, p, m, g, v, _, b, w, y, k = t._grid; return i = k.normalize(i), a = [], l = [], c = [], d = t._getMergedCells(i), u = -1, f = -1, t.forEach(i, function (e, n, o) { var r, p, m, g = e - i.topLeft.row, v = n - i.topLeft.col, _ = t.rowHeight(e), b = t.columnWidth(n); v || l.push(_), g || c.push(b), !t.isHiddenColumn(n) && !t.isHiddenRow(e) && _ && b && (r = s.forScreen || function (e) { return null != e.value || e.merged || null != e.background || null != e.borderTop || null != e.borderRight || null != e.borderBottom || null != e.borderLeft || null != e.validation && !e.validation.value }(o), (s.emptyCells || r) && (p = new h(e, n).print(), d.secondary[p] || (r ? (u = Math.max(u, g), f = Math.max(f, v)) : o.empty = !0, o.row = g, o.col = v, (m = d.primary[p]) ? (delete d.primary[p], o.merged = !0, o.rowspan = m.height(), o.colspan = m.width(), s.forScreen && (o.width = t._columns.sum(m.topLeft.col, m.bottomRight.col), o.height = t._rows.sum(m.topLeft.row, m.bottomRight.row))) : (o.rowspan = 1, o.colspan = 1), a.push(o)))) }), l = l.slice(0, u + 1), c = c.slice(0, f + 1), p = s.pageWidth, m = s.pageHeight, g = 1, s.fitWidth && ((v = c.reduce(n, 0)) > p && (p /= g = p / v, m /= g)), _ = e(l, m || 0), b = e(c, p || 0), w = 0, y = 0, a = a.filter(function (e) { return !(e.empty && (e.row > u || e.col > f) || (e.left = b[e.col], e.top = _[e.row], e.merged ? s.forScreen ? (e.right = e.left + e.width, e.bottom = e.top + e.height) : (e.right = o(b, e.col + e.colspan), e.bottom = o(_, e.row + e.rowspan), e.width = e.right - e.left, e.height = e.bottom - e.top) : (e.width = c[e.col], e.height = l[e.row], e.bottom = e.top + e.height, e.right = e.left + e.width), w = Math.max(w, e.right), y = Math.max(y, e.bottom), 0)) }), Object.keys(d.primary).forEach(function (e) { var n = d.primary[e]; t.forEach(n.topLeft.toRangeRef(), function (e, o, r) { var s = e - i.topLeft.row, l = o - i.topLeft.col; r.merged = !0, r.colspan = n.height(), r.rowspan = n.width(), r.top = s < 0 ? -t._rows.sum(e, e - s - 1) : _[s], r.left = l < 0 ? -t._columns.sum(o, o - l - 1) : b[l], r.height = t._rows.sum(n.topLeft.row, n.bottomRight.row), r.width = t._columns.sum(n.topLeft.col, n.bottomRight.col), r.height > 0 && r.width > 0 && (r.right = r.left + r.width, r.bottom = r.top + r.height, a.push(r)) }) }), { width: w, height: y, cells: a.sort(r), scale: g, xCoords: b, yCoords: _ } } function i(e, t) { return e.size === t.size && e.color === t.color } function n(e, t) { return e + t } function o(e, t) { return t < e.length ? e[t] : e[e.length - 1] } function r(e, t) { return e.top < t.top ? -1 : e.top == t.top ? e.left < t.left ? -1 : e.left == t.left ? 0 : 1 : 1 } function s(e, t, i) { function n(n, o) { var r, s, l, h, p, v, _ = o * c, b = _ + c, w = n * u, y = w + u, k = 0, x = 0, C = e.cells.filter(function (e) { return !(e.right <= _ || e.left >= b || e.bottom <= w || e.top >= y || (k = Math.max(e.bottom, k), x = Math.max(e.right, x), 0)) }); C.length > 0 && (r = new f.Group, t.append(r), r.clip(f.Path.fromRect(new m.Rect([0, 0], [i.pageWidth, i.pageHeight]))), s = new f.Group, r.append(s), l = m.Matrix.scale(e.scale, e.scale).multiplyCopy(m.Matrix.translate(-_, -w)), (i.hCenter || i.vCenter) && (l = l.multiplyCopy(m.Matrix.translate(i.hCenter ? (b - x) / 2 : 0, i.vCenter ? (y - k) / 2 : 0))), s.transform(l), i.guidelines && (h = null, e.xCoords.forEach(function (e) { (e = Math.min(e, x)) !== h && e >= _ && e <= b && (h = e, s.append((new f.Path).moveTo(e, w).lineTo(e, k).close().stroke("#aaa", g))) }), h = null, e.yCoords.forEach(function (e) { (e = Math.min(e, k)) !== h && e >= w && e <= y && (h = e, s.append((new f.Path).moveTo(_, e).lineTo(x, e).close().stroke("#aaa", g))) })), p = d(), C.forEach(function (e) { a(e, s, i), p.add(e) }), v = new f.Group, p.vert.forEach(function (e) { e.forEach(function (e) { e.rendered || (e.rendered = !0, v.append((new f.Path).moveTo(e.x, e.top).lineTo(e.x, e.bottom).close().stroke(e.color, e.size))) }) }), p.horiz.forEach(function (e) { e.forEach(function (e) { e.rendered || (e.rendered = !0, v.append((new f.Path).moveTo(e.left, e.y).lineTo(e.right, e.y).close().stroke(e.color, e.size))) }) }), s.append(v)) } var o, r, s = Math.ceil(e.width / i.pageWidth), l = Math.ceil(e.height / i.pageHeight), c = i.pageWidth / e.scale, u = i.pageHeight / e.scale; for (o = 0; o < s; ++o)for (r = 0; r < l; ++r)n(r, o) } function a(e, t, i) { var n, o, r, s, a, c, d = new f.Group; if (t.append(d), n = new m.Rect([e.left, e.top], [e.width, e.height]), (e.background || e.merged) && (o = n, i.guidelines && ((o = n.clone()).origin.x += g / 2, o.origin.y += g / 2, o.size.width -= g, o.size.height -= g), d.append(new f.Rect(o).fill(e.background || "#fff").stroke(null))), null != (r = e.value)) { if (s = "number" == typeof r ? "number" : null, (a = new f.Group).clip(f.Path.fromRect(n)), d.append(a), e.format ? (c = p.textAndColor(r, e.format), r = c.text, c.type && (s = c.type)) : r += "", !e.textAlign) switch (s) { case "number": case "date": case "percent": e.textAlign = "right"; break; case "boolean": e.textAlign = "center" }l(r, c && c.color || e.color || "#000", e, a) } } function l(e, t, i, n) { var o, r; switch (v || ((v = document.createElement("div")).style.position = "absolute", v.style.left = "-10000px", v.style.top = "-10000px", v.style.overflow = "hidden", v.style.boxSizing = "border-box", v.style.padding = "2px 4px", v.style.lineHeight = "normal", document.body.appendChild(v)), v.style.color = t, v.style.font = function (e) { var t = []; return e.italic && t.push("italic"), e.bold && t.push("bold"), t.push((e.fontSize || 12) + "px"), t.push(e.fontFamily || "Arial"), t.join(" ") }(i), v.style.width = i.width + "px", v.style.textAlign = i.textAlign || "left", v.style.textDecoration = i.underline ? "underline" : "none", i.wrap ? (v.style.whiteSpace = "pre-wrap", v.style.overflowWrap = v.style.wordWrap = "break-word") : (v.style.whiteSpace = "pre", v.style.overflowWrap = v.style.wordWrap = "normal"), v.firstChild && v.removeChild(v.firstChild), v.appendChild(document.createTextNode(e)), o = 0, i.verticalAlign) { case "center": o = i.height - v.offsetHeight >> 1; break; case void 0: case null: case "bottom": o = i.height - v.offsetHeight }o < 0 && (o = 0), (r = kendo.drawing.drawDOM.drawText(v)).transform(m.Matrix.translate(1e4 + i.left, 1e4 + i.top + o)), n.append(r) } function c(e, i, n, o) { var r, a, l, c; null == n && null == o && (o = i, n = {}, i = u.SHEETREF), null == o && (o = n, i instanceof u.Range || i instanceof u.Ref || "string" == typeof i ? n = {} : (n = i, i = u.SHEETREF)), n = kendo.jQuery.extend({ paperSize: "A4", landscape: !0, margin: "1cm", guidelines: !0, emptyCells: !0, fitWidth: !1, center: !1 }, n), r = new f.Group, a = kendo.pdf.getPaperOptions(n), r.options.set("pdf", { author: n.author, creator: n.creator, date: n.date, keywords: n.keywords, margin: a.margin, multiPage: !0, paperSize: a.paperSize, subject: n.subject, title: n.title }), l = a.paperSize[0], c = a.paperSize[1], a.margin && (l -= a.margin.left + a.margin.right + 1, c -= a.margin.top + a.margin.bottom + 1), n.pageWidth = l, n.pageHeight = c, s(t(e, e._ref(i), n), r, n), o(r) } function d() { function e(e, t, n, r, s, a) { var l = o[t] || (o[t] = []), c = e > 0 && l[e - 1]; c && i(c, n) ? (l[e] = c, c.bottom = a) : l[e] = { size: n.size, color: n.color, x: r, top: s, bottom: a } } function t(e, t, o, r, s, a) { var l = n[e] || (n[e] = []), c = t > 0 && l[t - 1]; c && i(c, o) ? (l[t] = c, c.right = a) : l[t] = { size: o.size, color: o.color, y: r, left: s, right: a } } var n = [], o = []; return { add: function (i) { i.borderLeft && e(i.row, i.col, i.borderLeft, i.left, i.top, i.bottom), i.borderRight && e(i.row, i.col + i.colspan, i.borderRight, i.right, i.top, i.bottom), i.borderTop && t(i.row, i.col, i.borderTop, i.top, i.left, i.right), i.borderBottom && t(i.row + i.rowspan, i.col, i.borderBottom, i.bottom, i.left, i.right) }, horiz: n, vert: o } } var u, h, f, p, m, g, v; kendo.support.browser.msie && kendo.support.browser.version < 9 || (u = kendo.spreadsheet, h = u.CellRef, f = kendo.drawing, p = u.formatting, m = kendo.geometry, g = .8, u.Sheet.prototype.draw = function (e, t, i) { var n = this; n._workbook ? n.recalc(n._workbook._context, function () { c(n, e, t, i) }) : c(n, e, t, i) }, u.draw = { Borders: d, doLayout: t, drawLayout: s }) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.spreadsheet.min", ["util/undoredostack.min", "util/text-metrics.min", "util/parse-xml.min", "kendo.excel.min", "kendo.progressbar.min", "kendo.pdf.min", "spreadsheet/commands.min", "spreadsheet/formulabar.min", "spreadsheet/formulainput.min", "spreadsheet/eventlistener.min", "spreadsheet/rangelist.min", "spreadsheet/propertybag.min", "spreadsheet/references.min", "spreadsheet/navigator.min", "spreadsheet/axismanager.min", "spreadsheet/clipboard.min", "spreadsheet/range.min", "spreadsheet/sheet.min", "spreadsheet/sheetsbar.min", "spreadsheet/excel-reader.min", "spreadsheet/workbook.min", "spreadsheet/formulacontext.min", "spreadsheet/controller.min", "spreadsheet/view.min", "spreadsheet/customeditors.min", "spreadsheet/grid.min", "spreadsheet/axis.min", "spreadsheet/filter.min", "spreadsheet/sorter.min", "spreadsheet/runtime.min", "spreadsheet/calc.min", "spreadsheet/numformat.min", "spreadsheet/runtime.functions.min", "spreadsheet/runtime.functions.2.min", "spreadsheet/toolbar.min", "spreadsheet/dialogs.min", "spreadsheet/sheetbinder.min", "spreadsheet/filtermenu.min", "spreadsheet/editor.min", "spreadsheet/autofill.min", "spreadsheet/nameeditor.min", "spreadsheet/print.min"], function () { return e = window.kendo, e.support.browser.msie && e.support.browser.version < 9 || (t = e.jQuery, i = e.ui.Widget, n = e.spreadsheet.Workbook, o = e.spreadsheet.Controller, r = e.spreadsheet.View, s = ".kendoSpreadsheet", a = { recalc: !0, selection: !0, activeCell: !0, layout: !0, sheetSelection: !0, resize: !0, editorChange: !1, editorClose: !1 }, l = { wrapper: "k-widget k-spreadsheet" }, c = e.ui.Widget.extend({ init: function (e, a) { i.fn.init.call(this, e, a), this.element.addClass(c.classNames.wrapper), this._view = new r(this.element, { messages: this.options.messages.view, toolbar: this.options.toolbar, sheetsbar: this.options.sheetsbar }), this._workbook = new n(this.options, this._view), this._controller = new o(this._view, this._workbook), this._autoRefresh = !0, this._bindWorkbookEvents(), this._view.workbook(this._workbook), this.refresh(), this._resizeHandler = function () { this.resize() }.bind(this), t(window).on("resize" + s, this._resizeHandler) }, _resize: function () { this.refresh({ layout: !0 }) }, _workbookChange: function (t) { if (this._autoRefresh && this.refresh(t), t.recalc && t.ref) { var i = t.range || new e.spreadsheet.Range(t.ref, this.activeSheet()); this.trigger("change", { range: i }) } }, _workbookCut: function (e) { this.trigger("cut", e) }, _workbookCopy: function (e) { this.trigger("copy", e) }, _workbookPaste: function (e) { this.trigger("paste", e) }, activeSheet: function (e) { return this._workbook.activeSheet(e) }, moveSheetToIndex: function (e, t) { return this._workbook.moveSheetToIndex(e, t) }, insertSheet: function (e) { return this._workbook.insertSheet(e) }, sheets: function () { return this._workbook.sheets() }, removeSheet: function (e) { return this._workbook.removeSheet(e) }, sheetByName: function (e) { return this._workbook.sheetByName(e) }, sheetIndex: function (e) { return this._workbook.sheetIndex(e) }, sheetByIndex: function (e) { return this._workbook.sheetByIndex(e) }, renameSheet: function (e, t) { return this._workbook.renameSheet(e, t) }, refresh: function (e) { return e || (e = a), e.editorClose || (this._view.sheet(this._workbook.activeSheet()), this._controller.sheet(this._workbook.activeSheet()), this._workbook.refresh(e)), e.editorChange || (this._view.refresh(e), this._controller.refresh(), this._view.render(), this.trigger("render")), this }, openDialog: function (e, t) { return this._view.openDialog(e, t) }, autoRefresh: function (e) { return void 0 !== e ? (this._autoRefresh = e, !0 === e && this.refresh(), this) : this._autoRefresh }, toJSON: function () { return this._workbook.toJSON() }, fromJSON: function (e) { e.sheets ? (this._workbook.destroy(), this._workbook = new n(t.extend({}, this.options, e)), this._bindWorkbookEvents(), this._view.workbook(this._workbook), this._controller.workbook(this._workbook), this.activeSheet(this.activeSheet())) : this.refresh() }, fromFile: function (e, t) { return this._workbook.fromFile(e, t) }, saveAsPDF: function (e) { this._workbook.saveAsPDF(t.extend({}, this.options.pdf, e, { workbook: this._workbook })) }, saveAsExcel: function (e) { this._workbook.saveAsExcel(e) }, draw: function (e, t) { this._workbook.draw(e, t) }, _workbookExcelExport: function (e) { this.trigger("excelExport", e) && e.preventDefault() }, _workbookExcelImport: function (e) { this.trigger("excelImport", e) ? e.preventDefault() : this._initProgress(e.promise) }, _initProgress: function (i) { var n = t("<div class='k-loading-mask' style='width: 100%; height: 100%; top: 0;'><div class='k-loading-color'/></div>").appendTo(this.element), o = t("<div class='k-loading-progress'>").appendTo(n).kendoProgressBar({ type: "chunk", chunkCount: 10, min: 0, max: 1, value: 0 }).data("kendoProgressBar"); i.progress(function (e) { o.value(e.progress) }).always(function () { e.destroy(n), n.remove() }) }, _workbookPdfExport: function (e) { this.trigger("pdfExport", e) && e.preventDefault() }, _workbookInsertSheet: function (e) { this.trigger("insertSheet", e) && e.preventDefault() }, _workbookRemoveSheet: function (e) { this.trigger("removeSheet", e) && e.preventDefault() }, _workbookSelectSheet: function (e) { this.trigger("selectSheet", e) && e.preventDefault() }, _workbookRenameSheet: function (e) { this.trigger("renameSheet", e) && e.preventDefault() }, _workbookInsertRow: function (e) { this.trigger("insertRow", e) && e.preventDefault() }, _workbookInsertColumn: function (e) { this.trigger("insertColumn", e) && e.preventDefault() }, _workbookDeleteRow: function (e) { this.trigger("deleteRow", e) && e.preventDefault() }, _workbookDeleteColumn: function (e) { this.trigger("deleteColumn", e) && e.preventDefault() }, _workbookHideRow: function (e) { this.trigger("hideRow", e) && e.preventDefault() }, _workbookHideColumn: function (e) { this.trigger("hideColumn", e) && e.preventDefault() }, _workbookUnhideRow: function (e) { this.trigger("unhideRow", e) && e.preventDefault() }, _workbookUnhideColumn: function (e) { this.trigger("unhideColumn", e) && e.preventDefault() }, _workbookSelect: function (e) { this.trigger("select", e) }, _workbookChangeFormat: function (e) { this.trigger("changeFormat", e) }, _bindWorkbookEvents: function () { this._workbook.bind("cut", this._workbookCut.bind(this)), this._workbook.bind("copy", this._workbookCopy.bind(this)), this._workbook.bind("paste", this._workbookPaste.bind(this)), this._workbook.bind("change", this._workbookChange.bind(this)), this._workbook.bind("excelExport", this._workbookExcelExport.bind(this)), this._workbook.bind("excelImport", this._workbookExcelImport.bind(this)), this._workbook.bind("pdfExport", this._workbookPdfExport.bind(this)), this._workbook.bind("insertSheet", this._workbookInsertSheet.bind(this)), this._workbook.bind("removeSheet", this._workbookRemoveSheet.bind(this)), this._workbook.bind("selectSheet", this._workbookSelectSheet.bind(this)), this._workbook.bind("renameSheet", this._workbookRenameSheet.bind(this)), this._workbook.bind("insertRow", this._workbookInsertRow.bind(this)), this._workbook.bind("insertColumn", this._workbookInsertColumn.bind(this)), this._workbook.bind("deleteRow", this._workbookDeleteRow.bind(this)), this._workbook.bind("deleteColumn", this._workbookDeleteColumn.bind(this)), this._workbook.bind("hideRow", this._workbookHideRow.bind(this)), this._workbook.bind("hideColumn", this._workbookHideColumn.bind(this)), this._workbook.bind("unhideRow", this._workbookUnhideRow.bind(this)), this._workbook.bind("unhideColumn", this._workbookUnhideColumn.bind(this)), this._workbook.bind("select", this._workbookSelect.bind(this)), this._workbook.bind("changeFormat", this._workbookChangeFormat.bind(this)) }, destroy: function () { e.ui.Widget.fn.destroy.call(this), this._workbook.destroy(), this._controller.destroy(), this._view.destroy(), this._resizeHandler && t(window).off("resize" + s, this._resizeHandler) }, options: { name: "Spreadsheet", toolbar: !0, sheetsbar: !0, rows: 200, columns: 50, rowHeight: 20, columnWidth: 64, headerHeight: 20, headerWidth: 32, excel: { proxyURL: "", fileName: "Workbook.xlsx" }, messages: {}, pdf: { area: "workbook", fileName: "Workbook.pdf", proxyURL: "", paperSize: "a4", landscape: !0, margin: null, title: null, author: null, subject: null, keywords: null, creator: "Kendo UI PDF Generator v." + e.version, date: null }, defaultCellStyle: { fontFamily: "Arial", fontSize: "12" } }, defineName: function (e, t, i) { return this._workbook.defineName(e, t, i) }, undefineName: function (e) { return this._workbook.undefineName(e) }, nameValue: function (e) { return this._workbook.nameValue(e) }, forEachName: function (e) { return this._workbook.forEachName(e) }, cellContextMenu: function () { return this._view.cellContextMenu }, rowHeaderContextMenu: function () { return this._view.rowHeaderContextMenu }, colHeaderContextMenu: function () { return this._view.colHeaderContextMenu }, events: ["cut", "copy", "paste", "pdfExport", "excelExport", "excelImport", "change", "render", "removeSheet", "selectSheet", "renameSheet", "insertRow", "insertColumn", "deleteRow", "insertSheet", "deleteColumn", "hideRow", "hideColumn", "unhideRow", "unhideColumn", "select", "changeFormat"] }), e.spreadsheet.ALL_REASONS = a, e.ui.plugin(c), t.extend(!0, c, { classNames: l })), window.kendo; var e, t, i, n, o, r, s, a, l, c }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.pivot.configurator.min", ["kendo.dom.min"], function () { return function (e, t) { function i(e) { return { name: e.uniqueName, type: e.type } } function n(t) { var i = e(t).closest(".k-pivot-setting"); return i.length ? i.data("kendoPivotSettingTarget") : null } function o(e, t, i) { return { hierarchyUniqueName: e, uniqueName: t, caption: t, measure: t, name: t, type: i, kpi: !0 } } function r(e) { var t = e.name; return [o(t, e.value, "value"), o(t, e.goal, "goal"), o(t, e.status, "status"), o(t, e.trend, "trend")] } var s = window.kendo, a = s.ui, l = a.Widget, c = ".kendoPivotConfigurator", d = s.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'), u = l.extend({ init: function (e, t) { l.fn.init.call(this, e, t), this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"), this._dataSource(), this._layout(), this.refresh(), s.notify(this) }, events: [], options: { name: "PivotConfigurator", filterable: !1, sortable: !1, messages: { measures: "Drop Data Fields Here", columns: "Drop Column Fields Here", rows: "Drop Rows Fields Here", measuresLabel: "Measures", columnsLabel: "Columns", rowsLabel: "Rows", fieldsLabel: "Fields" } }, _dataSource: function () { var t = this; t.dataSource && t._refreshHandler ? t.dataSource.unbind("change", t._refreshHandler).unbind("error", t._errorHandler).unbind("progress", t._progressHandler) : (t._errorHandler = e.proxy(t._error, t), t._refreshHandler = e.proxy(t.refresh, t), t._progressHandler = e.proxy(t._requestStart, t)), t.dataSource = s.data.PivotDataSource.create(t.options.dataSource), t.dataSource.bind("change", t._refreshHandler).bind("error", t._errorHandler).bind("progress", t._progressHandler) }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.measures && this.measures.setDataSource(e), this.rows && this.rows.setDataSource(e), this.columns && this.columns.setDataSource(e), this.refresh() }, _treeViewDataSource: function () { var t = this; return s.data.HierarchicalDataSource.create({ schema: { model: { id: "uniqueName", hasChildren: function (e) { return !("hierarchyUniqueName" in e || "aggregator" in e) } } }, transport: { read: function (i) { var n, o; e.isEmptyObject(i.data) ? t.dataSource.schemaDimensions().done(function (e) { t.dataSource.cubeBuilder || function (e) { for (var t, i = 0, n = e.length; i < n; i++)if (2 == e[i].type) { t = !0; break } t && e.splice(i + 1, 0, { caption: "KPIs", defaultHierarchy: "[KPIs]", name: "KPIs", uniqueName: "[KPIs]" }) }(e), i.success(e) }).fail(i.error) : ("[KPIs]" === (n = t.treeView.dataSource.get(i.data.uniqueName)).uniqueName ? (o = !0, t.dataSource.schemaKPIs().done(function (e) { i.success(function (e) { for (var t = 0, i = e.length; t < i; t++)e[t].uniqueName = e[t].name, e[t].type = "kpi"; return e }(e)) }).fail(i.error)) : "kpi" == n.type && (o = !0, i.success(r(n))), o || (2 == n.type ? t.dataSource.schemaMeasures() : n.dimensionUniqueName ? t.dataSource.schemaLevels(i.data.uniqueName) : t.dataSource.schemaHierarchies(i.data.uniqueName)).done(i.success).fail(i.error)) } } }) }, _progress: function (e) { s.ui.progress(this.element, e) }, _error: function () { this._progress(!1) }, _requestStart: function () { this._progress(!0) }, _layout: function () { this.form = e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element), this._fields(), this._targets() }, _fields: function () { var t = e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>' + this.options.messages.fieldsLabel + "</p></div>").appendTo(this.form); this.treeView = e("<div/>").appendTo(t).kendoTreeView({ template: '# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-arrows-dimensions"></span># } ##: item.caption || item.name #', dataTextField: "caption", dragAndDrop: !0, autoBind: !1, dataSource: this._treeViewDataSource(), dragstart: function (e) { var t = this.dataItem(e.sourceNode); (t.hasChildren || t.aggregator || t.measure) && 2 != t.type && "[KPIs]" !== t.uniqueName || e.preventDefault() }, drag: function (e) { var t = "k-i-cancel", i = n(e.dropTarget); i && i.validate(this.dataItem(e.sourceNode)) && (t = "k-i-plus"), e.setStatusClass(t) }, drop: function (e) { var t, o, s, a, l, c; if (e.preventDefault(), t = n(e.dropTarget), o = this.dataItem(e.sourceNode), t && t.validate(o)) { if (c = o.defaultHierarchy || o.uniqueName, "kpi" === o.type) for (l = r(o), a = l.length, c = [], s = 0; s < a; s++)c.push(i(l[s])); else o.kpi && (c = [i(o)]); t.add(c) } } }).data("kendoTreeView") }, _createTarget: function (t, i) { var n = '<li class="k-item k-header" data-' + s.ns + 'name="${data.name}">${data.name}', o = i.sortable, r = ""; return o && (r += "#if (data.sortIcon) {#", r += '<span class="k-icon ${data.sortIcon}-sm"></span>', r += "#}#"), (i.filterable || o) && (r += '<span class="k-icon k-i-more-vertical k-setting-fieldmenu"></span>'), n += '<span class="k-field-actions">' + (r += '<span class="k-icon k-i-close k-setting-delete"></span>') + "</span></li>", new s.ui.PivotSettingTarget(t, e.extend({ dataSource: this.dataSource, hint: function (t) { var i = e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>'); return i.find(".k-list").append(t.clone()), i }, template: n, emptyTemplate: '<li class="k-item k-empty">${data}</li>' }, i)) }, _targets: function () { var t = e('<div class="k-state-default"/>').appendTo(this.form), i = e(d({ name: this.options.messages.columnsLabel, icon: "k-i-columns" })).appendTo(t), n = e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(i.last()), o = e(d({ name: this.options.messages.rowsLabel, icon: "k-i-rows" })).appendTo(t), r = e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(o.last()), s = e(d({ name: this.options.messages.measuresLabel, icon: "k-i-sum" })).appendTo(t), a = e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(s.last()), l = this.options; this.columns = this._createTarget(n, { filterable: l.filterable, sortable: l.sortable, connectWith: r, messages: { empty: l.messages.columns, fieldMenu: l.messages.fieldMenu } }), this.rows = this._createTarget(r, { filterable: l.filterable, sortable: l.sortable, setting: "rows", connectWith: n, messages: { empty: this.options.messages.rows, fieldMenu: this.options.messages.fieldMenu } }), this.measures = this._createTarget(a, { setting: "measures", messages: { empty: l.messages.measures } }), n.add(r).add(a).on("mouseenter.kendoPivotConfigurator mouseleave.kendoPivotConfigurator", ".k-item:not(.k-empty)", this._toggleHover) }, _toggleHover: function (t) { e(t.currentTarget).toggleClass("k-state-hover", "mouseenter" === t.type) }, _resize: function () { var e, t, i = this.element, n = this.options.height, o = s._outerHeight; n && (i.height(n), i.is(":visible") && (t = i.children(".k-columns").children("div.k-state-default"), n = i.innerHeight(), e = (o(i) - n) / 2, n = n - (o(t, !0) - t.height()) - e, t.height(n))) }, refresh: function () { var e = this.dataSource; (e.cubeBuilder || this._cube !== e.cube() || this._catalog !== e.catalog()) && this.treeView.dataSource.fetch(), this._catalog = this.dataSource.catalog(), this._cube = this.dataSource.cube(), this._resize(), this._progress(!1) }, destroy: function () { l.fn.destroy.call(this), this.dataSource.unbind("change", this._refreshHandler), this.form.find(".k-list").off(c), this.rows.destroy(), this.columns.destroy(), this.measures.destroy(), this.treeView.destroy(), this.element = null, this._refreshHandler = null } }); a.plugin(u) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.angular.min", ["kendo.core.min"], function () { return function (e, t, i) { "use strict"; function n(t, n, l, h, f, p) { function m() { var i, p, m, g, v, y, k; return l.kRebind && (i = e(e(n)[0].cloneNode(!0))), x = o(t, n, l, h, w).options, n.is("select") && function (t) { if (t.length > 0) { var i = e(t[0]); !/\S/.test(i.text()) && /^\?/.test(i.val()) && i.remove() } }(n[0].options), a(p = w.call(n, C = x).data(h), t, l, h, f), t.$emit("kendoWidgetCreated", p), m = function (e, t) { var i = e.$on("$destroy", function () { i(), t && (kendo.destroy(t.element), t = null) }); return i }(t, p), l.kRebind && u(p, t, n, i, l.kRebind, m, l), l.kNgDisabled && (g = l.kNgDisabled, (v = t.$eval(g)) && p.enable(!v), r(p, t, n, g)), l.kNgReadonly && (y = l.kNgReadonly, (k = t.$eval(y)) && p.readonly(k), s(p, t, n, y)), l.kNgModel && d(p, t, l.kNgModel), _ && c(p, t, n, _, b), p && function (t, i) { function n() { s.disconnect() } function o() { s.observe(e(i)[0], { attributes: !0 }) } var r, s; window.MutationObserver && t.wrapper && (r = [].slice.call(e(i)[0].classList), s = new MutationObserver(function (i) { n(), t && (i.forEach(function (i) { var n, o = e(t.wrapper)[0]; switch (i.attributeName) { case "class": (n = [].slice.call(i.target.classList)).forEach(function (e) { r.indexOf(e) < 0 && (o.classList.add(e), kendo.ui.ComboBox && t instanceof kendo.ui.ComboBox && t.input[0].classList.add(e)) }), r.forEach(function (e) { n.indexOf(e) < 0 && (o.classList.remove(e), kendo.ui.ComboBox && t instanceof kendo.ui.ComboBox && t.input[0].classList.remove(e)) }), r = n; break; case "disabled": "function" != typeof t.enable || t.element.attr("readonly") || t.enable(!e(i.target).attr("disabled")); break; case "readonly": "function" != typeof t.readonly || t.element.attr("disabled") || t.readonly(!!e(i.target).attr("readonly")) } }), o()) }), o(), t.first("destroy", n)) }(p, n), p } var g, v, _, b, w, k, x, S, T, D, A, E, I, M; if (!(n instanceof jQuery)) throw Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document."); if (g = l.kNgDelay, v = t.$eval(g), _ = (p = p || [])[0], b = p[1], !(w = e(n)[h])) return window.console.error("Could not find: " + h), null; if (k = o(t, n, l, h, w), x = k.options, k.unresolved.length) { for (S = [], T = 0, D = k.unresolved.length; T < D; T++)A = k.unresolved[T], E = e.Deferred(function (e) { var n = t.$watch(A.path, function (t) { t !== i && (n(), e.resolve()) }) }).promise(), S.push(E); return e.when.apply(null, S).then(m), i } return g && !v ? (I = t.$root || t, M = function () { var e = t.$watch(g, function (t) { t !== i && (e(), n.removeAttr(l.$attr.kNgDelay), g = null, y(m)) }) }, /^\$(digest|apply)$/.test(I.$$phase) ? M() : t.$apply(M), i) : m() } function o(n, o, r, s, a) { function l(e, o) { var r = t.copy(n.$eval(o)); r === i ? p.push({ option: e, path: o }) : c[e] = r } var c, d, u, h, f = s.replace(/^kendo/, ""), p = [], m = r.kOptions || r.options, g = n.$eval(m); return m && g === i && p.push({ option: "options", path: m }), c = t.extend({}, r.defaultOptions, g), d = a.widget.prototype.options, u = a.widget.prototype.events, e.each(r, function (e, t) { var i, n, o, r; "source" !== e && "kDataSource" !== e && "kScopeField" !== e && "scopeField" !== e && (i = "data" + e.charAt(0).toUpperCase() + e.slice(1), 0 === e.indexOf("on") && (n = e.replace(/^on./, function (e) { return e.charAt(2).toLowerCase() }), u.indexOf(n) > -1 && (c[n] = t)), d.hasOwnProperty(i) ? l(i, t) : d.hasOwnProperty(e) && !D[e] ? l(e, t) : T[e] || (o = e.match(/^k(On)?([A-Z].*)/)) && (r = o[2].charAt(0).toLowerCase() + o[2].slice(1), o[1] && "kOnLabel" != e ? c[r] = t : ("kOnLabel" == e && (r = "onLabel"), l(r, t)))) }), (h = r.kDataSource || r.source) && (c.dataSource = S(n, o, f, h)), c.$angular = [n], { options: c, unresolved: p } } function r(e, t, n, o) { return kendo.ui.PanelBar && e instanceof kendo.ui.PanelBar || kendo.ui.Menu && e instanceof kendo.ui.Menu ? (x.warn("k-ng-disabled specified on a widget that does not have the enable() method: " + e.options.name), i) : (t.$watch(o, function (t, i) { t != i && e.enable(!t) }), i) } function s(e, t, n, o) { return "function" != typeof e.readonly ? (x.warn("k-ng-readonly specified on a widget that does not have the readonly() method: " + e.options.name), i) : (t.$watch(o, function (t, i) { t != i && e.readonly(t) }), i) } function a(e, t, i, n, o) { if (i[o]) { var r = w(i[o]).assign; if (!r) throw Error(o + " attribute used but expression in it is not assignable: " + i[n]); r(t, e) } } function l(e) { return A.test(e[0].tagName) } function c(e, t, n, o, r) { var s, a, c, d, u; e.value && (a = !1, s = l(n) ? function () { return /checkbox|radio/i.test((e = n).attr("type")) ? e.prop("checked") : e.val(); var e } : function () { return e.value() }, c = function () { var n = o.$viewValue; n === i && (n = o.$modelValue), n === i && (n = null), a = !0, setTimeout(function () { if (a = !1, e) { var i = t[e.element.attr("k-ng-model")]; i && (n = i), !1 !== e.options.autoBind || e.listView.bound() ? e.value(n) : n && e.value(n) } }, 0) }, o.$render = c, setTimeout(function () { o.$render !== c && (o.$render = c)() }), l(n) && n.on("change", function () { a = !0 }), d = function (e) { return function () { var i; a && !n.is("select") || (e && r && (i = r.$pristine), o.$setViewValue(s()), e && (o.$setPristine(), i && r.$setPristine()), g(t)) } }, e.first("change", d(!1)), e.first("spin", d(!1)), kendo.ui.AutoComplete && e instanceof kendo.ui.AutoComplete || e.first("dataBound", d(!0)), u = s(), isNaN(o.$viewValue) || u == o.$viewValue || (o.$isEmpty(o.$viewValue) ? null != u && "" !== u && u != o.$viewValue && o.$setViewValue(u) : e.value(o.$viewValue)), o.$setPristine()) } function d(t, n, o) { var r, s, a, l, c, d, u, h, f, p; return "function" != typeof t.value ? (x.warn("k-ng-model specified on a widget that does not have the value() method: " + t.options.name), i) : (r = e(t.element).parents("form"), s = kendo.getter(r.attr("name"), !0)(n), a = w(o), l = a.assign, c = !1, d = kendo.ui.MultiSelect && t instanceof kendo.ui.MultiSelect, h = (u = function (e) { return e && d ? e.length : 0 })(a(n)), t.$angular_setLogicValue(a(n)), f = function (e, n) { e === i && (e = null), c || e == n && u(e) == h || (h = u(e), t.$angular_setLogicValue(e)) }, d ? n.$watchCollection(o, f) : n.$watch(o, f), p = function () { c = !0, s && s.$pristine && s.$setDirty(), g(n, function () { l(n, t.$angular_getLogicValue()), h = u(a(n)) }), c = !1 }, t.first("change", p), t.first("spin", p), i) } function u(t, i, n, o, r, s, a) { var l = i.$watch(r, function (r, c) { var d, u, h, f; t._muteRebind || r === c || (l(), a._cleanUp && a._cleanUp(), (d = F[t.options.name]) && d.forEach(function (t) { var n = i.$eval(a["k" + t]); n && o.append(e(n).attr(kendo.toHyphens("k" + t), "")) }), u = e(t.wrapper)[0], h = e(t.element)[0], "Upload" === t.options.name && (n = e(h)), f = n.injector().get("$compile"), t._destroy(), s && s(), t = null, h && (u && u.parentNode.replaceChild(h, u), e(n).replaceWith(o)), f(o)(i)) }, !0); g(i) } function h(e, t) { return function (i, n) { return e.call(t, i, n) } } function f(e, t) { this[e] = kendo.stringify(t) } function p(e, i) { function n(e, t) { _.directive(e, ["directiveFactory", function (i) { return i.create(t, e) }]) } var o, r, s, a, l = i ? "Mobile" : ""; l += e.fn.options.name, o = l, r = "kendo" + l.charAt(0) + l.substr(1).toLowerCase(), s = (l = "kendo" + l).replace(/([A-Z])/g, "-$1"), -1 == I.indexOf(l.replace("kendo", "")) && (a = l === r ? [l] : [l, r], t.forEach(a, function (e) { _.directive(e, function () { return { restrict: "E", replace: !0, template: function (e, t) { var i = E[o] || "div", n = t.kScopeField || t.scopeField; return "<" + i + " " + s + (n ? '="' + n + '"' : "") + ">" + e.html() + "</" + i + ">" } } }) })), M.indexOf(l.replace("kendo", "")) > -1 || (n(l, l), r != l && n(r, l)) } function m(t) { return t = e(t), kendo.widgetInstance(t, kendo.ui) || kendo.widgetInstance(t, kendo.mobile.ui) || kendo.widgetInstance(t, kendo.dataviz.ui) } function g(e, t) { var i = e.$root || e, n = /^\$(digest|apply)$/.test(i.$$phase); t ? n ? t() : i.$apply(t) : n || i.$digest() } function v(i, n, o) { var r, s, a; if (e.isArray(i)) return t.forEach(i, function (e) { v(e, n, o) }); if ("string" == typeof i) { for (r = i.split("."), s = kendo; s && r.length > 0;)s = s[r.shift()]; if (!s) return R.push([i, n, o]), !1; i = s.prototype } return a = i[n], i[n] = function () { var e = this, t = arguments; return o.apply({ self: e, next: function () { return a.apply(e, arguments.length > 0 ? arguments : t) } }, t) }, !0 } var _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F; t && t.injector && (_ = t.module("kendo.directives", []), b = t.injector(["ng"]), w = b.get("$parse"), y = b.get("$timeout"), x = b.get("$log"), S = function () { var e = { TreeList: "TreeListDataSource", TreeView: "HierarchicalDataSource", Scheduler: "SchedulerDataSource", PivotGrid: "PivotDataSource", PivotConfigurator: "PivotDataSource", PanelBar: "HierarchicalDataSource", Menu: "$PLAIN", ContextMenu: "$PLAIN" }, t = function (e, t) { return "$PLAIN" == t ? e : kendo.data[t].create(e) }; return function (i, n, o, r) { var s = e[o] || "DataSource", a = i.$eval(r), l = t(a, s); return i.$watch(r, function (e) { var i, o = m(n); o && "function" == typeof o.setDataSource && e !== a && (i = t(e, s), o.setDataSource(i), a = e) }), l } }(), T = { kDataSource: !0, kOptions: !0, kRebind: !0, kNgModel: !0, kNgDelay: !0 }, D = { name: !0, title: !0, style: !0 }, A = /^(input|select|textarea)$/i, _.factory("directiveFactory", ["$compile", function (t) { var i, o = !1; return k = t, { create: function (t, r) { return { restrict: "AC", require: ["?ngModel", "^?form"], scope: !1, controller: ["$scope", "$attrs", "$element", function (e, t) { this.template = h(f, t), t._cleanUp = h(function () { this.template = null, t._cleanUp = null }, this) }], link: function (s, a, l, c) { var d = e(a), u = t.replace(/([A-Z])/g, "-$1"); d.attr(u, d.attr("data-" + u)), d[0].removeAttribute("data-" + u), n(s, a, l, t, r, c) && (i && clearTimeout(i), i = setTimeout(function () { s.$emit("kendoRendered"), o || (o = !0, e("form").each(function () { var t = e(this).controller("form"); t && t.$setPristine() })) })) } } } } }]), E = { Editor: "textarea", NumericTextBox: "input", DatePicker: "input", DateTimePicker: "input", TimePicker: "input", AutoComplete: "input", ColorPicker: "input", MaskedTextBox: "input", MultiSelect: "input", Upload: "input", Validator: "form", Button: "button", MobileButton: "a", MobileBackButton: "a", MobileDetailButton: "a", ListView: "ul", MobileListView: "ul", PanelBar: "ul", TreeView: "ul", Menu: "ul", ContextMenu: "ul", ActionSheet: "ul" }, I = ["MobileView", "MobileDrawer", "MobileLayout", "MobileSplitView", "MobilePane", "MobileModalView"], M = ["MobileApplication", "MobileView", "MobileModalView", "MobileLayout", "MobileActionSheet", "MobileDrawer", "MobileSplitView", "MobilePane", "MobileScrollView", "MobilePopOver"], t.forEach(["MobileNavBar", "MobileButton", "MobileBackButton", "MobileDetailButton", "MobileTabStrip", "MobileScrollView", "MobileScroller"], function (e) { M.push(e), e = "kendo" + e, _.directive(e, function () { return { restrict: "A", link: function (t, i, o) { n(t, i, o, e, e) } } }) }), R = [], kendo.onWidgetRegistered(function (t) { R = e.grep(R, function (e) { return !v.apply(null, e) }), p(t.widget, "Mobile" == t.prefix) }), v(["ui.Widget", "mobile.ui.Widget"], "angular", function (n, o) { var r, s = this.self; return "init" == n ? (!o && C && (o = C), C = null, o && o.$angular && (s.$angular_scope = o.$angular[0], s.$angular_init(s.element, o)), i) : ((r = s.$angular_scope) && function (e) { var t = y; try { y = function (e) { return e() }, e() } finally { y = t } }(function () { var a, l, c = o(), d = c.elements, u = c.data; if (d.length > 0) switch (n) { case "cleanup": t.forEach(d, function (t) { var i = e(t).data("$$kendoScope"); i && i !== r && i.$$kendoScope && function (t, i) { t.$destroy(), i && e(i).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope") }(i, t) }); break; case "compile": a = s.element.injector(), l = a ? a.get("$compile") : k, t.forEach(d, function (t, n) { var o, s; c.scopeFrom ? o = c.scopeFrom : (s = u && u[n]) !== i ? (o = e.extend(r.$new(), s)).$$kendoScope = !0 : o = r, e(t).data("$$kendoScope", o), l(t)(o) }), g(r) } }), i) }), v("ui.Widget", "$angular_getLogicValue", function () { return this.self.value() }), v("ui.Widget", "$angular_setLogicValue", function (e) { this.self.value(e) }), v("ui.Select", "$angular_getLogicValue", function () { var e = this.self.dataItem(), t = this.self.options.dataValueField; return e ? this.self.options.valuePrimitive ? t ? e[t] : e : e.toJSON() : null }), v("ui.Select", "$angular_setLogicValue", function (e) { var t = this.self, n = t.options, o = n.dataValueField, r = n.text || ""; e === i && (e = ""), o && !n.valuePrimitive && e && (r = e[n.dataTextField] || "", e = e[o || n.dataTextField]), !1 !== t.options.autoBind || t.listView.bound() ? t.value(e) : !r && e && n.valuePrimitive ? t.value(e) : t._preselect(e, r) }), v("ui.MultiSelect", "$angular_getLogicValue", function () { var t = this.self.dataItems().slice(0), i = this.self.options.dataValueField; return i && this.self.options.valuePrimitive && (t = e.map(t, function (e) { return e[i] })), t }), v("ui.MultiSelect", "$angular_setLogicValue", function (t) { var i, n, o, r; null == t && (t = []), i = this.self, n = i.options, o = n.dataValueField, r = t, o && !n.valuePrimitive && (t = e.map(t, function (e) { return e[o] })), !1 !== n.autoBind || n.valuePrimitive || i.listView.bound() ? i.value(t) : i._preselect(r, t) }), v("ui.AutoComplete", "$angular_getLogicValue", function () { var e, t, i, n, o, r = this.self.options, s = this.self.value().split(r.separator), a = r.valuePrimitive, l = this.self.listView.selectedDataItems(), c = []; for (e = 0, t = l.length; e < t; e++)for (i = l[e], n = r.dataTextField ? i[r.dataTextField] : i, o = 0; o < s.length; o++)if (n === s[o]) { c.push(a ? n : i.toJSON()); break } return c }), v("ui.AutoComplete", "$angular_setLogicValue", function (t) { null == t && (t = []); var n = this.self, o = n.options.dataTextField; o && !n.options.valuePrimitive && (t = t.length !== i ? e.map(t, function (e) { return e[o] }) : t[o]), n.value(t) }), v("ui.Widget", "$angular_init", function (t, i) { var n, o, r, s, a = this.self; if (i && !e.isArray(i)) for (n = a.$angular_scope, o = a.events.length; --o >= 0;)r = a.events[o], (s = i[r]) && "string" == typeof s && (i[r] = a.$angular_makeEventHandler(r, n, s)) }), v("ui.Widget", "$angular_makeEventHandler", function (e, t, i) { return i = w(i), function (e) { g(t, function () { i(t, { kendoEvent: e }) }) } }), v(["ui.Grid", "ui.ListView", "ui.TreeView", "ui.PanelBar"], "$angular_makeEventHandler", function (e, i, n) { return "change" != e ? this.next() : (n = w(n), function (e) { var o, r, s, a, l, c, d, u, h, f = e.sender, p = f.options, m = { kendoEvent: e }; for (t.isString(p.selectable) && (o = -1 !== p.selectable.indexOf("cell"), r = -1 !== p.selectable.indexOf("multiple")), s = m.selected = this.select(), a = m.data = [], l = m.columns = [], d = 0; d < s.length; d++)u = o ? s[d].parentNode : s[d], h = f.dataItem(u), o ? (t.element.inArray(h, a) < 0 && a.push(h), c = t.element(s[d]).index(), t.element.inArray(c, l) < 0 && l.push(c)) : a.push(h); r || (m.dataItem = m.data = a[0], m.angularDataItem = kendo.proxyModelSetters(m.dataItem), m.selected = s[0]), g(i, function () { n(i, m) }) }) }), v("ui.Grid", "$angular_init", function (n, o) { if (this.next(), o.columns) { var r = e.extend({}, kendo.Template, o.templateSettings); t.forEach(o.columns, function (e) { !e.field || e.template || e.format || e.values || e.encoded !== i && !e.encoded || (e.template = "<span ng-bind='" + kendo.expr(e.field, "dataItem") + "'>#: " + kendo.expr(e.field, r.paramName) + "#</span>") }) } }), v("mobile.ui.ButtonGroup", "value", function (e) { var t = this.self; return null != e && (t.select(t.element.children("li.km-button").eq(e)), t.trigger("change"), t.trigger("select", { index: t.selectedIndex })), t.selectedIndex }), v("mobile.ui.ButtonGroup", "_select", function () { this.next(), this.self.trigger("change") }), _.directive("kendoMobileApplication", function () { return { terminal: !0, link: function (e, t, i) { n(e, t, i, "kendoMobileApplication", "kendoMobileApplication") } } }).directive("kendoMobileView", function () { return { scope: !0, link: { pre: function (e, t, i) { i.defaultOptions = e.viewOptions, i._instance = n(e, t, i, "kendoMobileView", "kendoMobileView") }, post: function (e, t, i) { i._instance._layout(), i._instance._scroller() } } } }).directive("kendoMobileDrawer", function () { return { scope: !0, link: { pre: function (e, t, i) { i.defaultOptions = e.viewOptions, i._instance = n(e, t, i, "kendoMobileDrawer", "kendoMobileDrawer") }, post: function (e, t, i) { i._instance._layout(), i._instance._scroller() } } } }).directive("kendoMobileModalView", function () { return { scope: !0, link: { pre: function (e, t, i) { i.defaultOptions = e.viewOptions, i._instance = n(e, t, i, "kendoMobileModalView", "kendoMobileModalView") }, post: function (e, t, i) { i._instance._layout(), i._instance._scroller() } } } }).directive("kendoMobileSplitView", function () { return { terminal: !0, link: { pre: function (e, t, i) { i.defaultOptions = e.viewOptions, i._instance = n(e, t, i, "kendoMobileSplitView", "kendoMobileSplitView") }, post: function (e, t, i) { i._instance._layout() } } } }).directive("kendoMobilePane", function () { return { terminal: !0, link: { pre: function (e, t, i) { i.defaultOptions = e.viewOptions, n(e, t, i, "kendoMobilePane", "kendoMobilePane") } } } }).directive("kendoMobileLayout", function () { return { link: { pre: function (e, t, i) { n(e, t, i, "kendoMobileLayout", "kendoMobileLayout") } } } }).directive("kendoMobileActionSheet", function () { return { restrict: "A", link: function (t, i, o) { i.find("a[k-action]").each(function () { e(this).attr("data-" + kendo.ns + "action", e(this).attr("k-action")) }), n(t, i, o, "kendoMobileActionSheet", "kendoMobileActionSheet") } } }).directive("kendoMobilePopOver", function () { return { terminal: !0, link: { pre: function (e, t, i) { i.defaultOptions = e.viewOptions, n(e, t, i, "kendoMobilePopOver", "kendoMobilePopOver") } } } }).directive("kendoViewTitle", function () { return { restrict: "E", replace: !0, template: function (e) { return "<span data-" + kendo.ns + "role='view-title'>" + e.html() + "</span>" } } }).directive("kendoMobileHeader", function () { return { restrict: "E", link: function (e, t) { t.addClass("km-header").attr("data-role", "header") } } }).directive("kendoMobileFooter", function () { return { restrict: "E", link: function (e, t) { t.addClass("km-footer").attr("data-role", "footer") } } }).directive("kendoMobileScrollViewPage", function () { return { restrict: "E", replace: !0, template: function (e) { return "<div data-" + kendo.ns + "role='page'>" + e.html() + "</div>" } } }), t.forEach(["align", "icon", "rel", "transition", "actionsheetContext"], function (e) { var t = "k" + e.slice(0, 1).toUpperCase() + e.slice(1); _.directive(t, function () { return { restrict: "A", priority: 2, link: function (i, n, o) { n.attr(kendo.attr(kendo.toHyphens(e)), i.$eval(o[t])) } } }) }), F = { TreeMap: ["Template"], MobileListView: ["HeaderTemplate", "Template"], MobileScrollView: ["EmptyTemplate", "Template"], Grid: ["AltRowTemplate", "DetailTemplate", "RowTemplate"], ListView: ["EditTemplate", "Template", "AltTemplate"], Pager: ["SelectTemplate", "LinkTemplate"], PivotGrid: ["ColumnHeaderTemplate", "DataCellTemplate", "RowHeaderTemplate"], Scheduler: ["AllDayEventTemplate", "DateHeaderTemplate", "EventTemplate", "MajorTimeHeaderTemplate", "MinorTimeHeaderTemplate"], PanelBar: ["Template"], TreeView: ["Template"], Validator: ["ErrorTemplate"] }, function () { var e = {}; t.forEach(F, function (i, n) { t.forEach(i, function (t) { e[t] || (e[t] = []), e[t].push("?^^kendo" + n) }) }), t.forEach(e, function (e, t) { var i = "k" + t, n = kendo.toHyphens(i); _.directive(i, function () { return { restrict: "A", require: e, terminal: !0, compile: function (t, o) { if ("" === o[i]) { t.removeAttr(n); var r = t[0].outerHTML; return function (t, o, s, a) { for (var l; !l && a.length;)l = a.shift(); l ? (l.template(i, r), o.remove()) : x.warn(n + " without a matching parent widget found. It can be one of the following: " + e.join(", ")) } } } } }) }) }()) }(window.kendo.jQuery, window.angular), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.web.min", ["kendo.core.min", "kendo.router.min", "kendo.view.min", "kendo.fx.min", "kendo.dom.min", "kendo.data.odata.min", "kendo.data.xml.min", "kendo.data.min", "kendo.ooxml.min", "kendo.excel.min", "kendo.data.signalr.min", "kendo.binder.min", "kendo.drawing.min", "kendo.validator.min", "kendo.userevents.min", "kendo.draganddrop.min", "kendo.mobile.scroller.min", "kendo.groupable.min", "kendo.reorderable.min", "kendo.resizable.min", "kendo.sortable.min", "kendo.selectable.min", "kendo.button.min", "kendo.pager.min", "kendo.popup.min", "kendo.notification.min", "kendo.tooltip.min", "kendo.list.min", "kendo.calendar.min", "kendo.datepicker.min", "kendo.dateinput.min", "kendo.autocomplete.min", "kendo.dropdownlist.min", "kendo.combobox.min", "kendo.multiselect.min", "kendo.colorpicker.min", "kendo.columnmenu.min", "kendo.columnsorter.min", "kendo.grid.min", "kendo.listview.min", "kendo.listbox.min", "kendo.filebrowser.min", "kendo.imagebrowser.min", "kendo.editor.min", "kendo.numerictextbox.min", "kendo.maskedtextbox.min", "kendo.mediaplayer.min", "kendo.menu.min", "kendo.editable.min", "kendo.pivot.fieldmenu.min", "kendo.filtercell.min", "kendo.panelbar.min", "kendo.progressbar.min", "kendo.responsivepanel.min", "kendo.tabstrip.min", "kendo.timepicker.min", "kendo.toolbar.min", "kendo.datetimepicker.min", "kendo.treeview.draganddrop.min", "kendo.treeview.min", "kendo.slider.min", "kendo.splitter.min", "kendo.upload.min", "kendo.dialog.min", "kendo.window.min", "kendo.virtuallist.min", "kendo.scheduler.view.min", "kendo.scheduler.dayview.min", "kendo.scheduler.agendaview.min", "kendo.scheduler.monthview.min", "kendo.scheduler.recurrence.min", "kendo.scheduler.min", "kendo.gantt.list.min", "kendo.gantt.timeline.min", "kendo.gantt.min", "kendo.treelist.min", "kendo.pivotgrid.min", "kendo.spreadsheet.min", "kendo.pivot.configurator.min", "kendo.angular.min"], function () { "bundle all"; return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/core/kendo-core.min", ["kendo.core.min", "kendo.drawing.min"], function () { !function (e) { function t(e) { return Array.isArray(e) } function i(e) { var t, i = .5; for (e.options.stroke && kendo.drawing.util.defined(e.options.stroke.width) && e.options.stroke.width % 2 == 0 && (i = 0), t = 0; t < e.segments.length; t++)e.segments[t].anchor().round(0).translate(i, i); return e } function n(e, t) { return -e.x * t.y + e.y * t.x < 0 } function o(e) { return "object" == typeof e } function r(e) { return typeof e === Fe } function s(e) { return "number" == typeof e && !isNaN(e) } function a(e) { return s(e) ? e + "px" : e } function l(e) { return Ne.test(e) } function c(e, t) { void 0 === t && (t = 0); var i = { top: 0, right: 0, bottom: 0, left: 0 }; return "number" == typeof e ? i[de] = i[fe] = i[ue] = i[he] = e : (i[de] = e[de] || t, i[fe] = e[fe] || t, i[ue] = e[ue] || t, i[he] = e[he] || t), i } function d(e, t) { var i, n = e.length, o = []; for (i = 0; i < n; i++)t(e[i]) && o.push(e[i]); return o } function u(e, t) { if (t) return -1 !== t.indexOf(e) } function h(e, t) { var i, n, o = e.length, r = []; for (i = 0; i < o; i++)n = t(e[i]), kendo.drawing.util.defined(n) && r.push(n); return r } function f(e, t) { var i = e.prototype; i.options = i.options ? se({}, i.options, t) : t } function p(e) { var t, i, n, o = _e, r = be; for (t = 0, i = e.length; t < i; t++)null !== (n = e[t]) && isFinite(n) && (o = Math.min(o, n), r = Math.max(r, n)); return { min: o === _e ? void 0 : o, max: r === be ? void 0 : r } } function m(e, t, i, n, o) { var r = et(o); return new rt(i + (e - i) * Math.cos(r) + (t - n) * Math.sin(r), n - (e - i) * Math.sin(r) + (t - n) * Math.cos(r)) } function g(e, t) { return e - t } function v(e, t) { var i, n, o, r, s, a, l, c, u; return e.x1 === t.x1 && e.y1 === t.y1 && e.x2 === t.x2 && e.y2 === t.y2 ? t : (i = Math.min(e.x1, t.x1), n = Math.max(e.x1, t.x1), o = Math.min(e.x2, t.x2), r = Math.max(e.x2, t.x2), s = Math.min(e.y1, t.y1), a = Math.max(e.y1, t.y1), l = Math.min(e.y2, t.y2), c = Math.max(e.y2, t.y2), (u = [])[0] = new st(n, s, o, a), u[1] = new st(i, a, n, l), u[2] = new st(o, a, r, l), u[3] = new st(n, l, o, c), e.x1 === i && e.y1 === s || t.x1 === i && t.y1 === s ? (u[4] = new st(i, s, n, a), u[5] = new st(o, l, r, c)) : (u[4] = new st(o, s, r, a), u[5] = new st(i, l, n, c)), d(u, function (e) { return e.height() > 0 && e.width() > 0 })[0]) } function _(e) { var t = e.origin, i = e.bottomRight(); return new st(t.x, t.y, i.x, i.y) } function b(e, t) { var n = e.tickX, o = e.tickY, r = e.position, s = new X({ stroke: { width: t.width, color: t.color } }); return e.vertical ? s.moveTo(n, r).lineTo(n + t.size, r) : s.moveTo(r, o).lineTo(r, o + t.size), i(s), s } function w(e, t) { var n = e.lineStart, o = e.lineEnd, r = e.position, s = new X({ stroke: { width: t.width, color: t.color, dashType: t.dashType } }); return e.vertical ? s.moveTo(n, r).lineTo(o, r) : s.moveTo(r, n).lineTo(r, o), i(s), s } function y(e, t) { var i = e.getTime() - t, n = e.getTimezoneOffset() - t.getTimezoneOffset(); return i - n * jt } function k(e, t) { return new Date(e.getTime() + t) } function x(e) { var t; return e instanceof Date ? t = e : e && (t = new Date(e)), t } function C(e, t) { var i, n; if (void 0 === t && (t = 0), i = 0, n = e.getDay(), !isNaN(n)) for (; n !== t;)0 === n ? n = 6 : n--, i++; return k(e, -i * $t) } function S(e, t) { return 0 === t && 23 === e.getHours() && (e.setHours(e.getHours() + 2), !0) } function T(e, t, i, n) { var o, r, s = e; return e && (o = x(e), r = o.getHours(), i === Wt ? S(s = new Date(o.getFullYear() + t, 0, 1), 0) : i === Ut ? S(s = new Date(o.getFullYear(), o.getMonth() + t, 1), r) : i === Vt ? S(s = T(C(o, n), 7 * t, Ot), r) : i === Ot ? S(s = new Date(o.getFullYear(), o.getMonth(), o.getDate() + t), r) : i === Nt ? s = function (e, t) { var i, n = new Date(e); return n.setMinutes(0, 0, 0), i = (e.getTimezoneOffset() - n.getTimezoneOffset()) * jt, k(n, i + t * Gt) }(o, t) : i === Ht ? (s = k(o, t * jt)).getSeconds() > 0 && s.setSeconds(0) : i === Lt ? s = k(o, t * qt) : i === Bt && (s = k(o, t)), i !== Bt && s.getMilliseconds() > 0 && s.setMilliseconds(0)), s } function D(e, t, i) { return T(x(e), 0, t, i) } function A(e, t, i) { var n = x(e); return n && D(n, t, i).getTime() === n.getTime() ? n : T(n, 1, t, i) } function E(e, t) { return e && t ? e.getTime() - t.getTime() : -1 } function I(e, t) { return e.getTime() - t } function M(e) { var i, n; if (t(e)) { for (i = [], n = 0; n < e.length; n++)i.push(M(e[n])); return i } if (e) return x(e).getTime() } function R(e, t) { return e && t ? M(e) === M(t) : e === t } function F(e, t, i) { return y(e, t) / Xt[i] } function z(e, t, i, n) { var o = x(e), r = x(t); return (i === Ut ? o.getMonth() - r.getMonth() + 12 * (o.getFullYear() - r.getFullYear()) + F(o, new Date(o.getFullYear(), o.getMonth()), Ot) / new Date(o.getFullYear(), o.getMonth() + 1, 0).getDate() : i === Wt ? o.getFullYear() - r.getFullYear() + z(o, new Date(o.getFullYear(), 0), Ut, 1) / 12 : i === Ot || i === Vt ? F(o, r, i) : I(o, t) / Xt[i]) / n } function P(e, t, i) { return i === Wt ? t.getFullYear() - e.getFullYear() : i === Ut ? 12 * P(e, t, Wt) + t.getMonth() - e.getMonth() : i === Ot ? Math.floor(I(t, e) / $t) : Math.floor(I(t, e) / Xt[i]) } function B(e, t) { return r(t) && e.parseDate(t) || x(t) } function L(e, i) { var n, o; if (t(i)) { for (n = [], o = 0; o < i.length; o++)n.push(B(e, i[o])); return n } return B(e, i) } function H(e, t) { var i, n, o = tt(t - e, xe - 1); if (0 === o) { if (0 === t) return .1; o = Math.abs(t) } return i = Math.pow(10, Math.floor(Math.log(o) / Math.log(10))), n = tt(o / i, xe), 1, tt(i * (n < 1.904762 ? .2 : n < 4.761904 ? .5 : n < 9.523809 ? 1 : 2), xe) } function N(e, t) { return tt(Math.floor(e / t) * t, xe) } function O(e, t) { return tt(Math.ceil(e / t) * t, xe) } function V(e) { return Math.max(Math.min(e, Zt), -Zt) } function U(e, t, i) { var n = i.narrowRange, o = function (e, t, i) { var n, o; if (!e && !t) return 0; if (e >= 0 && t >= 0) { if (o = e === t ? 0 : e, !1 === i || !i && (t - o) / t > ei) return 0; n = Math.max(0, o - (t - o) / 2) } else n = e; return n }(e, t, n), r = function (e, t, i) { var n, o, r; if (!e && !t) return 1; if (e <= 0 && t <= 0) { if (o = e === t ? 0 : t, r = Math.abs((o - e) / o), !1 === i || !i && r > ei) return 0; n = Math.min(0, o - (e - o) / 2) } else n = t; return n }(e, t, n), s = H(o, r), a = { majorUnit: s }; return !1 !== i.roundToMajorUnit && (o < 0 && W(o, s, 1 / 3) && (o -= s), r > 0 && W(r, s, 1 / 3) && (r += s)), a.min = N(o, s), a.max = O(r, s), a } function W(e, t, i) { var n = tt(Math.abs(e % t), xe), o = t * (1 - i); return 0 === n || n > o } function q(e, t, i) { var n = i.min || e, o = i.max || t, r = i.baseUnit || (o && n ? function (e) { var t = Nt; return e >= Qt ? t = Wt : e >= Kt ? t = Ut : e >= Yt ? t = Vt : e >= $t && (t = Ot), t }(y(o, n)) : Nt), s = Xt[r], a = D(M(n) - 1, r) || x(o), l = A(M(o) + 1, r), c = i.majorUnit ? i.majorUnit : void 0, d = c || O(H(a.getTime(), l.getTime()), s) / s, u = P(a, l, r), h = O(u, d), f = h - u, p = Math.floor(f / 2), m = f - p; return i.baseUnit || delete i.baseUnit, i.baseUnit = i.baseUnit || r, i.min = i.min || T(a, -p, r), i.max = i.max || T(l, m, r), i.minorUnit = i.minorUnit || d / 5, i.majorUnit = d, i } function j() { throw Error("Non positive values cannot be used for a logarithmic axis") } function G(e, t) { return Math.log(e) / Math.log(t) } function $(e, t) { return 180 - Math.abs(Math.abs(e - t) - 180) } function Y(e) { return e <= 0 ? -1 : 1 } var K, Q, X, Z, J, ee, te, ie, ne, oe, re, se, ae, le, ce, de, ue, he, fe, pe, me, ge, ve, _e, be, we, ye, ke, xe, Ce, Se, Te, De, Ae, Ee, Ie, Me, Re, Fe, ze, Pe, Be, Le, He, Ne, Oe, Ve, Ue, We, qe, je, Ge, $e, Ye, Ke, Qe, Xe, Ze, Je, et, tt, it, nt, ot, rt, st, at, lt, ct, dt, ut, ht, ft, pt, mt, gt, vt, _t, bt, wt, yt, kt, xt, Ct, St, Tt, Dt, At, Et, It, Mt, Rt, Ft, zt, Pt, Bt, Lt, Ht, Nt, Ot, Vt, Ut, Wt, qt, jt, Gt, $t, Yt, Kt, Qt, Xt, Zt, Jt, ei, ti, ii, ni, oi, ri, si, ai, li, ci, di, ui, hi, fi, pi; window.kendo.dataviz = window.kendo.dataviz || {}, K = kendo.drawing, Q = K.util, X = K.Path, Z = K.Group, J = kendo.Class, ee = kendo.geometry, te = ee.Rect, ie = ee.Circle, ne = ee.transform, oe = ee.Segment, re = kendo.dataviz, se = kendo.deepExtend, ae = kendo.getter, le = "x", ce = "y", de = "top", ue = "bottom", he = "left", fe = "right", pe = "center", me = "width", ge = "height", ve = 3, _e = Number.MAX_VALUE, be = -Number.MAX_VALUE, Le = { X: le, Y: ce, WIDTH: me, HEIGHT: ge, DEFAULT_HEIGHT: 400, DEFAULT_WIDTH: 600, TOP: de, LEFT: he, BOTTOM: ue, RIGHT: fe, CENTER: pe, COORD_PRECISION: ve, DEFAULT_PRECISION: xe = 10, CIRCLE: Ee = "circle", TRIANGLE: Ie = "triangle", CROSS: "cross", MAX_VALUE: _e, MIN_VALUE: be, WHITE: we = "#fff", BLACK: ye = "#000", DEFAULT_FONT: ke = "12px sans-serif", AXIS_LABEL_CLICK: Ce = "axisLabelClick", OUTSIDE: De = "outside", INSIDE: Re = "inside", NONE: Ae = "none", NOTE_CLICK: Se = "noteClick", NOTE_HOVER: Te = "noteHover", VALUE: "value", STRING: Fe = "string", OBJECT: ze = "object", DATE: Pe = "date", ARC: Me = "arc", FORMAT_REGEX: Be = /\{\d+:?/ }, He = /\s+/g, Ne = /width|height|top|left|bottom|right/i, Oe = "trigger", Ve = J.extend({ init: function (e, t) { this.observer = e, this.handlerMap = se({}, this.handlerMap, t) }, trigger: function (e, t) { var i, n = this.observer, o = this.handlerMap; return o[e] ? i = this.callObserver(o[e], t) : n[Oe] && (i = this.callObserver(Oe, e, t)), i }, callObserver: function (e) { for (var t = [], i = arguments.length - 1; i-- > 0;)t[i] = arguments[i + 1]; return this.observer[e].apply(this.observer, t) }, requiresHandlers: function (e) { var t; if (this.observer.requiresHandlers) return this.observer.requiresHandlers(e); for (t = 0; t < e.length; t++)if (this.handlerMap[e[t]]) return !0 } }), Ue = kendo.drawing.util, We = Ue.append, qe = Ue.bindEvents, je = Ue.defined, Ge = Ue.deg, $e = Ue.elementOffset, Ye = Ue.elementSize, Ke = Ue.eventElement, Qe = Ue.eventCoordinates, Xe = Ue.last, Ze = Ue.limitValue, Je = Ue.objectKey, et = Ue.rad, tt = Ue.round, it = Ue.unbindEvents, nt = Ue.valueOrDefault, (ot = J.extend({})).fetchFonts = function (e, t, i) { void 0 === i && (i = { depth: 0 }); !e || i.depth > 5 || !document.fonts || Object.keys(e).forEach(function (n) { var o = e[n]; "dataSource" !== n && "$" !== n[0] && o && ("font" === n ? t.push(o) : "object" == typeof o && (i.depth++, ot.fetchFonts(o, t, i), i.depth--)) }) }, ot.loadFonts = function (e, t) { var i = []; if (e.length > 0 && document.fonts) { try { i = e.map(function (e) { return document.fonts.load(e) }) } catch (e) { kendo.logToConsole(e) } Promise.all(i).then(t, t) } else t() }, ot.preloadFonts = function (e, t) { var i = []; ot.fetchFonts(e, i), ot.loadFonts(i, t) }, (rt = J.extend({ init: function (e, t) { this.x = e || 0, this.y = t || 0 }, clone: function () { return new rt(this.x, this.y) }, equals: function (e) { return e && this.x === e.x && this.y === e.y }, rotate: function (e, t) { var i = et(t), n = Math.cos(i), o = Math.sin(i), r = e.x, s = e.y, a = this.x, l = this.y; return this.x = tt(r + (a - r) * n + (l - s) * o, ve), this.y = tt(s + (l - s) * n - (a - r) * o, ve), this }, multiply: function (e) { return this.x *= e, this.y *= e, this }, distanceTo: function (e) { var t = this.x - e.x, i = this.y - e.y; return Math.sqrt(t * t + i * i) } })).onCircle = function (e, t, i) { var n = et(t); return new rt(e.x - i * Math.cos(n), e.y - i * Math.sin(n)) }, st = J.extend({ init: function (e, t, i, n) { this.x1 = e || 0, this.y1 = t || 0, this.x2 = i || 0, this.y2 = n || 0 }, width: function () { return this.x2 - this.x1 }, height: function () { return this.y2 - this.y1 }, translate: function (e, t) { return this.x1 += e, this.x2 += e, this.y1 += t, this.y2 += t, this }, move: function (e, t) { var i = this.height(), n = this.width(); return je(e) && (this.x1 = e, this.x2 = this.x1 + n), je(t) && (this.y1 = t, this.y2 = this.y1 + i), this }, wrap: function (e) { return this.x1 = Math.min(this.x1, e.x1), this.y1 = Math.min(this.y1, e.y1), this.x2 = Math.max(this.x2, e.x2), this.y2 = Math.max(this.y2, e.y2), this }, wrapPoint: function (e) { var i = t(e), n = i ? e[0] : e.x, o = i ? e[1] : e.y; return this.wrap(new st(n, o, n, o)), this }, snapTo: function (e, t) { return t !== le && t || (this.x1 = e.x1, this.x2 = e.x2), t !== ce && t || (this.y1 = e.y1, this.y2 = e.y2), this }, alignTo: function (e, t) { var i, n, o = this.height(), r = this.width(), s = t === de || t === ue ? ce : le, a = s === ce ? o : r; return t === pe ? (i = e.center(), n = this.center(), this.x1 += i.x - n.x, this.y1 += i.y - n.y) : this[s + 1] = t === de || t === he ? e[s + 1] - a : e[s + 2], this.x2 = this.x1 + r, this.y2 = this.y1 + o, this }, shrink: function (e, t) { return this.x2 -= e, this.y2 -= t, this }, expand: function (e, t) { return this.shrink(-e, -t), this }, pad: function (e) { var t = c(e); return this.x1 -= t.left, this.x2 += t.right, this.y1 -= t.top, this.y2 += t.bottom, this }, unpad: function (e) { var t = c(e); return t.left = -t.left, t.top = -t.top, t.right = -t.right, t.bottom = -t.bottom, this.pad(t) }, clone: function () { return new st(this.x1, this.y1, this.x2, this.y2) }, center: function () { return new rt(this.x1 + this.width() / 2, this.y1 + this.height() / 2) }, containsPoint: function (e) { return e.x >= this.x1 && e.x <= this.x2 && e.y >= this.y1 && e.y <= this.y2 }, points: function () { return [new rt(this.x1, this.y1), new rt(this.x2, this.y1), new rt(this.x2, this.y2), new rt(this.x1, this.y2)] }, getHash: function () { return [this.x1, this.y1, this.x2, this.y2].join(",") }, overlaps: function (e) { return !(e.y2 < this.y1 || this.y2 < e.y1 || e.x2 < this.x1 || this.x2 < e.x1) }, rotate: function (e) { var t = this.width(), i = this.height(), n = this.center(), o = n.x, r = n.y, s = m(0, 0, o, r, e), a = m(t, 0, o, r, e), l = m(t, i, o, r, e), c = m(0, i, o, r, e); return t = Math.max(s.x, a.x, l.x, c.x) - Math.min(s.x, a.x, l.x, c.x), i = Math.max(s.y, a.y, l.y, c.y) - Math.min(s.y, a.y, l.y, c.y), this.x2 = this.x1 + t, this.y2 = this.y1 + i, this }, toRect: function () { return new te([this.x1, this.y1], [this.width(), this.height()]) }, hasSize: function () { return 0 !== this.width() && 0 !== this.height() }, align: function (e, t, i) { var n = t + 1, o = t + 2, r = t === le ? me : ge, s = this[r](); u(i, [he, de]) ? (this[n] = e[n], this[o] = this[n] + s) : u(i, [fe, ue]) ? (this[o] = e[o], this[n] = this[o] - s) : i === pe && (this[n] = e[n] + (e[r]() - s) / 2, this[o] = this[n] + s) } }), at = J.extend({ init: function (e, t, i, n, o) { this.center = e, this.innerRadius = t, this.radius = i, this.startAngle = n, this.angle = o }, clone: function () { return new at(this.center, this.innerRadius, this.radius, this.startAngle, this.angle) }, middle: function () { return this.startAngle + this.angle / 2 }, setRadius: function (e, t) { return t ? this.innerRadius = e : this.radius = e, this }, point: function (e, t) { var i = et(e), n = Math.cos(i), o = Math.sin(i), r = t ? this.innerRadius : this.radius, s = tt(this.center.x - n * r, ve), a = tt(this.center.y - o * r, ve); return new rt(s, a) }, adjacentBox: function (e, t, i) { var n = this.clone().expand(e), o = n.middle(), r = n.point(o), s = t / 2, a = i / 2, l = Math.sin(et(o)), c = Math.cos(et(o)), d = r.x - s, u = r.y - a; return Math.abs(l) < .9 && (d += s * -c / Math.abs(c)), Math.abs(c) < .9 && (u += a * -l / Math.abs(l)), new st(d, u, d + t, u + i) }, containsPoint: function (e) { var t = this.center, i = this.innerRadius, o = this.radius, r = this.startAngle, s = this.startAngle + this.angle, a = e.x - t.x, l = e.y - t.y, c = new rt(a, l), d = this.point(r), u = new rt(d.x - t.x, d.y - t.y), h = this.point(s), f = new rt(h.x - t.x, h.y - t.y), p = tt(a * a + l * l, ve); return (u.equals(c) || n(u, c)) && !n(f, c) && p >= i * i && p <= o * o }, getBBox: function () { var e, t, i, n = new st(_e, _e, be, be), o = tt(this.startAngle % 360), r = tt((o + this.angle) % 360), s = this.innerRadius, a = [0, 90, 180, 270, o, r].sort(g), l = a.indexOf(o), c = a.indexOf(r); for (e = o === r ? a : l < c ? a.slice(l, c + 1) : [].concat(a.slice(0, c + 1), a.slice(l, a.length)), t = 0; t < e.length; t++)i = this.point(e[t]), n.wrapPoint(i), n.wrapPoint(i, s); return s || n.wrapPoint(this.center), n }, expand: function (e) { return this.radius += e, this } }), lt = at.extend({ init: function (e, t, i, n) { at.fn.init.call(this, e, 0, t, i, n) }, expand: function (e) { return at.fn.expand.call(this, e) }, clone: function () { return new lt(this.center, this.radius, this.startAngle, this.angle) }, setRadius: function (e) { return this.radius = e, this } }), (ct = J.extend({ createRing: function (e, t) { var i, n = e.startAngle + 180, o = e.angle + n, r = new ee.Point(e.center.x, e.center.y), s = Math.max(e.radius, 0), a = Math.max(e.innerRadius, 0), l = new ee.Arc(r, { startAngle: n, endAngle: o, radiusX: s, radiusY: s }), c = X.fromArc(l, t).close(); return a ? (l.radiusX = l.radiusY = a, i = l.pointAt(o), c.lineTo(i.x, i.y), c.arc(o, n, a, a, !0)) : c.lineTo(r.x, r.y), c } })).current = new ct, (dt = J.extend({ init: function (e) { this.children = [], this.options = se({}, this.options, e) }, reflow: function (e) { var t, i, n, o = this.children; for (i = 0; i < o.length; i++)(n = o[i]).reflow(e), t = t ? t.wrap(n.box) : n.box.clone(); this.box = t || e }, destroy: function () { var e, t = this.children; for (this.animation && this.animation.destroy(), e = 0; e < t.length; e++)t[e].destroy() }, getRoot: function () { var e = this.parent; return e ? e.getRoot() : null }, getSender: function () { var e = this.getService(); if (e) return e.sender }, getService: function () { for (var e = this; e;) { if (e.chartService) return e.chartService; e = e.parent } }, translateChildren: function (e, t) { var i, n = this.children, o = n.length; for (i = 0; i < o; i++)n[i].box.translate(e, t) }, append: function () { var e, t, i = arguments; for (e = 0; e < arguments.length; e++)t = i[e], this.children.push(t), t.parent = this }, renderVisual: function () { !1 !== this.options.visible && (this.createVisual(), this.addVisual(), this.renderChildren(), this.createAnimation(), this.renderComplete()) }, addVisual: function () { this.visual && (this.visual.chartElement = this, this.parent && this.parent.appendVisual(this.visual)) }, renderChildren: function () { var e, t = this.children, i = t.length; for (e = 0; e < i; e++)t[e].renderVisual() }, createVisual: function () { this.visual = new Z({ zIndex: this.options.zIndex, visible: nt(this.options.visible, !0) }) }, createAnimation: function () { this.visual && (this.animation = K.Animation.create(this.visual, this.options.animation)) }, appendVisual: function (e) { e.chartElement || (e.chartElement = this), e.options.noclip ? this.clipRoot().visual.append(e) : je(e.options.zIndex) ? this.stackRoot().stackVisual(e) : this.isStackRoot ? this.stackVisual(e) : this.visual ? this.visual.append(e) : this.parent.appendVisual(e) }, clipRoot: function () { return this.parent ? this.parent.clipRoot() : this }, stackRoot: function () { return this.parent ? this.parent.stackRoot() : this }, stackVisual: function (e) { var t, i, n = e.options.zIndex || 0, o = this.visual.children, r = o.length; for (t = 0; t < r && (i = o[t], !(nt(i.options.zIndex, 0) > n)); t++); this.visual.insert(t, e) }, traverse: function (e) { var t, i, n = this.children, o = n.length; for (t = 0; t < o; t++)i = n[t], e(i), i.traverse && i.traverse(e) }, closest: function (e) { for (var t = this, i = !1; t && !i;)(i = e(t)) || (t = t.parent); if (i) return t }, renderComplete: function () { }, hasHighlight: function () { var e = (this.options || {}).highlight; return !(!this.createHighlight || e && !1 === e.visible) }, toggleHighlight: function (t) { var i, n = this, o = (this.options || {}).highlight, r = (o || {}).visual, s = this._highlight; if (!s) { if (i = { fill: { color: we, opacity: .2 }, stroke: { color: we, width: 1, opacity: .2 } }, r) { if (!(s = this._highlight = r(e.extend(this.highlightVisualArgs(), { createVisual: function () { return n.createHighlight(i) }, sender: this.getSender(), series: this.series, dataItem: this.dataItem, category: this.category, value: this.value, percentage: this.percentage, runningTotal: this.runningTotal, total: this.total })))) return } else s = this._highlight = this.createHighlight(i); s.options.zIndex = this.options.zIndex, this.appendVisual(s) } s.visible(t) }, createGradientOverlay: function (t, i, n) { var o = new X(e.extend({ stroke: { color: "none" }, fill: this.createGradient(n), closed: t.options.closed }, i)); return o.segments.elements(t.segments.elements()), o }, createGradient: function (e) { if (this.parent) return this.parent.createGradient(e) } })).prototype.options = {}, f(ut = dt.extend({ init: function (e) { dt.fn.init.call(this, e), this.options.margin = c(this.options.margin), this.options.padding = c(this.options.padding) }, reflow: function (e) { var t, i, n, o, r = this, s = this.options, a = s.width, l = s.height, c = s.shrinkToFit, d = a && l, u = s.margin, h = s.padding, f = s.border.width, p = function () { r.align(e, le, s.align), r.align(e, ce, s.vAlign), r.paddingBox = t.clone().unpad(u).unpad(f) }, m = e.clone(); for (d && (m.x2 = m.x1 + a, m.y2 = m.y1 + l), c && m.unpad(u).unpad(f).unpad(h), dt.fn.reflow.call(this, m), t = d ? this.box = new st(0, 0, a, l) : this.box, c && d ? (p(), m = this.contentBox = this.paddingBox.clone().unpad(h)) : (m = this.contentBox = t.clone(), t.pad(h).pad(f).pad(u), p()), this.translateChildren(t.x1 - m.x1 + u.left + f + h.left, t.y1 - m.y1 + u.top + f + h.top), i = this.children, n = 0; n < i.length; n++)(o = i[n]).reflow(o.box) }, align: function (e, t, i) { this.box.align(e, t, i) }, hasBox: function () { var e = this.options; return e.border.width || e.background }, createVisual: function () { dt.fn.createVisual.call(this); var e = this.options; e.visible && this.hasBox() && this.visual.append(X.fromRect(this.paddingBox.toRect(), this.visualStyle())) }, visualStyle: function () { var e = this.options, t = e.border || {}; return { stroke: { width: t.width, color: t.color, opacity: nt(t.opacity, e.opacity), dashType: t.dashType }, fill: { color: e.background, opacity: e.opacity }, cursor: e.cursor } } }), { align: he, vAlign: de, margin: {}, padding: {}, border: { color: ye, width: 0 }, background: "", shrinkToFit: !1, width: 0, height: 0, visible: !0 }), f(ht = ut.extend({ init: function (e, t) { ut.fn.init.call(this, e), this.pointData = t }, getElement: function () { var e, t, i = this.options, n = this.paddingBox, o = i.type, r = i.rotation, s = n.center(), a = n.width() / 2; return i.visible && this.hasBox() ? (e = this.visualStyle(), o === Ee ? t = new K.Circle(new ie([tt(n.x1 + a, ve), tt(n.y1 + n.height() / 2, ve)], a), e) : o === Ie ? t = X.fromPoints([[n.x1 + a, n.y1], [n.x1, n.y2], [n.x2, n.y2]], e).close() : "cross" === o ? ((t = new K.MultiPath(e)).moveTo(n.x1, n.y1).lineTo(n.x2, n.y2), t.moveTo(n.x1, n.y2).lineTo(n.x2, n.y1)) : t = X.fromRect(n.toRect(), e), r && t.transform(ne().rotate(-r, [s.x, s.y])), t.options.zIndex = i.zIndex, t) : null }, createElement: function () { var e = this, t = this.options.visual, i = this.pointData || {}; return t ? t({ value: i.value, dataItem: i.dataItem, sender: this.getSender(), series: i.series, category: i.category, rect: this.paddingBox.toRect(), options: this.visualOptions(), createVisual: function () { return e.getElement() } }) : this.getElement() }, visualOptions: function () { var e = this.options; return { background: e.background, border: e.border, margin: e.margin, padding: e.padding, type: e.type, size: e.width, visible: e.visible } }, createVisual: function () { this.visual = this.createElement() } }), { type: Ee, align: pe, vAlign: pe }), pt = { glass: { type: "linear", rotation: 0, stops: [{ offset: 0, color: we, opacity: 0 }, { offset: .25, color: we, opacity: .3 }, { offset: 1, color: we, opacity: 0 }] }, sharpBevel: { type: ft = "radial", stops: [{ offset: 0, color: we, opacity: .55 }, { offset: .65, color: we, opacity: 0 }, { offset: .95, color: we, opacity: .25 }] }, roundedBevel: { type: ft, stops: [{ offset: .33, color: we, opacity: .06 }, { offset: .83, color: we, opacity: .2 }, { offset: .95, color: we, opacity: 0 }] }, roundedGlass: { type: ft, supportVML: !1, stops: [{ offset: 0, color: we, opacity: 0 }, { offset: .5, color: we, opacity: .3 }, { offset: .99, color: we, opacity: 0 }] }, sharpGlass: { type: ft, supportVML: !1, stops: [{ offset: 0, color: we, opacity: .2 }, { offset: .15, color: we, opacity: .15 }, { offset: .17, color: we, opacity: .35 }, { offset: .85, color: we, opacity: .05 }, { offset: .87, color: we, opacity: .15 }, { offset: .99, color: we, opacity: 0 }] }, bubbleShadow: { type: ft, center: [.5, .5], radius: .5 } }, f(mt = dt.extend({ init: function (e) { dt.fn.init.call(this, e); var t = this.options; t.width = parseInt(t.width, 10), t.height = parseInt(t.height, 10), this.gradients = {} }, reflow: function () { var e, t = this.options, i = this.children, n = new st(0, 0, t.width, t.height); for (this.box = n.unpad(t.margin), e = 0; e < i.length; e++)i[e].reflow(n), n = v(n, i[e].box) || new st }, createVisual: function () { this.visual = new Z, this.createBackground() }, createBackground: function () { var e = this.options, t = e.border || {}, i = this.box.clone().pad(e.margin).unpad(t.width), n = X.fromRect(i.toRect(), { stroke: { color: t.width ? t.color : "", width: t.width, dashType: t.dashType }, fill: { color: e.background, opacity: e.opacity }, zIndex: -10 }); this.visual.append(n) }, getRoot: function () { return this }, createGradient: function (t) { var i, n, o = this.gradients, r = Je(t), s = pt[t.gradient]; return o[r] ? i = o[r] : (n = e.extend({}, s, t), "linear" === s.type ? i = new K.LinearGradient(n) : (t.innerRadius && (n.stops = function (t) { var i, n, o = t.stops, r = t.innerRadius / t.radius * 100, s = o.length, a = []; for (i = 0; i < s; i++)(n = e.extend({}, o[i])).offset = (n.offset * (100 - r) + r) / 100, a.push(n); return a }(n)), (i = new K.RadialGradient(n)).supportVML = !1 !== s.supportVML), o[r] = i), i } }), { width: 600, height: 400, background: we, border: { color: ye, width: 0 }, margin: c(5), zIndex: -2 }), f(gt = dt.extend({ init: function (e) { dt.fn.init.call(this, e), this._initDirection() }, _initDirection: function () { var e = this.options; e.vertical ? (this.groupAxis = le, this.elementAxis = ce, this.groupSizeField = me, this.elementSizeField = ge, this.groupSpacing = e.spacing, this.elementSpacing = e.vSpacing) : (this.groupAxis = ce, this.elementAxis = le, this.groupSizeField = ge, this.elementSizeField = me, this.groupSpacing = e.vSpacing, this.elementSpacing = e.spacing) }, reflow: function (e) { this.box = e.clone(), this.reflowChildren() }, reflowChildren: function () { var e, t, i, n, o, r, s, a, l, c, d, u = this, h = this, f = h.box, p = h.elementAxis, m = h.groupAxis, g = h.elementSizeField, v = h.groupSizeField, _ = this.groupOptions(), b = _.groups, w = _.groupsSize, y = _.maxGroupElementsSize, k = b.length, x = f[m + 1] + this.alignStart(w, f[v]()); if (k) { for (e = x, t = 0; t < k; t++) { for (i = b[t], n = i.groupElements, o = f[p + 1], r = n.length, s = 0; s < r; s++)a = n[s], l = u.elementSize(a), c = e + u.alignStart(l[v], i.groupSize), (d = new st)[m + 1] = c, d[m + 2] = c + l[v], d[p + 1] = o, d[p + 2] = o + l[g], a.reflow(d), o += l[g] + u.elementSpacing; e += i.groupSize + u.groupSpacing } f[m + 1] = x, f[m + 2] = x + w, f[p + 2] = f[p + 1] + y } }, alignStart: function (e, t) { var i = 0, n = this.options.align; return n === fe || n === ue ? i = t - e : n === pe && (i = (t - e) / 2), i }, groupOptions: function () { var e, t, i, n = this, o = n.box, r = n.children, s = n.elementSizeField, a = n.groupSizeField, l = n.elementSpacing, c = n.groupSpacing, d = tt(o[s]()), u = r.length, h = [], f = 0, p = 0, m = 0, g = 0, v = []; for (e = 0; e < u; e++)(t = r[e]).box || t.reflow(o), i = this.elementSize(t), this.options.wrap && tt(p + l + i[s]) > d && (h.push({ groupElements: v, groupSize: f, groupElementsSize: p }), g = Math.max(g, p), m += c + f, f = 0, p = 0, v = []), f = Math.max(f, i[a]), p > 0 && (p += l), p += i[s], v.push(t); return h.push({ groupElements: v, groupSize: f, groupElementsSize: p }), g = Math.max(g, p), { groups: h, groupsSize: m += f, maxGroupElementsSize: g } }, elementSize: function (e) { return { width: e.box.width(), height: e.box.height() } }, createVisual: function () { } }), { vertical: !0, wrap: !0, vSpacing: 0, spacing: 0 }), vt = K.Text, f(_t = dt.extend({ init: function (e, t) { dt.fn.init.call(this, t), this.content = e, this.reflow(new st) }, reflow: function (e) { var t = this.options, i = t.size = Q.measureText(this.content, { font: t.font }); this.baseline = i.baseline, this.box = new st(e.x1, e.y1, e.x1 + i.width, e.y1 + i.height) }, createVisual: function () { var e = this.options, t = e.font, i = e.color, n = e.opacity, o = e.cursor; this.visual = new vt(this.content, this.box.toRect().topLeft(), { font: t, fill: { color: i, opacity: n }, cursor: o }) } }), { font: ke, color: ye }), bt = /\n|\\n/m, wt = ut.extend({ init: function (e, t) { ut.fn.init.call(this, t), this.content = e, this._initContainer(), !1 !== this.options._autoReflow && this.reflow(new st) }, _initContainer: function () { var e, t, i = this.options, n = (this.content + "").split(bt), o = new gt({ vertical: !0, align: i.align, wrap: !1 }), r = se({}, i, { opacity: 1, animation: null }); for (this.container = o, this.append(o), e = 0; e < n.length; e++)t = new _t(n[e].trim(), r), o.append(t) }, reflow: function (e) { var t, i, n, o, r = this.options, s = r.visual; this.container.options.align = r.align, s && !this._boxReflow ? ((t = e).hasSize() || (this._boxReflow = !0, this.reflow(t), this._boxReflow = !1, t = this.box), (i = this.visual = s(this.visualContext(t))) && (t = _(i.clippedBBox() || new te), i.options.zIndex = r.zIndex, i.options.noclip = r.noclip), this.box = this.contentBox = this.paddingBox = t) : (ut.fn.reflow.call(this, e), r.rotation && (n = c(r.margin), o = this.box.unpad(n), this.targetBox = e, this.normalBox = o.clone(), (o = this.rotate()).translate(n.left - n.right, n.top - n.bottom), this.rotatedBox = o.clone(), o.pad(n))) }, createVisual: function () { var e, t = this.options; t.visible && (this.visual = new Z({ transform: this.rotationTransform(), zIndex: t.zIndex, noclip: t.noclip }), this.hasBox() && (e = X.fromRect(this.paddingBox.toRect(), this.visualStyle()), this.visual.append(e))) }, renderVisual: function () { this.options.visual ? (this.addVisual(), this.createAnimation()) : ut.fn.renderVisual.call(this) }, visualOptions: function () { var e = this.options; return { background: e.background, border: e.border, color: e.color, font: e.font, margin: e.margin, padding: e.padding, visible: e.visible } }, visualContext: function (e) { var t = this; return { text: this.content, rect: e.toRect(), sender: this.getSender(), options: this.visualOptions(), createVisual: function () { return t._boxReflow = !0, t.reflow(e), t._boxReflow = !1, t.getDefaultVisual() } } }, getDefaultVisual: function () { this.createVisual(), this.renderChildren(); var e = this.visual; return delete this.visual, e }, rotate: function () { var e = this.options; return this.box.rotate(e.rotation), this.align(this.targetBox, le, e.align), this.align(this.targetBox, ce, e.vAlign), this.box }, rotationTransform: function () { var e, t, i, n, o = this.options.rotation; return o ? (e = this.normalBox.center(), t = e.x, i = e.y, n = this.rotatedBox.center(), ne().translate(n.x - t, n.y - i).rotate(o, [t, i])) : null } }), (yt = dt.extend({ init: function (t) { dt.fn.init.call(this, t), this.append(new wt(this.options.text, e.extend({}, this.options, { vAlign: this.options.position }))) }, reflow: function (e) { dt.fn.reflow.call(this, e), this.box.snapTo(e, le) } })).buildTitle = function (t, i, n) { var o, r = t; return "string" == typeof t && (r = { text: t }), (r = e.extend({ visible: !0 }, n, r)) && r.visible && r.text && (o = new yt(r), i.append(o)), o }, f(yt, { color: ye, position: de, align: pe, margin: c(5), padding: c(5) }), f(kt = wt.extend({ init: function (e, t, i, n, o) { wt.fn.init.call(this, t, o), this.text = t, this.value = e, this.index = i, this.dataItem = n, this.reflow(new st) }, visualContext: function (e) { var t = wt.fn.visualContext.call(this, e); return t.value = this.value, t.dataItem = this.dataItem, t.format = this.options.format, t.culture = this.options.culture, t }, click: function (e, t) { e.trigger(Ce, { element: Ke(t), value: this.value, text: this.text, index: this.index, dataItem: this.dataItem, axis: this.parent.options }) }, rotate: function () { var e, t; return this.options.alignRotation !== pe ? (e = this.normalBox.toRect(), t = this.rotationTransform(), this.box = _(e.bbox(t.matrix()))) : wt.fn.rotate.call(this), this.box }, rotationTransform: function () { var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _ = this.options, b = _.rotation; return b ? _.alignRotation === pe ? wt.fn.rotationTransform.call(this) : (e = ne().rotate(b).matrix(), t = this.normalBox.toRect(), i = this.targetBox.toRect(), n = _.rotationOrigin || de, o = n === de || n === ue ? le : ce, r = n === de || n === ue ? ce : le, s = n === de || n === he ? i.origin : i.bottomRight(), a = t.topLeft().transformCopy(e), l = t.topRight().transformCopy(e), c = t.bottomRight().transformCopy(e), d = t.bottomLeft().transformCopy(e), u = te.fromPoints(a, l, c, d), (h = {})[r] = i.origin[r] - u.origin[r], f = Math.abs(a[r] + h[r] - s[r]), p = Math.abs(l[r] + h[r] - s[r]), tt(f, xe) === tt(p, xe) ? (m = a, g = l) : p < f ? (m = l, g = c) : (m = a, g = d), v = m[o] + (g[o] - m[o]) / 2, h[o] = i.center()[o] - v, ne().translate(h.x, h.y).rotate(b)) : null } }), { _autoReflow: !1 }), xt = { format: function (e, t) { return t }, toString: function (e) { return e }, parseDate: function (e) { return new Date(e) } }, (Ct = J.extend({})).register = function (e) { xt = e }, Object.defineProperties && Object.defineProperties(Ct, { implementation: { get: function () { return xt } } }), St = /\{(\d+)(:[^\}]+)?\}/g, Tt = J.extend({ init: function (e) { this._intlService = e }, auto: function (e) { for (var t, i = [], n = arguments.length - 1; n-- > 0;)i[n] = arguments[n + 1]; return t = this.intlService, e.match(Be) ? t.format.apply(t, [e].concat(i)) : t.toString(i[0], e) }, localeAuto: function (e, t, i) { var n = this.intlService; return e.match(Be) ? e.replace(St, function (e, o, r) { var s = t[parseInt(o, 10)]; return n.toString(s, r ? r.substring(1) : "", i) }) : n.toString(t[0], e, i) } }), Object.defineProperties && Object.defineProperties(Tt.fn, { intlService: { get: function () { return this._intlService || Ct.implementation } } }), Dt = J.extend({ init: function (e, t) { void 0 === t && (t = {}), this._intlService = t.intlService, this.sender = t.sender || e, this.format = new Tt(t.intlService), this.chart = e }, notify: function (e, t) { this.chart.trigger(e, t) } }), Object.defineProperties && Object.defineProperties(Dt.fn, { intl: { get: function () { return this._intlService || Ct.implementation } } }), (Et = J.extend({})).register = function (e) { At = e }, Et.create = function (e, t) { if (At) return At.create(e, t) }, It = { compile: function (e) { return e } }, (Mt = J.extend({})).register = function (e) { It = e }, Mt.compile = function (e) { return It.compile(e) }, Rt = { ChartService: Dt, DomEventsBuilder: Et, FormatService: Tt, IntlService: Ct, TemplateService: Mt }, f(Ft = ut.extend({ init: function (e, t, i) { ut.fn.init.call(this, t), this.fields = e, this.chartService = i, this.render() }, hide: function () { this.options.visible = !1 }, show: function () { this.options.visible = !0 }, render: function () { var e, t, i, n, o, r, s, a, l, c = this.options; c.visible && (e = c.label, t = c.icon, i = new st, n = t.size, o = this.fields.text, je(e) && e.visible && (e.template ? (a = Mt.compile(e.template), o = a(this.fields)) : e.format && (o = this.chartService.format.auto(e.format, o)), e.color || (e.color = e.position === Re ? "#fff" : t.background), this.label = new wt(o, se({}, e)), e.position !== Re || je(n) || (t.type === Ee ? n = Math.max(this.label.box.width(), this.label.box.height()) : (r = this.label.box.width(), s = this.label.box.height()), i.wrap(this.label.box))), t.width = r || n || 7, t.height = s || n || 7, l = new ht(se({}, t)), this.marker = l, this.append(l), this.label && this.append(this.label), l.reflow(new st), this.wrapperBox = i.wrap(l.box)) }, reflow: function (e) { var t, i, n, o = this, r = o.options, s = o.label, a = o.marker, l = o.wrapperBox, c = e.center(), d = r.line.length, h = r.position; r.visible && (u(h, [he, fe]) ? h === he ? (n = l.alignTo(e, h).translate(-d, e.center().y - l.center().y), r.line.visible && (t = [e.x1, c.y], this.linePoints = [t, [n.x2, c.y]], i = n.clone().wrapPoint(t))) : (n = l.alignTo(e, h).translate(d, e.center().y - l.center().y), r.line.visible && (t = [e.x2, c.y], this.linePoints = [t, [n.x1, c.y]], i = n.clone().wrapPoint(t))) : h === ue ? (n = l.alignTo(e, h).translate(e.center().x - l.center().x, d), r.line.visible && (t = [c.x, e.y2], this.linePoints = [t, [c.x, n.y1]], i = n.clone().wrapPoint(t))) : (n = l.alignTo(e, h).translate(e.center().x - l.center().x, -d), r.line.visible && (t = [c.x, e.y1], this.linePoints = [t, [c.x, n.y2]], i = n.clone().wrapPoint(t))), a && a.reflow(n), s && (s.reflow(n), a && (r.label.position === De && s.box.alignTo(a.box, h), s.reflow(s.box))), this.contentBox = n, this.targetBox = e, this.box = i || n) }, createVisual: function () { ut.fn.createVisual.call(this), this.visual.options.noclip = this.options.noclip, this.options.visible && this.createLine() }, renderVisual: function () { var t = this, i = this.options, n = i.visual; i.visible && n ? (this.visual = n(e.extend(this.fields, { sender: this.getSender(), rect: this.targetBox.toRect(), options: { background: i.background, border: i.background, icon: i.icon, label: i.label, line: i.line, position: i.position, visible: i.visible }, createVisual: function () { t.createVisual(), t.renderChildren(); var e = t.visual; return delete t.visual, e } })), this.addVisual()) : ut.fn.renderVisual.call(this) }, createLine: function () { var e, t = this.options.line; this.linePoints && (i(e = X.fromPoints(this.linePoints, { stroke: { color: t.color, width: t.width, dashType: t.dashType } })), this.visual.append(e)) }, click: function (e, t) { var i = this.eventArgs(t); e.trigger(Se, i) || t.preventDefault() }, hover: function (e, t) { var i = this.eventArgs(t); e.trigger(Te, i) || t.preventDefault() }, leave: function (e) { e._unsetActivePoint() }, eventArgs: function (t) { var i = this.options; return e.extend(this.fields, { element: Ke(t), text: je(i.label) ? i.label.text : "", visual: this.visual }) } }), { icon: { visible: !0, type: Ee }, label: { position: Re, visible: !0, align: pe, vAlign: pe }, line: { visible: !0 }, visible: !0, position: de, zIndex: 2 }), f(zt = dt.extend({ init: function (e, t) { void 0 === t && (t = new Dt), dt.fn.init.call(this, e), this.chartService = t, this.options.visible || (this.options = se({}, this.options, { labels: { visible: !1 }, line: { visible: !1 }, margin: 0, majorTickSize: 0, minorTickSize: 0 })), this.options.minorTicks = se({}, { color: this.options.line.color, width: this.options.line.width, visible: this.options.minorTickType !== Ae }, this.options.minorTicks, { size: this.options.minorTickSize, align: this.options.minorTickType }), this.options.majorTicks = se({}, { color: this.options.line.color, width: this.options.line.width, visible: this.options.majorTickType !== Ae }, this.options.majorTicks, { size: this.options.majorTickSize, align: this.options.majorTickType }), this.options._deferLabels || this.createLabels(), this.createTitle(), this.createNotes() }, labelsRange: function () { return { min: this.options.labels.skip, max: this.labelsCount() } }, createLabels: function () { var e, t, i, n, r = this, s = this.options, a = s.vertical ? fe : pe, l = se({}, s.labels, { align: a, zIndex: s.zIndex }), c = Math.max(1, l.step); if (this.children = d(this.children, function (e) { return !(e instanceof kt) }), this.labels = [], l.visible) for (e = this.labelsRange(), o(t = l.rotation) && (l.alignRotation = t.align, l.rotation = t.angle), "auto" === l.rotation && (l.rotation = 0, s.autoRotateLabels = !0), i = e.min; i < e.max; i += c)(n = r.createAxisLabel(i, l)) && (r.append(n), r.labels.push(n)) }, lineBox: function () { var e = this.options, t = this.box, i = e.vertical, n = e.labels.mirror, o = n ? t.x1 : t.x2, r = n ? t.y2 : t.y1, s = e.line.width || 0; return i ? new st(o, t.y1, o, t.y2 - s) : new st(t.x1, r, t.x2 - s, r) }, createTitle: function () { var e, t = this.options, i = se({ rotation: t.vertical ? -90 : 0, text: "", zIndex: 1, visualSize: !0 }, t.title); i.visible && i.text && (e = new wt(i.text, i), this.append(e), this.title = e) }, createNotes: function () { var e, t, i, n = this, o = this.options, r = o.notes, s = r.data || []; for (this.notes = [], e = 0; e < s.length; e++)(t = se({}, r, s[e])).value = n.parseNoteValue(t.value), (i = new Ft({ value: t.value, text: t.label.text, dataItem: t }, t, n.chartService)).options.visible && (je(i.options.position) ? o.vertical && !u(i.options.position, [he, fe]) ? i.options.position = o.reverse ? he : fe : o.vertical || u(i.options.position, [de, ue]) || (i.options.position = o.reverse ? ue : de) : i.options.position = o.vertical ? o.reverse ? he : fe : o.reverse ? ue : de, n.append(i), n.notes.push(i)) }, parseNoteValue: function (e) { return e }, renderVisual: function () { dt.fn.renderVisual.call(this), this.createPlotBands() }, createVisual: function () { dt.fn.createVisual.call(this), this.createBackground(), this.createLine() }, gridLinesVisual: function () { var e = this._gridLines; return e || (e = this._gridLines = new Z({ zIndex: -2 }), this.appendVisual(this._gridLines)), e }, createTicks: function (e) { function t(t, i, r) { var a, l = t.length, c = Math.max(1, i.step); if (i.visible) for (a = i.skip; a < l; a += c)je(r) && a % r == 0 || (s.tickX = o ? n.x2 : n.x2 - i.size, s.tickY = o ? n.y1 - i.size : n.y1, s.position = t[a], e.append(b(s, i))) } var i = this.options, n = this.lineBox(), o = i.labels.mirror, r = i.majorTicks.visible ? i.majorUnit : 0, s = { vertical: i.vertical }; t(this.getMajorTickPositions(), i.majorTicks), t(this.getMinorTickPositions(), i.minorTicks, r / i.minorUnit) }, createLine: function () { var e, t, n = this.options, o = n.line, r = this.lineBox(); o.width > 0 && o.visible && ((e = new X({ stroke: { width: o.width, color: o.color, dashType: o.dashType } })).moveTo(r.x1, r.y1).lineTo(r.x2, r.y2), n._alignLines && i(e), (t = this._lineGroup = new Z).append(e), this.visual.append(t), this.createTicks(t)) }, getActualTickSize: function () { var e = this.options, t = 0; return e.majorTicks.visible && e.minorTicks.visible ? t = Math.max(e.majorTicks.size, e.minorTicks.size) : e.majorTicks.visible ? t = e.majorTicks.size : e.minorTicks.visible && (t = e.minorTicks.size), t }, createBackground: function () { var e = this.options, t = this.box, i = e.background; i && (this._backgroundPath = X.fromRect(t.toRect(), { fill: { color: i }, stroke: null }), this.visual.append(this._backgroundPath)) }, createPlotBands: function () { var e, t, i, n, o, r, s, a, l = this, c = this.options, u = c.plotBands || [], h = c.vertical, f = this.plotArea; if (0 !== u.length) { for (e = this._plotbandGroup = new Z({ zIndex: -1 }), t = d(this.pane.axes, function (e) { return e.options.vertical !== l.options.vertical })[0], i = 0; i < u.length; i++)n = u[i], o = void 0, r = void 0, h ? (o = (t || f.axisX).lineBox(), r = l.getSlot(n.from, n.to, !0)) : (o = l.getSlot(n.from, n.to, !0), r = (t || f.axisY).lineBox()), 0 !== o.width() && 0 !== r.height() && (s = new te([o.x1, r.y1], [o.width(), r.height()]), a = X.fromRect(s, { fill: { color: n.color, opacity: n.opacity }, stroke: null }), e.append(a)); this.appendVisual(e) } }, createGridLines: function (e) { function t(e, t, i) { var n, o, r = e.length, s = Math.max(1, t.step); if (t.visible) for (n = t.skip; n < r; n += s)u(o = tt(e[n]), f) || n % i == 0 || a && d === o || (h.position = o, p.append(w(h, t)), f.push(o)) } var i = this.options, n = i.minorGridLines, o = i.majorGridLines, r = i.minorUnit, s = i.vertical, a = e.options.line.visible, l = o.visible ? i.majorUnit : 0, c = e.lineBox(), d = c[s ? "y1" : "x1"], h = { lineStart: c[s ? "x1" : "y1"], lineEnd: c[s ? "x2" : "y2"], vertical: s }, f = [], p = this.gridLinesVisual(); return t(this.getMajorTickPositions(), o), t(this.getMinorTickPositions(), n, l / r), p.children }, reflow: function (e) { var t, i, n = this, o = n.options, r = n.labels, s = n.title, a = o.vertical, l = r.length, c = a ? me : ge, d = s ? s.box[c]() : 0, u = this.getActualTickSize() + o.margin + d, h = (this.getRoot() || {}).box || e, f = h[c](), p = 0; for (t = 0; t < l; t++)(i = r[t].box[c]()) + u <= f && (p = Math.max(p, i)); this.box = a ? new st(e.x1, e.y1, e.x1 + p + u, e.y2) : new st(e.x1, e.y1, e.x2, e.y1 + p + u), this.arrangeTitle(), this.arrangeLabels(), this.arrangeNotes() }, getLabelsTickPositions: function () { return this.getMajorTickPositions() }, labelTickIndex: function (e) { return e.index }, arrangeLabels: function () { var e, t, i, n, o, r, s, a, l, c, d = this.options, u = this.labels, h = !d.justified, f = d.vertical, p = this.lineBox(), m = d.labels.mirror, g = this.getLabelsTickPositions(), v = this.getActualTickSize() + d.margin; for (e = 0; e < u.length; e++)t = u[e], i = this.labelTickIndex(t), n = f ? t.box.height() : t.box.width(), o = g[i] - n / 2, r = void 0, s = void 0, a = void 0, f ? (h && (s = g[i], a = g[i + 1], o = s + (a - s) / 2 - n / 2), l = p.x2, m ? (l += v, t.options.rotationOrigin = he) : (l -= v + t.box.width(), t.options.rotationOrigin = fe), r = t.box.move(l, o)) : (h ? (s = g[i], a = g[i + 1]) : (s = o, a = o + n), c = p.y1, m ? (c -= v + t.box.height(), t.options.rotationOrigin = ue) : (c += v, t.options.rotationOrigin = de), r = new st(s, c, a, c + t.box.height())), t.reflow(r) }, autoRotateLabels: function () { var e, t, i, n, o, r, s; if (this.options.autoRotateLabels && !this.options.vertical) { for (e = this.getMajorTickPositions(), t = this.labels, n = 0; n < t.length; n++)if (o = e[n + 1] - e[n], (r = t[n].box).width() > o) { if (r.height() > o) { i = -90; break } i = -45 } if (i) { for (s = 0; s < t.length; s++)t[s].options.rotation = i, t[s].reflow(new st); return !0 } } }, arrangeTitle: function () { var e = this.options, t = this.title, i = e.labels.mirror, n = e.vertical; t && (n ? (t.options.align = i ? fe : he, t.options.vAlign = t.options.position) : (t.options.align = t.options.position, t.options.vAlign = i ? de : ue), t.reflow(this.box)) }, arrangeNotes: function () { var e, t, i, n, o = this; for (e = 0; e < this.notes.length; e++)t = o.notes[e], i = t.options.value, n = void 0, je(i) ? (o.shouldRenderNote(i) ? t.show() : t.hide(), n = o.noteSlot(i)) : t.hide(), t.reflow(n || o.lineBox()) }, noteSlot: function (e) { return this.getSlot(e) }, alignTo: function (e) { var t = e.lineBox(), i = this.options.vertical, n = i ? ce : le; this.box.snapTo(t, n), i ? this.box.shrink(0, this.lineBox().height() - t.height()) : this.box.shrink(this.lineBox().width() - t.width(), 0), this.box[n + 1] -= this.lineBox()[n + 1] - t[n + 1], this.box[n + 2] -= this.lineBox()[n + 2] - t[n + 2] }, axisLabelText: function (e, t, i) { var n, o = e; return i.template ? (n = Mt.compile(i.template), o = n({ value: e, dataItem: t, format: i.format, culture: i.culture })) : i.format && (o = this.chartService.format.localeAuto(i.format, [e], i.culture)), o }, slot: function (e, t, i) { var n = this.getSlot(e, t, i); if (n) return n.toRect() }, contentBox: function () { var e, t = this.box.clone(), i = this.labels; return i.length && (i[0].options.visible && t.wrap(i[0].box), (e = i[i.length - 1]).options.visible && t.wrap(e.box)), t }, limitRange: function (e, t, i, n, o) { var r, s, a, l = this.options; return e < i && o < 0 && (!je(l.min) || l.min <= i) || n < t && o > 0 && (!je(l.max) || n <= l.max) ? null : t < i && o > 0 || n < e && o < 0 ? { min: e, max: t } : (r = t - e, s = e, a = t, e < i ? (s = Ze(e, i, n), a = Ze(e + r, i + r, n)) : t > n && (a = Ze(t, i, n), s = Ze(t - r, i, n - r)), { min: s, max: a }) }, valueRange: function () { return { min: this.seriesMin, max: this.seriesMax } } }), { labels: { visible: !0, rotation: 0, mirror: !1, step: 1, skip: 0 }, line: { width: 1, color: ye, visible: !0 }, title: { visible: !0, position: pe }, majorTicks: { align: De, size: 4, skip: 0, step: 1 }, minorTicks: { align: De, size: 3, skip: 0, step: 1 }, axisCrossingValue: 0, majorTickType: De, minorTickType: Ae, majorGridLines: { skip: 0, step: 1 }, minorGridLines: { visible: !1, width: 1, color: ye, skip: 0, step: 1 }, margin: 5, visible: !0, reverse: !1, justified: !0, notes: { label: { text: "" } }, _alignLines: !0, _deferLabels: !1 }), f(Pt = zt.extend({ init: function (e, t) { zt.fn.init.call(this, e, t), this._ticks = {}, this._initCategories(this.options) }, _initCategories: function (e) { var t, i, n = (e.categories || []).slice(0), o = je(e.min), r = je(e.max); e.categories = n, (o || r) && n.length && (e.srcCategories = e.categories, t = o ? Math.floor(e.min) : 0, i = r ? e.justified ? Math.floor(e.max) + 1 : Math.ceil(e.max) : n.length, e.categories = e.categories.slice(t, i)) }, rangeIndices: function () { var e, t = this.options, i = t.categories.length || 1, n = s(t.min) ? t.min % 1 : 0; return e = s(t.max) && t.max % 1 != 0 && t.max < this.totalRange().max ? i - (1 - t.max % 1) : i - (t.justified ? 1 : 0), { min: n, max: e } }, totalRangeIndices: function (e) { var t, i, n = this.options, o = s(n.min) ? n.min : 0; return t = s(n.max) ? n.max : s(n.min) ? o + n.categories.length : (n.srcCategories || n.categories).length - (n.justified ? 1 : 0) || 1, e && (i = this.totalRange(), o = Ze(o, 0, i.max), t = Ze(t, 0, i.max)), { min: o, max: t } }, range: function () { var e = this.options; return { min: s(e.min) ? e.min : 0, max: s(e.max) ? e.max : e.categories.length } }, totalRange: function () { var e = this.options; return { min: 0, max: Math.max(this._seriesMax || 0, (e.srcCategories || e.categories).length) - (e.justified ? 1 : 0) } }, getScale: function () { var e = this.rangeIndices(), t = e.min, i = e.max, n = this.lineBox(), o = this.options.vertical ? n.height() : n.width(), r = o / (i - t || 1); return r * (this.options.reverse ? -1 : 1) }, getTickPositions: function (e) { for (var t = this.options, i = t.vertical, n = t.reverse, o = this.rangeIndices(), r = o.min, s = o.max, a = this.lineBox(), l = this.getScale(), c = a[(i ? ce : le) + (n ? 2 : 1)], d = [], u = r % 1 != 0 ? Math.floor(r / 1) + e : r; u <= s;)d.push(c + tt(l * (u - r), ve)), u += e; return d }, getLabelsTickPositions: function () { var e = this.getMajorTickPositions().slice(0), t = this.rangeIndices(), i = this.getScale(), n = this.lineBox(), o = this.options, r = o.vertical ? ce : le, s = o.reverse ? 2 : 1, a = o.reverse ? 1 : 2; return t.min % 1 != 0 && e.unshift(n[r + s] - i * (t.min % 1)), t.max % 1 != 0 && e.push(n[r + a] + i * (1 - t.max % 1)), e }, labelTickIndex: function (e) { var t = this.rangeIndices(), i = e.index; return t.min > 0 && (i -= Math.floor(t.min)), i }, arrangeLabels: function () { zt.fn.arrangeLabels.call(this), this.hideOutOfRangeLabels() }, hideOutOfRangeLabels: function () { var e, t, i, n, o, r = this.box, s = this.labels; s.length && (e = this.options.vertical ? ce : le, t = r[e + 1], i = r[e + 2], n = s[0], o = Xe(s), (n.box[e + 1] > i || n.box[e + 2] < t) && (n.options.visible = !1), (o.box[e + 1] > i || o.box[e + 2] < t) && (o.options.visible = !1)) }, getMajorTickPositions: function () { return this.getTicks().majorTicks }, getMinorTickPositions: function () { return this.getTicks().minorTicks }, getTicks: function () { var e = this.options, t = e.reverse, i = e.justified, n = this._ticks, o = this.rangeIndices(), r = this.lineBox(), s = r.getHash() + o.min + "," + o.max + t + i; return n._hash !== s && (n._hash = s, n.majorTicks = this.getTickPositions(1), n.minorTicks = this.getTickPositions(.5)), n }, getSlot: function (e, t, i) { var n, o, r = this.options, s = r.reverse, a = r.justified, l = r.vertical, c = this.rangeIndices(), d = c.min, u = l ? ce : le, h = this.lineBox(), f = this.getScale(), p = h[u + (s ? 2 : 1)], m = h.clone(), g = !je(t), v = nt(e, 0), _ = nt(t, v); return _ = Math.max(_ - 1, v), _ = Math.max(v, _), n = p + (v - d) * f, o = p + (_ + 1 - d) * f, g && a && (o = n), i && (n = Ze(n, h[u + 1], h[u + 2]), o = Ze(o, h[u + 1], h[u + 2])), m[u + 1] = s ? o : n, m[u + 2] = s ? n : o, m }, slot: function (e, t, i) { var n = e, o = t; return "string" == typeof n && (n = this.categoryIndex(n)), "string" == typeof o && (o = this.categoryIndex(o)), zt.fn.slot.call(this, n, o, i) }, pointCategoryIndex: function (e) { var t, i, n = this.options, o = n.reverse, r = n.justified, s = n.vertical, a = s ? ce : le, l = this.lineBox(), c = this.rangeIndices(), d = o ? c.max : c.min, u = this.getScale(), h = l[a + 1], f = l[a + 2], p = e[a]; return p < h || p > f ? null : (i = (t = d + (p - h) / u) % 1, r ? t = Math.round(t) : 0 === i && t > 0 && t--, Math.floor(t)) }, getCategory: function (e) { var t = this.pointCategoryIndex(e); return null === t ? null : this.options.categories[t] }, categoryIndex: function (e) { var t = this.options, i = (t.srcCategories || t.categories).indexOf(e); return i - Math.floor(t.min || 0) }, translateRange: function (e) { var t = this.options, i = this.lineBox(), n = t.vertical ? i.height() : i.width(), o = t.categories.length, r = n / o, s = tt(e / r, xe); return { min: s, max: o + s } }, zoomRange: function (e) { var t = this.totalRangeIndices(), i = this.totalRange(), n = i.min, o = i.max, r = Ze(t.min + e, n, o), s = Ze(t.max - e, n, o); if (s - r > 0) return { min: r, max: s } }, scaleRange: function (e) { var t = this.options.categories.length, i = e * t; return { min: -i, max: t + i } }, labelsCount: function () { var e = this.labelsRange(); return e.max - e.min }, labelsRange: function () { var e = this.options, t = e.justified, i = e.labels, n = this.totalRangeIndices(!0), o = n.min, r = n.max, s = Math.floor(o); return t ? (o = Math.ceil(o), r = Math.floor(r)) : (o = Math.floor(o), r = Math.ceil(r)), { min: (o > i.skip ? i.skip + i.step * Math.ceil((o - i.skip) / i.step) : i.skip) - s, max: (e.categories.length ? r + (t ? 1 : 0) : 0) - s } }, createAxisLabel: function (e, t) { var i = this.options, n = i.dataItems ? i.dataItems[e] : null, o = nt(i.categories[e], ""), r = this.axisLabelText(o, n, t); return new kt(o, r, e, n, t) }, shouldRenderNote: function (e) { var t = this.totalRangeIndices(); return Math.floor(t.min) <= e && e <= Math.ceil(t.max) }, noteSlot: function (e) { var t = this.options, i = e - Math.floor(t.min || 0); return this.getSlot(i) }, arrangeNotes: function () { zt.fn.arrangeNotes.call(this), this.hideOutOfRangeNotes() }, hideOutOfRangeNotes: function () { var e, t, i, n, o, r = this.notes, s = this.box; if (r && r.length) for (e = this.options.vertical ? ce : le, t = s[e + 1], i = s[e + 2], n = 0; n < r.length; n++)(o = r[n]).box && (i < o.box[e + 1] || o.box[e + 2] < t) && o.hide() }, pan: function (e) { var t = this.totalRangeIndices(!0), i = this.getScale(), n = tt(e / i, xe), o = this.totalRange(), r = t.min + n, s = t.max + n; return this.limitRange(r, s, 0, o.max, n) }, pointsRange: function (e, t) { var i = this.options, n = i.reverse, o = i.vertical, r = o ? ce : le, s = this.lineBox(), a = this.totalRangeIndices(!0), l = this.getScale(), c = s[r + (n ? 2 : 1)], d = e[r] - c, u = t[r] - c, h = a.min + d / l, f = a.min + u / l, p = Math.min(h, f), m = Math.max(h, f); if (m - p >= .01) return { min: p, max: m } }, valueRange: function () { return this.range() } }), { type: "category", categories: [], vertical: !1, majorGridLines: { visible: !1, width: 1, color: ye }, labels: { zIndex: 1 }, justified: !1, _deferLabels: !0 }), Xt = { years: Qt = 365 * ($t = 24 * (Gt = 60 * (jt = 60 * (qt = 1e3)))), months: Kt = 31 * $t, weeks: Yt = 7 * $t, days: $t, hours: Gt, minutes: jt, seconds: qt, milliseconds: 1 }, Zt = 3e5, Jt = { seconds: "HH:mm:ss", minutes: "HH:mm", hours: "HH:mm", days: "M/d", weeks: "M/d", months: "MMM 'yy", years: "yyyy" }, ei = .2, ti = [Bt = "milliseconds", Lt = "seconds", Ht = "minutes", Nt = "hours", Ot = "days", Vt = "weeks", Ut = "months", Wt = "years"], ii = "fit", f(ni = Pt.extend({ init: function (e, t) { var i, n, o; Pt.fn.init.call(this, e, t), i = t.intl, n = this.options, (n = se({ roundToBaseUnit: !0 }, n, { categories: L(i, n.categories), min: B(i, n.min), max: B(i, n.max) })).userSetBaseUnit = n.userSetBaseUnit || n.baseUnit, n.userSetBaseUnitStep = n.userSetBaseUnitStep || n.baseUnitStep, n.categories && n.categories.length > 0 ? (o = (n.baseUnit || "").toLowerCase(), o !== ii && !u(o, ti) && (n.baseUnit = this.defaultBaseUnit(n)), o !== ii && "auto" !== n.baseUnitStep || this.autoBaseUnit(n), this._groupsStart = T(n.categories[0], 0, n.baseUnit, n.weekStartDay), this.groupCategories(n)) : n.baseUnit = n.baseUnit || Ot, this.options = n }, _initCategories: function () { }, shouldRenderNote: function (e) { var t = this.range(), i = this.options.categories || []; return E(e, t.min) >= 0 && E(e, t.max) <= 0 && i.length }, parseNoteValue: function (e) { return B(this.chartService.intl, e) }, noteSlot: function (e) { return this.getSlot(e) }, translateRange: function (e) { var t, i, n = this.options, o = n.baseUnit, r = n.weekStartDay, s = n.vertical, a = this.lineBox(), l = s ? a.height() : a.width(), c = this.range(), d = l / (c.max - c.min), u = tt(e / d, xe); return c.min && c.max && (t = k(n.min || c.min, u), i = k(n.max || c.max, u), c = { min: T(t, 0, o, r), max: T(i, 0, o, r) }), c }, scaleRange: function (e) { var t, i, n = Math.abs(e), o = this.range(), r = o.min, s = o.max; if (r && s) { for (; n--;)t = I(r, s), i = Math.round(.1 * t), e < 0 ? (r = k(r, i), s = k(s, -i)) : (r = k(r, -i), s = k(s, i)); o = { min: r, max: s } } return o }, defaultBaseUnit: function (e) { var t, i, n, o, r, s = e.categories, a = je(s) ? s.length : 0, l = _e; for (n = 0; n < a; n++)(o = s[n]) && t && ((r = y(o, t)) > 0 && (l = Math.min(l, r), i = l >= Qt ? Wt : l >= Kt - 3 * $t ? Ut : l >= Yt ? Vt : l >= $t ? Ot : l >= Gt ? Nt : l >= jt ? Ht : Lt)), t = o; return i || Ot }, _categoryRange: function (e) { var t = e._range; return t || (t = e._range = p(e)), t }, totalRange: function () { return { min: 0, max: this.options.categories.length } }, rangeIndices: function () { var e = this.options, t = e.categories, i = e.baseUnit, n = e.baseUnitStep || 1, o = this.categoriesRange(), r = x(e.min || o.min), s = x(e.max || o.max), a = 0, l = 0; return t.length && (a = z(r, t[0], i, n), l = z(s, t[0], i, n), e.roundToBaseUnit && (a = Math.floor(a), l = e.justified ? Math.floor(l) : Math.ceil(l))), { min: a, max: l } }, labelsRange: function () { var e = this.options, t = e.labels, i = this.rangeIndices(), n = Math.floor(i.min), o = Math.ceil(i.max); return { min: n + t.skip, max: e.categories.length ? o + (e.justified ? 1 : 0) : 0 } }, categoriesRange: function () { var e = this.options, t = this._categoryRange(e.srcCategories || e.categories), i = x(t.max); return !e.justified && R(i, this._roundToTotalStep(i, e, !1)) && (i = this._roundToTotalStep(i, e, !0, !0)), { min: x(t.min), max: i } }, currentRange: function () { var e = this.options, t = !1 !== e.roundToBaseUnit, i = this.categoriesRange(), n = e.min, o = e.max; return n || (n = t ? this._roundToTotalStep(i.min, e, !1) : i.min), o || (o = t ? this._roundToTotalStep(i.max, e, !e.justified) : i.max), { min: n, max: o } }, datesRange: function () { var e = this._categoryRange(this.options.srcCategories || this.options.categories); return { min: x(e.min), max: x(e.max) } }, pan: function (e) { var t = this.options, i = this.lineBox(), n = t.vertical ? i.height() : i.width(), o = this.currentRange(), r = o.min, s = o.max, a = this.totalLimits(), l = n / (s - r), c = tt(e / l, xe), d = k(r, c), u = k(s, c), h = this.limitRange(M(d), M(u), M(a.min), M(a.max), c); if (h) return h.min = x(h.min), h.max = x(h.max), h.baseUnit = t.baseUnit, h.baseUnitStep = t.baseUnitStep || 1, h.userSetBaseUnit = t.userSetBaseUnit, h.userSetBaseUnitStep = t.userSetBaseUnitStep, h }, pointsRange: function (e, t) { var i = Pt.fn.pointsRange.call(this, e, t), n = this.currentRange(), o = this.rangeIndices(), r = I(n.max, n.min) / (o.max - o.min), s = this.options, a = k(n.min, i.min * r), l = k(n.min, i.max * r); return { min: a, max: l, baseUnit: s.userSetBaseUnit, baseUnitStep: s.userSetBaseUnitStep } }, zoomRange: function (e) { var t, i, n, o, r, s, a, l, c, d = this.options, u = this.totalLimits(), h = d.weekStartDay, f = d.baseUnit, p = d.baseUnitStep || 1, m = this.currentRange(), g = m.min, v = m.max, _ = T(g, e * p, f, h), b = T(v, -e * p, f, h); if (d.userSetBaseUnit === ii) if (t = d.autoBaseUnitSteps, i = d.maxDateGroups, n = Xe(t[f]) * i * Xt[f], o = I(v, g), r = I(b, _), s = ti.indexOf(f), r < Xt[f] && f !== Bt) f = ti[s - 1], a = Xe(t[f]), l = (o - (i - 1) * a * Xt[f]) / 2, _ = k(g, l), b = k(v, -l); else if (r > n && f !== Wt) { c = 0; do { f = ti[++s], c = 0, l = 2 * Xt[f]; do { a = t[f][c], c++ } while (c < t[f].length && l * a < o) } while (f !== Wt && l * a < o); (l = (l * a - o) / 2) > 0 && (_ = k(g, -l), b = k(v, l), _ = k(_, Ze(b, u.min, u.max) - b), b = k(b, Ze(_, u.min, u.max) - _)) } if (_ = x(Ze(_, u.min, u.max)), b = x(Ze(b, u.min, u.max)), _ && b && I(b, _) > 0) return { min: _, max: b, baseUnit: d.userSetBaseUnit, baseUnitStep: d.userSetBaseUnitStep } }, totalLimits: function () { var e = this.options, t = this.datesRange(), i = this._roundToTotalStep(x(t.min), e, !1), n = t.max; return e.justified || (n = this._roundToTotalStep(n, e, !0, R(n, this._roundToTotalStep(n, e, !1)))), { min: i, max: n } }, range: function (e) { var t = e || this.options, i = t.categories, n = t.baseUnit === ii, o = n ? ti[0] : t.baseUnit, r = t.baseUnitStep || 1, s = { baseUnit: o, baseUnitStep: r, weekStartDay: t.weekStartDay }, a = this._categoryRange(i), l = x(t.min || a.min), c = x(t.max || a.max); return { min: this._roundToTotalStep(l, s, !1), max: this._roundToTotalStep(c, s, !0, !0) } }, autoBaseUnit: function (e) { for (var t, i, n, o = this._categoryRange(e.categories), r = x(e.max || o.max) - x(e.min || o.min), s = e.maxDateGroups || this.options.maxDateGroups, a = e.baseUnit === ii, l = 0, c = a ? ti[l++] : e.baseUnit, d = r / Xt[c], u = d, h = se({}, this.options.autoBaseUnitSteps, e.autoBaseUnitSteps); !i || d >= s;)if (t = t || h[c].slice(0), n = t.shift()) d = u / (i = n); else { if (c === Xe(ti)) { i = Math.ceil(u / s); break } if (!a) { d > s && (i = Math.ceil(u / s)); break } c = ti[l++] || Xe(ti), u = r / Xt[c], t = null } e.baseUnitStep = i, e.baseUnit = c }, groupCategories: function (e) { var t, i, n = e.categories, o = e.baseUnit, r = e.baseUnitStep || 1, s = x(p(n).max), a = this.range(e), l = a.min, c = a.max, d = []; for (i = l; i < c && (d.push(i), !((t = T(i, r, o, e.weekStartDay)) > s) || e.max); i = t); e.srcCategories = n, e.categories = d }, _roundToTotalStep: function (e, t, i, n) { var o, r, s = t || this.options, a = s.baseUnit, l = s.baseUnitStep || 1, c = this._groupsStart; return c ? (o = z(e, c, a, l), r = i ? Math.ceil(o) : Math.floor(o), n && r++, T(c, r * l, a, s.weekStartDay)) : T(e, i ? l : 0, a, s.weekStartDay) }, createAxisLabel: function (e, t) { var i, n, o = this.options, r = o.dataItems ? o.dataItems[e] : null, s = o.categories[e], a = o.baseUnit, l = t.dateFormats[a], c = !0; if (o.justified ? (i = D(s, a, o.weekStartDay), c = R(i, s)) : o.roundToBaseUnit || (c = !R(this.range().max, s)), c && (t.format = t.format || l, n = this.axisLabelText(s, r, t))) return new kt(s, n, e, r, t) }, categoryIndex: function (e) { var t = this.options, i = t.categories, n = -1; return i.length && (n = Math.floor(z(x(e), i[0], t.baseUnit, t.baseUnitStep || 1))), n }, getSlot: function (e, t, i) { var n = e, o = t; return typeof n === ze && (n = this.categoryIndex(n)), typeof o === ze && (o = this.categoryIndex(o)), Pt.fn.getSlot.call(this, n, o, i) }, valueRange: function () { var e = this.options, t = this._categoryRange(e.srcCategories || e.categories); return { min: x(t.min), max: x(t.max) } } }), { type: Pe, labels: { dateFormats: Jt }, autoBaseUnitSteps: { milliseconds: [1, 10, 100], seconds: [1, 2, 5, 15, 30], minutes: [1, 2, 5, 15, 30], hours: [1, 2, 3], days: [1, 2, 3], weeks: [1, 2], months: [1, 2, 3, 6], years: [1, 2, 3, 5, 10, 25, 50] }, maxDateGroups: 10 }), oi = Math.pow(10, 1 - xe), f(ri = zt.extend({ init: function (e, t, i, n) { var o = U(e, t, i), r = function (e, t) { return { min: je(t.min) ? Math.min(e.min, t.min) : e.min, max: je(t.max) ? Math.max(e.max, t.max) : e.max, majorUnit: e.majorUnit } }(o, i); zt.fn.init.call(this, function (e, t) { var i, n = t; return t && ((i = je(t.min) || je(t.max)) && t.min === t.max && (t.min > 0 ? t.min = 0 : t.max = 1), t.majorUnit ? (e.min = N(e.min, t.majorUnit), e.max = O(e.max, t.majorUnit)) : i && (n = se(e, t), e.majorUnit = H(n.min, n.max))), e.minorUnit = (n.majorUnit || e.majorUnit) / 5, se(e, n) }(o, i), n), this.totalMin = r.min, this.totalMax = r.max, this.totalMajorUnit = r.majorUnit, this.seriesMin = e, this.seriesMax = t }, startValue: function () { return 0 }, range: function () { var e = this.options; return { min: e.min, max: e.max } }, getDivisions: function (e) { var t, i; return 0 === e ? 1 : (t = this.options, i = t.max - t.min, Math.floor(tt(i / e, ve)) + 1) }, getTickPositions: function (e, t) { var i, n = this.options, o = n.vertical, r = n.reverse, s = this.lineBox(), a = o ? s.height() : s.width(), l = n.max - n.min, c = a / l, d = e * c, u = this.getDivisions(e), h = (o ? -1 : 1) * (r ? -1 : 1), f = 1 === h ? 1 : 2, p = [], m = s[(o ? ce : le) + f], g = 0; for (t && (g = t / e), i = 0; i < u; i++)i % g != 0 && p.push(tt(m, ve)), m += d * h; return p }, getMajorTickPositions: function () { return this.getTickPositions(this.options.majorUnit) }, getMinorTickPositions: function () { return this.getTickPositions(this.options.minorUnit) }, getSlot: function (e, t, i) { var n, o, r, s, a, l, c, d, u, h, f, p, m; return void 0 === i && (i = !1), n = this.options, o = n.vertical, r = n.reverse, s = o ? ce : le, a = this.lineBox(), l = a[s + (r ? 2 : 1)], c = o ? a.height() : a.width(), d = (r ? -1 : 1) * (c / (n.max - n.min)), u = new st(a.x1, a.y1, a.x1, a.y1), f = t, je(h = e) || (h = f || 0), je(f) || (f = h || 0), i && (h = Math.max(Math.min(h, n.max), n.min), f = Math.max(Math.min(f, n.max), n.min)), o ? (p = n.max - Math.max(h, f), m = n.max - Math.min(h, f)) : (p = Math.min(h, f) - n.min, m = Math.max(h, f) - n.min), u[s + 1] = V(l + d * (r ? m : p)), u[s + 2] = V(l + d * (r ? p : m)), u }, getValue: function (e) { var t = this.options, i = t.vertical, n = t.reverse, o = +t.max, r = +t.min, s = i ? ce : le, a = this.lineBox(), l = a[s + (n ? 2 : 1)], c = i ? a.height() : a.width(), d = n ? -1 : 1, u = d * (e[s] - l), h = (o - r) / c, f = u * h; return u < 0 || u > c ? null : tt(i ? o - f : r + f, xe) }, translateRange: function (e) { var t = this.options, i = t.vertical, n = t.reverse, o = t.max, r = t.min, s = this.lineBox(), a = i ? s.height() : s.width(), l = o - r, c = a / l, d = tt(e / c, xe); return !i && !n || i && n || (d = -d), { min: r + d, max: o + d } }, scaleRange: function (e) { var t = this.options, i = -e * t.majorUnit; return { min: t.min - i, max: t.max + i } }, labelsCount: function () { return this.getDivisions(this.options.majorUnit) }, createAxisLabel: function (e, t) { var i = this.options, n = tt(i.min + e * i.majorUnit, xe), o = this.axisLabelText(n, null, t); return new kt(n, o, e, null, t) }, shouldRenderNote: function (e) { var t = this.range(); return t.min <= e && e <= t.max }, pan: function (e) { var t = this.translateRange(e); return this.limitRange(t.min, t.max, this.totalMin, this.totalMax) }, pointsRange: function (e, t) { var i = this.getValue(e), n = this.getValue(t), o = Math.min(i, n), r = Math.max(i, n); if (this.isValidRange(o, r)) return { min: o, max: r } }, zoomRange: function (e) { var t = this.totalMin, i = this.totalMax, n = this.scaleRange(e), o = Ze(n.min, t, i), r = Ze(n.max, t, i); if (this.isValidRange(o, r)) return { min: o, max: r } }, isValidRange: function (e, t) { return t - e > oi } }), { type: "numeric", min: 0, max: 1, vertical: !0, majorGridLines: { visible: !0, width: 1, color: ye }, labels: { format: "#.####################" }, zIndex: 1 }), f(si = zt.extend({ init: function (e, t, i, n) { var o = x(e), r = x(t), s = n.intl, a = i || {}; a = se(a || {}, { min: B(s, a.min), max: B(s, a.max), axisCrossingValue: L(s, a.axisCrossingValues || a.axisCrossingValue) }), a = q(o, r, a), zt.fn.init.call(this, a, n), this.seriesMin = o, this.seriesMax = r, this.totalMin = M(D(M(o) - 1, a.baseUnit)), this.totalMax = M(A(M(r) + 1, a.baseUnit)) }, range: function () { var e = this.options; return { min: e.min, max: e.max } }, getDivisions: function (e) { var t = this.options; return Math.floor(P(t.min, t.max, t.baseUnit) / e + 1) }, getTickPositions: function (e) { var t, i, n, o = this.options, r = o.vertical, s = this.lineBox(), a = (r ? -1 : 1) * (o.reverse ? -1 : 1), l = 1 === a ? 1 : 2, c = s[(r ? ce : le) + l], d = this.getDivisions(e), u = I(o.max, o.min), h = r ? s.height() : s.width(), f = h / u, p = [c]; for (t = 1; t < d; t++)i = T(o.min, t * e, o.baseUnit), n = c + I(i, o.min) * f * a, p.push(tt(n, ve)); return p }, getMajorTickPositions: function () { return this.getTickPositions(this.options.majorUnit) }, getMinorTickPositions: function () { return this.getTickPositions(this.options.minorUnit) }, getSlot: function (e, t, i) { return ri.prototype.getSlot.call(this, x(e), x(t), i) }, getValue: function (e) { var t = ri.prototype.getValue.call(this, e); return null !== t ? x(t) : null }, labelsCount: function () { return this.getDivisions(this.options.majorUnit) }, createAxisLabel: function (e, t) { var i, n, o = this.options, r = e * o.majorUnit, s = o.min; return r > 0 && (s = T(s, r, o.baseUnit)), i = t.dateFormats[o.baseUnit], t.format = t.format || i, n = this.axisLabelText(s, null, t), new kt(s, n, e, null, t) }, translateRange: function (e, t) { var i = this.options, n = i.baseUnit, o = i.weekStartDay, r = this.lineBox(), s = i.vertical ? r.height() : r.width(), a = this.range(), l = s / I(a.max, a.min), c = tt(e / l, xe), d = k(i.min, c), u = k(i.max, c); return t || (d = T(d, 0, n, o), u = T(u, 0, n, o)), { min: d, max: u } }, scaleRange: function (e) { for (var t, i, n = this.options, o = n.min, r = n.max, s = Math.abs(e); s--;)t = I(o, r), i = Math.round(.1 * t), e < 0 ? (o = k(o, i), r = k(r, -i)) : (o = k(o, -i), r = k(r, i)); return { min: o, max: r } }, shouldRenderNote: function (e) { var t = this.range(); return E(e, t.min) >= 0 && E(e, t.max) <= 0 }, pan: function (e) { var t = this.translateRange(e, !0), i = this.limitRange(M(t.min), M(t.max), this.totalMin, this.totalMax); if (i) return { min: x(i.min), max: x(i.max) } }, pointsRange: function (e, t) { var i = this.getValue(e), n = this.getValue(t), o = Math.min(i, n), r = Math.max(i, n); return { min: x(o), max: x(r) } }, zoomRange: function (e) { var t = this.scaleRange(e), i = x(Ze(M(t.min), this.totalMin, this.totalMax)), n = x(Ze(M(t.max), this.totalMin, this.totalMax)); return { min: i, max: n } } }), { type: Pe, majorGridLines: { visible: !0, width: 1, color: ye }, labels: { dateFormats: Jt } }), ai = zt.extend({ init: function (e, t, i, n) { var o = se({ majorUnit: 10, min: e, max: t }, i), r = o.majorUnit, s = function (e, t) { var i = tt(G(e, t), xe) % 1; return e <= 0 ? t : 0 !== i && (i < .3 || i > .9) ? Math.pow(t, G(e, t) + .2) : Math.pow(t, Math.ceil(G(e, t))) }(t, r), a = function (e, t, i) { var n = i.majorUnit, o = e; return e <= 0 ? o = t <= 1 ? Math.pow(n, -2) : 1 : i.narrowRange || (o = Math.pow(n, Math.floor(G(e, n)))), o }(e, t, o), l = function (e, t, i, n) { var o = i.min, r = i.max; return je(i.axisCrossingValue) && i.axisCrossingValue <= 0 && j(), je(n.max) ? n.max <= 0 && j() : r = t, je(n.min) ? n.min <= 0 && j() : o = e, { min: o, max: r } }(a, s, o, i); o.max = l.max, o.min = l.min, o.minorUnit = i.minorUnit || tt(r - 1, xe), zt.fn.init.call(this, o, n), this.totalMin = je(i.min) ? Math.min(a, i.min) : a, this.totalMax = je(i.max) ? Math.max(s, i.max) : s, this.logMin = tt(G(l.min, r), xe), this.logMax = tt(G(l.max, r), xe), this.seriesMin = e, this.seriesMax = t, this.createLabels() }, startValue: function () { return this.options.min }, getSlot: function (e, t, i) { var n, o, r = this, s = r.options, a = r.logMin, l = r.logMax, c = s.reverse, d = s.vertical, u = s.majorUnit, h = d ? ce : le, f = this.lineBox(), p = f[h + (c ? 2 : 1)], m = d ? f.height() : f.width(), g = c ? -1 : 1, v = g * (m / (l - a)), _ = new st(f.x1, f.y1, f.x1, f.y1), b = e, w = t; return je(b) || (b = w || 1), je(w) || (w = b || 1), b <= 0 || w <= 0 ? null : (i && (b = Math.max(Math.min(b, s.max), s.min), w = Math.max(Math.min(w, s.max), s.min)), b = G(b, u), w = G(w, u), d ? (n = l - Math.max(b, w), o = l - Math.min(b, w)) : (n = Math.min(b, w) - a, o = Math.max(b, w) - a), _[h + 1] = V(p + v * (c ? o : n)), _[h + 2] = V(p + v * (c ? n : o)), _) }, getValue: function (e) { var t, i = this, n = i.options, o = i.logMin, r = i.logMax, s = n.reverse, a = n.vertical, l = n.majorUnit, c = this.lineBox(), d = a === s ? 1 : -1, u = 1 === d ? 1 : 2, h = a ? c.height() : c.width(), f = (r - o) / h, p = a ? ce : le, m = c[p + u], g = d * (e[p] - m), v = g * f; return g < 0 || g > h ? null : (t = o + v, tt(Math.pow(l, t), xe)) }, range: function () { var e = this.options; return { min: e.min, max: e.max } }, scaleRange: function (e) { var t = this.options.majorUnit, i = -e; return { min: Math.pow(t, this.logMin - i), max: Math.pow(t, this.logMax + i) } }, translateRange: function (e) { var t = this, i = t.options, n = t.logMin, o = t.logMax, r = i.reverse, s = i.vertical, a = i.majorUnit, l = this.lineBox(), c = s ? l.height() : l.width(), d = c / (o - n), u = tt(e / d, xe); return !s && !r || s && r || (u = -u), { min: Math.pow(a, n + u), max: Math.pow(a, o + u) } }, labelsCount: function () { var e = Math.floor(this.logMax), t = Math.floor(e - this.logMin) + 1; return t }, getMajorTickPositions: function () { var e = []; return this.traverseMajorTicksPositions(function (t) { e.push(t) }, { step: 1, skip: 0 }), e }, createTicks: function (e) { function t(t, i) { l.tickX = s ? a.x2 : a.x2 - i.size, l.tickY = s ? a.y1 - i.size : a.y1, l.position = t, e.append(b(l, i)) } var i = this.options, n = i.majorTicks, o = i.minorTicks, r = i.vertical, s = i.labels.mirror, a = this.lineBox(), l = { vertical: r }; return n.visible && this.traverseMajorTicksPositions(t, n), o.visible && this.traverseMinorTicksPositions(t, o), [] }, createGridLines: function (e) { function t(e, t) { u(e, l) || (a.position = e, c.append(w(a, t)), l.push(e)) } var i = this.options, n = i.minorGridLines, o = i.majorGridLines, r = i.vertical, s = e.lineBox(), a = { lineStart: s[r ? "x1" : "y1"], lineEnd: s[r ? "x2" : "y2"], vertical: r }, l = [], c = this.gridLinesVisual(); return o.visible && this.traverseMajorTicksPositions(t, o), n.visible && this.traverseMinorTicksPositions(t, n), c.children }, traverseMajorTicksPositions: function (e, t) { var i, n, o = this._lineOptions(), r = o.lineStart, s = o.step, a = this.logMin, l = this.logMax; for (i = Math.ceil(a) + t.skip; i <= l; i += t.step)n = tt(r + s * (i - a), xe), e(n, t) }, traverseMinorTicksPositions: function (e, t) { var i, n, o, r, s, a = this.options, l = a.min, c = a.max, d = a.minorUnit, u = a.majorUnit, h = this._lineOptions(), f = h.lineStart, p = h.step, m = this.logMin, g = this.logMax, v = Math.floor(m); for (i = v; i < g; i++)for (n = this._minorIntervalOptions(i), o = t.skip; o < d && !((r = n.value + o * n.minorStep) > c); o += t.step)r >= l && (s = tt(f + p * (G(r, u) - m), xe), e(s, t)) }, createAxisLabel: function (e, t) { var i = Math.ceil(this.logMin + e), n = Math.pow(this.options.majorUnit, i), o = this.axisLabelText(n, null, t); return new kt(n, o, e, null, t) }, shouldRenderNote: function (e) { var t = this.range(); return t.min <= e && e <= t.max }, pan: function (e) { var t = this.translateRange(e); return this.limitRange(t.min, t.max, this.totalMin, this.totalMax, -e) }, pointsRange: function (e, t) { var i = this.getValue(e), n = this.getValue(t), o = Math.min(i, n), r = Math.max(i, n); return { min: o, max: r } }, zoomRange: function (e) { var t = this, i = t.options, n = t.totalMin, o = t.totalMax, r = this.scaleRange(e), s = Ze(r.min, n, o), a = Ze(r.max, n, o), l = i.majorUnit, c = a > s && i.min && i.max && tt(G(i.max, l) - G(i.min, l), xe) < 1, d = !(i.min === n && i.max === o) && tt(G(a, l) - G(s, l), xe) >= 1; if (c || d) return { min: s, max: a } }, _minorIntervalOptions: function (e) { var t = this.options, i = t.minorUnit, n = t.majorUnit, o = Math.pow(n, e), r = Math.pow(n, e + 1), s = r - o, a = s / i; return { value: o, minorStep: a } }, _lineOptions: function () { var e = this.options, t = e.reverse, i = e.vertical, n = i ? ce : le, o = this.lineBox(), r = i === t ? 1 : -1, s = 1 === r ? 1 : 2, a = i ? o.height() : o.width(), l = r * (a / (this.logMax - this.logMin)), c = o[n + s]; return { step: l, lineStart: c, lineBox: o } } }), f(ai, { type: "log", majorUnit: 10, minorUnit: 1, axisCrossingValue: 1, vertical: !0, majorGridLines: { visible: !0, width: 1, color: ye }, zIndex: 1, _deferLabels: !0 }), li = { createGridLines: function (e) { var t, i, n = this.options, o = Math.abs(this.box.center().y - e.lineBox().y1), r = [], s = !1; return n.majorGridLines.visible && (t = this.majorGridLineAngles(e), s = !0, r = this.renderMajorGridLines(t, o, n.majorGridLines)), n.minorGridLines.visible && (i = this.minorGridLineAngles(e, s), We(r, this.renderMinorGridLines(i, o, n.minorGridLines, e, s))), r }, renderMajorGridLines: function (e, t, i) { return this.renderGridLines(e, t, i) }, renderMinorGridLines: function (e, t, i, n, o) { var r = this.radiusCallback && this.radiusCallback(t, n, o); return this.renderGridLines(e, t, i, r) }, renderGridLines: function (e, t, i, n) { var o, r, s = { stroke: { width: i.width, color: i.color, dashType: i.dashType } }, a = this.box.center(), l = new ie([a.x, a.y], t), c = this.gridLinesVisual(); for (o = 0; o < e.length; o++)r = new X(s), n && (l.radius = n(e[o])), r.moveTo(l.center).lineTo(l.pointAt(e[o] + 180)), c.append(r); return c.children }, gridLineAngles: function (e, t, i, n, o) { var r = this, s = this.intervals(t, i, n, o), a = e.options, l = a.visible && !1 !== (a.line || {}).visible; return h(s, function (e) { var t = r.intervalAngle(e); if (!l || 90 !== t) return t }) } }, f(ci = Pt.extend({ range: function () { return { min: 0, max: this.options.categories.length } }, reflow: function (e) { this.box = e, this.reflowLabels() }, lineBox: function () { return this.box }, reflowLabels: function () { var e, t, i = this.labels, n = this.options.labels, o = n.skip || 0, r = n.step || 1, s = new st; for (e = 0; e < i.length; e++)i[e].reflow(s), t = i[e].box, i[e].reflow(this.getSlot(o + e * r).adjacentBox(0, t.width(), t.height())) }, intervals: function (e, t, i, n) { var o, r, s, a, l, c, d, h; for (void 0 === n && (n = !1), o = this.options, r = o.categories.length, a = 360 / (s = r / e || 1), l = i || 1, c = [], d = 0, h = t || 0; h < s; h += l)d = o.reverse ? 360 - h * a : h * a, d = tt(d, ve) % 360, n && u(d, n) || c.push(d); return c }, majorIntervals: function () { return this.intervals(1) }, minorIntervals: function () { return this.intervals(.5) }, intervalAngle: function (e) { return (360 + e + this.options.startAngle) % 360 }, majorAngles: function () { var e = this; return h(this.majorIntervals(), function (t) { return e.intervalAngle(t) }) }, createLine: function () { return [] }, majorGridLineAngles: function (e) { var t = this.options.majorGridLines; return this.gridLineAngles(e, 1, t.skip, t.step) }, minorGridLineAngles: function (e, t) { var i = this.options, n = i.minorGridLines, o = i.majorGridLines, r = t ? this.intervals(1, o.skip, o.step) : null; return this.gridLineAngles(e, .5, n.skip, n.step, r) }, radiusCallback: function (e, t, i) { var n, o, r; if (t.options.type !== Me) return n = et(360 / (2 * this.options.categories.length)), o = Math.cos(n) * e, r = this.majorAngles(), function (t) { return !i && u(t, r) ? e : o } }, createPlotBands: function () { var e, t, i, n, o, r, s, a = this.options.plotBands || [], l = this._plotbandGroup = new Z({ zIndex: -1 }); for (e = 0; e < a.length; e++)t = a[e], i = this.plotBandSlot(t), n = this.getSlot(t.from), o = t.from - Math.floor(t.from), i.startAngle += o * n.angle, r = Math.ceil(t.to) - t.to, i.angle -= (r + o) * n.angle, s = ct.current.createRing(i, { fill: { color: t.color, opacity: t.opacity }, stroke: { opacity: t.opacity } }), l.append(s); this.appendVisual(l) }, plotBandSlot: function (e) { return this.getSlot(e.from, e.to - 1) }, getSlot: function (e, t) { var i, n, o, r = this.options, s = r.justified, a = this.box, l = this.majorAngles(), c = l.length, d = 360 / c, u = e; return r.reverse && !s && (u = (u + 1) % c), u = Ze(Math.floor(u), 0, c - 1), i = l[u], s && ((i -= d / 2) < 0 && (i += 360)), n = Ze(Math.ceil(t || u), u, c - 1), o = d * (n - u + 1), new at(a.center(), 0, a.height() / 2, i, o) }, slot: function (e, t) { var i = this.getSlot(e, t), n = i.startAngle + 180, o = n + i.angle; return new ee.Arc([i.center.x, i.center.y], { startAngle: n, endAngle: o, radiusX: i.radius, radiusY: i.radius }) }, pointCategoryIndex: function (e) { var t, i = this.options.categories.length, n = null; for (t = 0; t < i; t++)if (this.getSlot(t).containsPoint(e)) { n = t; break } return n } }), { startAngle: 90, labels: { margin: c(10) }, majorGridLines: { visible: !0 }, justified: !0 }), se(ci.prototype, li), f(di = zt.extend({ init: function (e, t) { zt.fn.init.call(this, e, t); var i = this.options; i.minorUnit = i.minorUnit || i.majorUnit / 2 }, getDivisions: function (e) { return ri.prototype.getDivisions.call(this, e) - 1 }, reflow: function (e) { this.box = e, this.reflowLabels() }, reflowLabels: function () { var e, t, i = this, n = i.options, o = i.labels, r = i.options.labels, s = r.skip || 0, a = r.step || 1, l = new st, c = this.intervals(n.majorUnit, s, a); for (e = 0; e < o.length; e++)o[e].reflow(l), t = o[e].box, o[e].reflow(this.getSlot(c[e]).adjacentBox(0, t.width(), t.height())) }, lineBox: function () { return this.box }, intervals: function (e, t, i, n) { var o, r, s, a, l, c; for (void 0 === n && (n = !1), o = this.options.min, r = this.getDivisions(e), s = [], a = i || 1, l = t || 0; l < r; l += a)c = (360 + o + l * e) % 360, n && u(c, n) || s.push(c); return s }, majorIntervals: function () { return this.intervals(this.options.majorUnit) }, minorIntervals: function () { return this.intervals(this.options.minorUnit) }, intervalAngle: function (e) { return (540 - e - this.options.startAngle) % 360 }, createLine: function () { return [] }, majorGridLineAngles: function (e) { var t = this.options.majorGridLines; return this.gridLineAngles(e, this.options.majorUnit, t.skip, t.step) }, minorGridLineAngles: function (e, t) { var i = this.options, n = i.minorGridLines, o = i.majorGridLines, r = t ? this.intervals(i.majorUnit, o.skip, o.step) : null; return this.gridLineAngles(e, i.minorUnit, n.skip, n.step, r) }, plotBandSlot: function (e) { return this.getSlot(e.from, e.to) }, getSlot: function (e, t) { var i, n = this.options, o = this.box, r = n.startAngle, s = Ze(e, n.min, n.max), a = Ze(t || s, s, n.max); return n.reverse && (s *= -1, a *= -1), (a = (540 - a - r) % 360) < (s = (540 - s - r) % 360) && (i = s, s = a, a = i), new at(o.center(), 0, o.height() / 2, s, a - s) }, slot: function (e, t) { var i, n, o, r, s, a, l; return void 0 === t && (t = e), i = this.options, n = 360 - i.startAngle, o = this.getSlot(e, t), r = Math.min(e, t), s = Math.max(e, t), i.reverse ? (a = r, l = s) : (a = 360 - s, l = 360 - r), a = (a + n) % 360, l = (l + n) % 360, new ee.Arc([o.center.x, o.center.y], { startAngle: a, endAngle: l, radiusX: o.radius, radiusY: o.radius }) }, getValue: function (e) { var t = this.options, i = this.box.center(), n = e.x - i.x, o = e.y - i.y, r = Math.round(Ge(Math.atan2(o, n))), s = t.startAngle; return t.reverse || (r *= -1, s *= -1), (r + s + 360) % 360 }, valueRange: function () { return { min: 0, max: 2 * Math.PI } } }), { type: "polar", startAngle: 0, reverse: !1, majorUnit: 60, min: 0, max: 360, labels: { margin: c(10) }, majorGridLines: { color: ye, visible: !0, width: 1 }, minorGridLines: { color: "#aaa" } }), se(di.prototype, li, { createPlotBands: ci.prototype.createPlotBands, majorAngles: ci.prototype.majorAngles, range: ri.prototype.range, labelsCount: ri.prototype.labelsCount, createAxisLabel: ri.prototype.createAxisLabel }), ui = { options: { majorGridLines: { visible: !0 } }, createPlotBands: function () { var e, t, i, n, o, r, s, a, l, c, d = this.options, u = d.majorGridLines.type, h = d.plotBands; for (void 0 === h && (h = []), e = this.plotArea.polarAxis, t = e.majorAngles(), i = e.box.center(), n = this._plotbandGroup = new Z({ zIndex: -1 }), o = 0; o < h.length; o++)r = h[o], s = { fill: { color: r.color, opacity: r.opacity }, stroke: { opacity: r.opacity } }, a = this.getSlot(r.from, r.to, !0), l = new at(i, i.y - a.y2, i.y - a.y1, 0, 360), c = void 0, c = u === Me ? ct.current.createRing(l, s) : X.fromPoints(this.plotBandPoints(l, t), s).close(), n.append(c); this.appendVisual(n) }, plotBandPoints: function (e, t) { var i, n = [], o = [], r = [e.center.x, e.center.y], s = new ie(r, e.innerRadius), a = new ie(r, e.radius); for (i = 0; i < t.length; i++)n.push(s.pointAt(t[i] + 180)), o.push(a.pointAt(t[i] + 180)); return n.reverse(), n.push(n[0]), o.push(o[0]), o.concat(n) }, createGridLines: function (e) { var t, i = this.options, n = this.radarMajorGridLinePositions(), o = e.majorAngles(), r = e.box.center(), s = []; return i.majorGridLines.visible && (s = this.renderGridLines(r, n, o, i.majorGridLines)), i.minorGridLines.visible && (t = this.radarMinorGridLinePositions(), We(s, this.renderGridLines(r, t, o, i.minorGridLines))), s }, renderGridLines: function (e, t, i, n) { var o, r, s, a, l, c, d, u = { stroke: { width: n.width, color: n.color, dashType: n.dashType } }, h = n.skip; for (void 0 === h && (h = 0), void 0 === (o = n.step) && (o = 0), r = this.gridLinesVisual(), s = h; s < t.length; s += o)if ((a = e.y - t[s]) > 0) if (l = new ie([e.x, e.y], a), n.type === Me) r.append(new K.Circle(l, u)); else { for (c = new X(u), d = 0; d < i.length; d++)c.lineTo(l.pointAt(i[d] + 180)); c.close(), r.append(c) } return r.children }, getValue: function (e) { var t, i, n, o, r, s, a, l = this.lineBox(), c = this.plotArea.polarAxis, d = c.majorAngles(), u = c.box.center(), h = e.distanceTo(u), f = h; return this.options.majorGridLines.type !== Me && d.length > 1 && (t = e.x - u.x, i = e.y - u.y, n = (Ge(Math.atan2(i, t)) + 540) % 360, d.sort(function (e, t) { return $(e, n) - $(t, n) }), o = $(d[0], d[1]) / 2, r = $(n, d[0]), a = 180 - r - (s = 90 - o), f = h * (Math.sin(et(a)) / Math.sin(et(s)))), this.axisType().prototype.getValue.call(this, new rt(l.x1, l.y2 - f)) } }, hi = ri.extend({ radarMajorGridLinePositions: function () { return this.getTickPositions(this.options.majorUnit) }, radarMinorGridLinePositions: function () { var e = this.options, t = 0; return e.majorGridLines.visible && (t = e.majorUnit), this.getTickPositions(e.minorUnit, t) }, axisType: function () { return ri } }), se(hi.prototype, ui), fi = ai.extend({ radarMajorGridLinePositions: function () { var e = []; return this.traverseMajorTicksPositions(function (t) { e.push(t) }, this.options.majorGridLines), e }, radarMinorGridLinePositions: function () { var e = []; return this.traverseMinorTicksPositions(function (t) { e.push(t) }, this.options.minorGridLines), e }, axisType: function () { return ai } }), se(fi.prototype, ui), pi = J.extend({ init: function (e) { this.closed = e }, process: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m = e.slice(0), g = [], v = this.closed, _ = m.length; if (_ > 2 && (this.removeDuplicates(0, m), _ = m.length), _ < 2 || 2 === _ && m[0].equals(m[1])) return g; for (t = m[0], i = m[1], n = m[2], g.push(new oe(t)); t.equals(m[_ - 1]);)v = !0, m.pop(), _--; if (2 === _) return o = this.tangent(t, i, le, ce), Xe(g).controlOut(this.firstControlPoint(o, t, i, le, ce)), g.push(new oe(i, this.secondControlPoint(o, t, i, le, ce))), g; for (v ? (t = m[_ - 1], i = m[0], n = m[1], a = this.controlPoints(t, i, n), r = a[1], s = a[0]) : (l = this.tangent(t, i, le, ce), r = this.firstControlPoint(l, t, i, le, ce)), c = r, d = 0; d <= _ - 3; d++)this.removeDuplicates(d, m), _ = m.length, d + 3 <= _ && (t = m[d], i = m[d + 1], n = m[d + 2], u = this.controlPoints(t, i, n), Xe(g).controlOut(c), c = u[1], h = u[0], g.push(new oe(i, h))); return v ? (t = m[_ - 2], i = m[_ - 1], n = m[0], f = this.controlPoints(t, i, n), Xe(g).controlOut(c), g.push(new oe(i, f[0])), Xe(g).controlOut(f[1]), g.push(new oe(n, s))) : (p = this.tangent(i, n, le, ce), Xe(g).controlOut(c), g.push(new oe(n, this.secondControlPoint(p, i, n, le, ce)))), g }, removeDuplicates: function (e, t) { for (; t[e + 1] && (t[e].equals(t[e + 1]) || t[e + 1].equals(t[e + 2]));)t.splice(e + 1, 1) }, invertAxis: function (e, t, i) { var n, o, r = !1; return e.x === t.x ? r = !0 : t.x === i.x ? (t.y < i.y && e.y <= t.y || i.y < t.y && t.y <= e.y) && (r = !0) : (n = this.lineFunction(e, t), o = this.calculateFunction(n, i.x), e.y <= t.y && i.y <= o || t.y <= e.y && i.y >= o || (r = !0)), r }, isLine: function (e, t, i) { var n = this.lineFunction(e, t), o = this.calculateFunction(n, i.x); return e.x === t.x && t.x === i.x || tt(o, 1) === tt(i.y, 1) }, lineFunction: function (e, t) { var i = (t.y - e.y) / (t.x - e.x), n = e.y - i * e.x; return [n, i] }, controlPoints: function (e, t, i) { var n, o, r, s, a, l, c = le, d = ce, u = !1, h = !1; return this.isLine(e, t, i) ? n = this.tangent(e, t, le, ce) : (o = { x: this.isMonotonicByField(e, t, i, le), y: this.isMonotonicByField(e, t, i, ce) }).x && o.y ? (n = this.tangent(e, i, le, ce), u = !0) : (this.invertAxis(e, t, i) && (c = ce, d = le), o[c] ? n = 0 : (r = i[d] < e[d] && e[d] <= t[d] || e[d] < i[d] && t[d] <= e[d] ? Y((i[d] - e[d]) * (t[c] - e[c])) : -Y((i[c] - e[c]) * (t[d] - e[d])), n = .01 * r, h = !0)), s = this.secondControlPoint(n, e, t, c, d), h && (a = c, c = d, d = a), l = this.firstControlPoint(n, t, i, c, d), u && (this.restrictControlPoint(e, t, s, n), this.restrictControlPoint(t, i, l, n)), [s, l] }, restrictControlPoint: function (e, t, i, n) { e.y < t.y ? t.y < i.y ? (i.x = e.x + (t.y - e.y) / n, i.y = t.y) : i.y < e.y && (i.x = t.x - (t.y - e.y) / n, i.y = e.y) : i.y < t.y ? (i.x = e.x - (e.y - t.y) / n, i.y = t.y) : e.y < i.y && (i.x = t.x + (e.y - t.y) / n, i.y = e.y) }, tangent: function (e, t, i, n) { var o = t[i] - e[i], r = t[n] - e[n]; return 0 === o ? 0 : r / o }, isMonotonicByField: function (e, t, i, n) { return i[n] > t[n] && t[n] > e[n] || i[n] < t[n] && t[n] < e[n] }, firstControlPoint: function (e, t, i, n, o) { var r = t[n], s = i[n], a = .333 * (s - r); return this.point(r + a, t[o] + a * e, n, o) }, secondControlPoint: function (e, t, i, n, o) { var r = t[n], s = i[n], a = .333 * (s - r); return this.point(s - a, i[o] - a * e, n, o) }, point: function (e, t, i, n) { var o = new ee.Point; return o[i] = e, o[n] = t, o }, calculateFunction: function (e, t) { var i, n = e.length, o = 0; for (i = 0; i < n; i++)o += Math.pow(t, i) * e[i]; return o } }), re.Gradients = pt, kendo.deepExtend(kendo.dataviz, { constants: Le, services: Rt, autoMajorUnit: H, Point: rt, Box: st, Ring: at, Sector: lt, ShapeBuilder: ct, ShapeElement: ht, ChartElement: dt, BoxElement: ut, RootElement: mt, FloatElement: gt, Text: _t, TextBox: wt, Title: yt, AxisLabel: kt, Axis: zt, Note: Ft, CategoryAxis: Pt, DateCategoryAxis: ni, DateValueAxis: si, NumericAxis: ri, LogarithmicAxis: ai, PolarAxis: di, RadarCategoryAxis: ci, RadarNumericAxis: hi, RadarLogarithmicAxis: fi, CurveProcessor: pi, rectToBox: _, addClass: function (e, i) { var n, o, r = t(i) ? i : [i]; for (n = 0; n < r.length; n++)o = r[n], -1 === e.className.indexOf(o) && (e.className += " " + o) }, removeClass: function (e, t) { e && e.className && (e.className = e.className.replace(t, "").replace(He, " ")) }, alignPathToPixel: i, clockwise: n, deepExtend: se, elementStyles: function (e, i) { var n, s, c, d, u, h = r(i) ? [i] : i; if (t(h)) { for (n = {}, s = window.getComputedStyle(e), c = 0; c < h.length; c++)d = h[c], n[d] = l(d) ? parseFloat(s[d]) : s[d]; return n } if (o(i)) for (u in i) e.style[u] = a(i[u]) }, getSpacing: c, getter: ae, grep: d, hasClasses: function (e, t) { var i, n; if (e.className) for (i = t.split(" "), n = 0; n < i.length; n++)if (-1 !== e.className.indexOf(i[n])) return !0 }, inArray: u, interpolateValue: function (e, t, i) { return kendo.drawing.util.round(e + (t - e) * i, ve) }, InstanceObserver: Ve, isArray: t, isFunction: function (e) { return "function" == typeof e }, isNumber: s, isObject: o, isString: r, map: h, mousewheelDelta: function (e) { var t = 0; return e.wheelDelta && (t = (t = -e.wheelDelta / 120) > 0 ? Math.ceil(t) : Math.floor(t)), e.detail && (t = kendo.drawing.util.round(e.detail / 3)), t }, FontLoader: ot, setDefaultOptions: f, sparseArrayLimits: p, styleValue: a, append: We, bindEvents: qe, Class: J, defined: je, deg: Ge, elementOffset: $e, elementSize: Ye, eventElement: Ke, eventCoordinates: Qe, last: Xe, limitValue: Ze, logToConsole: kendo.logToConsole, objectKey: Je, rad: et, round: tt, unbindEvents: it, valueOrDefault: nt, absoluteDateDiff: y, addDuration: T, addTicks: k, ceilDate: A, dateComparer: E, dateDiff: I, dateEquals: R, dateIndex: z, duration: P, floorDate: D, lteDateIndex: function (e, t) { for (var i, n, o = 0, r = t.length - 1; o <= r;)if (i = Math.floor((o + r) / 2), (n = t[i]) < e) o = i + 1; else { if (!(n > e)) { for (; R(t[i - 1], e);)i--; return i } r = i - 1 } return t[i] <= e ? i : i - 1 }, startOfWeek: C, toDate: x, parseDate: B, parseDates: L, toTime: M }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/core/core.min", ["dataviz/core/kendo-core.min"], function () { e = window.kendo.jQuery, t = kendo.dataviz, i = t.services, n = kendo.drawing, t.ExportMixin = { extend: function (e, t) { if (!e.exportVisual) throw Error("Mixin target has no exportVisual method defined."); e.exportSVG = this.exportSVG, e.exportImage = this.exportImage, e.exportPDF = this.exportPDF, t || (e.svg = this.svg, e.imageDataURL = this.imageDataURL) }, exportSVG: function (e) { return n.exportSVG(this.exportVisual(), e) }, exportImage: function (e) { return n.exportImage(this.exportVisual(e), e) }, exportPDF: function (e) { return n.exportPDF(this.exportVisual(), e) }, svg: function () { if (n.svg.Surface) return n.svg.exportGroup(this.exportVisual()); throw Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface") }, imageDataURL: function () { var t, i, o; if (!kendo.support.canvas) return null; if (n.canvas.Surface) return t = e("<div />").css({ display: "none", width: this.element.width(), height: this.element.height() }).appendTo(document.body), (i = new n.canvas.Surface(t[0])).draw(this.exportVisual()), o = i._rootElement.toDataURL(), i.destroy(), t.remove(), o; throw Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface") } }, i.IntlService.register({ format: function (e) { return kendo.format.apply(null, [e].concat(Array.prototype.slice.call(arguments, 1))) }, toString: kendo.toString, parseDate: kendo.parseDate }), i.TemplateService.register({ compile: kendo.template }), t.Point2D = t.Point, t.Box2D = t.Box, t.mwDelta = function (e) { return t.mousewheelDelta(e.originalEvent) }; var e, t, i, n }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.core.min", ["dataviz/core/kendo-core.min", "dataviz/core/core.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/themes/chart-base-theme.min", ["kendo.dataviz.core.min"], function () { window.kendo.dataviz = window.kendo.dataviz || {}, e = 1.5, t = .4, i = "#000", n = "Arial, Helvetica, sans-serif", o = "12px " + n, r = "16px " + n, s = "#fff", a = function () { return { icon: { border: { width: 1 } }, label: { font: o, padding: 3 }, line: { length: 10, width: 2 }, visible: !0 } }, l = function () { return { labels: { font: o }, notes: a(), title: { font: r, margin: 5 } } }, c = function () { return { gap: e, spacing: t } }, d = function () { return { outliersField: "", meanField: "", border: { _brightness: .8, width: 1 }, downColor: s, gap: 1, highlight: { border: { opacity: 1, width: 2 }, whiskers: { width: 3 }, mean: { width: 2 }, median: { width: 2 } }, mean: { width: 2 }, median: { width: 2 }, spacing: .3, whiskers: { width: 2 } } }, u = function () { return { border: { width: 0 }, labels: { background: "transparent" }, opacity: .6 } }, h = function () { return { gap: e, spacing: t, target: { color: "#ff0000" } } }, f = function () { return { border: { _brightness: .8, width: 1 }, downColor: s, gap: 1, highlight: { border: { opacity: 1, width: 2 }, line: { width: 2 } }, line: { color: i, width: 1 }, spacing: .3 } }, p = function () { return { gap: e, spacing: t } }, m = function () { return { gap: e, spacing: t } }, g = function () { return { gap: e, spacing: t } }, v = function () { return { gap: .5, line: { color: i, width: 1 }, spacing: t } }, _ = function (e) { return { visible: !0, labels: { font: "11px Arial, Helvetica, sans-serif" }, overlay: e.gradients ? {} : { gradient: "none" }, area: { highlight: { markers: { border: {} } }, line: { opacity: 1, width: 0 }, markers: { size: 6, visible: !1 }, opacity: .4 }, bar: c(), boxPlot: d(), bubble: u(), bullet: h(), candlestick: f(), column: p(), pie: { labels: { background: "", color: "", padding: { top: 5, bottom: 5, left: 7, right: 7 } } }, donut: { margin: 1 }, funnel: { labels: { background: "", color: "", padding: { top: 5, bottom: 5, left: 7, right: 7 } } }, horizontalWaterfall: v(), line: { width: 2 }, notes: a(), ohlc: { gap: 1, highlight: { line: { opacity: 1, width: 3 } }, line: { width: 1 }, spacing: .3 }, radarArea: { line: { opacity: 1, width: 0 }, markers: { size: 6, visible: !1 }, opacity: .5 }, radarLine: { markers: { visible: !1 }, width: 2 }, polarArea: { line: { opacity: 1, width: 0 }, markers: { size: 6, visible: !1 }, opacity: .5 }, polarLine: { markers: { visible: !1 }, width: 2 }, rangeBar: m(), rangeColumn: g(), scatterLine: { width: 1 }, verticalArea: { highlight: { markers: { border: {} } }, line: { opacity: 1, width: 0 }, markers: { size: 6, visible: !1 }, opacity: .4 }, verticalBoxPlot: d(), verticalBullet: h(), verticalLine: { width: 2 }, waterfall: v() } }, b = function () { return { font: r } }, w = function () { return { labels: { font: o } } }, y = function (e) { return void 0 === e && (e = {}), { axisDefaults: l(), categoryAxis: { majorGridLines: { visible: !0 } }, navigator: { pane: { height: 90, margin: { top: 10 } } }, seriesDefaults: _(e), title: b(), legend: w() } }, kendo.deepExtend(kendo.dataviz, { chartBaseTheme: y }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/themes/auto-theme.min", ["kendo.dataviz.core.min"], function () { var e; kendo.dataviz.autoTheme = function (t) { function i(e, t) { o(e, n(t, "backgroundColor")) } function n(e, t) { return s.find(".k-var--" + e).css(t) } function o(e, t) { for (var i = r, n = e.split("."), o = n.shift(); n.length > 0;)i = i[o] = i[o] || {}, o = n.shift(); i[o] = t } var r, s; return !t && e ? e : (r = { chart: kendo.dataviz.chartBaseTheme() }, s = $('<div style="display: none">  <div class="k-var--accent"></div>  <div class="k-var--base"></div>  <div class="k-var--background"></div>  <div class="k-var--normal-background"></div>  <div class="k-var--normal-text-color"></div>  <div class="k-var--hover-background"></div>  <div class="k-var--hover-text-color"></div>  <div class="k-var--selected-background"></div>  <div class="k-var--selected-text-color"></div>  <div class="k-var--chart-error-bars-background"></div>  <div class="k-var--chart-notes-background"></div>  <div class="k-var--chart-notes-border"></div>  <div class="k-var--chart-notes-lines"></div>  <div class="k-var--chart-crosshair-background"></div>  <div class="k-var--chart-inactive"></div>  <div class="k-var--chart-major-lines"></div>  <div class="k-var--chart-minor-lines"></div>  <div class="k-var--chart-area-opacity"></div>  <div class="k-widget">      <div class="k-var--chart-font"></div>      <div class="k-var--chart-title-font"></div>      <div class="k-var--chart-label-font"></div>  </div>  <div class="k-var--series">    <div class="k-var--series-a"></div>    <div class="k-var--series-b"></div>    <div class="k-var--series-c"></div>    <div class="k-var--series-d"></div>    <div class="k-var--series-e"></div>    <div class="k-var--series-f"></div>  </div></div>').appendTo(document.body), i("chart.axisDefaults.crosshair.color", "chart-crosshair-background"), i("chart.axisDefaults.labels.color", "normal-text-color"), i("chart.axisDefaults.line.color", "chart-major-lines"), i("chart.axisDefaults.majorGridLines.color", "chart-major-lines"), i("chart.axisDefaults.minorGridLines.color", "chart-minor-lines"), i("chart.axisDefaults.notes.icon.background", "chart-notes-background"), i("chart.axisDefaults.notes.icon.border.color", "chart-notes-border"), i("chart.axisDefaults.notes.line.color", "chart-notes-lines"), i("chart.axisDefaults.title.color", "normal-text-color"), i("chart.chartArea.background", "background"), i("chart.legend.inactiveItems.labels.color", "chart-inactive"), i("chart.legend.inactiveItems.markers.color", "chart-inactive"), i("chart.legend.labels.color", "normal-text-color"), i("chart.seriesDefaults.boxPlot.downColor", "chart-major-lines"), i("chart.seriesDefaults.boxPlot.mean.color", "base"), i("chart.seriesDefaults.boxPlot.median.color", "base"), i("chart.seriesDefaults.boxPlot.whiskers.color", "accent"), i("chart.seriesDefaults.bullet.target.color", "accent"), i("chart.seriesDefaults.candlestick.downColor", "normal-text-color"), i("chart.seriesDefaults.candlestick.line.color", "normal-text-color"), i("chart.seriesDefaults.errorBars.color", "chart-error-bars-background"), i("chart.seriesDefaults.horizontalWaterfall.line.color", "chart-major-lines"), i("chart.seriesDefaults.icon.border.color", "chart-major-lines"), i("chart.seriesDefaults.labels.background", "background"), i("chart.seriesDefaults.labels.color", "normal-text-color"), i("chart.seriesDefaults.notes.icon.background", "chart-notes-background"), i("chart.seriesDefaults.notes.icon.border.color", "chart-notes-border"), i("chart.seriesDefaults.notes.line.color", "chart-notes-lines"), i("chart.seriesDefaults.verticalBoxPlot.downColor", "chart-major-lines"), i("chart.seriesDefaults.verticalBoxPlot.mean.color", "base"), i("chart.seriesDefaults.verticalBoxPlot.median.color", "base"), i("chart.seriesDefaults.verticalBoxPlot.whiskers.color", "accent"), i("chart.seriesDefaults.verticalBullet.target.color", "accent"), i("chart.seriesDefaults.waterfall.line.color", "chart-major-lines"), i("chart.title.color", "normal-text-color"), o("chart.seriesDefaults.labels.opacity", n("chart-area-opacity", "opacity")), function () { function e(e) { return n(e, "fontSize") + " " + n(e, "fontFamily") } var t = e("chart-font"), i = e("chart-title-font"), r = e("chart-label-font"); o("chart.axisDefaults.labels.font", r), o("chart.axisDefaults.notes.label.font", t), o("chart.axisDefaults.title.font", t), o("chart.legend.labels.font", t), o("chart.seriesDefaults.labels.font", r), o("chart.seriesDefaults.notes.label.font", t), o("chart.title.font", i) }(), function () { function e(e) { return function (e) { return e.toLowerCase().charCodeAt(0) - "a".charCodeAt(0) }(e.match(/series-([a-z])$/)[1]) } var t = $(".k-var--series div").toArray(), i = t.reduce(function (t, i) { var n = e(i.className); return t[n] = $(i).css("backgroundColor"), t }, []); o("chart.seriesColors", i) }(), s.remove(), e = r, r) } }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/themes/themes.min", ["dataviz/themes/chart-base-theme.min"], function () { return function (e) { function t(t, i) { return e.map(t, function (e, t) { return [[e, i[t]]] }) } var i = window.kendo, n = i.dataviz.ui, o = i.deepExtend, r = "#000", s = "#fff", a = i.dataviz.chartBaseTheme({ gradients: !0 }), l = { scale: { labels: { font: "12px Arial,Helvetica,sans-serif" } } }, c = { shapeDefaults: { hover: { opacity: .2 }, stroke: { width: 0 } }, editable: { resize: { handles: { width: 7, height: 7 } } }, selectable: { stroke: { width: 1, dashType: "dot" } }, connectionDefaults: { stroke: { width: 2 }, selection: { handles: { width: 8, height: 8 } }, editable: { tools: ["edit", "delete"] } } }, d = n.themes, u = n.registerTheme = function (e, t) { var i, n = {}; n.chart = o({}, a, t.chart), n.gauge = o({}, l, t.gauge), n.diagram = o({}, c, t.diagram), n.treeMap = o({}, t.treeMap), (i = n.chart.seriesDefaults).verticalLine = o({}, i.line), i.verticalArea = o({}, i.area), i.verticalBoxPlot = o({}, i.boxPlot), i.polarArea = o({}, i.radarArea), i.polarLine = o({}, i.radarLine), d[e] = n }; u("black", { chart: { title: { color: s }, legend: { labels: { color: s }, inactiveItems: { labels: { color: "#919191" }, markers: { color: "#919191" } } }, seriesDefaults: { labels: { color: s }, errorBars: { color: s }, notes: { icon: { background: "#3b3b3b", border: { color: "#8e8e8e" } }, label: { color: s }, line: { color: "#8e8e8e" } }, pie: { overlay: { gradient: "sharpBevel" } }, donut: { overlay: { gradient: "sharpGlass" } }, line: { markers: { background: "#3d3d3d" } }, scatter: { markers: { background: "#3d3d3d" } }, scatterLine: { markers: { background: "#3d3d3d" } }, waterfall: { line: { color: "#8e8e8e" } }, horizontalWaterfall: { line: { color: "#8e8e8e" } }, candlestick: { downColor: "#555", line: { color: s }, border: { _brightness: 1.5, opacity: 1 }, highlight: { border: { color: s, opacity: .2 } } }, ohlc: { line: { color: s } } }, chartArea: { background: "#3d3d3d" }, seriesColors: ["#0081da", "#3aafff", "#99c900", "#ffeb3d", "#b20753", "#ff4195"], axisDefaults: { line: { color: "#8e8e8e" }, labels: { color: s }, majorGridLines: { color: "#545454" }, minorGridLines: { color: "#454545" }, title: { color: s }, crosshair: { color: "#8e8e8e" }, notes: { icon: { background: "#3b3b3b", border: { color: "#8e8e8e" } }, label: { color: s }, line: { color: "#8e8e8e" } } } }, gauge: { pointer: { color: "#0070e4" }, scale: { rangePlaceholderColor: "#1d1d1d", labels: { color: s }, minorTicks: { color: s }, majorTicks: { color: s }, line: { color: s } } }, diagram: { shapeDefaults: { fill: { color: "#0066cc" }, connectorDefaults: { fill: { color: s }, stroke: { color: "#384049" }, hover: { fill: { color: "#3d3d3d" }, stroke: { color: "#efefef" } } }, content: { color: s } }, editable: { resize: { handles: { fill: { color: "#3d3d3d" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: s } } } }, rotate: { thumb: { stroke: { color: s }, fill: { color: s } } } }, selectable: { stroke: { color: s } }, connectionDefaults: { stroke: { color: s }, content: { color: s }, selection: { handles: { fill: { color: "#3d3d3d" }, stroke: { color: "#efefef" } } } } }, treeMap: { colors: [["#0081da", "#314b5c"], ["#3aafff", "#3c5464"], ["#99c900", "#4f5931"], ["#ffeb3d", "#64603d"], ["#b20753", "#543241"], ["#ff4195", "#643e4f"]] } }), u("blueopal", { chart: { title: { color: "#293135" }, legend: { labels: { color: "#293135" }, inactiveItems: { labels: { color: "#27A5BA" }, markers: { color: "#27A5BA" } } }, seriesDefaults: { labels: { color: r, background: s, opacity: .5 }, errorBars: { color: "#293135" }, candlestick: { downColor: "#c4d0d5", line: { color: "#9aabb2" } }, waterfall: { line: { color: "#9aabb2" } }, horizontalWaterfall: { line: { color: "#9aabb2" } }, notes: { icon: { background: "transparent", border: { color: "#9aabb2" } }, label: { color: "#293135" }, line: { color: "#9aabb2" } } }, seriesColors: ["#0069a5", "#0098ee", "#7bd2f6", "#ffb800", "#ff8517", "#e34a00"], axisDefaults: { line: { color: "#9aabb2" }, labels: { color: "#293135" }, majorGridLines: { color: "#c4d0d5" }, minorGridLines: { color: "#edf1f2" }, title: { color: "#293135" }, crosshair: { color: "#9aabb2" }, notes: { icon: { background: "transparent", border: { color: "#9aabb2" } }, label: { color: "#293135" }, line: { color: "#9aabb2" } } } }, gauge: { pointer: { color: "#005c83" }, scale: { rangePlaceholderColor: "#daecf4", labels: { color: "#293135" }, minorTicks: { color: "#293135" }, majorTicks: { color: "#293135" }, line: { color: "#293135" } } }, diagram: { shapeDefaults: { fill: { color: "#7ec6e3" }, connectorDefaults: { fill: { color: "#003f59" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#003f59" } } }, content: { color: "#293135" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#003f59" }, hover: { fill: { color: "#003f59" }, stroke: { color: "#003f59" } } } }, rotate: { thumb: { stroke: { color: "#003f59" }, fill: { color: "#003f59" } } } }, selectable: { stroke: { color: "#003f59" } }, connectionDefaults: { stroke: { color: "#003f59" }, content: { color: "#293135" }, selection: { handles: { fill: { color: "#3d3d3d" }, stroke: { color: "#efefef" } } } } }, treeMap: { colors: [["#0069a5", "#bad7e7"], ["#0098ee", "#b9e0f5"], ["#7bd2f6", "#ceeaf6"], ["#ffb800", "#e6e3c4"], ["#ff8517", "#e4d8c8"], ["#e34a00", "#ddccc2"]] } }), u("highcontrast", { chart: { title: { color: "#ffffff" }, legend: { labels: { color: "#ffffff" }, inactiveItems: { labels: { color: "#66465B" }, markers: { color: "#66465B" } } }, seriesDefaults: { labels: { color: "#ffffff" }, errorBars: { color: "#ffffff" }, notes: { icon: { background: "transparent", border: { color: "#ffffff" } }, label: { color: "#ffffff" }, line: { color: "#ffffff" } }, pie: { overlay: { gradient: "sharpGlass" } }, donut: { overlay: { gradient: "sharpGlass" } }, line: { markers: { background: "#2c232b" } }, scatter: { markers: { background: "#2c232b" } }, scatterLine: { markers: { background: "#2c232b" } }, area: { opacity: .5 }, waterfall: { line: { color: "#ffffff" } }, horizontalWaterfall: { line: { color: "#ffffff" } }, candlestick: { downColor: "#664e62", line: { color: "#ffffff" }, border: { _brightness: 1.5, opacity: 1 }, highlight: { border: { color: "#ffffff", opacity: 1 } } }, ohlc: { line: { color: "#ffffff" } } }, chartArea: { background: "#2c232b" }, seriesColors: ["#a7008f", "#ffb800", "#3aafff", "#99c900", "#b20753", "#ff4195"], axisDefaults: { line: { color: "#ffffff" }, labels: { color: "#ffffff" }, majorGridLines: { color: "#664e62" }, minorGridLines: { color: "#4f394b" }, title: { color: "#ffffff" }, crosshair: { color: "#ffffff" }, notes: { icon: { background: "transparent", border: { color: "#ffffff" } }, label: { color: "#ffffff" }, line: { color: "#ffffff" } } } }, gauge: { pointer: { color: "#a7008f" }, scale: { rangePlaceholderColor: "#2c232b", labels: { color: "#ffffff" }, minorTicks: { color: "#2c232b" }, majorTicks: { color: "#664e62" }, line: { color: "#ffffff" } } }, diagram: { shapeDefaults: { fill: { color: "#a7018f" }, connectorDefaults: { fill: { color: s }, stroke: { color: "#2c232b" }, hover: { fill: { color: "#2c232b" }, stroke: { color: s } } }, content: { color: s } }, editable: { resize: { handles: { fill: { color: "#2c232b" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: s } } } }, rotate: { thumb: { stroke: { color: s }, fill: { color: s } } } }, selectable: { stroke: { color: s } }, connectionDefaults: { stroke: { color: s }, content: { color: s }, selection: { handles: { fill: { color: "#2c232b" }, stroke: { color: s } } } } }, treeMap: { colors: [["#a7008f", "#451c3f"], ["#ffb800", "#564122"], ["#3aafff", "#2f3f55"], ["#99c900", "#424422"], ["#b20753", "#471d33"], ["#ff4195", "#562940"]] } }), u("default", { chart: { title: { color: "#8e8e8e" }, legend: { labels: { color: "#232323" }, inactiveItems: { labels: { color: "#919191" }, markers: { color: "#919191" } } }, seriesDefaults: { labels: { color: r, background: s, opacity: .5 }, errorBars: { color: "#232323" }, candlestick: { downColor: "#dedede", line: { color: "#8d8d8d" } }, waterfall: { line: { color: "#8e8e8e" } }, horizontalWaterfall: { line: { color: "#8e8e8e" } }, notes: { icon: { background: "transparent", border: { color: "#8e8e8e" } }, label: { color: "#232323" }, line: { color: "#8e8e8e" } } }, seriesColors: ["#ff6800", "#a0a700", "#ff8d00", "#678900", "#ffb53c", "#396000"], axisDefaults: { line: { color: "#8e8e8e" }, labels: { color: "#232323" }, minorGridLines: { color: "#f0f0f0" }, majorGridLines: { color: "#dfdfdf" }, title: { color: "#232323" }, crosshair: { color: "#8e8e8e" }, notes: { icon: { background: "transparent", border: { color: "#8e8e8e" } }, label: { color: "#232323" }, line: { color: "#8e8e8e" } } } }, gauge: { pointer: { color: "#ea7001" }, scale: { rangePlaceholderColor: "#dedede", labels: { color: "#2e2e2e" }, minorTicks: { color: "#2e2e2e" }, majorTicks: { color: "#2e2e2e" }, line: { color: "#2e2e2e" } } }, diagram: { shapeDefaults: { fill: { color: "#e15613" }, connectorDefaults: { fill: { color: "#282828" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#282828" } } }, content: { color: "#2e2e2e" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#282828" }, hover: { fill: { color: "#282828" }, stroke: { color: "#282828" } } } }, rotate: { thumb: { stroke: { color: "#282828" }, fill: { color: "#282828" } } } }, selectable: { stroke: { color: "#a7018f" } }, connectionDefaults: { stroke: { color: "#282828" }, content: { color: "#2e2e2e" }, selection: { handles: { fill: { color: s }, stroke: { color: "#282828" } } } } }, treeMap: { colors: [["#ff6800", "#edcfba"], ["#a0a700", "#dadcba"], ["#ff8d00", "#edd7ba"], ["#678900", "#cfd6ba"], ["#ffb53c", "#eddfc6"], ["#396000", "#c6ceba"]] } }), u("silver", { chart: { title: { color: "#4e5968" }, legend: { labels: { color: "#4e5968" }, inactiveItems: { labels: { color: "#B1BCC8" }, markers: { color: "#B1BCC8" } } }, seriesDefaults: { labels: { color: "#293135", background: "#eaeaec", opacity: .5 }, errorBars: { color: "#4e5968" }, notes: { icon: { background: "transparent", border: { color: "#4e5968" } }, label: { color: "#4e5968" }, line: { color: "#4e5968" } }, line: { markers: { background: "#eaeaec" } }, scatter: { markers: { background: "#eaeaec" } }, scatterLine: { markers: { background: "#eaeaec" } }, pie: { connectors: { color: "#A6B1C0" } }, donut: { connectors: { color: "#A6B1C0" } }, waterfall: { line: { color: "#a6b1c0" } }, horizontalWaterfall: { line: { color: "#a6b1c0" } }, candlestick: { downColor: "#a6afbe" } }, chartArea: { background: "#eaeaec" }, seriesColors: ["#007bc3", "#76b800", "#ffae00", "#ef4c00", "#a419b7", "#430B62"], axisDefaults: { line: { color: "#a6b1c0" }, labels: { color: "#4e5968" }, majorGridLines: { color: "#dcdcdf" }, minorGridLines: { color: "#eeeeef" }, title: { color: "#4e5968" }, crosshair: { color: "#a6b1c0" }, notes: { icon: { background: "transparent", border: { color: "#4e5968" } }, label: { color: "#4e5968" }, line: { color: "#4e5968" } } } }, gauge: { pointer: { color: "#0879c0" }, scale: { rangePlaceholderColor: "#f3f3f4", labels: { color: "#515967" }, minorTicks: { color: "#515967" }, majorTicks: { color: "#515967" }, line: { color: "#515967" } } }, diagram: { shapeDefaults: { fill: { color: "#1c82c2" }, connectorDefaults: { fill: { color: "#515967" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#282828" } } }, content: { color: "#515967" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#515967" }, hover: { fill: { color: "#515967" }, stroke: { color: "#515967" } } } }, rotate: { thumb: { stroke: { color: "#515967" }, fill: { color: "#515967" } } } }, selectable: { stroke: { color: "#515967" } }, connectionDefaults: { stroke: { color: "#515967" }, content: { color: "#515967" }, selection: { handles: { fill: { color: s }, stroke: { color: "#515967" } } } } }, treeMap: { colors: [["#007bc3", "#c2dbea"], ["#76b800", "#dae7c3"], ["#ffae00", "#f5e5c3"], ["#ef4c00", "#f2d2c3"], ["#a419b7", "#e3c7e8"], ["#430b62", "#d0c5d7"]] } }), u("metro", { chart: { title: { color: "#777777" }, legend: { labels: { color: "#777777" }, inactiveItems: { labels: { color: "#CBCBCB" }, markers: { color: "#CBCBCB" } } }, seriesDefaults: { labels: { color: r }, errorBars: { color: "#777777" }, notes: { icon: { background: "transparent", border: { color: "#777777" } }, label: { color: "#777777" }, line: { color: "#777777" } }, candlestick: { downColor: "#c7c7c7", line: { color: "#787878" } }, waterfall: { line: { color: "#c7c7c7" } }, horizontalWaterfall: { line: { color: "#c7c7c7" } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, seriesColors: ["#8ebc00", "#309b46", "#25a0da", "#ff6900", "#e61e26", "#d8e404", "#16aba9", "#7e51a1", "#313131", "#ed1691"], axisDefaults: { line: { color: "#c7c7c7" }, labels: { color: "#777777" }, minorGridLines: { color: "#c7c7c7" }, majorGridLines: { color: "#c7c7c7" }, title: { color: "#777777" }, crosshair: { color: "#c7c7c7" }, notes: { icon: { background: "transparent", border: { color: "#777777" } }, label: { color: "#777777" }, line: { color: "#777777" } } } }, gauge: { pointer: { color: "#8ebc00" }, scale: { rangePlaceholderColor: "#e6e6e6", labels: { color: "#777" }, minorTicks: { color: "#777" }, majorTicks: { color: "#777" }, line: { color: "#777" } } }, diagram: { shapeDefaults: { fill: { color: "#8ebc00" }, connectorDefaults: { fill: { color: r }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: r } } }, content: { color: "#777" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#787878" }, hover: { fill: { color: "#787878" }, stroke: { color: "#787878" } } } }, rotate: { thumb: { stroke: { color: "#787878" }, fill: { color: "#787878" } } } }, selectable: { stroke: { color: "#515967" } }, connectionDefaults: { stroke: { color: "#787878" }, content: { color: "#777" }, selection: { handles: { fill: { color: s }, stroke: { color: "#787878" } } } } }, treeMap: { colors: [["#8ebc00", "#e8f2cc"], ["#309b46", "#d6ebda"], ["#25a0da", "#d3ecf8"], ["#ff6900", "#ffe1cc"], ["#e61e26", "#fad2d4"], ["#d8e404", "#f7facd"], ["#16aba9", "#d0eeee"], ["#7e51a1", "#e5dcec"], ["#313131", "#d6d6d6"], ["#ed1691", "#fbd0e9"]] } }), u("metroblack", { chart: { title: { color: "#ffffff" }, legend: { labels: { color: "#ffffff" }, inactiveItems: { labels: { color: "#797979" }, markers: { color: "#797979" } } }, seriesDefaults: { border: { _brightness: 1 }, labels: { color: "#ffffff" }, errorBars: { color: "#ffffff" }, notes: { icon: { background: "transparent", border: { color: "#cecece" } }, label: { color: "#ffffff" }, line: { color: "#cecece" } }, line: { markers: { background: "#0e0e0e" } }, bubble: { opacity: .6 }, scatter: { markers: { background: "#0e0e0e" } }, scatterLine: { markers: { background: "#0e0e0e" } }, candlestick: { downColor: "#828282", line: { color: "#ffffff" } }, waterfall: { line: { color: "#cecece" } }, horizontalWaterfall: { line: { color: "#cecece" } }, overlay: { gradient: "none" } }, chartArea: { background: "#0e0e0e" }, seriesColors: ["#00aba9", "#309b46", "#8ebc00", "#ff6900", "#e61e26", "#d8e404", "#25a0da", "#7e51a1", "#313131", "#ed1691"], axisDefaults: { line: { color: "#cecece" }, labels: { color: "#ffffff" }, minorGridLines: { color: "#2d2d2d" }, majorGridLines: { color: "#333333" }, title: { color: "#ffffff" }, crosshair: { color: "#cecece" }, notes: { icon: { background: "transparent", border: { color: "#cecece" } }, label: { color: "#ffffff" }, line: { color: "#cecece" } } } }, gauge: { pointer: { color: "#00aba9" }, scale: { rangePlaceholderColor: "#2d2d2d", labels: { color: "#ffffff" }, minorTicks: { color: "#333333" }, majorTicks: { color: "#cecece" }, line: { color: "#cecece" } } }, diagram: { shapeDefaults: { fill: { color: "#00aba9" }, connectorDefaults: { fill: { color: s }, stroke: { color: "#0e0e0e" }, hover: { fill: { color: "#0e0e0e" }, stroke: { color: s } } }, content: { color: s } }, editable: { resize: { handles: { fill: { color: "#0e0e0e" }, stroke: { color: "#787878" }, hover: { fill: { color: "#787878" }, stroke: { color: "#787878" } } } }, rotate: { thumb: { stroke: { color: s }, fill: { color: s } } } }, selectable: { stroke: { color: "#787878" } }, connectionDefaults: { stroke: { color: s }, content: { color: s }, selection: { handles: { fill: { color: "#0e0e0e" }, stroke: { color: s } } } } }, treeMap: { colors: [["#00aba9", "#0b2d2d"], ["#309b46", "#152a19"], ["#8ebc00", "#28310b"], ["#ff6900", "#3e200b"], ["#e61e26", "#391113"], ["#d8e404", "#36390c"], ["#25a0da", "#132b37"], ["#7e51a1", "#241b2b"], ["#313131", "#151515"], ["#ed1691", "#3b1028"]] } }), u("moonlight", { chart: { title: { color: "#ffffff" }, legend: { labels: { color: "#ffffff" }, inactiveItems: { labels: { color: "#A1A7AB" }, markers: { color: "#A1A7AB" } } }, seriesDefaults: { labels: { color: "#ffffff" }, errorBars: { color: "#ffffff" }, notes: { icon: { background: "transparent", border: { color: "#8c909e" } }, label: { color: "#ffffff" }, line: { color: "#8c909e" } }, pie: { overlay: { gradient: "sharpBevel" } }, donut: { overlay: { gradient: "sharpGlass" } }, line: { markers: { background: "#212a33" } }, bubble: { opacity: .6 }, scatter: { markers: { background: "#212a33" } }, scatterLine: { markers: { background: "#212a33" } }, area: { opacity: .3 }, candlestick: { downColor: "#757d87", line: { color: "#ea9d06" }, border: { _brightness: 1.5, opacity: 1 }, highlight: { border: { color: s, opacity: .2 } } }, waterfall: { line: { color: "#8c909e" } }, horizontalWaterfall: { line: { color: "#8c909e" } }, ohlc: { line: { color: "#ea9d06" } } }, chartArea: { background: "#212a33" }, seriesColors: ["#ffca08", "#ff710f", "#ed2e24", "#ff9f03", "#e13c02", "#a00201"], axisDefaults: { line: { color: "#8c909e" }, minorTicks: { color: "#8c909e" }, majorTicks: { color: "#8c909e" }, labels: { color: "#ffffff" }, majorGridLines: { color: "#3e424d" }, minorGridLines: { color: "#2f3640" }, title: { color: "#ffffff" }, crosshair: { color: "#8c909e" }, notes: { icon: { background: "transparent", border: { color: "#8c909e" } }, label: { color: "#ffffff" }, line: { color: "#8c909e" } } } }, gauge: { pointer: { color: "#f4af03" }, scale: { rangePlaceholderColor: "#2f3640", labels: { color: s }, minorTicks: { color: "#8c909e" }, majorTicks: { color: "#8c909e" }, line: { color: "#8c909e" } } }, diagram: { shapeDefaults: { fill: { color: "#f3ae03" }, connectorDefaults: { fill: { color: s }, stroke: { color: "#414550" }, hover: { fill: { color: "#414550" }, stroke: { color: s } } }, content: { color: s } }, editable: { resize: { handles: { fill: { color: "#414550" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: s } } } }, rotate: { thumb: { stroke: { color: s }, fill: { color: s } } } }, selectable: { stroke: { color: s } }, connectionDefaults: { stroke: { color: s }, content: { color: s }, selection: { handles: { fill: { color: "#414550" }, stroke: { color: s } } } } }, treeMap: { colors: [["#ffca08", "#4e4b2b"], ["#ff710f", "#4e392d"], ["#ed2e24", "#4b2c31"], ["#ff9f03", "#4e422a"], ["#e13c02", "#482e2a"], ["#a00201", "#3b232a"]] } }), u("uniform", { chart: { title: { color: "#686868" }, legend: { labels: { color: "#686868" }, inactiveItems: { labels: { color: "#B6B6B6" }, markers: { color: "#B6B6B6" } } }, seriesDefaults: { labels: { color: "#686868" }, errorBars: { color: "#686868" }, notes: { icon: { background: "transparent", border: { color: "#9e9e9e" } }, label: { color: "#686868" }, line: { color: "#9e9e9e" } }, pie: { overlay: { gradient: "sharpBevel" } }, donut: { overlay: { gradient: "sharpGlass" } }, line: { markers: { background: "#ffffff" } }, bubble: { opacity: .6 }, scatter: { markers: { background: "#ffffff" } }, scatterLine: { markers: { background: "#ffffff" } }, area: { opacity: .3 }, candlestick: { downColor: "#cccccc", line: { color: "#cccccc" }, border: { _brightness: 1.5, opacity: 1 }, highlight: { border: { color: "#cccccc", opacity: .2 } } }, waterfall: { line: { color: "#9e9e9e" } }, horizontalWaterfall: { line: { color: "#9e9e9e" } }, ohlc: { line: { color: "#cccccc" } } }, chartArea: { background: "#ffffff" }, seriesColors: ["#527aa3", "#6f91b3", "#8ca7c2", "#a8bdd1", "#c5d3e0", "#e2e9f0"], axisDefaults: { line: { color: "#9e9e9e" }, minorTicks: { color: "#aaaaaa" }, majorTicks: { color: "#888888" }, labels: { color: "#686868" }, majorGridLines: { color: "#dadada" }, minorGridLines: { color: "#e7e7e7" }, title: { color: "#686868" }, crosshair: { color: "#9e9e9e" }, notes: { icon: { background: "transparent", border: { color: "#9e9e9e" } }, label: { color: "#686868" }, line: { color: "#9e9e9e" } } } }, gauge: { pointer: { color: "#527aa3" }, scale: { rangePlaceholderColor: "#e7e7e7", labels: { color: "#686868" }, minorTicks: { color: "#aaaaaa" }, majorTicks: { color: "#888888" }, line: { color: "#9e9e9e" } } }, diagram: { shapeDefaults: { fill: { color: "#d1d1d1" }, connectorDefaults: { fill: { color: "#686868" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#686868" } } }, content: { color: "#686868" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#686868" }, hover: { fill: { color: "#686868" }, stroke: { color: "#686868" } } } }, rotate: { thumb: { stroke: { color: "#686868" }, fill: { color: "#686868" } } } }, selectable: { stroke: { color: "#686868" } }, connectionDefaults: { stroke: { color: "#686868" }, content: { color: "#686868" }, selection: { handles: { fill: { color: s }, stroke: { color: "#686868" } } } } }, treeMap: { colors: [["#527aa3", "#d0d8e1"], ["#6f91b3", "#d6dde4"], ["#8ca7c2", "#dce1e7"], ["#a8bdd1", "#e2e6ea"], ["#c5d3e0", "#e7eaed"], ["#e2e9f0", "#edeff0"]] } }), u("bootstrap", { chart: { title: { color: "#333333" }, legend: { labels: { color: "#333333" }, inactiveItems: { labels: { color: "#999999" }, markers: { color: "#9A9A9A" } } }, seriesDefaults: { labels: { color: "#333333" }, overlay: { gradient: "none" }, errorBars: { color: "#343434" }, notes: { icon: { background: "#000000", border: { color: "#000000" } }, label: { color: "#333333" }, line: { color: "#000000" } }, pie: { overlay: { gradient: "none" } }, donut: { overlay: { gradient: "none" } }, line: { markers: { background: "#ffffff" } }, bubble: { opacity: .6 }, scatter: { markers: { background: "#ffffff" } }, scatterLine: { markers: { background: "#ffffff" } }, area: { opacity: .8 }, candlestick: { downColor: "#d0d0d0", line: { color: "#333333" }, border: { _brightness: 1.5, opacity: 1 }, highlight: { border: { color: "#b8b8b8", opacity: .2 } } }, waterfall: { line: { color: "#cccccc" } }, horizontalWaterfall: { line: { color: "#cccccc" } }, ohlc: { line: { color: "#333333" } } }, chartArea: { background: "#ffffff" }, seriesColors: ["#428bca", "#5bc0de", "#5cb85c", "#f2b661", "#e67d4a", "#da3b36"], axisDefaults: { line: { color: "#cccccc" }, minorTicks: { color: "#ebebeb" }, majorTicks: { color: "#cccccc" }, labels: { color: "#333333" }, majorGridLines: { color: "#cccccc" }, minorGridLines: { color: "#ebebeb" }, title: { color: "#333333" }, crosshair: { color: "#000000" }, notes: { icon: { background: "#000000", border: { color: "#000000" } }, label: { color: "#ffffff" }, line: { color: "#000000" } } } }, gauge: { pointer: { color: "#428bca" }, scale: { rangePlaceholderColor: "#cccccc", labels: { color: "#333333" }, minorTicks: { color: "#ebebeb" }, majorTicks: { color: "#cccccc" }, line: { color: "#cccccc" } } }, diagram: { shapeDefaults: { fill: { color: "#428bca" }, connectorDefaults: { fill: { color: "#333333" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#333333" } } }, content: { color: "#333333" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#333333" }, hover: { fill: { color: "#333333" }, stroke: { color: "#333333" } } } }, rotate: { thumb: { stroke: { color: "#333333" }, fill: { color: "#333333" } } } }, selectable: { stroke: { color: "#333333" } }, connectionDefaults: { stroke: { color: "#c4c4c4" }, content: { color: "#333333" }, selection: { handles: { fill: { color: s }, stroke: { color: "#333333" } }, stroke: { color: "#333333" } } } }, treeMap: { colors: [["#428bca", "#d1e0ec"], ["#5bc0de", "#d6eaf0"], ["#5cb85c", "#d6e9d6"], ["#5cb85c", "#f4e8d7"], ["#e67d4a", "#f2ddd3"], ["#da3b36", "#f0d0cf"]] } }), u("flat", { chart: { title: { color: "#4c5356" }, legend: { labels: { color: "#4c5356" }, inactiveItems: { labels: { color: "#CBCBCB" }, markers: { color: "#CBCBCB" } } }, seriesDefaults: { labels: { color: "#4c5356" }, errorBars: { color: "#4c5356" }, notes: { icon: { background: "transparent", border: { color: "#cdcdcd" } }, label: { color: "#4c5356" }, line: { color: "#cdcdcd" } }, candlestick: { downColor: "#c7c7c7", line: { color: "#787878" } }, area: { opacity: .9 }, waterfall: { line: { color: "#cdcdcd" } }, horizontalWaterfall: { line: { color: "#cdcdcd" } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, seriesColors: ["#10c4b2", "#ff7663", "#ffb74f", "#a2df53", "#1c9ec4", "#ff63a5", "#1cc47b"], axisDefaults: { line: { color: "#cdcdcd" }, labels: { color: "#4c5356" }, minorGridLines: { color: "#cdcdcd" }, majorGridLines: { color: "#cdcdcd" }, title: { color: "#4c5356" }, crosshair: { color: "#cdcdcd" }, notes: { icon: { background: "transparent", border: { color: "#cdcdcd" } }, label: { color: "#4c5356" }, line: { color: "#cdcdcd" } } } }, gauge: { pointer: { color: "#10c4b2" }, scale: { rangePlaceholderColor: "#cdcdcd", labels: { color: "#4c5356" }, minorTicks: { color: "#4c5356" }, majorTicks: { color: "#4c5356" }, line: { color: "#4c5356" } } }, diagram: { shapeDefaults: { fill: { color: "#10c4b2" }, connectorDefaults: { fill: { color: "#363940" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#363940" } } }, content: { color: "#4c5356" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#363940" }, hover: { fill: { color: "#363940" }, stroke: { color: "#363940" } } } }, rotate: { thumb: { stroke: { color: "#363940" }, fill: { color: "#363940" } } } }, selectable: { stroke: { color: "#363940" } }, connectionDefaults: { stroke: { color: "#cdcdcd" }, content: { color: "#4c5356" }, selection: { handles: { fill: { color: s }, stroke: { color: "#363940" } }, stroke: { color: "#363940" } } } }, treeMap: { colors: [["#10c4b2", "#cff3f0"], ["#ff7663", "#ffe4e0"], ["#ffb74f", "#fff1dc"], ["#a2df53", "#ecf9dd"], ["#1c9ec4", "#d2ecf3"], ["#ff63a5", "#ffe0ed"], ["#1cc47b", "#d2f3e5"]] } }), u("material", { chart: { title: { color: "#444444" }, legend: { labels: { color: "#444444" }, inactiveItems: { labels: { color: "#CBCBCB" }, markers: { color: "#CBCBCB" } } }, seriesDefaults: { labels: { color: "#444444" }, errorBars: { color: "#444444" }, notes: { icon: { background: "transparent", border: { color: "#e5e5e5" } }, label: { color: "#444444" }, line: { color: "#e5e5e5" } }, candlestick: { downColor: "#c7c7c7", line: { color: "#787878" } }, area: { opacity: .9 }, waterfall: { line: { color: "#e5e5e5" } }, horizontalWaterfall: { line: { color: "#e5e5e5" } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, seriesColors: ["#3f51b5", "#03a9f4", "#4caf50", "#f9ce1d", "#ff9800", "#ff5722"], axisDefaults: { line: { color: "#e5e5e5" }, labels: { color: "#444444" }, minorGridLines: { color: "#e5e5e5" }, majorGridLines: { color: "#e5e5e5" }, title: { color: "#444444" }, crosshair: { color: "#7f7f7f" }, notes: { icon: { background: "transparent", border: { color: "#e5e5e5" } }, label: { color: "#444444" }, line: { color: "#e5e5e5" } } } }, gauge: { pointer: { color: "#3f51b5" }, scale: { rangePlaceholderColor: "#e5e5e5", labels: { color: "#444444" }, minorTicks: { color: "#444444" }, majorTicks: { color: "#444444" }, line: { color: "#444444" } } }, diagram: { shapeDefaults: { fill: { color: "#3f51b5" }, connectorDefaults: { fill: { color: "#7f7f7f" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#7f7f7f" } } }, content: { color: "#444444" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#444444" }, hover: { fill: { color: "#444444" }, stroke: { color: "#444444" } } } }, rotate: { thumb: { stroke: { color: "#444444" }, fill: { color: "#444444" } } } }, selectable: { stroke: { color: "#444444" } }, connectionDefaults: { stroke: { color: "#7f7f7f" }, content: { color: "#444444" }, selection: { handles: { fill: { color: s }, stroke: { color: "#444444" } }, stroke: { color: "#444444" } } } }, treeMap: { colors: [["#3f51b5", "#cff3f0"], ["#03a9f4", "#e5f6fe"], ["#4caf50", "#edf7ed"], ["#f9ce1d", "#fefae8"], ["#ff9800", "#fff4e5"], ["#ff5722", "#ffeee8"]] } }), u("materialblack", { chart: { title: { color: "#fff" }, legend: { labels: { color: "#fff" }, inactiveItems: { labels: { color: "#CBCBCB" }, markers: { color: "#CBCBCB" } } }, seriesDefaults: { labels: { color: "#fff" }, errorBars: { color: "#fff" }, notes: { icon: { background: "transparent", border: { color: "#e5e5e5" } }, label: { color: "#fff" }, line: { color: "#e5e5e5" } }, candlestick: { downColor: "#c7c7c7", line: { color: "#787878" } }, area: { opacity: .9 }, waterfall: { line: { color: "#4d4d4d" } }, horizontalWaterfall: { line: { color: "#4d4d4d" } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, chartArea: { background: "#1c1c1c" }, seriesColors: ["#3f51b5", "#03a9f4", "#4caf50", "#f9ce1d", "#ff9800", "#ff5722"], axisDefaults: { line: { color: "#4d4d4d" }, labels: { color: "#fff" }, minorGridLines: { color: "#4d4d4d" }, majorGridLines: { color: "#4d4d4d" }, title: { color: "#fff" }, crosshair: { color: "#7f7f7f" }, notes: { icon: { background: "transparent", border: { color: "#4d4d4d" } }, label: { color: "#fff" }, line: { color: "#4d4d4d" } } } }, gauge: { pointer: { color: "#3f51b5" }, scale: { rangePlaceholderColor: "#4d4d4d", labels: { color: "#fff" }, minorTicks: { color: "#fff" }, majorTicks: { color: "#fff" }, line: { color: "#fff" } } }, diagram: { shapeDefaults: { fill: { color: "#3f51b5" }, connectorDefaults: { fill: { color: "#7f7f7f" }, stroke: { color: s }, hover: { fill: { color: s }, stroke: { color: "#7f7f7f" } } }, content: { color: "#fff" } }, editable: { resize: { handles: { fill: { color: s }, stroke: { color: "#fff" }, hover: { fill: { color: "#fff" }, stroke: { color: "#fff" } } } }, rotate: { thumb: { stroke: { color: "#fff" }, fill: { color: "#fff" } } } }, selectable: { stroke: { color: "#fff" } }, connectionDefaults: { stroke: { color: "#7f7f7f" }, content: { color: "#fff" }, selection: { handles: { fill: { color: s }, stroke: { color: "#fff" } }, stroke: { color: "#fff" } } } }, treeMap: { colors: [["#3f51b5", "#cff3f0"], ["#03a9f4", "#e5f6fe"], ["#4caf50", "#edf7ed"], ["#f9ce1d", "#fefae8"], ["#ff9800", "#fff4e5"], ["#ff5722", "#ffeee8"]] } }), function () { function e() { return { icon: { background: "#007cc0", border: { color: "#007cc0" } }, label: { color: "#ffffff" }, line: { color: r } } } var i = "#333333", n = "#7f7f7f", o = "#bdbdbd", r = "#c8c8c8", a = ["#008fd3", "#99d101", "#f39b02", "#f05662", "#c03c53", "#acacac"], l = a[0], c = s; u("fiori", { chart: { title: { color: i }, legend: { labels: { color: i }, inactiveItems: { labels: { color: n }, markers: { color: n } } }, seriesDefaults: { labels: { color: i }, errorBars: { color: i }, notes: e(), candlestick: { downColor: r, line: { color: o } }, area: { opacity: .8 }, waterfall: { line: { color: r } }, horizontalWaterfall: { line: { color: r } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, seriesColors: a, axisDefaults: { line: { color: r }, labels: { color: i }, minorGridLines: { color: "#dddddd" }, majorGridLines: { color: r }, title: { color: i }, crosshair: { color: n }, notes: e() } }, gauge: { pointer: { color: l }, scale: { rangePlaceholderColor: r, labels: { color: i }, minorTicks: { color: i }, majorTicks: { color: i }, line: { color: i } } }, diagram: { shapeDefaults: { fill: { color: l }, connectorDefaults: { fill: { color: i }, stroke: { color: c }, hover: { fill: { color: c }, stroke: { color: i } } }, content: { color: i } }, editable: { resize: { handles: { fill: { color: c }, stroke: { color: o }, hover: { fill: { color: o }, stroke: { color: o } } } }, rotate: { thumb: { stroke: { color: o }, fill: { color: o } } } }, selectable: { stroke: { color: o } }, connectionDefaults: { stroke: { color: o }, content: { color: o }, selection: { handles: { fill: { color: c }, stroke: { color: o } }, stroke: { color: o } } } }, treeMap: { colors: t(a, ["#cbe8f5", "#eaf5cb", "#fceacc", "#fbdcdf", "#f2d7dc", "#eeeeee"]) } }) }(), function () { function e() { return { icon: { background: "#00b0ff", border: { color: "#00b0ff" } }, label: { color: "#ffffff" }, line: { color: r } } } var i = "#4e4e4e", n = "#7f7f7f", o = "#bdbdbd", r = "#c8c8c8", a = ["#0072c6", "#5db2ff", "#008a17", "#82ba00", "#ff8f32", "#ac193d"], l = a[0], c = s; u("office365", { chart: { title: { color: i }, legend: { labels: { color: i }, inactiveItems: { labels: { color: n }, markers: { color: n } } }, seriesDefaults: { labels: { color: i }, errorBars: { color: i }, notes: e(), candlestick: { downColor: r, line: { color: o } }, area: { opacity: .8 }, waterfall: { line: { color: r } }, horizontalWaterfall: { line: { color: r } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, seriesColors: a, axisDefaults: { line: { color: r }, labels: { color: i }, minorGridLines: { color: "#e5e5e5" }, majorGridLines: { color: r }, title: { color: i }, crosshair: { color: n }, notes: e() } }, gauge: { pointer: { color: l }, scale: { rangePlaceholderColor: r, labels: { color: i }, minorTicks: { color: i }, majorTicks: { color: i }, line: { color: i } } }, diagram: { shapeDefaults: { fill: { color: l }, connectorDefaults: { fill: { color: i }, stroke: { color: c }, hover: { fill: { color: c }, stroke: { color: i } } }, content: { color: i } }, editable: { resize: { handles: { fill: { color: c }, stroke: { color: o }, hover: { fill: { color: o }, stroke: { color: o } } } }, rotate: { thumb: { stroke: { color: o }, fill: { color: o } } } }, selectable: { stroke: { color: o } }, connectionDefaults: { stroke: { color: o }, content: { color: o }, selection: { handles: { fill: { color: c }, stroke: { color: o } }, stroke: { color: o } } } }, treeMap: { colors: t(a, ["#cbe2f3", "#deeffe", "#cbe7d0", "#e5f0cb", "#fee8d5", "#eed0d7"]) } }) }(), function () { function e() { return { icon: { background: "#007cc0", border: { color: "#007cc0" } }, label: { color: "#ffffff" }, line: { color: r } } } var i = "#32364c", n = "#7f7f7f", o = "#bdbdbd", r = "#dfe0e1", a = ["#ff4350", "#ff9ea5", "#00acc1", "#80deea", "#ffbf46", "#ffd78c"], l = a[0], c = s; u("nova", { chart: { title: { color: i }, legend: { labels: { color: i }, inactiveItems: { labels: { color: n }, markers: { color: n } } }, seriesDefaults: { labels: { color: i }, errorBars: { color: i }, notes: e(), candlestick: { downColor: r, line: { color: o } }, area: { opacity: .8 }, waterfall: { line: { color: r } }, horizontalWaterfall: { line: { color: r } }, overlay: { gradient: "none" }, border: { _brightness: 1 } }, seriesColors: a, axisDefaults: { line: { color: r }, labels: { color: i }, minorGridLines: { color: "#dfe0e1" }, majorGridLines: { color: r }, title: { color: i }, crosshair: { color: i }, notes: e() } }, gauge: { pointer: { color: l }, scale: { rangePlaceholderColor: r, labels: { color: i }, minorTicks: { color: i }, majorTicks: { color: i }, line: { color: i } } }, diagram: { shapeDefaults: { fill: { color: l }, connectorDefaults: { fill: { color: i }, stroke: { color: c }, hover: { fill: { color: c }, stroke: { color: i } } }, content: { color: i } }, editable: { resize: { handles: { fill: { color: c }, stroke: { color: o }, hover: { fill: { color: o }, stroke: { color: o } } } }, rotate: { thumb: { stroke: { color: o }, fill: { color: o } } } }, selectable: { stroke: { color: o } }, connectionDefaults: { stroke: { color: o }, content: { color: o }, selection: { handles: { fill: { color: c }, stroke: { color: o } }, stroke: { color: o } } } }, treeMap: { colors: t(a, ["#ffd9dc", "#ffeced", "#cceef3", "#e6f8fb", "#fff2da", "#fff7e8"]) } }) }(), function () { var e = "#656565", i = "#bdbdbd", n = ["#ff6358", "#ffd246", "#78d237", "#28b4c8", "#2d73f5", "#aa46be"], o = n[0], r = s; u("default-v2", { chart: {}, gauge: { pointer: { color: o }, scale: { rangePlaceholderColor: "rgba(0, 0, 0, .04)", labels: { color: e }, minorTicks: { color: e }, majorTicks: { color: e }, line: { color: e } } }, diagram: { shapeDefaults: { fill: { color: o }, connectorDefaults: { fill: { color: e }, stroke: { color: r }, hover: { fill: { color: r }, stroke: { color: e } } }, content: { color: e } }, editable: { resize: { handles: { fill: { color: r }, stroke: { color: i }, hover: { fill: { color: i }, stroke: { color: i } } } }, rotate: { thumb: { stroke: { color: i }, fill: { color: i } } } }, selectable: { stroke: { color: i } }, connectionDefaults: { stroke: { color: i }, content: { color: i }, selection: { handles: { fill: { color: r }, stroke: { color: i } }, stroke: { color: i } } } }, treeMap: { colors: t(n, ["#ffd9dc", "#ffeced", "#cceef3", "#e6f8fb", "#fff2da", "#fff7e8"]) } }), d.sass = d["default-v2"] }(), function () { var e = "#292b2c", i = "#bdbdbd", n = ["#0275d8", "#5bc0de", "#5cb85c", "#f0ad4e", "#e67d4a", "#d9534f"], o = n[0], r = s; u("bootstrap-v4", { chart: {}, gauge: { pointer: { color: o }, scale: { rangePlaceholderColor: "rgba(0, 0, 0, .04)", labels: { color: e }, minorTicks: { color: e }, majorTicks: { color: e }, line: { color: e } } }, diagram: { shapeDefaults: { fill: { color: o }, connectorDefaults: { fill: { color: e }, stroke: { color: r }, hover: { fill: { color: r }, stroke: { color: e } } }, content: { color: e } }, editable: { resize: { handles: { fill: { color: r }, stroke: { color: i }, hover: { fill: { color: i }, stroke: { color: i } } } }, rotate: { thumb: { stroke: { color: i }, fill: { color: i } } } }, selectable: { stroke: { color: i } }, connectionDefaults: { stroke: { color: i }, content: { color: i }, selection: { handles: { fill: { color: r }, stroke: { color: i } }, stroke: { color: i } } } }, treeMap: { colors: t(n, ["#ffd9dc", "#ffeced", "#cceef3", "#e6f8fb", "#fff2da", "#fff7e8"]) } }) }() }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.themes.min", ["kendo.dataviz.core.min", "dataviz/themes/chart-base-theme.min", "dataviz/themes/auto-theme.min", "dataviz/themes/themes.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/chart/kendo-chart.min", ["kendo.core.min", "kendo.color.min", "kendo.drawing.min", "kendo.dataviz.core.min"], function () { !function (e) { function t(e) { var t, i, n = e.length, o = 0; for (t = 0; t < n; t++)i = e[t], P(i) && o++; return o } function i(e, t) { if (null === t) return t; var i = ee(e, !0); return i(t) } function n(e, t, i, o) { var r, s, a, l, c; if (void 0 === i && (i = {}), void 0 === o && (o = !1), r = i.defaults = i.defaults || {}, s = i.depth = i.depth || 0, a = !1, i.excluded = i.excluded || [], s > ui) return null; for (l in e) !ae(l, i.excluded) && e.hasOwnProperty(l) && (c = e[l], le(c) ? (a = !0, o || (e[l] = ce(c(t), r[l]))) : de(c) && (o || (i.defaults = r[l]), i.depth++, a = n(c, t, i, o) || a, i.depth--)); return a } function o(e) { var t, i = e.length, n = 0; for (t = 0; t < i; t++)n = Math.max(n, e[t].data.length); return n } function r(e) { for (var t = 0; t < e.length; t++)if (J(e[t].zIndex)) return !0 } function s(e) { var t = e.overlay; return t && t.gradient && "none" !== t.gradient } function a(e) { return t(e) === e.length } function l(e) { return J(e) && null !== e } function c(e) { var t, i, n, o = e.length; if (o > 0) for (i = 0; i < o; i++)n = e[i].contentBox(), t ? t.wrap(n) : t = n.clone(); return t || new oe } function d(e, t) { var i, n; for (i = 0; i < e.length; i++)if ((n = e[i]) && n.pane === t) return n } function u(e, t, i) { var n, o = t, r = e; if (e.indexOf(".") > -1) { for (n = e.split("."); n.length > 1;)r = n.shift(), J(o[r]) || (o[r] = {}), o = o[r]; r = n.shift() } o[r] = i } function h(e, t) { var i, n, o = [], r = [].concat(t); for (i = 0; i < e.length; i++)n = e[i], ae(n.type, r) && o.push(n); return o } function f(e, t) { return e && t ? e.toLowerCase() === t.toLowerCase() : e === t } function p(e, t) { var i = e.type, n = t instanceof Date; return !i && n || f(i, Q) } function m(e, t) { null !== t && e.push(t) } function g(e) { return 1 === e.length ? e[0] : e } function v(e, t, i) { var n, o; return null === t ? t : ((o = t[n = "_date_" + e]) || (o = ke(i, ee(e, !0)(t)), t[n] = o), o) } function _(e, t, i) { return De(e, function (e) { return 0 === i && !e.categoryAxis || e.categoryAxis === t }) } function b() { this._defaultPrevented = !0 } function w(e, t) { var i = (t || "").toLowerCase(), n = e.event, o = "none" === i && !(n.ctrlKey || n.shiftKey || n.altKey) || n[i + "Key"]; return o } function y(e) { var t, i, n = {}; for (t = 0; t < e.length; t++)(i = e[t]).axis.options.name && (n[i.axis.options.name] = { min: i.range.min, max: i.range.max }); return n } function k(e) { var t = document.createElement("div"); return e && (t.className = e), t } function x(e) { for (var t = e; t && !Ie(t, "k-handle");)t = t.parentNode; return t } function C(e) { e.stopPropagation() } function S(e, t, i) { var n, o = t.visible; return J(o) ? o : (n = e.pointVisibility) ? n[i] : void 0 } function T(e) { var t, i, n, o, r = e.data, s = 0; for (t = 0; t < r.length; t++)i = Ge.current.bindPoint(e, t), n = i.valueFields.value, ye(n) && (n = parseFloat(n)), o = S(e, i.fields, t), P(n) && !1 !== o && (s += Math.abs(n)); return s } function D(e, t, i, n) { var o, r, s = (n.x - i.x) * (e.y - i.y) - (n.y - i.y) * (e.x - i.x), a = (n.y - i.y) * (t.x - e.x) - (n.x - i.x) * (t.y - e.y); return 0 !== a && (r = s / a, o = new ne(e.x + r * (t.x - e.x), e.y + r * (t.y - e.y))), o } function A(e, t) { return e.value.x - t.value.x } function E(e, t) { if (e) for (var i = 0; i < e.length; i++)if (e[i].category === t) return [e[i]] } function I(e) { delete e.bar, delete e.column, delete e.rangeColumn, delete e.line, delete e.verticalLine, delete e.pie, delete e.donut, delete e.area, delete e.verticalArea, delete e.scatter, delete e.scatterLine, delete e.bubble, delete e.candlestick, delete e.ohlc, delete e.boxPlot, delete e.bullet, delete e.verticalBullet, delete e.polarArea, delete e.polarLine, delete e.radarArea, delete e.radarLine, delete e.waterfall } function M(e) { var t, i, n, o = {}; for (t = 0; t < e.length; t++)i = e[t], (n = i.options.name) && (o[n] = i.range()); return o } function R(e, t) { var i, n, o, r; for (void 0 === t && (t = F.dateComparer), i = function (e, t) { void 0 === t && (t = F.dateComparer); for (var i = 1, n = e.length; i < n; i++)if (t(e[i], e[i - 1]) < 0) { e.sort(t); break } return e }(e, t), n = i.length, o = n > 0 ? [i[0]] : [], r = 1; r < n; r++)0 !== t(i[r], be(o)) && o.push(i[r]); return o } var F, z, P, B, L, H, N, O, V, U, W, q, j, G, $, Y, K, Q, X, Z, J, ee, te, ie, ne, oe, re, se, ae, le, ce, de, ue, he, fe, pe, me, ge, ve, _e, be, we, ye, ke, xe, Ce, Se, Te, De, Ae, Ee, Ie, Me, Re, Fe, ze, Pe, Be, Le, He, Ne, Oe, Ve, Ue, We, qe, je, Ge, $e, Ye, Ke, Qe, Xe, Ze, Je, et, tt, it, nt, ot, rt, st, at, lt, ct, dt, ut, ht, ft, pt, mt, gt, vt, _t, bt, wt, yt, kt, xt, Ct, St, Tt, Dt, At, Et, It, Mt, Rt, Ft, zt, Pt, Bt, Lt, Ht, Nt, Ot, Vt, Ut, Wt, qt, jt, Gt, $t, Yt, Kt, Qt, Xt, Zt, Jt, ei, ti, ii, ni, oi, ri, si, ai, li, ci, di, ui, hi, fi, pi, mi, gi, vi, _i, bi, wi, yi, ki, xi, Ci, Si, Ti, Di, Ai, Ei, Ii, Mi, Ri, Fi, zi, Pi, Bi, Li, Hi, Ni, Oi, Vi, Ui, Wi, qi, ji, Gi, $i, Yi, Ki, Qi, Xi, Zi, Ji, en, tn, nn, on, rn, sn, an, ln, cn, dn, un, hn, fn, pn, mn, gn, vn, _n, bn, wn, yn, kn, xn, Cn, Sn, Tn, Dn, An, En, In, Mn, Rn, Fn, zn, Pn, Bn, Ln, Hn, Nn, On, Vn, Un, Wn, qn, jn, Gn, $n, Yn, Kn, Qn, Xn, Zn, Jn, eo, to, io, no, oo, ro, so, ao, lo, co, uo; window.kendo.dataviz = window.kendo.dataviz || {}, F = kendo.dataviz, z = F.Class, P = F.isNumber, B = F.constants, L = B.MAX_VALUE, H = B.MIN_VALUE, N = B.VALUE, O = B.CENTER, V = B.TOP, U = B.BOTTOM, W = B.LEFT, q = B.WHITE, j = B.CIRCLE, G = B.Y, $ = B.X, Y = B.RIGHT, K = B.BLACK, Q = B.DATE, X = B.DEFAULT_PRECISION, Z = B.ARC, J = F.defined, ee = F.getter, te = F.isArray, ie = F.ChartElement, ne = F.Point, oe = F.Box, re = F.alignPathToPixel, se = F.setDefaultOptions, ae = F.inArray, le = F.isFunction, ce = F.valueOrDefault, de = F.isObject, ue = F.deepExtend, he = F.eventElement, fe = F.services, pe = fe.TemplateService, me = F.TextBox, ge = F.ShapeElement, ve = F.getSpacing, _e = F.limitValue, be = F.last, we = F.append, ye = F.isString, ke = F.parseDate, xe = F.styleValue, Ce = F.CategoryAxis, Se = F.BoxElement, Te = F.round, De = F.grep, Ae = F.DateCategoryAxis, Ee = F.elementStyles, Ie = F.hasClasses, Me = F.bindEvents, Re = F.unbindEvents, Fe = kendo.support, ze = kendo.drawing, Pe = ze.Path, Be = ze.Animation, Le = ze.AnimationFactory, He = ze.Group, Ne = kendo.Color, Oe = kendo.geometry, Ve = Oe.Point, Ue = Oe.transform, We = z.extend({ init: function (e) { this._axis = e, this.options = e.options }, value: function (e) { var t = this._axis, i = t.getCategory ? t.getCategory(e) : t.getValue(e); return i }, slot: function (e, t, i) { return void 0 === i && (i = !0), this._axis.slot(e, t, i) }, range: function () { return this._axis.range() }, valueRange: function () { return this._axis.valueRange() } }), qe = z.extend({ init: function (e) { this._plotArea = e, this.visual = e.visual, this.backgroundVisual = e._bgVisual } }), je = { min: function (e) { var t, i, n = e.length, o = L; for (t = 0; t < n; t++)i = e[t], P(i) && (o = Math.min(o, i)); return o === L ? e[0] : o }, max: function (e) { var t, i, n = e.length, o = H; for (t = 0; t < n; t++)i = e[t], P(i) && (o = Math.max(o, i)); return o === H ? e[0] : o }, sum: function (e) { var t, i, n = e.length, o = 0; for (t = 0; t < n; t++)i = e[t], P(i) && (o += i); return o }, sumOrNull: function (e) { var i = null; return t(e) && (i = je.sum(e)), i }, count: function (e) { var t, i, n = e.length, o = 0; for (t = 0; t < n; t++)null !== (i = e[t]) && J(i) && o++; return o }, avg: function (e) { var i = t(e), n = e[0]; return i > 0 && (n = je.sum(e) / i), n }, first: function (e) { var t, i, n = e.length; for (t = 0; t < n; t++)if (null !== (i = e[t]) && J(i)) return i; return e[0] } }, (Ge = z.extend({ init: function () { this._valueFields = {}, this._otherFields = {}, this._nullValue = {}, this._undefinedValue = {} }, register: function (e, t, i) { var n, o, r = this; for (void 0 === t && (t = [N]), void 0 === i && (i = {}), n = 0; n < e.length; n++)o = e[n], r._valueFields[o] = t, r._otherFields[o] = i, r._nullValue[o] = r._makeValue(t, null), r._undefinedValue[o] = r._makeValue(t, void 0) }, canonicalFields: function (e) { return this.valueFields(e).concat(this.otherFields(e)) }, valueFields: function (e) { return this._valueFields[e.type] || [N] }, otherFields: function (e) { return this._otherFields[e.type] || [N] }, bindPoint: function (e, t, i) { var n, o, r, s, a, l = e.data, c = J(i) ? i : l[t], d = { valueFields: { value: c } }, u = this.valueFields(e), h = this._otherFields[e.type]; return null === c ? o = this._nullValue[e.type] : J(c) ? Array.isArray(c) ? (r = c.slice(u.length), o = this._bindFromArray(c, u), n = this._bindFromArray(r, h)) : "object" == typeof c && (s = this.sourceFields(e, u), a = this.sourceFields(e, h), o = this._bindFromObject(c, u, s), n = this._bindFromObject(c, h, a)) : o = this._undefinedValue[e.type], J(o) && (1 === u.length ? d.valueFields.value = o[u[0]] : d.valueFields = o), d.fields = n || {}, d }, _makeValue: function (e, t) { var i, n, o = {}, r = e.length; for (i = 0; i < r; i++)n = e[i], o[n] = t; return o }, _bindFromArray: function (e, t) { var i, n, o = {}; if (t) for (i = Math.min(t.length, e.length), n = 0; n < i; n++)o[t[n]] = e[n]; return o }, _bindFromObject: function (e, t, n) { var o, r, s, a, l; if (void 0 === n && (n = t), o = {}, t) for (r = t.length, s = 0; s < r; s++)a = t[s], l = n[s], o[a] = i(l, e); return o }, sourceFields: function (e, t) { var i, n, o, r, s = []; if (t) for (i = t.length, n = 0; n < i; n++)o = t[n], r = o === N ? "field" : o + "Field", s.push(e[r] || o); return s } })).current = new Ge, $e = /percent(?:\w*)\((\d+)\)/, Ye = RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"), Ke = z.extend({ init: function (e, t, i) { this.initGlobalRanges(e, t, i) }, initGlobalRanges: function (e, t, i) { var n, o, r, s, a, l = t.data, c = Ye.exec(e); c ? (this.valueGetter = this.createValueGetter(t, i), n = this.getAverage(l), o = this.getStandardDeviation(l, n, !1), r = c[1] ? parseFloat(c[1]) : 1, s = { low: n.value - o * r, high: n.value + o * r }, this.globalRange = function () { return s }) : e.indexOf && e.indexOf("stderr") >= 0 && (this.valueGetter = this.createValueGetter(t, i), a = this.getStandardError(l, this.getAverage(l)), this.globalRange = function (e) { return { low: e - a, high: e + a } }) }, createValueGetter: function (e, t) { var i, n, o, r = e.data, s = Ge.current, a = s.valueFields(e), l = J(r[0]) ? r[0] : {}; return te(l) ? (n = t ? a.indexOf(t) : 0, i = ee("[" + n + "]")) : P(l) ? i = ee() : typeof l === B.OBJECT && (o = s.sourceFields(e, a), i = ee(o[a.indexOf(t)])), i }, getErrorRange: function (e, t) { var i, n, o, r; if (!J(t)) return null; if (this.globalRange) return this.globalRange(e); if (te(t)) i = e - t[0], n = e + t[1]; else if (P(o = parseFloat(t))) i = e - o, n = e + o; else { if (!(o = $e.exec(t))) throw Error("Invalid ErrorBar value: " + t); r = e * (parseFloat(o[1]) / 100), i = e - Math.abs(r), n = e + Math.abs(r) } return { low: i, high: n } }, getStandardError: function (e, t) { return this.getStandardDeviation(e, t, !0) / Math.sqrt(t.count) }, getStandardDeviation: function (e, t, i) { var n, o, r = e.length, s = i ? t.count - 1 : t.count, a = 0; for (n = 0; n < r; n++)o = this.valueGetter(e[n]), P(o) && (a += Math.pow(o - t.value, 2)); return Math.sqrt(a / s) }, getAverage: function (e) { var t, i, n = e.length, o = 0, r = 0; for (t = 0; t < n; t++)i = this.valueGetter(e[t]), P(i) && (o += i, r++); return { value: o / r, count: r } } }), Qe = Fe.browser || {}, Xe = 600, Ze = "fadeIn", Je = Qe.msie ? .001 : 0, li = { INITIAL_ANIMATION_DURATION: Xe, FADEIN: Ze, LEGEND_ITEM_CLICK: Nt = "legendItemClick", LEGEND_ITEM_HOVER: Ot = "legendItemHover", SERIES_CLICK: Vt = "seriesClick", SERIES_HOVER: Ut = "seriesHover", GLASS: "glass", BORDER_BRIGHTNESS: .8, TOOLTIP_OFFSET: 5, START_SCALE: Je, ERROR_LOW_FIELD: et = "errorLow", ERROR_HIGH_FIELD: tt = "errorHigh", X_ERROR_LOW_FIELD: it = "xErrorLow", X_ERROR_HIGH_FIELD: nt = "xErrorHigh", Y_ERROR_LOW_FIELD: ot = "yErrorLow", Y_ERROR_HIGH_FIELD: rt = "yErrorHigh", LINE_MARKER_SIZE: 8, INTERPOLATE: at = "interpolate", ZERO: st = "zero", SMOOTH: lt = "smooth", STEP: ct = "step", CATEGORY: ni = "category", FUNNEL: _t = "funnel", BAR: ut = "bar", CANDLESTICK: mt = "candlestick", PIE: kt = "pie", COLUMN: gt = "column", AREA: dt = "area", VERTICAL_BULLET: Pt = "verticalBullet", BOX_PLOT: ht = "boxPlot", OHLC: yt = "ohlc", WATERFALL: Lt = "waterfall", LINE: wt = "line", BULLET: pt = "bullet", VERTICAL_LINE: Bt = "verticalLine", VERTICAL_AREA: Ft = "verticalArea", RANGE_COLUMN: It = "rangeColumn", VERTICAL_BOX_PLOT: zt = "verticalBoxPlot", RANGE_BAR: Et = "rangeBar", HORIZONTAL_WATERFALL: bt = "horizontalWaterfall", SCATTER: Mt = "scatter", SCATTER_LINE: Rt = "scatterLine", BUBBLE: ft = "bubble", RADAR_AREA: Tt = "radarArea", RADAR_LINE: At = "radarLine", RADAR_COLUMN: Dt = "radarColumn", POLAR_LINE: Ct = "polarLine", POLAR_AREA: xt = "polarArea", POLAR_SCATTER: St = "polarScatter", RENDER: "render", PLOT_AREA_CLICK: Wt = "plotAreaClick", PLOT_AREA_HOVER: qt = "plotAreaHover", LOGARITHMIC: ii = "log", DRAG: jt = "drag", DRAG_START: $t = "dragStart", DRAG_END: Gt = "dragEnd", ZOOM_START: Yt = "zoomStart", ZOOM: Kt = "zoom", ZOOM_END: Qt = "zoomEnd", SELECT_START: Xt = "selectStart", SELECT: Zt = "select", SELECT_END: Jt = "selectEnd", GAP: "gap", DONUT: vt = "donut", INSIDE_END: oi = "insideEnd", INSIDE_BASE: ri = "insideBase", OUTSIDE_END: si = "outsideEnd", MOUSEWHEEL: ai = "DOMMouseScroll mousewheel", MOUSEWHEEL_DELAY: 150, SHOW_TOOLTIP: ei = "showTooltip", HIDE_TOOLTIP: ti = "hideTooltip", EQUALLY_SPACED_SERIES: Ht = [ut, gt, yt, mt, ht, zt, pt, It, Et, Lt, bt] }, ci = ie.extend({ init: function (e, t, i, n, o, r) { ie.fn.init.call(this, r), this.low = e, this.high = t, this.isVertical = i, this.chart = n, this.series = o }, reflow: function (e) { var t, i = this.options.endCaps, n = this.isVertical, o = this.getAxis(), r = o.getSlot(this.low, this.high), s = e.center(), a = this.getCapsWidth(e, n), l = n ? s.x : s.y, c = l - a, d = l + a; n ? (t = [new ne(s.x, r.y1), new ne(s.x, r.y2)], i && t.push(new ne(c, r.y1), new ne(d, r.y1), new ne(c, r.y2), new ne(d, r.y2)), this.box = new oe(c, r.y1, d, r.y2)) : (t = [new ne(r.x1, s.y), new ne(r.x2, s.y)], i && t.push(new ne(r.x1, c), new ne(r.x1, d), new ne(r.x2, c), new ne(r.x2, d)), this.box = new oe(r.x1, c, r.x2, d)), this.linePoints = t }, getCapsWidth: function (e, t) { var i = t ? e.width() : e.height(), n = Math.min(Math.floor(i / 2), 4) || 4; return n }, createVisual: function () { var e = this, t = this.options, i = t.visual; i ? this.visual = i({ low: this.low, high: this.high, rect: this.box.toRect(), sender: this.getSender(), options: { endCaps: t.endCaps, color: t.color, line: t.line }, createVisual: function () { e.createDefaultVisual(); var t = e.visual; return delete e.visual, t } }) : this.createDefaultVisual() }, createDefaultVisual: function () { var e, t, i = this.options, n = this.linePoints, o = { stroke: { color: i.color, width: i.line.width, dashType: i.line.dashType } }; for (ie.fn.createVisual.call(this), e = 0; e < n.length; e += 2)t = new Pe(o).moveTo(n[e].x, n[e].y).lineTo(n[e + 1].x, n[e + 1].y), re(t), this.visual.append(t) } }), se(ci, { animation: { type: Ze, delay: Xe }, endCaps: !0, line: { width: 2 }, zIndex: 1 }), di = ci.extend({ getAxis: function () { var e = this.chart.seriesValueAxis(this.series); return e } }), ui = 5, hi = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.plotArea = e, this.chartService = e.chartService, this.categoryAxis = e.seriesCategoryAxis(t.series[0]), this.valueAxisRanges = {}, this.points = [], this.categoryPoints = [], this.seriesPoints = [], this.seriesOptions = [], this._evalSeries = [], this.render() }, render: function () { this.traverseDataPoints(this.addValue.bind(this)) }, pointOptions: function (e, t) { var i, n = this.seriesOptions[t]; return n || (i = this.pointType().prototype.defaults, this.seriesOptions[t] = n = ue({}, i, { vertical: !this.options.invertAxes }, e)), n }, plotValue: function (e) { var t, i, n, o, r, s, a, l; if (!e) return 0; if (this.options.isStacked100 && P(e.value)) { for (t = e.categoryIx, i = this.categoryPoints[t], n = [], o = 0, r = 0; r < i.length; r++)if (s = i[r]) { if (a = e.series.stack, l = s.series.stack, a && l && a.group !== l.group) continue; P(s.value) && (o += Math.abs(s.value), n.push(Math.abs(s.value))) } if (o > 0) return e.value / o } return e.value }, plotRange: function (e, t) { var i, n, o, r, s, a, l, c, d, u, h, f, p; if (void 0 === t && (t = 0), i = this.categoryPoints[e.categoryIx], this.options.isStacked) { for (n = this.plotValue(e), o = n >= 0, r = t, s = !1, a = 0; a < i.length && (l = i[a], e !== l); a++) { if (c = e.series.stack, d = l.series.stack, c && d) { if (typeof c === B.STRING && c !== d) continue; if (c.group && c.group !== d.group) continue } ((u = this.plotValue(l)) >= 0 && o || u < 0 && !o) && (r += u, n += u, s = !0, this.options.isStacked100 && (n = Math.min(n, 1))) } return s && (r -= t), [r, n] } return h = e.series, f = this.seriesValueAxis(h), [p = this.categoryAxisCrossingValue(f), e.value || p] }, stackLimits: function (e, t) { var i, n, o, r, s, a = L, l = H; for (i = 0; i < this.categoryPoints.length; i++)if (n = this.categoryPoints[i]) for (o = 0; o < n.length; o++)(r = n[o]) && (r.series.stack !== t && r.series.axis !== e || (s = this.plotRange(r, 0)[1], J(s) && isFinite(s) && (l = Math.max(l, s), a = Math.min(a, s)))); return { min: a, max: l } }, updateStackRange: function () { var e, t, i, n, o, r, s = this, a = this.options, l = a.isStacked, c = a.series, d = {}; if (l) for (e = 0; e < c.length; e++)t = c[e], i = t.axis, n = i + t.stack, (o = d[n]) || (o = s.stackLimits(i, t.stack), (r = s.errorTotals) && (r.negative.length && (o.min = Math.min(o.min, F.sparseArrayLimits(r.negative).min)), r.positive.length && (o.max = Math.max(o.max, F.sparseArrayLimits(r.positive).max))), o.min !== L || o.max !== H ? d[n] = o : o = null), o && (s.valueAxisRanges[i] = o) }, addErrorBar: function (e, t, i) { var n, o = e.value, r = e.series, s = e.seriesIx, a = e.options.errorBars, l = t.fields[et], c = t.fields[tt]; P(l) && P(c) ? n = { low: l, high: c } : a && J(a.value) && (this.seriesErrorRanges = this.seriesErrorRanges || [], this.seriesErrorRanges[s] = this.seriesErrorRanges[s] || new Ke(a.value, r, N), n = this.seriesErrorRanges[s].getErrorRange(o, a.value)), n && (e.low = n.low, e.high = n.high, this.addPointErrorBar(e, i)) }, addPointErrorBar: function (e, t) { var i, n, o, r = !this.options.invertAxes, s = e.options.errorBars, a = e.series, l = e.low, c = e.high; this.options.isStacked ? (i = this.stackedErrorRange(e, t), l = i.low, c = i.high) : (n = { categoryIx: t, series: a }, this.updateRange({ value: l }, n), this.updateRange({ value: c }, n)), o = new di(l, c, r, this, a, s), e.errorBars = [o], e.append(o) }, stackedErrorRange: function (e, t) { var i = this.plotRange(e, 0)[1] - e.value, n = e.low + i, o = e.high + i; return this.errorTotals = this.errorTotals || { positive: [], negative: [] }, n < 0 && (this.errorTotals.negative[t] = Math.min(this.errorTotals.negative[t] || 0, n)), o > 0 && (this.errorTotals.positive[t] = Math.max(this.errorTotals.positive[t] || 0, o)), { low: n, high: o } }, addValue: function (t, i) { var n, o, r = i.categoryIx, s = i.series, a = i.seriesIx, l = this.categoryPoints[r]; l || (this.categoryPoints[r] = l = []), (n = this.seriesPoints[a]) || (this.seriesPoints[a] = n = []), (o = this.createPoint(t, i)) && (e.extend(o, i), o.owner = this, o.dataItem = s.data[r], o.noteText = t.fields.noteText, this.addErrorBar(o, t, r)), this.points.push(o), n.push(o), l.push(o), this.updateRange(t.valueFields, i) }, evalPointOptions: function (e, t, i, o, r, s) { var a, l = { defaults: r._defaults, excluded: ["data", "aggregate", "_events", "tooltip", "template", "visual", "toggle", "_outOfRangeMinPoint", "_outOfRangeMaxPoint"] }, c = this._evalSeries[s]; return J(c) || (this._evalSeries[s] = c = n(e, {}, l, !0)), a = e, c && n(a = ue({}, a), { value: t, category: i, index: o, series: r, dataItem: r.data[o] }, l), a }, updateRange: function (e, t) { var i = t.series.axis, n = e.value, o = this.valueAxisRanges[i]; isFinite(n) && null !== n && ((o = this.valueAxisRanges[i] = o || { min: L, max: H }).min = Math.min(o.min, n), o.max = Math.max(o.max, n)) }, seriesValueAxis: function (e) { var t = this.plotArea, i = e.axis, n = i ? t.namedValueAxes[i] : t.valueAxis; if (!n) throw Error("Unable to locate value axis with name " + i); return n }, reflow: function (e) { var t = this, i = this.categorySlots = [], n = this.points, o = this.categoryAxis, r = 0; this.traverseDataPoints(function (e, s) { var a, l, c, d = s.categoryIx, u = s.series, h = t.seriesValueAxis(u), f = n[r++], p = i[d]; p || (i[d] = p = t.categorySlot(o, d, h)), f && (a = t.plotRange(f, h.startValue()), (l = h.getSlot(a[0], a[1], !t.options.clip)) ? (c = t.pointSlot(p, l), f.aboveAxis = t.aboveAxis(f, h), f.stackValue = a[1], t.options.isStacked100 && (f.percentage = t.plotValue(f)), t.reflowPoint(f, c)) : f.visible = !1) }), this.reflowCategories(i), this.box = e }, aboveAxis: function (e, t) { var i = this.categoryAxisCrossingValue(t), n = e.value; return t.options.reverse ? n < i : n >= i }, categoryAxisCrossingValue: function (e) { var t = this.categoryAxis, i = e.options, n = [].concat(i.axisCrossingValues || i.axisCrossingValue); return n[t.axisIndex || 0] || 0 }, reflowPoint: function (e, t) { e.reflow(t) }, reflowCategories: function () { }, pointSlot: function (e, t) { var i = this.options, n = i.invertAxes, o = n ? t : e, r = n ? e : t; return new oe(o.x1, r.y1, o.x2, r.y2) }, categorySlot: function (e, t) { return e.getSlot(t) }, traverseDataPoints: function (e) { var t, i, n, r, s, a, l, c = this, d = this.options.series, u = this.categoryAxis.options.categories || [], h = o(d), f = d.length; for (t = 0; t < f; t++)c._outOfRangeCallback(d[t], "_outOfRangeMinPoint", t, e); for (i = 0; i < h; i++)for (n = 0; n < f; n++)r = d[n], s = u[i], a = c._bindPoint(r, n, i), e(a, { category: s, categoryIx: i, series: r, seriesIx: n }); for (l = 0; l < f; l++)c._outOfRangeCallback(d[l], "_outOfRangeMaxPoint", l, e) }, _outOfRangeCallback: function (e, t, i, n) { var o, r, s = e[t]; s && (o = s.categoryIx, r = this._bindPoint(e, i, o, s.item), n(r, { category: s.category, categoryIx: o, series: e, seriesIx: i })) }, _bindPoint: function (e, t, i, n) { var o, r; return this._bindCache || (this._bindCache = []), (o = this._bindCache[t]) || (o = this._bindCache[t] = []), (r = o[i]) || (r = o[i] = Ge.current.bindPoint(e, i, n)), r }, formatPointValue: function (e, t) { return null === e.value ? "" : this.chartService.format.auto(t, e.value) }, pointValue: function (e) { return e.valueFields.value } }), se(hi, { series: [], invertAxes: !1, isStacked: !1, clip: !0 }), fi = { click: function (e, t) { return e.trigger(Vt, this.eventArgs(t)) }, hover: function (e, t) { return e.trigger(Ut, this.eventArgs(t)) }, eventArgs: function (e) { return { value: this.value, percentage: this.percentage, stackValue: this.stackValue, category: this.category, series: this.series, dataItem: this.dataItem, runningTotal: this.runningTotal, total: this.total, element: he(e), originalEvent: e, point: this } } }, pi = { createNote: function () { var e = this.options.notes, t = this.noteText || e.label.text; !1 !== e.visible && J(t) && null !== t && (this.note = new F.Note({ value: this.value, text: t, dataItem: this.dataItem, category: this.category, series: this.series }, this.options.notes, this.owner.chartService), this.append(this.note)) } }, (mi = ie.extend({ init: function (e, t) { ie.fn.init.call(this), this.value = e, this.options = t, this.aboveAxis = ce(this.options.aboveAxis, !0), this.tooltipTracking = !0 }, render: function () { var e, t, i = this.options, n = i.markers, o = i.labels; this._rendered || (this._rendered = !0, n.visible && n.size && (this.marker = this.createMarker(), this.append(this.marker)), o.visible && (e = this.value, o.template ? (t = pe.compile(o.template), e = t({ dataItem: this.dataItem, category: this.category, value: this.value, percentage: this.percentage, stackValue: this.stackValue, series: this.series })) : o.format && (e = this.formatValue(o.format)), this.label = new me(e, ue({ align: O, vAlign: O, margin: { left: 5, right: 5 }, zIndex: ce(o.zIndex, this.series.zIndex) }, o)), this.append(this.label)), this.createNote(), this.errorBar && this.append(this.errorBar)) }, markerBorder: function () { var e = this.options.markers, t = e.background, i = ue({ color: this.color }, e.border); return J(i.color) || (i.color = new Ne(t).brightness(.8).toHex()), i }, createVisual: function () { }, createMarker: function () { var e = this.options.markers, t = new ge({ type: e.type, width: e.size, height: e.size, rotation: e.rotation, background: e.background, border: this.markerBorder(), opacity: e.opacity, zIndex: ce(e.zIndex, this.series.zIndex), animation: e.animation, visual: e.visual }, { dataItem: this.dataItem, value: this.value, series: this.series, category: this.category }); return t }, markerBox: function () { return this.marker || (this.marker = this.createMarker(), this.marker.reflow(this._childBox)), this.marker.box }, reflow: function (e) { var t, i, n, o, r = this.options, s = this.aboveAxis, a = r.vertical; if (this.render(), this.box = e, t = e.clone(), a ? s ? t.y1 -= t.height() : t.y2 += t.height() : s ? t.x1 += t.width() : t.x2 -= t.width(), this._childBox = t, this.marker && this.marker.reflow(t), this.reflowLabel(t), this.errorBars) for (i = 0; i < this.errorBars.length; i++)this.errorBars[i].reflow(t); this.note && (n = this.markerBox(), r.markers.visible && r.markers.size || (o = n.center(), n = new oe(o.x, o.y, o.x, o.y)), this.note.reflow(n)) }, reflowLabel: function (e) { var t = this.options, i = this.label, n = t.labels.position; i && (n = "below" === (n = "above" === n ? V : n) ? U : n, i.reflow(e), i.box.alignTo(this.markerBox(), n), i.reflow(i.box)) }, createHighlight: function () { var e = this.options.highlight.markers, t = this.markerBorder().color, i = this.options.markers, n = i.size + (i.border.width || 0) + (e.border.width || 0), o = new ge({ type: i.type, width: n, height: n, rotation: i.rotation, background: e.color || t, border: { color: e.border.color, width: e.border.width, opacity: ce(e.border.opacity, 1) }, opacity: ce(e.opacity, 1) }); return o.reflow(this._childBox), o.getElement() }, highlightVisual: function () { return (this.marker || {}).visual }, highlightVisualArgs: function () { var e, t, i, n, o, r = this.marker; return r ? (t = r.paddingBox.toRect(), e = r.visual) : (i = this.options.markers.size, n = i / 2, o = this.box.center(), t = new Oe.Rect([o.x - n, o.y - n], [i, i])), { options: this.options, rect: t, visual: e } }, tooltipAnchor: function () { var e, t, i, n, o = this.markerBox(), r = this.owner.pane.clipBox(), s = !r || r.overlaps(o); if (s) return e = o.x2 + 5, t = W, this.aboveAxis ? (i = o.y1, n = U) : (i = o.y2, n = V), { point: new ne(e, i), align: { horizontal: t, vertical: n } } }, formatValue: function (e) { return this.owner.formatPointValue(this, e) }, overlapsBox: function (e) { var t = this.markerBox(); return t.overlaps(e) } })).prototype.defaults = { vertical: !0, markers: { visible: !0, background: q, size: 8, type: j, border: { width: 2 }, opacity: 1 }, labels: { visible: !1, position: "above", margin: ve(3), padding: ve(4), animation: { type: Ze, delay: Xe } }, notes: { label: {} }, highlight: { markers: { border: { color: "#fff", width: 2 } } }, errorBars: { line: { width: 1 } } }, ue(mi.prototype, fi), ue(mi.prototype, pi), gi = ie.extend({ init: function (e, t, i) { ie.fn.init.call(this), this.linePoints = e, this.series = t, this.seriesIx = i }, points: function (e) { var t, i, n = this.linePoints.concat(e || []), o = []; for (t = 0, i = n.length; t < i; t++)!1 !== n[t].visible && o.push(n[t]._childBox.toRect().center()); return o }, createVisual: function () { var e, t = this.options, i = this.series, n = i.color, o = i._defaults; le(n) && o && (n = o.color), e = Pe.fromPoints(this.points(), { stroke: { color: n, width: i.width, opacity: i.opacity, dashType: i.dashType }, zIndex: i.zIndex }), t.closed && e.close(), this.visual = e }, aliasFor: function (e, t) { return this.parent.getNearestPoint(t.x, t.y, this.seriesIx) } }), se(gi, { closed: !1 }), vi = gi.extend({ points: function (e) { var t = this.calculateStepPoints(this.linePoints); return e && e.length && (t = t.concat(this.calculateStepPoints(e).reverse())), t }, calculateStepPoints: function (e) { var t, i, n, o, r, s = this.parent, a = s.plotArea, l = a.seriesCategoryAxis(this.series), c = s.seriesMissingValues(this.series) === at, d = l.options.reverse, u = l.options.vertical, h = d ? 2 : 1, f = d ? 1 : 2, p = e.length, m = []; for (t = 1; t < p; t++)i = e[t - 1], n = e[t], o = i.markerBox().center(), r = n.markerBox().center(), l.options.justified ? (m.push(new Ve(o.x, o.y)), m.push(u ? new Ve(o.x, r.y) : new Ve(r.x, o.y)), m.push(new Ve(r.x, r.y))) : u ? (m.push(new Ve(o.x, i.box[G + h])), m.push(new Ve(o.x, i.box[G + f])), c && m.push(new Ve(o.x, n.box[G + h])), m.push(new Ve(r.x, n.box[G + h])), m.push(new Ve(r.x, n.box[G + f]))) : (m.push(new Ve(i.box[$ + h], o.y)), m.push(new Ve(i.box[$ + f], o.y)), c && m.push(new Ve(n.box[$ + h], o.y)), m.push(new Ve(n.box[$ + h], r.y)), m.push(new Ve(n.box[$ + f], r.y))); return m || [] } }), _i = gi.extend({ createVisual: function () { var e, t, i, n = this.series, o = n._defaults, r = n.color; le(r) && o && (r = o.color), e = new F.CurveProcessor(this.options.closed), t = e.process(this.points()), (i = new Pe({ stroke: { color: r, width: n.width, opacity: n.opacity, dashType: n.dashType }, zIndex: n.zIndex })).segments.push.apply(i.segments, t), this.visual = i } }), bi = { renderSegments: function () { var e, t, i, n, o, r, s, a, l = this, c = this.options, d = this.seriesPoints, u = c.series, h = d.length; for (this._segments = [], t = 0; t < h; t++) { for (i = u[t], n = l.sortPoints(d[t]), o = n.length, r = [], s = 0; s < o; s++)(a = n[s]) ? r.push(a) : l.seriesMissingValues(i) !== at && (r.length > 1 && (e = l.createSegment(r, i, t, e), l._addSegment(e)), r = []); r.length > 1 && (e = l.createSegment(r, i, t, e), l._addSegment(e)) } this.children.unshift.apply(this.children, this._segments) }, _addSegment: function (e) { this._segments.push(e), e.parent = this }, sortPoints: function (e) { return e }, seriesMissingValues: function (e) { var t = e.missingValues, i = !t && this.options.isStacked; return i ? st : t || at }, getNearestPoint: function (e, t, i) { var n, o, r, s, a, l = new ne(e, t), c = this.seriesPoints[i], d = L; for (o = 0; o < c.length; o++)(r = c[o]) && J(r.value) && null !== r.value && !1 !== r.visible && (s = r.box, (a = s.center().distanceTo(l)) < d && (n = r, d = a)); return n } }, wi = Be.extend({ setup: function () { this._setEnd(this.options.box.x1) }, step: function (e) { var t = this.options.box; this._setEnd(F.interpolateValue(t.x1, t.x2, e)) }, _setEnd: function (e) { var t = this.element, i = t.segments, n = i[1].anchor(), o = i[2].anchor(); t.suspend(), n.setX(e), t.resume(), o.setX(e) } }), se(wi, { duration: Xe }), Le.current.register("clip", wi), yi = { createAnimation: function () { var e, t, i = this.getRoot(); i && !1 !== (i.options || {}).transitions && (e = i.box, t = Pe.fromRect(e.toRect()), this.visual.clip(t), this.animation = new wi(t, { box: e }), r(this.options.series) && this._setChildrenAnimation(t)) }, _setChildrenAnimation: function (e) { var t, i, n = this.animationPoints(); for (t = 0; t < n.length; t++)(i = n[t]) && i.visual && J(i.visual.options.zIndex) && i.visual.clip(e) } }, ki = hi.extend({ render: function () { hi.fn.render.call(this), this.updateStackRange(), this.renderSegments() }, pointType: function () { return mi }, createPoint: function (e, t) { var i, n, o, r = t.categoryIx, s = t.category, a = t.series, l = t.seriesIx, c = this.seriesMissingValues(a), d = e.valueFields.value; if (!J(d) || null === d) { if (c !== st) return null; d = 0 } return i = this.pointOptions(a, l), i = this.evalPointOptions(i, d, s, r, a, l), n = e.fields.color || a.color, le(a.color) && (n = i.color), (o = new mi(d, i)).color = n, this.append(o), o }, plotRange: function (e) { var t, i, n, o, r = this.plotValue(e); if (this.options.isStacked) for (t = e.categoryIx, i = this.categoryPoints[t], n = 0; n < i.length && (o = i[n], e !== o); n++)r += this.plotValue(o), this.options.isStacked100 && (r = Math.min(r, 1)); return [r, r] }, createSegment: function (e, t, i) { var n = t.style; return new (n === ct ? vi : n === lt ? _i : gi)(e, t, i) }, animationPoints: function () { var e, t = this.points, i = []; for (e = 0; e < t.length; e++)i.push((t[e] || {}).marker); return i.concat(this._segments) } }), ue(ki.prototype, bi, yi), xi = { points: function () { var e, t, i = this.parent, n = i.plotArea, o = i.options.invertAxes, r = i.seriesValueAxis(this.series), s = r.lineBox(), a = n.seriesCategoryAxis(this.series), l = a.lineBox(), c = this.stackPoints, d = this._linePoints(c), u = o ? $ : G, h = o ? l.x1 : l.y1; return h = _e(h, s[u + 1], s[u + 2]), !this.stackPoints && d.length > 1 && (e = d[0], t = be(d), o ? (d.unshift(new Ve(h, e.y)), d.push(new Ve(h, t.y))) : (d.unshift(new Ve(e.x, h)), d.push(new Ve(t.x, h)))), d }, createVisual: function () { var e = this.series, t = e._defaults, i = e.color; le(i) && t && (i = t.color), this.visual = new He({ zIndex: e.zIndex }), this.createArea(i), this.createLine(i) }, createLine: function (e) { var t, i = this.series, n = ue({ color: e, opacity: i.opacity }, i.line); !1 !== n.visible && n.width > 0 && (t = Pe.fromPoints(this._linePoints(), { stroke: { color: n.color, width: n.width, opacity: n.opacity, dashType: n.dashType, lineCap: "butt" } }), this.visual.append(t)) }, createArea: function (e) { var t = this.series, i = Pe.fromPoints(this.points(), { fill: { color: e, opacity: t.opacity }, stroke: null }); this.visual.append(i) } }, Ci = gi.extend({ init: function (e, t, i, n) { gi.fn.init.call(this, e, i, n), this.stackPoints = t } }), ue(Ci.prototype, xi, { _linePoints: gi.prototype.points }), Si = vi.extend({ init: function (e, t, i, n) { vi.fn.init.call(this, e, i, n), this.stackPoints = t } }), ue(Si.prototype, xi, { _linePoints: vi.prototype.points }), Ti = Ci.extend({ init: function (e, t, i, n, o) { Ci.fn.init.call(this, e, [], n, o), this.prevSegment = t, this.isStacked = i }, strokeSegments: function () { var e, t, i = this._strokeSegments; return i || (e = new F.CurveProcessor(this.options.closed), t = gi.prototype.points.call(this), i = this._strokeSegments = e.process(t)), i }, createVisual: function () { var e = this.series, t = e._defaults, i = e.color; le(i) && t && (i = t.color), this.visual = new He({ zIndex: e.zIndex }), this.createFill({ fill: { color: i, opacity: e.opacity }, stroke: null }), this.createStroke({ stroke: ue({ color: i, opacity: e.opacity, lineCap: "butt" }, e.line) }) }, createFill: function (e) { var t, i, n, o, r, s, a, l = this.strokeSegments(), c = l.slice(0), d = this.prevSegment; if (this.isStacked && d) { for (t = d.strokeSegments(), i = be(t).anchor(), c.push(new Oe.Segment(i, i, be(l).anchor())), n = [], o = t.length - 1; o >= 0; o--)r = t[o], n.push(new Oe.Segment(r.anchor(), r.controlOut(), r.controlIn())); we(c, n), s = c[0].anchor(), c.push(new Oe.Segment(s, s, be(n).anchor())) } (a = new Pe(e)).segments.push.apply(a.segments, c), this.closeFill(a), this.visual.append(a) }, closeFill: function (e) { var t = this.parent, i = this.prevSegment, n = t.plotArea, o = t.options.invertAxes, r = t.seriesValueAxis(this.series), s = r.lineBox(), a = n.seriesCategoryAxis(this.series), l = a.lineBox(), c = o ? $ : G, d = this.strokeSegments(), u = d[0].anchor(), h = be(d).anchor(), f = o ? l.x1 : l.y1; f = _e(f, s[c + 1], s[c + 2]), t.options.isStacked && i || !(d.length > 1) || (o ? e.lineTo(f, h.y).lineTo(f, u.y) : e.lineTo(h.x, f).lineTo(u.x, f)) }, createStroke: function (e) { if (e.stroke.width > 0) { var t = new Pe(e); t.segments.push.apply(t.segments, this.strokeSegments()), this.visual.append(t) } } }), Di = ki.extend({ createSegment: function (e, t, i, n) { var o, r, s = this.options.isStacked, a = (t.line || {}).style; return s && i > 0 && n && (r = this.seriesMissingValues(t), o = "gap" !== r ? n.linePoints : this._gapStackPoints(e, i, a), a !== ct && (o = o.slice(0).reverse())), a === lt ? new Ti(e, n, s, t, i) : new (a === ct ? Si : Ci)(e, o, t, i) }, reflow: function (e) { var t, i, n, o; if (ki.fn.reflow.call(this, e), t = this._stackPoints) for (i = 0; i < t.length; i++)n = t[i], o = this.categoryAxis.getSlot(n.categoryIx), n.reflow(o) }, _gapStackPoints: function (e, t, i) { var n, o, r, s, a, l, c, d, u = this, h = this.seriesPoints, f = e[0].categoryIx, p = e.length; for (f < 0 && (f = 0, p--), n = f + p, o = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0, r = [], this._stackPoints = this._stackPoints || [], s = f; s < n; s++) { a = s + o, l = t, c = void 0; do { c = h[--l][a] } while (l > 0 && !c); c ? (i !== ct && s > f && !h[l][a - 1] && r.push(u._previousSegmentPoint(s, a, a - 1, l)), r.push(c), i !== ct && s + 1 < n && !h[l][a + 1] && r.push(u._previousSegmentPoint(s, a, a + 1, l))) : (d = u._createGapStackPoint(s), u._stackPoints.push(d), r.push(d)) } return r }, _previousSegmentPoint: function (e, t, i, n) { for (var o, r = this.seriesPoints, s = n; s > 0 && !o;)o = r[--s][i]; return o ? o = r[s][t] : (o = this._createGapStackPoint(e), this._stackPoints.push(o)), o }, _createGapStackPoint: function (e) { var t = this.pointOptions({}, 0), i = new mi(0, t); return i.categoryIx = e, i.series = {}, i }, seriesMissingValues: function (e) { return e.missingValues || st } }), Ai = z.extend({ init: function () { this.axisRanges = {} }, update: function (e) { var t, i, n, o = this.axisRanges; for (t in e) i = e[t], n = o[t], o[t] = n = n || { min: L, max: H }, n.min = Math.min(n.min, i.min), n.max = Math.max(n.max, i.max) }, reset: function (e) { this.axisRanges[e] = void 0 }, query: function (e) { return this.axisRanges[e] } }), Ei = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.textBox = new me(e, this.options), this.append(this.textBox) }, createVisual: function () { this.textBox.options.noclip = this.options.noclip }, reflow: function (e) { var t = this.options, i = t.vertical, n = t.aboveAxis, o = this.children[0], r = o.options, s = o.box, a = o.options.padding, l = e; r.align = i ? O : W, r.vAlign = i ? V : O, t.position === oi ? i ? (r.vAlign = V, !n && s.height() < e.height() && (r.vAlign = U)) : r.align = n ? Y : W : t.position === O ? (r.vAlign = O, r.align = O) : t.position === ri ? i ? r.vAlign = n ? U : V : r.align = n ? W : Y : t.position === si && (i ? l = n ? new oe(e.x1, e.y1 - s.height(), e.x2, e.y1) : new oe(e.x1, e.y2, e.x2, e.y2 + s.height()) : (r.align = O, l = n ? new oe(e.x2, e.y1, e.x2 + s.width(), e.y2) : new oe(e.x1 - s.width(), e.y1, e.x1, e.y2))), t.rotation || (i ? a.left = a.right = (l.width() - o.contentBox.width()) / 2 : a.top = a.bottom = (l.height() - o.contentBox.height()) / 2), o.reflow(l) }, alignToClipBox: function (e) { var t, i = this.options.vertical, n = i ? G : $, o = n + "1", r = n + "2", s = this.children[0], a = this.parent.box; (a[o] < e[o] || e[r] < a[r]) && ((t = s.paddingBox.clone())[o] = Math.max(a[o], e[o]), t[r] = Math.min(a[r], e[r]), this.reflow(t)) } }), se(Ei, { position: si, margin: ve(3), padding: ve(4), color: K, background: "", border: { width: 1, color: "" }, aboveAxis: !0, vertical: !1, animation: { type: Ze, delay: Xe }, zIndex: 2 }), Ii = ie.extend({ init: function (e, t) { ie.fn.init.call(this), this.options = t, this.color = t.color || q, this.aboveAxis = ce(this.options.aboveAxis, !0), this.value = e }, render: function () { this._rendered || (this._rendered = !0, this.createLabel(), this.createNote(), this.errorBar && this.append(this.errorBar)) }, createLabel: function () { var e, t, i = this.options, n = i.labels; n.visible && (n.template ? (t = pe.compile(n.template), e = t({ dataItem: this.dataItem, category: this.category, value: this.value, percentage: this.percentage, stackValue: this.stackValue, runningTotal: this.runningTotal, total: this.total, series: this.series })) : e = this.formatValue(n.format), this.label = new Ei(e, ue({ vertical: i.vertical }, n)), this.append(this.label)) }, formatValue: function (e) { return this.owner.formatPointValue(this, e) }, reflow: function (e) { var t, i; if (this.render(), t = this.label, this.box = e, t && (t.options.aboveAxis = this.aboveAxis, t.reflow(e)), this.note && this.note.reflow(e), this.errorBars) for (i = 0; i < this.errorBars.length; i++)this.errorBars[i].reflow(e) }, createVisual: function () { var e, t = this, i = this.box, n = this.options, o = n.visual; !1 !== this.visible && (ie.fn.createVisual.call(this), o ? (e = this.rectVisual = o({ category: this.category, dataItem: this.dataItem, value: this.value, sender: this.getSender(), series: this.series, percentage: this.percentage, stackValue: this.stackValue, runningTotal: this.runningTotal, total: this.total, rect: i.toRect(), createVisual: function () { var e = new He; return t.createRect(e), e }, options: n })) && this.visual.append(e) : i.width() > 0 && i.height() > 0 && this.createRect(this.visual)) }, createRect: function (e) { var t, i, n, o, r = this.options, a = r.border, l = J(a.opacity) ? a.opacity : r.opacity, c = this.box.toRect(); c.size.width = Math.round(c.size.width), t = this.rectVisual = Pe.fromRect(c, { fill: { color: this.color, opacity: r.opacity }, stroke: { color: this.getBorderColor(), width: a.width, opacity: l, dashType: a.dashType } }), i = this.box.width(), n = this.box.height(), (r.vertical ? i : n) > 6 && (re(t), (i < 1 || n < 1) && (t.options.stroke.lineJoin = "round")), e.append(t), s(r) && (o = this.createGradientOverlay(t, { baseColor: this.color }, ue({ end: r.vertical ? void 0 : [0, 1] }, r.overlay)), e.append(o)) }, createHighlight: function (e) { var t = Pe.fromRect(this.box.toRect(), e); return re(t) }, highlightVisual: function () { return this.rectVisual }, highlightVisualArgs: function () { return { options: this.options, rect: this.box.toRect(), visual: this.rectVisual } }, getBorderColor: function () { var e = this.color, t = this.options.border, i = t._brightness || .8, n = t.color; return J(n) || (n = new Ne(e).brightness(i).toHex()), n }, tooltipAnchor: function () { var e, t, i, n, o = this, r = o.options, s = o.box, a = o.aboveAxis, l = this.owner.pane.clipBox() || s, c = W, d = V; return r.vertical ? (e = Math.min(s.x2, l.x2) + 5, a ? t = Math.max(s.y1, l.y1) : (t = Math.min(s.y2, l.y2), d = U)) : (i = Math.max(s.x1, l.x1), n = Math.min(s.x2, l.x2), r.isStacked ? (d = U, a ? (c = Y, e = n) : e = i, t = Math.max(s.y1, l.y1) - 5) : (a ? e = n + 5 : (e = i - 5, c = Y), t = Math.max(s.y1, l.y1))), { point: new ne(e, t), align: { horizontal: c, vertical: d } } }, overlapsBox: function (e) { return this.box.overlaps(e) } }), ue(Ii.prototype, fi), ue(Ii.prototype, pi), Ii.prototype.defaults = { border: { width: 1 }, vertical: !0, overlay: { gradient: "glass" }, labels: { visible: !1, format: "{0}" }, opacity: 1, notes: { label: {} } }, Mi = ie.extend({ reflow: function (e) { var t, i, n = this.options, o = n.vertical, r = n.gap, s = n.spacing, a = this.children, l = a.length, c = o ? G : $, d = l + r + s * (l - 1), u = (o ? e.height() : e.width()) / d, h = e[c + 1] + u * (r / 2); for (t = 0; t < l; t++)(i = (a[t].box || e).clone())[c + 1] = h, i[c + 2] = h + u, a[t].reflow(i), t < l - 1 && (h += u * s), h += u } }), se(Mi, { vertical: !1, gap: 0, spacing: 0 }), Ri = ie.extend({ reflow: function (e) { var t, i, n, o = this.options.vertical ? $ : G, r = this.children, s = r.length, a = this.box = new oe; for (t = 0; t < s; t++)!1 !== (i = r[t]).visible && ((n = i.box.clone()).snapTo(e, o), 0 === t && (a = this.box = n.clone()), i.reflow(n), a.wrap(n)) } }), se(Ri, { vertical: !0 }), Fi = hi.extend({ render: function () { hi.fn.render.call(this), this.updateStackRange() }, pointType: function () { return Ii }, clusterType: function () { return Mi }, stackType: function () { return Ri }, stackLimits: function (e, t) { var i = hi.fn.stackLimits.call(this, e, t); return i }, createPoint: function (e, t) { var i, n, o, r, s, a = t.categoryIx, l = t.category, c = t.series, d = t.seriesIx, u = this.options, h = this.children, f = u.isStacked, p = this.pointValue(e), m = this.pointOptions(c, d), g = m.labels; return f && g.position === si && (g.position = oi), m.isStacked = f, i = e.fields.color || c.color, p < 0 && m.negativeColor && (i = m.negativeColor), m = this.evalPointOptions(m, p, l, a, c, d), le(c.color) && (i = m.color), n = this.pointType(), (o = new n(p, m)).color = i, (r = h[a]) || (s = this.clusterType(), r = new s({ vertical: u.invertAxes, gap: u.gap, spacing: u.spacing }), this.append(r)), f ? this.getStackWrap(c, r).append(o) : r.append(o), o }, getStackWrap: function (e, t) { var i, n, o, r = e.stack, s = r && r.group || r, a = t.children; if (typeof s === B.STRING) { for (n = 0; n < a.length; n++)if (a[n]._stackGroup === s) { i = a[n]; break } } else i = a[0]; return i || (o = this.stackType(), (i = new o({ vertical: !this.options.invertAxes }))._stackGroup = s, t.append(i)), i }, categorySlot: function (e, t, i) { var n, o, r = this.options, s = e.getSlot(t), a = i.startValue(); return r.isStacked && (n = i.getSlot(a, a, !0), o = r.invertAxes ? $ : G, s[o + 1] = s[o + 2] = n[o + 1]), s }, reflowCategories: function (e) { var t, i = this.children, n = i.length; for (t = 0; t < n; t++)i[t].reflow(e[t]) }, createAnimation: function () { this._setAnimationOptions(), hi.fn.createAnimation.call(this), r(this.options.series) && this._setChildrenAnimation() }, _setChildrenAnimation: function () { var e, t, i, n = this.points; for (e = 0; e < n.length; e++)t = n[e], (i = t.visual) && J(i.options.zIndex) && (t.options.animation = this.options.animation, t.createAnimation()) }, _setAnimationOptions: function () { var e, t, i = this.options, n = i.animation || {}; i.isStacked ? (t = this.seriesValueAxis(i.series[0]), e = t.getSlot(t.startValue())) : e = this.categoryAxis.getSlot(0), n.origin = new Ve(e.x1, e.y1), n.vertical = !i.invertAxes } }), se(Fi, { animation: { type: ut } }), zi = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.value = e }, reflow: function (e) { var t, i, n = this, o = n.options, r = n.value, s = n.owner, a = s.seriesValueAxis(o), l = a.getSlot(r.open, r.close), c = a.getSlot(r.low, r.high); l.x1 = c.x1 = e.x1, l.x2 = c.x2 = e.x2, this.realBody = l, t = c.center().x, (i = []).push([[t, c.y1], [t, l.y1]]), i.push([[t, l.y2], [t, c.y2]]), this.lines = i, this.box = c.clone().wrap(l), this._rendered || (this._rendered = !0, this.createNote()), this.reflowNote() }, reflowNote: function () { this.note && this.note.reflow(this.box) }, createVisual: function () { ie.fn.createVisual.call(this), this._mainVisual = this.mainVisual(this.options), this.visual.append(this._mainVisual), this.createOverlay() }, mainVisual: function (e) { var t = new He; return this.createBody(t, e), this.createLines(t, e), t }, createBody: function (e, t) { var i = Pe.fromRect(this.realBody.toRect(), { fill: { color: this.color, opacity: t.opacity }, stroke: null }); t.border.width > 0 && i.options.set("stroke", { color: this.getBorderColor(), width: t.border.width, dashType: t.border.dashType, opacity: ce(t.border.opacity, t.opacity) }), re(i), e.append(i), s(t) && e.append(this.createGradientOverlay(i, { baseColor: this.color }, ue({ end: t.vertical ? void 0 : [0, 1] }, t.overlay))) }, createLines: function (e, t) { this.drawLines(e, t, this.lines, t.line) }, drawLines: function (e, t, i, n) { var o, r, s; if (i) for (o = { stroke: { color: n.color || this.color, opacity: ce(n.opacity, t.opacity), width: n.width, dashType: n.dashType, lineCap: "butt" } }, r = 0; r < i.length; r++)s = Pe.fromPoints(i[r], o), re(s), e.append(s) }, getBorderColor: function () { var e = this.options.border, t = e.color; return J(t) || (t = new Ne(this.color).brightness(e._brightness).toHex()), t }, createOverlay: function () { var e = Pe.fromRect(this.box.toRect(), { fill: { color: q, opacity: 0 }, stroke: null }); this.visual.append(e) }, createHighlight: function () { var e, t = this.options.highlight, i = this.color; return this.color = t.color || this.color, e = this.mainVisual(ue({}, this.options, { line: { color: this.getBorderColor() } }, t)), this.color = i, e }, highlightVisual: function () { return this._mainVisual }, highlightVisualArgs: function () { return { options: this.options, rect: this.box.toRect(), visual: this._mainVisual } }, tooltipAnchor: function () { var e = this.box, t = this.owner.pane.clipBox() || e; return { point: new ne(e.x2 + 5, Math.max(e.y1, t.y1) + 5), align: { horizontal: W, vertical: V } } }, formatValue: function (e) { return this.owner.formatPointValue(this, e) }, overlapsBox: function (e) { return this.box.overlaps(e) } }), se(zi, { vertical: !0, border: { _brightness: .8 }, line: { width: 2 }, overlay: { gradient: "glass" }, tooltip: { format: "<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>" }, highlight: { opacity: 1, border: { width: 1, opacity: 1 }, line: { width: 1, opacity: 1 } }, notes: { visible: !0, label: {} } }), ue(zi.prototype, fi), ue(zi.prototype, pi), Pi = hi.extend({ reflowCategories: function (e) { var t, i = this.children, n = i.length; for (t = 0; t < n; t++)i[t].reflow(e[t]) }, addValue: function (e, t) { var i, n, o = t.categoryIx, r = t.category, s = t.series, l = t.seriesIx, c = this.children, d = this.options, u = e.valueFields, h = this.splitValue(u), f = a(h), p = s.data[o], m = this.categoryPoints[o]; m || (this.categoryPoints[o] = m = []), f && (i = this.createPoint(e, t)), (n = c[o]) || (n = new Mi({ vertical: d.invertAxes, gap: d.gap, spacing: d.spacing }), this.append(n)), i && (this.updateRange(u, t), n.append(i), i.categoryIx = o, i.category = r, i.series = s, i.seriesIx = l, i.owner = this, i.dataItem = p, i.noteText = e.fields.noteText), this.points.push(i), m.push(i) }, pointType: function () { return zi }, createPoint: function (e, t) { var i, n = t.categoryIx, o = t.category, r = t.series, s = t.seriesIx, a = this.pointType(), l = e.valueFields, c = ue({}, r), d = e.fields.color || r.color; return c = this.evalPointOptions(c, l, o, n, r, s), r.type === mt && l.open > l.close && (d = e.fields.downColor || r.downColor || r.color), le(r.color) && (d = c.color), c.vertical = !this.options.invertAxes, (i = new a(l, c)).color = d, i }, splitValue: function (e) { return [e.low, e.open, e.close, e.high] }, updateRange: function (e, t) { var i = t.series.axis, n = this.splitValue(e), o = this.valueAxisRanges[i]; o = this.valueAxisRanges[i] = o || { min: L, max: H }, o = this.valueAxisRanges[i] = { min: Math.min.apply(Math, n.concat([o.min])), max: Math.max.apply(Math, n.concat([o.max])) } }, formatPointValue: function (e, t) { var i = e.value; return this.chartService.format.auto(t, i.open, i.high, i.low, i.close, e.category) }, animationPoints: function () { return this.points } }), ue(Pi.prototype, yi), Bi = zi.extend({ init: function (e, t) { zi.fn.init.call(this, e, t), this.createNote() }, reflow: function (e) { var t, i, n, o, r = this, s = r.options, a = r.value, l = r.owner, c = l.seriesValueAxis(s); this.boxSlot = i = c.getSlot(a.q1, a.q3), this.realBody = i, this.reflowBoxSlot(e), this.whiskerSlot = t = c.getSlot(a.lower, a.upper), this.reflowWhiskerSlot(e), n = c.getSlot(a.median), a.mean && (o = c.getSlot(a.mean), this.meanPoints = this.calcMeanPoints(e, o)), this.whiskerPoints = this.calcWhiskerPoints(i, t), this.medianPoints = this.calcMedianPoints(e, n), this.box = t.clone().wrap(i), this.reflowNote() }, reflowBoxSlot: function (e) { this.boxSlot.x1 = e.x1, this.boxSlot.x2 = e.x2 }, reflowWhiskerSlot: function (e) { this.whiskerSlot.x1 = e.x1, this.whiskerSlot.x2 = e.x2 }, calcMeanPoints: function (e, t) { return [[[e.x1, t.y1], [e.x2, t.y1]]] }, calcWhiskerPoints: function (e, t) { var i = t.center().x; return [[[i - 5, t.y1], [i + 5, t.y1], [i, t.y1], [i, e.y1]], [[i - 5, t.y2], [i + 5, t.y2], [i, t.y2], [i, e.y2]]] }, calcMedianPoints: function (e, t) { return [[[e.x1, t.y1], [e.x2, t.y1]]] }, renderOutliers: function (e) { var t, i, n, o, r = this.value, s = r.outliers || [], a = 3 * Math.abs(r.q3 - r.q1), l = [], c = e.markers || {}; for (t = 0; t < s.length; t++)i = s[t], c = i < r.q3 + a && i > r.q1 - a ? e.outliers : e.extremes, n = ue({}, c.border), J(n.color) || (n.color = J(this.color) ? this.color : new Ne(c.background).brightness(.8).toHex()), (o = new ge({ type: c.type, width: c.size, height: c.size, rotation: c.rotation, background: c.background, border: n, opacity: c.opacity })).value = i, l.push(o); return this.reflowOutliers(l), l }, reflowOutliers: function (e) { var t, i, n, o = this, r = this.owner.seriesValueAxis(this.options), s = this.box.center(); for (t = 0; t < e.length; t++)i = e[t].value, n = r.getSlot(i), o.options.vertical ? n.move(s.x) : n.move(void 0, s.y), o.box = o.box.wrap(n), e[t].reflow(n) }, mainVisual: function (e) { var t, i, n = zi.fn.mainVisual.call(this, e), o = this.renderOutliers(e); for (t = 0; t < o.length; t++)(i = o[t].getElement()) && n.append(i); return n }, createLines: function (e, t) { this.drawLines(e, t, this.whiskerPoints, t.whiskers), this.drawLines(e, t, this.medianPoints, t.median), this.drawLines(e, t, this.meanPoints, t.mean) }, getBorderColor: function () { return this.color ? this.color : zi.fn.getBorderColor.call(this) } }), se(Bi, { border: { _brightness: .8 }, line: { width: 2 }, median: { color: "#f6f6f6" }, mean: { width: 2, dashType: "dash", color: "#f6f6f6" }, overlay: { gradient: "glass" }, tooltip: { format: "<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>" }, highlight: { opacity: 1, border: { width: 1, opacity: 1 }, line: { width: 1, opacity: 1 } }, notes: { visible: !0, label: {} }, outliers: { visible: !0, size: 8, type: B.CROSS, background: q, border: { width: 2, opacity: 1 }, opacity: 0 }, extremes: { visible: !0, size: 8, type: j, background: q, border: { width: 2, opacity: 1 }, opacity: 0 } }), ue(Bi.prototype, fi), Li = Bi.extend({ reflowBoxSlot: function (e) { this.boxSlot.y1 = e.y1, this.boxSlot.y2 = e.y2 }, reflowWhiskerSlot: function (e) { this.whiskerSlot.y1 = e.y1, this.whiskerSlot.y2 = e.y2 }, calcMeanPoints: function (e, t) { return [[[t.x1, e.y1], [t.x1, e.y2]]] }, calcWhiskerPoints: function (e, t) { var i = t.center().y; return [[[t.x1, i - 5], [t.x1, i + 5], [t.x1, i], [e.x1, i]], [[t.x2, i - 5], [t.x2, i + 5], [t.x2, i], [e.x2, i]]] }, calcMedianPoints: function (e, t) { return [[[t.x1, e.y1], [t.x1, e.y2]]] } }), Hi = Pi.extend({ addValue: function (e, t) { var i, n, o = t.categoryIx, r = t.category, s = t.series, l = t.seriesIx, c = this.children, d = this.options, u = e.valueFields, h = this.splitValue(u), f = a(h), p = s.data[o], m = this.categoryPoints[o]; m || (this.categoryPoints[o] = m = []), f && (i = this.createPoint(e, t)), (n = c[o]) || (n = new Mi({ vertical: d.invertAxes, gap: d.gap, spacing: d.spacing }), this.append(n)), i && (this.updateRange(u, t), n.append(i), i.categoryIx = o, i.category = r, i.series = s, i.seriesIx = l, i.owner = this, i.dataItem = p), this.points.push(i), m.push(i) }, pointType: function () { return this.options.invertAxes ? Li : Bi }, splitValue: function (e) { return [e.lower, e.q1, e.median, e.q3, e.upper] }, updateRange: function (e, t) { var i = t.series.axis, n = this.valueAxisRanges[i], o = this.splitValue(e).concat(this.filterOutliers(e.outliers)); J(e.mean) && (o = o.concat(e.mean)), n = this.valueAxisRanges[i] = n || { min: L, max: H }, n = this.valueAxisRanges[i] = { min: Math.min.apply(Math, o.concat([n.min])), max: Math.max.apply(Math, o.concat([n.max])) } }, formatPointValue: function (e, t) { var i = e.value; return this.chartService.format.auto(t, i.lower, i.q1, i.median, i.q3, i.upper, i.mean, e.category) }, filterOutliers: function (e) { var t, i, n = (e || []).length, o = []; for (t = 0; t < n; t++)i = e[t], J(i) && null !== i && o.push(i); return o } }), Ni = ci.extend({ getAxis: function () { var e = this.chart.seriesAxes(this.series), t = this.isVertical ? e.y : e.x; return t } }), Oi = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.plotArea = e, this.chartService = e.chartService, this._initFields(), this.render() }, _initFields: function () { this.xAxisRanges = {}, this.yAxisRanges = {}, this.points = [], this.seriesPoints = [], this.seriesOptions = [], this._evalSeries = [] }, render: function () { this.traverseDataPoints(this.addValue.bind(this)) }, addErrorBar: function (e, t, i) { var n, o = e.value[t], r = t + "Value", s = t + "ErrorLow", a = t + "ErrorHigh", l = i.seriesIx, c = i.series, d = e.options.errorBars, u = i[s], h = i[a]; P(o) && (P(u) && P(h) && (n = { low: u, high: h }), d && J(d[r]) && (this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] }, this.seriesErrorRanges[t][l] = this.seriesErrorRanges[t][l] || new Ke(d[r], c, t), n = this.seriesErrorRanges[t][l].getErrorRange(o, d[r])), n && this.addPointErrorBar(n, e, t)) }, addPointErrorBar: function (e, t, i) { var n, o = e.low, r = e.high, s = t.series, a = t.options.errorBars, l = i === G, c = {}; t[i + "Low"] = o, t[i + "High"] = r, t.errorBars = t.errorBars || [], n = new Ni(o, r, l, this, s, a), t.errorBars.push(n), t.append(n), c[i] = o, this.updateRange(c, s), c[i] = r, this.updateRange(c, s) }, addValue: function (t, i) { var n, o = t.x, r = t.y, s = i.seriesIx, a = this.options.series[s], c = this.seriesMissingValues(a), d = this.seriesPoints[s], u = t; l(o) && l(r) || (u = this.createMissingValue(u, c)), u && ((n = this.createPoint(u, i)) && (e.extend(n, i), this.addErrorBar(n, $, i), this.addErrorBar(n, G, i)), this.updateRange(u, i.series)), this.points.push(n), d.push(n) }, seriesMissingValues: function (e) { return e.missingValues }, createMissingValue: function () { }, updateRange: function (e, t) { var i = this.chartService.intl, n = t.xAxis, o = t.yAxis, r = e.x, s = e.y, a = this.xAxisRanges[n], c = this.yAxisRanges[o]; l(r) && (a = this.xAxisRanges[n] = a || { min: L, max: H }, ye(r) && (r = ke(i, r)), a.min = Math.min(a.min, r), a.max = Math.max(a.max, r)), l(s) && (c = this.yAxisRanges[o] = c || { min: L, max: H }, ye(s) && (s = ke(i, s)), c.min = Math.min(c.min, s), c.max = Math.max(c.max, s)) }, evalPointOptions: function (e, t, i) { var o, r = i.series, s = i.seriesIx, a = { defaults: r._defaults, excluded: ["data", "tooltip", "template", "visual", "toggle", "_outOfRangeMinPoint", "_outOfRangeMaxPoint"] }, l = this._evalSeries[s]; return J(l) || (this._evalSeries[s] = l = n(e, {}, a, !0)), o = e, l && n(o = ue({}, e), { value: t, series: r, dataItem: i.dataItem }, a), o }, pointType: function () { return mi }, pointOptions: function (e, t) { var i, n = this.seriesOptions[t]; return n || (i = this.pointType().prototype.defaults, this.seriesOptions[t] = n = ue({}, i, { markers: { opacity: e.opacity }, tooltip: { format: this.options.tooltip.format }, labels: { format: this.options.labels.format } }, e)), n }, createPoint: function (e, t) { var i, n = t.series, o = this.pointOptions(n, t.seriesIx), r = t.color || n.color; return o = this.evalPointOptions(o, e, t), le(n.color) && (r = o.color), (i = new mi(e, o)).color = r, this.append(i), i }, seriesAxes: function (e) { var t = e.xAxis, i = e.yAxis, n = this.plotArea, o = t ? n.namedXAxes[t] : n.axisX, r = i ? n.namedYAxes[i] : n.axisY; if (!o) throw Error("Unable to locate X axis with name " + t); if (!r) throw Error("Unable to locate Y axis with name " + i); return { x: o, y: r } }, reflow: function (e) { var t = this, i = this.points, n = !this.options.clip, o = 0; this.traverseDataPoints(function (e, r) { var s, a = i[o++], l = t.seriesAxes(r.series), c = l.x.getSlot(e.x, e.x, n), d = l.y.getSlot(e.y, e.y, n); a && (c && d ? (s = t.pointSlot(c, d), a.reflow(s)) : a.visible = !1) }), this.box = e }, pointSlot: function (e, t) { return new oe(e.x1, t.y1, e.x2, t.y2) }, traverseDataPoints: function (e) { var t, i, n, o, r, s, a = this.options.series, l = this.seriesPoints; for (t = 0; t < a.length; t++)for (i = a[t], l[t] || (l[t] = []), n = 0; n < i.data.length; n++)o = this._bindPoint(i, t, n), r = o.valueFields, s = o.fields, e(r, ue({ pointIx: n, series: i, seriesIx: t, dataItem: i.data[n], owner: this }, s)) }, formatPointValue: function (e, t) { var i = e.value; return this.chartService.format.auto(t, i.x, i.y) }, animationPoints: function () { var e, t = this.points, i = []; for (e = 0; e < t.length; e++)i.push((t[e] || {}).marker); return i } }), se(Oi, { series: [], tooltip: { format: "{0}, {1}" }, labels: { format: "{0}, {1}" }, clip: !0 }), ue(Oi.prototype, yi, { _bindPoint: hi.prototype._bindPoint }), (Vi = mi.extend({ init: function (e, t) { mi.fn.init.call(this, e, t), this.category = e.category }, createHighlight: function () { var e = this.options.highlight, t = e.border, i = this.options.markers, n = this.box.center(), o = (i.size + i.border.width + t.width) / 2, r = new He, s = new ze.Circle(new Oe.Circle([n.x, n.y + o / 5 + t.width / 2], o + t.width / 2), { stroke: { color: "none" }, fill: this.createGradient({ gradient: "bubbleShadow", color: i.background, stops: [{ offset: 0, color: i.background, opacity: .3 }, { offset: 1, color: i.background, opacity: 0 }] }) }), a = new ze.Circle(new Oe.Circle([n.x, n.y], o), { stroke: { color: t.color || new Ne(i.background).brightness(.8).toHex(), width: t.width, opacity: t.opacity }, fill: { color: i.background, opacity: e.opacity } }); return r.append(s, a), r } })).prototype.defaults = ue({}, Vi.prototype.defaults, { labels: { position: O }, highlight: { opacity: 1, border: { color: "#fff", width: 2, opacity: 1 } } }), Ui = Oi.extend({ _initFields: function () { this._maxSize = H, Oi.fn._initFields.call(this) }, addValue: function (e, t) { null !== e.size && (e.size > 0 || e.size < 0 && t.series.negativeValues.visible) ? (this._maxSize = Math.max(this._maxSize, Math.abs(e.size)), Oi.fn.addValue.call(this, e, t)) : (this.points.push(null), this.seriesPoints[t.seriesIx].push(null)) }, reflow: function (e) { this.updateBubblesSize(e), Oi.fn.reflow.call(this, e) }, pointType: function () { return Vi }, createPoint: function (e, t) { var i, n, o = t.series, r = o.data.length, s = t.pointIx * (Xe / r), a = { delay: s, duration: Xe - s, type: ft }, l = t.color || o.color; return e.size < 0 && o.negativeValues.visible && (l = ce(o.negativeValues.color, l)), i = ue({ labels: { animation: { delay: s, duration: Xe - s } } }, this.pointOptions(o, t.seriesIx), { markers: { type: j, border: o.border, opacity: o.opacity, animation: a } }), i = this.evalPointOptions(i, e, t), le(o.color) && (l = i.color), i.markers.background = l, (n = new Vi(e, i)).color = l, this.append(n), n }, updateBubblesSize: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v = this.options.series, _ = Math.min(e.width(), e.height()); for (t = 0; t < v.length; t++)for (i = v[t], n = this.seriesPoints[t], o = i.minSize || Math.max(.02 * _, 10), r = i.maxSize || .2 * _, s = o / 2, a = r / 2, l = Math.PI * s * s, c = Math.PI * a * a, d = (c - l) / this._maxSize, u = 0; u < n.length; u++)(h = n[u]) && (f = Math.abs(h.value.size) * d, p = Math.sqrt((l + f) / Math.PI), m = ce(h.options.zIndex, 0), g = m + (1 - p / a), ue(h.options, { zIndex: g, markers: { size: 2 * p, zIndex: g }, labels: { zIndex: g + 1 } })) }, formatPointValue: function (e, t) { var i = e.value; return this.chartService.format.auto(t, i.x, i.y, i.size, e.category) }, createAnimation: function () { }, createVisual: function () { } }), se(Ui, { tooltip: { format: "{3}" }, labels: { format: "{3}" } }), Wi = ge.extend({}), ue(Wi.prototype, fi), (qi = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.aboveAxis = this.options.aboveAxis, this.color = t.color || q, this.value = e }, render: function () { var e = this.options; this._rendered || (this._rendered = !0, J(this.value.target) && (this.target = new Wi({ type: e.target.shape, background: e.target.color || this.color, opacity: e.opacity, zIndex: e.zIndex, border: e.target.border, vAlign: V, align: Y }), this.target.value = this.value, this.target.dataItem = this.dataItem, this.target.series = this.series, this.append(this.target)), this.createNote()) }, reflow: function (e) { var t, i, n, o, r, s, a, l, c, d, u; this.render(), i = (t = this).options, n = t.target, o = t.owner, r = i.invertAxes, s = o.seriesValueAxis(this.options), a = o.categorySlot(o.categoryAxis, i.categoryIx, s), l = s.getSlot(this.value.target), c = r ? l : a, d = r ? a : l, n && (u = new oe(c.x1, d.y1, c.x2, d.y2), n.options.height = r ? u.height() : i.target.line.width, n.options.width = r ? i.target.line.width : u.width(), n.reflow(u)), this.note && this.note.reflow(e), this.box = e }, createVisual: function () { var e, t; ie.fn.createVisual.call(this), e = this.options, t = Pe.fromRect(this.box.toRect(), { fill: { color: this.color, opacity: e.opacity }, stroke: null }), e.border.width > 0 && t.options.set("stroke", { color: e.border.color || this.color, width: e.border.width, dashType: e.border.dashType, opacity: ce(e.border.opacity, e.opacity) }), this.bodyVisual = t, re(t), this.visual.append(t) }, createAnimation: function () { this.bodyVisual && (this.animation = Be.create(this.bodyVisual, this.options.animation)) }, createHighlight: function (e) { return Pe.fromRect(this.box.toRect(), e) }, highlightVisual: function () { return this.bodyVisual }, highlightVisualArgs: function () { return { rect: this.box.toRect(), visual: this.bodyVisual, options: this.options } }, formatValue: function (e) { return this.owner.formatPointValue(this, e) } })).prototype.tooltipAnchor = Ii.prototype.tooltipAnchor, se(qi, { border: { width: 1 }, vertical: !1, opacity: 1, target: { shape: "", border: { width: 0, color: "green" }, line: { width: 2 } }, tooltip: { format: "Current: {0}<br />Target: {1}" } }), ue(qi.prototype, fi), ue(qi.prototype, pi), (ji = hi.extend({ init: function (e, t) { (function (e) { var t, i, n, o = e.series; for (t = 0; t < o.length; t++)i = o[t], !(n = i.data) || te(n[0]) || de(n[0]) || (i.data = [n]) })(t), hi.fn.init.call(this, e, t) }, reflowCategories: function (e) { var t, i = this.children, n = i.length; for (t = 0; t < n; t++)i[t].reflow(e[t]) }, plotRange: function (e) { var t = e.series, i = this.seriesValueAxis(t), n = this.categoryAxisCrossingValue(i); return [n, e.value.current || n] }, createPoint: function (e, t) { var i, n, o = t.categoryIx, r = t.category, s = t.series, a = t.seriesIx, l = this.options, c = this.children, d = e.valueFields, u = ue({ vertical: !l.invertAxes, overlay: s.overlay, categoryIx: o, invertAxes: l.invertAxes }, s), h = e.fields.color || s.color; return u = this.evalPointOptions(u, d, r, o, s, a), le(s.color) && (h = u.color), (i = new qi(d, u)).color = h, (n = c[o]) || (n = new Mi({ vertical: l.invertAxes, gap: l.gap, spacing: l.spacing }), this.append(n)), n.append(i), i }, updateRange: function (e, t) { var i = e.current, n = e.target, o = t.series.axis, r = this.valueAxisRanges[o]; J(i) && !isNaN(i) && J(n && !isNaN(n)) && ((r = this.valueAxisRanges[o] = r || { min: L, max: H }).min = Math.min(r.min, i, n), r.max = Math.max(r.max, i, n)) }, formatPointValue: function (e, t) { return this.chartService.format.auto(t, e.value.current, e.value.target) }, pointValue: function (e) { return e.valueFields.current }, aboveAxis: function (e) { var t = e.value.current; return t > 0 }, createAnimation: function () { var e, t, i = this.points; for (this._setAnimationOptions(), e = 0; e < i.length; e++)(t = i[e]).options.animation = this.options.animation, t.createAnimation() } })).prototype._setAnimationOptions = Fi.prototype._setAnimationOptions, se(ji, { animation: { type: ut } }), Gi = z.extend({ init: function (e, t) { this.chartService = e, this.options = ue({}, this.options, t) }, getStyle: function (e, t) { var i, n, o = e.background, r = e.border.color; return t && (i = t.color || t.options.color, o = ce(o, i), r = ce(r, i)), n = ve(e.padding || {}, "auto"), { backgroundColor: o, borderColor: r, font: e.font, color: e.color, opacity: e.opacity, borderWidth: xe(e.border.width), paddingTop: xe(n.top), paddingBottom: xe(n.bottom), paddingLeft: xe(n.left), paddingRight: xe(n.right) } }, show: function (e, t, i) { e.format = t.format; var n = this.getStyle(t, i); e.style = n, !J(t.color) && new Ne(n.backgroundColor).percBrightness() > 180 && (e.className = "k-chart-tooltip-inverse"), this.chartService.notify(ei, e) }, hide: function () { this.chartService && this.chartService.notify(ti) }, destroy: function () { delete this.chartService } }), se(Gi, { border: { width: 1 }, opacity: 1 }), $i = Gi.extend({ init: function (e, t, i) { Gi.fn.init.call(this, e, i), this.crosshair = t, this.formatService = e.format, this.initAxisName() }, initAxisName: function () { var e, t = this.crosshair.axis, i = t.plotArea; e = i.categoryAxis ? t.getCategory ? "categoryAxis" : "valueAxis" : t.options.vertical ? "yAxis" : "xAxis", this.axisName = e }, showAt: function (e) { var t = this.crosshair.axis, i = this.options, n = t[i.stickyMode ? "getCategory" : "getValue"](e), o = n; i.format ? o = this.formatService.auto(i.format, n) : t.options.type === Q && (o = this.formatService.auto(t.options.labels.dateFormats[t.options.baseUnit], n)), this.show({ point: e, anchor: this.getAnchor(), crosshair: this.crosshair, value: o, axisName: this.axisName, axisIndex: this.crosshair.axis.axisIndex }, this.options) }, hide: function () { this.chartService.notify(ti, { crosshair: this.crosshair, axisName: this.axisName, axisIndex: this.crosshair.axis.axisIndex }) }, getAnchor: function () { var e, t, i, n = this.crosshair, o = this.options, r = o.position, s = o.padding, a = !n.axis.options.vertical, l = n.line.bbox(); return a ? (e = O, r === U ? (t = V, i = l.bottomLeft().translate(0, s)) : (t = U, i = l.topLeft().translate(0, -s))) : (t = O, r === W ? (e = Y, i = l.topLeft().translate(-s, 0)) : (e = W, i = l.topRight().translate(s, 0))), { point: i, align: { horizontal: e, vertical: t } } } }), se($i, { padding: 10 }), Yi = ie.extend({ init: function (e, t, i) { ie.fn.init.call(this, i), this.axis = t, this.stickyMode = t instanceof Ce; var n = this.options.tooltip; n.visible && (this.tooltip = new $i(e, this, ue({}, n, { stickyMode: this.stickyMode }))) }, showAt: function (e) { this.point = e, this.moveLine(), this.line.visible(!0), this.tooltip && this.tooltip.showAt(e) }, hide: function () { this.line.visible(!1), this.tooltip && this.tooltip.hide() }, moveLine: function () { var e, t, i = this.axis, n = this.point, o = i.options.vertical, r = this.getBox(), s = o ? G : $, a = new Ve(r.x1, r.y1); e = o ? new Ve(r.x2, r.y1) : new Ve(r.x1, r.y2), n && (this.stickyMode ? (t = i.getSlot(i.pointCategoryIndex(n)), a[s] = e[s] = t.center()[s]) : a[s] = e[s] = n[s]), this.box = r, this.line.moveTo(a).lineTo(e) }, getBox: function () { var e, t, i, n = this.axis, o = n.pane.axes, r = o.length, s = n.options.vertical, a = n.lineBox().clone(), l = s ? $ : G; for (t = 0; t < r; t++)(i = o[t]).options.vertical !== s && (e ? e.wrap(i.lineBox()) : e = i.lineBox().clone()); return a[l + 1] = e[l + 1], a[l + 2] = e[l + 2], a }, createVisual: function () { ie.fn.createVisual.call(this); var e = this.options; this.line = new Pe({ stroke: { color: e.color, width: e.width, opacity: e.opacity, dashType: e.dashType }, visible: !1 }), this.moveLine(), this.visual.append(this.line) }, destroy: function () { this.tooltip && this.tooltip.destroy(), ie.fn.destroy.call(this) } }), se(Yi, { color: K, width: 2, zIndex: -1, tooltip: { visible: !1 } }), (Ki = ie.extend({ init: function (e, t) { ie.fn.init.call(this, e), this.pane = t }, shouldClip: function () { var e, t = this.children, i = t.length; for (e = 0; e < i; e++)if (!0 === t[e].options.clip) return !0; return !1 }, _clipBox: function () { return this.pane.chartsBox() }, createVisual: function () { var e, t, i; this.visual = new He({ zIndex: 0 }), this.shouldClip() && (e = this.clipBox = this._clipBox(), t = e.toRect(), i = Pe.fromRect(t), this.visual.clip(i), this.unclipLabels()) }, stackRoot: function () { return this }, unclipLabels: function () { var e, t, i, n, o, r, s, a = this.children, l = this.clipBox; for (e = 0; e < a.length; e++)for (t = a[e].points || {}, i = t.length, n = 0; n < i; n++)(o = t[n]) && o.overlapsBox && o.overlapsBox(l) && (r = o.label, s = o.note, r && r.options.visible && (r.alignToClipBox && r.alignToClipBox(l), r.options.noclip = !0), s && s.options.visible && (s.options.noclip = !0)) }, destroy: function () { ie.fn.destroy.call(this), delete this.parent } })).prototype.isStackRoot = !0, Qi = Se.extend({ init: function (e) { Se.fn.init.call(this, e), this.id = "pane" + Xi++, this.createTitle(), this.content = new ie, this.chartContainer = new Ki({}, this), this.append(this.content), this.axes = [], this.charts = [] }, createTitle: function () { var e = this.options.title; de(e) && (e = ue({}, e, { align: e.position, position: V })), this.title = F.Title.buildTitle(e, this, Qi.prototype.options.title) }, appendAxis: function (e) { this.content.append(e), this.axes.push(e), e.pane = this }, appendChart: function (e) { this.chartContainer.parent !== this.content && this.content.append(this.chartContainer), this.charts.push(e), this.chartContainer.append(e), e.pane = this }, empty: function () { var e, t, i = this.parent; if (i) { for (e = 0; e < this.axes.length; e++)i.removeAxis(this.axes[e]); for (t = 0; t < this.charts.length; t++)i.removeChart(this.charts[t]) } this.axes = [], this.charts = [], this.content.destroy(), this.content.children = [], this.chartContainer.children = [] }, reflow: function (e) { var t; be(this.children) === this.content && (t = this.children.pop()), Se.fn.reflow.call(this, e), t && this.children.push(t), this.title && (this.contentBox.y1 += this.title.box.height()) }, visualStyle: function () { var e = Se.fn.visualStyle.call(this); return e.zIndex = -10, e }, renderComplete: function () { this.options.visible && this.createGridLines() }, stackRoot: function () { return this }, clipRoot: function () { return this }, createGridLines: function () { var e, t, i, n, o, r, s = this.axes, a = s.concat(this.parent.axes), l = [], c = []; for (e = 0; e < s.length; e++)for (t = s[e], i = t.options.vertical, n = i ? l : c, o = 0; o < a.length; o++)0 === n.length && (r = a[o], i !== r.options.vertical && we(n, t.createGridLines(r))) }, refresh: function () { this.visual.clear(), this.content.parent = null, this.content.createGradient = this.createGradient.bind(this), this.content.renderVisual(), this.content.parent = this, this.title && this.visual.append(this.title.visual), this.visual.append(this.content.visual), this.renderComplete() }, chartsBox: function () { var e, t, i, n, o, r, s, a, l, c = this.axes, d = c.length, u = new oe; for (e = 0; e < d; e++)t = c[e], i = t.options.vertical ? G : $, n = t.lineBox(), u[i + 1] = n[i + 1], u[i + 2] = n[i + 2]; if (0 === u.x2) for (o = this.parent.axes, r = o.length, s = 0; s < r; s++)(a = o[s]).options.vertical || (l = a.lineBox(), u.x1 = l.x1, u.x2 = l.x2); return u }, clipBox: function () { return this.chartContainer.clipBox } }), Xi = 1, Qi.prototype.isStackRoot = !0, se(Qi, { zIndex: -1, shrinkToFit: !0, title: { align: W }, visible: !0 }), Zi = ie.extend({ init: function (e, t, i) { ie.fn.init.call(this, t), this.initFields(e, t), this.series = e, this.initSeries(), this.charts = [], this.options.legend.items = [], this.axes = [], this.crosshairs = [], this.chartService = i, this.createPanes(), this.render(), this.createCrosshairs() }, initFields: function () { }, initSeries: function () { var e, t = this.series; for (e = 0; e < t.length; e++)t[e].index = e }, createPanes: function () { function e(e, t) { ye(e.title) && (e.title = { text: e.title }), e.title = ue({}, t.title, e.title) } var t, i, n, o = { title: { color: (this.options.title || {}).color } }, r = [], s = this.options.panes || [], a = Math.max(s.length, 1); for (t = 0; t < a; t++)e(i = s[t] || {}, o), (n = new Qi(i)).paneIndex = t, r.push(n), this.append(n); this.panes = r }, createCrosshairs: function (e) { var t, i, n, o, r; for (void 0 === e && (e = this.panes), t = 0; t < e.length; t++)for (i = e[t], n = 0; n < i.axes.length; n++)(o = i.axes[n]).options.crosshair && o.options.crosshair.visible && (r = new Yi(this.chartService, o, o.options.crosshair), this.crosshairs.push(r), i.content.append(r)) }, removeCrosshairs: function (e) { var t, i, n = this.crosshairs, o = e.axes; for (t = n.length - 1; t >= 0; t--)for (i = 0; i < o.length; i++)if (n[t].axis === o[i]) { n.splice(t, 1); break } }, hideCrosshairs: function () { var e, t = this.crosshairs; for (e = 0; e < t.length; e++)t[e].hide() }, findPane: function (e) { var t, i, n = this.panes; for (i = 0; i < n.length; i++)if (n[i].options.name === e) { t = n[i]; break } return t || n[0] }, findPointPane: function (e) { var t, i, n = this.panes; for (i = 0; i < n.length; i++)if (n[i].box.containsPoint(e)) { t = n[i]; break } return t }, appendAxis: function (e) { var t = this.findPane(e.options.pane); t.appendAxis(e), this.axes.push(e), e.plotArea = this }, removeAxis: function (e) { var t, i, n = []; for (t = 0; t < this.axes.length; t++)i = this.axes[t], e !== i ? n.push(i) : i.destroy(); this.axes = n }, appendChart: function (e, t) { this.charts.push(e), t ? t.appendChart(e) : this.append(e) }, removeChart: function (e) { var t, i, n = []; for (t = 0; t < this.charts.length; t++)(i = this.charts[t]) !== e ? n.push(i) : i.destroy(); this.charts = n }, addToLegend: function (e) { var t, i, n, o, r, s, a, l, c, d = e.length, u = this.options.legend, h = u.labels || {}, f = u.inactiveItems || {}, p = f.labels || {}, m = []; for (t = 0; t < d; t++)i = e[t], n = !1 !== i.visible, !1 !== i.visibleInLegend && (o = i.name || "", (r = n ? h.template : p.template || h.template) && (o = pe.compile(r)({ text: o, series: i })), s = i._defaults, a = i.color, le(a) && s && (a = s.color), l = void 0, c = void 0, n ? (l = {}, c = a) : (l = { color: p.color, font: p.font }, c = f.markers.color), o && m.push({ text: o, labels: l, markerColor: c, series: i, active: n })); we(u.items, m) }, groupAxes: function (e) { var t, i, n, o, r = [], s = []; for (t = 0; t < e.length; t++)for (i = e[t].axes, n = 0; n < i.length; n++)(o = i[n]).options.vertical ? s.push(o) : r.push(o); return { x: r, y: s, any: r.concat(s) } }, groupSeriesByPane: function () { var e, t, i, n = this.series, o = {}; for (e = 0; e < n.length; e++)t = n[e], i = this.seriesPaneName(t), o[i] ? o[i].push(t) : o[i] = [t]; return o }, filterVisibleSeries: function (e) { var t, i, n = []; for (t = 0; t < e.length; t++)!1 !== (i = e[t]).visible && n.push(i); return n }, reflow: function (e) { var t = this.options.plotArea, i = this.panes, n = ve(t.margin); this.box = e.clone().unpad(n), this.reflowPanes(), this.reflowAxes(i), this.reflowCharts(i) }, redraw: function (e) { var t, i, n = [].concat(e); for (this.initSeries(), t = 0; t < n.length; t++)this.removeCrosshairs(n[t]), n[t].empty(); for (this.render(n), this.reflowAxes(this.panes), this.reflowCharts(n), this.createCrosshairs(n), i = 0; i < n.length; i++)n[i].refresh() }, axisCrossingValues: function (e, t) { var i, n = e.options, o = [].concat(n.axisCrossingValues || n.axisCrossingValue), r = t.length - o.length, s = o[0] || 0; for (i = 0; i < r; i++)o.push(s); return o }, alignAxisTo: function (e, t, i, n) { var o = e.getSlot(i, i, !0), r = e.options.reverse ? 2 : 1, s = t.getSlot(n, n, !0), a = t.options.reverse ? 2 : 1, l = e.box.translate(s[$ + a] - o[$ + r], s[G + a] - o[G + r]); e.pane !== t.pane && l.translate(0, e.pane.box.y1 - t.pane.box.y1), e.reflow(l) }, alignAxes: function (e, t) { var i, n, o, r, s, a, l, c, u, h, f, p, m = this, g = e[0], v = t[0], _ = this.axisCrossingValues(g, t), b = this.axisCrossingValues(v, e), w = {}, y = {}, k = {}, x = {}; for (i = 0; i < t.length; i++)n = t[i], o = n.pane, r = o.id, s = d(e, o) || g, a = _, s !== g && (a = m.axisCrossingValues(s, t)), m.alignAxisTo(n, s, b[i], a[i]), n.options._overlap || (Te(n.lineBox().x1) === Te(s.lineBox().x1) && (w[r] && n.reflow(n.box.alignTo(w[r].box, W).translate(-n.options.margin, 0)), w[r] = n), Te(n.lineBox().x2) === Te(s.lineBox().x2) && (n._mirrored || (n.options.labels.mirror = !n.options.labels.mirror, n._mirrored = !0), m.alignAxisTo(n, s, b[i], a[i]), y[r] && n.reflow(n.box.alignTo(y[r].box, Y).translate(n.options.margin, 0)), y[r] = n), 0 !== i && v.pane === n.pane && (n.alignTo(v), n.reflow(n.box))); for (l = 0; l < e.length; l++)c = e[l], u = c.pane, h = u.id, f = d(t, u) || v, p = b, f !== v && (p = m.axisCrossingValues(f, e)), m.alignAxisTo(c, f, _[l], p[l]), c.options._overlap || (Te(c.lineBox().y1) === Te(f.lineBox().y1) && (c._mirrored || (c.options.labels.mirror = !c.options.labels.mirror, c._mirrored = !0), m.alignAxisTo(c, f, _[l], p[l]), k[h] && c.reflow(c.box.alignTo(k[h].box, V).translate(0, -c.options.margin)), k[h] = c), Te(c.lineBox().y2, B.COORD_PRECISION) === Te(f.lineBox().y2, B.COORD_PRECISION) && (x[h] && c.reflow(c.box.alignTo(x[h].box, U).translate(0, c.options.margin)), x[h] = c), 0 !== l && (c.alignTo(g), c.reflow(c.box))) }, shrinkAxisWidth: function (e) { var t, i, n, o, r = this.groupAxes(e).any, s = c(r), a = 0; for (t = 0; t < e.length; t++)(i = e[t]).axes.length > 0 && (a = Math.max(a, s.width() - i.contentBox.width())); if (0 !== a) for (n = 0; n < r.length; n++)(o = r[n]).options.vertical || o.reflow(o.box.shrink(a, 0)) }, shrinkAxisHeight: function (e) { var t, i, n, o, r, s, a; for (i = 0; i < e.length; i++)if (n = e[i], o = n.axes, 0 !== (r = Math.max(0, c(o).height() - n.contentBox.height()))) { for (s = 0; s < o.length; s++)(a = o[s]).options.vertical && a.reflow(a.box.shrink(0, r)); t = !0 } return t }, fitAxes: function (e) { var t, i, n, o, r, s, a, l, d, u, h = this.groupAxes(e).any, f = 0; for (t = 0; t < e.length; t++)if (i = e[t], n = i.axes, o = i.contentBox, n.length > 0) for (r = c(n), s = Math.max(o.y1 - r.y1, o.y2 - r.y2), f = Math.max(f, o.x1 - r.x1), a = 0; a < n.length; a++)(l = n[a]).reflow(l.box.translate(0, s)); for (d = 0; d < h.length; d++)(u = h[d]).reflow(u.box.translate(f, 0)) }, reflowAxes: function (e) { var t, i = this.groupAxes(e); for (t = 0; t < e.length; t++)this.reflowPaneAxes(e[t]); i.x.length > 0 && i.y.length > 0 && (this.alignAxes(i.x, i.y), this.shrinkAxisWidth(e), this.autoRotateAxisLabels(i), this.alignAxes(i.x, i.y), this.shrinkAxisWidth(e) && this.alignAxes(i.x, i.y), this.shrinkAxisHeight(e), this.alignAxes(i.x, i.y), this.shrinkAxisHeight(e) && this.alignAxes(i.x, i.y), this.fitAxes(e)) }, autoRotateAxisLabels: function (e) { var t, i, n, o = this.axes, r = this.panes; for (i = 0; i < o.length; i++)o[i].autoRotateLabels() && (t = !0); if (t) { for (n = 0; n < r.length; n++)this.reflowPaneAxes(r[n]); e.x.length > 0 && e.y.length > 0 && (this.alignAxes(e.x, e.y), this.shrinkAxisWidth(r)) } }, reflowPaneAxes: function (e) { var t, i = e.axes, n = i.length; if (n > 0) for (t = 0; t < n; t++)i[t].reflow(e.contentBox) }, reflowCharts: function (e) { var t, i, n = this.charts, o = n.length, r = this.box; for (t = 0; t < o; t++)(i = n[t].pane) && !ae(i, e) || n[t].reflow(r) }, reflowPanes: function () { var e, t, i, n, o, r, s, a, l, c = this.box, d = this.panes, u = d.length, h = c.height(), f = 0, p = c.y1; for (e = 0; e < u; e++)t = d[e], i = t.options.height, t.options.width = c.width(), t.options.height ? (i.indexOf && i.indexOf("%") && (n = parseInt(i, 10) / 100, t.options.height = n * c.height()), t.reflow(c.clone()), h -= t.options.height) : f++; for (o = 0; o < u; o++)(r = d[o]).options.height || (r.options.height = h / f); for (s = 0; s < u; s++)a = d[s], l = c.clone().move(c.x1, p), a.reflow(l), 0, p += a.options.height }, backgroundBox: function () { var e, t, i, n, o, r, s = this.axes, a = s.length; for (t = 0; t < a; t++)for (i = s[t], n = 0; n < a; n++)o = s[n], i.options.vertical !== o.options.vertical && (r = i.lineBox().clone().wrap(o.lineBox()), e = e ? e.wrap(r) : r); return e || this.box }, chartsBoxes: function () { var e, t = this.panes, i = []; for (e = 0; e < t.length; e++)i.push(t[e].chartsBox()); return i }, addBackgroundPaths: function (e) { var t, i = this.chartsBoxes(); for (t = 0; t < i.length; t++)e.paths.push(Pe.fromRect(i[t].toRect())) }, backgroundContainsPoint: function (e) { var t, i = this.chartsBoxes(); for (t = 0; t < i.length; t++)if (i[t].containsPoint(e)) return !0 }, createVisual: function () { var e, t, i, n, o; ie.fn.createVisual.call(this), e = this.options.plotArea, t = e.opacity, i = e.background, void 0 === (n = e.border) && (n = {}), function (e) { return "" === e || null === e || "none" === e || "transparent" === e || !J(e) }(i) && (i = q, t = 0), o = this._bgVisual = new ze.MultiPath({ fill: { color: i, opacity: t }, stroke: { color: n.width ? n.color : "", width: n.width, dashType: n.dashType }, zIndex: -1 }), this.addBackgroundPaths(o), this.appendVisual(o) }, pointsByCategoryIndex: function (e) { var t, i, n, o, r = this.charts, s = []; if (null !== e) for (t = 0; t < r.length; t++)if ("_navigator" !== r[t].pane.options.name && ((i = r[t].categoryPoints[e]) && i.length)) for (n = 0; n < i.length; n++)(o = i[n]) && J(o.value) && null !== o.value && s.push(o); return s }, pointsBySeriesIndex: function (e) { return this.filterPoints(function (t) { return t.series.index === e }) }, pointsBySeriesName: function (e) { return this.filterPoints(function (t) { return t.series.name === e }) }, filterPoints: function (e) { var t, i, n, o, r, s = this.charts, a = []; for (t = 0; t < s.length; t++)for (i = s[t], n = i.points, o = 0; o < n.length; o++)(r = n[o]) && e(r) && a.push(r); return a }, findPoint: function (e) { var t, i, n, o, r, s = this.charts; for (t = 0; t < s.length; t++)for (i = s[t], n = i.points, o = 0; o < n.length; o++)if ((r = n[o]) && e(r)) return r }, paneByPoint: function (e) { var t, i, n = this.panes; for (t = 0; t < n.length; t++)if ((i = n[t]).box.containsPoint(e)) return i } }), se(Zi, { series: [], plotArea: { margin: {} }, background: "", border: { color: K, width: 0 }, legend: { inactiveItems: { labels: { color: "#919191" }, markers: { color: "#919191" } } } }), Ji = { hover: function (e, t) { this._dispatchEvent(e, t, qt) }, click: function (e, t) { this._dispatchEvent(e, t, Wt) } }, en = z.extend({ init: function (e, t, i) { var n, o, r, s = t.canonicalFields(e), a = t.valueFields(e), l = t.sourceFields(e, s), c = this._seriesFields = [], d = i.query(e.type), u = e.aggregate || d; for (this._series = e, this._binder = t, n = 0; n < s.length; n++) { if (o = s[n], r = void 0, de(u)) r = u[o]; else { if (0 !== n && !ae(o, a)) break; r = u } r && c.push({ canonicalName: o, name: l[n], transform: le(r) ? r : je[r] }) } }, aggregatePoints: function (e, t) { var i, n, o, r, s, a = this._series, l = this._seriesFields, c = this._bindPoints(e || []), d = c.dataItems[0], h = {}; for (!d || P(d) || te(d) || ((i = function () { }).prototype = d, h = new i), n = 0; n < l.length; n++) { if (o = l[n], r = this._bindField(c.values, o.canonicalName), !(null === (s = o.transform(r, a, c.dataItems, t)) || !de(s) || J(s.length) || s instanceof Date)) { h = s; break } J(s) && u(o.name, h, s) } return h }, _bindPoints: function (e) { var t, i, n = this._binder, o = this._series, r = [], s = []; for (t = 0; t < e.length; t++)i = e[t], r.push(n.bindPoint(o, i)), s.push(o.data[i]); return { values: r, dataItems: s } }, _bindField: function (e, t) { var i, n, o, r, s = [], a = e.length; for (i = 0; i < a; i++)n = e[i], o = n.valueFields, r = void 0, r = J(o[t]) ? o[t] : n.fields[t], s.push(r); return s } }), (tn = z.extend({ init: function () { this._defaults = {} }, register: function (e, t) { var i; for (i = 0; i < e.length; i++)this._defaults[e[i]] = t }, query: function (e) { return this._defaults[e] } })).current = new tn, (nn = Ii.extend({ createLabel: function () { var e = this.options.labels, t = ue({}, e, e.from), i = ue({}, e, e.to); t.visible && (this.labelFrom = this._createLabel(t), this.append(this.labelFrom)), i.visible && (this.labelTo = this._createLabel(i), this.append(this.labelTo)) }, _createLabel: function (e) { var t, i; return e.template ? (i = pe.compile(e.template), t = i({ dataItem: this.dataItem, category: this.category, value: this.value, percentage: this.percentage, runningTotal: this.runningTotal, total: this.total, series: this.series })) : t = this.formatValue(e.format), new Ei(t, ue({ vertical: this.options.vertical }, e)) }, reflow: function (e) { var t, i, n, o; this.render(), i = (t = this).labelFrom, n = t.labelTo, o = t.value, this.box = e, i && (i.options.aboveAxis = o.from > o.to, i.reflow(e)), n && (n.options.aboveAxis = o.to > o.from, n.reflow(e)), this.note && this.note.reflow(e) } })).prototype.defaults = ue({}, nn.prototype.defaults, { labels: { format: "{0} - {1}" }, tooltip: { format: "{1}" } }), (on = Fi.extend({ pointType: function () { return nn }, pointValue: function (e) { return e.valueFields }, formatPointValue: function (e, t) { return null === e.value.from && null === e.value.to ? "" : this.chartService.format.auto(t, e.value.from, e.value.to) }, plotRange: function (e) { return e ? [e.value.from, e.value.to] : 0 }, updateRange: function (e, t) { var i = t.series.axis, n = e.from, o = e.to, r = this.valueAxisRanges[i]; null !== e && P(n) && P(o) && ((r = this.valueAxisRanges[i] = r || { min: L, max: H }).min = Math.min(r.min, n), r.max = Math.max(r.max, n), r.min = Math.min(r.min, o), r.max = Math.max(r.max, o)) }, aboveAxis: function (e) { var t = e.value; return t.from < t.to } })).prototype.plotLimits = hi.prototype.plotLimits, rn = zi.extend({ reflow: function (e) { var t, i = this, n = i.options, o = i.value, r = i.owner, s = r.seriesValueAxis(n), a = [], l = [], c = [], d = s.getSlot(o.low, o.high), u = s.getSlot(o.open, o.open), h = s.getSlot(o.close, o.close); u.x1 = h.x1 = d.x1 = e.x1, u.x2 = h.x2 = d.x2 = e.x2, t = d.center().x, a.push([u.x1, u.y1]), a.push([t, u.y1]), l.push([t, h.y1]), l.push([h.x2, h.y1]), c.push([t, d.y1]), c.push([t, d.y2]), this.lines = [a, l, c], this.box = d.clone().wrap(u.clone().wrap(h)), this.reflowNote() }, createBody: function () { } }), sn = Pi.extend({ pointType: function () { return rn } }), an = ie.extend({ init: function (e, t, i) { ie.fn.init.call(this), this.from = e, this.to = t, this.series = i }, linePoints: function () { var e, t, i = this.from, n = this.from.box, o = this.to.box, r = []; return i.isVertical ? (e = i.aboveAxis ? n.y1 : n.y2, r.push([n.x1, e], [o.x2, e])) : (t = i.aboveAxis ? n.x2 : n.x1, r.push([t, n.y1], [t, o.y2])), r }, createVisual: function () { var e, t; ie.fn.createVisual.call(this), e = this.series.line || {}, t = Pe.fromPoints(this.linePoints(), { stroke: { color: e.color, width: e.width, opacity: e.opacity, dashType: e.dashType } }), re(t), this.visual.append(t) } }), se(an, { animation: { type: Ze, delay: Xe } }), ln = Fi.extend({ render: function () { Fi.fn.render.call(this), this.createSegments() }, traverseDataPoints: function (e) { var t, i, n, r, s, a, l, c, d, u, h = this.options.series, f = this.categoryAxis.options.categories || [], p = o(h), m = !this.options.invertAxes; for (t = 0; t < h.length; t++)for (i = h[t], n = 0, r = 0, s = 0; s < p; s++)a = Ge.current.bindPoint(i, s), l = a.valueFields.value, c = a.fields.summary, d = n, u = void 0, c ? "total" === c.toLowerCase() ? (a.valueFields.value = n, d = 0, u = n) : (a.valueFields.value = r, u = d - r, r = 0) : P(l) && (r += l, u = n += l), e(a, { category: f[s], categoryIx: s, series: i, seriesIx: t, total: n, runningTotal: r, from: d, to: u, isVertical: m }) }, updateRange: function (e, t) { Fi.fn.updateRange.call(this, { value: t.to }, t) }, aboveAxis: function (e) { return e.value >= 0 }, plotRange: function (e) { return [e.from, e.to] }, createSegments: function () { var e, t, i, n, o, r, s, a = this.options.series, l = this.seriesPoints, c = this.segments = []; for (e = 0; e < a.length; e++)if (t = a[e], i = l[e]) for (n = void 0, o = 0; o < i.length; o++)(r = i[o]) && n && (s = new an(n, r, t), c.push(s), this.append(s)), n = r } }), cn = Zi.extend({ initFields: function (e) { var t, i; if (this.namedCategoryAxes = {}, this.namedValueAxes = {}, this.valueAxisRangeTracker = new Ai, e.length > 0) for (this.invertAxes = ae(e[0].type, [ut, pt, Bt, Ft, Et, bt, zt]), t = 0; t < e.length; t++)if ((i = e[t].stack) && "100%" === i.type) { this.stack100 = !0; break } }, render: function (e) { void 0 === e && (e = this.panes), this.createCategoryAxes(e), this.aggregateCategories(e), this.createCategoryAxesLabels(e), this.createCharts(e), this.createValueAxes(e) }, removeAxis: function (e) { var t = e.options.name; Zi.fn.removeAxis.call(this, e), e instanceof Ce ? delete this.namedCategoryAxes[t] : (this.valueAxisRangeTracker.reset(t), delete this.namedValueAxes[t]), e === this.categoryAxis && delete this.categoryAxis, e === this.valueAxis && delete this.valueAxis }, createCharts: function (e) { var t, i, n, o, r, s, a = this, l = this.groupSeriesByPane(); for (t = 0; t < e.length; t++)if (i = e[t], n = l[i.options.name || "default"] || [], a.addToLegend(n), o = a.filterVisibleSeries(n)) for (r = a.groupSeriesByCategoryAxis(o), s = 0; s < r.length; s++)a.createChartGroup(r[s], i) }, createChartGroup: function (e, t) { this.createAreaChart(h(e, [dt, Ft]), t), this.createBarChart(h(e, [gt, ut]), t), this.createRangeBarChart(h(e, [It, Et]), t), this.createBulletChart(h(e, [pt, Pt]), t), this.createCandlestickChart(h(e, mt), t), this.createBoxPlotChart(h(e, [ht, zt]), t), this.createOHLCChart(h(e, yt), t), this.createWaterfallChart(h(e, [Lt, bt]), t), this.createLineChart(h(e, [wt, Bt]), t) }, aggregateCategories: function (e) { var t, i, n, o, r = this, s = this.srcSeries || this.series, a = []; for (t = 0; t < s.length; t++)i = s[t], n = r.seriesCategoryAxis(i), o = r.findPane(n.options.pane), (f(n.options.type, Q) || i.categoryField) && ae(o, e) ? i = r.aggregateSeries(i, n) : (P(n.options.min) || P(n.options.max)) && (i = r.filterSeries(i, n)), a.push(i); this.srcSeries = s, this.series = a }, filterSeries: function (e, t) { var i, n, o, r = t.totalRangeIndices(), s = t.options.justified, a = ae(e.type, [wt, Bt, dt, Ft]); return r.min = P(t.options.min) ? Math.floor(r.min) : 0, r.max = P(t.options.max) ? s ? Math.floor(r.max) + 1 : Math.ceil(r.max) : e.data.length, i = ue({}, e), a && (n = r.min - 1, o = t.options.srcCategories || [], n >= 0 && n < i.data.length && (i._outOfRangeMinPoint = { item: i.data[n], category: o[n], categoryIx: -1 }), r.max < i.data.length && (i._outOfRangeMaxPoint = { item: i.data[r.max], category: o[r.max], categoryIx: r.max - r.min })), t._seriesMax = Math.max(t._seriesMax || 0, i.data.length), i.data = (i.data || []).slice(r.min, r.max), i }, aggregateSeries: function (e, t) { var n, o, r, s, a, l, c, d, u, h, p, m, g, _, b, w, y, k = ae(e.type, [wt, Bt, dt, Ft]), x = t.options, C = x.categories, S = x.srcCategories; for (void 0 === S && (S = C), void 0 === (n = x.dataItems) && (n = []), o = f(t.options.type, Q), r = ue({}, e), s = ue({}, e), a = e.data, l = [], c = H, d = L, u = i, o && (u = v), m = 0; m < a.length; m++)g = void 0, g = e.categoryField ? u(e.categoryField, a[m], this.chartService.intl) : S[m], J(g) && (0 <= (_ = t.categoryIndex(g)) && _ < C.length ? (l[_] = l[_] || [], l[_].push(m)) : k && (_ < 0 ? _ === c ? h.points.push(m) : _ > c && (c = _, h = { category: g, points: [m] }) : _ >= C.length && (_ === d ? p.points.push(m) : _ < d && (d = _, p = { category: g, points: [m] })))); for (b = new en(r, Ge.current, tn.current), w = s.data = [], y = 0; y < C.length; y++)w[y] = b.aggregatePoints(l[y], C[y]), l[y] && (n[y] = w[y]); return h && w.length && (s._outOfRangeMinPoint = { item: b.aggregatePoints(h.points, h.category), categoryIx: c, category: h.category }), p && w.length && (s._outOfRangeMaxPoint = { item: b.aggregatePoints(p.points, p.category), categoryIx: d, category: p.category }), t.options.dataItems = n, s }, appendChart: function (e, t) { for (var i = e.options.series, n = this.seriesCategoryAxis(i[0]), r = n.options.categories, s = Math.max(0, o(i) - r.length); s--;)r.push(""); this.valueAxisRangeTracker.update(e.valueAxisRanges), Zi.fn.appendChart.call(this, e, t) }, seriesPaneName: function (e) { var t = this.options, i = e.axis, n = [].concat(t.valueAxis), o = De(n, function (e) { return e.name === i })[0], r = t.panes || [{}], s = (r[0] || {}).name || "default", a = (o || {}).pane || s; return a }, seriesCategoryAxis: function (e) { var t = e.categoryAxis, i = t ? this.namedCategoryAxes[t] : this.categoryAxis; if (!i) throw Error("Unable to locate category axis with name " + t); return i }, stackableChartOptions: function (e, t) { var i = e.stack, n = i && "100%" === i.type, o = t.options.clip; return { isStacked: i, isStacked100: n, clip: o } }, groupSeriesByCategoryAxis: function (e) { var t, i, n, o, r, s, a = [], l = {}; for (t = 0; t < e.length; t++)i = e[t].categoryAxis || "$$default$$", l.hasOwnProperty(i) || (l[i] = !0, a.push(i)); for (n = [], o = 0; o < a.length; o++)r = a[o], 0 !== (s = _(e, r, o)).length && n.push(s); return n }, createBarChart: function (t, i) { var n, o; 0 !== t.length && (n = t[0], o = new Fi(this, e.extend({ series: t, invertAxes: this.invertAxes, gap: n.gap, spacing: n.spacing }, this.stackableChartOptions(n, i))), this.appendChart(o, i)) }, createRangeBarChart: function (e, t) { var i, n; 0 !== e.length && (i = e[0], n = new on(this, { series: e, invertAxes: this.invertAxes, gap: i.gap, spacing: i.spacing }), this.appendChart(n, t)) }, createBulletChart: function (e, t) { var i, n; 0 !== e.length && (i = e[0], n = new ji(this, { series: e, invertAxes: this.invertAxes, gap: i.gap, spacing: i.spacing, clip: t.options.clip }), this.appendChart(n, t)) }, createLineChart: function (t, i) { var n, o; 0 !== t.length && (n = t[0], o = new ki(this, e.extend({ invertAxes: this.invertAxes, series: t }, this.stackableChartOptions(n, i))), this.appendChart(o, i)) }, createAreaChart: function (t, i) { var n, o; 0 !== t.length && (n = t[0], o = new Di(this, e.extend({ invertAxes: this.invertAxes, series: t }, this.stackableChartOptions(n, i))), this.appendChart(o, i)) }, createOHLCChart: function (e, t) { var i, n; 0 !== e.length && (i = e[0], n = new sn(this, { invertAxes: this.invertAxes, gap: i.gap, series: e, spacing: i.spacing, clip: t.options.clip }), this.appendChart(n, t)) }, createCandlestickChart: function (e, t) { var i, n; 0 !== e.length && (i = e[0], n = new Pi(this, { invertAxes: this.invertAxes, gap: i.gap, series: e, spacing: i.spacing, clip: t.options.clip }), this.appendChart(n, t)) }, createBoxPlotChart: function (e, t) { var i, n; 0 !== e.length && (i = e[0], n = new Hi(this, { invertAxes: this.invertAxes, gap: i.gap, series: e, spacing: i.spacing, clip: t.options.clip }), this.appendChart(n, t)) }, createWaterfallChart: function (e, t) { var i, n; 0 !== e.length && (i = e[0], n = new ln(this, { series: e, invertAxes: this.invertAxes, gap: i.gap, spacing: i.spacing }), this.appendChart(n, t)) }, axisRequiresRounding: function (e, t) { var i, n, o, r, s, a = h(this.series, Ht); for (i = 0; i < this.series.length; i++)(n = this.series[i]).type !== wt && n.type !== dt || (o = n.line) && o.style === ct && a.push(n); for (r = 0; r < a.length; r++)if ((s = a[r].categoryAxis || "") === e || !s && 0 === t) return !0 }, aggregatedAxis: function (e, t) { var i, n, o = this.series; for (i = 0; i < o.length; i++)if (((n = o[i].categoryAxis || "") === e || !n && 0 === t) && o[i].categoryField) return !0 }, createCategoryAxesLabels: function () { var e, t = this.axes; for (e = 0; e < t.length; e++)t[e] instanceof Ce && t[e].createLabels() }, createCategoryAxes: function (e) { var t, i, n, o, r, s, a, l = this, c = this.invertAxes, d = [].concat(this.options.categoryAxis), u = []; for (t = 0; t < d.length; t++)if (i = d[t], n = l.findPane(i.pane), ae(n, e)) { if (o = i.name, void 0 === (r = i.categories) && (r = []), i = ue({ vertical: c, axisCrossingValue: c ? L : 0 }, i), J(i.justified) || (i.justified = l.isJustified()), l.axisRequiresRounding(o, t) && (i.justified = !1), s = void 0, s = p(i, r[0]) ? new Ae(i, l.chartService) : new Ce(i, l.chartService), o) { if (l.namedCategoryAxes[o]) throw Error("Category axis with name " + o + " is already defined"); l.namedCategoryAxes[o] = s } s.axisIndex = t, u.push(s), l.appendAxis(s) } a = this.categoryAxis || u[0], this.categoryAxis = a, c ? this.axisY = a : this.axisX = a }, isJustified: function () { var e, t, i = this.series; for (e = 0; e < i.length; e++)if (t = i[e], !ae(t.type, [dt, Ft])) return !1; return !0 }, createValueAxes: function (e) { var t, i, n, o, r, s, a, l, c, d = this, u = this.valueAxisRangeTracker, h = u.query(), p = [].concat(this.options.valueAxis), m = this.invertAxes, g = { vertical: !m }, v = []; for (this.stack100 && (g.roundToMajorUnit = !1, g.labels = { format: "P0" }), t = 0; t < p.length; t++)if (i = p[t], n = d.findPane(i.pane), ae(n, e)) { if (o = i.name, r = f(i.type, ii) ? { min: .1, max: 1 } : { min: 0, max: 1 }, s = u.query(o) || h || r, 0 === t && s && h && (s.min = Math.min(s.min, h.min), s.max = Math.max(s.max, h.max)), a = void 0, a = f(i.type, ii) ? F.LogarithmicAxis : F.NumericAxis, l = new a(s.min, s.max, ue({}, g, i), d.chartService), o) { if (d.namedValueAxes[o]) throw Error("Value axis with name " + o + " is already defined"); d.namedValueAxes[o] = l } l.axisIndex = t, v.push(l), d.appendAxis(l) } c = this.valueAxis || v[0], this.valueAxis = c, m ? this.axisX = c : this.axisY = c }, _dispatchEvent: function (e, t, i) { var n, o, r, s = e._eventCoordinates(t), a = new ne(s.x, s.y), l = this.pointPane(a), c = [], d = []; if (l) { for (n = l.axes, o = 0; o < n.length; o++)(r = n[o]).getValue ? m(d, r.getValue(a)) : m(c, r.getCategory(a)); 0 === c.length && m(c, this.categoryAxis.getCategory(a)), c.length > 0 && d.length > 0 && e.trigger(i, { element: he(t), originalEvent: t, category: g(c), value: g(d) }) } }, pointPane: function (e) { var t, i, n = this.panes; for (t = 0; t < n.length; t++)if ((i = n[t]).contentBox.containsPoint(e)) return i }, updateAxisOptions: function (e, t) { var i = [].concat(e instanceof Ce ? this.options.categoryAxis : this.options.valueAxis); ue(i[e.axisIndex], t) } }), se(cn, { categoryAxis: { categories: [] }, valueAxis: {} }), ue(cn.prototype, Ji), dn = z.extend({ init: function () { this._points = [] }, destroy: function () { this._points = [] }, show: function (e) { var t, i, n = [].concat(e); for (this.hide(), t = 0; t < n.length; t++)(i = n[t]) && i.toggleHighlight && i.hasHighlight() && (this.togglePointHighlight(i, !0), this._points.push(i)) }, togglePointHighlight: function (e, t) { var i, n = (e.options.highlight || {}).toggle; n ? (i = { category: e.category, series: e.series, dataItem: e.dataItem, value: e.value, stackValue: e.stackValue, preventDefault: b, visual: e.highlightVisual(), show: t }, n(i), i._defaultPrevented || e.toggleHighlight(t)) : e.toggleHighlight(t) }, hide: function () { for (var e = this._points; e.length;)this.togglePointHighlight(e.pop(), !1) }, isHighlighted: function (e) { var t, i, n = this._points; for (t = 0; t < n.length; t++)if (i = n[t], e === i) return !0; return !1 } }), (un = z.extend({ init: function (e, t) { this.plotArea = e, this.options = ue({}, this.options, t) }, start: function (e) { return this._active = w(e, this.options.key) }, move: function (e) { if (this._active) { var t = this.axisRanges = this._panAxes(e, $).concat(this._panAxes(e, G)); if (t.length) return this.axisRanges = t, y(t) } }, end: function () { var e = this._active; return this._active = !1, e }, pan: function () { var e, t, i = this.plotArea, n = this.axisRanges; if (n.length) { for (e = 0; e < n.length; e++)t = n[e], i.updateAxisOptions(t.axis, t.range); i.redraw(i.panes) } }, destroy: function () { delete this.plotArea }, _panAxes: function (e, t) { var i, n, o, r, s = this.plotArea, a = -e[t].delta, l = (this.options.lock || "").toLowerCase(), c = []; if (0 !== a && (l || "").toLowerCase() !== t) for (i = s.axes, n = 0; n < i.length; n++)o = i[n], (t === $ && !o.options.vertical || t === G && o.options.vertical) && ((r = o.pan(a)) && (r.limitRange = !0, c.push({ axis: o, range: r }))); return c } })).prototype.options = { key: "none", lock: "none" }, (hn = z.extend({ init: function (e, t) { this.chart = e, this.options = ue({}, this.options, t), this.createElement() }, createElement: function () { var e, t = this._marquee = document.createElement("div"); t.className = "k-marquee", (e = document.createElement("div")).className = "k-marquee-color", t.appendChild(e) }, removeElement: function () { this._marquee.parentNode && this._marquee.parentNode.removeChild(this._marquee) }, setStyles: function (e) { Ee(this._marquee, e) }, start: function (e) { var t, i, n, o, r; return !!(w(e, this.options.key) && (t = this.chart, i = t._eventCoordinates(e), n = this._zoomPane = t._plotArea.paneByPoint(i), n && n.clipBox())) && (o = n.clipBox().clone(), r = this._elementOffset(), o.translate(r.left, r.top), this._zoomPaneClipBox = o, document.body.appendChild(this._marquee), this.setStyles({ left: e.pageX + 1, top: e.pageY + 1, width: 0, height: 0 }), !0) }, _elementOffset: function () { var e = this.chart.element, t = Ee(e, ["paddingLeft", "paddingTop"]), i = t.paddingLeft, n = t.paddingTop, o = F.elementOffset(e); return { left: i + o.left, top: n + o.top } }, move: function (e) { var t = this._zoomPane; t && this.setStyles(this._selectionPosition(e)) }, end: function (e) { var t, i, n, o, r = this._zoomPane; if (r) return t = this._elementOffset(), (i = this._selectionPosition(e)).left -= t.left, i.top -= t.top, n = { x: i.left, y: i.top }, o = { x: i.left + i.width, y: i.top + i.height }, this._updateAxisRanges(n, o), this.removeElement(), delete this._zoomPane, y(this.axisRanges) }, zoom: function () { var e, t, i, n = this.axisRanges; if (n && n.length) { for (e = this.chart._plotArea, t = 0; t < n.length; t++)i = n[t], e.updateAxisOptions(i.axis, i.range); e.redraw(e.panes) } }, destroy: function () { this.removeElement(), delete this._marquee, delete this.chart }, _updateAxisRanges: function (e, t) { var i, n, o, r, s = (this.options.lock || "").toLowerCase(), a = [], l = this._zoomPane.axes; for (i = 0; i < l.length; i++)n = l[i], o = n.options.vertical, s === $ && !o || s === G && o || (r = n.pointsRange(e, t)) && a.push({ axis: n, range: r }); this.axisRanges = a }, _selectionPosition: function (e) { var t = this._zoomPaneClipBox, i = { x: e.x.startLocation, y: e.y.startLocation }, n = e.x.location, o = e.y.location, r = (this.options.lock || "").toLowerCase(), s = Math.min(i.x, n), a = Math.min(i.y, o), l = Math.abs(i.x - n), c = Math.abs(i.y - o); return r === $ && (s = t.x1, l = t.width()), r === G && (a = t.y1, c = t.height()), n > t.x2 && (l = t.x2 - i.x), n < t.x1 && (l = i.x - t.x1), o > t.y2 && (c = t.y2 - i.y), o < t.y1 && (c = i.y - t.y1), { left: Math.max(s, t.x1), top: Math.max(a, t.y1), width: l, height: c } } })).prototype.options = { key: "shift", lock: "none" }, fn = z.extend({ init: function (e, t) { this.chart = e, this.options = ue({}, this.options, t) }, updateRanges: function (e) { var t, i, n, o, r = (this.options.lock || "").toLowerCase(), s = [], a = this.chart._plotArea.axes; for (t = 0; t < a.length; t++)i = a[t], n = i.options.vertical, r === $ && !n || r === G && n || (o = i.zoomRange(-e)) && s.push({ axis: i, range: o }); return this.axisRanges = s, y(s) }, zoom: function () { var e, t, i, n = this.axisRanges; if (n && n.length) { for (e = this.chart._plotArea, t = 0; t < n.length; t++)i = n[t], e.updateAxisOptions(i.axis, i.range); e.redraw(e.panes) } }, destroy: function () { delete this.chart } }), pn = ie.extend({ init: function (e, t) { ie.fn.init.call(this, e), this.chartService = t }, render: function () { var e, t, i = this.children, n = this.options, o = n.vertical; for (this.visual = new ze.Layout(null, { spacing: o ? 0 : n.spacing, lineSpacing: o ? n.spacing : 0, orientation: o ? "vertical" : "horizontal" }), e = 0; e < i.length; e++)(t = i[e]).reflow(new oe), t.renderVisual() }, reflow: function (e) { this.visual.rect(e.toRect()), this.visual.reflow(); var t = this.visual.clippedBBox(); this.box = t ? F.rectToBox(t) : new oe }, renderVisual: function () { this.addVisual() }, createVisual: function () { } }), mn = Se.extend({ init: function (e) { Se.fn.init.call(this, e), this.createContainer(), this.createMarker(), this.createLabel() }, createContainer: function () { this.container = new F.FloatElement({ vertical: !1, wrap: !1, align: O }), this.append(this.container) }, createMarker: function () { this.container.append(new ge(this.markerOptions())) }, markerOptions: function () { var e = this.options, t = e.markerColor; return ue({}, e.markers, { background: t, border: { color: t } }) }, createLabel: function () { var e = this.options, t = ue({}, e.labels); this.container.append(new me(e.text, t)) }, renderComplete: function () { var e, t; Se.fn.renderComplete.call(this), e = this.options.cursor || {}, t = this._itemOverlay = Pe.fromRect(this.container.box.toRect(), { fill: { color: q, opacity: 0 }, stroke: null, cursor: e.style || e }), this.appendVisual(t) }, click: function (e, t) { var i = this.eventArgs(t); e.trigger(Nt, i) || t.preventDefault() }, hover: function (e, t) { var i = this.eventArgs(t); return e.trigger(Ot, i) || (t.preventDefault(), e._legendItemHover(i.seriesIndex, i.pointIndex)), !0 }, leave: function (e) { e._unsetActivePoint() }, eventArgs: function (e) { var t = this.options; return { element: he(e), text: t.text, series: t.series, seriesIndex: t.series.index, pointIndex: t.pointIndex } }, renderVisual: function () { var e = this, t = this.options, i = t.visual; i ? (this.visual = i({ active: t.active, series: t.series, sender: this.getSender(), pointIndex: t.pointIndex, options: { markers: this.markerOptions(), labels: t.labels }, createVisual: function () { e.createVisual(), e.renderChildren(), e.renderComplete(); var t = e.visual; return delete e.visual, t } }), this.addVisual()) : Se.fn.renderVisual.call(this) } }), gn = "horizontal", vn = "custom", _n = ie.extend({ init: function (e, t) { ie.fn.init.call(this, e), this.chartService = t, ae(this.options.position, [V, Y, U, W, vn]) || (this.options.position = Y), this.createContainer(), this.createItems() }, createContainer: function () { var e = this.options, t = e.position, i = e.align, n = t, o = O; t === vn ? n = W : ae(t, [V, U]) ? (n = "start" === i ? W : "end" === i ? Y : O, o = t) : i && ("start" === i ? o = V : "end" === i && (o = U)), this.container = new Se({ margin: e.margin, padding: e.padding, background: e.background, border: e.border, vAlign: o, align: n, zIndex: e.zIndex, shrinkToFit: !0 }), this.append(this.container) }, createItems: function () { var e, t, i, n = this.getService(), o = this.options, r = this.isVertical(), s = new pn({ vertical: r, spacing: o.spacing }, n), a = o.items; for (o.reverse && (a = a.slice(0).reverse()), e = a.length, t = 0; t < e; t++)i = a[t], s.append(new mn(ue({}, { markers: o.markers, labels: o.labels }, o.item, i))); s.render(), this.container.append(s) }, isVertical: function () { var e = this.options, t = e.orientation, i = e.position, n = i === vn && t !== gn || (J(t) ? t !== gn : ae(i, [W, Y])); return n }, hasItems: function () { return this.container.children[0].children.length > 0 }, reflow: function (e) { var t = this.options, i = e.clone(); return this.hasItems() ? void (t.position === vn ? (this.containerCustomReflow(i), this.box = i) : this.containerReflow(i)) : void (this.box = i) }, containerReflow: function (e) { var t, i = this.options, n = this.container, o = i.position, r = i.width, s = i.height, a = o === V || o === U ? $ : G, l = this.isVertical(), c = e.clone(), d = e.clone(); o !== W && o !== Y || (d.y1 = c.y1 = 0), l && s ? (d.y2 = d.y1 + s, d.align(c, G, n.options.vAlign)) : !l && r && (d.x2 = d.x1 + r, d.align(c, $, n.options.align)), n.reflow(d), d = n.box, t = d.clone(), (i.offsetX || i.offsetY) && (d.translate(i.offsetX, i.offsetY), this.container.reflow(d)), t[a + 1] = e[a + 1], t[a + 2] = e[a + 2], this.box = t }, containerCustomReflow: function (e) { var t = this.options, i = this.container, n = t.offsetX, o = t.offsetY, r = t.width, s = t.height, a = this.isVertical(), l = e.clone(); a && s ? l.y2 = l.y1 + s : !a && r && (l.x2 = l.x1 + r), i.reflow(l), l = i.box, i.reflow(new oe(n, o, n + l.width(), o + l.height())) }, renderVisual: function () { this.hasItems() && ie.fn.renderVisual.call(this) } }), se(_n, { position: Y, items: [], labels: { margin: { left: 6 } }, offsetX: 0, offsetY: 0, margin: ve(5), padding: ve(5), border: { color: K, width: 0 }, item: { cursor: "pointer" }, spacing: 6, background: "", zIndex: 1, markers: { border: { width: 0 }, width: 15, height: 3, type: "rect", align: W, vAlign: O } }), (bn = z.extend({ init: function () { this._registry = [] }, register: function (e, t) { this._registry.push({ type: e, seriesTypes: t }) }, create: function (e, t, i) { var n, o, r, s = this._registry, a = s[0]; for (o = 0; o < s.length; o++)if (r = s[o], (n = h(e, r.seriesTypes)).length > 0) { a = r; break } return new a.type(n, t, i) } })).current = new bn, wn = z.extend({ init: function (e, t, i, n) { var o = e.element, r = this.getValueAxis(t); this.options = ue({}, this.options, i), this.chart = e, this.observer = n, this.chartElement = o, this.categoryAxis = t, this._dateAxis = this.categoryAxis instanceof Ae, this.valueAxis = r, this.initOptions(), this.options.visible && (this.createElements(), this.set(this._index(this.options.from), this._index(this.options.to)), this.bindEvents()) }, createElements: function () { var e, t, i, n, o, r, s = this.options, a = this.wrapper = k("k-selector"); Ee(a, { top: s.offset.top, left: s.offset.left, width: s.width, height: s.height }), e = this.selection = k("k-selection"), this.leftMask = k("k-mask"), this.rightMask = k("k-mask"), a.appendChild(this.leftMask), a.appendChild(this.rightMask), a.appendChild(e), e.appendChild(k("k-selection-bg")), t = this.leftHandle = k("k-handle k-left-handle"), i = this.rightHandle = k("k-handle k-right-handle"), t.appendChild(k()), i.appendChild(k()), e.appendChild(t), e.appendChild(i), this.chartElement.appendChild(a), n = Ee(e, ["borderLeftWidth", "borderRightWidth", "height"]), o = Ee(t, "height").height, r = Ee(i, "height").height, s.selection = { border: { left: n.borderLeftWidth, right: n.borderRightWidth } }, Ee(t, { top: (n.height - o) / 2 }), Ee(i, { top: (n.height - r) / 2 }), a.style.cssText = a.style.cssText }, bindEvents: function () { var e; this._mousewheelHandler = !1 !== this.options.mousewheel ? this._mousewheel.bind(this) : C, Me(this.wrapper, ((e = {})[ai] = this._mousewheelHandler, e)), this._domEvents = fe.DomEventsBuilder.create(this.wrapper, { start: this._start.bind(this), move: this._move.bind(this), end: this._end.bind(this), tap: this._tap.bind(this), press: this._press.bind(this), gesturestart: this._gesturestart.bind(this), gesturechange: this._gesturechange.bind(this), gestureend: this._gestureend.bind(this) }) }, initOptions: function () { var e, t, i, n = this, o = n.options, r = n.categoryAxis, s = n.valueAxis, a = r.lineBox(), l = s.lineBox(), c = this.chart.chartService.intl; this._dateAxis && ue(o, { min: ke(c, o.min), max: ke(c, o.max), from: ke(c, o.from), to: ke(c, o.to) }), e = Ee(this.chartElement, ["paddingLeft", "paddingTop"]), t = e.paddingLeft, i = e.paddingTop, this.options = ue({}, { width: a.width(), height: l.height() + .1, padding: { left: t, top: i }, offset: { left: l.x2 + t, top: l.y1 + i }, from: o.min, to: o.max }, o) }, destroy: function () { var e; (this._domEvents && (this._domEvents.destroy(), delete this._domEvents), clearTimeout(this._mwTimeout), this._state = null, this.wrapper) && (Re(this.wrapper, ((e = {})[ai] = this._mousewheelHandler, e)), this.chartElement.removeChild(this.wrapper)) }, _rangeEventArgs: function (e) { return { axis: this.categoryAxis.options, from: this._value(e.from), to: this._value(e.to) } }, _start: function (e) { var t, i = this.options, n = he(e); !this._state && n && (this.chart._unsetActivePoint(), this._state = { moveTarget: x(n) || n, startLocation: e.x ? e.x.location : 0, range: { from: this._index(i.from), to: this._index(i.to) } }, t = this._rangeEventArgs({ from: this._index(i.from), to: this._index(i.to) }), this.trigger(Xt, t) && (this._state = null)) }, _press: function (e) { var t; (t = this._state ? this._state.moveTarget : x(he(e))) && F.addClass(t, "k-handle-active") }, _move: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m; this._state && (i = (t = this)._state, n = t.options, o = t.categoryAxis.options.categories, r = i.range, s = i.moveTarget, a = this._index(n.from), l = this._index(n.to), c = this._index(n.min), d = this._index(n.max), u = i.startLocation - e.x.location, h = { from: r.from, to: r.to }, f = r.to - r.from, p = Ee(this.wrapper, "width").width / (o.length - 1), m = Math.round(u / p), s && (Ie(s, "k-selection k-selection-bg") ? (r.from = Math.min(Math.max(c, a - m), d - f), r.to = Math.min(r.from + f, d)) : Ie(s, "k-left-handle") ? (r.from = Math.min(Math.max(c, a - m), d - 1), r.to = Math.max(r.from + 1, r.to)) : Ie(s, "k-right-handle") && (r.to = Math.min(Math.max(c + 1, l - m), d), r.from = Math.min(r.to - 1, r.from)), r.from === h.from && r.to === h.to || (this.move(r.from, r.to), this.trigger(Zt, this._rangeEventArgs(r))))) }, _end: function () { var e, t; this._state && ((e = this._state.moveTarget) && F.removeClass(e, "k-handle-active"), t = this._state.range, this.set(t.from, t.to), this.trigger(Jt, this._rangeEventArgs(t)), delete this._state) }, _tap: function (e) { var t = this.options, i = this.categoryAxis, n = this.chart._eventCoordinates(e), o = i.pointCategoryIndex(new ne(n.x, i.box.y1)), r = this._index(t.from), s = this._index(t.to), a = this._index(t.min), l = this._index(t.max), c = s - r, d = r + c / 2, u = {}, h = 3 === e.event.which, f = Math.round(d - o); this._state || h || (this.chart._unsetActivePoint(), i.options.justified || f--, u.from = Math.min(Math.max(a, r - f), l - c), u.to = Math.min(u.from + c, l), this._start(e), this._state && (this._state.range = u, this.trigger(Zt, this._rangeEventArgs(u)), this._end())) }, _mousewheel: function (e) { var t, i = this, n = F.mousewheelDelta(e); this._start({ target: this.selection }), this._state && (t = this._state.range, e.preventDefault(), e.stopPropagation(), Math.abs(n) > 1 && (n *= 3), this.options.mousewheel.reverse && (n *= -1), this.expand(n) && this.trigger(Zt, { axis: this.categoryAxis.options, delta: n, originalEvent: e, from: this._value(t.from), to: this._value(t.to) }), this._mwTimeout && clearTimeout(this._mwTimeout), this._mwTimeout = setTimeout(function () { i._end() }, 150)) }, _gesturestart: function (e) { var t, i = this.options; this._state = { range: { from: this._index(i.from), to: this._index(i.to) } }, t = this._rangeEventArgs(this._state.range), this.trigger(Xt, t) ? this._state = null : e.preventDefault() }, _gestureend: function () { this._state && (this.trigger(Jt, this._rangeEventArgs(this._state.range)), delete this._state) }, _gesturechange: function (e) { var t = this, i = t.chart, n = t._state, o = t.options, r = t.categoryAxis, s = n.range, a = i._toModelCoordinates(e.touches[0].x.location).x, l = i._toModelCoordinates(e.touches[1].x.location).x, c = Math.min(a, l), d = Math.max(a, l); e.preventDefault(), s.from = r.pointCategoryIndex(new ne(c)) || o.min, s.to = r.pointCategoryIndex(new ne(d)) || o.max, this.move(s.from, s.to), this.trigger(Zt, this._rangeEventArgs(s)) }, _index: function (e) { var t = e; return e instanceof Date && (t = this.categoryAxis.categoryIndex(e)), t }, _value: function (e) { var t = this.categoryAxis.options.categories, i = e; return this._dateAxis && (i = e > t.length - 1 ? this.options.max : t[Math.ceil(e)]), i }, _slot: function (e) { var t = this.categoryAxis, i = this._index(e); return t.getSlot(i, i, !0) }, move: function (e, t) { var i, n, o = this.options, r = o.offset, s = o.padding, a = o.selection.border, l = this._slot(e), c = Te(l.x1 - r.left + s.left); Ee(this.leftMask, { width: c }), Ee(this.selection, { left: c }), l = this._slot(t), i = Te(o.width - (l.x1 - r.left + s.left)), Ee(this.rightMask, { width: i }), (n = o.width - i) !== o.width && (n += a.right), Ee(this.rightMask, { left: n }), Ee(this.selection, { width: Math.max(o.width - (c + i) - a.right, 0) }) }, set: function (e, t) { var i = this.options, n = this._index(i.min), o = this._index(i.max), r = _e(this._index(e), n, o), s = _e(this._index(t), r + 1, o); i.visible && this.move(r, s), i.from = this._value(r), i.to = this._value(s) }, expand: function (e) { var t = this.options, i = this._index(t.min), n = this._index(t.max), o = t.mousewheel.zoom, r = this._index(t.from), s = this._index(t.to), a = { from: r, to: s }, l = ue({}, a); if (this._state && (a = this._state.range), o !== Y && (a.from = _e(_e(r - e, 0, s - 1), i, n)), o !== W && (a.to = _e(_e(s + e, a.from + 1, n), i, n)), a.from !== l.from || a.to !== l.to) return this.set(a.from, a.to), !0 }, getValueAxis: function (e) { var t, i, n = e.pane.axes, o = n.length; for (t = 0; t < o; t++)if ((i = n[t]).options.vertical !== e.options.vertical) return i }, trigger: function (e, t) { return (this.observer || this.chart).trigger(e, t) } }), se(wn, { visible: !0, mousewheel: { zoom: "both" }, min: H, max: L }), yn = Gi.extend({ show: function (e) { var t, i; !e || !e.tooltipAnchor || this._current && this._current === e || (t = ue({}, this.options, e.options.tooltip), (i = e.tooltipAnchor()) ? (this._current = e, Gi.fn.show.call(this, { point: e, anchor: i }, t, e)) : this.hide()) }, hide: function () { delete this._current, Gi.fn.hide.call(this) } }), kn = Gi.extend({ init: function (e, t) { Gi.fn.init.call(this, e.chartService, t), this.plotArea = e, this.formatService = e.chartService.format }, showAt: function (e, t) { var i, n, o, r = De(e, function (e) { var t = e.series.tooltip, i = t && !1 === t.visible; return !i }); r.length > 0 && (i = r[0], n = this.plotArea.categoryAxis.getSlot(i.categoryIx), o = t ? this._slotAnchor(t, n) : this._defaultAnchor(i, n), this.show({ anchor: o, shared: !0, points: e, category: i.category, categoryText: this.formatService.auto(this.options.categoryFormat, i.category), series: this.plotArea.series }, this.options)) }, _slotAnchor: function (e, t) { var i = this.plotArea.categoryAxis; return i.options.vertical || (e.x = t.center().x), { point: e, align: { horizontal: "left", vertical: "center" } } }, _defaultAnchor: function (e, t) { var i = e.owner.pane.chartsBox(), n = this.plotArea.categoryAxis.options.vertical, o = i.center(), r = t.center(); return { point: n ? new ne(o.x, r.y) : new ne(r.x, o.y), align: { horizontal: "center", vertical: "center" } } } }), se(kn, { categoryFormat: "{0:d}" }), xn = Be.extend({ setup: function () { var e, t, i = this.element, n = this.options, o = i.bbox(); o ? (this.origin = n.origin, e = n.vertical ? G : $, (t = this.fromScale = new Ve(1, 1))[e] = Je, i.transform(Ue().scale(t.x, t.y))) : this.abort() }, step: function (e) { var t = F.interpolateValue(this.fromScale.x, 1, e), i = F.interpolateValue(this.fromScale.y, 1, e); this.element.transform(Ue().scale(t, i, this.origin)) }, abort: function () { Be.fn.abort.call(this), this.element.transform(null) } }), se(xn, { duration: Xe }), Le.current.register(ut, xn), Cn = Be.extend({ setup: function () { var e = this.center = this.element.bbox().center(); this.element.transform(Ue().scale(Je, Je, e)) }, step: function (e) { this.element.transform(Ue().scale(e, e, this.center)) } }), se(Cn, { easing: "easeOutElastic" }), Le.current.register(ft, Cn), Sn = Be.extend({ setup: function () { this.fadeTo = this.element.opacity(), this.element.opacity(0) }, step: function (e) { this.element.opacity(e * this.fadeTo) } }), se(Sn, { duration: 200, easing: "linear" }), Le.current.register(Ze, Sn), Tn = Be.extend({ setup: function () { this.element.transform(Ue().scale(Je, Je, this.options.center)) }, step: function (e) { this.element.transform(Ue().scale(e, e, this.options.center)) } }), se(Tn, { easing: "easeOutElastic", duration: Xe }), Le.current.register(kt, Tn), Dn = Oi.extend({ render: function () { Oi.fn.render.call(this), this.renderSegments() }, createSegment: function (e, t, i) { var n = t.style; return new (n === lt ? _i : gi)(e, t, i) }, animationPoints: function () { var e = Oi.fn.animationPoints.call(this); return e.concat(this._segments) }, createMissingValue: function (e, t) { if (t === st) { var i = { x: e.x, y: e.y }; return l(i.x) || (i.x = 0), l(i.y) || (i.y = 0), i } } }), ue(Dn.prototype, bi), An = Zi.extend({ initFields: function () { this.namedXAxes = {}, this.namedYAxes = {}, this.xAxisRangeTracker = new Ai, this.yAxisRangeTracker = new Ai }, render: function (e) { var t, i, n, o, r, s = this; for (void 0 === e && (e = this.panes), t = this.groupSeriesByPane(), i = 0; i < e.length; i++)n = e[i], o = t[n.options.name || "default"] || [], s.addToLegend(o), (r = s.filterVisibleSeries(o)) && (s.createScatterChart(h(r, Mt), n), s.createScatterLineChart(h(r, Rt), n), s.createBubbleChart(h(r, ft), n)); this.createAxes(e) }, appendChart: function (e, t) { this.xAxisRangeTracker.update(e.xAxisRanges), this.yAxisRangeTracker.update(e.yAxisRanges), Zi.fn.appendChart.call(this, e, t) }, removeAxis: function (e) { var t = e.options.name; Zi.fn.removeAxis.call(this, e), e.options.vertical ? (this.yAxisRangeTracker.reset(t), delete this.namedYAxes[t]) : (this.xAxisRangeTracker.reset(t), delete this.namedXAxes[t]), e === this.axisX && delete this.axisX, e === this.axisY && delete this.axisY }, seriesPaneName: function (e) { var t = this.options, i = e.xAxis, n = [].concat(t.xAxis), o = De(n, function (e) { return e.name === i })[0], r = e.yAxis, s = [].concat(t.yAxis), a = De(s, function (e) { return e.name === r })[0], l = t.panes || [{}], c = l[0].name || "default", d = (o || {}).pane || (a || {}).pane || c; return d }, createScatterChart: function (e, t) { e.length > 0 && this.appendChart(new Oi(this, { series: e, clip: t.options.clip }), t) }, createScatterLineChart: function (e, t) { e.length > 0 && this.appendChart(new Dn(this, { series: e, clip: t.options.clip }), t) }, createBubbleChart: function (e, t) { e.length > 0 && this.appendChart(new Ui(this, { series: e, clip: t.options.clip }), t) }, createXYAxis: function (e, t, i) { var n, o, r, s, a, l, c, d, u = e.name, h = t ? this.namedYAxes : this.namedXAxes, p = t ? this.yAxisRangeTracker : this.xAxisRangeTracker, m = ue({}, e, { vertical: t }), g = f(m.type, ii), v = p.query(), _ = g ? { min: .1, max: 1 } : { min: 0, max: 1 }, b = p.query(u) || v || _, w = [m.min, m.max], y = this.series; for (n = 0; n < y.length; n++)if (o = y[n], (r = o[t ? "yAxis" : "xAxis"]) === m.name || 0 === i && !r) { s = Ge.current.bindPoint(o, 0).valueFields, w.push(s[t ? "y" : "x"]); break } for (0 === i && v && (b.min = Math.min(b.min, v.min), b.max = Math.max(b.max, v.max)), l = 0; l < w.length; l++)if (w[l] instanceof Date) { a = !0; break } if (c = f(m.type, Q) || !m.type && a ? F.DateValueAxis : g ? F.LogarithmicAxis : F.NumericAxis, (d = new c(b.min, b.max, m, this.chartService)).axisIndex = i, u) { if (h[u]) throw Error((t ? "Y" : "X") + " axis with name " + u + " is already defined"); h[u] = d } return this.appendAxis(d), d }, createAxes: function (e) { var t, i, n, o, r = this, s = this.options, a = [].concat(s.xAxis), l = [], c = [].concat(s.yAxis), d = []; for (t = 0; t < a.length; t++)i = r.findPane(a[t].pane), ae(i, e) && l.push(r.createXYAxis(a[t], !1, t)); for (n = 0; n < c.length; n++)o = r.findPane(c[n].pane), ae(o, e) && d.push(r.createXYAxis(c[n], !0, n)); this.axisX = this.axisX || l[0], this.axisY = this.axisY || d[0] }, _dispatchEvent: function (e, t, i) { var n, o, r, s, a = e._eventCoordinates(t), l = new ne(a.x, a.y), c = this.axes, d = c.length, u = [], h = []; for (n = 0; n < d; n++)o = c[n], r = o.options.vertical ? h : u, null !== (s = o.getValue(l)) && r.push(s); u.length > 0 && h.length > 0 && e.trigger(i, { element: he(t), originalEvent: t, x: g(u), y: g(h) }) }, updateAxisOptions: function (e, t) { var i = e.options.vertical, n = this.groupAxes(this.panes), o = (i ? n.y : n.x).indexOf(e), r = [].concat(i ? this.options.yAxis : this.options.xAxis)[o]; ue(r, t) } }), se(An, { xAxis: {}, yAxis: {} }), ue(An.prototype, Ji), En = ie.extend({ init: function (e, t, i) { ie.fn.init.call(this, i), this.value = e, this.sector = t }, render: function () { var e, t, i, n = this.options.labels, o = this.owner.chartService, r = this.value; this._rendered || !1 === this.visible || (this._rendered = !0, n.template ? (e = pe.compile(n.template), r = e({ dataItem: this.dataItem, category: this.category, value: this.value, series: this.series, percentage: this.percentage })) : n.format && (r = o.format.auto(n.format, r)), n.visible && r && (n.position === O || n.position === oi ? (n.color || (t = new Ne(this.options.color).percBrightness(), n.color = t > 180 ? K : q), n.background || (n.background = this.options.color)) : (i = o.theme.seriesDefaults.labels, n.color = n.color || i.color, n.background = n.background || i.background), this.label = new me(r, ue({}, n, { align: O, vAlign: "", animation: { type: Ze, delay: this.animationDelay } })), this.append(this.label))) }, reflow: function (e) { this.render(), this.box = e, this.reflowLabel() }, reflowLabel: function () { var e, t, i, n, o = this.options.labels, r = this.label, s = this.sector.clone(), a = o.distance, l = s.middle(); r && (e = r.box.height(), t = r.box.width(), o.position === O ? (s.radius = Math.abs((s.radius - e) / 2) + e, i = s.point(l), r.reflow(new oe(i.x, i.y - e / 2, i.x, i.y))) : o.position === oi ? (s.radius = s.radius - e / 2, i = s.point(l), r.reflow(new oe(i.x, i.y - e / 2, i.x, i.y))) : ((i = s.clone().expand(a).point(l)).x >= s.center.x ? (n = i.x + t, r.orientation = Y) : (n = i.x - t, r.orientation = W), r.reflow(new oe(n, i.y - e, i.x, i.y)))) }, createVisual: function () { var e, t, i = this, n = this.sector, o = this.options; ie.fn.createVisual.call(this), this.value && (o.visual ? (e = (n.startAngle + 180) % 360, (t = o.visual({ category: this.category, dataItem: this.dataItem, value: this.value, series: this.series, percentage: this.percentage, center: new Ve(n.center.x, n.center.y), radius: n.radius, innerRadius: n.innerRadius, startAngle: e, endAngle: e + n.angle, options: o, sender: this.getSender(), createVisual: function () { var e = new He; return i.createSegmentVisual(e), e } })) && this.visual.append(t)) : this.createSegmentVisual(this.visual)) }, createSegmentVisual: function (e) { var t = this.sector, i = this.options, n = i.border || {}, o = n.width > 0 ? { stroke: { color: n.color, width: n.width, opacity: n.opacity, dashType: n.dashType } } : {}, r = i.color, a = { color: r, opacity: i.opacity }, l = this.createSegment(t, ue({ fill: a, stroke: { opacity: i.opacity }, zIndex: i.zIndex }, o)); e.append(l), s(i) && e.append(this.createGradientOverlay(l, { baseColor: r, fallbackFill: a }, ue({ center: [t.center.x, t.center.y], innerRadius: t.innerRadius, radius: t.radius, userSpace: !0 }, i.overlay))) }, createSegment: function (e, t) { return t.singleSegment ? new ze.Circle(new Oe.Circle(new Ve(e.center.x, e.center.y), e.radius), t) : F.ShapeBuilder.current.createRing(e, t) }, createAnimation: function () { var e = this.options, t = this.sector.center; ue(e, { animation: { center: [t.x, t.y], delay: this.animationDelay } }), ie.fn.createAnimation.call(this) }, createHighlight: function (e) { var t = this.options.highlight || {}, i = t.border || {}; return this.createSegment(this.sector, ue({}, e, { fill: { color: t.color, opacity: t.opacity }, stroke: { opacity: i.opacity, width: i.width, color: i.color } })) }, highlightVisual: function () { return this.visual.children[0] }, highlightVisualArgs: function () { var e = this.sector; return { options: this.options, radius: e.radius, innerRadius: e.innerRadius, center: new Ve(e.center.x, e.center.y), startAngle: e.startAngle, endAngle: e.angle + e.startAngle, visual: this.visual } }, tooltipAnchor: function () { var e = this.sector.clone().expand(5), t = e.middle(), i = e.point(t); return { point: i, align: function (e) { var t, i, n = F.rad(e), o = Te(Math.sin(n), X), r = Te(Math.cos(n), X); return t = Math.abs(o) > Mn ? O : r < 0 ? Y : W, i = Math.abs(o) < In ? O : o < 0 ? U : V, { horizontal: t, vertical: i } }(t + 180) } }, formatValue: function (e) { return this.owner.formatPointValue(this, e) } }), In = Te(F.rad(30), X), Mn = Te(F.rad(60), X), se(En, { color: q, overlay: { gradient: "roundedBevel" }, border: { width: .5 }, labels: { visible: !1, distance: 35, font: B.DEFAULT_FONT, margin: ve(.5), align: j, zIndex: 1, position: si }, animation: { type: kt }, highlight: { visible: !0, border: { width: 1 } }, visible: !0 }), ue(En.prototype, fi), Rn = { createLegendItem: function (e, t, i) { var n, o, r, s, a, l = this.options.legend || {}, c = l.labels || {}, d = l.inactiveItems || {}, u = d.labels || {}; i && !1 !== i.visibleInLegend && (n = !1 !== i.visible, o = n ? c.template : u.template || c.template, r = i.category || "", o && (r = pe.compile(o)({ text: r, series: i.series, dataItem: i.dataItem, percentage: i.percentage, value: e })), n ? (s = {}, a = t.color) : (s = { color: u.color, font: u.font }, a = (d.markers || {}).color), r && this.legendItems.push({ pointIndex: i.index, text: r, series: i.series, markerColor: a, labels: s })) } }, Fn = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.plotArea = e, this.chartService = e.chartService, this.points = [], this.legendItems = [], this.render() }, render: function () { this.traverseDataPoints(this.addValue.bind(this)) }, traverseDataPoints: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _ = this.options, b = this.plotArea.options.seriesColors; for (void 0 === b && (b = []), t = b.length, i = _.series, n = i.length, o = 0; o < n; o++)for (r = i[o], s = r.data, a = T(r), l = 360 / a, c = void 0, c = J(r.startAngle) ? r.startAngle : _.startAngle, o !== n - 1 && r.labels.position === si && (r.labels.position = O), d = 0; d < s.length; d++)u = Ge.current.bindPoint(r, d), h = u.valueFields.value, f = Math.abs(h), p = u.fields, m = f * l, g = 1 !== s.length && !!p.explode, le(r.color) || (r.color = p.color || b[d % t]), v = S(r, p, d), e(h, new F.Ring(null, 0, 0, c, m), { owner: this, category: p.category || "", index: d, series: r, seriesIx: o, dataItem: s[d], percentage: 0 !== a ? f / a : 0, explode: g, visibleInLegend: p.visibleInLegend, visible: v, zIndex: n - o, animationDelay: this.animationDelay(d, o, n) }), !1 !== v && (c += m) }, evalSegmentOptions: function (e, t, i) { var o = i.series; n(e, { value: t, series: o, dataItem: i.dataItem, category: i.category, percentage: i.percentage }, { defaults: o._defaults, excluded: ["data", "template", "visual", "toggle"] }) }, addValue: function (t, i, n) { var o, r = ue({}, n.series, { index: n.index }); this.evalSegmentOptions(r, t, n), this.createLegendItem(t, r, n), !1 !== n.visible && (o = new En(t, i, r), e.extend(o, n), this.append(o), this.points.push(o)) }, reflow: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y = this, k = y.options, x = y.points, C = y.seriesConfigs; for (void 0 === C && (C = []), t = x.length, i = e.clone(), 5, n = Math.min(i.width(), i.height()), o = n / 2, r = n - .85 * n, s = new oe(i.x1, i.y1, i.x1 + n, i.y1 + n), a = s.center(), l = i.center(), c = k.series.length, d = [], u = [], h = (h = ce(k.padding, r)) > o - 5 ? o - 5 : h, s.translate(l.x - a.x, l.y - a.y), p = new ne((f = o - h) + s.x1 + h, f + s.y1 + h), m = 0; m < t; m++)g = x[m], v = g.sector, _ = g.seriesIx, v.radius = f, v.center = p, C.length && (b = C[_], v.innerRadius = b.innerRadius, v.radius = b.radius), _ === c - 1 && g.explode && (v.center = v.clone().setRadius(.15 * v.radius).point(v.middle())), g.reflow(s), (w = g.label) && w.options.position === si && _ === c - 1 && (w.orientation === Y ? u.push(w) : d.push(w)); d.length > 0 && (d.sort(this.labelComparator(!0)), this.leftLabelsReflow(d)), u.length > 0 && (u.sort(this.labelComparator(!1)), this.rightLabelsReflow(u)), this.box = s }, leftLabelsReflow: function (e) { var t = this.distanceBetweenLabels(e); this.distributeLabels(t, e) }, rightLabelsReflow: function (e) { var t = this.distanceBetweenLabels(e); this.distributeLabels(t, e) }, distanceBetweenLabels: function (e) { var t, i, n = be(this.points), o = n.sector, r = e.length - 1, s = o.radius + n.options.labels.distance, a = [], l = e[0].box, c = Te(l.y1 - (o.center.y - s - l.height() - l.height() / 2)); for (a.push(c), t = 0; t < r; t++)i = e[t + 1].box, l = e[t].box, c = Te(i.y1 - l.y2), a.push(c); return c = Te(o.center.y + s - e[r].box.y2 - e[r].box.height() / 2), a.push(c), a }, distributeLabels: function (e, t) { var i, n, o, r, s = e.length; for (r = 0; r < s; r++)for (o = -e[r], i = n = r; o > 0 && (i >= 0 || n < s);)o = this._takeDistance(e, r, --i, o), o = this._takeDistance(e, r, ++n, o); this.reflowLabels(e, t) }, _takeDistance: function (e, t, i, n) { var o, r = n; return e[i] > 0 && (o = Math.min(e[i], r), r -= o, e[i] -= o, e[t] += o), r }, reflowLabels: function (e, t) { var i, n, o, r, s = be(this.points), a = s.sector, l = s.options.labels, c = t.length, d = l.distance, u = a.center.y - (a.radius + d) - t[0].box.height(); for (e[0] += 2, n = 0; n < c; n++)o = t[n], r = o.box, u += e[n], i = this.hAlignLabel(r.x2, a.clone().expand(d), u, u + r.height(), o.orientation === Y), o.orientation === Y ? (l.align !== j && (i = a.radius + a.center.x + d), o.reflow(new oe(i + r.width(), u, i, u))) : (l.align !== j && (i = a.center.x - a.radius - d), o.reflow(new oe(i - r.width(), u, i, u))), u += r.height() }, createVisual: function () { var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p = this, m = this.options.connectors, g = this.points, v = g.length; for (ie.fn.createVisual.call(this), this._connectorLines = [], e = 0; e < v; e++)t = g[e], i = t.sector, n = t.label, o = i.middle(), r = (t.options.connectors || {}).color || m.color, n && (s = new Pe({ stroke: { color: r, width: m.width }, animation: { type: Ze, delay: t.animationDelay } }), n.options.position === si && 0 !== t.value && (a = n.box, l = i.center, c = i.point(o), d = new ne(a.x1, a.center().y), u = void 0, h = void 0, f = void 0, c = i.clone().expand(m.padding).point(o), s.moveTo(c.x, c.y), n.orientation === Y ? (h = new ne(a.x1 - m.padding, a.center().y), f = D(l, c, d, h), d = new ne(h.x - 4, h.y), (f = f || d).x = Math.min(f.x, d.x), p.pointInCircle(f, i.center, i.radius + 4) || f.x < i.center.x ? (u = i.center.x + i.radius + 4, t.options.labels.align !== gt ? u < d.x ? s.lineTo(u, c.y) : s.lineTo(c.x + 8, c.y) : s.lineTo(u, c.y), s.lineTo(d.x, h.y)) : (f.y = h.y, s.lineTo(f.x, f.y))) : (h = new ne(a.x2 + m.padding, a.center().y), f = D(l, c, d, h), d = new ne(h.x + 4, h.y), (f = f || d).x = Math.max(f.x, d.x), p.pointInCircle(f, i.center, i.radius + 4) || f.x > i.center.x ? (u = i.center.x - i.radius - 4, t.options.labels.align !== gt ? u > d.x ? s.lineTo(u, c.y) : s.lineTo(c.x - 8, c.y) : s.lineTo(u, c.y), s.lineTo(d.x, h.y)) : (f.y = h.y, s.lineTo(f.x, f.y))), s.lineTo(h.x, h.y), p._connectorLines.push(s), p.visual.append(s))) }, labelComparator: function (e) { var t = e ? -1 : 1; return function (e, i) { var n = (e.parent.sector.middle() + 270) % 360, o = (i.parent.sector.middle() + 270) % 360; return (n - o) * t } }, hAlignLabel: function (e, t, i, n, o) { var r = t.radius, s = t.center, a = s.x, l = s.y, c = Math.min(Math.abs(l - i), Math.abs(l - n)); return c > r ? e : a + Math.sqrt(r * r - c * c) * (o ? 1 : -1) }, pointInCircle: function (e, t, i) { return Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2) < Math.pow(i, 2) }, formatPointValue: function (e, t) { return this.chartService.format.auto(t, e.value) }, animationDelay: function (e) { return 70 * e } }), se(Fn, { startAngle: 90, connectors: { width: 2, color: "#939393", padding: 8 }, inactiveItems: { markers: {}, labels: {} } }), ue(Fn.prototype, Rn), zn = Zi.extend({ render: function () { this.createPieChart(this.series) }, createPieChart: function (e) { var t = e[0], i = new Fn(this, { series: e, padding: t.padding, startAngle: t.startAngle, connectors: t.connectors, legend: this.options.legend }); this.appendChart(i) }, appendChart: function (e, t) { Zi.fn.appendChart.call(this, e, t), we(this.options.legend.items, e.legendItems) } }), Pn = En.extend({ reflowLabel: function () { var e, t, i = this.options.labels, n = this.label, o = this.sector.clone(), r = o.middle(); n && (e = n.box.height(), i.position === O ? (o.radius -= (o.radius - o.innerRadius) / 2, t = o.point(r), n.reflow(new oe(t.x, t.y - e / 2, t.x, t.y))) : En.fn.reflowLabel.call(this)) }, createSegment: function (e, t) { return F.ShapeBuilder.current.createRing(e, t) } }), se(Pn, { overlay: { gradient: "roundedGlass" }, labels: { position: O }, animation: { type: kt } }), ue(Pn.prototype, fi), Bn = Fn.extend({ addValue: function (t, i, n) { var o, r = ue({}, n.series, { index: n.index }); this.evalSegmentOptions(r, t, n), this.createLegendItem(t, r, n), t && !1 !== n.visible && (o = new Pn(t, i, r), e.extend(o, n), this.append(o), this.points.push(o)) }, reflow: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h = this.options, f = e.clone(), p = Math.min(f.width(), f.height()), m = p / 2, g = p - .85 * p, v = h.series, _ = v.length, b = ce(h.padding, g); for (t = m - (b = b > m - 5 ? m - 5 : b), i = 0, o = 0; o < _; o++)r = v[o], 0 === o && J(r.holeSize) && (n = r.holeSize, t -= r.holeSize), J(r.size) ? t -= r.size : i++, J(r.margin) && o !== _ - 1 && (t -= r.margin); for (J(n) || (t -= n = .75 * ((m - b) / (_ + .75))), s = n, a = 0, this.seriesConfigs = [], d = 0; d < _; d++)u = v[d], l = ce(u.size, t / i), c = (s += a) + l, this.seriesConfigs.push({ innerRadius: s, radius: c }), a = u.margin || 0, s = c; Fn.fn.reflow.call(this, e) }, animationDelay: function (e, t, i) { return 50 * e + Xe * (t + 1) / (i + 1) } }), se(Bn, { startAngle: 90, connectors: { width: 2, color: "#939393", padding: 8 } }), Ln = zn.extend({ render: function () { this.createDonutChart(this.series) }, createDonutChart: function (e) { var t = e[0], i = new Bn(this, { series: e, padding: t.padding, connectors: t.connectors, legend: this.options.legend }); this.appendChart(i) } }), Hn = Zi.extend({ initFields: function () { this.valueAxisRangeTracker = new Ai }, render: function () { this.addToLegend(this.series), this.createPolarAxis(), this.createCharts(), this.createValueAxis() }, alignAxes: function () { var e = this.valueAxis, t = e.range(), i = e.options.reverse ? t.max : t.min, n = e.getSlot(i), o = this.polarAxis.getSlot(0).center, r = e.box.translate(o.x - n.x1, o.y - n.y1); e.reflow(r) }, createValueAxis: function () { var e, t, i, n, o = this.valueAxisRangeTracker, r = o.query(), s = this.valueAxisOptions({ roundToMajorUnit: !1, zIndex: -1 }); s.type === ii ? (e = F.RadarLogarithmicAxis, t = { min: .1, max: 1 }) : (e = F.RadarNumericAxis, t = { min: 0, max: 1 }), (i = o.query(name) || r || t) && r && (i.min = Math.min(i.min, r.min), i.max = Math.max(i.max, r.max)), n = new e(i.min, i.max, s, this.chartService), this.valueAxis = n, this.appendAxis(n) }, reflowAxes: function () { var e, t = this, i = t.options.plotArea, n = t.valueAxis, o = t.polarAxis, r = t.box, s = .15 * Math.min(r.width(), r.height()), a = ve(i.padding || {}, s), l = r.clone().unpad(a), c = l.clone().shrink(0, l.height() / 2); o.reflow(l), n.reflow(c), e = n.lineBox().height() - n.box.height(), n.reflow(n.box.unpad({ top: e })), this.axisBox = l, this.alignAxes(l) }, backgroundBox: function () { return this.box } }), Nn = Oi.extend({ pointSlot: function (e, t) { var i = e.center.y - t.y1, n = ne.onCircle(e.center, e.startAngle, i); return new oe(n.x, n.y, n.x, n.y) } }), se(Nn, { clip: !1 }), (On = Dn.extend({})).prototype.pointSlot = Nn.prototype.pointSlot, se(On, { clip: !1 }), Vn = Ti.extend({ closeFill: function (e) { var t = this._polarAxisCenter(); e.lineTo(t.x, t.y) }, _polarAxisCenter: function () { var e = this.parent.plotArea.polarAxis, t = e.box.center(); return t }, strokeSegments: function () { var e, t, i, n = this._strokeSegments; return n || (e = this._polarAxisCenter(), t = new F.CurveProcessor(!1), (i = gi.prototype.points.call(this)).push(e), (n = this._strokeSegments = t.process(i)).pop()), n } }), Un = Ci.extend({ points: function () { var e = this.parent.plotArea.polarAxis, t = this.stackPoints, i = e.box.center(), n = gi.prototype.points.call(this, t); return n.unshift([i.x, i.y]), n.push([i.x, i.y]), n } }), Wn = On.extend({ createSegment: function (e, t, i) { var n = (t.line || {}).style; return n === lt ? new Vn(e, null, !1, t, i) : new Un(e, [], t, i) }, createMissingValue: function (e, t) { var i; return l(e.x) && t !== at && (i = { x: e.x, y: e.y }, t === st && (i.y = 0)), i }, seriesMissingValues: function (e) { return e.missingValues || st }, _hasMissingValuesGap: function () { var e, t = this.options.series; for (e = 0; e < t.length; e++)if ("gap" === this.seriesMissingValues(t[e])) return !0 }, sortPoints: function (e) { var t, i; if (e.sort(A), this._hasMissingValuesGap()) for (t = 0; t < e.length; t++)(i = e[t]) && (l(i.value.y) || "gap" !== this.seriesMissingValues(i.series) || delete e[t]); return e } }), qn = Hn.extend({ createPolarAxis: function () { var e = new F.PolarAxis(this.options.xAxis, this.chartService); this.polarAxis = e, this.axisX = e, this.appendAxis(e) }, valueAxisOptions: function (e) { return ue(e, { majorGridLines: { type: Z }, minorGridLines: { type: Z } }, this.options.yAxis) }, createValueAxis: function () { Hn.fn.createValueAxis.call(this), this.axisY = this.valueAxis }, appendChart: function (e, t) { this.valueAxisRangeTracker.update(e.yAxisRanges), Zi.prototype.appendChart.call(this, e, t) }, createCharts: function () { var e = this.filterVisibleSeries(this.series), t = this.panes[0]; this.createLineChart(h(e, [Ct]), t), this.createScatterChart(h(e, [St]), t), this.createAreaChart(h(e, [xt]), t) }, createLineChart: function (e, t) { if (0 !== e.length) { var i = new On(this, { series: e }); this.appendChart(i, t) } }, createScatterChart: function (e, t) { if (0 !== e.length) { var i = new Nn(this, { series: e }); this.appendChart(i, t) } }, createAreaChart: function (e, t) { if (0 !== e.length) { var i = new Wn(this, { series: e }); this.appendChart(i, t) } }, _dispatchEvent: function (e, t, i) { var n = e._eventCoordinates(t), o = new ne(n.x, n.y), r = this.axisX.getValue(o), s = this.axisY.getValue(o); null !== r && null !== s && e.trigger(i, { element: he(t), x: r, y: s }) }, createCrosshairs: function () { } }), se(qn, { xAxis: {}, yAxis: {} }), ue(qn.prototype, Ji), jn = ki.extend({ pointSlot: function (e, t) { var i = e.center.y - t.y1, n = ne.onCircle(e.center, e.middle(), i); return new oe(n.x, n.y, n.x, n.y) }, createSegment: function (e, t, i) { var n, o = t.style; return n = new (o === lt ? _i : gi)(e, t, i), e.length === t.data.length && (n.options.closed = !0), n } }), se(jn, { clip: !1 }), Gn = Ti.extend({ closeFill: function () { } }), $n = Ci.extend({ points: function () { return gi.prototype.points.call(this, this.stackPoints) } }), Yn = jn.extend({ createSegment: function (e, t, i, n) { var o, r, s = this.options.isStacked, a = (t.line || {}).style; return a === lt ? (o = new Gn(e, n, s, t, i)).options.closed = !0 : (s && i > 0 && n && (r = n.linePoints.slice(0).reverse()), e.push(e[0]), o = new $n(e, r, t, i)), o }, seriesMissingValues: function (e) { return e.missingValues || st } }), Kn = Pn.extend({ init: function (e, t) { Pn.fn.init.call(this, e, null, t) } }), se(Kn, { overlay: { gradient: "none" }, labels: { distance: 10 } }), Qn = ie.extend({ reflow: function (e) { var t, i, n = this.options, o = this.children, r = n.gap, s = n.spacing, a = o.length, l = a + r + s * (a - 1), c = e.angle / l, d = e.startAngle + c * (r / 2); for (t = 0; t < a; t++)(i = e.clone()).startAngle = d, i.angle = c, o[t].sector && (i.radius = o[t].sector.radius), o[t].reflow(i), o[t].sector = i, d += c + c * s } }), se(Qn, { gap: 1, spacing: 0 }), Xn = ie.extend({ reflow: function (e) { var t, i, n = this.options.reverse, o = this.children, r = o.length, s = n ? r - 1 : 0, a = n ? -1 : 1; for (this.box = new oe, t = s; t >= 0 && t < r; t += a)(i = o[t].sector).startAngle = e.startAngle, i.angle = e.angle } }), (Zn = Fi.extend({ pointType: function () { return Kn }, clusterType: function () { return Qn }, stackType: function () { return Xn }, categorySlot: function (e, t) { return e.getSlot(t) }, pointSlot: function (e, t) { var i = e.clone(), n = e.center.y; return i.radius = n - t.y1, i.innerRadius = n - t.y2, i }, reflowPoint: function (e, t) { e.sector = t, e.reflow() }, createAnimation: function () { this.options.animation.center = this.box.toRect().center(), Fi.fn.createAnimation.call(this) } })).prototype.reflow = hi.prototype.reflow, se(Zn, { clip: !1, animation: { type: "pie" } }), Jn = Hn.extend({ createPolarAxis: function () { var e = new F.RadarCategoryAxis(this.options.categoryAxis, this.chartService); this.polarAxis = e, this.categoryAxis = e, this.appendAxis(e), this.aggregateCategories(), this.createCategoryAxesLabels() }, valueAxisOptions: function (e) { return this._hasBarCharts && ue(e, { majorGridLines: { type: Z }, minorGridLines: { type: Z } }), this._isStacked100 && ue(e, { roundToMajorUnit: !1, labels: { format: "P0" } }), ue(e, this.options.valueAxis) }, aggregateCategories: function () { cn.prototype.aggregateCategories.call(this, this.panes) }, createCategoryAxesLabels: function () { cn.prototype.createCategoryAxesLabels.call(this, this.panes) }, filterSeries: function (e) { return e }, createCharts: function () { var e = this.filterVisibleSeries(this.series), t = this.panes[0]; this.createAreaChart(h(e, [Tt]), t), this.createLineChart(h(e, [At]), t), this.createBarChart(h(e, [Dt]), t) }, chartOptions: function (e) { var t, i, n = { series: e }, o = e[0]; return o && (t = this.filterVisibleSeries(e), i = o.stack, n.isStacked = i && t.length > 1, n.isStacked100 = i && "100%" === i.type && t.length > 1, n.isStacked100 && (this._isStacked100 = !0)), n }, createAreaChart: function (e, t) { if (0 !== e.length) { var i = new Yn(this, this.chartOptions(e)); this.appendChart(i, t) } }, createLineChart: function (e, t) { if (0 !== e.length) { var i = new jn(this, this.chartOptions(e)); this.appendChart(i, t) } }, createBarChart: function (e, t) { var i, n, o; 0 !== e.length && (i = e[0], (n = this.chartOptions(e)).gap = i.gap, n.spacing = i.spacing, o = new Zn(this, n), this.appendChart(o, t), this._hasBarCharts = !0) }, seriesCategoryAxis: function () { return this.categoryAxis }, _dispatchEvent: function (e, t, i) { var n = e._eventCoordinates(t), o = new ne(n.x, n.y), r = this.categoryAxis.getCategory(o), s = this.valueAxis.getValue(o); null !== r && null !== s && e.trigger(i, { element: he(t), category: r, value: s }) }, createCrosshairs: function () { } }), ue(Jn.prototype, Ji, { appendChart: cn.prototype.appendChart, aggregateSeries: cn.prototype.aggregateSeries }), se(Jn, { categoryAxis: { categories: [] }, valueAxis: {} }), eo = ie.extend({ init: function (e, t, i) { ie.fn.init.call(this, t), this.value = e, this.options.index = i.index }, reflow: function (e) { var t = this.points, i = this.children[0]; this.box = new oe(t[0].x, t[0].y, t[1].x, t[2].y), i && i.reflow(new oe(e.x1, t[0].y, e.x2, t[2].y)) }, createVisual: function () { var e, t = this, i = this.options; ie.fn.createVisual.call(this), (e = i.visual ? i.visual({ category: this.category, dataItem: this.dataItem, value: this.value, series: this.series, percentage: this.percentage, points: this.points, options: i, sender: this.getSender(), createVisual: function () { return t.createPath() } }) : this.createPath()) && this.visual.append(e) }, createPath: function () { var e = this.options, t = e.border, i = Pe.fromPoints(this.points, { fill: { color: e.color, opacity: e.opacity }, stroke: { color: t.color, opacity: t.opacity, width: t.width } }).close(); return i }, createHighlight: function (e) { return Pe.fromPoints(this.points, e) }, highlightVisual: function () { return this.visual.children[0] }, highlightVisualArgs: function () { var e = Pe.fromPoints(this.points).close(); return { options: this.options, path: e } }, tooltipAnchor: function () { var e = this.box; return { point: new ne(e.center().x, e.y1), align: { horizontal: "center", vertical: "top" } } }, formatValue: function (e) { return this.owner.formatPointValue(this, e) } }), se(eo, { color: q, border: { width: 1 } }), ue(eo.prototype, fi), to = ie.extend({ init: function (e, t) { ie.fn.init.call(this, t), this.plotArea = e, this.points = [], this.labels = [], this.legendItems = [], this.render() }, formatPointValue: function (e, t) { return this.chartService.format.auto(t, e.value) }, render: function () { var e, t, i, n, o, r, s, a, l, c, d = this, u = this.options, h = this.plotArea.options.seriesColors; if (void 0 === h && (h = []), e = u.series[0], t = e.data) for (i = T(e), n = 0; n < t.length; n++)o = Ge.current.bindPoint(e, n), null != (r = o.valueFields.value) && (s = o.fields, le(e.color) || (e.color = s.color || h[n % h.length]), a = S(e, s, n), s = ue({ index: n, owner: d, series: e, dataItem: t[n], percentage: Math.abs(r) / i }, s, { visible: a }), l = d.createSegment(r, s), c = d.createLabel(r, s), l && c && l.append(c)) }, evalSegmentOptions: function (e, t, i) { var o = i.series; n(e, { value: t, series: o, dataItem: i.dataItem, index: i.index }, { defaults: o._defaults, excluded: ["data", "toggle", "visual"] }) }, createSegment: function (t, i) { var n, o = ue({}, i.series); if (this.evalSegmentOptions(o, t, i), this.createLegendItem(t, o, i), !1 !== i.visible) return n = new eo(t, o, i), e.extend(n, i), this.append(n), this.points.push(n), n }, createLabel: function (e, t) { var i, n, o, r = t.series, s = t.dataItem, a = ue({}, this.options.labels, r.labels), l = e; if (a.visible) return a.template ? (i = pe.compile(a.template), l = i({ dataItem: s, value: e, percentage: t.percentage, category: t.category, series: r })) : a.format && (l = this.plotArea.chartService.format.auto(a.format, l)), a.color || (n = new Ne(r.color).percBrightness(), a.color = n > 180 ? K : q, a.background || (a.background = r.color)), this.evalSegmentOptions(a, e, t), o = new me(l, ue({ vAlign: a.position }, a)), this.labels.push(o), o }, labelPadding: function () { var e, t, i, n, o = this.labels, r = { left: 0, right: 0 }; for (e = 0; e < o.length; e++)t = o[e], (i = t.options.align) !== O && (n = o[e].box.width(), i === W ? r.left = Math.max(r.left, n) : r.right = Math.max(r.right, n)); return r }, dynamicSlopeReflow: function (e, t, i) { var n, o, r, s, a, l, c, d, u, h, f, p = this.options, m = this.points, g = m.length, v = m[0], _ = v; for (n = 0; n < m.length; n++)m[n].percentage > _.percentage && (_ = m[n]); for (o = v.percentage / _.percentage * t, r = (t - o) / 2, s = 0, a = 0; a < g; a++)l = m[a].percentage, c = m[a + 1], d = c ? c.percentage : l, u = m[a].points = [], h = p.dynamicHeight ? i * l : i / g, f = void 0, f = _e(f = l ? (t - o * (d / l)) / 2 : d ? 0 : t / 2, 0, t), u.push(new Ve(e.x1 + r, e.y1 + s)), u.push(new Ve(e.x1 + t - r, e.y1 + s)), u.push(new Ve(e.x1 + t - f, e.y1 + h + s)), u.push(new Ve(e.x1 + f, e.y1 + h + s)), r = f, s += h + p.segmentSpacing, o = _e(t - 2 * f, 0, t) }, constantSlopeReflow: function (e, t, i) { var n, o, r, s, a, l = this.options, c = this.points, d = c.length, u = l.neckRatio <= 1, h = u ? l.neckRatio * t : t, f = u ? 0 : (t - t / l.neckRatio) / 2, p = u ? t : t - 2 * f, m = (p - h) / 2, g = 0; for (n = 0; n < d; n++)o = c[n].points = [], r = c[n].percentage, s = l.dynamicHeight ? m * r : m / d, a = l.dynamicHeight ? i * r : i / d, o.push(new Ve(e.x1 + f, e.y1 + g)), o.push(new Ve(e.x1 + t - f, e.y1 + g)), o.push(new Ve(e.x1 + t - f - s, e.y1 + a + g)), o.push(new Ve(e.x1 + f + s, e.y1 + a + g)), f += s, g += a + l.segmentSpacing }, reflow: function (e) { var t, i, n, o, r, s = this.points, a = s.length; if (a) for (t = this.options, i = e.clone().unpad(this.labelPadding()), n = i.height() - t.segmentSpacing * (a - 1), o = i.width(), t.dynamicSlope ? this.dynamicSlopeReflow(i, o, n) : this.constantSlopeReflow(i, o, n), r = 0; r < a; r++)s[r].reflow(e) } }), se(to, { neckRatio: .3, width: 300, dynamicSlope: !1, dynamicHeight: !0, segmentSpacing: 0, labels: { visible: !1, align: O, position: O, zIndex: 1 } }), ue(to.prototype, Rn), io = Zi.extend({ render: function () { this.createFunnelChart(this.series) }, createFunnelChart: function (e) { var t = e[0], i = new to(this, { series: e, legend: this.options.legend, neckRatio: t.neckRatio, dynamicHeight: t.dynamicHeight, dynamicSlope: t.dynamicSlope, segmentSpacing: t.segmentSpacing, highlight: t.highlight }); this.appendChart(i) }, appendChart: function (e, t) { Zi.fn.appendChart.call(this, e, t), we(this.options.legend.items, e.legendItems) } }), no = "color", oo = "first", ro = "max", so = "noteText", bn.current.register(cn, [ut, gt, wt, Bt, dt, Ft, mt, yt, pt, Pt, ht, zt, It, Et, Lt, bt]), bn.current.register(An, [Mt, Rt, ft]), bn.current.register(zn, [kt]), bn.current.register(Ln, [vt]), bn.current.register(io, [_t]), bn.current.register(qn, [xt, Ct, St]), bn.current.register(Jn, [Tt, Dt, At]), Ge.current.register([ut, gt, wt, Bt, dt, Ft], [N], [ni, no, so, et, tt]), Ge.current.register([It, Et], ["from", "to"], [ni, no, so]), Ge.current.register([Lt, bt], [N], [ni, no, so, "summary"]), Ge.current.register([xt, Ct, St], [$, G], [no]), Ge.current.register([Tt, Dt, At], [N], [no]), Ge.current.register([_t], [N], [ni, no, "visibleInLegend", "visible"]), tn.current.register([ut, gt, wt, Bt, dt, Ft, Lt, bt], { value: ro, color: oo, noteText: oo, errorLow: "min", errorHigh: ro }), tn.current.register([It, Et], { from: "min", to: ro, color: oo, noteText: oo }), tn.current.register([Tt, Dt, At], { value: ro, color: oo }), Ge.current.register([Mt, Rt, ft], [$, G], [no, so, it, nt, ot, rt]), Ge.current.register([ft], [$, G, "size"], [no, ni, so]), Ge.current.register([mt, yt], ["open", "high", "low", "close"], [ni, no, "downColor", so]), tn.current.register([mt, yt], { open: ro, high: ro, low: "min", close: ro, color: oo, downColor: oo, noteText: oo }), Ge.current.register([ht, zt], ["lower", "q1", "median", "q3", "upper", "mean", "outliers"], [ni, no, so]), tn.current.register([ht, zt], { lower: ro, q1: ro, median: ro, q3: ro, upper: ro, mean: ro, outliers: oo, color: oo, noteText: oo }), Ge.current.register([pt, Pt], ["current", "target"], [ni, no, "visibleInLegend", so]), tn.current.register([pt, Pt], { current: ro, target: ro, color: oo, noteText: oo }), Ge.current.register([kt, vt], [N], [ni, no, "explode", "visibleInLegend", "visible"]), ao = [ni, N, $, G], lo = "mousemove", co = "contextmenu", uo = z.extend({ init: function (e, t, i, n) { var o, r = this; void 0 === n && (n = {}), this.observers = [], this.addObserver(n.observer), this.chartService = new fe.ChartService(this, n), this.chartService.theme = i, this._initElement(e), o = ue({}, this.options, t), this._originalOptions = ue({}, o), this._theme = i, this._initTheme(o, i), this._initSurface(), this._initHandlers(), this.bindCategories(), F.FontLoader.preloadFonts(t, function () { r._destroyed || (r._redraw(), r._attachEvents()) }) }, _initElement: function (e) { for (this._setElementClass(e), e.style.position = "relative"; e.firstChild;)e.removeChild(e.firstChild); this.element = e }, _setElementClass: function (e) { F.addClass(e, "k-chart") }, _initTheme: function (t, i) { var n, o = [], r = t.series || []; for (n = 0; n < r.length; n++)o.push(e.extend({}, r[n])); t.series = o, function (e) { var t, i, n = ao; for (t = 0; t < n.length; t++)i = n[t] + "Axes", e[i] && (e[n[t] + "Axis"] = e[i], delete e[i]) }(t), this.applyDefaults(t, i), null === t.seriesColors && delete t.seriesColors, this.options = ue({}, i, t), this.applySeriesColors() }, getSize: function () { return { width: this.element.offsetWidth, height: this.element.offsetHeight } }, resize: function (e) { var t = this.getSize(), i = this._size; (e || (t.width > 0 || t.height > 0) && (!i || t.width !== i.width || t.height !== i.height)) && (this._size = t, this._resize(t, e), this.trigger("resize", t)) }, _resize: function () { this._noTransitionsRedraw() }, redraw: function (e) { var t, i; this.applyDefaults(this.options), this.applySeriesColors(), e ? (t = this._model._plotArea, i = t.findPane(e), t.redraw(i)) : this._redraw() }, getAxis: function (e) { var t, i = this._plotArea.axes; for (t = 0; t < i.length; t++)if (i[t].options.name === e) return new We(i[t]) }, findAxisByName: function (e) { return this.getAxis(e) }, plotArea: function () { return new qe(this._plotArea) }, toggleHighlight: function (e, t) { var i, n, o, r = this._plotArea, s = (r.srcSeries || r.series || [])[0]; le(t) ? i = r.filterPoints(t) : (de(t) ? (n = t.series, o = t.category) : n = o = t, i = s.type === vt ? E(r.pointsBySeriesName(n), o) : s.type === kt || s.type === _t ? E((r.charts[0] || {}).points, o) : r.pointsBySeriesName(n)), i && this.togglePointsHighlight(e, i) }, togglePointsHighlight: function (e, t) { var i, n = this._highlight; for (i = 0; i < t.length; i++)n.togglePointHighlight(t[i], e) }, showTooltip: function (e) { var t, i, n, o = this._sharedTooltip(), r = this._tooltip, s = this._plotArea; le(e) ? (t = s.findPoint(e)) && o && (i = t.categoryIx) : o && J(e) && (i = s.categoryAxis.categoryIndex(e)), o ? i >= 0 && (n = this._plotArea.pointsByCategoryIndex(i), r.showAt(n)) : t && r.show(t) }, hideTooltip: function () { this._tooltip.hide() }, _initSurface: function () { var e = this.surface, t = this._surfaceWrap(), i = this.options.chartArea; i.width && F.elementSize(t, { width: i.width }), i.height && F.elementSize(t, { height: i.height }), e && e.options.type === this.options.renderAs ? (this.surface.clear(), this.surface.resize()) : (e && e.destroy(), this.surface = ze.Surface.create(t, { type: this.options.renderAs })) }, _surfaceWrap: function () { return this.element }, _redraw: function () { var e = this._getModel(); this._destroyView(), this._model = e, this._plotArea = e._plotArea, e.renderVisual(), !1 !== this.options.transitions && e.traverse(function (e) { e.animation && e.animation.setup() }), this._initSurface(), this.surface.draw(e.visual), !1 !== this.options.transitions && e.traverse(function (e) { e.animation && e.animation.play() }), this._tooltip = this._createTooltip(), this._highlight = new dn, this._setupSelection(), this._createPannable(), this._createZoomSelection(), this._createMousewheelZoom(), this.trigger("render"), this._navState || this._cancelDomEvents() }, exportVisual: function (e) { var t, i, n, o; return e && (e.width || e.height) ? (i = this.options.chartArea, n = this._originalOptions.chartArea, ue(i, e), o = this._getModel(), i.width = n.width, i.height = n.height, o.renderVisual(), t = o.visual) : t = this.surface.exportVisual(), t }, _sharedTooltip: function () { return this._plotArea instanceof cn && this.options.tooltip.shared }, _createPannable: function () { var e = this.options; !1 !== e.pannable && (this._pannable = new un(this._plotArea, e.pannable)) }, _createZoomSelection: function () { var e = this.options.zoomable, t = (e || {}).selection; !1 !== e && !1 !== t && (this._zoomSelection = new hn(this, t)) }, _createMousewheelZoom: function () { var e = this.options.zoomable, t = (e || {}).mousewheel; !1 !== e && !1 !== t && (this._mousewheelZoom = new fn(this, t)) }, _createTooltip: function () { var e = this.options.tooltip; return this._sharedTooltip() ? this._createSharedTooltip(e) : new yn(this.chartService, e) }, _createSharedTooltip: function (e) { return new kn(this._plotArea, e) }, applyDefaults: function (e, t) { (function (e, t) { function i(e) { var t = (e || {}).color || o.color, i = ue({}, a, a[n], o, o[n], { line: { color: t }, labels: { color: t }, title: { color: t } }, e); return delete i[n], i } var n, o, r, s, a = (t || {}).axisDefaults || {}; for (s = 0; s < ao.length; s++)n = ao[s] + "Axis", o = e.axisDefaults || {}, r = (r = [].concat(e[n])).map(i), e[n] = r.length > 1 ? r : r[0] })(e, t), function (e, t) { var i, n, o, r = e.series, s = r.length, a = e.seriesDefaults, l = ue({}, e.seriesDefaults), c = t ? ue({}, t.seriesDefaults) : {}, d = ue({}, c); for (I(l), I(d), i = 0; i < s; i++)n = r[i].type || e.seriesDefaults.type, o = ue({ data: [] }, d, c[n], { tooltip: e.tooltip }, l, a[n]), r[i]._defaults = o, r[i] = ue({}, o, r[i]) }(e, t) }, applySeriesColors: function () { var e, t, i, n, o = this.options, r = o.series, s = o.seriesColors || []; for (e = 0; e < r.length; e++)t = r[e], i = s[e % s.length], n = t._defaults, t.color = t.color || i, n && (n.color = n.color || i) }, _getModel: function () { var e = this.options, t = this._createPlotArea(), i = new F.RootElement(this._modelOptions()); return i.chart = this, i._plotArea = t, F.Title.buildTitle(e.title, i), e.legend.visible && i.append(new _n(t.options.legend, this.chartService)), i.append(t), i.reflow(), i }, _modelOptions: function () { var e = this.options, t = this.element, i = F.elementSize(t); return this._size = null, ue({ width: Math.floor(i.width) || B.DEFAULT_WIDTH, height: Math.floor(i.height) || B.DEFAULT_HEIGHT, transitions: e.transitions }, e.chartArea) }, _createPlotArea: function (e) { var t = this.options, i = bn.current.create(e ? [] : t.series, t, this.chartService); return i }, _hasSelection: function () { return this._selections && this._selections.length }, _setupSelection: function () { var e, t, i, n, o, r, s = this._plotArea.axes, a = this._selections = []; for (e = 0; e < s.length; e++)t = s[e], i = t.options, t instanceof Ce && i.select && !i.vertical && (n = 0, o = i.categories.length - 1, t instanceof Ae && (n = i.categories[n], o = i.categories[o]), i.justified || (t instanceof Ae ? o = F.addDuration(o, 1, i.baseUnit, i.weekStartDay) : o++), r = new wn(this, t, ue({ min: n, max: o }, i.select)), a.push(r)) }, _selectStart: function (e) { return this.trigger(Xt, e) }, _select: function (e) { return this.trigger(Zt, e) }, _selectEnd: function (e) { return this.trigger(Jt, e) }, _initHandlers: function () { this._clickHandler = this._click.bind(this), this._mousewheelHandler = this._mousewheel.bind(this), this._surfaceMouseenterHandler = this._mouseover.bind(this), this._surfaceMouseleaveHandler = this._mouseout.bind(this), this._mousemove = kendo.throttle(this._mousemove.bind(this), 20) }, addObserver: function (e) { e && this.observers.push(e) }, removeObserver: function (e) { var t = this.observers.indexOf(e); t >= 0 && this.observers.splice(t, 1) }, requiresHandlers: function (e) { var t, i = this.observers; for (t = 0; t < i.length; t++)if (i[t].requiresHandlers(e)) return !0 }, trigger: function (e, t) { var i, n, o; for (void 0 === t && (t = {}), e === ei && (t.anchor.point = this._toDocumentCoordinates(t.anchor.point)), t.sender = this, i = this.observers, n = !1, o = 0; o < i.length; o++)i[o].trigger(e, t) && (n = !0); return n }, _attachEvents: function () { var e, t, i = this.element, n = this.surface; n.bind("mouseenter", this._surfaceMouseenterHandler), n.bind("mouseleave", this._surfaceMouseleaveHandler), Me(i, ((e = {})[co] = this._clickHandler, e[ai] = this._mousewheelHandler, e)), this._shouldAttachMouseMove() && Me(i, ((t = {})[lo] = this._mousemove, t)), this.domEvents = fe.DomEventsBuilder.create(this.element, { start: this._start.bind(this), move: this._move.bind(this), end: this._end.bind(this), tap: this._tap.bind(this), gesturestart: this._gesturestart.bind(this), gesturechange: this._gesturechange.bind(this), gestureend: this._gestureend.bind(this) }) }, _cancelDomEvents: function () { this.domEvents && this.domEvents.cancel && this.domEvents.cancel() }, _gesturestart: function (e) { this._mousewheelZoom && !this._stopDragEvent(e) && (this._gestureDistance = e.distance, this._unsetActivePoint(), this.surface.suspendTracking()) }, _gestureend: function (e) { this._zooming && !this._stopDragEvent(e) && (this.surface && this.surface.resumeTracking(), this._zooming = !1, this.trigger(Qt, {})) }, _gesturechange: function (e) { var t, i, n, o = this._mousewheelZoom; o && !this._stopDragEvent(e) && (e.preventDefault(), t = this._gestureDistance, i = -e.distance / t + 1, Math.abs(i) >= .1 && (i = Math.round(10 * i), this._gestureDistance = e.distance, n = { delta: i, axisRanges: M(this._plotArea.axes), originalEvent: e }, !this._zooming && this.trigger(Yt, n) || (this._zooming || (this._zooming = !0), (n.axisRanges = o.updateRanges(i)) && !this.trigger(Kt, n) && o.zoom()))) }, _mouseout: function (e) { if (e.element) { var t = this._drawingChartElement(e.element, e); t && t.leave && t.leave(this, e.originalEvent) } }, _start: function (e) { var t = this._eventCoordinates(e); !this._stopDragEvent(e) && this._plotArea.backgroundContainsPoint(t) && (this.requiresHandlers([$t, jt, Gt]) && this._startNavigation(e, t, $t), this._pannable && this._pannable.start(e) && (this.surface.suspendTracking(), this._unsetActivePoint(), this._suppressHover = !0), this._zoomSelection && this._zoomSelection.start(e) && this.trigger(Yt, { axisRanges: M(this._plotArea.axes), originalEvent: e })) }, _move: function (e) { var t, i, n, o, r, s, a, l = this._navState, c = this._pannable; if (!this._stopDragEvent(e)) { if (c) (t = c.move(e)) && !this.trigger(jt, { axisRanges: t, originalEvent: e }) && c.pan(); else if (l) { for (i = {}, n = l.axes, o = 0; o < n.length; o++)r = n[o], r.options.name && (s = r.options.vertical ? e.y : e.x, 0 !== (a = s.startLocation - s.location) && (i[r.options.name] = r.translateRange(a))); l.axisRanges = i, this.trigger(jt, { axisRanges: i, originalEvent: e }) } this._zoomSelection && this._zoomSelection.move(e) } }, _end: function (e) { var t, i; this._stopDragEvent(e) || ((t = this._pannable) && t.end(e) ? (this.surface.resumeTracking(), this.trigger(Gt, { axisRanges: M(this._plotArea.axes), originalEvent: e }), this._suppressHover = !1) : this._endNavigation(e, Gt), this._zoomSelection && ((i = this._zoomSelection.end(e)) && !this.trigger(Kt, { axisRanges: i, originalEvent: e }) && (this._zoomSelection.zoom(), this.trigger(Qt, { axisRanges: i, originalEvent: e })))) }, _stopDragEvent: function () { return this._hasSelection() }, _mousewheel: function (e) { var t, i, n, o, r, s, a, l, c = this, d = F.mousewheelDelta(e), u = this._mousewheelZoom, h = this._eventCoordinates(e); if (this._plotArea.backgroundContainsPoint(h)) if (u) t = { delta: d, axisRanges: M(this._plotArea.axes), originalEvent: e }, !this._zooming && this.trigger(Yt, t) || (e.preventDefault(), this._zooming || (this._unsetActivePoint(), this.surface.suspendTracking(), this._zooming = !0), this._mwTimeout && clearTimeout(this._mwTimeout), t.axisRanges = u.updateRanges(d), t.axisRanges && !this.trigger(Kt, t) && u.zoom(), this._mwTimeout = setTimeout(function () { c.trigger(Qt, t), c._zooming = !1, c.surface && c.surface.resumeTracking() }, 150)); else if ((i = this._navState) || (this._startNavigation(e, h, Yt) || (i = this._navState)), i) { for (n = i.totalDelta || d, i.totalDelta = n + d, o = this._navState.axes, r = {}, s = 0; s < o.length; s++)a = o[s], (l = a.options.name) && (r[l] = a.scaleRange(-n)); this.trigger(Kt, { delta: d, axisRanges: r, originalEvent: e }), this._mwTimeout && clearTimeout(this._mwTimeout), this._mwTimeout = setTimeout(function () { c._endNavigation(e, Qt) }, 150) } }, _startNavigation: function (e, t, i) { var n, o = this._model._plotArea, r = o.findPointPane(t), s = o.axes.slice(0); r && (n = M(s), this.trigger(i, { axisRanges: n, originalEvent: e }) ? this._cancelDomEvents() : (this._suppressHover = !0, this._unsetActivePoint(), this._navState = { axisRanges: n, pane: r, axes: s })) }, _endNavigation: function (e, t) { this._navState && (this.trigger(t, { axisRanges: this._navState.axisRanges, originalEvent: e }), this._suppressHover = !1, this._navState = null) }, _getChartElement: function (e, t) { var i = this.surface.eventTarget(e); if (i) return this._drawingChartElement(i, e, t) }, _drawingChartElement: function (e, t, i) { for (var n, o = e; o && !n;)n = o.chartElement, o = o.parent; if (n) return n.aliasFor && (n = n.aliasFor(t, this._eventCoordinates(t))), i && (n = n.closest(i)), n }, _eventCoordinates: function (e) { var t = F.eventCoordinates(e); return this._toModelCoordinates(t.x, t.y) }, _elementPadding: function () { var e, t, i; return this._padding || (e = Ee(this.element, ["paddingLeft", "paddingTop"]), t = e.paddingLeft, i = e.paddingTop, this._padding = { top: i, left: t }), this._padding }, _toDocumentCoordinates: function (e) { var t = this._elementPadding(), i = F.elementOffset(this.element); return { left: Te(e.x + t.left + i.left), top: Te(e.y + t.top + i.top) } }, _toModelCoordinates: function (e, t) { var i = this.element, n = F.elementOffset(i), o = this._elementPadding(); return new ne(e - n.left - o.left, t - n.top - o.top) }, _tap: function (e) { var t = this, i = this.surface.eventTarget(e), n = this._drawingChartElement(i, e); this._activePoint === n ? this._propagateClick(n, e) : (this._startHover(i, e) || this._unsetActivePoint(), this._propagateClick(n, e)), this.handlingTap = !0, setTimeout(function () { t.handlingTap = !1 }, 0) }, _click: function (e) { var t = this._getChartElement(e); this._propagateClick(t, e) }, _propagateClick: function (e, t) { for (var i = e; i;)i.click && i.click(this, t), i = i.parent }, _startHover: function (e, t) { var i, n, o = this._drawingChartElement(e, t), r = this._tooltip, s = this._highlight; return !(this._suppressHover || !s || s.isHighlighted(o) || this._sharedTooltip()) && ((i = this._drawingChartElement(e, t, function (e) { return e.hover && !(e instanceof Zi) })) && !i.hover(this, t) ? (this._activePoint = i, (n = ue({}, n, i.options.tooltip)).visible && r.show(i), s.show(i), i) : void 0) }, _mouseover: function (e) { var t, i = this._startHover(e.element, e.originalEvent); i && i.tooltipTracking && (this._mouseMoveTrackHandler = this._mouseMoveTrackHandler || this._mouseMoveTracking.bind(this), Me(document, ((t = {})[lo] = this._mouseMoveTrackHandler, t))) }, _mouseMoveTracking: function (e) { var t, i, n = this, o = n.options, r = n._tooltip, s = n._highlight, a = n._activePoint, l = this._eventCoordinates(e); this._plotArea.box.containsPoint(l) ? a && a.tooltipTracking && a.series && a.parent.getNearestPoint && ((t = a.parent.getNearestPoint(l.x, l.y, a.seriesIx)) && t !== a && (t.hover(this, e), this._activePoint = t, ue({}, o.tooltip, a.options.tooltip).visible && r.show(t), s.show(t))) : (Re(document, ((i = {})[lo] = this._mouseMoveTrackHandler, i)), this._unsetActivePoint()) }, _mousemove: function (e) { var t = this._eventCoordinates(e); this._trackCrosshairs(t), this._plotArea.hover && this._plotArea.hover(this, e), this._sharedTooltip() && this._trackSharedTooltip(t, e) }, _trackCrosshairs: function (e) { var t, i, n = this._plotArea.crosshairs; for (t = 0; t < n.length; t++)(i = n[t]).box.containsPoint(e) ? i.showAt(e) : i.hide() }, _trackSharedTooltip: function (e, t) { var i, n, o, r, s = this, a = s.options.tooltip, l = s._plotArea, c = s._plotArea.categoryAxis, d = s._tooltip, u = s._highlight; l.box.containsPoint(e) && ((i = c.pointCategoryIndex(e)) !== this._tooltipCategoryIx && (n = l.pointsByCategoryIndex(i), o = n.map(function (e) { return e.eventArgs(t) }), (r = o[0] || {}).categoryPoints = o, n.length > 0 && !this.trigger(Ut, r) ? (a.visible && d.showAt(n, e), u.show(n)) : d.hide(), this._tooltipCategoryIx = i)) }, hideElements: function () { var e = this, t = e._plotArea, i = e._tooltip, n = e._highlight; this._mousemove.cancel(), t.hideCrosshairs(), n.hide(), i.hide(), delete this._tooltipCategoryIx }, _unsetActivePoint: function () { var e = this._tooltip, t = this._highlight; this._activePoint = null, e && e.hide(), t && t.hide() }, _deferRedraw: function () { this._redraw() }, _clearRedrawTimeout: function () { this._redrawTimeout && (clearInterval(this._redrawTimeout), this._redrawTimeout = null) }, bindCategories: function () { var e, t, i = this.options, n = [].concat(i.categoryAxis); for (e = 0; e < n.length; e++)!1 !== (t = n[e]).autoBind && this.bindCategoryAxisFromSeries(t, e) }, bindCategoryAxisFromSeries: function (e, t) { var n, o, r, s, a, l, c, d, u, h, f, m = this.options.series, g = m.length, _ = {}, b = []; for (o = 0; o < g; o++)if (r = m[o], s = r.categoryAxis === e.name || !r.categoryAxis && 0 === t, a = r.data, l = a.length, r.categoryField && s && l > 0) for (n = p(e, i(r.categoryField, a[0])), c = n ? v : i, d = 0; d < l; d++)u = a[d], h = c(r.categoryField, u, this.chartService.intl), !n && _[h] || (b.push([h, u]), n || (_[h] = !0)); b.length > 0 && (n && (b = R(b, function (e, t) { return F.dateComparer(e[0], t[0]) })), f = function (e) { var t, i, n, o, r = e.length, s = []; for (t = 0; t < r; t++)for (i = e[t], n = i.length, o = 0; o < n; o++)s[o] = s[o] || [], s[o].push(i[o]); return s }(b), e.categories = f[0]) }, _isBindable: function (e) { var t, i, n = Ge.current.valueFields(e), o = !0; for (t = 0; t < n.length; t++)if ((i = n[t]) === N ? i = "field" : i += "Field", !J(e[i])) { o = !1; break } return o }, _noTransitionsRedraw: function () { var e, t = this.options; t.transitions && (t.transitions = !1, e = !0), this._redraw(), e && (t.transitions = !0) }, _legendItemHover: function (e, t) { var i, n = this._plotArea, o = this._highlight, r = (n.srcSeries || n.series)[e]; i = ae(r.type, [kt, vt, _t]) ? n.findPoint(function (i) { return i.series.index === e && i.index === t }) : n.pointsBySeriesIndex(e), o.show(i) }, _shouldAttachMouseMove: function () { return this._plotArea.crosshairs.length || this._tooltip && this._sharedTooltip() || this.requiresHandlers([qt]) }, updateMouseMoveHandler: function () { var e, t; Re(this.element, ((e = {})[lo] = this._mousemove, e)), this._shouldAttachMouseMove() && Me(this.element, ((t = {})[lo] = this._mousemove, t)) }, applyOptions: function (e, t) { (function e(t, i) { var n, o, r, s; for (n in i) o = i[n], r = t[n], J(r) && (s = null === o, s || !J(o) ? (delete t[n], s && delete i[n]) : r && de(o) && de(r) && e(r, o)) })(this._originalOptions, e), this._originalOptions = ue(this._originalOptions, e), this.options = ue({}, this._originalOptions), t && (this._theme = t, this.chartService.theme = t), this._initTheme(this.options, this._theme) }, setOptions: function (e, t) { this.applyOptions(e, t), this.bindCategories(), this.redraw(), this.updateMouseMoveHandler() }, destroy: function () { var e, t; this._destroyed = !0, Re(this.element, ((e = {})[co] = this._clickHandler, e[ai] = this._mousewheelHandler, e[lo] = this._mousemove, e)), this.domEvents && (this.domEvents.destroy(), delete this.domEvents), Re(document, ((t = {})[lo] = this._mouseMoveTrackHandler, t)), this._destroyView(), this.surface && (this.surface.destroy(), this.surface = null), this._clearRedrawTimeout() }, _destroyView: function () { var e = this._model, t = this._selections; if (e && (e.destroy(), this._model = null), t) for (; t.length > 0;)t.shift().destroy(); this._unsetActivePoint(), this._tooltip && this._tooltip.destroy(), this._highlight && this._highlight.destroy(), this._zoomSelection && (this._zoomSelection.destroy(), delete this._zoomSelection), this._pannable && (this._pannable.destroy(), delete this._pannable), this._mousewheelZoom && (this._mousewheelZoom.destroy(), delete this._mousewheelZoom) } }), se(uo, { renderAs: "", chartArea: {}, legend: { visible: !0, labels: {} }, categoryAxis: {}, seriesDefaults: { type: gt, data: [], highlight: { visible: !0 }, labels: {}, negativeValues: { visible: !1 } }, series: [], seriesColors: null, tooltip: { visible: !1 }, transitions: !0, valueAxis: {}, plotArea: {}, title: {}, xAxis: {}, yAxis: {}, panes: [{}], pannable: !1, zoomable: !1 }), kendo.deepExtend(kendo.dataviz, { constants: li, Aggregates: je, AreaChart: Di, AreaSegment: Ci, AxisGroupRangeTracker: Ai, Bar: Ii, BarChart: Fi, BarLabel: Ei, BoxPlotChart: Hi, BoxPlot: Bi, BubbleChart: Ui, Bullet: qi, BulletChart: ji, CandlestickChart: Pi, Candlestick: zi, CategoricalChart: hi, CategoricalErrorBar: di, CategoricalPlotArea: cn, Chart: uo, ChartContainer: Ki, ClipAnimation: wi, ClusterLayout: Mi, Crosshair: Yi, CrosshairTooltip: $i, DefaultAggregates: tn, DonutChart: Bn, DonutPlotArea: Ln, DonutSegment: Pn, ErrorBarBase: ci, ErrorRangeCalculator: Ke, Highlight: dn, SharedTooltip: kn, Legend: _n, LegendItem: mn, LegendLayout: pn, LineChart: ki, LinePoint: mi, LineSegment: gi, Pane: Qi, PieAnimation: Tn, PieChart: Fn, PieChartMixin: Rn, PiePlotArea: zn, PieSegment: En, PlotAreaBase: Zi, PlotAreaEventsMixin: Ji, PlotAreaFactory: bn, PointEventsMixin: fi, RangeBar: nn, RangeBarChart: on, ScatterChart: Oi, ScatterErrorBar: Ni, ScatterLineChart: Dn, Selection: wn, SeriesAggregator: en, SeriesBinder: Ge, SplineSegment: _i, SplineAreaSegment: Ti, StackWrap: Ri, Tooltip: yn, OHLCChart: sn, OHLCPoint: rn, WaterfallChart: ln, WaterfallSegment: an, XYPlotArea: An, MousewheelZoom: fn, ZoomSelection: hn, Pannable: un, ChartAxis: We, ChartPlotArea: qe, anyHasZIndex: r, appendIfNotNull: a, areNumbers: a, categoriesCount: o, countNumbers: t, equalsIgnoreCase: f, evalOptions: n, filterSeriesByType: h, getDateField: v, getField: i, hasGradientOverlay: s, hasValue: l, isDateAxis: p, segmentVisible: S, seriesTotal: T, singleItemOrArray: g }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/chart/chart.min", ["dataviz/chart/kendo-chart.min", "kendo.data.min", "kendo.dataviz.core.min", "kendo.dataviz.themes.min", "kendo.drawing.min", "kendo.userevents.min"], function () { return function (e, t) { function i(e) { r.fn[e] = function () { var t = this._instance; if (t) return t[e].apply(t, arguments) } } function n(e, i) { var n, o, r, s = [], a = e.groupNameTemplate, l = i.length; if (0 === l) return (r = S({}, e)).visibleInLegend = !1, [r]; for (T(a) ? (m.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"), a && (n = z(a))) : 0 === (n = z(e.name || ""))._slotCount && (n = z(T(e.name) ? "#= group.value #: #= series.name #" : "#= group.value #")), o = 0; o < l; o++)r = S({}, e), m.isFunction(r.color) || (r.color = t), r._groupIx = o, r._groupValue = i[o].value, s.push(r), n && (r.name = n({ series: r, group: i[o] })); return s } var o, r, s, a, l, c, d, u, h, f, p = ".kendoChart", m = window.kendo, g = m.Class, v = m._outerWidth, _ = m._outerHeight, b = m.dataviz, w = b.constants, y = b.Chart, k = b.SeriesBinder, x = m.ui.Widget, C = m.data.DataSource, S = m.deepExtend, T = b.defined, D = b.getField, A = b.InstanceObserver, E = b.inArray, I = b.services, M = e.proxy, R = e.isArray, F = e.extend, z = m.template, P = "mouseleave" + p, B = w.AXIS_LABEL_CLICK, L = w.LEGEND_ITEM_CLICK, H = w.LEGEND_ITEM_HOVER, N = w.SERIES_CLICK, O = w.SERIES_HOVER, V = w.PLOT_AREA_CLICK, U = w.PLOT_AREA_HOVER, W = w.DRAG, q = w.DRAG_END, j = w.DRAG_START, G = w.ZOOM_START, $ = w.ZOOM, Y = w.ZOOM_END, K = w.SELECT_START, Q = w.SELECT, X = w.SELECT_END, Z = w.RENDER, J = w.NOTE_CLICK, ee = w.NOTE_HOVER, te = "change", ie = "dataBound", ne = w.VALUE, oe = w.PIE, re = w.DONUT, se = w.FUNNEL, ae = m.Observable; for (I.DomEventsBuilder.register({ create: function (e, t) { return new m.UserEvents(e, S({ global: !0, multiTouch: !0, fastTap: !0 }, t)) } }), o = A.extend({ handlerMap: { showTooltip: "_showTooltip", hideTooltip: "_hideTooltip", legendItemClick: "_onLegendItemClick", render: "_onRender" } }), r = x.extend({ init: function (e, t) { var i; m.destroy(e), x.fn.init.call(this, e), t && (i = t.dataSource, delete t.dataSource), this.options = S({}, this.options, t), this.wrapper = this.element, this._attachEvents(), t && (t.dataSource = i), this._seriesVisibility = new l, this.bind(this.events, this.options), this._initDataSource(t), m.notify(this, b.ui) }, events: [ie, N, O, B, L, H, V, U, j, W, q, G, $, Y, K, Q, X, J, ee, Z], options: { name: "Chart", renderAs: "", theme: "default", chartArea: {}, legend: {}, categoryAxis: {}, autoBind: !0, seriesDefaults: {}, series: [], seriesColors: null, tooltip: {}, transitions: !0, valueAxis: {}, plotArea: {}, title: {}, xAxis: {}, yAxis: {}, panes: [{}], pannable: !1, zoomable: !1 }, items: function () { return e() }, refresh: function () { var e = this, t = e._instance; t.applyDefaults(e.options), t.applySeriesColors(), e._bindSeries(), e._bindCategories(), e.trigger(ie), e._redraw() }, getSize: function () { return m.dimensions(this.element) }, redraw: function (e) { this._size = null, this._instance.redraw(e) }, setOptions: function (e) { var t = this, i = e.dataSource; delete e.dataSource, x.fn._setEvents.call(t, e), this._instance.applyOptions(e, this._getThemeOptions(e)), this.options = this._instance.options, this._tooltip.setOptions(this.options.tooltip), this._sourceSeries = null, i && t.setDataSource(i), t._hasDataSource ? t._onDataChanged() : (t._bindCategories(), t.redraw()), t._instance.updateMouseMoveHandler() }, setDataSource: function (e) { var t = this; t.dataSource.unbind(te, t._dataChangeHandler), t.dataSource = e = C.create(e), t._hasDataSource = !0, t._hasData = !1, e.bind(te, t._dataChangeHandler), t.options.autoBind && e.fetch() }, destroy: function () { var e = this, t = e.dataSource; e.element.off(p), t && t.unbind(te, e._dataChangeHandler), e._instance && (e._instance.destroy(), delete this._instance), this._tooltip && (this._tooltip.destroy(), delete this._tooltip), this._destroyCrosshairTooltips(), x.fn.destroy.call(e) }, findPaneByName: function (e) { var t, i = this._plotArea.panes; for (t = 0; t < i.length; t++)if (i[t].options.name === e) return new h(this, i[t]) }, findPaneByIndex: function (e) { var t = this._plotArea.panes; if (t[e]) return new h(this, t[e]) }, findSeries: function (e) { var t, i = this._plotArea, n = i.srcSeries || i.series; for (t = 0; t < n.length; t++)if (e(n[t])) return new f(this, n[t]) }, findSeriesByName: function (e) { return this._createSeries({ name: e }) }, findSeriesByIndex: function (e) { return this._createSeries({ index: e }) }, _createSeries: function (e) { var t = this._seriesOptions(e); if (t) return new f(this, t) }, _seriesOptions: function (e) { var t, i, n = this._plotArea, o = n.srcSeries || n.series; if (T(e.index)) t = o[e.index]; else if (T(e.name)) for (i = 0; i < o.length; i++)if (o[i].name === e.name) { t = o[i]; break } return t }, _attachEvents: function () { this.element.on(P, M(this._mouseleave, this)) }, _mouseleave: function (t) { var i = this._instance, n = this._tooltip, o = t.relatedTarget; o && e(o).closest(n.element).length || !i || i.handlingTap || i.hideElements() }, _getThemeOptions: function (e) { var i, n = (e || {}).theme; return "sass" === n || "default-v2" === n || "bootstrap-v4" === n ? b.autoTheme().chart : T(n) ? (i = b.ui.themes || {}, (i[n] || i[n.toLowerCase()] || {}).chart || {}) : t }, _initChart: function () { this._createChart(this.options, this._getThemeOptions(this.options)), this.options = this._instance.options }, _createChart: function (e, t) { this._instance = new y(this.element[0], e, t, { observer: new o(this), sender: this }) }, _initDataSource: function (e) { var t = this, i = (e || {}).dataSource; t._dataChangeHandler = M(t._onDataChanged, t), t.dataSource = C.create(i).bind("change", t._dataChangeHandler), t._bindCategories(), i && (t._hasDataSource = !0), this._initChart(), this._initTooltip(), i && t.options.autoBind && t.dataSource.fetch() }, _destroyCrosshairTooltips: function () { var e, t = this._crosshairTooltips; if (t) for (e in t) t[e].destroy(); this._crosshairTooltips = {} }, _getCrosshairTooltip: function (e, t) { var i = this._crosshairTooltips = this._crosshairTooltips || {}, n = e + t, o = i[n]; return o || (o = i[n] = new u(this.element)), o }, _showTooltip: function (e) { if (e.crosshair) { var t = this._getCrosshairTooltip(e.axisName, e.axisIndex); t.show(e) } else this._tooltip && this._tooltip.show(e) }, _hideTooltip: function (e) { if (e.crosshair) { var t = this._getCrosshairTooltip(e.axisName, e.axisIndex); t.hide() } else this._tooltip && this._tooltip.hide(e) }, _onRender: function (e) { this._destroyCrosshairTooltips(), this._copyMembers(e.sender), this._hasDataSource && !this._hasData && this.options.autoBind || this.trigger(Z) }, _copyMembers: function (e) { this._instance = e, this.options = e.options, this._originalOptions = e._originalOptions, this.surface = e.surface, this._plotArea = e._plotArea, this._model = e._model, this._highlight = e._highlight, this._selections = e._selections, this._pannable = e._pannable, this._zoomSelection = e._zoomSelection, this._mousewheelZoom = e._mousewheelZoom }, requiresHandlers: function (e) { var t, i = this._events; for (t = 0; t < e.length; t++)if (T(i[e[t]])) return !0 }, _initTooltip: function () { this._tooltip = this._createTooltip(), this._tooltip.bind("leave", M(this._tooltipleave, this)) }, _onLegendItemClick: function (e) { this.trigger(L, e) || this._legendItemClick(e.seriesIndex, e.pointIndex) }, _legendItemClick: function (t, i) { var n, o, r = this._instance, s = r._plotArea, a = (s.srcSeries || s.series)[t]; e.inArray(a.type, [oe, re, se]) >= 0 ? (n = a.pointVisibility = a.pointVisibility || {}, o = n[i], n[i] = !!T(o) && !o) : (a.visible = !a.visible, this._seriesVisibility.save(a)), r._noTransitionsRedraw() }, _createTooltip: function () { return new d(this.element, this.options.tooltip) }, _tooltipleave: function () { var e = this._instance, t = e._plotArea, i = e._highlight; t.hideCrosshairs(), i.hide() }, _bindData: function (e) { var t, i, o, r = this, s = r.options, a = r._sourceSeries || s.series, l = a.length, c = r.dataSource.view(), d = (r.dataSource.group() || []).length > 0, u = [], h = this._seriesVisibility; for (t = 0; t < l; t++)i = a[t], r._isBindable(i) && d ? (o = n(i, c), u = u.concat(o), h.applyByGroup(o, e)) : (i = F({}, i), u.push(i), h.applyByIndex(i, e)); r._sourceSeries = a, s.series = u, this._instance.applySeriesColors(), r._bindSeries(), r._bindCategories(), this._hasData = !0 }, _onDataChanged: function (e) { this._bindData(e), this.trigger(ie), this._redraw() }, _bindSeries: function () { var e, t, i, n, o = this, r = o.dataSource.view(), s = o.options.series, a = s.length; for (e = 0; e < a; e++)t = s[e], o._isBindable(t) && (i = t._groupIx, n = T(i) ? (r[i] || {}).items : r, !1 !== t.autoBind && (t.data = n)) }, _bindCategories: function () { var e, t, i = this, n = i.dataSource.view() || [], o = (i.dataSource.group() || []).length > 0, r = n, s = i.options, a = [].concat(s.categoryAxis); for (o && n.length && (r = n[0].items), e = 0; e < a.length; e++)!1 !== (t = a[e]).autoBind && i._bindCategoryAxis(t, r, e) }, _bindCategoryAxis: function (e, t, i) { var n, o, r, s = (t || []).length; if (e.field) for (e.categories = [], n = 0; n < s; n++)r = t[n], o = D(e.field, r), 0 === n ? (e.categories = [o], e.dataItems = [r]) : (e.categories.push(o), e.dataItems.push(r)); else this._instance && this._instance.bindCategoryAxisFromSeries(e, i) }, _isBindable: function (e) { var t, i, n = k.current.valueFields(e), o = !0; for (i = 0; i < n.length; i++)if ((t = n[i]) === ne ? t = "field" : t += "Field", !T(e[t])) { o = !1; break } return o } }), s = ["getAxis", "findAxisByName", "plotArea", "toggleHighlight", "showTooltip", "hideTooltip", "exportVisual", "_resize", "_redraw", "_noTransitionsRedraw", "_legendItemHover", "_eventCoordinates"], a = 0; a < s.length; a++)i(s[a]); b.ExportMixin.extend(r.fn), m.PDFMixin && m.PDFMixin.extend(r.fn), b.ui.plugin(r), l = g.extend({ init: function () { this.groups = {}, this.index = {} }, applyByGroup: function (e, t) { if (t && t.action) for (var i = 0; i < e.length; i++)!1 === this.groups[e[i]._groupValue] && (e[i].visible = !1); else this.groups = {} }, applyByIndex: function (e, t) { t && t.action ? !1 === this.index[e.index] && (e.visible = !1) : this.index = {} }, save: function (e) { e && (T(e._groupValue) ? this.groups[e._groupValue] = e.visible : this.index[e.index] = e.visible) } }), c = m.geometry, d = ae.extend({ init: function (t, i) { var n, o = this; ae.fn.init.call(o), this.setOptions(i), o.chartElement = t, o.template = d.template, o.template || (o.template = d.template = m.template("<div class='k-tooltip k-chart-tooltip' style='display:none; position: absolute; font: #= d.font #;#if (d.border) {# border: #= d.border.width #px solid; #}#opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>", { useWithBlock: !1, paramName: "d" })), o.element = e(o.template(o.options)), o.move = M(o.move, o), o._mouseleave = M(o._mouseleave, o), n = m.format("[{0}='content'],[{0}='scroller']", m.attr("role")), o._mobileScroller = t.closest(n).data("kendoMobileScroller") }, destroy: function () { this._clearShowTimeout(), this.element && (this.element.off(P).remove(), this.element = null) }, setOptions: function (e) { this.options = S({}, this.options, e) }, options: { opacity: 1, animation: { duration: 150 }, sharedTemplate: "<table><th colspan='#= colspan #'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(colorMarker) { # <td><span class='k-chart-shared-tooltip-marker' style='background-color:#:point.series.color#'></span></td># } ## if(nameColumn) { # <td> #if (point.series.name) {# #: point.series.name #: #} else {# &nbsp; #}#</td># } #<td>#= content(point) #</td></tr># } #</table>", categoryFormat: "{0:d}" }, move: function () { var e, t = this, i = t.options, n = t.element; t.anchor && t.element && (e = t._offset(), t.visible || n.css({ top: e.top, left: e.left }), t.visible = !0, t._ensureElement(document.body), n.stop(!0, !0).show().animate({ left: e.left, top: e.top }, i.animation.duration)) }, _clearShowTimeout: function () { this.showTimeout && (clearTimeout(this.showTimeout), this.showTimeout = null) }, getAnchor: function (e) { var t = this.anchor, i = t.point, n = t.align, o = i.left, r = i.top; return "center" === n.horizontal ? o -= e.width / 2 : "right" === n.horizontal && (o -= e.width), "center" === n.vertical ? r -= e.height / 2 : "bottom" === n.vertical && (r -= e.height), { x: o, y: r } }, _offset: function () { var t, i, n = this, o = n._measure(), r = n.getAnchor(o), s = r.y, a = r.x, l = m.support.zoomLevel(), d = e(window), u = window.pageYOffset || document.documentElement.scrollTop || 0, h = window.pageXOffset || document.documentElement.scrollLeft || 0, f = (this._mobileScroller || {}).movable; return f && 1 !== f.scale ? (t = c.transform().scale(f.scale, f.scale, [f.x, f.y]), i = new c.Point(a, s).transform(t), a = i.x, s = i.y) : (s += n._fit(s - u, o.height, _(d) / l), a += n._fit(a - h, o.width, v(d) / l)), { top: s, left: a } }, show: function (e) { this.anchor = e.anchor, this.element.css(e.style), this.element.toggleClass("k-chart-tooltip-inverse", !!e.className), this.element.toggleClass("k-chart-shared-tooltip", !!e.shared); var t = e.shared ? this._sharedContent(e) : this._pointContent(e.point); this.element.html(t), this._clearShowTimeout(), this.showTimeout = setTimeout(this.move, 100) }, hide: function () { var e = this; clearTimeout(e.showTimeout), e._hideElement(), e.visible && (e.point = null, e.visible = !1, e.index = null) }, _sharedContent: function (e) { var t, i = e.points, n = b.grep(i, function (e) { return T(e.series.name) }).length, o = e.series.length > 1, r = 1; return n && r++, o && r++, t = m.template(this.options.sharedTemplate), t({ points: i, category: e.category, categoryText: e.categoryText, content: this._pointContent, colorMarker: o, nameColumn: n, colspan: r }) }, _measure: function () { this._ensureElement(); var e = { width: v(this.element), height: _(this.element) }; return e }, _ensureElement: function () { this.element && this.element.appendTo(document.body).on(P, this._mouseleave) }, _mouseleave: function (t) { var i = t.relatedTarget, n = this.chartElement[0]; i && i !== n && !e.contains(n, i) && (this.trigger("leave"), this.hide()) }, _hideElement: function () { var e = this, t = this.element; t && t.fadeOut({ always: function () { e.visible || t.off(P).remove() } }) }, _pointContent: function (e) { var t, i, n = S({}, this.options, e.options.tooltip); return T(e.value) && (t = "" + e.value), n.template ? (i = z(n.template), t = i({ value: e.value, category: e.category, series: e.series, dataItem: e.dataItem, percentage: e.percentage, runningTotal: e.runningTotal, total: e.total, low: e.low, high: e.high, xLow: e.xLow, xHigh: e.xHigh, yLow: e.yLow, yHigh: e.yHigh })) : n.format && (t = e.formatValue(n.format)), t }, _fit: function (e, t, i) { var n = 0; return e + t > i && (n = i - (e + t)), e < 0 && (n = -e), n } }), u = d.extend({ init: function (e, t) { d.fn.init.call(this, e, t), this.element.addClass("k-chart-crosshair-tooltip") }, show: function (e) { var t = this.element; t && (this.anchor = e.anchor, this.element.css(e.style), this.element.html(this.content(e)), this.move()) }, move: function () { var e = this, t = e.element, i = e._offset(); e._ensureElement(), t.css({ top: i.top, left: i.left }).show() }, content: function (e) { var t = e.value, i = e.crosshair.options.tooltip; return i.template && (t = z(i.template)({ value: t })), t }, hide: function () { this.element.hide() } }), h = g.extend({ init: function (e, t) { this._chart = e, this._pane = t, this.visual = t.visual, this.chartsVisual = t.chartContainer.visual, this.name = t.options.name }, series: function () { var e, t = this._chart, i = t._plotArea.groupSeriesByPane(), n = i[this.name || "default"], o = []; if (n) for (e = 0; e < n.length; e++)o.push(new f(t, n[e])); return o } }), f = g.extend({ init: function (e, t) { this._chart = e, this._options = t }, points: function (e) { var t, i, n = this._points; return n || (t = this._seriesOptions(), i = this._chart._plotArea, this._points = n = i.pointsBySeriesIndex(t.index)), m.isFunction(e) && (n = this._filterPoints(n, e)), n }, data: function (e) { var t, i, n, o, r = this._seriesOptions(); return e && (t = this._chart, i = t._plotArea, r.data = e, r.categoryField && (n = i.seriesCategoryAxis(r), o = [].concat(t.options.categoryAxis), t._instance.bindCategoryAxisFromSeries(o[n.axisIndex], n.axisIndex)), t._noTransitionsRedraw(), this._clearFields()), r.data }, findPoint: function (e) { var t, i = this.points(); for (t = 0; t < i.length; t++)if (e(i[t])) return i[t] }, toggleHighlight: function (e, t) { t = t ? m.isFunction(t) ? this.points(t) : R(t) ? t : [t] : this.points(), this._chart._instance.togglePointsHighlight(e, t) }, toggleVisibility: function (e, t) { var i, n, o = this._chart, r = this._seriesOptions(), s = m.isFunction(t); if (s) if (E(r.type, [oe, re, se])) for (i = this._filterData(t), n = 0; n < i.length; n++)i[n].visible = e; else r.visible = function (i) { return !t(i.dataItem) || e }; else r.visible = e, o._seriesVisibility.save(r); o._noTransitionsRedraw(), this._clearFields() }, _filterData: function (e) { var t, i = this._seriesOptions().data, n = i.length, o = []; for (t = 0; t < n; t++)e(i[t]) && o.push(i[t]); return o }, _filterPoints: function (e, t) { var i, n = [], o = e.length; for (i = 0; i < o; i++)t(e[i]) && n.push(e[i]); return n }, _seriesOptions: function () { var e = this._series; return e || (e = this._series = this._chart._seriesOptions(this._options)), e }, _clearFields: function () { delete this._points, delete this._series } }), b.Tooltip = d, b.CrosshairTooltip = u, b.ChartInstanceObserver = o, b.ChartPane = h, b.ChartSeries = f }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.chart.min", ["dataviz/chart/kendo-chart.min", "dataviz/chart/chart.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.gauge.min", ["kendo.dataviz.core.min", "kendo.drawing.min", "kendo.dataviz.themes.min"], function () { return function (e, t) { function i(e, t) { var i = e.box, n = e.children[0].box, r = t.border || {}, s = t.background || "", a = new D, l = A.fromRect(new E([i.x1, i.y1], [i.width(), i.height()]), { stroke: {} }), c = new I(e.text, new T(n.x1, n.y1), { font: t.font, fill: { color: t.color } }), d = o(c.bbox().clone(), t.padding), u = A.fromRect(d, { stroke: { color: r.width ? r.color : "", width: r.width, dashType: r.dashType, lineJoin: "round", lineCap: "round" }, fill: { color: s } }); return a.append(l), a.append(u), a.append(c), a } function n(e, t, i) { var n = b(e.from) ? e.from : B, o = b(e.to) ? e.to : P; return e.from = l.max(l.min(o, n), t), e.to = l.min(l.max(o, n), i), e } function o(e, t) { var i = e.getOrigin(), n = e.getSize(), o = k(t); return e.setOrigin([i.x - o.left, i.y - o.top]), e.setSize([n.width + (o.left + o.right), n.height + (o.top + o.bottom)]), e } function r(e, t) { var i = k(t); return i.left = -i.left, i.top = -i.top, i.right = -i.right, i.bottom = -i.bottom, o(e, i) } var s, a, l = Math, c = window.kendo, d = c.ui.Widget, u = c.deepExtend, h = c.dataviz, f = h.autoMajorUnit, p = h.ChartElement, m = h.NumericAxis, g = h.Axis, v = h.Box2D, _ = c.Class, b = h.defined, w = h.isNumber, y = h.interpolateValue, k = h.getSpacing, x = h.round, C = h.geometry, S = h.drawing, T = C.Point, D = S.Group, A = S.Path, E = C.Rect, I = S.Text, M = "arrowPointer", R = "barPointer", F = "#000", z = h.COORD_PRECISION, P = Number.MAX_VALUE, B = -Number.MAX_VALUE, L = .5, H = l.PI / 180, N = 180, O = "inside", V = "linear", U = "needle", W = "outside", q = "radialPointer", j = _.extend({ init: function (e, t) { var i = this, n = e.options; p.fn.init.call(i, t), (t = i.options).fill = t.color, i.scale = e, t.value = b(t.value) ? l.min(l.max(t.value, n.min), n.max) : n.min }, options: { color: F }, value: function (e) { var i = this, n = i.options, o = n.value, r = i.scale.options; return 0 === arguments.length ? o : (n._oldValue = n._oldValue !== t ? n.value : r.min, n.value = l.min(l.max(e, r.min), r.max), i.elements && i.repaint(), t) } }), G = j.extend({ options: { shape: U, cap: { size: .05 }, arrow: { width: 16, height: 14 }, animation: { type: q, duration: 150 } }, setRadius: function (e) { var t = this; e && (t.elements.clear(), t.render(t.parent, t.center, e)) }, setAngle: function (e) { this.elements.transform(C.transform().rotate(e, this.center)) }, repaint: function () { var e = this, t = e.scale, i = e.options, n = t.slotAngle(i._oldValue), o = t.slotAngle(i.value); !1 === i.animation.transitions ? e.setAngle(o) : new te(e.elements, u(i.animation, { oldAngle: n, newAngle: o })).play() }, render: function () { var e = this, t = e.scale, i = t.arc.center, n = e.options, o = new D; return !1 !== n.animation && u(n.animation, { startAngle: 0, center: i, reverse: t.options.reverse }), n.shape === U ? o.append(e._renderNeedle(), e._renderCap()) : o.append(e._renderArrow()), e.elements = o, e.setAngle(H), o }, reflow: function (e) { var t = this, i = t.center = e.center, n = t.radius = e.getRadiusX(), o = t.capSize = Math.round(n * t.options.cap.size); t.bbox = E.fromPoints(new T(i.x - o, i.y - o), new T(i.x + o, i.y + o)) }, _renderNeedle: function () { var e = this, t = e.options, i = e.scale.options.minorTicks.size, n = e.center, o = t.color, r = new A({ fill: { color: o }, stroke: { color: o, width: L } }); return r.moveTo(n.x + e.radius - i, n.y).lineTo(n.x, n.y - e.capSize / 2).lineTo(n.x, n.y + e.capSize / 2).close(), r }, _renderCap: function () { var e = this, t = e.options, i = t.cap.color || t.color, n = new C.Circle(e.center, e.capSize), o = new S.Circle(n, { fill: { color: i }, stroke: { color: i } }); return o } }), $ = m.extend({ init: function (e) { var t = this; t.options = u({}, t.options, e), t.options.majorUnit = t.options.majorUnit || f(t.options.min, t.options.max), t.options.minorUnit = t.options.minorUnit || t.options.majorUnit / 10, g.fn.init.call(t, t.options) }, options: { min: 0, max: 100, majorTicks: { size: 15, align: O, color: F, width: L, visible: !0 }, minorTicks: { size: 10, align: O, color: F, width: L, visible: !0 }, startAngle: -30, endAngle: 210, labels: { position: O, padding: 2 } }, render: function (e, t) { var i = this, n = i.renderArc(e, t); i.bbox = n.bbox(), i.labelElements = i.renderLabels(), i.ticks = i.renderTicks(), i.ranges = i.renderRanges() }, reflow: function (e) { var i = this, n = e.center(), o = l.min(e.height(), e.width()) / 2; return i.bbox === t ? i.render(n, o) : (i.bbox = i.arc.bbox(), i.radius(i.arc.getRadiusX()), i.repositionRanges(), i.renderLabels(), t) }, slotAngle: function (e) { var t = this.options, i = t.startAngle, n = t.reverse, o = t.endAngle - i, r = t.min, s = t.max; return (n ? t.endAngle - (e - r) / (s - r) * o : (e - r) / (s - r) * o + i) + N }, renderLabels: function () { var e, n, o, r, s, a, c, d, u, f, p, m, g, v, _ = this, b = _.options, w = b.majorTicks.size, y = _.arc.clone(), k = y.getRadiusX(), x = _.tickAngles(y, b.majorUnit), S = _.labels, A = S.length, I = b.labels, M = I.padding, R = .05 * k, F = b.rangeSize = b.rangeSize || .1 * k, z = b.ranges || [], P = new D; for (_.options.rangeDistance !== t ? R = _.options.rangeDistance : _.options.rangeDistance = R, I.position === O && (k -= w, z.length && _.labelElements === t && (k -= F + R), y.setRadiusX(k).setRadiusY(k)), c = 0; c < A; c++)s = S[c], e = s.box.width() / 2, n = s.box.height() / 2, r = x[c], o = (r - N) * H, f = I.position === O, a = y.pointAt(r), d = a.x + l.cos(o) * (e + M) * (f ? 1 : -1), u = a.y + l.sin(o) * (n + M) * (f ? 1 : -1), s.reflow(new h.Box2D(d - e, u - n, d + e, u + n)), m = new T(s.box.x1, s.box.y1), _.labelElements === t ? (p = i(s, b.labels), P.append(p)) : (p = _.labelElements.children[c], g = p.bbox().origin, (v = p.transform() || C.transform()).translate(m.x - g.x, m.y - g.y), p.transform(v)), _.bbox = E.union(_.bbox, p.bbox()); return P }, repositionRanges: function () { var e, t, i, n = this, o = n.ranges.children, r = n.options.rangeSize, s = n.options.rangeDistance; if (o.length > 0) { for (e = n.getRangeRadius(), n.options.labels.position === O && (e += r + s), t = e + r / 2, i = 0; i < o.length; i++)o[i]._geometry.setRadiusX(t).setRadiusY(t); n.bbox = E.union(n.bbox, n.ranges.bbox()) } }, renderRanges: function () { var e, t, i, n, o, r, s = this, a = s.arc, l = new D, c = s.rangeSegments(), d = c.length, u = s.options.reverse, h = s.options.rangeSize, f = s.options.rangeDistance; if (d) for (n = s.getRangeRadius(), s.radius(s.radius() - h - f), r = 0; r < d; r++)i = c[r], e = s.slotAngle(i[u ? "to" : "from"]), (t = s.slotAngle(i[u ? "from" : "to"])) - e != 0 && (o = new C.Arc(a.center, { radiusX: n + h / 2, radiusY: n + h / 2, startAngle: e, endAngle: t }), l.append(new S.Arc(o, { stroke: { width: h, color: i.color, opacity: i.opacity } }))); return l }, rangeSegments: function () { function e(e, t, i, n) { return { from: e, to: t, color: i, opacity: n } } var t, i, o, r, s, a = this.options, l = a.ranges || [], c = l.length, d = a.rangePlaceholderColor, u = [], h = a.min, f = a.max; if (c) for (u.push(e(h, f, d)), r = 0; r < c; r++)for (t = n(l[r], h, f), i = u.length, s = 0; s < i; s++)if ((o = u[s]).from <= t.from && t.from <= o.to) { u.push(e(t.from, t.to, t.color, t.opacity)), o.from <= t.to && t.to <= o.to && u.push(e(t.to, o.to, d, t.opacity)), o.to = t.from; break } return u }, getRangeRadius: function () { var e = this.options, t = e.majorTicks.size, i = e.rangeSize, n = e.rangeDistance, o = this.arc; return e.labels.position === W ? o.getRadiusX() - t - n - i : o.getRadiusX() - i }, renderArc: function (e, t) { var i = this.options, n = this.arc = new C.Arc(e, { radiusX: t, radiusY: t, startAngle: i.startAngle + N, endAngle: i.endAngle + N }); return n }, renderTicks: function () { function e(e, t, i, n) { var o, r, s, a = new D, l = e.center, c = e.getRadiusX(), d = n.visible; if (d) for (o = 0; o < t.length; o++)r = e.pointAt(t[o]), s = new T(l.x + c - n.size, l.y).rotate(t[o], l), a.append(new A({ stroke: { color: n.color, width: n.width } }).moveTo(r).lineTo(s)); return a } var t = this, i = t.arc, n = t.options, o = n.labels.position, r = new D, s = n.majorTicks.size, a = n.minorTicks.size, l = i.clone(), c = l.getRadiusX(); return t.majorTickAngles = t.tickAngles(i, n.majorUnit), t.majorTicks = e(l, t.majorTickAngles, n.majorUnit, n.majorTicks), r.append(t.majorTicks), t._tickDifference = s - a, o === W && l.setRadiusX(c - s + a).setRadiusY(c - s + a), t.minorTickAngles = t.normalizeTickAngles(t.tickAngles(i, n.minorUnit)), t.minorTicks = e(l, t.minorTickAngles, n.minorUnit, n.minorTicks, n.majorUnit), r.append(t.minorTicks), r }, normalizeTickAngles: function (e) { var t, i = this.options, n = i.majorUnit / i.minorUnit; for (t = e.length - 1; t >= 0; t--)t % n == 0 && e.splice(t, 1); return e }, tickAngles: function (e, t) { var i, n = this.options, o = n.reverse, r = n.max - n.min, s = e.endAngle - e.startAngle, a = e.startAngle, l = r / t, c = s / l, d = []; for (o && (a += s, c = -c), i = 0; i < l; i++)d.push(x(a, z)), a += c; return x(a) <= e.endAngle && d.push(a), d }, radius: function (e) { var i = this; return e ? (i.arc.setRadiusX(e).setRadiusY(e), i.repositionTicks(i.majorTicks.children, i.majorTickAngles), i.repositionTicks(i.minorTicks.children, i.minorTickAngles, !0), t) : i.arc.getRadiusX() }, repositionTicks: function (e, t, i) { var n, o, r, s, a, l = this, c = i && l._tickDifference || 0, d = l.arc, u = d.getRadiusX(); for (i && l.options.labels.position === W && 0 !== c && (d = l.arc.clone()).setRadiusX(u - c).setRadiusY(u - c), n = 0; n < e.length; n++)o = d.pointAt(t[n]), r = e[n].segments, s = o.x - r[0].anchor().x, a = o.y - r[0].anchor().y, e[n].transform((new C.Transformation).translate(s, a)) } }), Y = d.extend({ init: function (t, i) { var n, o, r, s, a, l = this, f = h.ui.themes || {}; if (c.destroy(t), e(t).empty(), d.fn.init.call(l, t), l.wrapper = l.element, l._originalOptions = u({}, i), n = u({}, l.options, i), r = n.theme, s = f[r] || f[r.toLowerCase()], o = r && s ? s.gauge : {}, l.options = u({}, o, n), e.isArray(n.pointer)) for (a = 0; a < n.pointer.length; a++)l.options.pointer[a] = u({}, o.pointer, n.pointer[a]); l.element.addClass("k-gauge"), l.surface = l._createSurface(), l.redraw() }, options: { plotArea: {}, theme: "default", renderAs: "", pointer: {}, scale: {}, gaugeArea: {} }, destroy: function () { this.surface.destroy(), d.fn.destroy.call(this) }, value: function (e) { var i = this.pointers[0]; return 0 === arguments.length ? i.value() : (i.value(e), this._setValueOptions(e), t) }, _draw: function () { var e = this.surface; e.clear(), e.draw(this._visuals) }, exportVisual: function () { return this._visuals }, allValues: function (t) { var i, n = this.pointers, o = []; if (0 === arguments.length) { for (i = 0; i < n.length; i++)o.push(n[i].value()); return o } if (e.isArray(t)) for (i = 0; i < t.length; i++)w(t[i]) && n[i].value(t[i]); this._setValueOptions(t) }, _setValueOptions: function (e) { var t, i = [].concat(this.options.pointer); for (e = [].concat(e), t = 0; t < e.length; t++)i[t].value = e[t] }, _resize: function () { var e, t = this, i = t.options.transitions; for (t.options.transitions = !1, e = 0; e < t.pointers.length; e++)t.pointers[e].options.animation.transitions = !1; for (t.redraw(), t.options.transitions = i, e = 0; e < t.pointers.length; e++)t.pointers[e].options.animation.transitions = i }, redraw: function () { var e, t = this, i = u(t._getSize(), t.options.gaugeArea), n = new E([0, 0], [i.width, i.height]); t.surface.clear(), t.gaugeArea = t._createGaugeArea(), t.surface.element.css({ width: i.width, height: i.height }), t._createModel(), e = r(n.bbox(), t._gaugeAreaMargin), t.reflow(e) }, _createGaugeArea: function () { var e = this, t = e.options.gaugeArea, i = e.surface.size(), n = t.border || {}, o = new E([0, 0], [i.width, i.height]); return e._gaugeAreaMargin = t.margin || 5, n.width > 0 && (o = r(o, n.width)), A.fromRect(o, { stroke: { color: n.width ? n.color : "", width: n.width, dashType: n.dashType, lineJoin: "round", lineCap: "round" }, fill: { color: t.background } }) }, _createSurface: function () { var t, i = this, n = i.options, o = i._getSize(); return o = n.gaugeArea ? u(o, n.gaugeArea) : o, t = e("<div></div>").appendTo(i.element).css({ width: o.width, height: o.height }), new S.Surface.create(t, { type: n.renderAs }) }, getSize: function () { return this._getSize() }, _getSize: function () { var e = this.element, t = e.width(), i = e.height(); return t || (t = 200), i || (i = 200), { width: t, height: i } } }), K = Y.extend({ init: function (e, t) { Y.fn.init.call(this, e, t), c.notify(this, h.ui) }, options: { name: "RadialGauge", transitions: !0, gaugeArea: { background: "" } }, reflow: function (e) { var t, i = this, n = i.pointers; for (i.scale.reflow(e), i._initialPlotArea = i.scale.bbox, t = 0; t < n.length; t++)n[t].reflow(i.scale.arc), i._initialPlotArea = E.union(i._initialPlotArea, n[t].bbox); i.fitScale(e), i.alignScale(e), i._buildVisual(i.gaugeArea, n, i.scale), i._draw() }, _buildVisual: function (e, t, i) { var n, o, r = new D; for (r.append(e), r.append(i.ticks), r.append(i.ranges), o = 0; o < t.length; o++)(n = t[o]).render(), r.append(n.elements), n.value(n.options.value); r.append(i.labelElements), this._visuals = r }, fitScale: function (e) { for (var t, i, n, o, r, s = this, a = s.scale, c = a.arc, d = s._initialPlotArea, u = l.abs(s.getDiff(d, e)), h = x(u, z), f = x(-u, z), p = 0, m = 0; !(!(m++ < 100) || (p = r === n ? p + 1 : 0, p > 5) || h != o && (t = s.getPlotBox(h, e, c), 0 <= t && t <= 2) || f != o && (n = s.getPlotBox(f, e, c), 0 <= n && n <= 2) || (o = t > 0 && n > 0 ? 2 * h : t < 0 && n < 0 ? 2 * f : x((h + f) / 2 || 1, z), i = s.getPlotBox(o, e, c), 0 <= i && i <= 2));)r = n, i > 0 ? (f = o, n = i) : (h = o, t = i) }, getPlotBox: function (e, t, i) { var n, o = this, r = o.scale, s = o.pointers, a = i.getRadiusX(); for ((i = i.clone()).setRadiusX(a + e).setRadiusY(a + e), r.arc = i, r.reflow(t), o.plotBbox = r.bbox, n = 0; n < s.length; n++)s[n].reflow(i), o.plotBbox = E.union(o.plotBbox, s[n].bbox); return o.getDiff(o.plotBbox, t) }, getDiff: function (e, t) { return l.min(t.width() - e.width(), t.height() - e.height()) }, alignScale: function (e) { var t, i = this, n = i.plotBbox.center(), o = e.center(), r = n.x - o.x, s = n.y - o.y, a = i.scale, l = i.pointers; for (a.arc.center.x -= r, a.arc.center.y -= s, a.reflow(e), t = 0; t < l.length; t++)l[t].reflow(a.arc), i.plotBbox = E.union(a.bbox, l[t].bbox) }, _createModel: function () { var t, i, n = this, o = n.options, r = o.pointer, s = n.scale = new $(o.scale); for (n.pointers = [], r = e.isArray(r) ? r : [r], i = 0; i < r.length; i++)t = new G(s, u({}, r[i], { animation: { transitions: o.transitions } })), n.pointers.push(t) } }), Q = Y.extend({ init: function (e, t) { Y.fn.init.call(this, e, t), c.notify(this, h.ui) }, options: { name: "LinearGauge", transitions: !0, gaugeArea: { background: "" }, scale: { vertical: !0 } }, reflow: function (e) { var t, i = this, n = i.pointers, o = e.origin.x, r = e.origin.y, s = new h.Box2D(o, r, o + e.width(), r + e.height()); for (i.scale.reflow(s), t = 0; t < n.length; t++)n[t].reflow(); i.bbox = i._getBox(s), i._alignElements(), i._shrinkElements(), i._buildVisual(), i._draw() }, _buildVisual: function () { var e, t, i = this, n = new D, o = i.scale.render(), r = i.pointers; for (n.append(i.gaugeArea), n.append(o), t = 0; t < r.length; t++)e = r[t], n.append(e.render()), e.value(e.options.value); i._visuals = n }, _createModel: function () { var t, i, n, o = this, r = o.options, s = r.pointer, a = o.scale = new X(r.scale); for (o.pointers = [], s = e.isArray(s) ? s : [s], n = 0; n < s.length; n++)i = u({}, s[n], { animation: { transitions: r.transitions } }), t = "arrow" === i.shape ? new J(a, i) : new ee(a, i), o.pointers.push(t) }, _getSize: function () { var e = this.element, t = e.width(), i = e.height(), n = this.options.scale.vertical; return t || (t = n ? 60 : 200), i || (i = n ? 200 : 60), { width: t, height: i } }, _getBox: function (e) { var t, i, n = this.scale, o = this.pointers, r = e.center(), s = o[0].box.clone().wrap(n.box); for (i = 0; i < o.length; i++)s.wrap(o[i].box.clone()); return n.options.vertical ? (t = s.width() / 2, s = new v(r.x - t, e.y1, r.x + t, e.y2)) : (t = s.height() / 2, s = new v(e.x1, r.y - t, e.x2, r.y + t)), s }, _alignElements: function () { var e, t, i = this, n = i.scale, o = i.pointers, r = n.box, s = o[0].box.clone().wrap(n.box), a = i.bbox; for (t = 0; t < o.length; t++)s.wrap(o[t].box.clone()); for (n.options.vertical ? (e = a.center().x - s.center().x, n.reflow(new v(r.x1 + e, a.y1, r.x2 + e, a.y2))) : (e = a.center().y - s.center().y, n.reflow(new v(a.x1, r.y1 + e, a.x2, r.y2 + e))), t = 0; t < o.length; t++)o[t].reflow(i.bbox) }, _shrinkElements: function () { var e, t = this, i = t.scale, n = t.pointers, o = i.box.clone(), r = i.options.vertical ? "y" : "x", s = n[0].box; for (e = 0; e < n.length; e++)s.wrap(n[e].box.clone()); for (o[r + 1] += l.max(o[r + 1] - s[r + 1], 0), o[r + 2] -= l.max(s[r + 2] - o[r + 2], 0), i.reflow(o), e = 0; e < n.length; e++)n[e].reflow(t.bbox) } }), X = m.extend({ init: function (e) { var t = this; t.options = u({}, t.options, e), t.options = u({}, t.options, { labels: { mirror: t.options.mirror } }), t.options.majorUnit = t.options.majorUnit || f(t.options.min, t.options.max), g.fn.init.call(t, t.options), t.options.minorUnit = t.options.minorUnit || t.options.majorUnit / 10 }, options: { min: 0, max: 50, majorTicks: { size: 15, align: O, color: F, width: L, visible: !0 }, minorTicks: { size: 10, align: O, color: F, width: L, visible: !0 }, line: { width: L }, labels: { position: O, padding: 2 }, mirror: !1, _alignLines: !1 }, render: function () { var e = this, t = e.elements = new D, i = e.renderLabels(), n = e.renderLine(), o = e.renderTicks(), r = e.renderRanges(); return t.append(n, i, o, r), t }, renderRanges: function () { var e, t, i, o, r, s = this, a = s.options, l = a.min, c = a.max, d = a.ranges || [], u = a.vertical, h = a.labels.mirror, f = new D, p = d.length, m = a.rangeSize || a.minorTicks.size / 2; if (p) for (r = 0; r < p; r++)e = n(d[r], l, c), t = s.getSlot(e.from, e.to), i = u ? s.lineBox() : t, o = u ? t : s.lineBox(), u ? i.x1 -= m * (h ? -1 : 1) : o.y2 += m * (h ? -1 : 1), f.append(A.fromRect(new E([i.x1, o.y1], [i.x2 - i.x1, o.y2 - o.y1]), { fill: { color: e.color, opacity: e.opacity }, stroke: {} })); return f }, renderLabels: function () { var e, t = this.options, n = this.labels, o = new D; for (e = 0; e < n.length; e++)o.append(i(n[e], t.labels)); return o }, renderLine: function () { var e, t = this.options, i = t.line, n = this.lineBox(), o = new D; return i.width > 0 && i.visible && ((e = new A({ stroke: { color: i.color, dashType: i.dashType, width: i.width } })).moveTo(n.x1, n.y1).lineTo(n.x2, n.y2), o.append(e)), o }, renderTicks: function () { function e(e, n) { var s, l = e.length; if (n.visible) for (s = n.skip; s < l; s += n.step)s % n.skipUnit != 0 && (a.tickX = r ? o.x2 : o.x2 - n.size, a.tickY = r ? o.y1 - n.size : o.y1, a.position = e[s], i.append(t.renderAxisTick(a, n))) } var t = this, i = new D, n = t.options, o = t.lineBox(), r = n.labels.mirror, s = n.majorTicks.visible ? n.majorUnit : 0, a = { _alignLines: n._alignLines, vertical: n.vertical }; return e(t.getMajorTickPositions(), n.majorTicks), e(t.getMinorTickPositions(), u({}, { skipUnit: s / n.minorUnit }, n.minorTicks)), i }, renderAxisTick: function (e, t) { var i, n, o = e.tickX, r = e.tickY, s = e.position; return e.vertical ? (i = new T(o, s), n = new T(o + t.size, s)) : (i = new T(s, r), n = new T(s, r + t.size)), new A({ stroke: { color: t.color, width: t.width } }).moveTo(i).lineTo(n) } }), Z = j.extend({ init: function (e, t) { var i = this; j.fn.init.call(i, e, t), i.options = u({ track: { visible: b(t.track) } }, i.options) }, options: { shape: R, track: { border: { width: 1 } }, color: F, border: { width: 1 }, opacity: 1, margin: k(3), animation: { type: R }, visible: !0 }, reflow: function () { var e, t, i, n = this, o = n.options, r = n.scale, s = r.lineBox(), a = o.track.size || o.size, l = o.size / 2, c = r.options.mirror, d = k(o.margin), u = r.options.vertical, h = u ? d[c ? "left" : "right"] : d[c ? "bottom" : "top"]; h = c ? -h : h, u ? (i = new v(s.x1 + h, s.y1, s.x1 + h, s.y2), c ? i.x1 -= a : i.x2 += a, o.shape !== R && (t = new v(s.x2 + h, s.y1 - l, s.x2 + h, s.y2 + l), e = t)) : (i = new v(s.x1, s.y1 - h, s.x2, s.y1 - h), c ? i.y2 += a : i.y1 -= a, o.shape !== R && (t = new v(s.x1 - l, s.y1 - h, s.x2 + l, s.y1 - h), e = t)), n.trackBox = i, n.pointerRangeBox = t, n.box = e || i.clone().pad(o.border.width) }, getElementOptions: function () { var e = this.options; return { fill: { color: e.color, opacity: e.opacity }, stroke: b(e.border) ? { color: e.border.width ? e.border.color || e.color : "", width: e.border.width, dashType: e.border.dashType, opacity: e.opacity } : null } }, _margin: function () { var e = this.options, t = this.scale, i = t.options.mirror, n = k(e.margin), o = t.options.vertical, r = o ? n[i ? "left" : "right"] : n[i ? "bottom" : "top"]; return r } }), J = Z.extend({ init: function (e, i) { Z.fn.init.call(this, e, i), this.options.size === t && (this.options.size = .6 * this.scale.options.majorTicks.size) }, pointerShape: function () { var e, t = this.options, i = this.scale, n = t.size, o = i.options.vertical, r = n / 2, s = i.options.mirror ? -1 : 1, a = i.options.reverse; return o ? (a ? "y2" : "y1", e = [new T(0, 0 - r), new T(0 - s * n, 0), new T(0, 0 + r)]) : (a ? "x1" : "x2", e = [new T(0 - r, 0), new T(0, 0 + s * n), new T(0 + r, 0)]), e }, repaint: function () { var e = this, t = e.scale, i = e.options, n = new s(e.elements, u(i.animation, { vertical: t.options.vertical, mirror: t.options.mirror, margin: e._margin(i.margin), from: t.getSlot(i._oldValue), to: t.getSlot(i.value) })); !1 === i.animation.transitions && (n.options.duration = 0), n.setup(), n.play() }, render: function () { var e, t = this, i = t.options, n = new D, o = t.scale, r = t.getElementOptions(), s = t.pointerShape(i.value); return i.animation.type = M, n = new A({ stroke: r.stroke, fill: r.fill }).moveTo(s[0]).lineTo(s[1]).lineTo(s[2]).close(), e = o.getSlot(i.value), n.transform(C.transform().translate(e.x1, e.y1)), t.elements = n, n } }), ee = Z.extend({ init: function (e, i) { Z.fn.init.call(this, e, i), this.options.size === t && (this.options.size = .3 * this.scale.options.majorTicks.size) }, pointerShape: function (e) { var t, i, n, o = this, r = o.options, s = o.scale, a = s.options.vertical, l = s.options.mirror, c = l == a ? -1 : 1, d = r.size * c, u = s.getSlot(s.options.min), h = s.getSlot(e), f = a ? "y" : "x", p = a ? "x" : "y", m = o._margin() * c, g = new T; return g[f] = u[f + "1"], g[p] = u[p + "1"], (t = new T)[f] = h[f + "1"], t[p] = h[p + "1"], a ? (g.translate(m, 0), t.translate(m, 0)) : (g.translate(0, m), t.translate(0, m)), i = t.clone(), n = g.clone(), a ? (i.translate(d, 0), n.translate(d, 0)) : (i.translate(0, d), n.translate(0, d)), [g, t, i, n] }, repaint: function () { var e, t = this, i = t.scale, n = t.options, o = t.pointerShape(n.value), r = t.elements.children[0], s = t.pointerShape(n._oldValue); r.moveTo(o[0]).lineTo(o[1]).lineTo(o[2]).lineTo(o[3]).close(), e = new a(r, u(n.animation, { reverse: i.options.reverse, vertical: i.options.vertical, oldPoints: [s[1], s[2]], newPoints: [o[1], o[2]] })), !1 === n.animation.transitions && (e.options.duration = 0), e.setup(), e.play() }, render: function () { var e = new D, t = this.getElementOptions(), i = new A({ stroke: t.stroke, fill: t.fill }); return e.append(i), this.elements = e, e } }), te = S.Animation.extend({ init: function (e, t) { S.Animation.fn.init.call(this, e, t), (t = this.options).duration = l.max(l.abs(t.newAngle - t.oldAngle) / t.duration * 1e3, 1) }, options: { easing: V, duration: 150 }, step: function (e) { var t = this.options, i = y(t.oldAngle, t.newAngle, e); this.element.transform(C.transform().rotate(i, t.center)) } }); S.AnimationFactory.current.register(q, te), s = S.Animation.extend({ options: { easing: V, duration: 250 }, setup: function () { var e, t, i = this.options, n = i.margin, o = i.from, r = i.to, s = i.vertical ? "x1" : "y1"; i.mirror == i.vertical ? (o[s] -= n, r[s] -= n) : (o[s] += n, r[s] += n), e = this.fromScale = new T(o.x1, o.y1), t = this.toScale = new T(r.x1, r.y1), 0 !== i.duration && (i.duration = l.max(e.distanceTo(t) / i.duration * 1e3, 1)) }, step: function (e) { var t = y(this.fromScale.x, this.toScale.x, e), i = y(this.fromScale.y, this.toScale.y, e); this.element.transform(C.transform().translate(t, i)) } }), S.AnimationFactory.current.register(M, s), a = S.Animation.extend({ options: { easing: V, speed: 250 }, setup: function () { var e = this.options, t = e.newPoints, i = e.oldPoints, n = this.axis = e.vertical ? "y" : "x", o = this.to = t[0][n], r = this.from = i[0][n]; 0 !== e.duration && (e.duration = l.max(l.abs(o - r) / e.speed * 1e3, 1)), this._set(r) }, step: function (e) { var t = y(this.from, this.to, e); this._set(t) }, _set: function (e) { var t = "set" + this.axis.toUpperCase(), i = this.options.newPoints; i[0][t](e), i[1][t](e) } }), S.AnimationFactory.current.register(R, a), h.ui.plugin(K), h.ui.plugin(Q), h.ExportMixin.extend(Y.fn), u(h, { Gauge: Y, RadialPointer: G, LinearPointer: Z, ArrowLinearPointer: J, BarLinearPointer: ee, LinearScale: X, RadialScale: $, LinearGauge: Q, RadialGauge: K }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.barcode.min", ["kendo.dataviz.core.min", "kendo.drawing.min"], function () { return function (e, t) { function i(e, t, i) { return e.substring(t, t + i) } var n, o, r, s, a, l, c = window.kendo, d = c.ui.Widget, u = e.extend, h = c.deepExtend, f = e.inArray, p = e.isPlainObject, m = c.drawing, g = c.geometry, v = c.drawing.util, _ = v.defined, b = c.dataviz, w = b.Box2D, y = b.TextBox, k = /^\d+$/, x = /^[a-z0-9]+$/i, C = c.Class.extend({ init: function (e) { this.setOptions(e) }, setOptions: function (e) { var t = this; t.options = u({}, t.options, e), t.quietZoneLength = t.options.addQuietZone ? 2 * t.options.quietZoneLength : 0 }, encode: function (e, t, i) { var n = this; return _(e) && (e += ""), n.initValue(e, t, i), n.options.addQuietZone && n.addQuietZone(), n.addData(), n.options.addQuietZone && n.addQuietZone(), { baseUnit: n.baseUnit, pattern: n.pattern } }, options: { quietZoneLength: 10, addQuietZone: !0, addCheckSum: !0 }, initValue: function () { }, addQuietZone: function () { this.pattern.push(this.options.quietZoneLength || 10) }, addData: function () { }, invalidCharacterError: function (e) { throw Error(c.format("Character '{0}' is not valid for symbology {1}", e, this.name)) } }), S = {}, T = C.extend({ minBaseUnitLength: .7, addData: function () { var e, t = this, i = t.value; for (t.addStart(), e = 0; e < i.length; e++)t.addCharacter(i.charAt(e)); t.options.addCheckSum && t.pushCheckSum(), t.addStop(), t.prepareValues() }, addCharacter: function (e) { var t = this, i = t.characterMap[e]; i || t.invalidCharacterError(e), t.addBase(i) }, addBase: function () { } }), D = { addCharacter: function (e) { var t = this; t.characterMap[e] ? t.addBase(t.characterMap[e]) : e.charCodeAt(0) > 127 ? t.invalidCharacterError(e) : t.addExtended(e.charCodeAt(0)) }, addExtended: function (e) { var i, n, o, r = this; for (n = 0; n < r.extendedMappings.length; n++)if (i = r.extendedMappings[n].call(r, e)) { for (o = 0; o < i.length; o++)r.addBase(i[o]); return r.dataLength += i.length - 1, t } }, extendedMappings: [function (e) { if (97 <= e && e <= 122) { var t = this; return [t.characterMap[t.shiftCharacters[0]], t.characterMap[String.fromCharCode(e - 32)]] } }, function (e) { if (33 <= e && e <= 58) { var t = this; return [t.characterMap[t.shiftCharacters[1]], t.characterMap[String.fromCharCode(e + 32)]] } }, function (e) { if (1 <= e && e <= 26) { var t = this; return [t.characterMap[t.shiftCharacters[2]], t.characterMap[String.fromCharCode(e + 64)]] } }, function (e) { var t, i, n, o = this; if (o.specialAsciiCodes[e]) for (t = [], n = 0; n < o.specialAsciiCodes[e].length; n++)t.push(o.characterMap[o.shiftCharacters[3]]), t.push(o.characterMap[o.specialAsciiCodes[e][n]]); else i = 6 * Math.floor(e / 32) + (e - 27) % 32 + 64, t = [o.characterMap[o.shiftCharacters[3]], o.characterMap[String.fromCharCode(i)]]; return t }], specialAsciiCodes: { 0: ["U"], 64: ["V"], 96: ["W"], 127: ["T", "X", "Y", "Z"] }, shiftValuesAsciiCodes: { 39: 36, 40: 47, 41: 43, 42: 37 }, characterMap: { "+": !1, "/": !1, $: !1, "%": !1 }, shiftCharacters: ["SHIFT0", "SHIFT1", "SHIFT2", "SHIFT3"] }; S.code39 = T.extend({ name: "Code 39", checkSumMod: 43, minRatio: 2.5, maxRatio: 3, gapWidth: 1, splitCharacter: "|", initValue: function (e, t, i) { var n = this; n.width = t, n.height = i, n.value = e, n.dataLength = e.length, n.pattern = [], n.patternString = "" }, prepareValues: function () { var e, t, i = this, n = i.minBaseUnitLength, o = i.maxRatio, r = i.minRatio, s = Math.max(.15 * i.width, 24); if (i.height < s) throw Error("Insufficient Height. The minimum height for value: " + i.value + " is: " + s); for (; (e = i.getBaseUnit(o)) < n && o > r;)o = parseFloat((o - .1).toFixed(1)); if (e < n) throw t = Math.ceil(i.getBaseWidth(r) * n), Error("Insufficient width. The minimum width for value: " + i.value + " is: " + t); i.ratio = o, i.baseUnit = e, i.patternString = i.patternString.substring(0, i.patternString.length - 1), i.pattern = i.pattern.concat(i.patternString.replace(/ratio/g, o).split(i.splitCharacter)) }, getBaseUnit: function (e) { return this.width / this.getBaseWidth(e) }, getBaseWidth: function (e) { var t = this, i = 3 * (e + 2); return t.quietZoneLength + i * (t.dataLength + 2) + t.gapWidth * (t.dataLength + 1) }, addStart: function () { var e = this; e.addPattern(e.characterMap.START.pattern), e.addCharacterGap() }, addBase: function (e) { this.addPattern(e.pattern), this.addCharacterGap() }, addStop: function () { this.addPattern(this.characterMap.START.pattern) }, addPattern: function (e) { for (var t = 0; t < e.length; t++)this.patternString += this.patternMappings[e.charAt(t)] }, addCharacterGap: function () { var e = this; e.patternString += e.gapWidth + e.splitCharacter }, patternMappings: { b: "1|", w: "1|", B: "ratio|", W: "ratio|" }, characterMap: { 0: { pattern: "bwbWBwBwb", value: 0 }, 1: { pattern: "BwbWbwbwB", value: 1 }, 2: { pattern: "bwBWbwbwB", value: 2 }, 3: { pattern: "BwBWbwbwb", value: 3 }, 4: { pattern: "bwbWBwbwB", value: 4 }, 5: { pattern: "BwbWBwbwb", value: 5 }, 6: { pattern: "bwBWBwbwb", value: 6 }, 7: { pattern: "bwbWbwBwB", value: 7 }, 8: { pattern: "BwbWbwBwb", value: 8 }, 9: { pattern: "bwBWbwBwb", value: 9 }, A: { pattern: "BwbwbWbwB", value: 10 }, B: { pattern: "bwBwbWbwB", value: 11 }, C: { pattern: "BwBwbWbwb", value: 12 }, D: { pattern: "bwbwBWbwB", value: 13 }, E: { pattern: "BwbwBWbwb", value: 14 }, F: { pattern: "bwBwBWbwb", value: 15 }, G: { pattern: "bwbwbWBwB", value: 16 }, H: { pattern: "BwbwbWBwb", value: 17 }, I: { pattern: "bwBwbWBwb", value: 18 }, J: { pattern: "bwbwBWBwb", value: 19 }, K: { pattern: "BwbwbwbWB", value: 20 }, L: { pattern: "bwBwbwbWB", value: 21 }, M: { pattern: "BwBwbwbWb", value: 22 }, N: { pattern: "bwbwBwbWB", value: 23 }, O: { pattern: "BwbwBwbWb", value: 24 }, P: { pattern: "bwBwBwbWb", value: 25 }, Q: { pattern: "bwbwbwBWB", value: 26 }, R: { pattern: "BwbwbwBWb", value: 27 }, S: { pattern: "bwBwbwBWb", value: 28 }, T: { pattern: "bwbwBwBWb", value: 29 }, U: { pattern: "BWbwbwbwB", value: 30 }, V: { pattern: "bWBwbwbwB", value: 31 }, W: { pattern: "BWBwbwbwb", value: 32 }, X: { pattern: "bWbwBwbwB", value: 33 }, Y: { pattern: "BWbwBwbwb", value: 34 }, Z: { pattern: "bWBwBwbwb", value: 35 }, "-": { pattern: "bWbwbwBwB", value: 36 }, ".": { pattern: "BWbwbwBwb", value: 37 }, " ": { pattern: "bWBwbwBwb", value: 38 }, $: { pattern: "bWbWbWbwb", value: 39 }, "/": { pattern: "bWbWbwbWb", value: 40 }, "+": { pattern: "bWbwbWbWb", value: 41 }, "%": { pattern: "bwbWbWbWb", value: 42 }, START: { pattern: "bWbwBwBwb" } }, options: { addCheckSum: !1 } }), S.code39extended = S.code39.extend(h({}, D, { name: "Code 39 extended", characterMap: { SHIFT0: { pattern: "bWbwbWbWb", value: 41 }, SHIFT1: { pattern: "bWbWbwbWb", value: 40 }, SHIFT2: { pattern: "bWbWbWbwb", value: 39 }, SHIFT3: { pattern: "bwbWbWbWb", value: 42 } } })), S.code93 = T.extend({ name: "Code 93", cCheckSumTotal: 20, kCheckSumTotal: 15, checkSumMod: 47, initValue: function (e, t, i) { var n = this; n.value = e, n.width = t, n.height = i, n.pattern = [], n.values = [], n.dataLength = e.length }, prepareValues: function () { var e = this, t = Math.max(.15 * e.width, 24); if (e.height < t) throw Error("Insufficient Height"); if (e.setBaseUnit(), e.baseUnit < e.minBaseUnitLength) throw Error("Insufficient Width") }, setBaseUnit: function () { var e = this; e.baseUnit = e.width / (9 * (e.dataLength + 2 + 2) + e.quietZoneLength + 1) }, addStart: function () { var e = this.characterMap.START.pattern; this.addPattern(e) }, addStop: function () { var e = this; e.addStart(), e.pattern.push(e.characterMap.TERMINATION_BAR) }, addBase: function (e) { this.addPattern(e.pattern), this.values.push(e.value) }, pushCheckSum: function () { var e, t, i = this, n = i._getCheckValues(); for (i.checksum = n.join(""), t = 0; t < n.length; t++)e = i.characterMap[i._findCharacterByValue(n[t])], i.addPattern(e.pattern) }, _getCheckValues: function () { var e, t, i, n = this, o = n.values, r = o.length, s = 0; for (i = r - 1; i >= 0; i--)s += n.weightedValue(o[i], r - i, n.cCheckSumTotal); for (e = s % n.checkSumMod, s = n.weightedValue(e, 1, n.kCheckSumTotal), i = r - 1; i >= 0; i--)s += n.weightedValue(o[i], r - i + 1, n.kCheckSumTotal); return t = s % n.checkSumMod, [e, t] }, _findCharacterByValue: function (e) { for (var t in this.characterMap) if (this.characterMap[t].value === e) return t }, weightedValue: function (e, t, i) { return (t % i || i) * e }, addPattern: function (e) { var t, i; for (i = 0; i < e.length; i++)t = parseInt(e.charAt(i), 10), this.pattern.push(t) }, characterMap: { 0: { pattern: "131112", value: 0 }, 1: { pattern: "111213", value: 1 }, 2: { pattern: "111312", value: 2 }, 3: { pattern: "111411", value: 3 }, 4: { pattern: "121113", value: 4 }, 5: { pattern: "121212", value: 5 }, 6: { pattern: "121311", value: 6 }, 7: { pattern: "111114", value: 7 }, 8: { pattern: "131211", value: 8 }, 9: { pattern: "141111", value: 9 }, A: { pattern: "211113", value: 10 }, B: { pattern: "211212", value: 11 }, C: { pattern: "211311", value: 12 }, D: { pattern: "221112", value: 13 }, E: { pattern: "221211", value: 14 }, F: { pattern: "231111", value: 15 }, G: { pattern: "112113", value: 16 }, H: { pattern: "112212", value: 17 }, I: { pattern: "112311", value: 18 }, J: { pattern: "122112", value: 19 }, K: { pattern: "132111", value: 20 }, L: { pattern: "111123", value: 21 }, M: { pattern: "111222", value: 22 }, N: { pattern: "111321", value: 23 }, O: { pattern: "121122", value: 24 }, P: { pattern: "131121", value: 25 }, Q: { pattern: "212112", value: 26 }, R: { pattern: "212211", value: 27 }, S: { pattern: "211122", value: 28 }, T: { pattern: "211221", value: 29 }, U: { pattern: "221121", value: 30 }, V: { pattern: "222111", value: 31 }, W: { pattern: "112122", value: 32 }, X: { pattern: "112221", value: 33 }, Y: { pattern: "122121", value: 34 }, Z: { pattern: "123111", value: 35 }, "-": { pattern: "121131", value: 36 }, ".": { pattern: "311112", value: 37 }, " ": { pattern: "311211", value: 38 }, $: { pattern: "321111", value: 39 }, "/": { pattern: "112131", value: 40 }, "+": { pattern: "113121", value: 41 }, "%": { pattern: "211131", value: 42 }, SHIFT0: { pattern: "122211", value: 46 }, SHIFT1: { pattern: "311121", value: 45 }, SHIFT2: { pattern: "121221", value: 43 }, SHIFT3: { pattern: "312111", value: 44 }, START: { pattern: "111141" }, TERMINATION_BAR: "1" } }), S.code93extended = S.code93.extend(h({}, D, { name: "Code 93 extended", pushCheckSum: function () { var e, t, i = this, n = i._getCheckValues(); for (i.checksum = n.join(""), t = 0; t < n.length; t++)e = n[t], i.shiftValuesAsciiCodes[e] ? i.addExtended(i.shiftValuesAsciiCodes[e]) : i.addPattern(i.characterMap[i._findCharacterByValue(e)].pattern) } })), n = c.Class.extend({ init: function (e) { this.encoding = e }, addStart: function () { }, is: function () { }, move: function () { }, pushState: function () { } }), o = n.extend({ FNC4: "FNC4", init: function (e, t) { var i = this; i.encoding = e, i.states = t, i._initMoves(t) }, addStart: function () { this.encoding.addPattern(this.START) }, is: function (e, t) { var i = e.charCodeAt(t); return this.isCode(i) }, move: function (e) { for (var t = this, i = 0; !t._moves[i].call(t, e) && i < t._moves.length;)i++ }, pushState: function (e) { var t, i, n = this, o = n.states, r = e.value, s = r.length; for (f("C", o) >= 0 && ((i = r.substr(e.index).match(/\d{4,}/g)) && (s = r.indexOf(i[0], e.index))); (t = e.value.charCodeAt(e.index)) >= 0 && n.isCode(t) && e.index < s;)n.encoding.addPattern(n.getValue(t)), e.index++ }, _initMoves: function (e) { var t = this; t._moves = [], f(t.FNC4, e) >= 0 && t._moves.push(t._moveFNC), f(t.shiftKey, e) >= 0 && t._moves.push(t._shiftState), t._moves.push(t._moveState) }, _moveFNC: function (e) { if (e.fnc) return e.fnc = !1, e.previousState == this.key }, _shiftState: function (e) { var t = this; if (e.previousState == t.shiftKey && (e.index + 1 >= e.value.length || t.encoding[t.shiftKey].is(e.value, e.index + 1))) return t.encoding.addPattern(t.SHIFT), e.shifted = !0, !0 }, _moveState: function () { return this.encoding.addPattern(this.MOVE), !0 }, SHIFT: 98 }), (r = {}).A = o.extend({ key: "A", shiftKey: "B", isCode: function (e) { return 0 <= e && e < 96 }, getValue: function (e) { return e < 32 ? e + 64 : e - 32 }, MOVE: 101, START: 103 }), r.B = o.extend({ key: "B", shiftKey: "A", isCode: function (e) { return 32 <= e && e < 128 }, getValue: function (e) { return e - 32 }, MOVE: 100, START: 104 }), r.C = n.extend({ key: "C", addStart: function () { this.encoding.addPattern(this.START) }, is: function (e, t) { var n = i(e, t, 4); return (t + 4 <= e.length || 2 == e.length) && k.test(n) }, move: function () { this.encoding.addPattern(this.MOVE) }, pushState: function (e) { for (var t; (t = i(e.value, e.index, 2)) && k.test(t) && 2 == t.length;)this.encoding.addPattern(parseInt(t, 10)), e.index += 2 }, getValue: function (e) { return e }, MOVE: 99, START: 105 }), r.FNC4 = n.extend({ key: "FNC4", dependentStates: ["A", "B"], init: function (e, t) { this.encoding = e, this._initSubStates(t) }, addStart: function (e) { var t = e.value.charCodeAt(0) - 128, i = this._getSubState(t); this.encoding[i].addStart() }, is: function (e, t) { var i = e.charCodeAt(t); return this.isCode(i) }, isCode: function (e) { return 128 <= e && e < 256 }, pushState: function (e) { var t, i = this, n = i._initSubState(e), o = i.encoding, r = n.value.length; if (e.index += r, r < 3) for (; n.index < r; n.index++)t = n.value.charCodeAt(n.index), n.state = i._getSubState(t), n.previousState != n.state && (n.previousState = n.state, o[n.state].move(n)), o.addPattern(o[n.state].MOVE), o.addPattern(o[n.state].getValue(t)); else n.state != n.previousState && o[n.state].move(n), i._pushStart(n), o.pushData(n, i.subStates), e.index < e.value.length && i._pushStart(n); e.fnc = !0, e.state = n.state }, _pushStart: function (e) { var t = this; t.encoding.addPattern(t.encoding[e.state].MOVE), t.encoding.addPattern(t.encoding[e.state].MOVE) }, _initSubState: function (e) { var t = this, i = { value: t._getAll(e.value, e.index), index: 0 }; return i.state = t._getSubState(i.value.charCodeAt(0)), i.previousState = e.previousState == t.key ? i.state : e.previousState, i }, _initSubStates: function (e) { var t, i = this; for (i.subStates = [], t = 0; t < e.length; t++)f(e[t], i.dependentStates) >= 0 && i.subStates.push(e[t]) }, _getSubState: function (e) { var t, i = this; for (t = 0; t < i.subStates.length; t++)if (i.encoding[i.subStates[t]].isCode(e)) return i.subStates[t] }, _getAll: function (e, t) { for (var i, n = ""; (i = e.charCodeAt(t++)) && this.isCode(i);)n += String.fromCharCode(i - 128); return n } }), r.FNC1 = n.extend({ key: "FNC1", startState: "C", dependentStates: ["C", "B"], startAI: "(", endAI: ")", init: function (e, t) { this.encoding = e, this.states = t }, addStart: function () { this.encoding[this.startState].addStart() }, is: function () { return f(this.key, this.states) >= 0 }, pushState: function (e) { var t, i, n, o = this, r = o.encoding, s = e.value.replace(/\s/g, ""), a = RegExp("[" + o.startAI + o.endAI + "]", "g"), l = e.index, c = { state: o.startState }; for (r.addPattern(o.START); ;) { if (c.index = 0, n = s.charAt(l) === o.startAI ? 2 : 0, (t = n > 0 ? o.getBySeparator(s, l) : o.getByLength(s, l)).ai.length) i = l + n + t.id.length + t.ai.length; else if ((i = s.indexOf(o.startAI, l + 1)) < 0) { if (l + t.ai.max + t.id.length + n < s.length) throw Error("Separators are required after variable length identifiers"); i = s.length } if (c.value = s.substring(l, i).replace(a, ""), o.validate(t, c.value), r.pushData(c, o.dependentStates), i >= s.length) break; l = i, c.state != o.startState && (r[o.startState].move(c), c.state = o.startState), t.ai.length || r.addPattern(o.START) } e.index = e.value.length }, validate: function (e, t) { var i = t.substr(e.id.length), n = e.ai; if (!n.type && !k.test(i)) throw Error("Application identifier " + e.id + " is numeric only but contains non numeric character(s)."); if ("alphanumeric" == n.type && !x.test(i)) throw Error("Application identifier " + e.id + " is alphanumeric only but contains non alphanumeric character(s)."); if (n.length && n.length !== i.length) throw Error("Application identifier " + e.id + " must be " + n.length + " characters long."); if (n.min && n.min > i.length) throw Error("Application identifier " + e.id + " must be at least " + n.min + " characters long."); if (n.max && n.max < i.length) throw Error("Application identifier " + e.id + " must be at most " + n.max + " characters long.") }, getByLength: function (e, t) { var n, o, r, s = this; for (r = 2; r <= 4; r++)if (n = i(e, t, r), o = s.getAI(n) || s.getAI(n.substring(0, n.length - 1))) return { id: n, ai: o }; s.unsupportedAIError(n) }, unsupportedAIError: function (e) { throw Error(c.format("'{0}' is not a supported Application Identifier"), e) }, getBySeparator: function (e, t) { var i = this, n = e.indexOf(i.startAI, t), o = e.indexOf(i.endAI, n), r = e.substring(n + 1, o), s = i.getAI(r) || i.getAI(r.substr(r.length - 1)); return s || i.unsupportedAIError(r), { ai: s, id: r } }, getAI: function (e) { var t, i, n, o = this.applicationIdentifiers, r = o.multiKey; if (o[e]) return o[e]; for (t = 0; t < r.length; t++) { if (r[t].ids && f(e, r[t].ids) >= 0) return r[t].type; if (r[t].ranges) for (i = r[t].ranges, n = 0; n < i.length; n++)if (i[n][0] <= e && e <= i[n][1]) return r[t].type } }, applicationIdentifiers: { 22: { max: 29, type: "alphanumeric" }, 402: { length: 17 }, 7004: { max: 4, type: "alphanumeric" }, 242: { max: 6, type: "alphanumeric" }, 8020: { max: 25, type: "alphanumeric" }, 703: { min: 3, max: 30, type: "alphanumeric" }, 8008: { min: 8, max: 12, type: "alphanumeric" }, 253: { min: 13, max: 17, type: "alphanumeric" }, 8003: { min: 14, max: 30, type: "alphanumeric" }, multiKey: [{ ids: ["15", "17", "8005", "8100"], ranges: [[11, 13], [310, 316], [320, 336], [340, 369]], type: { length: 6 } }, { ids: ["240", "241", "250", "251", "400", "401", "403", "7002", "8004", "8007", "8110"], ranges: [[-9]], type: { max: 30, type: "alphanumeric" } }, { ids: ["7001"], ranges: [[410, 414]], type: { length: 13 } }, { ids: ["10", "21", "254", "420", "8002"], type: { max: 20, type: "alphanumeric" } }, { ids: ["00", "8006", "8017", "8018"], type: { length: 18 } }, { ids: ["01", "02", "8001"], type: { length: 14 } }, { ids: ["422"], ranges: [[424, 426]], type: { length: 3 } }, { ids: ["20", "8102"], type: { length: 2 } }, { ids: ["30", "37"], type: { max: 8, type: "alphanumeric" } }, { ids: ["390", "392"], type: { max: 15, type: "alphanumeric" } }, { ids: ["421", "423"], type: { min: 3, max: 15, type: "alphanumeric" } }, { ids: ["391", "393"], type: { min: 3, max: 18, type: "alphanumeric" } }, { ids: ["7003", "8101"], type: { length: 10 } }] }, START: 102 }), s = C.extend({ init: function (e) { C.fn.init.call(this, e), this._initStates() }, _initStates: function () { var e, t = this; for (e = 0; e < t.states.length; e++)t[t.states[e]] = new r[t.states[e]](t, t.states) }, initValue: function (e, t, i) { var n = this; n.pattern = [], n.value = e, n.width = t, n.height = i, n.checkSum = 0, n.totalUnits = 0, n.index = 0, n.position = 1 }, addData: function () { var e = this, t = { value: e.value, index: 0, state: "" }; 0 !== e.value.length && (t.state = t.previousState = e.getNextState(t, e.states), e.addStart(t), e.pushData(t, e.states), e.addCheckSum(), e.addStop(), e.setBaseUnit()) }, pushData: function (e, t) { for (var i, n = this; n[e.state].pushState(e), !(e.index >= e.value.length);)e.shifted ? (i = e.state, e.state = e.previousState, e.previousState = i, e.shifted = !1) : (e.previousState = e.state, e.state = n.getNextState(e, t), n[e.state].move(e)) }, addStart: function (e) { this[e.state].addStart(e), this.position = 1 }, addCheckSum: function () { var e = this; e.checksum = e.checkSum % 103, e.addPattern(e.checksum) }, addStop: function () { this.addPattern(this.STOP) }, setBaseUnit: function () { var e = this; e.baseUnit = e.width / (e.totalUnits + e.quietZoneLength) }, addPattern: function (e) { var t, i, n = this, o = "" + n.characterMap[e]; for (i = 0; i < o.length; i++)t = parseInt(o.charAt(i), 10), n.pattern.push(t), n.totalUnits += t; n.checkSum += e * n.position++ }, getNextState: function (e, t) { for (var i = 0; i < t.length; i++)if (this[t[i]].is(e.value, e.index)) return t[i]; this.invalidCharacterError(e.value.charAt(e.index)) }, characterMap: [212222, 222122, 222221, 121223, 121322, 131222, 122213, 122312, 132212, 221213, 221312, 231212, 112232, 122132, 122231, 113222, 123122, 123221, 223211, 221132, 221231, 213212, 223112, 312131, 311222, 321122, 321221, 312212, 322112, 322211, 212123, 212321, 232121, 111323, 131123, 131321, 112313, 132113, 132311, 211313, 231113, 231311, 112133, 112331, 132131, 113123, 113321, 133121, 313121, 211331, 231131, 213113, 213311, 213131, 311123, 311321, 331121, 312113, 312311, 332111, 314111, 221411, 431111, 111224, 111422, 121124, 121421, 141122, 141221, 112214, 112412, 122114, 122411, 142112, 142211, 241211, 221114, 413111, 241112, 134111, 111242, 121142, 121241, 114212, 124112, 124211, 411212, 421112, 421211, 212141, 214121, 412121, 111143, 111341, 131141, 114113, 114311, 411113, 411311, 113141, 114131, 311141, 411131, 211412, 211214, 211232, 2331112], STOP: 106 }), S.code128a = s.extend({ name: "Code 128 A", states: ["A"] }), S.code128b = s.extend({ name: "Code 128 B", states: ["B"] }), S.code128c = s.extend({ name: "Code 128 C", states: ["C"] }), S.code128 = s.extend({ name: "Code 128", states: ["C", "B", "A", "FNC4"] }), S["gs1-128"] = s.extend({ name: "Code GS1-128", states: ["FNC1", "C", "B"] }), a = C.extend({ initValue: function (e, t) { var i = this; i.pattern = [], i.value = e, i.checkSumLength = 0, i.width = t }, setBaseUnit: function () { var e = this; e.baseUnit = e.width / (12 * (e.value.length + e.checkSumLength) + e.quietZoneLength + 7) }, addData: function () { var e, t = this, i = t.value; for (t.addPattern(t.START), e = 0; e < i.length; e++)t.addCharacter(i.charAt(e)); t.options.addCheckSum && t.addCheckSum(), t.addPattern(t.STOP), t.setBaseUnit() }, addCharacter: function (e) { var t = this, i = t.characterMap[e]; i || t.invalidCharacterError(e), t.addPattern(i) }, addPattern: function (e) { for (var t = 0; t < e.length; t++)this.pattern.push(parseInt(e.charAt(t), 10)) }, addCheckSum: function () { var e, t = this, i = t.checkSums[t.checkSumType], n = i.call(t.checkSums, t.value); for (t.checksum = n.join(""), e = 0; e < n.length; e++)t.checkSumLength++, t.addPattern(t.characterMap[n[e]]) }, checkSums: { Modulo10: function (e) { var t, i, n, o = [0, ""], r = e.length % 2; for (t = 0; t < e.length; t++)o[(t + r) % 2] += parseInt(e.charAt(t), 10); for (n = o[0], i = "" + 2 * o[1], t = 0; t < i.length; t++)n += parseInt(i.charAt(t), 10); return [(10 - n % 10) % 10] }, Modulo11: function (e) { var t, i, n = 0, o = e.length; for (i = 0; i < o; i++)n += (((o - i) % 6 || 6) + 1) * e.charAt(i); return 10 != (t = (11 - n % 11) % 11) ? [t] : [1, 0] }, Modulo11Modulo10: function (e) { var t, i = this.Modulo11(e); return t = e + i[0], i.concat(this.Modulo10(t)) }, Modulo10Modulo10: function (e) { var t, i = this.Modulo10(e); return t = e + i[0], i.concat(this.Modulo10(t)) } }, characterMap: ["12121212", "12121221", "12122112", "12122121", "12211212", "12211221", "12212112", "12212121", "21121212", "21121221"], START: "21", STOP: "121", checkSumType: "" }), S.msimod10 = a.extend({ name: "MSI Modulo10", checkSumType: "Modulo10" }), S.msimod11 = a.extend({ name: "MSI Modulo11", checkSumType: "Modulo11" }), S.msimod1110 = a.extend({ name: "MSI Modulo11 Modulo10", checkSumType: "Modulo11Modulo10" }), S.msimod1010 = a.extend({ name: "MSI Modulo10 Modulo10", checkSumType: "Modulo10Modulo10" }), S.code11 = C.extend({ name: "Code 11", cCheckSumTotal: 10, kCheckSumTotal: 9, kCheckSumMinLength: 10, checkSumMod: 11, DASH_VALUE: 10, DASH: "-", START: "112211", STOP: "11221", initValue: function (e, t) { var i = this; i.pattern = [], i.value = e, i.width = t, i.totalUnits = 0 }, addData: function () { var e, t = this, i = t.value; for (t.addPattern(t.START), e = 0; e < i.length; e++)t.addCharacter(i.charAt(e)); t.options.addCheckSum && t.addCheckSum(), t.addPattern(t.STOP), t.setBaseUnit() }, setBaseUnit: function () { var e = this; e.baseUnit = e.width / (e.totalUnits + e.quietZoneLength) }, addCheckSum: function () { var e, t = this, i = t.value, n = i.length, o = t.getWeightedSum(i, n, t.cCheckSumTotal) % t.checkSumMod; t.checksum = o + "", t.addPattern(t.characterMap[o]), ++n >= t.kCheckSumMinLength && (e = (o + t.getWeightedSum(i, n, t.kCheckSumTotal)) % t.checkSumMod, t.checksum += e, t.addPattern(t.characterMap[e])) }, getWeightedSum: function (e, t, i) { var n, o = 0; for (n = 0; n < e.length; n++)o += this.weightedValue(this.getValue(e.charAt(n)), t, n, i); return o }, weightedValue: function (e, t, i, n) { var o = (t - i) % n || n; return o * e }, getValue: function (e) { var t = this; return isNaN(e) ? (e !== t.DASH && t.invalidCharacterError(e), t.DASH_VALUE) : parseInt(e, 10) }, addCharacter: function (e) { var t = this, i = t.getValue(e), n = t.characterMap[i]; t.addPattern(n) }, addPattern: function (e) { var t, i; for (i = 0; i < e.length; i++)t = parseInt(e.charAt(i), 10), this.pattern.push(t), this.totalUnits += t }, characterMap: ["111121", "211121", "121121", "221111", "112121", "212111", "122111", "111221", "211211", "211111", "112111"], options: { addCheckSum: !0 } }), S.postnet = C.extend({ name: "Postnet", START: "2", VALID_CODE_LENGTHS: [5, 9, 11], DIGIT_SEPARATOR: "-", initValue: function (e, t, i) { var n = this; n.height = i, n.width = t, n.baseHeight = i / 2, n.value = e.replace(RegExp(n.DIGIT_SEPARATOR, "g"), ""), n.pattern = [], n.validate(n.value), n.checkSum = 0, n.setBaseUnit() }, addData: function () { var e, t = this, i = t.value; for (t.addPattern(t.START), e = 0; e < i.length; e++)t.addCharacter(i.charAt(e)); t.options.addCheckSum && t.addCheckSum(), t.addPattern(t.START), t.pattern.pop() }, addCharacter: function (e) { var t = this, i = t.characterMap[e]; t.checkSum += parseInt(e, 10), t.addPattern(i) }, addCheckSum: function () { var e = this; e.checksum = (10 - e.checkSum % 10) % 10, e.addCharacter(e.checksum) }, setBaseUnit: function () { var e = this; e.baseUnit = e.width / (10 * (e.value.length + 1) + 3 + e.quietZoneLength) }, validate: function (e) { var t = this; if (k.test(e) || t.invalidCharacterError(e.match(/[^0-9]/)[0]), f(e.length, t.VALID_CODE_LENGTHS) < 0) throw Error("Invalid value length. Valid lengths for the Postnet symbology are " + t.VALID_CODE_LENGTHS.join(",")) }, addPattern: function (e) { var t, i, n = this; for (i = 0; i < e.length; i++)t = n.height - n.baseHeight * e.charAt(i), n.pattern.push({ width: 1, y1: t, y2: n.height }), n.pattern.push(1) }, characterMap: ["22111", "11122", "11212", "11221", "12112", "12121", "12211", "21112", "21121", "21211"] }), S.ean13 = C.extend({ initValue: function (e, t, i) { if (12 != (e += "").length || /\D/.test(e)) throw Error('The value of the "EAN13" encoding should be 12 symbols'); var n = this; n.pattern = [], n.options.height = i, n.baseUnit = t / (95 + n.quietZoneLength), n.value = e, n.checksum = n.calculateChecksum(), n.leftKey = e[0], n.leftPart = e.substr(1, 6), n.rightPart = e.substr(7) + n.checksum }, addData: function () { var e = this; e.addPieces(e.characterMap.start), e.addSide(e.leftPart, e.leftKey), e.addPieces(e.characterMap.middle), e.addSide(e.rightPart), e.addPieces(e.characterMap.start) }, addSide: function (e, t) { var i, n = this; for (i = 0; i < e.length; i++)t && parseInt(n.keyTable[t].charAt(i), 10) ? n.addPieces(Array.prototype.slice.call(n.characterMap.digits[e.charAt(i)]).reverse(), !0) : n.addPieces(n.characterMap.digits[e.charAt(i)], !0) }, addPieces: function (e, t) { var i; for (i = 0; i < e.length; i++)this.pattern.push(t ? { y1: 0, y2: .95 * this.options.height, width: e[i] } : e[i]) }, calculateChecksum: function () { var e, t = 0, i = 0, n = this.value.split("").reverse().join(""); for (e = 0; e < n.length; e++)e % 2 ? i += parseInt(n.charAt(e), 10) : t += parseInt(n.charAt(e), 10); return (10 - (3 * t + i) % 10) % 10 }, keyTable: ["000000", "001011", "001101", "001110", "010011", "011001", "011100", "010101", "010110", "011010"], characterMap: { digits: [[3, 2, 1, 1], [2, 2, 2, 1], [2, 1, 2, 2], [1, 4, 1, 1], [1, 1, 3, 2], [1, 2, 3, 1], [1, 1, 1, 4], [1, 3, 1, 2], [1, 2, 1, 3], [3, 1, 1, 2]], start: [1, 1, 1], middle: [1, 1, 1, 1, 1] } }), S.ean8 = S.ean13.extend({ initValue: function (e, t, i) { var n = this; if (7 != e.length || /\D/.test(e)) throw Error("Invalid value provided"); n.value = e, n.options.height = i, n.checksum = n.calculateChecksum(n.value), n.leftPart = n.value.substr(0, 4), n.rightPart = n.value.substr(4) + n.checksum, n.pattern = [], n.baseUnit = t / (67 + n.quietZoneLength) } }), l = d.extend({ init: function (t, i) { var n = this; d.fn.init.call(n, t, i), n.element = e(t), n.wrapper = n.element, n.element.addClass("k-barcode").css("display", "block"), n.surfaceWrap = e("<div />").css("position", "relative").appendTo(this.element), n.surface = m.Surface.create(n.surfaceWrap, { type: n.options.renderAs }), n.setOptions(i) }, setOptions: function (e) { var t = this; if (t.type = (e.type || t.options.type).toLowerCase(), "upca" == t.type && (t.type = "ean13", e.value = "0" + e.value), "upce" == t.type && (t.type = "ean8", e.value = "0" + e.value), !S[t.type]) throw Error("Encoding " + t.type + "is not supported."); t.encoding = new S[t.type], t.options = u(!0, t.options, e), _(e.value) && t.redraw() }, redraw: function () { var e = this._getSize(); this.surface.clear(), this.surface.setSize({ width: e.width, height: e.height }), this.createVisual(), this.surface.draw(this.visual) }, getSize: function () { return c.dimensions(this.element) }, _resize: function () { this.redraw() }, createVisual: function () { this.visual = this._render() }, _render: function () { var e, t, i, n = this, o = n.options, r = o.value, s = o.text, a = b.getSpacing(s.margin), l = n._getSize(), c = o.border || {}, d = n.encoding, u = new w(0, 0, l.width, l.height).unpad(c.width).unpad(o.padding), h = u.height(), f = new m.Group; return n.contentBox = u, f.append(n._getBackground(l)), s.visible && (i = m.util.measureText(r, { font: s.font }).height, h -= i + a.top + a.bottom), e = d.encode(r, u.width(), h), s.visible && (t = r, o.checksum && _(d.checksum) && (t += " " + d.checksum), f.append(n._getText(t))), n.barHeight = h, this._bandsGroup = this._getBands(e.pattern, e.baseUnit), f.append(this._bandsGroup), f }, exportVisual: function () { return this._render() }, _getSize: function () { var e = this, t = e.element, i = new g.Size(300, 100); return t.width() > 0 && (i.width = t.width()), t.height() > 0 && (i.height = t.height()), e.options.width && (i.width = e.options.width), e.options.height && (i.height = e.options.height), i }, value: function (e) { var i = this; return _(e) ? (i.options.value = e + "", i.redraw(), t) : i.options.value }, _getBands: function (e, t) { var i, n, o, r, s, a = this, l = a.contentBox, c = l.x1, d = new m.Group; for (o = 0; o < e.length; o++)n = p(e[o]) ? e[o] : { width: e[o], y1: 0, y2: a.barHeight }, i = n.width * t, o % 2 && (r = g.Rect.fromPoints(new g.Point(c, n.y1 + l.y1), new g.Point(c + i, n.y2 + l.y1)), s = m.Path.fromRect(r, { fill: { color: a.options.color }, stroke: null }), d.append(s)), c += i; return d }, _getBackground: function (e) { var t = this.options, i = t.border || {}, n = new w(0, 0, e.width, e.height).unpad(i.width / 2), o = m.Path.fromRect(n.toRect(), { fill: { color: t.background }, stroke: { color: i.width ? i.color : "", width: i.width, dashType: i.dashType } }); return o }, _getText: function (e) { var t = this, i = t.options.text, n = t._textbox = new y(e, { font: i.font, color: i.color, align: "center", vAlign: "bottom", margin: i.margin }); return n.reflow(t.contentBox), n.renderVisual(), n.visual }, options: { name: "Barcode", renderAs: "svg", value: "", type: "code39", checksum: !1, width: 0, height: 0, color: "black", background: "white", text: { visible: !0, font: "16px Consolas, Monaco, Sans Mono, monospace, sans-serif", color: "black", margin: { top: 0, bottom: 0, left: 0, right: 0 } }, border: { width: 0, dashType: "solid", color: "black" }, padding: { top: 0, bottom: 0, left: 0, right: 0 } } }), b.ExportMixin.extend(l.fn), b.ui.plugin(l), c.deepExtend(b, { encodings: S, Encoding: C }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.qrcode.min", ["kendo.dataviz.core.min", "kendo.drawing.min"], function () { return function (e, t) { function i(e) { return parseInt(e, 2) } function n(e, t) { var i = (+e).toString(2); return i.length < t && (i = Array(t - i.length + 1).join(0) + i), i } function o(e, t) { for (var i = [], n = 0; n < e.length;)i.push(e.substring(n, n + t)), n += t; return i } function r(e, t, i, n) { for (var o = 0; o < e.length; o++)e[o][i][n] = t } function s(e, t, i, n) { for (var o = 0; o < ue.length; o++)e[o][i][n] = ue[o](i, n) ? 1 ^ t : parseInt(t, 10) } function a(e, i) { var n = [], o = e.length - 1; do { n[o] = ie[(e[o] + i) % 255], o-- } while (e[o] !== t); return n } function l(e, t) { return parseInt(e.charAt(t), 10) } function c(e, t, i, n, o) { t[e][n] = (t[e][n] << 1 ^ o) % 128, t[e][n] == de && (i[e] += 40) } function d(e, t, i, n, o, r) { i[e][r] == n ? o[e][r]++ : (i[e][r] = n, o[e][r] >= 5 && (t[e] += 3 + o[e][r] - 5), o[e][r] = 1) } function u(e, t) { var i = Math.floor(e / t * 100), n = i % 5, o = Math.abs(i - n - 50), r = Math.abs(i + 5 - n - 50), s = 10 * Math.min(o / 5, r / 5); return s } var h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H, N, O, V, U, W, q, j, G = window.kendo, $ = e.extend, Y = G.drawing, K = G.dataviz, Q = G.ui.Widget, X = K.Box2D, Z = "numeric", J = "alphanumeric", ee = "byte", te = { 1: 0 }, ie = { 0: 1 }, ne = [[1, 0], [1, 25, 0]], oe = { 15: 20, 16: 20, 18: 24, 19: 24, 22: 20, 24: 22, 26: 24, 28: 20, 30: 20, 31: 24, 32: 28, 33: 24, 36: 18, 37: 22, 39: 20, 40: 24 }, re = [{ L: { groups: [[1, 19]], totalDataCodewords: 19, errorCodewordsPerBlock: 7 }, M: { groups: [[1, 16]], totalDataCodewords: 16, errorCodewordsPerBlock: 10 }, Q: { groups: [[1, 13]], totalDataCodewords: 13, errorCodewordsPerBlock: 13 }, H: { groups: [[1, 9]], totalDataCodewords: 9, errorCodewordsPerBlock: 17 } }, { L: { groups: [[1, 34]], totalDataCodewords: 34, errorCodewordsPerBlock: 10 }, M: { groups: [[1, 28]], totalDataCodewords: 28, errorCodewordsPerBlock: 16 }, Q: { groups: [[1, 22]], totalDataCodewords: 22, errorCodewordsPerBlock: 22 }, H: { groups: [[1, 16]], totalDataCodewords: 16, errorCodewordsPerBlock: 28 } }, { L: { groups: [[1, 55]], totalDataCodewords: 55, errorCodewordsPerBlock: 15 }, M: { groups: [[1, 44]], totalDataCodewords: 44, errorCodewordsPerBlock: 26 }, Q: { groups: [[2, 17]], totalDataCodewords: 34, errorCodewordsPerBlock: 18 }, H: { groups: [[2, 13]], totalDataCodewords: 26, errorCodewordsPerBlock: 22 } }, { L: { groups: [[1, 80]], totalDataCodewords: 80, errorCodewordsPerBlock: 20 }, M: { groups: [[2, 32]], totalDataCodewords: 64, errorCodewordsPerBlock: 18 }, Q: { groups: [[2, 24]], totalDataCodewords: 48, errorCodewordsPerBlock: 26 }, H: { groups: [[4, 9]], totalDataCodewords: 36, errorCodewordsPerBlock: 16 } }, { L: { groups: [[1, 108]], totalDataCodewords: 108, errorCodewordsPerBlock: 26 }, M: { groups: [[2, 43]], totalDataCodewords: 86, errorCodewordsPerBlock: 24 }, Q: { groups: [[2, 15], [2, 16]], totalDataCodewords: 62, errorCodewordsPerBlock: 18 }, H: { groups: [[2, 11], [2, 12]], totalDataCodewords: 46, errorCodewordsPerBlock: 22 } }, { L: { groups: [[2, 68]], totalDataCodewords: 136, errorCodewordsPerBlock: 18 }, M: { groups: [[4, 27]], totalDataCodewords: 108, errorCodewordsPerBlock: 16 }, Q: { groups: [[4, 19]], totalDataCodewords: 76, errorCodewordsPerBlock: 24 }, H: { groups: [[4, 15]], totalDataCodewords: 60, errorCodewordsPerBlock: 28 } }, { L: { groups: [[2, 78]], totalDataCodewords: 156, errorCodewordsPerBlock: 20 }, M: { groups: [[4, 31]], totalDataCodewords: 124, errorCodewordsPerBlock: 18 }, Q: { groups: [[2, 14], [4, 15]], totalDataCodewords: 88, errorCodewordsPerBlock: 18 }, H: { groups: [[4, 13], [1, 14]], totalDataCodewords: 66, errorCodewordsPerBlock: 26 } }, { L: { groups: [[2, 97]], totalDataCodewords: 194, errorCodewordsPerBlock: 24 }, M: { groups: [[2, 38], [2, 39]], totalDataCodewords: 154, errorCodewordsPerBlock: 22 }, Q: { groups: [[4, 18], [2, 19]], totalDataCodewords: 110, errorCodewordsPerBlock: 22 }, H: { groups: [[4, 14], [2, 15]], totalDataCodewords: 86, errorCodewordsPerBlock: 26 } }, { L: { groups: [[2, 116]], totalDataCodewords: 232, errorCodewordsPerBlock: 30 }, M: { groups: [[3, 36], [2, 37]], totalDataCodewords: 182, errorCodewordsPerBlock: 22 }, Q: { groups: [[4, 16], [4, 17]], totalDataCodewords: 132, errorCodewordsPerBlock: 20 }, H: { groups: [[4, 12], [4, 13]], totalDataCodewords: 100, errorCodewordsPerBlock: 24 } }, { L: { groups: [[2, 68], [2, 69]], totalDataCodewords: 274, errorCodewordsPerBlock: 18 }, M: { groups: [[4, 43], [1, 44]], totalDataCodewords: 216, errorCodewordsPerBlock: 26 }, Q: { groups: [[6, 19], [2, 20]], totalDataCodewords: 154, errorCodewordsPerBlock: 24 }, H: { groups: [[6, 15], [2, 16]], totalDataCodewords: 122, errorCodewordsPerBlock: 28 } }, { L: { groups: [[4, 81]], totalDataCodewords: 324, errorCodewordsPerBlock: 20 }, M: { groups: [[1, 50], [4, 51]], totalDataCodewords: 254, errorCodewordsPerBlock: 30 }, Q: { groups: [[4, 22], [4, 23]], totalDataCodewords: 180, errorCodewordsPerBlock: 28 }, H: { groups: [[3, 12], [8, 13]], totalDataCodewords: 140, errorCodewordsPerBlock: 24 } }, { L: { groups: [[2, 92], [2, 93]], totalDataCodewords: 370, errorCodewordsPerBlock: 24 }, M: { groups: [[6, 36], [2, 37]], totalDataCodewords: 290, errorCodewordsPerBlock: 22 }, Q: { groups: [[4, 20], [6, 21]], totalDataCodewords: 206, errorCodewordsPerBlock: 26 }, H: { groups: [[7, 14], [4, 15]], totalDataCodewords: 158, errorCodewordsPerBlock: 28 } }, { L: { groups: [[4, 107]], totalDataCodewords: 428, errorCodewordsPerBlock: 26 }, M: { groups: [[8, 37], [1, 38]], totalDataCodewords: 334, errorCodewordsPerBlock: 22 }, Q: { groups: [[8, 20], [4, 21]], totalDataCodewords: 244, errorCodewordsPerBlock: 24 }, H: { groups: [[12, 11], [4, 12]], totalDataCodewords: 180, errorCodewordsPerBlock: 22 } }, { L: { groups: [[3, 115], [1, 116]], totalDataCodewords: 461, errorCodewordsPerBlock: 30 }, M: { groups: [[4, 40], [5, 41]], totalDataCodewords: 365, errorCodewordsPerBlock: 24 }, Q: { groups: [[11, 16], [5, 17]], totalDataCodewords: 261, errorCodewordsPerBlock: 20 }, H: { groups: [[11, 12], [5, 13]], totalDataCodewords: 197, errorCodewordsPerBlock: 24 } }, { L: { groups: [[5, 87], [1, 88]], totalDataCodewords: 523, errorCodewordsPerBlock: 22 }, M: { groups: [[5, 41], [5, 42]], totalDataCodewords: 415, errorCodewordsPerBlock: 24 }, Q: { groups: [[5, 24], [7, 25]], totalDataCodewords: 295, errorCodewordsPerBlock: 30 }, H: { groups: [[11, 12], [7, 13]], totalDataCodewords: 223, errorCodewordsPerBlock: 24 } }, { L: { groups: [[5, 98], [1, 99]], totalDataCodewords: 589, errorCodewordsPerBlock: 24 }, M: { groups: [[7, 45], [3, 46]], totalDataCodewords: 453, errorCodewordsPerBlock: 28 }, Q: { groups: [[15, 19], [2, 20]], totalDataCodewords: 325, errorCodewordsPerBlock: 24 }, H: { groups: [[3, 15], [13, 16]], totalDataCodewords: 253, errorCodewordsPerBlock: 30 } }, { L: { groups: [[1, 107], [5, 108]], totalDataCodewords: 647, errorCodewordsPerBlock: 28 }, M: { groups: [[10, 46], [1, 47]], totalDataCodewords: 507, errorCodewordsPerBlock: 28 }, Q: { groups: [[1, 22], [15, 23]], totalDataCodewords: 367, errorCodewordsPerBlock: 28 }, H: { groups: [[2, 14], [17, 15]], totalDataCodewords: 283, errorCodewordsPerBlock: 28 } }, { L: { groups: [[5, 120], [1, 121]], totalDataCodewords: 721, errorCodewordsPerBlock: 30 }, M: { groups: [[9, 43], [4, 44]], totalDataCodewords: 563, errorCodewordsPerBlock: 26 }, Q: { groups: [[17, 22], [1, 23]], totalDataCodewords: 397, errorCodewordsPerBlock: 28 }, H: { groups: [[2, 14], [19, 15]], totalDataCodewords: 313, errorCodewordsPerBlock: 28 } }, { L: { groups: [[3, 113], [4, 114]], totalDataCodewords: 795, errorCodewordsPerBlock: 28 }, M: { groups: [[3, 44], [11, 45]], totalDataCodewords: 627, errorCodewordsPerBlock: 26 }, Q: { groups: [[17, 21], [4, 22]], totalDataCodewords: 445, errorCodewordsPerBlock: 26 }, H: { groups: [[9, 13], [16, 14]], totalDataCodewords: 341, errorCodewordsPerBlock: 26 } }, { L: { groups: [[3, 107], [5, 108]], totalDataCodewords: 861, errorCodewordsPerBlock: 28 }, M: { groups: [[3, 41], [13, 42]], totalDataCodewords: 669, errorCodewordsPerBlock: 26 }, Q: { groups: [[15, 24], [5, 25]], totalDataCodewords: 485, errorCodewordsPerBlock: 30 }, H: { groups: [[15, 15], [10, 16]], totalDataCodewords: 385, errorCodewordsPerBlock: 28 } }, { L: { groups: [[4, 116], [4, 117]], totalDataCodewords: 932, errorCodewordsPerBlock: 28 }, M: { groups: [[17, 42]], totalDataCodewords: 714, errorCodewordsPerBlock: 26 }, Q: { groups: [[17, 22], [6, 23]], totalDataCodewords: 512, errorCodewordsPerBlock: 28 }, H: { groups: [[19, 16], [6, 17]], totalDataCodewords: 406, errorCodewordsPerBlock: 30 } }, { L: { groups: [[2, 111], [7, 112]], totalDataCodewords: 1006, errorCodewordsPerBlock: 28 }, M: { groups: [[17, 46]], totalDataCodewords: 782, errorCodewordsPerBlock: 28 }, Q: { groups: [[7, 24], [16, 25]], totalDataCodewords: 568, errorCodewordsPerBlock: 30 }, H: { groups: [[34, 13]], totalDataCodewords: 442, errorCodewordsPerBlock: 24 } }, { L: { groups: [[4, 121], [5, 122]], totalDataCodewords: 1094, errorCodewordsPerBlock: 30 }, M: { groups: [[4, 47], [14, 48]], totalDataCodewords: 860, errorCodewordsPerBlock: 28 }, Q: { groups: [[11, 24], [14, 25]], totalDataCodewords: 614, errorCodewordsPerBlock: 30 }, H: { groups: [[16, 15], [14, 16]], totalDataCodewords: 464, errorCodewordsPerBlock: 30 } }, { L: { groups: [[6, 117], [4, 118]], totalDataCodewords: 1174, errorCodewordsPerBlock: 30 }, M: { groups: [[6, 45], [14, 46]], totalDataCodewords: 914, errorCodewordsPerBlock: 28 }, Q: { groups: [[11, 24], [16, 25]], totalDataCodewords: 664, errorCodewordsPerBlock: 30 }, H: { groups: [[30, 16], [2, 17]], totalDataCodewords: 514, errorCodewordsPerBlock: 30 } }, { L: { groups: [[8, 106], [4, 107]], totalDataCodewords: 1276, errorCodewordsPerBlock: 26 }, M: { groups: [[8, 47], [13, 48]], totalDataCodewords: 1e3, errorCodewordsPerBlock: 28 }, Q: { groups: [[7, 24], [22, 25]], totalDataCodewords: 718, errorCodewordsPerBlock: 30 }, H: { groups: [[22, 15], [13, 16]], totalDataCodewords: 538, errorCodewordsPerBlock: 30 } }, { L: { groups: [[10, 114], [2, 115]], totalDataCodewords: 1370, errorCodewordsPerBlock: 28 }, M: { groups: [[19, 46], [4, 47]], totalDataCodewords: 1062, errorCodewordsPerBlock: 28 }, Q: { groups: [[28, 22], [6, 23]], totalDataCodewords: 754, errorCodewordsPerBlock: 28 }, H: { groups: [[33, 16], [4, 17]], totalDataCodewords: 596, errorCodewordsPerBlock: 30 } }, { L: { groups: [[8, 122], [4, 123]], totalDataCodewords: 1468, errorCodewordsPerBlock: 30 }, M: { groups: [[22, 45], [3, 46]], totalDataCodewords: 1128, errorCodewordsPerBlock: 28 }, Q: { groups: [[8, 23], [26, 24]], totalDataCodewords: 808, errorCodewordsPerBlock: 30 }, H: { groups: [[12, 15], [28, 16]], totalDataCodewords: 628, errorCodewordsPerBlock: 30 } }, { L: { groups: [[3, 117], [10, 118]], totalDataCodewords: 1531, errorCodewordsPerBlock: 30 }, M: { groups: [[3, 45], [23, 46]], totalDataCodewords: 1193, errorCodewordsPerBlock: 28 }, Q: { groups: [[4, 24], [31, 25]], totalDataCodewords: 871, errorCodewordsPerBlock: 30 }, H: { groups: [[11, 15], [31, 16]], totalDataCodewords: 661, errorCodewordsPerBlock: 30 } }, { L: { groups: [[7, 116], [7, 117]], totalDataCodewords: 1631, errorCodewordsPerBlock: 30 }, M: { groups: [[21, 45], [7, 46]], totalDataCodewords: 1267, errorCodewordsPerBlock: 28 }, Q: { groups: [[1, 23], [37, 24]], totalDataCodewords: 911, errorCodewordsPerBlock: 30 }, H: { groups: [[19, 15], [26, 16]], totalDataCodewords: 701, errorCodewordsPerBlock: 30 } }, { L: { groups: [[5, 115], [10, 116]], totalDataCodewords: 1735, errorCodewordsPerBlock: 30 }, M: { groups: [[19, 47], [10, 48]], totalDataCodewords: 1373, errorCodewordsPerBlock: 28 }, Q: { groups: [[15, 24], [25, 25]], totalDataCodewords: 985, errorCodewordsPerBlock: 30 }, H: { groups: [[23, 15], [25, 16]], totalDataCodewords: 745, errorCodewordsPerBlock: 30 } }, { L: { groups: [[13, 115], [3, 116]], totalDataCodewords: 1843, errorCodewordsPerBlock: 30 }, M: { groups: [[2, 46], [29, 47]], totalDataCodewords: 1455, errorCodewordsPerBlock: 28 }, Q: { groups: [[42, 24], [1, 25]], totalDataCodewords: 1033, errorCodewordsPerBlock: 30 }, H: { groups: [[23, 15], [28, 16]], totalDataCodewords: 793, errorCodewordsPerBlock: 30 } }, { L: { groups: [[17, 115]], totalDataCodewords: 1955, errorCodewordsPerBlock: 30 }, M: { groups: [[10, 46], [23, 47]], totalDataCodewords: 1541, errorCodewordsPerBlock: 28 }, Q: { groups: [[10, 24], [35, 25]], totalDataCodewords: 1115, errorCodewordsPerBlock: 30 }, H: { groups: [[19, 15], [35, 16]], totalDataCodewords: 845, errorCodewordsPerBlock: 30 } }, { L: { groups: [[17, 115], [1, 116]], totalDataCodewords: 2071, errorCodewordsPerBlock: 30 }, M: { groups: [[14, 46], [21, 47]], totalDataCodewords: 1631, errorCodewordsPerBlock: 28 }, Q: { groups: [[29, 24], [19, 25]], totalDataCodewords: 1171, errorCodewordsPerBlock: 30 }, H: { groups: [[11, 15], [46, 16]], totalDataCodewords: 901, errorCodewordsPerBlock: 30 } }, { L: { groups: [[13, 115], [6, 116]], totalDataCodewords: 2191, errorCodewordsPerBlock: 30 }, M: { groups: [[14, 46], [23, 47]], totalDataCodewords: 1725, errorCodewordsPerBlock: 28 }, Q: { groups: [[44, 24], [7, 25]], totalDataCodewords: 1231, errorCodewordsPerBlock: 30 }, H: { groups: [[59, 16], [1, 17]], totalDataCodewords: 961, errorCodewordsPerBlock: 30 } }, { L: { groups: [[12, 121], [7, 122]], totalDataCodewords: 2306, errorCodewordsPerBlock: 30 }, M: { groups: [[12, 47], [26, 48]], totalDataCodewords: 1812, errorCodewordsPerBlock: 28 }, Q: { groups: [[39, 24], [14, 25]], totalDataCodewords: 1286, errorCodewordsPerBlock: 30 }, H: { groups: [[22, 15], [41, 16]], totalDataCodewords: 986, errorCodewordsPerBlock: 30 } }, { L: { groups: [[6, 121], [14, 122]], totalDataCodewords: 2434, errorCodewordsPerBlock: 30 }, M: { groups: [[6, 47], [34, 48]], totalDataCodewords: 1914, errorCodewordsPerBlock: 28 }, Q: { groups: [[46, 24], [10, 25]], totalDataCodewords: 1354, errorCodewordsPerBlock: 30 }, H: { groups: [[2, 15], [64, 16]], totalDataCodewords: 1054, errorCodewordsPerBlock: 30 } }, { L: { groups: [[17, 122], [4, 123]], totalDataCodewords: 2566, errorCodewordsPerBlock: 30 }, M: { groups: [[29, 46], [14, 47]], totalDataCodewords: 1992, errorCodewordsPerBlock: 28 }, Q: { groups: [[49, 24], [10, 25]], totalDataCodewords: 1426, errorCodewordsPerBlock: 30 }, H: { groups: [[24, 15], [46, 16]], totalDataCodewords: 1096, errorCodewordsPerBlock: 30 } }, { L: { groups: [[4, 122], [18, 123]], totalDataCodewords: 2702, errorCodewordsPerBlock: 30 }, M: { groups: [[13, 46], [32, 47]], totalDataCodewords: 2102, errorCodewordsPerBlock: 28 }, Q: { groups: [[48, 24], [14, 25]], totalDataCodewords: 1502, errorCodewordsPerBlock: 30 }, H: { groups: [[42, 15], [32, 16]], totalDataCodewords: 1142, errorCodewordsPerBlock: 30 } }, { L: { groups: [[20, 117], [4, 118]], totalDataCodewords: 2812, errorCodewordsPerBlock: 30 }, M: { groups: [[40, 47], [7, 48]], totalDataCodewords: 2216, errorCodewordsPerBlock: 28 }, Q: { groups: [[43, 24], [22, 25]], totalDataCodewords: 1582, errorCodewordsPerBlock: 30 }, H: { groups: [[10, 15], [67, 16]], totalDataCodewords: 1222, errorCodewordsPerBlock: 30 } }, { L: { groups: [[19, 118], [6, 119]], totalDataCodewords: 2956, errorCodewordsPerBlock: 30 }, M: { groups: [[18, 47], [31, 48]], totalDataCodewords: 2334, errorCodewordsPerBlock: 28 }, Q: { groups: [[34, 24], [34, 25]], totalDataCodewords: 1666, errorCodewordsPerBlock: 30 }, H: { groups: [[20, 15], [61, 16]], totalDataCodewords: 1276, errorCodewordsPerBlock: 30 } }], se = [1, 0, 1, 1, 1], ae = [1, 0, 1], le = { L: "01", M: "00", Q: "11", H: "10" }, ce = ["11101100", "00010001"], de = 93, ue = [function (e, t) { return (e + t) % 2 == 0 }, function (e) { return e % 2 == 0 }, function (e, t) { return t % 3 == 0 }, function (e, t) { return (e + t) % 3 == 0 }, function (e, t) { return (Math.floor(e / 2) + Math.floor(t / 3)) % 2 == 0 }, function (e, t) { return e * t % 2 + e * t % 3 == 0 }, function (e, t) { return (e * t % 2 + e * t % 3) % 2 == 0 }, function (e, t) { return ((e + t) % 2 + e * t % 3) % 2 == 0 }], he = /^\d+/, fe = "A-Z0-9 $%*+./:-", pe = RegExp("^[A-Z $%*+./:-]+"), me = RegExp("^[" + fe + "]+"), ge = RegExp("^[^" + fe + "]+"), ve = Math.round, _e = G.Class.extend({ getVersionIndex: function (e) { return e < 10 ? 0 : e > 26 ? 2 : 1 }, getBitsCharacterCount: function (e) { return this.bitsInCharacterCount[this.getVersionIndex(e || 40)] }, getModeCountString: function (e, t) { return this.modeIndicator + n(e, this.getBitsCharacterCount(t)) }, encode: function () { }, getStringBitsLength: function () { }, getValue: function () { }, modeIndicator: "", bitsInCharacterCount: [] }), be = {}; for (f in be[Z] = _e.extend({ bitsInCharacterCount: [10, 12, 14], modeIndicator: "0001", getValue: function (e) { return parseInt(e, 10) }, encode: function (e, t) { var i, r = o(e, 3), s = this.getModeCountString(e.length, t); for (i = 0; i < r.length - 1; i++)s += n(r[i], 10); return s + n(r[i], 1 + 3 * r[i].length) }, getStringBitsLength: function (e, t) { var i = e % 3; return 4 + this.getBitsCharacterCount(t) + 10 * Math.floor(e / 3) + 3 * i + (0 === i ? 0 : 1) } }), be[J] = _e.extend({ characters: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, G: 16, H: 17, I: 18, J: 19, K: 20, L: 21, M: 22, N: 23, O: 24, P: 25, Q: 26, R: 27, S: 28, T: 29, U: 30, V: 31, W: 32, X: 33, Y: 34, Z: 35, " ": 36, $: 37, "%": 38, "*": 39, "+": 40, "-": 41, ".": 42, "/": 43, ":": 44 }, bitsInCharacterCount: [9, 11, 13], modeIndicator: "0010", getValue: function (e) { return this.characters[e] }, encode: function (e, t) { var i, r, s = this, a = o(e, 2), l = s.getModeCountString(e.length, t); for (r = 0; r < a.length - 1; r++)i = 45 * s.getValue(a[r].charAt(0)) + s.getValue(a[r].charAt(1)), l += n(i, 11); return i = 2 == a[r].length ? 45 * s.getValue(a[r].charAt(0)) + s.getValue(a[r].charAt(1)) : s.getValue(a[r].charAt(0)), l + n(i, 1 + 5 * a[r].length) }, getStringBitsLength: function (e, t) { return 4 + this.getBitsCharacterCount(t) + 11 * Math.floor(e / 2) + e % 2 * 6 } }), be[ee] = _e.extend({ bitsInCharacterCount: [8, 16, 16], modeIndicator: "0100", getValue: function (e) { var t = e.charCodeAt(0); if (t <= 127 || 160 <= t && t <= 255) return t; throw Error("Unsupported character: " + e) }, encode: function (e, t) { var i, o = this.getModeCountString(e.length, t); for (i = 0; i < e.length; i++)o += n(this.getValue(e.charAt(i)), 8); return o }, getStringBitsLength: function (e, t) { return 4 + this.getBitsCharacterCount(t) + 8 * e } }), h = {}, be) h[f] = new be[f]; p = function (e) { var i = this, n = e.length - 1, o = e.length - 1, r = o, s = -1, a = 0; i.move = function () { n += s * a, o = r - (a ^= 1) }, i.getNextCell = function () { for (; e[n][o] !== t;)i.move(), (n < 0 || n >= e.length) && (o = r -= 8 != r ? 2 : 3, n = (s = -s) < 0 ? e.length - 1 : 0); return { row: n, column: o } }, i.getNextRemainderCell = function () { if (i.move(), e[n][o] === t) return { row: n, column: o } } }, m = function (e, t) { var i, n, o, r, a, l, c = new p(e[0]); for (r = 0; r < t.length; r++)for (i = t[r], n = 0; i.length > 0;) { for (a = 0; a < i.length; a++)for (l = 0; l < 8; l++)o = c.getNextCell(), s(e, i[a][n].charAt(l), o.row, o.column); for (n++; i[0] && n == i[0].length;)i.splice(0, 1) } for (; o = c.getNextRemainderCell();)s(e, 0, o.row, o.column) }, g = function (e, t) { for (var i = 8 * t, n = 0, o = 0; e.length < i && n < "0000".length;)e += "0000".charAt(n++); for (e.length % 8 != 0 && (e += Array(9 - e.length % 8).join("0")); e.length < i;)e += ce[o], o ^= 1; return e }, v = function (e, t) { var i, n = [], o = e.length - 2; for (i = o; i >= 0; i--)n[i] = e[i] ^ t[i]; return n }, _ = function (e, i) { var n, o, r = []; for (n = 0; n < e.length; n++)for (o = 0; o < i.length; o++)r[n + o] = r[n + o] === t ? (e[n] + (i[o] >= 0 ? i[o] : 0)) % 255 : te[ie[r[n + o]] ^ ie[(e[n] + i[o]) % 255]]; return r }, function () { var e, t; for (t = 1; t < 255; t++)(e = 2 * ie[t - 1]) > 255 && (e ^= 285), ie[t] = e, te[e] = t; e = 2 * ie[t - 1] ^ 285, ie[t] = e, ie[-1] = 0 }(), function () { var e, t, i; for (e = 2; e <= 68; e++)t = ne[e - 1], i = [e, 0], ne[e] = _(t, i) }(), b = function (e, t) { var i, o, r = ne[t - 1], s = Array(t).concat(e), l = Array(s.length - r.length).concat(r), c = e.length, d = []; for (o = 0; o < c; o++)i = a(l, te[s[s.length - 1]]), l.splice(0, 1), s = v(i, s); for (o = s.length - 1; o >= 0; o--)d[t - 1 - o] = n(s[o], 8); return d }, w = function (e, t) { var n, o, r, s, a, l, c, d, u = 0, h = [], f = [], p = t.groups; for (l = 0; l < p.length; l++)for (r = p[l][0], c = 0; c < r; c++) { for (o = p[l][1], n = [], s = [], d = 1; d <= o; d++)a = e.substring(u, u + 8), n.push(a), s[o - d] = i(a), u += 8; h.push(n), f.push(b(s, t.errorCodewordsPerBlock)) } return [h, f] }, y = function (e, t, i, n, o) { var r, s, a = he.exec(e), l = a ? a[0] : "", c = pe.exec(e), d = c ? c[0] : "", u = me.exec(e), h = u ? u[0] : ""; return l && (l.length >= t || e.length == l.length || l.length >= i && !me.test(e.charAt(l.length))) ? (r = Z, s = l) : h && (e.length == h.length || h.length >= n || o == J) ? (r = J, s = l || d) : (r = ee, s = h ? h + ge.exec(e.substring(h.length))[0] : ge.exec(e)[0]), { mode: r, modeString: s } }, k = function (e) { var t, i, n = [], o = 0; for (n.push(y(e, 8, 5, 8, t)), t = n[0].mode, e = e.substr(n[0].modeString.length); e.length > 0;)(i = y(e, 17, 9, 16, t)).mode != t ? (t = i.mode, n.push(i), o++) : n[o].modeString += i.modeString, e = e.substr(i.modeString.length); return n }, x = function (e) { var t, i, n = 0; for (i = 0; i < e.length; i++)t = h[e[i].mode], n += t.getStringBitsLength(e[i].modeString.length); return Math.ceil(n / 8) }, C = function (e, t) { var i = 0, n = re.length - 1, o = Math.floor(re.length / 2); do { e < re[o][t].totalDataCodewords ? n = o : i = o, o = i + Math.floor((n - i) / 2) } while (n - i > 1); return e <= re[i][t].totalDataCodewords ? o + 1 : n + 1 }, S = function (e, t) { var i, n, o = ""; for (n = 0; n < e.length; n++)i = h[e[n].mode], o += i.encode(e[n].modeString, t); return o }, T = function (e) { var t, n, o = i(e), r = ""; if (0 === o) return "101010000010010"; for (t = D(i(e), "10100110111", 15), n = 0; n < t.length; n++)r += t.charAt(n) ^ "101010000010010".charAt(n); return r }, D = function (e, t, o) { var r = i(t), s = t.length - 1, a = e << s, l = o - s, c = n(e, l), d = A(a, r); return d = c + n(d, s) }, A = function (e, t) { var i = t.toString(2).length, n = e.toString(2).length; do { n = (e ^= t << n - i).toString(2).length } while (n >= i); return e }, E = function (e) { var t, i, n = [], o = 17 + 4 * e; for (t = 0; t < ue.length; t++)for (n[t] = Array(o), i = 0; i < o; i++)n[t][i] = Array(o); return n }, I = function (e, t) { var i, n, o = e[0], s = 0, a = t.length; for (i = 0, n = 8; i <= 8; i++)6 !== i && r(e, l(t, a - 1 - s++), i, n); for (i = 8, n = 7; n >= 0; n--)6 !== n && r(e, l(t, a - 1 - s++), i, n); for (s = 0, n = o.length - 1, i = 8; n >= o.length - 8; n--)r(e, l(t, a - 1 - s++), i, n); for (r(e, 1, o.length - 8, 8), i = o.length - 7, n = 8; i < o.length; i++)r(e, l(t, a - 1 - s++), i, n) }, M = function (e) { return D(e, "1111100100101", 18) }, R = function (e, t) { var i, n, o, s, a = e[0], c = a.length, d = c - 11, u = c - 11; for (s = 0; s < t.length; s++)i = Math.floor(s / 3), n = s % 3, o = l(t, t.length - s - 1), r(e, o, 0 + i, d + n), r(e, o, u + n, 0 + i) }, F = function (e, t, i, n) { var o, s, a, l = t.length + 2, c = t.length + 1; for (s = 0; s < t.length; s++)for (a = s; a < l - s; a++)o = t[s], r(e, o, i + a, n + s), r(e, o, i + s, n + a), r(e, o, i + c - a, n + c - s), r(e, o, i + c - s, n + c - a) }, z = function (e, t, i, n) { var o = i, s = n, a = e[0]; do { r(e, 0, o, n), r(e, 0, i, s), o += t[0], s += t[1] } while (o >= 0 && o < a.length) }, P = function (e) { var t = e[0].length; F(e, se, 0, 0), z(e, [-1, -1], 7, 7), F(e, se, t - 7, 0), z(e, [1, -1], t - 8, 7), F(e, se, 0, t - 7), z(e, [-1, 1], 7, t - 8) }, B = function (e, i) { var n, o, r, s, a, l, c, d, u; if (!(i < 2)) { for (n = e[0], o = n.length, r = Math.floor(i / 7), c = 0, (a = oe[i]) ? l = (o - 13 - a) / r : a = l = (o - 13) / (r + 1), (s = [6]).push(s[c++] + a); s[c] + l < o;)s.push(s[c++] + l); for (d = 0; d < s.length; d++)for (u = 0; u < s.length; u++)n[s[d]][s[u]] === t && F(e, ae, s[d] - 2, s[u] - 2) } }, L = function (e) { var t, i = 1, n = e[0].length; for (t = 8; t < n - 8; t++)r(e, i, 6, t), r(e, i, t, 6), i ^= 1 }, H = function (e) { var t, i, n, o, r, s, a, l = [], h = [], f = [], p = [], m = [], g = e[0].length; for (i = 0; i < e.length; i++)l[i] = 0, f[i] = 0, m[i] = [0, 0], p[i] = [0, 0], h[i] = []; for (i = 0; i < g; i++)for (n = 0; n < g; n++)for (o = 0; o < e.length; o++)t = e[o], f[o] += parseInt(t[i][n], 10), h[o][0] === t[i][n] && i + 1 < g && n - 1 >= 0 && t[i + 1][n] == h[o][0] && t[i + 1][n - 1] == h[o][0] && (l[o] += 3), c(o, p, l, 0, t[i][n]), c(o, p, l, 1, t[n][i]), d(o, l, h, t[i][n], m, 0), d(o, l, h, t[n][i], m, 1); for (r = g * g, a = Number.MAX_VALUE, i = 0; i < l.length; i++)l[i] += u(f[i], r), l[i] < a && (a = l[i], s = i); return s }, N = function (e, t) { this.dataString = e, this.version = t }, O = function () { this.getEncodingResult = function (e, t) { var i = k(e), n = x(i), o = C(n, t), r = S(i, o); return new N(r, o) } }, (V = function () { this.mode = h[this.encodingMode] }).fn = V.prototype = { encodingMode: ee, utfBOM: "111011111011101110111111", initialModeCountStringLength: 20, getEncodingResult: function (e, t) { var i = this, n = i.encode(e), o = i.getDataCodewordsCount(n), r = C(o, t), s = i.mode.getModeCountString(n.length / 8, r) + n; return new N(s, r) }, getDataCodewordsCount: function (e) { var t = e.length, i = Math.ceil((this.initialModeCountStringLength + t) / 8); return i }, encode: function (e) { var t, i = this.utfBOM; for (t = 0; t < e.length; t++)i += this.encodeCharacter(e.charCodeAt(t)); return i }, encodeCharacter: function (e) { var t, i, o = this.getBytesCount(e), r = o - 1, s = ""; if (1 == o) s = n(e, 8); else { for (t = 8 - o, i = 0; i < r; i++)s = n(e >> 6 * i & 63 | 128, 8) + s; s = (e >> 6 * r | 255 >> t << t).toString(2) + s } return s }, getBytesCount: function (e) { var t, i = this.ranges; for (t = 0; t < i.length; t++)if (e < i[t]) return t + 1 }, ranges: [128, 2048, 65536, 2097152, 67108864] }, U = function (e) { return e && e.toLowerCase().indexOf("utf_8") >= 0 ? new V : new O }, W = function (e, t, i) { var o, r, s, a = new U(i), l = a.getEncodingResult(e, t), c = l.version, d = re[c - 1][t], u = g(l.dataString, d.totalDataCodewords), h = w(u, d), f = E(c); return P(f), B(f, c), L(f), c >= 7 && R(f, n(0, 18)), I(f, n(0, 15)), m(f, h), o = H(f), r = f[o], c >= 7 && R([r], M(c)), s = le[t] + n(o, 3), I([r], T(s)), r }, q = { DEFAULT_SIZE: 200, QUIET_ZONE_LENGTH: 4, DEFAULT_ERROR_CORRECTION_LEVEL: "L", DEFAULT_BACKGROUND: "#fff", DEFAULT_DARK_MODULE_COLOR: "#000", MIN_BASE_UNIT_SIZE: 1 }, j = Q.extend({ init: function (t, i) { var n = this; Q.fn.init.call(n, t, i), n.element = e(t), n.wrapper = n.element, n.element.addClass("k-qrcode"), n.surfaceWrap = e("<div />").css("position", "relative").appendTo(this.element), n.surface = Y.Surface.create(n.surfaceWrap, { type: n.options.renderAs }), n.setOptions(i) }, redraw: function () { var e = this._getSize(); this.surfaceWrap.css({ width: e, height: e }), this.surface.clear(), this.createVisual(), this.surface.draw(this.visual) }, getSize: function () { return G.dimensions(this.element) }, _resize: function () { this.redraw() }, createVisual: function () { this.visual = this._render() }, exportVisual: function () { return this._render() }, _render: function () { var e, t, i, n, o, r, s, a = this, l = a._value, c = a.options.border || {}, d = a.options.padding || 0, u = c.width || 0; return c.width = u, s = new Y.Group, l && (i = W(l, a.options.errorCorrection, a.options.encoding), n = a._getSize(), r = n - 2 * (u + d), e = a._calculateBaseUnit(r, i.length), o = i.length * e, t = u + d + (r - o) / 2, s.append(a._renderBackground(n, c)), s.append(a._renderMatrix(i, e, t))), s }, _getSize: function () { var e, t, i, n = this; return n.options.size ? e = parseInt(n.options.size, 10) : (t = n.element, i = Math.min(t.width(), t.height()), e = i > 0 ? i : q.DEFAULT_SIZE), e }, _calculateBaseUnit: function (e, t) { var i = Math.floor(e / t); if (i < q.MIN_BASE_UNIT_SIZE) throw Error("Insufficient size."); return i * t >= e && i - 1 >= q.MIN_BASE_UNIT_SIZE && i--, i }, _renderMatrix: function (e, t, i) { var n, o, r, s, a, l, c, d, u = new Y.MultiPath({ fill: { color: this.options.color }, stroke: null }); for (n = 0; n < e.length; n++)for (o = i + n * t, r = 0; r < e.length;) { for (; 0 === e[n][r] && r < e.length;)r++; if (r < e.length) { for (s = r; 1 == e[n][r];)r++; a = ve(i + s * t), l = ve(o), c = ve(i + r * t), d = ve(o + t), u.moveTo(a, l).lineTo(a, d).lineTo(c, d).lineTo(c, l).close() } } return u }, _renderBackground: function (e, t) { var i = new X(0, 0, e, e).unpad(t.width / 2); return Y.Path.fromRect(i.toRect(), { fill: { color: this.options.background }, stroke: { color: t.color, width: t.width } }) }, setOptions: function (e) { var i = this; e = e || {}, i.options = $(i.options, e), e.value !== t && (i._value = i.options.value + ""), i.redraw() }, value: function (e) { var i = this; return e === t ? i._value : (i._value = e + "", i.redraw(), t) }, options: { name: "QRCode", renderAs: "svg", encoding: "ISO_8859_1", value: "", errorCorrection: q.DEFAULT_ERROR_CORRECTION_LEVEL, background: q.DEFAULT_BACKGROUND, color: q.DEFAULT_DARK_MODULE_COLOR, size: "", padding: 0, border: { color: "", width: 0 } } }), K.ExportMixin.extend(j.fn), K.ui.plugin(j), G.deepExtend(K, { QRCode: j, QRCodeDefaults: q, QRCodeFunctions: { FreeCellVisitor: p, fillData: m, padDataString: g, generateErrorCodewords: b, xorPolynomials: v, getBlocks: w, multiplyPolynomials: _, chooseMode: y, getModes: k, getDataCodewordsCount: x, getVersion: C, getDataString: S, encodeFormatInformation: T, encodeBCH: D, dividePolynomials: A, initMatrices: E, addFormatInformation: I, encodeVersionInformation: M, addVersionInformation: R, addCentricPattern: F, addFinderSeparator: z, addFinderPatterns: P, addAlignmentPatterns: B, addTimingFunctions: L, scoreMaskMatrixes: H, encodeData: W, UTF8Encoder: V }, QRCodeFields: { modes: h, powersOfTwo: te, powersOfTwoResult: ie, generatorPolynomials: ne } }) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/stock/kendo-stock-chart.min", ["kendo.dataviz.chart.min"], function () { !function () { function e(e, t) { var i = document.createElement("div"); return i.className = e, t && (i.style.cssText = t), i } function t() { } function i(e) { return t.prototype = e, new t } var n, o, r, s, a, l, c, d, u, h, f, p, m, g, v; window.kendo.dataviz = window.kendo.dataviz || {}, n = kendo.dataviz, o = n.elementStyles, r = n.deepExtend, s = n.toTime, a = n.services, l = n.constants, c = n.Chart, d = kendo.drawing, u = d.Animation.extend({ setup: function () { this._initialOpacity = parseFloat(o(this.element, "opacity").opacity) }, step: function (e) { o(this.element, { opacity: n.interpolateValue(this._initialOpacity, 0, e) + "" }) }, abort: function () { d.Animation.fn.abort.call(this), o(this.element, { display: "none", opacity: this._initialOpacity + "" }) }, cancel: function () { d.Animation.fn.abort.call(this), o(this.element, { opacity: this._initialOpacity + "" }) } }), h = n.Class.extend({ init: function (e, t, i) { this.options = r({}, this.options, i), this.container = e, this.chartService = t; var n = o(e, ["paddingLeft", "paddingTop"]); this.chartPadding = { top: n.paddingTop, left: n.paddingLeft }, this.createElements(), e.appendChild(this.element) }, createElements: function () { var t = this.element = e("k-navigator-hint", "display: none; position: absolute; top: 1px; left: 1px;"), i = this.tooltip = e("k-tooltip k-chart-tooltip"), n = this.scroll = e("k-scroll"); i.innerHTML = "&nbsp;", t.appendChild(i), t.appendChild(n) }, show: function (e, t, i) { var r, l = this, c = l.element, d = l.options, u = l.scroll, h = l.tooltip, f = n.toDate(s(e) + s(t - e) / 2), p = .4 * i.width(), m = i.center().x - p, g = i.center().x, v = g - m, _ = d.max - d.min, b = v / _, w = f - d.min, y = this.chartService.intl.format(d.format, e, t); this.clearHideTimeout(), this._visible || (o(c, { visibility: "hidden", display: "block" }), this._visible = !0), d.template && (y = a.TemplateService.compile(d.template)({ from: e, to: t })), h.innerHTML = y, o(h, { left: i.center().x - h.offsetWidth / 2, top: i.y1 }), r = o(h, ["marginTop", "borderTopWidth", "height"]), o(u, { width: p, left: m + w * b, top: i.y1 + r.marginTop + r.borderTopWidth + r.height / 2 }), o(c, { visibility: "visible" }) }, clearHideTimeout: function () { this._hideTimeout && clearTimeout(this._hideTimeout), this._hideAnimation && this._hideAnimation.cancel() }, hide: function () { var e = this; this.clearHideTimeout(), this._hideTimeout = setTimeout(function () { e._visible = !1, e._hideAnimation = new u(e.element), e._hideAnimation.setup(), e._hideAnimation.play() }, this.options.hideDelay) }, destroy: function () { this.clearHideTimeout(), this.container && this.container.removeChild(this.element), delete this.container, delete this.chartService, delete this.element, delete this.tooltip, delete this.scroll } }), n.setDefaultOptions(h, { format: "{0:d} - {1:d}", hideDelay: 500 }), m = { NAVIGATOR_AXIS: p = f = "_navigator", NAVIGATOR_PANE: f }, (g = n.Class.extend({ init: function (e) { var t, i, o; this.chart = e, t = this.options = r({}, this.options, e.options.navigator), (i = t.select) && (i.from = this.parseDate(i.from), i.to = this.parseDate(i.to)), n.defined(t.hint.visible) || (t.hint.visible = t.visible), this.chartObserver = new n.InstanceObserver(this, ((o = {})[l.DRAG] = "_drag", o[l.DRAG_END] = "_dragEnd", o[l.ZOOM] = "_zoom", o[l.ZOOM_END] = "_zoomEnd", o)), e.addObserver(this.chartObserver) }, parseDate: function (e) { return n.parseDate(this.chart.chartService.intl, e) }, destroy: function () { this.chart && (this.chart.removeObserver(this.chartObserver), delete this.chart), this.selection && (this.selection.destroy(), delete this.selection), this.hint && (this.hint.destroy(), delete this.hint) }, redraw: function () { this._redrawSelf(), this.initSelection() }, initSelection: function () { var e = this.chart, t = this.options, o = this.mainAxis(), r = o.range(), s = r.min, a = r.max, l = t.select, c = l.from, d = l.to, u = l.mousewheel, f = i(o), p = o.options.categories, m = this.selection; 0 !== p.length && (m && m.destroy(), f.box = o.box, m = this.selection = new n.Selection(e, f, { min: s, max: a, from: c || s, to: d || a, mousewheel: n.valueOrDefault(u, { zoom: "left" }), visible: t.visible }, new n.InstanceObserver(this, { selectStart: "_selectStart", select: "_select", selectEnd: "_selectEnd" })), this.hint && this.hint.destroy(), t.hint.visible && (this.hint = new h(e.element, e.chartService, { min: s, max: a, template: t.hint.template, format: t.hint.format }))) }, setRange: function () { var e, t = this.chart._createPlotArea(!0), i = t.namedCategoryAxes[p], n = i.range(), o = n.min, s = n.max, a = this.options.select || {}, l = a.from || o; l < o && (l = o), (e = a.to || s) > s && (e = s), this.options.select = r({}, a, { from: l, to: e }), this.filterAxes() }, _redrawSelf: function (e) { var t = this.chart._plotArea; t && t.redraw(n.last(t.panes), e) }, redrawSlaves: function () { var e = this.chart, t = e._plotArea, i = t.panes.slice(0, -1); t.srcSeries = e.options.series, t.options.categoryAxis = e.options.categoryAxis, t.redraw(i) }, _drag: function (e) { var t, i, o, r = this.chart, a = this.selection, l = r._eventCoordinates(e.originalEvent), c = this.mainAxis(), d = c.datesRange(), u = c.pane.box.containsPoint(l), h = r._plotArea.categoryAxis, f = e.axisRanges[h.options.name], p = this.options.select; f && !u && a && (t = p.from && p.to ? s(p.to) - s(p.from) : s(a.options.to) - s(a.options.from), i = n.toDate(n.limitValue(s(f.min), d.min, s(d.max) - t)), o = n.toDate(n.limitValue(s(i) + t, s(d.min) + t, d.max)), this.options.select = { from: i, to: o }, this.options.liveDrag && (this.filterAxes(), this.redrawSlaves()), a.set(i, o), this.showHint(i, o)) }, _dragEnd: function () { this.filterAxes(), this.filter(), this.redrawSlaves(), this.hint && this.hint.hide() }, readSelection: function () { var e = this.selection.options, t = e.from, i = e.to, n = this.options.select; n.from = t, n.to = i }, filterAxes: function () { var e, t, i, n, o, r, s = this.options.select; for (void 0 === s && (s = {}), e = this.chart, t = e.options.categoryAxis, i = s.from, n = s.to, o = 0; o < t.length; o++)(r = t[o]).pane !== f && (r.min = i, r.max = n) }, filter: function () { var e, t = this.chart, i = this.options.select; t.requiresHandlers(["navigatorFilter"]) && (e = new n.DateCategoryAxis(r({ baseUnit: "fit" }, t.options.categoryAxis[0], { categories: [i.from, i.to] }), t.chartService).options, this.chart.trigger("navigatorFilter", { from: n.addDuration(e.min, -e.baseUnitStep, e.baseUnit), to: n.addDuration(e.max, e.baseUnitStep, e.baseUnit) })) }, _zoom: function (e) { var t, i, o = this, r = o.chart._plotArea.categoryAxis, s = o.selection, a = o.options, l = a.select, c = a.liveDrag, d = this.mainAxis().options.categories, u = e.delta; s && (t = n.lteDateIndex(s.options.from, d), i = n.lteDateIndex(s.options.to, d), e.originalEvent.preventDefault(), Math.abs(u) > 1 && (u *= 3), i - t > 1 ? (s.expand(u), this.readSelection()) : (r.options.min = l.from, l.from = r.scaleRange(-e.delta).min), c && (this.filterAxes(), this.redrawSlaves()), s.set(l.from, l.to), this.showHint(this.options.select.from, this.options.select.to)) }, _zoomEnd: function (e) { this._dragEnd(e) }, showHint: function (e, t) { var i = this.chart._plotArea; this.hint && this.hint.show(e, t, i.backgroundBox()) }, _selectStart: function (e) { return this.chart._selectStart(e) }, _select: function (e) { return this.showHint(e.from, e.to), this.chart._select(e) }, _selectEnd: function (e) { return this.hint && this.hint.hide(), this.readSelection(), this.filterAxes(), this.filter(), this.redrawSlaves(), this.chart._selectEnd(e) }, mainAxis: function () { var e = this.chart._plotArea; if (e) return e.namedCategoryAxes[p] }, select: function (e, t) { var i = this.options.select; return e && t && (i.from = this.parseDate(e), i.to = this.parseDate(t), this.filterAxes(), this.filter(), this.redrawSlaves(), this.selection.set(e, t)), { from: i.from, to: i.to } } })).setup = function (e, t) { var i, n, o; void 0 === e && (e = {}), void 0 === t && (t = {}), e.__navi || (e.__navi = !0, i = r({}, t.navigator, e.navigator), n = e.panes = [].concat(e.panes), o = r({}, i.pane, { name: f }), i.visible || (o.visible = !1, o.height = .1), n.push(o), g.attachAxes(e, i), g.attachSeries(e, i, t)) }, g.attachAxes = function (e, t) { var i = t.series || [], o = e.categoryAxis = [].concat(e.categoryAxis), s = e.valueAxis = [].concat(e.valueAxis), a = n.filterSeriesByType(i, l.EQUALLY_SPACED_SERIES), c = 0 === a.length, d = r({ type: "date", pane: f, roundToBaseUnit: !c, justified: c, _collapse: !1, majorTicks: { visible: !0 }, tooltip: { visible: !1 }, labels: { step: 1 }, autoBind: t.autoBindElements, autoBaseUnitSteps: { minutes: [1], hours: [1, 2], days: [1, 2], weeks: [], months: [1], years: [1] } }), u = t.categoryAxis; o.push(r({}, d, { maxDateGroups: 200 }, u, { name: p, title: null, baseUnit: "fit", baseUnitStep: "auto", labels: { visible: !1 }, majorTicks: { visible: !1 } }), r({}, d, u, { name: p + "_labels", maxDateGroups: 20, baseUnitStep: "auto", plotBands: [], autoBaseUnitSteps: { minutes: [] }, _overlap: !0 }), r({}, d, u, { name: p + "_ticks", maxDateGroups: 200, majorTicks: { width: .5 }, plotBands: [], title: null, labels: { visible: !1, mirror: !0 }, _overlap: !0 })), s.push(r({ name: p, pane: f, majorGridLines: { visible: !1 }, visible: !1 }, t.valueAxis)) }, g.attachSeries = function (e, t, i) { var n, o = e.series = e.series || [], s = [].concat(t.series || []), a = i.seriesColors, l = t.seriesDefaults; for (n = 0; n < s.length; n++)o.push(r({ color: a[n % a.length], categoryField: t.dateField, visibleInLegend: !1, tooltip: { visible: !1 } }, l, s[n], { axis: p, categoryAxis: p, autoBind: t.autoBindElements })) }, v = c.extend({ applyDefaults: function (e, t) { var i = n.elementSize(this.element).width || l.DEFAULT_WIDTH, o = t, s = { seriesDefaults: { categoryField: e.dateField }, axisDefaults: { categoryAxis: { name: "default", majorGridLines: { visible: !1 }, labels: { step: 2 }, majorTicks: { visible: !1 }, maxDateGroups: Math.floor(i / 28) } } }; o && (o = r({}, o, s)), g.setup(e, o), c.fn.applyDefaults.call(this, e, o) }, _setElementClass: function (e) { n.addClass(e, "k-chart k-stockchart") }, setOptions: function (e) { this.destroyNavigator(), c.fn.setOptions.call(this, e) }, _resize: function () { var e = this.options.transitions; this.options.transitions = !1, this._fullRedraw(), this.options.transitions = e }, _redraw: function () { var e = this.navigator; !this._dirty() && e && e.options.partialRedraw ? e.redrawSlaves() : this._fullRedraw() }, _dirty: function () { var e = this.options, t = [].concat(e.series, e.navigator.series), i = n.grep(t, function (e) { return e && e.visible }).length, o = this._seriesCount !== i; return this._seriesCount = i, o }, _fullRedraw: function () { var e = this.navigator; e || (e = this.navigator = new g(this), this.trigger("navigatorCreated", { navigator: e })), e.setRange(), c.fn._redraw.call(this), e.initSelection() }, _trackSharedTooltip: function (e) { var t = this._plotArea, i = t.paneByPoint(e); i && i.options.name === f ? this._unsetActivePoint() : c.fn._trackSharedTooltip.call(this, e) }, bindCategories: function () { c.fn.bindCategories.call(this), this.copyNavigatorCategories() }, copyNavigatorCategories: function () { var e, t, i, n = [].concat(this.options.categoryAxis); for (t = 0; t < n.length; t++)(i = n[t]).name === p ? e = i.categories : e && i.pane === f && (i.categories = e) }, destroyNavigator: function () { this.navigator && (this.navigator.destroy(), this.navigator = null) }, destroy: function () { this.destroyNavigator(), c.fn.destroy.call(this) }, _stopDragEvent: function (e) { var t = this._eventCoordinates(e), i = this._plotArea.paneByPoint(t); return c.fn._stopDragEvent.call(this, e) || i && i.options.name === f } }), n.setDefaultOptions(v, { dateField: "date", axisDefaults: { categoryAxis: { type: "date", baseUnit: "fit", justified: !0 }, valueAxis: { narrowRange: !0, labels: { format: "C" } } }, navigator: { select: {}, seriesDefaults: { markers: { visible: !1 }, tooltip: { visible: !0 }, line: { width: 2 } }, hint: {}, visible: !0 }, tooltip: { visible: !0 }, legend: { visible: !1 } }), kendo.deepExtend(kendo.dataviz, { constants: m, Navigator: g, NavigatorHint: h, StockChart: v }) }() }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/stock/stock-chart.min", ["dataviz/stock/kendo-stock-chart.min"], function () { !function (e) { function t(e, t) { return [{ field: "Date", operator: "gte", value: e }, { field: "Date", operator: "lt", value: t }] } var i = window.kendo, n = i.dataviz, o = n.ChartInstanceObserver, r = n.ui.Chart, s = n.StockChart, a = n.constants, l = a.NAVIGATOR_AXIS, c = a.NAVIGATOR_PANE, d = i.deepExtend, u = n.defined, h = e.proxy, f = "change", p = o.extend({ handlerMap: { navigatorFilter: "_onNavigatorFilter", navigatorCreated: "_onNavigatorCreated" } }), m = r.extend({ options: { name: "StockChart", dateField: "date", axisDefaults: { categoryAxis: { type: "date", baseUnit: "fit", justified: !0 }, valueAxis: { narrowRange: !0, labels: { format: "C" } } }, navigator: { select: {}, seriesDefaults: { markers: { visible: !1 }, tooltip: { visible: !0, template: "#= kendo.toString(category, 'd') #" }, line: { width: 2 } }, hint: {}, visible: !0 }, tooltip: { visible: !0 }, legend: { visible: !1 } }, _createChart: function (e, t) { this._initNavigatorOptions(e), this._instance = new s(this.element[0], e, t, { observer: new p(this), sender: this }) }, _initNavigatorOptions: function (e) { var t = e.navigator || {}, n = i.support, o = n.touch, r = n.browser.mozilla; d(t, { autoBindElements: !t.dataSource, partialRedraw: t.dataSource, liveDrag: !o && !r }) }, _initDataSource: function (e) { var o, s, a, l, c = e || {}, u = c.dataSource, h = u && u.serverFiltering, f = [].concat(c.categoryAxis)[0], p = c.navigator || {}, m = p.select, g = m && m.from && m.to; h && g && (o = [].concat(u.filter || []), s = i.parseDate(m.from), a = i.parseDate(m.to), l = new n.DateCategoryAxis(d({ baseUnit: "fit" }, f, { categories: [s, a] }), i), u.filter = t(l.range().min, a).concat(o)), r.fn._initDataSource.call(this, e) }, _onNavigatorCreated: function (e) { this._instance = e.sender, this.options = e.sender.options, this._navigator = this.navigator = e.navigator, this._initNavigatorDataSource() }, _initNavigatorDataSource: function () { var e = this.options.navigator, t = e.autoBind, n = e.dataSource; n && (this._navigatorDataChangedHandler = this._navigatorDataChangedHandler || h(this._onNavigatorDataChanged, this), this._navigatorDataSource = i.data.DataSource.create(n).bind(f, this._navigatorDataChangedHandler), u(t) || (t = this.options.autoBind), t && this._navigatorDataSource.fetch()) }, _onNavigatorDataChanged: function () { var e, t, i, n, o, r, s = this, a = s._instance, d = s.options.series, u = d.length, h = s.options.categoryAxis, f = h.length, p = s._navigatorDataSource.view(); for (e = 0; e < u; e++)(i = d[e]).axis == l && s._isBindable(i) && (i.data = p); for (t = 0; t < f; t++)(n = h[t]).pane == c && (n.name == l ? (s._bindCategoryAxis(n, p, t), o = n.categories) : n.categories = o); a._model && ((r = this.navigator).redraw(), r.setRange(), (!s.options.dataSource || s.options.dataSource && s._dataBound) && r.redrawSlaves()) }, _bindCategories: function () { r.fn._bindCategories.call(this), this._instance && this._instance.copyNavigatorCategories() }, _onDataChanged: function () { r.fn._onDataChanged.call(this), this._dataBound = !0 }, setOptions: function (e) { this._removeNavigatorDataSource(), this._initNavigatorOptions(e), this._instance.destroyNavigator(), r.fn.setOptions.call(this, e) }, _onNavigatorFilter: function (e) { this.dataSource.filter(t(e.from, e.to)) }, requiresHandlers: function (e) { var t; return n.inArray("navigatorFilter", e) ? (t = this.dataSource, t && t.options.serverFiltering && this.options.navigator.dataSource) : r.fn.requiresHandlers.call(this, e) }, _removeNavigatorDataSource: function () { var e = this._navigatorDataSource; e && (e.unbind(f, this._navigatorDataChangedHandler), delete this._navigatorDataSource) }, destroy: function () { r.fn.destroy.call(this), this._removeNavigatorDataSource() } }); n.ui.plugin(m) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.stock.min", ["dataviz/stock/kendo-stock-chart.min", "dataviz/stock/stock-chart.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/sparkline/kendo-sparkline.min", ["kendo.dataviz.chart.min"], function () { !function () { function e(e) { var t, i, n = []; for (t = 0; t < e.length; t++)i = e[t], n[t] = i.style.display, i.style.display = "none"; return n } function t(e, t) { for (var i = 0; i < e.length; i++)e[i].style.display = t[i] } function i(e) { return n.isNumber(e) ? [e] : e } var n, o, r, s, a, l, c, d; window.kendo.dataviz = window.kendo.dataviz || {}, n = kendo.dataviz, o = n.constants, r = n.Chart, s = n.elementSize, a = n.deepExtend, l = n.SharedTooltip.extend({ _slotAnchor: function (e, t) { var i = this.plotArea.categoryAxis, o = i.options.vertical, r = o ? { horizontal: "left", vertical: "center" } : { horizontal: "center", vertical: "bottom" }; return { point: o ? new n.Point(this.plotArea.box.x2, t.center().y) : new n.Point(t.center().x, -2), align: r } }, _defaultAnchor: function (e, t) { return this._slotAnchor({}, t) } }), c = [o.BAR, o.BULLET], (d = r.extend({ _setElementClass: function (e) { n.addClass(e, "k-sparkline") }, _initElement: function (e) { r.fn._initElement.call(this, e), this._initialWidth = Math.floor(s(e).width) }, _resize: function () { var i = this.element, n = e(i.childNodes); this._initialWidth = Math.floor(s(i).width), t(i.childNodes, n), r.fn._resize.call(this) }, _modelOptions: function () { var i, n = this.options, o = this._surfaceWrap(), r = e(o.childNodes), l = document.createElement("span"); return l.innerHTML = "&nbsp;", o.appendChild(l), i = a({ width: this._autoWidth, height: s(o).height, transitions: n.transitions }, n.chartArea, { inline: !0, align: !1 }), s(o, { width: i.width, height: i.height }), o.removeChild(l), t(o.childNodes, r), this.surface.resize(), i }, _surfaceWrap: function () { if (!this.stage) { var e = this.stage = document.createElement("span"); this.element.appendChild(e) } return this.stage }, _createPlotArea: function (e) { var t = r.fn._createPlotArea.call(this, e); return this._autoWidth = this._initialWidth || this._calculateWidth(t), t }, _calculateWidth: function (e) { var t, i, r, a, l, c, d = this.options, u = n.getSpacing(d.chartArea.margin), h = e.charts, f = this._surfaceWrap(), p = 0; for (t = 0; t < h.length; t++)if (i = h[t], r = (i.options.series || [])[0]) { if (r.type === o.BAR) return 150; if (r.type === o.BULLET) return 150; if (r.type === o.PIE) return s(f).height; (a = i.categoryAxis) && (l = a.options.categories.length * (!i.options.isStacked && n.inArray(r.type, [o.COLUMN, o.VERTICAL_BULLET]) ? i.seriesOptions.length : 1), p = Math.max(p, l)) } return (c = p * d.pointWidth) > 0 && (c += u.left + u.right), c }, _createSharedTooltip: function (e) { return new l(this._plotArea, e) } })).normalizeOptions = function (e) { var t = i(e); return (t = n.isArray(t) ? { seriesDefaults: { data: t } } : a({}, t)).series || (t.series = [{ data: i(t.data) }]), a(t, { seriesDefaults: { type: t.type } }), (n.inArray(t.series[0].type, c) || n.inArray(t.seriesDefaults.type, c)) && (t = a({}, { categoryAxis: { crosshair: { visible: !1 } } }, t)), t }, n.setDefaultOptions(d, { chartArea: { margin: 2 }, axisDefaults: { visible: !1, majorGridLines: { visible: !1 }, valueAxis: { narrowRange: !0 } }, seriesDefaults: { type: "line", area: { line: { width: .5 } }, bar: { stack: !0 }, padding: 2, width: .5, overlay: { gradient: null }, highlight: { visible: !1 }, border: { width: 0 }, markers: { size: 2, visible: !1 } }, tooltip: { visible: !0, shared: !0 }, categoryAxis: { crosshair: { visible: !0, tooltip: { visible: !1 } } }, legend: { visible: !1 }, transitions: !1, pointWidth: 5, panes: [{ clip: !1 }] }), kendo.deepExtend(kendo.dataviz, { Sparkline: d }) }() }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/sparkline/sparkline.min", ["dataviz/sparkline/kendo-sparkline.min"], function () { t = kendo.dataviz, i = t.ui.Chart, n = t.Sparkline, o = t.ChartInstanceObserver, r = i.extend({ init: function (e, t) { var o = t; o instanceof kendo.data.ObservableArray && (o = { seriesDefaults: { data: o } }), i.fn.init.call(this, e, n.normalizeOptions(o)) }, _createChart: function (e, t) { this._instance = new n(this.element[0], e, t, { observer: new o(this), sender: this }) }, _createTooltip: function () { return new e(this.element, this.options.tooltip) }, options: { name: "Sparkline", chartArea: { margin: 2 }, axisDefaults: { visible: !1, majorGridLines: { visible: !1 }, valueAxis: { narrowRange: !0 } }, seriesDefaults: { type: "line", area: { line: { width: .5 } }, bar: { stack: !0 }, padding: 2, width: .5, overlay: { gradient: null }, highlight: { visible: !1 }, border: { width: 0 }, markers: { size: 2, visible: !1 } }, tooltip: { visible: !0, shared: !0 }, categoryAxis: { crosshair: { visible: !0, tooltip: { visible: !1 } } }, legend: { visible: !1 }, transitions: !1, pointWidth: 5, panes: [{ clip: !1 }] } }), t.ui.plugin(r), e = t.Tooltip.extend({ options: { animation: { duration: 0 } }, _hideElement: function () { this.element && this.element.hide().remove() } }), t.SparklineTooltip = e; var e, t, i, n, o, r }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.sparkline.min", ["dataviz/sparkline/kendo-sparkline.min", "dataviz/sparkline/sparkline.min"], function () { }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/location.min", ["kendo.drawing.min", "util/main.min"], function () { window.kendo.jQuery, t = Math, i = t.abs, n = t.atan, o = t.atan2, r = t.cos, s = t.max, a = t.min, l = t.sin, c = t.tan, d = window.kendo, u = d.Class, h = d.dataviz, f = d.deepExtend, p = d.drawing.util, m = p.defined, g = p.deg, v = p.rad, _ = p.round, b = p.valueOrDefault, w = d.util.sqr, y = u.extend({ init: function (e, t) { 1 === arguments.length ? (this.lat = e[0], this.lng = e[1]) : (this.lat = e, this.lng = t) }, DISTANCE_ITERATIONS: 100, DISTANCE_CONVERGENCE: 1e-12, DISTANCE_PRECISION: 2, FORMAT: "{0:N6},{1:N6}", toArray: function () { return [this.lat, this.lng] }, equals: function (e) { return e && e.lat === this.lat && e.lng === this.lng }, clone: function () { return new y(this.lat, this.lng) }, round: function (e) { return this.lng = _(this.lng, e), this.lat = _(this.lat, e), this }, wrap: function () { return this.lng = this.lng % 180, this.lat = this.lat % 90, this }, distanceTo: function (e, t) { return this.greatCircleTo(e, t).distance }, destination: function (e, i, n) { var s, a, c, u, f; return i = v(i), n = n || h.map.datums.WGS84, s = v(this.lat), a = v(this.lng), c = e / d.dataviz.map.datums.WGS84.a, u = t.asin(l(s) * r(c) + r(s) * l(c) * r(i)), f = a + o(l(i) * l(c) * r(s), r(c) - l(s) * l(u)), new y(g(u), g(f)) }, greatCircleTo: function (e, s) { var a, d, u, f, p, m, b, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L, H, N, O, V, U, W; if (e = y.create(e), s = s || h.map.datums.WGS84, !e || this.clone().round(8).equals(e.clone().round(8))) return { distance: 0, azimuthFrom: 0, azimuthTo: 0 }; for (a = s.a, d = s.b, u = s.f, f = v(e.lng - this.lng), p = n((1 - u) * c(v(this.lat))), m = l(p), b = r(p), k = n((1 - u) * c(v(e.lat))), x = l(k), C = r(k), S = f, D = this.DISTANCE_ITERATIONS, A = !1; !A && D-- > 0;)E = l(S), I = r(S), M = t.sqrt(w(C * E) + w(b * x - m * C * I)), P = o(M, F = m * x + b * C * I), R = 1 - w(B = b * C * E / M), z = 0, 0 !== R && (z = F - 2 * m * x / R), T = S, S = f + (1 - (L = u / 16 * R * (4 + u * (4 - 3 * R)))) * u * B * (P + L * M * (z + L * F * (2 * w(z) - 1))), A = i(S - T) <= this.DISTANCE_CONVERGENCE; return H = R * (w(a) - w(d)) / w(d), N = 1 + H / 16384 * (4096 + H * (H * (320 - 175 * H) - 768)), V = (O = H / 1024 * (256 + H * (H * (74 - 47 * H) - 128))) * M * (z + O / 4 * (F * (2 * w(z) - 1) - O / 6 * z * (4 * w(M) - 3) * (4 * w(z) - 3))), U = o(C * E, b * x - m * C * I), W = o(b * E, -m * C + b * x * I), { distance: _(d * N * (P - V), this.DISTANCE_PRECISION), azimuthFrom: g(U), azimuthTo: g(W) } } }), y.fn.toString = function () { return d.format(this.FORMAT, this.lat, this.lng) }, y.fromLngLat = function (e) { return new y(e[1], e[0]) }, y.fromLatLng = function (e) { return new y(e[0], e[1]) }, y.create = function (e, t) { if (m(e)) return e instanceof y ? e.clone() : 1 === arguments.length && 2 === e.length ? y.fromLatLng(e) : new y(e, t) }, (e = u.extend({ init: function (e, t) { e = y.create(e), t = y.create(t), e.lng + 180 > t.lng + 180 && e.lat + 90 < t.lat + 90 ? (this.se = e, this.nw = t) : (this.se = t, this.nw = e) }, contains: function (e) { var t = this.nw, i = this.se, n = b(e.lng, e[1]), o = b(e.lat, e[0]); return e && n + 180 >= t.lng + 180 && n + 180 <= i.lng + 180 && o + 90 >= i.lat + 90 && o + 90 <= t.lat + 90 }, center: function () { var e = this.nw, t = this.se, i = e.lng + (t.lng - e.lng) / 2, n = e.lat + (t.lat - e.lat) / 2; return new y(n, i) }, containsAny: function (e) { var t, i = !1; for (t = 0; t < e.length; t++)i = i || this.contains(e[t]); return i }, include: function (e) { var t = this.nw, i = this.se, n = b(e.lng, e[1]), o = b(e.lat, e[0]); t.lng = a(t.lng, n), t.lat = s(t.lat, o), i.lng = s(i.lng, n), i.lat = a(i.lat, o) }, includeAll: function (e) { for (var t = 0; t < e.length; t++)this.include(e[t]) }, edges: function () { var e = this.nw, t = this.se; return { nw: this.nw, ne: new y(e.lat, t.lng), se: this.se, sw: new y(t.lat, e.lng) } }, toArray: function () { var e = this.nw, t = this.se; return [e, new y(e.lat, t.lng), t, new y(t.lat, e.lng)] }, overlaps: function (e) { return this.containsAny(e.toArray()) || e.containsAny(this.toArray()) } })).World = new e([90, -180], [-90, 180]), e.create = function (t, i) { return t instanceof e ? t : t && i ? new e(t, i) : t && 4 === t.length && !i ? new e([t[0], t[1]], [t[2], t[3]]) : void 0 }, f(h, { map: { Extent: e, Location: y } }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/attribution.min", ["kendo.drawing.min"], function () { window.kendo.jQuery, e = window.kendo, t = e.ui.Widget, i = e.template, n = e.drawing.util, o = n.valueOrDefault, r = n.defined, s = t.extend({ init: function (e, i) { t.fn.init.call(this, e, i), this._initOptions(i), this.items = [], this.element.addClass("k-widget k-attribution") }, options: { name: "Attribution", separator: "&nbsp;|&nbsp;", itemTemplate: "#= text #" }, filter: function (e, t) { this._extent = e, this._zoom = t, this._render() }, add: function (e) { r(e) && ("string" == typeof e && (e = { text: e }), this.items.push(e), this._render()) }, remove: function (e) { var t, i, n = []; for (t = 0; t < this.items.length; t++)(i = this.items[t]).text !== e && n.push(i); this.items = n, this._render() }, clear: function () { this.items = [], this.element.empty() }, _render: function () { var e, t, n, o = [], r = i(this.options.itemTemplate); for (e = 0; e < this.items.length; e++)t = this.items[e], "" !== (n = this._itemText(t)) && o.push(r({ text: n })); o.length > 0 ? this.element.empty().append(o.join(this.options.separator)).show() : this.element.hide() }, _itemText: function (e) { var t = "", i = this._inZoomLevel(e.minZoom, e.maxZoom), n = this._inArea(e.extent); return i && n && (t += e.text), t }, _inZoomLevel: function (e, t) { return e = o(e, -Number.MAX_VALUE), t = o(t, Number.MAX_VALUE), this._zoom > e && this._zoom < t }, _inArea: function (e) { var t = !0; return e && (t = e.contains(this._extent)), t } }), e.dataviz.ui.plugin(s); var e, t, i, n, o, r, s }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/navigator.min", ["kendo.core.min"], function () { !function (e) { function t(e) { return i.format('<button class="k-button k-navigator-{0}" aria-label="move {0}"><span class="k-icon k-i-arrow-60-{0}"/></button>', e) } var i = window.kendo, n = i.ui.Widget, o = i.keys, r = e.proxy, s = t("up") + t("right") + t("down") + t("left"), a = n.extend({ init: function (e, t) { n.fn.init.call(this, e, t), this._initOptions(t), this.element.addClass("k-widget k-header k-shadow k-navigator").append(s).on("click.kendoNavigator", ".k-button", r(this, "_click")); var o = this.element.parent().closest("[" + i.attr("role") + "]"); this._keyroot = o.length > 0 ? o : this.element, this._tabindex(this._keyroot), this._keydown = r(this._keydown, this), this._keyroot.on("keydown", this._keydown) }, options: { name: "Navigator", panStep: 1 }, events: ["pan"], dispose: function () { this._keyroot.off("keydown", this._keydown) }, _pan: function (e, t) { var i = this.options.panStep; this.trigger("pan", { x: e * i, y: t * i }) }, _click: function (t) { var i = 0, n = 0, o = e(t.currentTarget); o.is(".k-navigator-up") ? n = 1 : o.is(".k-navigator-down") ? n = -1 : o.is(".k-navigator-right") ? i = 1 : o.is(".k-navigator-left") && (i = -1), this._pan(i, n), t.preventDefault() }, _keydown: function (e) { switch (e.which) { case o.UP: this._pan(0, 1), e.preventDefault(); break; case o.DOWN: this._pan(0, -1), e.preventDefault(); break; case o.RIGHT: this._pan(1, 0), e.preventDefault(); break; case o.LEFT: this._pan(-1, 0), e.preventDefault() } } }); i.dataviz.ui.plugin(a) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/zoom.min", ["kendo.core.min"], function () { !function (e) { function t(e, t) { return i.format('<button class="k-button k-zoom-{0}" title="zoom-{0}" aria-label="zoom-{0}"><span class="k-icon {1}"></span></button>', e, t) } var i = window.kendo, n = i.ui.Widget, o = i.keys, r = e.proxy, s = t("in", "k-i-plus") + t("out", "k-i-minus"), a = n.extend({ init: function (e, t) { n.fn.init.call(this, e, t), this._initOptions(t), this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal k-button-group k-group-horizontal").append(s).on("click.kendoZoomControl", ".k-button", r(this, "_click")); var o = this.element.parent().closest("[" + i.attr("role") + "]"); this._keyroot = o.length > 0 ? o : this.element, this._tabindex(this._keyroot), this._keydown = r(this._keydown, this), this._keyroot.on("keydown", this._keydown) }, options: { name: "ZoomControl", zoomStep: 1 }, events: ["change"], _change: function (e) { var t = this.options.zoomStep; this.trigger("change", { delta: e * t }) }, _click: function (t) { var i = e(t.currentTarget), n = 1; i.is(".k-zoom-out") && (n = -1), this._change(n), t.preventDefault() }, _keydown: function (e) { switch (e.which) { case o.NUMPAD_PLUS: case 187: case 61: this._change(1); break; case o.NUMPAD_MINUS: case 189: case 173: this._change(-1) } } }); i.dataviz.ui.plugin(a) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/crs.min", ["dataviz/map/location.min", "kendo.drawing.min"], function () { window.kendo.jQuery, e = Math, t = e.atan, i = e.exp, n = e.pow, o = e.sin, r = e.log, s = e.tan, a = window.kendo, l = a.Class, c = a.dataviz, d = a.deepExtend, u = a.geometry, h = u.Point, f = c.map, p = f.Location, m = a.drawing.util, g = m.rad, v = m.deg, _ = m.limitValue, b = e.PI, w = b / 2, y = b / 4, k = b / 180, x = { a: 6378137, b: 6356752.314245179, f: .0033528106647474805, e: .08181919084262149 }, C = l.extend({ init: function (e) { this._initOptions(e) }, MAX_LNG: 180, MAX_LAT: 85.0840590501, INVERSE_ITERATIONS: 15, INVERSE_CONVERGENCE: 1e-12, options: { centralMeridian: 0, datum: x }, forward: function (e, t) { var i = this, n = i.options, o = n.datum, r = o.a, s = n.centralMeridian, a = _(e.lat, -i.MAX_LAT, i.MAX_LAT), l = t ? _(e.lng, -i.MAX_LNG, i.MAX_LNG) : e.lng, c = g(l - s) * r, d = i._projectLat(a); return new h(c, d) }, _projectLat: function (e) { var t = this.options.datum, i = t.e, a = t.a, l = g(e), c = s(y + l / 2), d = i * o(l), u = n((1 - d) / (1 + d), i / 2); return a * r(c * u) }, inverse: function (e, t) { var i = this, n = i.options, o = n.datum, r = o.a, s = n.centralMeridian, a = e.x / (k * r) + s, l = _(i._inverseY(e.y), -i.MAX_LAT, i.MAX_LAT); return t && (a = _(a, -i.MAX_LNG, i.MAX_LNG)), new p(l, a) }, _inverseY: function (r) { var s, a, l, c, d = this, u = d.options.datum, h = u.a, f = u.e, p = f / 2, m = i(-r / h), g = w - 2 * t(m); for (s = 0; s <= d.INVERSE_ITERATIONS && (a = f * o(g), l = n((1 - a) / (1 + a), p), c = w - 2 * t(m * l) - g, g += c, !(e.abs(c) <= d.INVERSE_CONVERGENCE)); s++); return v(g) } }), S = C.extend({ MAX_LAT: 85.0511287798, _projectLat: function (e) { var t = this.options.datum.a, i = g(e), n = s(y + i / 2); return t * r(n) }, _inverseY: function (e) { var n = this.options.datum.a, o = i(-e / n); return v(w - 2 * t(o)) } }), T = l.extend({ forward: function (e) { return new h(e.lng, e.lat) }, inverse: function (e) { return new p(e.y, e.x) } }), D = l.extend({ init: function () { var e = this._proj = new S, t = this.c = 2 * b * e.options.datum.a; this._tm = u.transform().translate(.5, .5).scale(1 / t, -1 / t), this._itm = u.transform().scale(t, -t).translate(-.5, -.5) }, toPoint: function (e, t, i) { var n = this._proj.forward(e, i); return n.transform(this._tm).scale(t || 1) }, toLocation: function (e, t, i) { return e = e.clone().scale(1 / (t || 1)).transform(this._itm), this._proj.inverse(e, i) } }), A = l.extend({ init: function () { this._proj = new C }, toPoint: function (e) { return this._proj.forward(e) }, toLocation: function (e) { return this._proj.inverse(e) } }), E = l.extend({ init: function () { this._proj = new T }, toPoint: function (e) { return this._proj.forward(e) }, toLocation: function (e) { return this._proj.inverse(e) } }), d(c, { map: { crs: { EPSG3395: A, EPSG3857: D, EPSG4326: E }, datums: { WGS84: x }, projections: { Equirectangular: T, Mercator: C, SphericalMercator: S } } }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/layers/base.min", ["kendo.core.min", "dataviz/map/location.min"], function () { e = window.kendo.jQuery, t = e.proxy, i = window.kendo, n = i.Class, o = i.dataviz, r = i.deepExtend, s = o.map.Extent, a = i.drawing.util, l = a.defined, c = n.extend({ init: function (i, n) { this._initOptions(n), this.map = i, this.element = e("<div class='k-layer'></div>").css({ zIndex: this.options.zIndex, opacity: this.options.opacity }).appendTo(i.scrollElement), this._beforeReset = t(this._beforeReset, this), this._reset = t(this._reset, this), this._resize = t(this._resize, this), this._panEnd = t(this._panEnd, this), this._activate(), this._updateAttribution() }, destroy: function () { this._deactivate() }, show: function () { this.reset(), this._activate(), this._applyExtent(!0) }, hide: function () { this._deactivate(), this._setVisibility(!1) }, reset: function () { this._beforeReset(), this._reset() }, _reset: function () { this._applyExtent() }, _beforeReset: e.noop, _resize: e.noop, _panEnd: function () { this._applyExtent() }, _applyExtent: function () { var e = this.options, t = this.map.zoom(), i = !l(e.minZoom) || t >= e.minZoom, n = !l(e.maxZoom) || t <= e.maxZoom, o = s.create(e.extent), r = !o || o.overlaps(this.map.extent()); this._setVisibility(i && n && r) }, _setVisibility: function (e) { this.element.css("display", e ? "" : "none") }, _activate: function () { var e = this.map; e.bind("beforeReset", this._beforeReset), e.bind("reset", this._reset), e.bind("resize", this._resize), e.bind("panEnd", this._panEnd) }, _deactivate: function () { var e = this.map; e.unbind("beforeReset", this._beforeReset), e.unbind("reset", this._reset), e.unbind("resize", this._resize), e.unbind("panEnd", this._panEnd) }, _updateAttribution: function () { var e = this.map.attribution; e && e.add(this.options.attribution) } }), r(o, { map: { layers: { Layer: c } } }); var e, t, i, n, o, r, s, a, l, c }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/layers/shape.min", ["dataviz/map/layers/base.min", "dataviz/map/location.min"], function () { e = window.kendo.jQuery, t = e.proxy, i = window.kendo, n = i.Class, o = i.data.DataSource, r = i.dataviz, s = i.deepExtend, a = i.geometry, l = i.drawing, c = l.Group, d = l.util.last, u = l.util.defined, h = r.map, f = h.Location, p = h.layers.Layer, m = p.extend({ init: function (e, n) { this._pan = t(this._pan, this), p.fn.init.call(this, e, n), this.surface = l.Surface.create(this.element, { width: e.scrollElement.width(), height: e.scrollElement.height() }), this._initRoot(), this.movable = new i.ui.Movable(this.surface.element), this._markers = [], this._click = this._handler("shapeClick"), this.surface.bind("click", this._click), this._mouseenter = this._handler("shapeMouseEnter"), this.surface.bind("mouseenter", this._mouseenter), this._mouseleave = this._handler("shapeMouseLeave"), this.surface.bind("mouseleave", this._mouseleave), this._initDataSource() }, options: { autoBind: !0 }, destroy: function () { p.fn.destroy.call(this), this.surface.destroy(), this.dataSource.unbind("change", this._dataChange) }, setDataSource: function (e) { this.dataSource && this.dataSource.unbind("change", this._dataChange), this.dataSource = i.data.DataSource.create(e), this.dataSource.bind("change", this._dataChange), this.options.autoBind && this.dataSource.fetch() }, _reset: function () { p.fn._reset.call(this), this._translateSurface(), this._data && this._load(this._data) }, _initRoot: function () { this._root = new c, this.surface.draw(this._root) }, _beforeReset: function () { this.surface.clear(), this._initRoot() }, _resize: function () { this.surface.size(this.map.size()) }, _initDataSource: function () { var e = this.options.dataSource; this._dataChange = t(this._dataChange, this), this.dataSource = o.create(e).bind("change", this._dataChange), e && this.options.autoBind && this.dataSource.fetch() }, _dataChange: function (e) { this._data = e.sender.view(), this._load(this._data) }, _load: function (e) { var t, i, n; for (this._clearMarkers(), this._loader || (this._loader = new g(this.map, this.options.style, this)), t = new c, i = 0; i < e.length; i++)(n = this._loader.parse(e[i])) && t.append(n); this._root.clear(), this._root.append(t) }, shapeCreated: function (e) { var t, i = !1; return e instanceof l.Circle && (i = u(this._createMarker(e))), i || (t = { layer: this, shape: e }, i = this.map.trigger("shapeCreated", t)), i }, featureCreated: function (e) { e.layer = this, this.map.trigger("shapeFeatureCreated", e) }, _createMarker: function (e) { var t = this.map.markers.bind({ location: e.location }, e.dataItem); return t && this._markers.push(t), t }, _clearMarkers: function () { for (var e = 0; e < this._markers.length; e++)this.map.markers.remove(this._markers[e]); this._markers = [] }, _pan: function () { this._panning || (this._panning = !0, this.surface.suspendTracking()) }, _panEnd: function (e) { p.fn._panEnd.call(this, e), this._translateSurface(), this.surface.resumeTracking(), this._panning = !1 }, _translateSurface: function () { var e = this.map, t = e.locationToView(e.extent().nw); this.surface.translate && (this.surface.translate(t), this.movable.moveTo({ x: t.x, y: t.y })) }, _handler: function (e) { var t = this; return function (i) { if (i.element) { var n = { layer: t, shape: i.element, originalEvent: i.originalEvent }; t.map.trigger(e, n) } } }, _activate: function () { p.fn._activate.call(this), this.map.bind("pan", this._pan) }, _deactivate: function () { p.fn._deactivate.call(this), this.map.unbind("pan", this._pan) } }), g = n.extend({ init: function (e, t, i) { this.observer = i, this.locator = e, this.style = t }, parse: function (e) { var t = new c, i = !0; return "Feature" === e.type ? (i = !1, this._loadGeometryTo(t, e.geometry, e), this._featureCreated(t, e)) : this._loadGeometryTo(t, e, e), i && t.children.length < 2 && (t = t.children[0]), t }, _shapeCreated: function (e) { var t = !1; return this.observer && this.observer.shapeCreated && (t = this.observer.shapeCreated(e)), t }, _featureCreated: function (e, t) { this.observer && this.observer.featureCreated && this.observer.featureCreated({ group: e, dataItem: t, properties: t.properties }) }, _loadGeometryTo: function (e, t, i) { var n, o, r = t.coordinates; switch (t.type) { case "LineString": o = this._loadPolygon(e, [r], i), this._setLineFill(o); break; case "MultiLineString": for (n = 0; n < r.length; n++)o = this._loadPolygon(e, [r[n]], i), this._setLineFill(o); break; case "Polygon": this._loadPolygon(e, r, i); break; case "MultiPolygon": for (n = 0; n < r.length; n++)this._loadPolygon(e, r[n], i); break; case "Point": this._loadPoint(e, r, i); break; case "MultiPoint": for (n = 0; n < r.length; n++)this._loadPoint(e, r[n], i) } }, _setLineFill: function (e) { var t = e.segments; (t.length < 4 || !t[0].anchor().equals(d(t).anchor())) && (e.options.fill = null) }, _loadShape: function (e, t) { return this._shapeCreated(t) || e.append(t), t }, _loadPolygon: function (e, t, i) { var n = this._buildPolygon(t); return n.dataItem = i, this._loadShape(e, n) }, _buildPolygon: function (e) { var t, i, n, o = e.length > 1 ? l.MultiPath : l.Path, r = new o(this.style); for (t = 0; t < e.length; t++)for (i = 0; i < e[t].length; i++)n = this.locator.locationToView(f.fromLngLat(e[t][i])), 0 === i ? r.moveTo(n.x, n.y) : r.lineTo(n.x, n.y); return r }, _loadPoint: function (e, t, i) { var n = f.fromLngLat(t), o = this.locator.locationToView(n), r = new a.Circle(o, 10), s = new l.Circle(r, this.style); return s.dataItem = i, s.location = n, this._loadShape(e, s) } }), s(i.data, { schemas: { geojson: { type: "json", data: function (e) { return "FeatureCollection" === e.type ? e.features : "GeometryCollection" === e.type ? e.geometries : e } } }, transports: { geojson: { read: { dataType: "json" } } } }), s(r, { map: { layers: { shape: m, ShapeLayer: m }, GeoJSONLoader: g } }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/layers/bubble.min", ["dataviz/map/layers/shape.min"], function () { window.kendo.jQuery, e = window.kendo, t = e.getter, i = e.dataviz, n = e.deepExtend, o = e.geometry, r = e.drawing, s = r.util, a = s.defined, l = i.map, c = l.Location, d = l.layers.ShapeLayer, u = d.extend({ options: { autoBind: !0, locationField: "location", valueField: "value", minSize: 0, maxSize: 100, scale: "sqrt", symbol: "circle" }, _load: function (e) { var i, n, o, r, s, l, d, u, h, f, p; if (this.surface.clear(), 0 !== e.length) for (i = this.options, n = t(i.valueField), (e = e.slice(0)).sort(function (e, t) { return n(t) - n(e) }), o = this._scaleType(), s = 0; s < e.length; s++)l = e[s], d = t(i.locationField)(l), u = t(i.valueField)(l), a(d) && a(u) && (r || (r = new o([0, u], [i.minSize, i.maxSize])), d = c.create(d), h = this.map.locationToView(d), f = r.map(u), (p = this._createSymbol({ center: h, size: f, style: i.style, dataItem: l, location: d })).dataItem = l, p.location = d, p.value = u, this._drawSymbol(p)) }, _scaleType: function () { var t = this.options.scale; return e.isFunction(t) ? t : i.map.scales[t] }, _createSymbol: function (t) { var n = this.options.symbol; return e.isFunction(n) || (n = i.map.symbols[n]), n(t) }, _drawSymbol: function (e) { var t = { layer: this, shape: e }, i = this.map.trigger("shapeCreated", t); i || this.surface.draw(e) } }), h = e.Class.extend({ init: function (e, t) { var i, n; this._domain = e, this._range = t, i = Math.sqrt(e[1]) - Math.sqrt(e[0]), n = t[1] - t[0], this._ratio = n / i }, map: function (e) { var t = (Math.sqrt(e) - Math.sqrt(this._domain[0])) * this._ratio; return this._range[0] + t } }), f = { circle: function (e) { var t = new o.Circle(e.center, e.size / 2); return new r.Circle(t, e.style) }, square: function (e) { var t = new r.Path(e.style), i = e.size / 2, n = e.center; return t.moveTo(n.x - i, n.y - i).lineTo(n.x + i, n.y - i).lineTo(n.x + i, n.y + i).lineTo(n.x - i, n.y + i).close(), t } }, n(i, { map: { layers: { bubble: u, BubbleLayer: u }, scales: { sqrt: h }, symbols: f } }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/layers/tile.min", ["dataviz/map/layers/base.min", "dataviz/map/location.min"], function () { !function (e, t) { var i = Math, n = e.proxy, o = window.kendo, r = o.Class, s = o.template, a = o.dataviz, l = o.deepExtend, c = o.geometry, d = c.Point, u = a.map.layers.Layer, h = o.util, f = h.renderSize, p = o.drawing.util, m = p.round, g = p.limitValue, v = u.extend({ init: function (e, t) { u.fn.init.call(this, e, t), "string" == typeof this.options.subdomains && (this.options.subdomains = this.options.subdomains.split("")); var i = this._viewType(); this._view = new i(this.element, this.options) }, destroy: function () { u.fn.destroy.call(this), this._view.destroy(), this._view = null }, _beforeReset: function () { var e = this.map, t = e.locationToLayer(e.extent().nw).round(); this._view.viewOrigin(t) }, _reset: function () { u.fn._reset.call(this), this._updateView(), this._view.reset() }, _viewType: function () { return _ }, _activate: function () { u.fn._activate.call(this), o.support.mobileOS || (this._pan || (this._pan = o.throttle(n(this._render, this), 100)), this.map.bind("pan", this._pan)) }, _deactivate: function () { u.fn._deactivate.call(this), this._pan && this.map.unbind("pan", this._pan) }, _updateView: function () { var e = this._view, t = this.map, i = t.extent(), n = { nw: t.locationToLayer(i.nw).round(), se: t.locationToLayer(i.se).round() }; e.center(t.locationToLayer(t.center())), e.extent(n), e.zoom(t.zoom()) }, _resize: function () { this._render() }, _panEnd: function (e) { u.fn._panEnd.call(this, e), this._render() }, _render: function () { this._updateView(), this._view.render() } }), _ = r.extend({ init: function (e, t) { this.element = e, this._initOptions(t), this.pool = new w }, options: { tileSize: 256, subdomains: ["a", "b", "c"], urlTemplate: "" }, center: function (e) { this._center = e }, extent: function (e) { this._extent = e }, viewOrigin: function (e) { this._viewOrigin = e }, zoom: function (e) { this._zoom = e }, pointToTileIndex: function (e) { return new d(i.floor(e.x / this.options.tileSize), i.floor(e.y / this.options.tileSize)) }, tileCount: function () { var e = this.size(), t = this.pointToTileIndex(this._extent.nw), n = this._extent.nw, o = this.indexToPoint(t).translate(-n.x, -n.y); return { x: i.ceil((i.abs(o.x) + e.width) / this.options.tileSize), y: i.ceil((i.abs(o.y) + e.height) / this.options.tileSize) } }, size: function () { var e = this._extent.nw, t = this._extent.se, i = t.clone().translate(-e.x, -e.y); return { width: i.x, height: i.y } }, indexToPoint: function (e) { var t = e.x, i = e.y; return new d(t * this.options.tileSize, i * this.options.tileSize) }, subdomainText: function () { var e = this.options.subdomains; return e[this.subdomainIndex++ % e.length] }, destroy: function () { this.element.empty(), this.pool.empty() }, reset: function () { this.pool.reset(), this.subdomainIndex = 0, this.render() }, render: function () { var e, t, i, n = this.tileCount(), o = this.pointToTileIndex(this._extent.nw); for (t = 0; t < n.x; t++)for (i = 0; i < n.y; i++)(e = this.createTile({ x: o.x + t, y: o.y + i })).visible || e.show() }, createTile: function (e) { var t = this.tileOptions(e), i = this.pool.get(this._center, t); return 0 === i.element.parent().length && this.element.append(i.element), i }, tileOptions: function (e) { var t = this.wrapIndex(e), i = this.indexToPoint(e), n = this._viewOrigin, o = i.clone().translate(-n.x, -n.y); return { index: t, currentIndex: e, point: i, offset: function (e) { return new d(m(e.x), m(e.y)) }(o), zoom: this._zoom, size: this.options.tileSize, subdomain: this.subdomainText(), urlTemplate: this.options.urlTemplate, errorUrlTemplate: this.options.errorUrlTemplate } }, wrapIndex: function (e) { var t = i.pow(2, this._zoom); return { x: this.wrapValue(e.x, t), y: g(e.y, 0, t - 1) } }, wrapValue: function (e, t) { var n = i.abs(e) % t; return e = e >= 0 ? n : t - (0 === n ? t : n) } }), b = r.extend({ init: function (e, t) { this.id = e, this.visible = !0, this._initOptions(t), this.createElement(), this.show() }, options: { urlTemplate: "", errorUrlTemplate: "" }, createElement: function () { this.element = e("<img style='position: absolute; display: block;' alt='' />").css({ width: this.options.size, height: this.options.size }).on("error", n(function (e) { this.errorUrl() ? e.target.setAttribute("src", this.errorUrl()) : e.target.removeAttribute("src") }, this)) }, show: function () { var e, t = this.element[0]; t.style.top = f(this.options.offset.y), t.style.left = f(this.options.offset.x), (e = this.url()) && t.setAttribute("src", e), t.style.visibility = "visible", this.visible = !0 }, hide: function () { this.element[0].style.visibility = "hidden", this.visible = !1 }, url: function () { var e = s(this.options.urlTemplate); return e(this.urlOptions()) }, errorUrl: function () { var e = s(this.options.errorUrlTemplate); return e(this.urlOptions()) }, urlOptions: function () { var e = this.options; return { zoom: e.zoom, subdomain: e.subdomain, z: e.zoom, x: e.index.x, y: e.index.y, s: e.subdomain, quadkey: e.quadkey, q: e.quadkey, culture: e.culture, c: e.culture } }, destroy: function () { this.element && (this.element.remove(), this.element = null) } }), w = r.extend({ init: function () { this._items = [] }, options: { maxSize: 100 }, get: function (e, t) { return this._items.length >= this.options.maxSize && this._remove(e), this._create(t) }, empty: function () { var e, t = this._items; for (e = 0; e < t.length; e++)t[e].destroy(); this._items = [] }, reset: function () { var e, t = this._items; for (e = 0; e < t.length; e++)t[e].hide() }, _create: function (e) { var t, i, n = this._items, o = h.hashKey(e.point + "" + e.offset + e.zoom + e.urlTemplate); for (i = 0; i < n.length; i++)if (n[i].id === o) { t = n[i]; break } return t ? t.show() : (t = new b(o, e), this._items.push(t)), t }, _remove: function (e) { var t, i, n = this._items, o = -1, r = -1; for (t = 0; t < n.length; t++)(i = n[t].options.point.distanceTo(e)) > o && !n[t].visible && (r = t, o = i); -1 !== r && (n[r].destroy(), n.splice(r, 1)) } }); l(a, { map: { layers: { tile: v, TileLayer: v, ImageTile: b, TilePool: w, TileView: _ } } }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/layers/bing.min", ["dataviz/map/layers/tile.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = t.dataviz, n = t.deepExtend, o = t.drawing.util.defined, r = i.map.Extent, s = i.map.Location, a = i.map.layers.TileLayer, l = i.map.layers.TileView, c = a.extend({ init: function (t, i) { this.options.baseUrl = this._scheme() + "://dev.virtualearth.net/REST/v1/Imagery/Metadata/", a.fn.init.call(this, t, i), this._onMetadata = e.proxy(this._onMetadata, this), this._fetchMetadata() }, options: { imagerySet: "road" }, _fetchMetadata: function () { var t = this.options; if (!t.key) throw Error("Bing tile layer: API key is required"); e.ajax({ url: t.baseUrl + t.imagerySet, data: { output: "json", include: "ImageryProviders", key: t.key, uriScheme: this._scheme() }, type: "get", dataType: "jsonp", jsonp: "jsonp", success: this._onMetadata }) }, _scheme: function (e) { return "https" === (e = e || window.location.protocol).replace(":", "") ? "https" : "http" }, _onMetadata: function (e) { var t, i; e && e.resourceSets.length && (t = this.resource = e.resourceSets[0].resources[0], n(this._view.options, { urlTemplate: t.imageUrl.replace("{subdomain}", "#= subdomain #").replace("{quadkey}", "#= quadkey #").replace("{culture}", "#= culture #"), subdomains: t.imageUrlSubdomains }), i = this.options, o(i.minZoom) || (i.minZoom = t.zoomMin), o(i.maxZoom) || (i.maxZoom = t.zoomMax), this._addAttribution(), "none" !== this.element.css("display") && this._reset()) }, _viewType: function () { return d }, _addAttribution: function () { var e, t, i, n, o, a = this.map.attribution; if (a && (e = this.resource.imageryProviders)) for (t = 0; t < e.length; t++)for (i = e[t], n = 0; n < i.coverageAreas.length; n++)o = i.coverageAreas[n], a.add({ text: i.attribution, minZoom: o.zoomMin, maxZoom: o.zoomMax, extent: new r(new s(o.bbox[2], o.bbox[1]), new s(o.bbox[0], o.bbox[3])) }) }, imagerySet: function (e) { return e ? (this.options.imagerySet = e, this.map.attribution.clear(), void this._fetchMetadata()) : this.options.imagerySet } }), d = l.extend({ options: { culture: "en-US" }, tileOptions: function (e) { var t = l.fn.tileOptions.call(this, e); return t.culture = this.options.culture, t.quadkey = this.tileQuadKey(this.wrapIndex(e)), t }, tileQuadKey: function (e) { var t, i, n, o = ""; for (n = this._zoom; n > 0; n--)t = 0, i = 1 << n - 1, 0 != (e.x & i) && t++, 0 != (e.y & i) && (t += 2), o += t; return o } }), n(i, { map: { layers: { bing: c, BingLayer: c, BingView: d } } }); var e, t, i, n, o, r, s, a, l, c, d }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/layers/marker.min", ["dataviz/map/layers/base.min", "dataviz/map/location.min", "kendo.data.min", "kendo.tooltip.min"], function () { e = window.kendo.jQuery, t = document, i = Math, n = e.inArray, o = e.proxy, r = window.kendo, s = r.Class, a = r.data.DataSource, l = r.ui.Tooltip, c = r.dataviz, d = r.deepExtend, u = c.map, h = u.Location, f = u.layers.Layer, p = f.extend({ init: function (e, t) { f.fn.init.call(this, e, t), this._markerClick = o(this._markerClick, this), this.element.on("click", ".k-marker", this._markerClick), this.items = [], this._initDataSource() }, destroy: function () { f.fn.destroy.call(this), this.element.off("click", ".k-marker", this._markerClick), this.dataSource.unbind("change", this._dataChange), this.clear() }, options: { zIndex: 1e3, autoBind: !0, dataSource: {}, locationField: "location", titleField: "title" }, add: function (t) { if (!e.isArray(t)) return this._addOne(t); for (var i = 0; i < t.length; i++)this._addOne(t[i]) }, remove: function (e) { e.destroy(); var t = n(e, this.items); t > -1 && this.items.splice(t, 1) }, clear: function () { for (var e = 0; e < this.items.length; e++)this.items[e].destroy(); this.items = [] }, update: function (e) { var t, i = e.location(); i && (e.showAt(this.map.locationToView(i)), t = { marker: e, layer: this }, this.map.trigger("markerActivate", t)) }, _reset: function () { var e, t; for (f.fn._reset.call(this), e = this.items, t = 0; t < e.length; t++)this.update(e[t]) }, bind: function (e, t) { var i, n = u.Marker.create(e, this.options); if (n.dataItem = t, i = { marker: n, layer: this }, !this.map.trigger("markerCreated", i)) return this.add(n), n }, setDataSource: function (e) { this.dataSource && this.dataSource.unbind("change", this._dataChange), this.dataSource = r.data.DataSource.create(e), this.dataSource.bind("change", this._dataChange), this.options.autoBind && this.dataSource.fetch() }, _addOne: function (e) { var t = m.create(e, this.options); return t.addTo(this), t }, _initDataSource: function () { var e = this.options.dataSource; this._dataChange = o(this._dataChange, this), this.dataSource = a.create(e).bind("change", this._dataChange), e && this.options.autoBind && this.dataSource.fetch() }, _dataChange: function (e) { this._load(e.sender.view()) }, _load: function (e) { var t, i, n, o; for (this._data = e, this.clear(), t = r.getter(this.options.locationField), i = r.getter(this.options.titleField), n = 0; n < e.length; n++)o = e[n], this.bind({ location: t(o), title: i(o) }, o) }, _markerClick: function (t) { var i = { marker: e(t.target).data("kendoMarker"), layer: this }; this.map.trigger("markerClick", i) } }), m = s.extend({ init: function (e) { this.options = e || {} }, addTo: function (e) { this.layer = e.markers || e, this.layer.items.push(this), this.layer.update(this) }, location: function (e) { return e ? (this.options.location = h.create(e).toArray(), this.layer && this.layer.update(this), this) : h.create(this.options.location) }, showAt: function (e) { this.render(), this.element.css({ left: i.round(e.x), top: i.round(e.y) }), this.tooltip && this.tooltip.popup && this.tooltip.popup._position() }, hide: function () { this.element && (this.element.remove(), this.element = null), this.tooltip && (this.tooltip.destroy(), this.tooltip = null) }, destroy: function () { this.layer = null, this.hide() }, render: function () { var i, n; this.element || (i = this.options, n = this.layer, this.element = e(t.createElement("span")).addClass("k-marker k-icon k-i-marker-" + r.toHyphens(i.shape || "pin")).attr("title", i.title).attr(i.attributes || {}).data("kendoMarker", this).css("zIndex", i.zIndex), n && n.element.append(this.element), this.renderTooltip()) }, renderTooltip: function () { var e, t, i = this, n = i.options.title, o = i.options.tooltip || {}; o && l && ((e = o.template) && (t = r.template(e), o.content = function (e) { return e.location = i.location(), e.marker = i, t(e) }), (n || o.content || o.contentUrl) && (this.tooltip = new l(this.element, o), this.tooltip.marker = this)) } }), m.create = function (e, t) { return e instanceof m ? e : new m(d({}, t, e)) }, d(c, { map: { layers: { marker: p, MarkerLayer: p }, Marker: m } }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/map/main.min", ["dataviz/map/crs.min", "dataviz/map/location.min"], function () { e = window.kendo.jQuery, t = document, i = Math, n = i.min, o = i.pow, r = e.proxy, s = window.kendo, a = s.ui.Widget, l = s.deepExtend, c = s.dataviz, d = c.ui, u = s.geometry, h = u.Point, f = c.map, p = f.Extent, m = f.Location, g = f.crs.EPSG3857, v = s.util, _ = v.renderPos, b = s.drawing.util, w = b.defined, y = b.limitValue, k = b.valueOrDefault, x = a.extend({ init: function (e, i) { s.destroy(e), a.fn.init.call(this, e), this._initOptions(i), this.bind(this.events, i), this.crs = new g, this.element.addClass("k-" + this.options.name.toLowerCase()).css("position", "relative").empty().append(t.createElement("div")), this._viewOrigin = this._getOrigin(), this._initScroller(), this._initMarkers(), this._initControls(), this._initLayers(), this._reset(), this._mousewheel = r(this._mousewheel, this), this.element.bind("click", r(this._click, this)), this.element.bind("DOMMouseScroll mousewheel", this._mousewheel) }, options: { name: "Map", controls: { attribution: !0, navigator: { panStep: 100 }, zoom: !0 }, layers: [], layerDefaults: { shape: { style: { fill: { color: "#fff" }, stroke: { color: "#aaa", width: .5 } } }, bubble: { style: { fill: { color: "#fff", opacity: .5 }, stroke: { color: "#aaa", width: .5 } } }, marker: { shape: "pinTarget", tooltip: { position: "top" } } }, center: [0, 0], zoom: 3, minSize: 256, minZoom: 1, maxZoom: 19, markers: [], markerDefaults: { shape: "pinTarget", tooltip: { position: "top" } }, wraparound: !0 }, events: ["beforeReset", "click", "markerActivate", "markerClick", "markerCreated", "pan", "panEnd", "reset", "shapeClick", "shapeCreated", "shapeFeatureCreated", "shapeMouseEnter", "shapeMouseLeave", "zoomEnd", "zoomStart"], destroy: function () { this.scroller.destroy(), this.navigator && this.navigator.destroy(), this.attribution && this.attribution.destroy(), this.zoomControl && this.zoomControl.destroy(), this.markers.destroy(); for (var e = 0; e < this.layers.length; e++)this.layers[e].destroy(); a.fn.destroy.call(this) }, zoom: function (e) { var t = this.options; return w(e) ? (e = i.round(y(e, t.minZoom, t.maxZoom)), t.zoom !== e && (t.zoom = e, this._reset()), this) : t.zoom }, center: function (e) { return e ? (this.options.center = m.create(e).toArray(), this._reset(), this) : m.create(this.options.center) }, extent: function (e) { return e ? (this._setExtent(e), this) : this._getExtent() }, setOptions: function (e) { a.fn.setOptions.call(this, e), this._reset() }, locationToLayer: function (e, t) { var i = !this.options.wraparound; return e = m.create(e), this.crs.toPoint(e, this._layerSize(t), i) }, layerToLocation: function (e, t) { var i = !this.options.wraparound; return e = h.create(e), this.crs.toLocation(e, this._layerSize(t), i) }, locationToView: function (e) { var t; return e = m.create(e), t = this.locationToLayer(this._viewOrigin), this.locationToLayer(e).translateWith(t.scale(-1)) }, viewToLocation: function (e, t) { var i = this.locationToLayer(this._getOrigin(), t); return e = (e = h.create(e)).clone().translateWith(i), this.layerToLocation(e, t) }, eventOffset: function (e) { var t = this.element.offset(), i = e.originalEvent || e, n = k(i.pageX, i.clientX) - t.left, o = k(i.pageY, i.clientY) - t.top; return new u.Point(n, o) }, eventToView: function (e) { var t = this.eventOffset(e); return this.locationToView(this.viewToLocation(t)) }, eventToLayer: function (e) { return this.locationToLayer(this.eventToLocation(e)) }, eventToLocation: function (e) { var t = this.eventOffset(e); return this.viewToLocation(t) }, viewSize: function () { var e = this.element, t = this._layerSize(), i = e.width(); return this.options.wraparound || (i = n(t, i)), { width: i, height: n(t, e.height()) } }, exportVisual: function () { return this._reset(), !1 }, _setOrigin: function (e, t) { var i, n = this.viewSize(); return e = this._origin = m.create(e), (i = this.locationToLayer(e, t)).x += n.width / 2, i.y += n.height / 2, this.options.center = this.layerToLocation(i, t).toArray(), this }, _getOrigin: function (e) { var t, i = this.viewSize(); return !e && this._origin || ((t = this.locationToLayer(this.center())).x -= i.width / 2, t.y -= i.height / 2, this._origin = this.layerToLocation(t)), this._origin }, _setExtent: function (e) { var t, n, o, r, s, a, l, c = p.create(e), d = c.se.clone(); for (this.options.wraparound && d.lng < 0 && e.nw.lng > 0 && (d.lng = 180 + (180 + d.lng)), e = new p(c.nw, d), this.center(e.center()), t = this.element.width(), n = this.element.height(), o = this.options.maxZoom; o >= this.options.minZoom && (r = this.locationToLayer(e.nw, o), s = this.locationToLayer(e.se, o), a = i.abs(s.x - r.x), l = i.abs(s.y - r.y), !(a <= t && l <= n)); o--); this.zoom(o) }, _getExtent: function () { var e, t = this._getOrigin(), i = this.locationToLayer(t), n = this.viewSize(); return i.x += n.width, i.y += n.height, e = this.layerToLocation(i), new p(t, e) }, _zoomAround: function (e, t) { this._setOrigin(this.layerToLocation(e, t), t), this.zoom(t) }, _initControls: function () { var e = this.options.controls; d.Attribution && e.attribution && this._createAttribution(e.attribution), s.support.mobileOS || (d.Navigator && e.navigator && this._createNavigator(e.navigator), d.ZoomControl && e.zoom && this._createZoomControl(e.zoom)) }, _createControlElement: function (t, i) { var n = t.position || i, o = "." + _(n).replace(" ", "."), r = e(".k-map-controls" + o, this.element); return 0 === r.length && (r = e("<div>").addClass("k-map-controls " + _(n)).appendTo(this.element)), e("<div>").appendTo(r) }, _createAttribution: function (e) { var t = this._createControlElement(e, "bottomRight"); this.attribution = new d.Attribution(t, e) }, _createNavigator: function (e) { var t = this._createControlElement(e, "topLeft"), i = this.navigator = new d.Navigator(t, e); this._navigatorPan = r(this._navigatorPan, this), i.bind("pan", this._navigatorPan), this._navigatorCenter = r(this._navigatorCenter, this), i.bind("center", this._navigatorCenter) }, _navigatorPan: function (e) { var t = this, i = t.scroller, n = i.scrollLeft + e.x, o = i.scrollTop - e.y, r = this._virtualSize, s = this.element.height(), a = this.element.width(); n = y(n, r.x.min, r.x.max - a), o = y(o, r.y.min, r.y.max - s), t.scroller.one("scroll", function (e) { t._scrollEnd(e) }), t.scroller.scrollTo(-n, -o) }, _navigatorCenter: function () { this.center(this.options.center) }, _createZoomControl: function (e) { var t = this._createControlElement(e, "topLeft"), i = this.zoomControl = new d.ZoomControl(t, e); this._zoomControlChange = r(this._zoomControlChange, this), i.bind("change", this._zoomControlChange) }, _zoomControlChange: function (e) { this.trigger("zoomStart", { originalEvent: e }) || (this.zoom(this.zoom() + e.delta), this.trigger("zoomEnd", { originalEvent: e })) }, _initScroller: function () { var e = s.support.mobileOS ? .93 : .9, t = !1 !== this.options.zoomable, i = this.scroller = new s.mobile.ui.Scroller(this.element.children(0), { friction: e, velocityMultiplier: 5, zoom: t, mousewheelScrolling: !1 }); i.bind("scroll", r(this._scroll, this)), i.bind("scrollEnd", r(this._scrollEnd, this)), i.userEvents.bind("gesturestart", r(this._scaleStart, this)), i.userEvents.bind("gestureend", r(this._scale, this)), this.scrollElement = i.scrollElement }, _initLayers: function () { var e, t, i, n, o, r = this.options.layers, s = this.layers = []; for (e = 0; e < r.length; e++)t = r[e], i = t.type || "shape", n = this.options.layerDefaults[i], o = c.map.layers[i], s.push(new o(this, l({}, n, t))) }, _initMarkers: function () { this.markers = new f.layers.MarkerLayer(this, this.options.markerDefaults), this.markers.add(this.options.markers) }, _scroll: function (e) { var t = this.locationToLayer(this._viewOrigin).round(), i = e.sender.movable, n = new u.Point(i.x, i.y).scale(-1).scale(1 / i.scale); t.x += n.x, t.y += n.y, this._scrollOffset = n, this._setOrigin(this.layerToLocation(t)), this.trigger("pan", { originalEvent: e, origin: this._getOrigin(), center: this.center() }) }, _scrollEnd: function (e) { this._scrollOffset && this._panComplete() && (this._scrollOffset = null, this._panEndTS = new Date, this.trigger("panEnd", { originalEvent: e, origin: this._getOrigin(), center: this.center() })) }, _panComplete: function () { return new Date - (this._panEndTS || 0) > 50 }, _scaleStart: function (e) { if (this.trigger("zoomStart", { originalEvent: e })) { var t = e.touches[1]; t && t.cancel() } }, _scale: function (e) { var t = this.scroller.movable.scale, i = this._scaleToZoom(t), n = new u.Point(e.center.x, e.center.y), o = this.viewToLocation(n, i), r = this.locationToLayer(o, i), s = r.translate(-n.x, -n.y); this._zoomAround(s, i), this.trigger("zoomEnd", { originalEvent: e }) }, _scaleToZoom: function (e) { var t = this._layerSize() * e, n = t / this.options.minSize, o = i.log(n) / i.log(2); return i.round(o) }, _reset: function () { this.attribution && this.attribution.filter(this.center(), this.zoom()), this._viewOrigin = this._getOrigin(!0), this._resetScroller(), this.trigger("beforeReset"), this.trigger("reset") }, _resetScroller: function () { var e, t, i, n, r = this.scroller, s = r.dimensions.x, a = r.dimensions.y, l = this._layerSize(), c = this.extent().nw, d = this.locationToLayer(c).round(); r.movable.round = !0, r.reset(), r.userEvents.cancel(), e = this.zoom(), r.dimensions.forcedMinScale = o(2, this.options.minZoom - e), r.dimensions.maxScale = o(2, this.options.maxZoom - e), t = { min: -d.x, max: l - d.x }, i = { min: -d.y, max: l - d.y }, this.options.wraparound && (t.max = 20 * l, t.min = -t.max), !1 === this.options.pannable && (n = this.viewSize(), t.min = i.min = 0, t.max = n.width, i.max = n.height), s.makeVirtual(), a.makeVirtual(), s.virtualSize(t.min, t.max), a.virtualSize(i.min, i.max), this._virtualSize = { x: t, y: i } }, _renderLayers: function () { var e, t, i, n, o, r = this.options.layers, s = this.layers = [], a = this.scrollWrap; for (a.empty(), e = 0; e < r.length; e++)t = r[e], i = t.type || "shape", n = this.options.layerDefaults[i], o = c.map.layers[i], s.push(new o(this, l({}, n, t))) }, _layerSize: function (e) { return e = k(e, this.options.zoom), this.options.minSize * o(2, e) }, _click: function (e) { if (this._panComplete()) { var t = this.eventOffset(e); this.trigger("click", { originalEvent: e, location: this.viewToLocation(t) }) } }, _mousewheel: function (e) { var t, i, n, o, r, s, a, l; e.preventDefault(), t = c.mwDelta(e) > 0 ? -1 : 1, i = this.options, n = this.zoom(), o = y(n + t, i.minZoom, i.maxZoom), !1 !== i.zoomable && o !== n && (this.trigger("zoomStart", { originalEvent: e }) || (r = this.eventOffset(e), s = this.viewToLocation(r), a = this.locationToLayer(s, o), l = a.translate(-r.x, -r.y), this._zoomAround(l, o), this.trigger("zoomEnd", { originalEvent: e }))) } }), c.ui.plugin(x); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.map.min", ["kendo.data.min", "kendo.userevents.min", "kendo.tooltip.min", "kendo.mobile.scroller.min", "kendo.draganddrop.min", "kendo.dataviz.core.min", "dataviz/map/location.min", "dataviz/map/attribution.min", "dataviz/map/navigator.min", "dataviz/map/zoom.min", "dataviz/map/crs.min", "dataviz/map/layers/base.min", "dataviz/map/layers/shape.min", "dataviz/map/layers/bubble.min", "dataviz/map/layers/tile.min", "dataviz/map/layers/bing.min", "dataviz/map/layers/marker.min", "dataviz/map/main.min"], function () { return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/diagram/utils.min", ["kendo.core.min"], function () { !function (e, t) { var i, n, o = window.kendo, r = o.dataviz.diagram = {}, s = o.deepExtend, a = e.isArray, l = {}; s(l, { isNearZero: function (e) { return Math.abs(e) < 1e-6 }, isDefined: function (e) { return t !== e }, isUndefined: function (e) { return t === e || null === e }, isObject: function (e) { return e === Object(e) }, has: function (e, t) { return Object.hasOwnProperty.call(e, t) }, isString: function (e) { return "[object String]" == Object.prototype.toString.call(e) }, isBoolean: function (e) { return "[object Boolean]" == Object.prototype.toString.call(e) }, isType: function (e, t) { return Object.prototype.toString.call(e) == "[object " + t + "]" }, isNumber: function (e) { return !isNaN(parseFloat(e)) && isFinite(e) }, isEmpty: function (e) { if (null === e) return !0; if (a(e) || l.isString(e)) return 0 === e.length; for (var t in e) if (l.has(e, t)) return !1; return !0 }, simpleExtend: function (e, t) { if (l.isObject(t)) for (var i in t) e[i] = t[i] }, initArray: function (e, t) { var i, n = []; for (i = 0; i < e; ++i)n[i] = t; return n }, serializePoints: function (e) { var t, i, n = []; for (t = 0; t < e.length; t++)i = e[t], n.push(i.x + ";" + i.y); return n.join(";") }, deserializePoints: function (e) { var t, i = e.split(";"), n = []; if (i.length % 2 != 0) throw "Not an array of points."; for (t = 0; t < i.length; t += 2)n.push(new r.Point(parseInt(i[t], 10), parseInt(i[t + 1], 10))); return n }, randomInteger: function (e, t) { return parseInt(Math.floor(Math.random() * t) + e, 10) }, DFT: function (e, t) { var i, n; if (t(e), e.childNodes) for (i = 0; i < e.childNodes.length; i++)n = e.childNodes[i], this.DFT(n, t) }, getMatrixAngle: function (e) { return null === e || 0 === e.d ? 0 : 180 * Math.atan2(e.b, e.d) / Math.PI }, getMatrixScaling: function (e) { var t = Math.sqrt(e.a * e.a + e.c * e.c), i = Math.sqrt(e.b * e.b + e.d * e.d); return [t, i] } }), l.sign = function (e) { return e ? e < 0 ? -1 : 1 : 0 }, l.findAngle = function (e, t) { return 180 * function (e, t) { if (e == t) return 0; var i = t.x - e.x, n = e.y - t.y, o = Math.atan(i / n); return n >= 0 ? i < 0 ? o + 2 * Math.PI : o : o + Math.PI }(e, t) / Math.PI }, l.forEach = function (e, t, i) { for (var n = 0; n < e.length; n++)t.call(i, e[n], n, e) }, l.any = function (e, t) { for (var i = 0; i < e.length; ++i)if (t(e[i])) return e[i]; return null }, l.remove = function (e, t) { for (var i; -1 !== (i = l.indexOf(e, t));)e.splice(i, 1); return e }, l.contains = function (e, t) { return -1 !== l.indexOf(e, t) }, l.indexOf = function (t, i) { return e.inArray(i, t) }, l.fold = function (e, t, i, n) { var o, r, s = arguments.length > 2; for (o = 0; o < e.length; o++)r = e[o], s ? i = t.call(n, i, r, o, e) : (i = r, s = !0); if (!s) throw "Reduce of empty array with no initial value"; return i }, l.find = function (e, t, i) { var n; return l.any(e, function (e, o, r) { return !!t.call(i, e, o, r) && (n = e, !0) }), n }, l.first = function (e, t, i) { return 0 === e.length ? null : l.isUndefined(t) ? e[0] : l.find(e, t, i) }, l.insert = function (e, t, i) { return e.splice(i, 0, t), e }, l.all = function (e, t, i) { var n, o, r = !0; for (o = 0; o < e.length && (n = e[o], r = r && t.call(i, n, o, e)); o++); return r }, l.clear = function (e) { e.splice(0, e.length) }, l.bisort = function (e, t, i) { if (l.isUndefined(e)) throw "First array is not specified."; if (l.isUndefined(t)) throw "Second array is not specified."; if (e.length != t.length) throw "The two arrays should have equal length"; var n, o = []; for (n = 0; n < e.length; n++)o.push({ x: e[n], y: t[n] }); for (o.sort(l.isUndefined(i) ? function (e, t) { return e.x - t.x } : function (e, t) { return i(e.x, t.x) }), l.clear(e), l.clear(t), n = 0; n < o.length; n++)e.push(o[n].x), t.push(o[n].y) }, l.addRange = function (e, t) { e.push.apply(e, t) }, i = { easeInOut: function (e) { return -Math.cos(e * Math.PI) / 2 + .5 } }, n = o.Class.extend({ init: function () { this.adapters = [], this.target = 0, this.tick = 0, this.interval = 20, this.duration = 800, this.lastTime = null, this.handlers = []; var e = this; this.transition = i.easeInOut, this.timerDelegate = function () { e.onTimerEvent() } }, addAdapter: function (e) { this.adapters.push(e) }, onComplete: function (e) { this.handlers.push(e) }, removeHandler: function (t) { this.handlers = e.grep(this.handlers, function (e) { return e !== t }) }, trigger: function () { var e = this; this.handlers && l.forEach(this.handlers, function (t) { return t.call(null !== e.caller ? e.caller : e) }) }, onStep: function () { }, seekTo: function (e) { this.seekFromTo(this.tick, e) }, seekFromTo: function (e, t) { this.target = Math.max(0, Math.min(1, t)), this.tick = Math.max(0, Math.min(1, e)), this.lastTime = (new Date).getTime(), this.intervalId || (this.intervalId = window.setInterval(this.timerDelegate, this.interval)) }, stop: function () { this.intervalId && (window.clearInterval(this.intervalId), this.intervalId = null, this.trigger()) }, play: function (e) { 0 !== this.adapters.length && (null !== e && (this.caller = e), this.initState(), this.seekFromTo(0, 1)) }, reverse: function () { this.seekFromTo(1, 0) }, initState: function () { if (0 !== this.adapters.length) for (var e = 0; e < this.adapters.length; e++)this.adapters[e].initState() }, propagate: function () { var e, t = this.transition(this.tick); for (e = 0; e < this.adapters.length; e++)this.adapters[e].update(t) }, onTimerEvent: function () { var e, t = (new Date).getTime(), i = t - this.lastTime; this.lastTime = t, e = i / this.duration * (this.tick < this.target ? 1 : -1), Math.abs(e) >= Math.abs(this.tick - this.target) ? this.tick = this.target : this.tick += e; try { this.propagate() } finally { this.onStep.call(this), this.target == this.tick && this.stop() } } }), o.deepExtend(r, { init: function (e) { o.init(e, r.ui) }, Utils: l, Range: function (e, i, n) { var o, r, s, a; if (t === e || t === i) return []; if (n && l.sign(i - e) != l.sign(n)) throw "The sign of the increment should allow to reach the stop-value."; if (e = e || 0, ((i = i || e) - e) / (n = n || 1) == 1 / 0) throw "Infinite range defined."; if (o = [], r = -1, a = function (e) { for (var t = 1; e * t % 1;)t *= 10; return t }(Math.abs(n)), n *= a, (e *= a) > (i *= a) && n > 0 && (n = -n), n < 0) for (; (s = e + n * ++r) >= i;)o.push(s / a); else for (; (s = e + n * ++r) <= i;)o.push(s / a); return o }, Ticker: n }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/diagram/math.min", ["dataviz/diagram/utils.min", "kendo.dataviz.core.min"], function () { !function (e, t) { function i(e, t, i, n, o) { var r, s, a, l, c = (t.x - e.x) * (n.y - i.y) - (t.y - e.y) * (n.x - i.x); if (!function (e) { return Math.abs(e) < I }(c) && (r = (e.y - i.y) * (n.x - i.x) - (e.x - i.x) * (n.y - i.y), s = (e.y - i.y) * (t.x - e.x) - (e.x - i.x) * (t.y - e.y), a = r / c, l = s / c, !o || !(a < 0 || a > 1 || l < 0 || l > 1))) return new T(e.x + a * (t.x - e.x), e.y + a * (t.y - e.y)) } function n(e) { var t, i, n; for (S.isUndefined(e) && (e = 10), t = "", i = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", n = e; n > 0; --n)t += i.charAt(Math.round(Math.random() * (i.length - 1))); return t } var o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w = window.kendo, y = w.dataviz.diagram, k = w.Class, x = w.deepExtend, C = w.dataviz, S = y.Utils, T = C.Point2D, D = w.isFunction, A = S.contains, E = e.map, I = 1e-6; x(T.fn, { plus: function (e) { return new T(this.x + e.x, this.y + e.y) }, minus: function (e) { return new T(this.x - e.x, this.y - e.y) }, offset: function (e) { return new T(this.x - e, this.y - e) }, times: function (e) { return new T(this.x * e, this.y * e) }, normalize: function () { return 0 === this.length() ? new T : this.times(1 / this.length()) }, length: function () { return Math.sqrt(this.x * this.x + this.y * this.y) }, toString: function () { return "(" + this.x + "," + this.y + ")" }, lengthSquared: function () { return this.x * this.x + this.y * this.y }, middleOf: function (e, t) { return new T(t.x - e.x, t.y - e.y).times(.5).plus(e) }, toPolar: function (e) { var t, i, n, o = 1; if (e && (o = 180 / Math.PI), t = Math.atan2(Math.abs(this.y), Math.abs(this.x)), i = Math.PI / 2, n = this.length(), 0 === this.x) { if (0 === this.y) return new c(0, 0); if (this.y > 0) return new c(n, o * i); if (this.y < 0) return new c(n, 3 * o * i) } else if (this.x > 0) { if (0 === this.y) return new c(n, 0); if (this.y > 0) return new c(n, o * t); if (this.y < 0) return new c(n, o * (4 * i - t)) } else { if (0 === this.y) return new c(n, 2 * i); if (this.y > 0) return new c(n, o * (2 * i - t)); if (this.y < 0) return new c(n, o * (2 * i + t)) } }, isOnLine: function (e, t) { var i, n, o, s, a; return e.x > t.x && (i = t, t = e, e = i), n = new r(e.x, e.y).inflate(3, 3), o = new r(t.x, t.y).inflate(3, 3), !!n.union(o).contains(this) && (e.x === t.x || e.y === t.y || (e.y < t.y ? (s = n.x + (o.x - n.x) * (this.y - (n.y + n.height)) / (o.y + o.height - (n.y + n.height)), a = n.x + n.width + (o.x + o.width - (n.x + n.width)) * (this.y - n.y) / (o.y - n.y)) : (s = n.x + (o.x - n.x) * (this.y - n.y) / (o.y - n.y), a = n.x + n.width + (o.x + o.width - (n.x + n.width)) * (this.y - (n.y + n.height)) / (o.y + o.height - (n.y + n.height))), this.x > s && this.x < a)) } }), x(T, { parse: function (e) { var t = e.slice(1, e.length - 1), i = t.split(","), n = parseInt(i[0], 10), o = parseInt(i[1], 10); if (!isNaN(n) && !isNaN(o)) return new T(n, o) } }), o = k.extend({ init: function (e, t, i) { this.point = e, this.left = t, this.right = i } }), r = k.extend({ init: function (e, t, i, n) { this.x = e || 0, this.y = t || 0, this.width = i || 0, this.height = n || 0 }, contains: function (e) { return e.x >= this.x && e.x <= this.x + this.width && e.y >= this.y && e.y <= this.y + this.height }, inflate: function (e, i) { return i === t && (i = e), this.x -= e, this.y -= i, this.width += 2 * e + 1, this.height += 2 * i + 1, this }, offset: function (e, t) { var i = e, n = t; return e instanceof T && (i = e.x, n = e.y), this.x += i, this.y += n, this }, union: function (e) { var t = Math.min(this.x, e.x), i = Math.min(this.y, e.y), n = Math.max(this.x + this.width, e.x + e.width), o = Math.max(this.y + this.height, e.y + e.height); return new r(t, i, n - t, o - i) }, center: function () { return new T(this.x + this.width / 2, this.y + this.height / 2) }, top: function () { return new T(this.x + this.width / 2, this.y) }, right: function () { return new T(this.x + this.width, this.y + this.height / 2) }, bottom: function () { return new T(this.x + this.width / 2, this.y + this.height) }, left: function () { return new T(this.x, this.y + this.height / 2) }, topLeft: function () { return new T(this.x, this.y) }, topRight: function () { return new T(this.x + this.width, this.y) }, bottomLeft: function () { return new T(this.x, this.y + this.height) }, bottomRight: function () { return new T(this.x + this.width, this.y + this.height) }, clone: function () { return new r(this.x, this.y, this.width, this.height) }, isEmpty: function () { return !this.width && !this.height }, equals: function (e) { return this.x === e.x && this.y === e.y && this.width === e.width && this.height === e.height }, rotatedBounds: function (e) { var t = this.clone(), i = this.rotatedPoints(e), n = i[0], o = i[1], r = i[2], s = i[3]; return t.x = Math.min(r.x, n.x, o.x, s.x), t.y = Math.min(r.y, n.y, o.y, s.y), t.width = Math.max(r.x, n.x, o.x, s.x) - t.x, t.height = Math.max(r.y, n.y, o.y, s.y) - t.y, t }, rotatedPoints: function (e) { var t = this, i = t.center(), n = t.bottomRight().rotate(i, 360 - e), o = t.topLeft().rotate(i, 360 - e), r = t.topRight().rotate(i, 360 - e), s = t.bottomLeft().rotate(i, 360 - e); return [o, r, n, s] }, toString: function (e) { return e = e || " ", this.x + e + this.y + e + this.width + e + this.height }, scale: function (e, t, i, n, o) { var r, s, a, l = this.topLeft(), c = this.center(); l.rotate(c, 360 - o).rotate(n, o), r = i.minus(l), s = new T(r.x * e, r.y * t), a = r.minus(s), (l = l.plus(a)).rotate(n, 360 - o).rotate(c, o), this.x = l.x, this.y = l.y, this.width *= e, this.height *= t }, zoom: function (e) { return this.x *= e, this.y *= e, this.width *= e, this.height *= e, this }, overlaps: function (e) { var t = this.bottomRight(), i = e.bottomRight(), n = !(t.x < e.x || t.y < e.y || i.x < this.x || i.y < this.y); return n } }), (s = k.extend({ init: function (e, t) { this.width = e, this.height = t } })).prototype.Empty = new s(0, 0), r.toRect = function (e) { return e instanceof r || (e = new r(e.x, e.y, e.width, e.height)), e }, r.empty = function () { return new r(0, 0, 0, 0) }, r.fromPoints = function (e, t) { if (isNaN(e.x) || isNaN(e.y) || isNaN(t.x) || isNaN(t.y)) throw "Some values are NaN."; return new r(Math.min(e.x, t.x), Math.min(e.y, t.y), Math.abs(e.x - t.x), Math.abs(e.y - t.y)) }, a = { lines: function (e, t, n, o) { return i(e, t, n, o) }, segments: function (e, t, n, o) { return i(e, t, n, o, !0) }, rectWithLine: function (e, t, i) { return a.segments(t, i, e.topLeft(), e.topRight()) || a.segments(t, i, e.topRight(), e.bottomRight()) || a.segments(t, i, e.bottomLeft(), e.bottomRight()) || a.segments(t, i, e.topLeft(), e.bottomLeft()) }, rects: function (e, t, i) { var n, o, r = t.topLeft(), s = t.topRight(), l = t.bottomLeft(), c = t.bottomRight(), d = t.center(); return i && (r = r.rotate(d, i), s = s.rotate(d, i), l = l.rotate(d, i), c = c.rotate(d, i)), (n = e.contains(r) || e.contains(s) || e.contains(l) || e.contains(c) || a.rectWithLine(e, r, s) || a.rectWithLine(e, r, l) || a.rectWithLine(e, s, c) || a.rectWithLine(e, l, c)) || (r = e.topLeft(), s = e.topRight(), l = e.bottomLeft(), c = e.bottomRight(), i && (o = 360 - i, r = r.rotate(d, o), s = s.rotate(d, o), l = l.rotate(d, o), c = c.rotate(d, o)), n = t.contains(r) || t.contains(s) || t.contains(l) || t.contains(c)), n } }, l = k.extend({ init: function (e) { this.container = r.toRect(e) }, align: function (e, t) { var i, n = t.toLowerCase().split(" "); for (i = 0; i < n.length; i++)e = this._singleAlign(e, n[i]); return e }, _singleAlign: function (e, t) { return D(this[t]) ? this[t](e) : e }, left: function (e) { return this._align(e, this._left) }, center: function (e) { return this._align(e, this._center) }, right: function (e) { return this._align(e, this._right) }, stretch: function (e) { return this._align(e, this._stretch) }, top: function (e) { return this._align(e, this._top) }, middle: function (e) { return this._align(e, this._middle) }, bottom: function (e) { return this._align(e, this._bottom) }, _left: function (e, t) { t.x = e.x }, _center: function (e, t) { t.x = (e.width - t.width) / 2 || 0 }, _right: function (e, t) { t.x = e.width - t.width }, _top: function (e, t) { t.y = e.y }, _middle: function (e, t) { t.y = (e.height - t.height) / 2 || 0 }, _bottom: function (e, t) { t.y = e.height - t.height }, _stretch: function (e, t) { t.x = 0, t.y = 0, t.height = e.height, t.width = e.width }, _align: function (e, t) { return e = r.toRect(e), t(this.container, e), e } }), c = k.extend({ init: function (e, t) { this.r = e, this.angle = t } }), d = k.extend({ init: function (e, t, i, n, o, r) { this.a = e || 0, this.b = t || 0, this.c = i || 0, this.d = n || 0, this.e = o || 0, this.f = r || 0 }, plus: function (e) { this.a += e.a, this.b += e.b, this.c += e.c, this.d += e.d, this.e += e.e, this.f += e.f }, minus: function (e) { this.a -= e.a, this.b -= e.b, this.c -= e.c, this.d -= e.d, this.e -= e.e, this.f -= e.f }, times: function (e) { return new d(this.a * e.a + this.c * e.b, this.b * e.a + this.d * e.b, this.a * e.c + this.c * e.d, this.b * e.c + this.d * e.d, this.a * e.e + this.c * e.f + this.e, this.b * e.e + this.d * e.f + this.f) }, apply: function (e) { return new T(this.a * e.x + this.c * e.y + this.e, this.b * e.x + this.d * e.y + this.f) }, applyRect: function (e) { return r.fromPoints(this.apply(e.topLeft()), this.apply(e.bottomRight())) }, toString: function () { return "matrix(" + this.a + " " + this.b + " " + this.c + " " + this.d + " " + this.e + " " + this.f + ")" } }), x(d, { fromSVGMatrix: function (e) { var t = new d; return t.a = e.a, t.b = e.b, t.c = e.c, t.d = e.d, t.e = e.e, t.f = e.f, t }, fromMatrixVector: function (e) { var t = new d; return t.a = e.a, t.b = e.b, t.c = e.c, t.d = e.d, t.e = e.e, t.f = e.f, t }, fromList: function (e) { if (6 !== e.length) throw "The given list should consist of six elements."; var t = new d; return t.a = e[0], t.b = e[1], t.c = e[2], t.d = e[3], t.e = e[4], t.f = e[5], t }, translation: function (e, t) { var i = new d; return i.a = 1, i.b = 0, i.c = 0, i.d = 1, i.e = e, i.f = t, i }, unit: function () { return new d(1, 0, 0, 1, 0, 0) }, rotation: function (e, t, i) { var n = new d; return n.a = Math.cos(e * Math.PI / 180), n.b = Math.sin(e * Math.PI / 180), n.c = -n.b, n.d = n.a, n.e = t - t * n.a + i * n.b || 0, n.f = i - i * n.a - t * n.b || 0, n }, scaling: function (e, t) { var i = new d; return i.a = e, i.b = 0, i.c = 0, i.d = t, i.e = 0, i.f = 0, i }, parse: function (e) { var t, i; if (e) { if ("matrix" === (e = e.trim()).slice(0, 6).toLowerCase()) { if (i = e.slice(7, e.length - 1).trim(), 6 === (t = i.split(",")).length) return d.fromList(E(t, function (e) { return parseFloat(e) })); if (6 === (t = i.split(" ")).length) return d.fromList(E(t, function (e) { return parseFloat(e) })) } if ("(" === e.slice(0, 1) && ")" === e.slice(e.length - 1) && (e = e.substr(1, e.length - 1)), e.indexOf(",") > 0 && 6 === (t = e.split(",")).length) return d.fromList(E(t, function (e) { return parseFloat(e) })); if (e.indexOf(" ") > 0 && 6 === (t = e.split(" ")).length) return d.fromList(E(t, function (e) { return parseFloat(e) })) } return t } }), u = k.extend({ init: function (e, t, i, n, o, r) { this.a = e || 0, this.b = t || 0, this.c = i || 0, this.d = n || 0, this.e = o || 0, this.f = r || 0 }, fromMatrix: function (e) { var t = new u; return t.a = e.a, t.b = e.b, t.c = e.c, t.d = e.d, t.e = e.e, t.f = e.f, t } }), h = { _distanceToLineSquared: function (e, t, i) { function n(e, t) { return (e.x - t.x) * (e.x - t.x) + (e.y - t.y) * (e.y - t.y) } if (t === i) return n(e, t); var o = i.x - t.x, r = i.y - t.y, s = (e.x - t.x) * o + (e.y - t.y) * r; return s < 0 ? n(t, e) : (s = (i.x - e.x) * o + (i.y - e.y) * r) < 0 ? n(i, e) : (s = (i.x - e.x) * r - (i.y - e.y) * o) * s / (o * o + r * r) }, distanceToLine: function (e, t, i) { return Math.sqrt(this._distanceToLineSquared(e, t, i)) }, distanceToPolyline: function (e, t) { var i, n, o, r, s = Number.MAX_VALUE; if (S.isUndefined(t) || 0 === t.length) return Number.MAX_VALUE; for (i = 0; i < t.length - 1; i++)n = t[i], o = t[i + 1], (r = this._distanceToLineSquared(e, n, o)) < s && (s = r); return Math.sqrt(s) } }, f = w.Class.extend({ init: function () { this._buckets = [], this.length = 0 }, add: function (e, t) { var i = this._createGetBucket(e); return S.isDefined(t) && (i.value = t), i }, get: function (e) { return this._bucketExists(e) ? this._createGetBucket(e) : null }, set: function (e, t) { this.add(e, t) }, containsKey: function (e) { return this._bucketExists(e) }, remove: function (e) { if (this._bucketExists(e)) { var t = this._hash(e); return delete this._buckets[t], this.length--, e } }, forEach: function (e) { var t, i, n, o, r = this._hashes(); for (t = 0, i = r.length; t < i; t++)n = r[t], o = this._buckets[n], S.isUndefined(o) || e(o) }, clone: function () { var e, t, i, n, o = new f, r = this._hashes(); for (e = 0, t = r.length; e < t; e++)i = r[e], n = this._buckets[i], S.isUndefined(n) || o.add(n.key, n.value); return o }, _hashes: function () { var e, t = []; for (e in this._buckets) this._buckets.hasOwnProperty(e) && t.push(e); return t }, _bucketExists: function (e) { var t = this._hash(e); return S.isDefined(this._buckets[t]) }, _createGetBucket: function (e) { var t = this._hash(e), i = this._buckets[t]; return S.isUndefined(i) && (i = { key: e }, this._buckets[t] = i, this.length++), i }, _hash: function (e) { if (S.isNumber(e)) return e; if (S.isString(e)) return this._hashString(e); if (S.isObject(e)) return this._objectHashId(e); throw "Unsupported key type." }, _hashString: function (e) { var t, i, n = 0; if (0 === e.length) return n; for (t = 0; t < e.length; t++)i = e.charCodeAt(t), n = 32 * n - n + i; return n }, _objectHashId: function (e) { var t = e._hashId; return S.isUndefined(t) && (t = n(), e._hashId = t), t } }), p = w.Observable.extend({ init: function (t) { var i; if (w.Observable.fn.init.call(this), this._hashTable = new f, this.length = 0, S.isDefined(t)) if (e.isArray(t)) for (i = 0; i < t.length; i++)this.add(t[i]); else t.forEach(function (e, t) { this.add(e, t) }, this) }, add: function (e, t) { var i = this._hashTable.get(e); i || (i = this._hashTable.add(e), this.length++, this.trigger("changed")), i.value = t }, set: function (e, t) { this.add(e, t) }, get: function (e) { var t = this._hashTable.get(e); if (t) return t.value; throw Error("Cannot find key " + e) }, containsKey: function (e) { return this._hashTable.containsKey(e) }, remove: function (e) { if (this.containsKey(e)) return this.trigger("changed"), this.length--, this._hashTable.remove(e) }, forEach: function (e, t) { this._hashTable.forEach(function (i) { e.call(t, i.key, i.value) }) }, forEachValue: function (e, t) { this._hashTable.forEach(function (i) { e.call(t, i.value) }) }, forEachKey: function (e, t) { this._hashTable.forEach(function (i) { e.call(t, i.key) }) }, keys: function () { var e = []; return this.forEachKey(function (t) { e.push(t) }), e } }), m = w.Class.extend({ init: function () { this._tail = null, this._head = null, this.length = 0 }, enqueue: function (e) { var t = { value: e, next: null }; this._head ? (this._tail.next = t, this._tail = this._tail.next) : (this._head = t, this._tail = this._head), this.length++ }, dequeue: function () { if (this.length < 1) throw Error("The queue is empty."); var e = this._head.value; return this._head = this._head.next, this.length--, e }, contains: function (e) { for (var t = this._head; t;) { if (t.value === e) return !0; t = t.next } return !1 } }), g = w.Observable.extend({ init: function (e) { w.Observable.fn.init.call(this), this._hashTable = new f, this.length = 0, S.isDefined(e) && (e instanceof f ? e.forEach(function (e) { this.add(e) }) : e instanceof p && e.forEach(function (e, t) { this.add({ key: e, value: t }) }, this)) }, contains: function (e) { return this._hashTable.containsKey(e) }, add: function (e) { var t = this._hashTable.get(e); t || (this._hashTable.add(e, e), this.length++, this.trigger("changed")) }, get: function (e) { return this.contains(e) ? this._hashTable.get(e).value : null }, hash: function (e) { return this._hashTable._hash(e) }, remove: function (e) { this.contains(e) && (this._hashTable.remove(e), this.length--, this.trigger("changed")) }, forEach: function (e, t) { this._hashTable.forEach(function (t) { e(t.value) }, t) }, toArray: function () { var e = []; return this.forEach(function (t) { e.push(t) }), e } }), v = w.Class.extend({ init: function (e, t) { if (this.links = [], this.outgoing = [], this.incoming = [], this.weight = 1, this.id = S.isDefined(e) ? e : n(), S.isDefined(t)) { this.associatedShape = t; var i = t.bounds(); this.width = i.width, this.height = i.height, this.x = i.x, this.y = i.y } else this.associatedShape = null; this.data = null, this.type = "Node", this.shortForm = "Node '" + this.id + "'", this.isVirtual = !1 }, isIsolated: function () { return S.isEmpty(this.links) }, bounds: function (e) { return S.isDefined(e) ? (this.x = e.x, this.y = e.y, this.width = e.width, this.height = e.height, t) : new y.Rect(this.x, this.y, this.width, this.height) }, isLinkedTo: function (e) { var t = this; return S.any(t.links, function (i) { return i.getComplement(t) === e }) }, getChildren: function () { var e, t, i, n; if (0 === this.outgoing.length) return []; for (e = [], t = 0, i = this.outgoing.length; t < i; t++)n = this.outgoing[t], e.push(n.getComplement(this)); return e }, getParents: function () { var e, t, i, n; if (0 === this.incoming.length) return []; for (e = [], t = 0, i = this.incoming.length; t < i; t++)n = this.incoming[t], e.push(n.getComplement(this)); return e }, clone: function () { var e = new v; return S.isDefined(this.weight) && (e.weight = this.weight), S.isDefined(this.balance) && (e.balance = this.balance), S.isDefined(this.owner) && (e.owner = this.owner), e.associatedShape = this.associatedShape, e.x = this.x, e.y = this.y, e.width = this.width, e.height = this.height, e }, adjacentTo: function (e) { return null !== this.isLinkedTo(e) }, removeLink: function (e) { e.source === this && (S.remove(this.links, e), S.remove(this.outgoing, e), e.source = null), e.target === this && (S.remove(this.links, e), S.remove(this.incoming, e), e.target = null) }, hasLinkTo: function (e) { return S.any(this.outgoing, function (t) { return t.target === e }) }, degree: function () { return this.links.length }, incidentWith: function (e) { return A(this.links, e) }, getLinksWith: function (e) { return S.all(this.links, function (t) { return t.getComplement(this) === e }, this) }, getNeighbors: function () { var e = []; return S.forEach(this.incoming, function (t) { e.push(t.getComplement(this)) }, this), S.forEach(this.outgoing, function (t) { e.push(t.getComplement(this)) }, this), e } }), _ = w.Class.extend({ init: function (e, t, i, o) { if (S.isUndefined(e)) throw "The source of the new link is not set."; if (S.isUndefined(t)) throw "The target of the new link is not set."; var r, s; r = S.isString(e) ? new v(e) : e, s = S.isString(t) ? new v(t) : t, this.source = r, this.target = s, this.source.links.push(this), this.target.links.push(this), this.source.outgoing.push(this), this.target.incoming.push(this), this.id = S.isDefined(i) ? i : n(), this.associatedConnection = S.isDefined(o) ? o : null, this.type = "Link", this.shortForm = "Link '" + this.source.id + "->" + this.target.id + "'" }, getComplement: function (e) { if (this.source !== e && this.target !== e) throw "The given node is not incident with this link."; return this.source === e ? this.target : this.source }, getCommonNode: function (e) { return this.source === e.source || this.source === e.target ? this.source : this.target === e.source || this.target === e.target ? this.target : null }, isBridging: function (e, t) { return this.source === e && this.target === t || this.source === t && this.target === e }, getNodes: function () { return [this.source, this.target] }, incidentWith: function (e) { return this.source === e || this.target === e }, adjacentTo: function (e) { return A(this.source.links, e) || A(this.target.links, e) }, changeSource: function (e) { S.remove(this.source.links, this), S.remove(this.source.outgoing, this), e.links.push(this), e.outgoing.push(this), this.source = e }, changeTarget: function (e) { S.remove(this.target.links, this), S.remove(this.target.incoming, this), e.links.push(this), e.incoming.push(this), this.target = e }, changesNodes: function (e, t) { this.source === e ? this.changeSource(t) : this.target === e && this.changeTarget(t) }, reverse: function () { var e = this.source, t = this.target; return this.source = t, S.remove(e.outgoing, this), this.source.outgoing.push(this), this.target = e, S.remove(t.incoming, this), this.target.incoming.push(this), this }, directTo: function (e) { if (this.source !== e && this.target !== e) throw "The given node is not incident with this link."; this.target !== e && this.reverse() }, createReverseEdge: function () { var e = this.clone(); return e.reverse(), e.reversed = !0, e }, clone: function () { var e = new _(this.source, this.target); return e } }), (b = w.Class.extend({ init: function (e) { this.links = [], this.nodes = [], this._nodeMap = new p, this.diagram = null, this._root = null, S.isDefined(e) ? S.isString(e) ? this.id = e : (this.diagram = e, this.id = e.id) : this.id = n(), this.bounds = new r, this._hasCachedRelationships = !1, this.type = "Graph" }, cacheRelationships: function (e) { var t, i, n; if (S.isUndefined(e) && (e = !1), !this._hasCachedRelationships || e) { for (t = 0, i = this.nodes.length; t < i; t++)(n = this.nodes[t]).children = this.getChildren(n), n.parents = this.getParents(n); this._hasCachedRelationships = !0 } }, assignLevels: function (e, t, i) { var n, o, r, s; if (!e) throw "Start node not specified."; for (S.isUndefined(t) && (t = 0), this.cacheRelationships(), S.isUndefined(i) && (i = new p, S.forEach(this.nodes, function (e) { i.add(e, !1) })), i.set(e, !0), e.level = t, n = e.children, o = 0, r = n.length; o < r; o++)(s = n[o]) && !i.get(s) && this.assignLevels(s, t + 1, i) }, root: function (e) { if (S.isUndefined(e)) { if (this._root) return this._root; var t = S.first(this.nodes, function (e) { return 0 === e.incoming.length }); return t || S.first(this.nodes) } this._root = e }, getConnectedComponents: function () { var e, t, i, n; for (this.componentIndex = 0, this.setItemIndices(), e = S.initArray(this.nodes.length, -1), t = 0; t < this.nodes.length; t++)-1 === e[t] && (this._collectConnectedNodes(e, t), this.componentIndex++); for (i = [], n = 0; n < this.componentIndex; ++n)i[n] = new b; for (n = 0; n < e.length; ++n)i[e[n]].addNodeAndOutgoings(this.nodes[n]); return i.sort(function (e, t) { return t.nodes.length - e.nodes.length }), i }, _collectConnectedNodes: function (e, t) { e[t] = this.componentIndex; var i = this.nodes[t]; S.forEach(i.links, function (t) { var n = t.getComplement(i), o = n.index; -1 === e[o] && this._collectConnectedNodes(e, o) }, this) }, calcBounds: function () { var e, t, i, n; if (this.isEmpty()) return this.bounds = new r; for (e = null, t = 0, i = this.nodes.length; t < i; t++)n = this.nodes[t], e = e ? e.union(n.bounds()) : n.bounds(); return this.bounds = e }, getSpanningTree: function (e) { var t, i, n, o, r, s, a, l, c, d, u, h, f = new b, m = new p; for (f.root = e.clone(), f.root.level = 0, f.root.id = e.id, m.add(e, f.root), e.level = 0, n = [], o = [], f._addNode(f.root), n.push(e), o.push(e), r = 1; o.length > 0;)for (s = o.pop(), a = 0; a < s.links.length; a++)l = s.links[a], c = l.getComplement(s), A(n, c) || (c.level = s.level + 1, r < c.level + 1 && (r = c.level + 1), A(o, c) || o.push(c), A(n, c) || n.push(c), m.containsKey(s) ? t = m.get(s) : ((t = s.clone()).level = s.level, t.id = s.id, m.add(s, t)), m.containsKey(c) ? i = m.get(c) : ((i = c.clone()).level = c.level, i.id = c.id, m.add(c, i)), d = new _(t, i), f.addLink(d)); for (u = [], h = 0; h < r; h++)u.push([]); return S.forEach(f.nodes, function (e) { u[e.level].push(e) }), f.treeLevels = u, f.cacheRelationships(), f }, takeRandomNode: function (t, i) { if (S.isUndefined(t) && (t = []), S.isUndefined(i) && (i = 4), 0 === this.nodes.length) return null; if (1 === this.nodes.length) return A(t, this.nodes[0]) ? null : this.nodes[0]; var n = e.grep(this.nodes, function (e) { return !A(t, e) && e.degree() <= i }); return S.isEmpty(n) ? null : n[S.randomInteger(0, n.length)] }, isEmpty: function () { return S.isEmpty(this.nodes) }, isHealthy: function () { return S.all(this.links, function (e) { return A(this.nodes, e.source) && A(this.nodes, e.target) }, this) }, getParents: function (e) { if (!this.hasNode(e)) throw "The given node is not part of this graph."; return e.getParents() }, getChildren: function (e) { if (!this.hasNode(e)) throw "The given node is not part of this graph."; return e.getChildren() }, addLink: function (e, i, n) { var o, r, s; if (S.isUndefined(e)) throw "The source of the link is not defined."; if (S.isUndefined(i)) { if (S.isDefined(e.type) && "Link" === e.type) return this.addExistingLink(e), t; throw "The target of the link is not defined." } return o = this.getNode(e), S.isUndefined(o) && (o = this.addNode(e)), r = this.getNode(i), S.isUndefined(r) && (r = this.addNode(i)), s = new _(o, r), S.isDefined(n) && (s.owner = n), this.links.push(s), s }, removeAllLinks: function () { for (; this.links.length > 0;) { var e = this.links[0]; this.removeLink(e) } }, addExistingLink: function (e) { var t, i; this.hasLink(e) || (this.links.push(e), this.hasNode(e.source.id) ? (t = this.getNode(e.source.id), e.changeSource(t)) : this.addNode(e.source), this.hasNode(e.target.id) ? (i = this.getNode(e.target.id), e.changeTarget(i)) : this.addNode(e.target)) }, hasLink: function (e) { if (S.isString(e)) return S.any(this.links, function (t) { return t.id === e }); if ("Link" === e.type) return A(this.links, e); throw "The given object is neither an identifier nor a Link." }, getNode: function (e) { var t = e.id || e; if (this._nodeMap.containsKey(t)) return this._nodeMap.get(t) }, hasNode: function (e) { var t = e.id || e; return this._nodeMap.containsKey(t) }, _addNode: function (e) { this.nodes.push(e), this._nodeMap.add(e.id, e) }, _removeNode: function (e) { S.remove(this.nodes, e), this._nodeMap.remove(e.id) }, removeNode: function (e) { var t, i, n, o, r = e; if (S.isString(e) && (r = this.getNode(e)), !S.isDefined(r)) throw "The identifier should be a Node or the Id (string) of a node."; for (t = r.links, r.links = [], i = 0, n = t.length; i < n; i++)o = t[i], this.removeLink(o); this._removeNode(r) }, areConnected: function (e, t) { return S.any(this.links, function (i) { return i.source == e && i.target == t || i.source == t && i.target == e }) }, removeLink: function (e) { S.remove(this.links, e), S.remove(e.source.outgoing, e), S.remove(e.source.links, e), S.remove(e.target.incoming, e), S.remove(e.target.links, e) }, addNode: function (e, t, i) { var n = null; if (!S.isDefined(e)) throw "No Node or identifier for a new Node is given."; if (S.isString(e)) { if (this.hasNode(e)) return this.getNode(e); n = new v(e) } else { if (this.hasNode(e)) return this.getNode(e); n = e } return S.isDefined(t) && n.bounds(t), S.isDefined(i) && (n.owner = i), this._addNode(n), n }, addNodeAndOutgoings: function (e) { this.hasNode(e) || this._addNode(e); var t = e.outgoing; e.outgoing = [], S.forEach(t, function (e) { this.addExistingLink(e) }, this) }, setItemIndices: function () { var e; for (e = 0; e < this.nodes.length; ++e)this.nodes[e].index = e; for (e = 0; e < this.links.length; ++e)this.links[e].index = e }, clone: function (e) { var t, i = new b, n = S.isDefined(e) && !0 === e; return n && (i.nodeMap = new p, i.linkMap = new p), t = new p, S.forEach(this.nodes, function (e) { var o = e.clone(); t.set(e, o), i._addNode(o), n && i.nodeMap.set(o, e) }), S.forEach(this.links, function (e) { if (t.containsKey(e.source) && t.containsKey(e.target)) { var o = i.addLink(t.get(e.source), t.get(e.target)); n && i.linkMap.set(o, e) } }), i }, linearize: function (e) { return b.Utils.linearize(this, e) }, depthFirstTraversal: function (e, t) { var i, n; if (S.isUndefined(e)) throw "You need to supply a starting node."; if (S.isUndefined(t)) throw "You need to supply an action."; if (!this.hasNode(e)) throw "The given start-node is not part of this graph"; i = this.getNode(e), n = [], this._dftIterator(i, t, n) }, _dftIterator: function (e, t, i) { var n, o, r, s; for (t(e), i.push(e), n = e.getChildren(), o = 0, r = n.length; o < r; o++)s = n[o], A(i, s) || this._dftIterator(s, t, i) }, breadthFirstTraversal: function (e, t) { var i, n, o, r, s, a, l, c; if (S.isUndefined(e)) throw "You need to supply a starting node."; if (S.isUndefined(t)) throw "You need to supply an action."; if (!this.hasNode(e)) throw "The given start-node is not part of this graph"; for (i = this.getNode(e), n = new m, o = [], n.enqueue(i); n.length > 0;)for (r = n.dequeue(), t(r), o.push(r), s = r.getChildren(), a = 0, l = s.length; a < l; a++)c = s[a], A(o, c) || A(n, c) || n.enqueue(c) }, _stronglyConnectedComponents: function (e, t, i, n, o, r, s) { var a, l, c, d, u; for (i.add(t, s), n.add(t, s), s++, r.push(t), a = t.getChildren(), c = 0, d = a.length; c < d; c++)l = a[c], i.containsKey(l) ? A(r, l) && n.add(t, Math.min(n.get(t), i.get(l))) : (this._stronglyConnectedComponents(e, l, i, n, o, r, s), n.add(t, Math.min(n.get(t), n.get(l)))); if (n.get(t) === i.get(t)) { u = []; do { l = r.pop(), u.push(l) } while (l !== t); (!e || u.length > 1) && o.push(u) } }, findCycles: function (e) { var t, i, n, o, r, s, a; for (S.isUndefined(e) && (e = !0), t = new p, i = new p, n = [], o = [], r = 0, s = this.nodes.length; r < s; r++)a = this.nodes[r], t.containsKey(a) || this._stronglyConnectedComponents(e, a, t, i, n, o, 0); return n }, isAcyclic: function () { return S.isEmpty(this.findCycles()) }, isSubGraph: function (e) { var t = e.linearize(), i = this.linearize(); return S.all(t, function (e) { return A(i, e) }) }, makeAcyclic: function () { var e, t, i, n, o, r, s, a, l, c, d, u, h, f, m, g, v, _, b, w, y, k, x, C, T, D, A, E, I, M, R, F; if (this.isEmpty() || this.nodes.length <= 1 || this.links.length <= 1) return []; if (2 == this.nodes.length) { if (e = [], this.links.length > 1) for (t = this.links[0], i = t.source, n = 0, o = this.links.length; n < o; n++)(r = this.links[n]).source != i && (s = r.reverse(), e.push(s)); return e } for (a = this.clone(!0), l = this.nodes.length, c = new p, d = function (e) { return 0 === e.outgoing.length ? 2 - l : 0 === e.incoming.length ? l - 2 : e.outgoing.length - e.incoming.length }, u = function (e, t) { var i = d(e); t.containsKey(i) || t.set(i, []), t.get(i).push(e) }, S.forEach(a.nodes, function (e) { u(e, c) }), h = [], f = []; a.nodes.length > 0;) { if (c.containsKey(2 - l)) for (_ = c.get(2 - l); _.length > 0;) { for (g = _.pop(), b = 0; b < g.links.length; b++)w = g.links[b], m = w.getComplement(g), v = d(m), S.remove(c.get(v), m), m.removeLink(w), u(m, c); a._removeNode(g), f.unshift(g) } if (c.containsKey(l - 2)) for (y = c.get(l - 2); y.length > 0;) { for (m = y.pop(), k = 0; k < m.links.length; k++)x = m.links[k], g = x.getComplement(m), v = d(g), S.remove(c.get(v), g), g.removeLink(x), u(g, c); h.push(m), a._removeNode(m) } if (a.nodes.length > 0) for (C = l - 3; C > 2 - l; C--)if (c.containsKey(C) && c.get(C).length > 0) { for (T = c.get(C), D = T.pop(), A = 0; A < D.links.length; A++)E = D.links[A], I = E.getComplement(D), v = d(I), S.remove(c.get(v), I), I.removeLink(E), u(I, c); h.push(D), a._removeNode(D); break } } for (h = h.concat(f), M = new p, R = 0; R < this.nodes.length; R++)M.set(a.nodeMap.get(h[R]), R); return F = [], S.forEach(this.links, function (e) { M.get(e.source) > M.get(e.target) && (e.reverse(), F.push(e)) }), F } })).Predefined = { EightGraph: function () { return b.Utils.parse(["1->2", "2->3", "3->4", "4->1", "3->5", "5->6", "6->7", "7->3"]) }, Mindmap: function () { return b.Utils.parse(["0->1", "0->2", "0->3", "0->4", "0->5", "1->6", "1->7", "7->8", "2->9", "9->10", "9->11", "3->12", "12->13", "13->14", "4->15", "4->16", "15->17", "15->18", "18->19", "18->20", "14->21", "14->22", "5->23", "23->24", "23->25", "6->26"]) }, ThreeGraph: function () { return b.Utils.parse(["1->2", "2->3", "3->1"]) }, BinaryTree: function (e) { return S.isUndefined(e) && (e = 5), b.Utils.createBalancedTree(e, 2) }, Linear: function (e) { return S.isUndefined(e) && (e = 10), b.Utils.createBalancedTree(e, 1) }, Tree: function (e, t) { return b.Utils.createBalancedTree(e, t) }, Forest: function (e, t, i) { return b.Utils.createBalancedForest(e, t, i) }, Workflow: function () { return b.Utils.parse(["0->1", "1->2", "2->3", "1->4", "4->3", "3->5", "5->6", "6->3", "6->7", "5->4"]) }, Grid: function (e, t) { var i, n, o, r, s, a = new y.Graph; if (e <= 0 && t <= 0) return a; for (i = 0; i < e + 1; i++)for (n = null, o = 0; o < t + 1; o++)r = new v(i + "." + o), a.addNode(r), n && a.addLink(n, r), i > 0 && (s = a.getNode(i - 1 + "." + o), a.addLink(s, r)), n = r; return a } }, b.Utils = { parse: function (e) { var t, i, n, o, r, s = new y.Graph, a = e.slice(); for (i = 0, n = a.length; i < n; i++) { if (o = a[i], S.isString(o)) { if (o.indexOf("->") < 0) throw "The link should be specified as 'a->b'."; if (2 != (r = o.split("->")).length) throw "The link should be specified as 'a->b'."; t = new _(r[0], r[1]), s.addLink(t) } if (S.isObject(o)) { if (!t) throw "Specification found before Link definition."; w.deepExtend(t, o) } } return s }, linearize: function (e, t) { var i, n, o, r; if (S.isUndefined(e)) throw "Expected an instance of a Graph object in slot one."; for (S.isUndefined(t) && (t = !1), i = [], n = 0, o = e.links.length; n < o; n++)r = e.links[n], i.push(r.source.id + "->" + r.target.id), t && i.push({ id: r.id }); return i }, _addShape: function (e, t, i, o) { return S.isUndefined(t) && (t = new y.Point(0, 0)), S.isUndefined(i) && (i = n()), o = w.deepExtend({ width: 20, height: 20, id: i, radius: 10, fill: "#778899", data: "circle", undoable: !1, x: t.x, y: t.y }, o), e.addShape(o) }, _addConnection: function (e, t, i, n) { return e.connect(t, i, n) }, createDiagramFromGraph: function (e, t, i, n) { var o, s, a, l, c, d, u, h, f, p, m, g, v, _, b; if (S.isUndefined(e)) throw "The diagram surface is undefined."; if (S.isUndefined(t)) throw "No graph specification defined."; for (S.isUndefined(i) && (i = !0), S.isUndefined(n) && (n = !1), o = e.element.clientWidth || 200, s = e.element.clientHeight || 200, a = [], d = 0, u = t.nodes.length; d < u; d++)l = t.nodes[d], h = l.position, S.isUndefined(h) && (h = S.isDefined(l.x) && S.isDefined(l.y) ? new T(l.x, l.y) : new T(S.randomInteger(10, o - 20), S.randomInteger(10, s - 20))), f = {}, "0" === l.id || n && w.deepExtend(f, { width: 150 * Math.random() + 20, height: 80 * Math.random() + 50, data: "rectangle", fill: { color: "#778899" } }), c = this._addShape(e, h, l.id, f), p = c.bounds(), S.isDefined(p) && (l.x = p.x, l.y = p.y, l.width = p.width, l.height = p.height), a[l.id] = c; for (m = 0; m < t.links.length; m++)g = t.links[m], v = a[g.source.id], S.isUndefined(v) || (_ = a[g.target.id], S.isUndefined(_) || this._addConnection(e, v, _, { id: g.id })); if (i) for (new e.SpringLayout(e).layoutGraph(t, { limitToView: !1 }), b = 0; b < t.nodes.length; b++)l = t.nodes[b], (c = a[l.id]).bounds(new r(l.x, l.y, l.width, l.height)) }, createBalancedTree: function (e, t) { var i, n, o, r, s, a, l, c, d, u; if (S.isUndefined(e) && (e = 3), S.isUndefined(t) && (t = 3), i = new y.Graph, n = -1, o = [], e <= 0 || t <= 0) return i; for (s = new v("" + ++n), i.addNode(s), i.root = s, o.push(s), a = 0; a < e; a++) { for (r = [], l = 0; l < o.length; l++)for (c = o[l], d = 0; d < t; d++)u = new v("" + ++n), i.addLink(c, u), r.push(u); o = r } return i }, createBalancedForest: function (e, t, i) { var n, o, r, s, a, l, c, d, u, h, f; if (S.isUndefined(e) && (e = 3), S.isUndefined(t) && (t = 3), S.isUndefined(i) && (i = 5), n = new y.Graph, o = -1, r = [], e <= 0 || t <= 0 || i <= 0) return n; for (a = 0; a < i; a++)for (l = new v("" + ++o), n.addNode(l), r = [l], c = 0; c < e; c++) { for (s = [], d = 0; d < r.length; d++)for (u = r[d], h = 0; h < t; h++)f = new v("" + ++o), n.addLink(u, f), s.push(f); r = s } return n }, createRandomConnectedGraph: function (e, t, i) { var n, o, r, s, a, l, c, d, u, h; if (S.isUndefined(e) && (e = 40), S.isUndefined(t) && (t = 4), S.isUndefined(i) && (i = !1), n = new y.Graph, o = -1, e <= 0) return n; if (r = new v("" + ++o), n.addNode(r), 1 === e) return n; if (e > 1) { for (s = 1; s < e && (a = n.takeRandomNode([], t)); s++)l = n.addNode("" + s), n.addLink(a, l); if (!i && e > 1) for (c = S.randomInteger(1, e), d = 0; d < c; d++)u = n.takeRandomNode([], t), h = n.takeRandomNode([], t), u && h && !n.areConnected(u, h) && n.addLink(u, h); return n } }, randomDiagram: function (e, t, i, n, o) { var r = w.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(t, i, n); b.Utils.createDiagramFromGraph(e, r, !1, o) } }, w.deepExtend(y, { init: function (e) { w.init(e, y.ui) }, Point: T, Intersect: a, Geometry: h, Rect: r, Size: s, RectAlign: l, Matrix: d, MatrixVector: u, normalVariable: function (e, t) { var i, n, o; do { i = 2 * Math.random() - 1, n = 2 * Math.random() - 1, o = i * i + n * n } while (!o || o > 1); return e + t * i * Math.sqrt(-2 * Math.log(o) / o) }, randomId: n, Dictionary: p, HashTable: f, Queue: m, Set: g, Node: v, Link: _, Graph: b, PathDefiner: o }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/diagram/svg.min", ["kendo.drawing.min", "dataviz/diagram/math.min"], function () { !function (e, t) { function i(e, t) { var i, n, o, r = this.options, s = !1; for (o = 0; o < t.length; o++)n = t[o], i = e[n], L(i) && r[n] !== i && (r[n] = i, s = !0); return s } function n(e) { return { x: e.x || 0, y: e.y || 0, width: e.width || 0, height: e.height || 0 } } function o(e) { if (e) { var t = e; return H(t) && (t = { color: t }), t.color && (t.color = r(t.color)), t } } function r(e) { return e != q ? new V.Color(e).toHex() : e } function s(e, t) { return new V.Segment(new O.Point(e, t)) } function a(e) { if (e) return new O.Rect([e.x, e.y], [e.width, e.height]) } var l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E = window.kendo, I = E.dataviz.diagram, M = E.Class, R = E.deepExtend, F = I.Point, z = I.Rect, P = I.Matrix, B = I.Utils, L = B.isNumber, H = B.isString, N = I.MatrixVector, O = E.geometry, V = E.drawing, U = V.util.defined, W = e.inArray, q = "transparent", j = { none: "none", arrowStart: "ArrowStart", filledCircle: "FilledCircle", arrowEnd: "ArrowEnd" }, G = "start", $ = "end", Y = "width", K = "height"; I.Markers = j, l = M.extend({ init: function (e, t) { this.x = e, this.y = t }, toMatrix: function () { return P.scaling(this.x, this.y) }, toString: function () { return E.format("scale({0},{1})", this.x, this.y) }, invert: function () { return new l(1 / this.x, 1 / this.y) } }), c = M.extend({ init: function (e, t) { this.x = e, this.y = t }, toMatrixVector: function () { return new N(0, 0, 0, 0, this.x, this.y) }, toMatrix: function () { return P.translation(this.x, this.y) }, toString: function () { return E.format("translate({0},{1})", this.x, this.y) }, plus: function (e) { this.x += e.x, this.y += e.y }, times: function (e) { this.x *= e, this.y *= e }, length: function () { return Math.sqrt(this.x * this.x + this.y * this.y) }, normalize: function () { 0 !== this.Length && this.times(1 / this.length()) }, invert: function () { return new c(-this.x, -this.y) } }), (d = M.extend({ init: function (e, t, i) { this.x = t || 0, this.y = i || 0, this.angle = e }, toString: function () { return this.x && this.y ? E.format("rotate({0},{1},{2})", this.angle, this.x, this.y) : E.format("rotate({0})", this.angle) }, toMatrix: function () { return P.rotation(this.angle, this.x, this.y) }, center: function () { return new F(this.x, this.y) }, invert: function () { return new d(360 - this.angle, this.x, this.y) } })).ZERO = new d(0), d.create = function (e) { return new d(e.angle, e.x, e.y) }, d.parse = function (e) { var t = e.slice(1, e.length - 1).split(","), i = t[0], n = t[1], o = t[2], r = new d(i, n, o); return r }, u = M.extend({ init: function (e, i, n, o, r, s) { this.translate = new c(e, i), n !== t && o !== t && (this.scale = new l(n, o)), r !== t && (this.rotate = s ? new d(r, s.x, s.y) : new d(r)) }, toString: function () { var e = function (e) { return e ? "" + e : "" }; return e(this.translate) + e(this.rotate) + e(this.scale) }, render: function (e) { e._transform = this, e._renderTransform() }, toMatrix: function () { var e = P.unit(); return this.translate && (e = e.times(this.translate.toMatrix())), this.rotate && (e = e.times(this.rotate.toMatrix())), this.scale && (e = e.times(this.scale.toMatrix())), e }, invert: function () { var e, i, n = this.rotate ? this.rotate.invert() : t, o = n ? n.toMatrix() : P.unit(), r = this.scale ? this.scale.invert() : t, s = r ? r.toMatrix() : P.unit(), a = new F(-this.translate.x, -this.translate.y); return a = o.times(s).apply(a), e = new c(a.x, a.y), (i = new u).translate = e, i.rotate = n, i.scale = r, i } }), h = { _setScale: function () { var e = this.options, t = this._originWidth, i = this._originHeight, n = e.width / t, o = e.height / i; L(n) || (n = 1), L(o) || (o = 1), this._transform.scale = new l(n, o) }, _setTranslate: function () { var e = this.options, t = e.x || 0, i = e.y || 0; this._transform.translate = new c(t, i) }, _initSize: function () { var e = this.options, t = !1; !1 !== e.autoSize && (U(e.width) || U(e.height)) && (this._measure(!0), this._setScale(), t = !0), (U(e.x) || U(e.y)) && (this._setTranslate(), t = !0), t && this._renderTransform() }, _updateSize: function (e) { var t = !1; return !1 !== this.options.autoSize && this._diffNumericOptions(e, [Y, K]) && (t = !0, this._measure(!0), this._setScale()), this._diffNumericOptions(e, ["x", "y"]) && (t = !0, this._setTranslate()), t && this._renderTransform(), t } }, f = M.extend({ init: function (e) { var t = this; t.options = R({}, t.options, e), t.id = t.options.id, t._originSize = z.empty(), t._transform = new u }, visible: function (e) { return this.drawingContainer().visible(e) }, redraw: function (e) { e && e.id && (this.id = e.id) }, position: function (e, i) { var n = this.options; return U(e) ? (U(i) ? (n.x = e, n.y = i) : e instanceof F && (n.x = e.x, n.y = e.y), this._transform.translate = new c(n.x, n.y), this._renderTransform(), t) : new F(n.x, n.y) }, rotate: function (e, t) { return U(e) && (this._transform.rotate = new d(e, t.x, t.y), this._renderTransform()), this._transform.rotate || d.ZERO }, drawingContainer: function () { return this.drawingElement }, _renderTransform: function () { var e = this._transform.toMatrix(); this.drawingContainer().transform(new O.Matrix(e.a, e.b, e.c, e.d, e.e, e.f)) }, _hover: function () { }, _diffNumericOptions: i, _measure: function (e) { var t, i, n; return !this._measured || e ? (i = this._boundingBox() || new O.Rect, n = i.topLeft(), t = new z(n.x, n.y, i.width(), i.height()), this._originSize = t, this._originWidth = t.width, this._originHeight = t.height, this._measured = !0) : t = this._originSize, t }, _boundingBox: function () { return this.drawingElement.rawBBox() } }), p = f.extend({ init: function (e) { f.fn.init.call(this, e), (e = this.options).fill = o(e.fill), e.stroke = o(e.stroke) }, options: { stroke: { color: "gray", width: 1 }, fill: { color: q } }, fill: function (e, t) { this._fill({ color: r(e), opacity: t }) }, stroke: function (e, t, i) { this._stroke({ color: r(e), width: t, opacity: i }) }, redraw: function (e) { var t, i; e && (t = e.stroke, i = e.fill, t && this._stroke(o(t)), i && this._fill(o(i)), f.fn.redraw.call(this, e)) }, _hover: function (e) { var t, i = this.drawingElement, n = this.options, r = n.hover; r && r.fill && (t = e ? o(r.fill) : n.fill, i.fill(t.color, t.opacity)) }, _stroke: function (e) { var t, i = this.options; R(i, { stroke: e }), e = i.stroke, t = null, e.width > 0 && (t = { color: e.color, width: e.width, opacity: e.opacity, dashType: e.dashType }), this.drawingElement.options.set("stroke", t) }, _fill: function (e) { var t, i, n, o = this.options; R(o, { fill: e || {} }), (t = o.fill).gradient ? (i = t.gradient, n = "radial" === i.type ? V.RadialGradient : V.LinearGradient, this.drawingElement.fill(new n(i))) : this.drawingElement.fill(t.color, t.opacity) } }), m = p.extend({ init: function (e) { e = this._textColor(e), p.fn.init.call(this, e), this._font(), this._initText(), this._initSize() }, options: { fontSize: 15, fontFamily: "sans-serif", stroke: { width: 0 }, fill: { color: "black" }, autoSize: !0 }, _initText: function () { var e = this.options; this.drawingElement = new V.Text(U(e.text) ? e.text : "", new O.Point, { font: e.font }), this._fill(), this._stroke() }, _textColor: function (e) { return e && e.color && (e = R({}, e, { fill: { color: e.color } })), e }, _font: function () { var e, t = this.options; t.fontFamily && U(t.fontSize) ? (e = [], t.fontStyle && e.push(t.fontStyle), t.fontWeight && e.push(t.fontWeight), e.push(t.fontSize + (L(t.fontSize) ? "px" : "")), e.push(t.fontFamily), t.font = e.join(" ")) : delete t.font }, content: function (e) { return this.drawingElement.content(e) }, redraw: function (e) { var t, i; e && (t = !1, i = this.options, e = this._textColor(e), p.fn.redraw.call(this, e), (e.fontFamily || U(e.fontSize) || e.fontStyle || e.fontWeight) && (R(i, { fontFamily: e.fontFamily, fontSize: e.fontSize, fontStyle: e.fontStyle, fontWeight: e.fontWeight }), this._font(), this.drawingElement.options.set("font", i.font), t = !0), e.text && (this.content(e.text), t = !0), !this._updateSize(e) && t && this._initSize()) } }), R(m.fn, h), g = p.extend({ init: function (e) { p.fn.init.call(this, e), this._initPath(), this._setPosition() }, _setPosition: function () { var e = this.options, t = e.x, i = e.y; (U(t) || U(i)) && this.position(t || 0, i || 0) }, redraw: function (e) { e && (p.fn.redraw.call(this, e), this._diffNumericOptions(e, [Y, K]) && this._drawPath(), this._diffNumericOptions(e, ["x", "y"]) && this._setPosition()) }, _initPath: function () { var e = this.options; this.drawingElement = new V.Path({ stroke: e.stroke, closed: !0 }), this._fill(), this._drawPath() }, _drawPath: function () { var e = this.drawingElement, t = n(this.options), i = t.width, o = t.height; e.segments.elements([s(0, 0), s(i, 0), s(i, o), s(0, o)]) } }), v = p.extend({ init: function (e) { p.fn.init.call(this, e); var t = this.options.anchor; this.anchor = new O.Point(t.x, t.y), this.createElement() }, options: { stroke: { color: q, width: 0 }, fill: { color: "black" } }, _transformToPath: function (e, t) { var i = t.transform(); return e && i && (e = e.transformCopy(i)), e }, redraw: function (e) { e && (e.position && (this.options.position = e.position), p.fn.redraw.call(this, e)) } }), _ = v.extend({ options: { radius: 4, anchor: { x: 0, y: 0 } }, createElement: function () { var e = this.options; this.drawingElement = new V.Circle(new O.Circle(this.anchor, e.radius), { fill: e.fill, stroke: e.stroke }) }, positionMarker: function (e) { var t, i, n = this.options, o = n.position, r = e.segments; (t = o == G ? r[0] : r[r.length - 1]) && (i = this._transformToPath(t.anchor(), e), this.drawingElement.transform(O.transform().translate(i.x, i.y))) } }), b = v.extend({ options: { path: "M 0 0 L 10 5 L 0 10 L 3 5 z", anchor: { x: 10, y: 5 } }, createElement: function () { var e = this.options; this.drawingElement = V.Path.parse(e.path, { fill: e.fill, stroke: e.stroke }) }, positionMarker: function (e) { var t, i, n = this._linePoints(e), o = n.start, r = n.end, s = O.transform(); o && s.rotate(function (e, t) { var i = t.x - e.x, n = t.y - e.y; return V.util.deg(Math.atan2(n, i)) }(o, r), r), r && (t = this.anchor, i = r.clone().translate(-t.x, -t.y), s.translate(i.x, i.y)), this.drawingElement.transform(s) }, _linePoints: function (e) { var t, i, n, o, r, s = this.options, a = e.segments; if (s.position == G ? (n = a[0]) && (i = n.anchor(), t = n.controlOut(), o = a[1], !t && o && (t = o.anchor())) : (n = a[a.length - 1]) && (i = n.anchor(), t = n.controlIn(), r = a[a.length - 2], !t && r && (t = r.anchor())), i) return { start: this._transformToPath(t, e), end: this._transformToPath(i, e) } } }), w = { _getPath: function (e) { var t = this.drawingElement; if (t instanceof V.MultiPath && (t = e == G ? t.paths[0] : t.paths[t.paths.length - 1]), t && t.segments.length) return t }, _normalizeMarkerOptions: function (e) { var t = e.startCap, i = e.endCap; H(t) && (e.startCap = { type: t }), H(i) && (e.endCap = { type: i }) }, _removeMarker: function (e) { var t = this._markers[e]; t && (this.drawingContainer().remove(t.drawingElement), delete this._markers[e]) }, _createMarkers: function () { var e = this.options; this._normalizeMarkerOptions(e), this._markers = {}, this._markers[G] = this._createMarker(e.startCap, G), this._markers[$] = this._createMarker(e.endCap, $) }, _createMarker: function (e, i) { var n, o, r = (e || {}).type, s = this._getPath(i); return s ? (r == j.filledCircle ? n = _ : r == j.arrowStart || r == j.arrowEnd ? n = b : this._removeMarker(i), n ? ((o = new n(R({}, e, { position: i }))).positionMarker(s), this.drawingContainer().append(o.drawingElement), o) : t) : (this._removeMarker(i), t) }, _positionMarker: function (e) { var t, i = this._markers[e]; i && ((t = this._getPath(e)) ? i.positionMarker(t) : this._removeMarker(e)) }, _capMap: { start: "startCap", end: "endCap" }, _redrawMarker: function (e, t, i) { var n, o, r, s, a; return this._normalizeMarkerOptions(i), n = this.options, o = this._capMap[t], r = (n[o] || {}).type, s = i[o], a = !1, s ? (n[o] = R({}, n[o], s), s.type && r != s.type ? (this._removeMarker(t), this._markers[t] = this._createMarker(n[o], t), a = !0) : this._markers[t] && this._markers[t].redraw(s)) : e && !this._markers[t] && n[o] && (this._markers[t] = this._createMarker(n[o], t), a = !0), a }, _redrawMarkers: function (e, t) { !this._redrawMarker(e, G, t) && e && this._positionMarker(G), !this._redrawMarker(e, $, t) && e && this._positionMarker($) } }, y = p.extend({ init: function (e) { p.fn.init.call(this, e), this.container = new V.Group, this._createElements(), this._initSize() }, options: { autoSize: !0 }, drawingContainer: function () { return this.container }, data: function (e) { var i = this.options; return e ? (i.data != e && (i.data = e, this._setData(e), this._initSize(), this._redrawMarkers(!0, {})), t) : i.data }, redraw: function (e) { var t, i; e && (p.fn.redraw.call(this, e), t = this.options, i = e.data, U(i) && t.data != i ? (t.data = i, this._setData(i), this._updateSize(e) || this._initSize(), this._redrawMarkers(!0, e)) : (this._updateSize(e), this._redrawMarkers(!1, e))) }, _createElements: function () { var e = this.options; this.drawingElement = V.Path.parse(e.data || "", { stroke: e.stroke }), this._fill(), this.container.append(this.drawingElement), this._createMarkers() }, _setData: function (e) { var t = this.drawingElement, i = V.Path.parse(e || ""), n = i.paths.slice(0); i.paths.elements([]), t.paths.elements(n) } }), R(y.fn, h), R(y.fn, w), k = p.extend({ init: function (e) { p.fn.init.call(this, e), this.container = new V.Group, this._initPath(), this._createMarkers() }, drawingContainer: function () { return this.container }, redraw: function (e) { var t, i; e && (t = (e = e || {}).from, i = e.to, t && (this.options.from = t), i && (this.options.to = i), t || i ? (this._drawPath(), this._redrawMarkers(!0, e)) : this._redrawMarkers(!1, e), p.fn.redraw.call(this, e)) }, _initPath: function () { var e = this.options, t = this.drawingElement = new V.Path({ stroke: e.stroke }); this._fill(), this._drawPath(), this.container.append(t) }, _drawPath: function () { var e = this.options, t = this.drawingElement, i = e.from || new F, n = e.to || new F; t.segments.elements([s(i.x, i.y), s(n.x, n.y)]) } }), R(k.fn, w), x = p.extend({ init: function (e) { p.fn.init.call(this, e), this.container = new V.Group, this._initPath(), this._createMarkers() }, drawingContainer: function () { return this.container }, points: function (e) { var i = this.options; return e ? (i.points = e, this._updatePath(), t) : i.points }, redraw: function (e) { if (e) { var t = e.points; p.fn.redraw.call(this, e), t && this._pointsDiffer(t) ? (this.points(t), this._redrawMarkers(!0, e)) : this._redrawMarkers(!1, e) } }, _initPath: function () { var e = this.options; this.drawingElement = new V.Path({ stroke: e.stroke }), this._fill(), this.container.append(this.drawingElement), e.points && this._updatePath() }, _pointsDiffer: function (e) { var t, i = this.options.points, n = i.length !== e.length; if (!n) for (t = 0; t < e.length; t++)if (i[t].x !== e[t].x || i[t].y !== e[t].y) { n = !0; break } return n }, _updatePath: function () { var e, t, i = this.drawingElement, n = this.options, o = n.points, r = []; for (t = 0; t < o.length; t++)e = o[t], r.push(s(e.x, e.y)); i.segments.elements(r) }, options: { points: [] } }), R(x.fn, w), C = f.extend({ init: function (e) { f.fn.init.call(this, e), this._initImage() }, redraw: function (e) { e && (e.source && this.drawingElement.src(e.source), this._diffNumericOptions(e, [Y, K, "x", "y"]) && this.drawingElement.rect(this._rect()), f.fn.redraw.call(this, e)) }, _initImage: function () { var e = this.options, t = this._rect(); this.drawingElement = new V.Image(e.source, t, {}) }, _rect: function () { var e = n(this.options), t = new O.Point(e.x, e.y), i = new O.Size(e.width, e.height); return new O.Rect(t, i) } }), S = f.extend({ init: function (e) { this.children = [], f.fn.init.call(this, e), this.drawingElement = new V.Group, this._initSize() }, options: { autoSize: !1 }, append: function (e) { this.drawingElement.append(e.drawingContainer()), this.children.push(e), this._childrenChange = !0 }, remove: function (e) { this._remove(e) && (this._childrenChange = !0) }, _remove: function (e) { var t = W(e, this.children); if (t >= 0) return this.drawingElement.removeAt(t), this.children.splice(t, 1), !0 }, clear: function () { this.drawingElement.clear(), this.children = [], this._childrenChange = !0 }, toFront: function (e) { var t, i; for (i = 0; i < e.length; i++)t = e[i], this._remove(t) && this.append(t) }, toBack: function (e) { this._reorderChildren(e, 0) }, toIndex: function (e, t) { this._reorderChildren(e, t) }, _reorderChildren: function (e, t) { var i, n, o, r, s, a = this.drawingElement, l = a.children.slice(0), c = this.children, d = L(t); for (i = 0; i < e.length; i++)s = e[i], r = s.drawingContainer(), (n = W(s, c)) >= 0 && (l.splice(n, 1), c.splice(n, 1), o = d ? t : t[i], l.splice(o, 0, r), c.splice(o, 0, s)); a.clear(), a.append.apply(a, l) }, redraw: function (e) { e && (this._childrenChange ? (this._childrenChange = !1, this._updateSize(e) || this._initSize()) : this._updateSize(e), f.fn.redraw.call(this, e)) }, _boundingBox: function () { var e, t, i, n, o = this.children; for (n = 0; n < o.length; n++)(t = o[n]).visible() && !1 !== t._includeInBBox && ((i = t.drawingContainer().clippedBBox(null)) && (e = e ? O.Rect.union(e, i) : i)); return e } }), R(S.fn, h), T = S.extend({ init: function (e, t) { this.children = [], f.fn.init.call(this, t), this.drawingElement = new V.Layout(a(e), t), this._initSize() }, rect: function (e) { if (e) this.drawingElement.rect(a(e)); else { var t = this.drawingElement.rect(); if (t) return new z(t.origin.x, t.origin.y, t.size.width, t.size.height) } }, reflow: function () { this.drawingElement.reflow() }, redraw: function (e) { E.deepExtend(this.drawingElement.options, e), S.fn.redraw.call(this, e) } }), D = p.extend({ init: function (e) { p.fn.init.call(this, e), this._initCircle(), this._initSize() }, redraw: function (e) { if (e) { var t = this.options; e.center && (R(t, { center: e.center }), this._center.move(t.center.x, t.center.y)), this._diffNumericOptions(e, ["radius"]) && this._circle.setRadius(t.radius), this._updateSize(e), p.fn.redraw.call(this, e) } }, _initCircle: function () { var e, t = this.options, i = t.width, n = t.height, o = t.radius; U(o) || (U(i) || (i = n), U(n) || (n = i), t.radius = o = Math.min(i, n) / 2), e = t.center || { x: o, y: o }, this._center = new O.Point(e.x, e.y), this._circle = new O.Circle(this._center, o), this.drawingElement = new V.Circle(this._circle, { stroke: t.stroke }), this._fill() } }), R(D.fn, h), A = M.extend({ init: function (e, t) { t = t || {}, this.element = e, this.surface = V.Surface.create(e, t), E.isFunction(this.surface.translate) && (this.translate = this._translate), this.drawingElement = new V.Group, this._viewBox = new z(0, 0, t.width, t.height), this.size(this._viewBox) }, bounds: function () { var e = this.drawingElement.clippedBBox(); return new z(0, 0, e.width(), e.height()) }, size: function (e) { var t = this._viewBox; return U(e) && (t.width = e.width, t.height = e.height, this.surface.setSize(e)), { width: t.width, height: t.height } }, _translate: function (e, t) { var i = this._viewBox; return U(e) && U(t) && (i.x = e, i.y = t, this.surface.translate({ x: e, y: t })), { x: i.x, y: i.y } }, draw: function () { this.surface.draw(this.drawingElement) }, append: function (e) { return this.drawingElement.append(e.drawingContainer()), this }, remove: function (e) { this.drawingElement.remove(e.drawingContainer()) }, insertBefore: function () { }, clear: function () { this.drawingElement.clear() }, destroy: function (t) { this.surface.destroy(), t && e(this.element).remove() } }), E.deepExtend(I, { init: function (e) { E.init(e, I.ui) }, diffNumericOptions: i, Element: f, Scale: l, Translation: c, Rotation: d, Circle: D, Group: S, Rectangle: g, Canvas: A, Path: y, Layout: T, Line: k, MarkerBase: v, ArrowMarker: b, CircleMarker: _, Polyline: x, CompositeTransform: u, TextBlock: m, Image: C, VisualBase: p }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/diagram/services.min", ["kendo.drawing.min", "dataviz/diagram/svg.min"], function () { !function (e, t) { function i(e, t) { return t.charCodeAt(0) == e || t.toUpperCase().charCodeAt(0) == e } function n(e) { var t = e.options.editable; return t && !1 !== t.drag } function o(e) { return !1 === e.ctrlKey && !1 === e.altKey && !1 === e.shiftKey } var r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A, E, I, M, R, F, z, P, B, L = window.kendo, H = L.dataviz, N = H.diagram, O = L.Class, V = N.Group, U = N.Rect, W = N.Rectangle, q = N.Utils, j = q.isUndefined, G = N.Point, $ = N.Circle, Y = N.Ticker, K = L.deepExtend, Q = L.ui.Movable, X = L.support.browser, Z = L.drawing.util, J = Z.defined, ee = e.inArray, te = e.proxy, ie = { arrow: "default", grip: "pointer", cross: "pointer", add: "pointer", move: "move", select: "pointer", south: "s-resize", east: "e-resize", west: "w-resize", north: "n-resize", rowresize: "row-resize", colresize: "col-resize" }, ne = 10, oe = "Left", re = "dragStart", se = "drag", ae = "dragEnd", le = "itemBoundsChange", ce = "transparent", de = "rotated", ue = "target", he = { "-1": "source", 1: ue }; N.Cursors = ie, r = L.Class.extend({ init: function (e) { this.layoutState = e, this.diagram = e.diagram }, initState: function () { this.froms = [], this.tos = [], this.subjects = [], this.layoutState.nodeMap.forEach(function (e, t) { var i = this.diagram.getShapeById(e); i && (this.subjects.push(i), this.froms.push(i.bounds().topLeft()), this.tos.push(t.topLeft())) }, this) }, update: function (e) { if (!(this.subjects.length <= 0)) for (var t = 0; t < this.subjects.length; t++)this.subjects[t].position(new G(this.froms[t].x + (this.tos[t].x - this.froms[t].x) * e, this.froms[t].y + (this.tos[t].y - this.froms[t].y) * e)) } }), s = O.extend({ init: function (e, t, i) { this.animate = !j(i) && i, this._initialState = e, this._finalState = t, this.title = "Diagram layout" }, undo: function () { this.setState(this._initialState) }, redo: function () { this.setState(this._finalState) }, setState: function (e) { var t, i = e.diagram; this.animate ? (e.linkMap.forEach(function (e, t) { var n = i.getShapeById(e); n.visible(!1), n && n.points(t) }), (t = new Y).addAdapter(new r(e)), t.onComplete(function () { e.linkMap.forEach(function (e) { var t = i.getShapeById(e); t.visible(!0) }) }), t.play()) : (e.nodeMap.forEach(function (e, t) { var n = i.getShapeById(e); n && n.position(t.topLeft()) }), e.linkMap.forEach(function (e, t) { var n = i.getShapeById(e); n && n.points(t) })) } }), a = O.extend({ init: function (e) { this.units = [], this.title = "Composite unit", e !== t && this.units.push(e) }, add: function (e) { this.units.push(e) }, undo: function () { for (var e = 0; e < this.units.length; e++)this.units[e].undo() }, redo: function () { for (var e = 0; e < this.units.length; e++)this.units[e].redo() } }), l = O.extend({ init: function (e, t, i) { this.item = e, this._redoSource = t, this._redoTarget = i, J(t) && (this._undoSource = e.source()), J(i) && (this._undoTarget = e.target()), this.title = "Connection Editing" }, undo: function () { this._undoSource !== t && this.item._updateConnector(this._undoSource, "source"), this._undoTarget !== t && this.item._updateConnector(this._undoTarget, "target"), this.item.updateModel() }, redo: function () { this._redoSource !== t && this.item._updateConnector(this._redoSource, "source"), this._redoTarget !== t && this.item._updateConnector(this._redoTarget, "target"), this.item.updateModel() } }), c = O.extend({ init: function (e, t, i) { this.item = e, this._undoSource = t, this._undoTarget = i, this._redoSource = e.source(), this._redoTarget = e.target(), this.title = "Connection Editing" }, undo: function () { this.item._updateConnector(this._undoSource, "source"), this.item._updateConnector(this._undoTarget, "target"), this.item.updateModel() }, redo: function () { this.item._updateConnector(this._redoSource, "source"), this.item._updateConnector(this._redoTarget, "target"), this.item.updateModel() } }), d = O.extend({ init: function (e) { this.connection = e, this.diagram = e.diagram, this.targetConnector = e.targetConnector, this.title = "Delete connection" }, undo: function () { this.diagram._addConnection(this.connection, !1) }, redo: function () { this.diagram.remove(this.connection, !1) } }), u = O.extend({ init: function (e) { this.shape = e, this.diagram = e.diagram, this.title = "Deletion" }, undo: function () { this.diagram._addShape(this.shape, !1), this.shape.select(!1) }, redo: function () { this.shape.select(!1), this.diagram.remove(this.shape, !1) } }), h = O.extend({ init: function (e, t, i) { var n, o; for (this.shapes = e, this.undoStates = t, this.title = "Transformation", this.redoStates = [], this.adorner = i, n = 0; n < this.shapes.length; n++)o = this.shapes[n], this.redoStates.push(o.bounds()) }, undo: function () { var e, t; for (e = 0; e < this.shapes.length; e++)(t = this.shapes[e]).bounds(this.undoStates[e]), t.hasOwnProperty("layout") && t.layout(t, this.redoStates[e], this.undoStates[e]), t.updateModel(); this.adorner && (this.adorner.refreshBounds(), this.adorner.refresh()) }, redo: function () { var e, t; for (e = 0; e < this.shapes.length; e++)(t = this.shapes[e]).bounds(this.redoStates[e]), t.hasOwnProperty("layout") && t.layout(t, this.undoStates[e], this.redoStates[e]), t.updateModel(); this.adorner && (this.adorner.refreshBounds(), this.adorner.refresh()) } }), f = O.extend({ init: function (e, t) { this.connection = e, this.diagram = t, this.title = "New connection" }, undo: function () { this.diagram.remove(this.connection, !1) }, redo: function () { this.diagram._addConnection(this.connection, !1) } }), p = O.extend({ init: function (e, t) { this.shape = e, this.diagram = t, this.title = "New shape" }, undo: function () { this.diagram.deselect(), this.diagram.remove(this.shape, !1) }, redo: function () { this.diagram._addShape(this.shape, !1) } }), m = O.extend({ init: function (e, t, i) { this.initial = e, this.finalPos = t, this.diagram = i, this.title = "Pan Unit" }, undo: function () { this.diagram.pan(this.initial) }, redo: function () { this.diagram.pan(this.finalPos) } }), g = O.extend({ init: function (e, t, i) { var n, o; for (this.shapes = t, this.undoRotates = i, this.title = "Rotation", this.redoRotates = [], this.redoAngle = e._angle, this.adorner = e, this.center = e._innerBounds.center(), n = 0; n < this.shapes.length; n++)o = this.shapes[n], this.redoRotates.push(o.rotate().angle) }, undo: function () { var e, t; for (e = 0; e < this.shapes.length; e++)(t = this.shapes[e]).rotate(this.undoRotates[e], this.center, !1), t.hasOwnProperty("layout") && t.layout(t), t.updateModel(); this.adorner && (this.adorner._initialize(), this.adorner.refresh()) }, redo: function () { var e, t; for (e = 0; e < this.shapes.length; e++)(t = this.shapes[e]).rotate(this.redoRotates[e], this.center, !1), t.hasOwnProperty("layout") && t.layout(t), t.updateModel(); this.adorner && (this.adorner._initialize(), this.adorner.refresh()) } }), v = O.extend({ init: function (e, t, i) { this.diagram = e, this.indices = i, this.items = t, this.title = "Rotate Unit" }, undo: function () { this.diagram._toIndex(this.items, this.indices) }, redo: function () { this.diagram.toFront(this.items, !1) } }), _ = O.extend({ init: function (e, t, i) { this.diagram = e, this.indices = i, this.items = t, this.title = "Rotate Unit" }, undo: function () { this.diagram._toIndex(this.items, this.indices) }, redo: function () { this.diagram.toBack(this.items, !1) } }), b = L.Observable.extend({ init: function (e) { L.Observable.fn.init.call(this, e), this.bind(this.events, e), this.stack = [], this.index = 0, this.capacity = 100 }, events: ["undone", "redone"], begin: function () { this.composite = new a }, cancel: function () { this.composite = t }, commit: function (e) { this.composite.units.length > 0 && this._restart(this.composite, e), this.composite = t }, addCompositeItem: function (e) { this.composite ? this.composite.add(e) : this.add(e) }, add: function (e, t) { this._restart(e, t) }, pop: function () { this.index > 0 && (this.stack.pop(), this.index--) }, count: function () { return this.stack.length }, undo: function () { this.index > 0 && (this.index--, this.stack[this.index].undo(), this.trigger("undone")) }, redo: function () { this.stack.length > 0 && this.index < this.stack.length && (this.stack[this.index].redo(), this.index++, this.trigger("redone")) }, _restart: function (e, t) { this.stack.splice(this.index, this.stack.length - this.index), this.stack.push(e), !1 !== t ? this.redo() : this.index++, this.stack.length > this.capacity && (this.stack.splice(0, this.stack.length - this.capacity), this.index = this.capacity) }, clear: function () { this.stack = [], this.index = 0 } }), w = O.extend({ init: function (e) { this.toolService = e }, start: function () { }, move: function () { }, end: function () { }, tryActivate: function () { return !1 }, getCursor: function () { return ie.arrow } }), y = w.extend({ init: function (t) { var i, n, o, r, s = this, a = L.support.mobileOS ? .93 : .9; w.fn.init.call(s, t), i = s.toolService.diagram, n = i.canvas, o = i.scroller = s.scroller = e(i.scrollable).kendoMobileScroller({ friction: a, velocityMultiplier: 5, mousewheelScrolling: !1, zoom: !1, scroll: te(s._move, s) }).data("kendoMobileScroller"), n.translate && (s.movableCanvas = new Q(n.element)), (r = function (e, t, i) { e.makeVirtual(), e.virtualSize(t || -2e4, i || 2e4) })(o.dimensions.x), r(o.dimensions.y), o.disable() }, tryActivate: function (e, t) { var i = this.toolService, n = i.diagram.options.pannable, r = t.ctrlKey; return J(n.key) && (r = n.key && "none" != n.key ? t[n.key + "Key"] : o(t) && !J(i.hoveredItem)), !1 !== n && r && !J(i.hoveredAdorner) && !J(i._hoveredConnector) }, start: function () { this.scroller.enable() }, move: function () { }, _move: function (e) { var t = this.toolService.diagram, i = t.canvas, n = new G(e.scrollLeft, e.scrollTop); i.translate ? (t._storePan(n.times(-1)), this.movableCanvas.moveTo(n), i.translate(n.x, n.y)) : n = n.plus(t._pan.times(-1)), t.trigger("pan", { pan: n }) }, end: function () { this.scroller.disable() }, getCursor: function () { return ie.move } }), k = O.extend({ init: function (e) { this.toolService = e }, tryActivate: function () { return !0 }, start: function (e, t) { var i = this.toolService, n = i.diagram, o = i.hoveredItem; o && (i.selectSingle(o, t), o.adorner && (this.adorner = o.adorner, this.handle = this.adorner._hitTest(e))), this.handle || (this.handle = n._resizingAdorner._hitTest(e), this.handle && (this.adorner = n._resizingAdorner)), this.adorner && (this.adorner.isDragHandle(this.handle) && n.trigger(re, { shapes: this.adorner.shapes, connections: [] }) ? (i.startPoint = e, i.end(e)) : this.adorner.start(e)) }, move: function (e) { this.adorner && (this.adorner.move(this.handle, e), this.adorner.isDragHandle(this.handle) && this.toolService.diagram.trigger(se, { shapes: this.adorner.shapes, connections: [] })) }, end: function () { var e, i = this.toolService.diagram, n = this.adorner; n && (n.isDragHandle(this.handle) && i.trigger(ae, { shapes: n.shapes, connections: [] }) ? n.cancel() : (e = n.stop()) && i.undoRedoService.add(e, !1)), this.adorner = t, this.handle = t }, getCursor: function (e) { return this.toolService.hoveredItem ? this.toolService.hoveredItem._getCursor(e) : ie.arrow } }), x = O.extend({ init: function (e) { this.toolService = e }, tryActivate: function (e, t) { var i = this.toolService, n = i.diagram.options.selectable, r = n && !1 !== n.multiple; return r && (r = n.key && "none" != n.key ? t[n.key + "Key"] : o(t)), r && !J(i.hoveredItem) && !J(i.hoveredAdorner) }, start: function (e) { var t = this.toolService.diagram; t.deselect(), t.selector.start(e) }, move: function (e) { var t = this.toolService.diagram; t.selector.move(e) }, end: function (e, t) { var i = this.toolService.diagram, n = this.toolService.hoveredItem, o = i.selector.bounds(); n && n.isSelected || t.ctrlKey || i.deselect(), o.isEmpty() || i.selectArea(o), i.selector.end() }, getCursor: function () { return ie.arrow } }), C = O.extend({ init: function (e) { this.toolService = e, this.type = "ConnectionTool" }, tryActivate: function () { return this.toolService._hoveredConnector }, start: function (e, t) { var i = this.toolService, o = i.diagram, r = i._hoveredConnector, s = o._createConnection({}, r._c, e); n(s) && !o.trigger(re, { shapes: [], connections: [s], connectionHandle: ue }) && o._addConnection(s) ? (i._connectionManipulation(s, r._c.shape, !0), i._removeHover(), i.selectSingle(i.activeConnection, t), "touchmove" == t.type && (o._cachedTouchTarget = r.visual)) : (s.source(null), i.end(e)) }, move: function (e) { var t = this.toolService, i = t.activeConnection; return i.target(e), t.diagram.trigger(se, { shapes: [], connections: [i], connectionHandle: ue }), !0 }, end: function (e) { var t, i = this.toolService, n = i.diagram, o = i.activeConnection, r = i.hoveredItem, s = i._hoveredConnector, a = n._cachedTouchTarget; o && (t = s && s._c != o.sourceConnector ? s._c : r && r instanceof N.Shape ? r.getConnector("Auto") || r.getConnector(e) : e, o.target(t), n.trigger(ae, { shapes: [], connections: [o], connectionHandle: ue }) ? (n.remove(o, !1), n.undoRedoService.pop()) : (o.updateModel(), n._syncConnectionChanges()), i._connectionManipulation(), a && (n._connectorsAdorner.visual.remove(a), n._cachedTouchTarget = null)) }, getCursor: function () { return ie.arrow } }), S = O.extend({ init: function (e) { this.toolService = e, this.type = "ConnectionTool" }, tryActivate: function (e, t) { var i = this.toolService, n = i.diagram, o = n.options.selectable, r = i.hoveredItem, s = !1 !== o && r && r.path && !(r.isSelected && t.ctrlKey); return s && (this._c = r), s }, start: function (e, t) { var i, o, r, s = this.toolService, a = this._c; s.selectSingle(a, t), (i = a.adorner) && (o = i._hitTest(e), r = he[o]), n(a) && i && !s.diagram.trigger(re, { shapes: [], connections: [a], connectionHandle: r }) ? (this.handle = o, this.handleName = r, i.start(e)) : (s.startPoint = e, s.end(e)) }, move: function (e) { var t = this._c.adorner; if (n(this._c) && t) return t.move(this.handle, e), this.toolService.diagram.trigger(se, { shapes: [], connections: [this._c], connectionHandle: this.handleName }), !0 }, end: function (e) { var t, i = this._c, o = i.adorner, r = this.toolService, s = r.diagram; o && n(i) && (t = o.stop(e), s.trigger(ae, { shapes: [], connections: [i], connectionHandle: this.handleName }) ? t.undo() : (s.undoRedoService.add(t, !1), i.updateModel(), s._syncConnectionChanges())) }, getCursor: function () { return ie.move } }), T = O.extend({ init: function (e) { this.diagram = e, this.tools = [new y(this), new S(this), new C(this), new x(this), new k(this)], this.activeTool = t }, start: function (e, t) { return t = K({}, t), this.activeTool && this.activeTool.end(e, t), this._updateHoveredItem(e), this._activateTool(e, t), this.activeTool.start(e, t), this._updateCursor(e), this.diagram.focus(), this.diagram.canvas.surface.suspendTracking(), this.startPoint = e, !0 }, move: function (e, t) { t = K({}, t); var i = !0; return this.activeTool && (i = this.activeTool.move(e, t)), i && this._updateHoveredItem(e), this._updateCursor(e), !0 }, end: function (e, i) { return i = K({}, i), this.activeTool && this.activeTool.end(e, i), this.diagram.canvas.surface.resumeTracking(), this.activeTool = t, this._updateCursor(e), !0 }, keyDown: function (e, t) { var n, o = this.diagram; if (!(t = K({ ctrlKey: !1, metaKey: !1, altKey: !1 }, t)).ctrlKey && !t.metaKey || t.altKey) { if (46 === e || 8 === e) return (n = this.diagram._triggerRemove(o.select())).length && (this.diagram.remove(n, !0), this.diagram._syncChanges(), this.diagram._destroyToolBar()), !0; if (27 === e) return this._discardNewConnection(), o.deselect(), o._destroyToolBar(), !0 } else { if (i(e, "a")) return o.selectAll(), o._destroyToolBar(), !0; if (i(e, "z")) return o.undo(), o._destroyToolBar(), !0; if (i(e, "y")) return o.redo(), o._destroyToolBar(), !0; i(e, "c") ? (o.copy(), o._destroyToolBar()) : i(e, "x") ? (o.cut(), o._destroyToolBar()) : i(e, "v") ? (o.paste(), o._destroyToolBar()) : i(e, "l") ? (o.layout(), o._destroyToolBar()) : i(e, "d") && (o._destroyToolBar(), o.copy(), o.paste()) } }, wheel: function (e, t) { var i = this.diagram, n = t.delta, o = i.zoom(), r = i.options, s = r.zoomRate, a = { point: e, meta: t, zoom: o }; if (!i.trigger("zoomStart", a)) return n < 0 ? o += s : o -= s, o = L.dataviz.round(Math.max(r.zoomMin, Math.min(r.zoomMax, o)), 2), a.zoom = o, i.zoom(o, a), i.trigger("zoomEnd", a), !0 }, setTool: function (e, t) { e.toolService = this, this.tools[t] = e }, selectSingle: function (e, t) { var i, n = this.diagram, o = n.options.selectable; o && !e.isSelected && !1 !== e.options.selectable && (i = t.ctrlKey && !1 !== o.multiple, n.select(e, { addToSelection: i })) }, _discardNewConnection: function () { this.newConnection && (this.diagram.remove(this.newConnection), this.newConnection = t) }, _activateTool: function (e, t) { var i, n; for (i = 0; i < this.tools.length; i++)if ((n = this.tools[i]).tryActivate(e, t)) { this.activeTool = n; break } }, _updateCursor: function (e) { var t = this.diagram.element, i = this.activeTool ? this.activeTool.getCursor(e) : this.hoveredAdorner ? this.hoveredAdorner._getCursor(e) : this.hoveredItem ? this.hoveredItem._getCursor(e) : ie.arrow; t.css({ cursor: i }), X.msie && 7 == X.version && (t[0].style.cssText = t[0].style.cssText) }, _connectionManipulation: function (e, i, n) { this.activeConnection = e, this.disabledShape = i, this.newConnection = n ? this.activeConnection : t }, _updateHoveredItem: function (e) { var i = this._hitTest(e), n = this.diagram; i == this.hoveredItem || this.disabledShape && i == this.disabledShape || (this.hoveredItem && (n.trigger("mouseLeave", { item: this.hoveredItem }), this.hoveredItem._hover(!1)), i && i.options.enable ? (n.trigger("mouseEnter", { item: i }), this.hoveredItem = i, this.hoveredItem._hover(!0)) : this.hoveredItem = t) }, _removeHover: function () { this.hoveredItem && (this.hoveredItem._hover(!1), this.hoveredItem = t) }, _hitTest: function (e) { var i, n, o, r, s = this.diagram; if (this._hoveredConnector && (this._hoveredConnector._hover(!1), this._hoveredConnector = t), s._connectorsAdorner._visible && (i = s._connectorsAdorner._hitTest(e))) return i; if (i = this.diagram._resizingAdorner._hitTest(e)) { if (this.hoveredAdorner = s._resizingAdorner, 0 !== i.x || 0 !== i.y) return; i = t } else this.hoveredAdorner = t; if (!this.activeTool || "ConnectionTool" !== this.activeTool.type) { for (r = [], o = 0; o < s._selectedItems.length; o++)(n = s._selectedItems[o]) instanceof N.Connection && r.push(n); i = this._hitTestItems(r, e) } return i || this._hitTestElements(e) }, _hitTestElements: function (e) { var t, i, n, o, r = this.diagram, s = this._hitTestItems(r.shapes, e), a = this._hitTestItems(r.connections, e); return this.activeTool && "ConnectionTool" == this.activeTool.type || !s || !a || function (e, t) { var i, n, o, r; for (r = 0; r < e.connectors.length; r++)if (i = e.connectors[r], n = i.position(), (o = new U(n.x, n.y)).inflate(ne, ne), o.contains(t)) return i }(s, e) || (i = r.mainLayer, n = ee(s.visual, i.children), o = ee(a.visual, i.children), t = n > o ? s : a), t || s || a }, _hitTestItems: function (e, t) { var i, n, o; for (i = e.length - 1; i >= 0; i--)if (n = e[i], o = n._hitTest(t)) return o } }), D = L.Class.extend({ init: function () { } }), A = D.extend({ init: function (e) { D.fn.init.call(this), this.connection = e }, hitTest: function (e) { var t = this.getBounds().inflate(ne); return !!t.contains(e) && N.Geometry.distanceToPolyline(e, this.connection.allPoints()) < ne }, getBounds: function () { var e, t = this.connection.allPoints(), i = t[0], n = t[t.length - 1], o = Math.max(i.x, n.x), r = Math.min(i.x, n.x), s = Math.min(i.y, n.y), a = Math.max(i.y, n.y); for (e = 1; e < t.length - 1; ++e)o = Math.max(o, t[e].x), r = Math.min(r, t[e].x), s = Math.min(s, t[e].y), a = Math.max(a, t[e].y); return new U(r, s, o - r, a - s) } }), E = A.extend({ init: function (e) { A.fn.init.call(this), this.connection = e }, route: function () { } }), I = A.extend({ SAME_SIDE_DISTANCE_RATIO: 5, init: function (e) { A.fn.init.call(this), this.connection = e }, routePoints: function (e, t, i, n) { return i && n ? this._connectorPoints(e, t, i, n) : this._floatingPoints(e, t, i) }, route: function () { var e = this.connection._resolvedSourceConnector, t = this.connection._resolvedTargetConnector, i = this.connection.sourcePoint(), n = this.connection.targetPoint(), o = this.routePoints(i, n, e, t); this.connection.points(o) }, _connectorSides: [{ name: "Top", axis: "y", boundsPoint: "topLeft", secondarySign: 1 }, { name: "Left", axis: "x", boundsPoint: "topLeft", secondarySign: 1 }, { name: "Bottom", axis: "y", boundsPoint: "bottomRight", secondarySign: -1 }, { name: "Right", axis: "x", boundsPoint: "bottomRight", secondarySign: -1 }], _connectorSide: function (e, t) { var i, n, o, r, s, a = e.position(), l = e.shape.bounds(de), c = { topLeft: l.topLeft(), bottomRight: l.bottomRight() }, d = this._connectorSides, u = Z.MAX_NUM; for (s = 0; s < d.length; s++)r = d[s], o = r.axis, (i = Math.round(Math.abs(a[o] - c[r.boundsPoint][o]))) < u ? (u = i, n = r) : i === u && (a[o] - t[o]) * r.secondarySign > (a[n.axis] - t[n.axis]) * n.secondarySign && (n = r); return n.name }, _sameSideDistance: function (e) { var t = e.shape.bounds(de); return Math.min(t.width, t.height) / this.SAME_SIDE_DISTANCE_RATIO }, _connectorPoints: function (e, t, i, n) { var o, r, s = this._connectorSide(i, t), a = this._connectorSide(n, e), l = t.x - e.x, c = t.y - e.y, d = this._sameSideDistance(i), u = []; return "Top" === s || "Bottom" == s ? "Top" == a || "Bottom" == a ? s == a ? (r = "Top" == s ? Math.min(e.y, t.y) - d : Math.max(e.y, t.y) + d, u = [new G(e.x, r), new G(t.x, r)]) : u = [new G(e.x, e.y + c / 2), new G(t.x, e.y + c / 2)] : u = [new G(e.x, t.y)] : a == oe || "Right" == a ? s == a ? (o = s == oe ? Math.min(e.x, t.x) - d : Math.max(e.x, t.x) + d, u = [new G(o, e.y), new G(o, t.y)]) : u = [new G(e.x + l / 2, e.y), new G(e.x + l / 2, e.y + c)] : u = [new G(t.x, e.y)], u }, _floatingPoints: function (e, t, i) { var n, o, r, s = i ? this._connectorSide(i, t) : null, a = this._startHorizontal(e, t, s), l = [e, e, t, t], c = t.x - e.x, d = t.y - e.y, u = l.length; for (r = 1; r < u - 1; ++r)a ? r % 2 != 0 ? (n = c / (u / 2), o = 0) : (n = 0, o = d / ((u - 1) / 2)) : r % 2 != 0 ? (n = 0, o = d / (u / 2)) : (n = c / ((u - 1) / 2), o = 0), l[r] = new G(l[r - 1].x + n, l[r - 1].y + o); return r--, l[u - 2] = a && r % 2 != 0 || !a && r % 2 == 0 ? new G(l[u - 1].x, l[u - 2].y) : new G(l[u - 2].x, l[u - 1].y), [l[1], l[2]] }, _startHorizontal: function (e, t, i) { return null !== i && ("Right" === i || i === oe) || Math.abs(e.x - t.x) > Math.abs(e.y - t.y) } }), M = O.extend({ init: function (e, t) { var i = this; i.diagram = e, i.options = K({}, i.options, t), i.visual = new V, i.diagram._adorners.push(i) }, refresh: function () { } }), R = M.extend({ init: function (e, t) { var i, n, o, r = this; r.connection = e, i = r.connection.diagram, r._ts = i.toolService, M.fn.init.call(r, i, t), n = r.connection.sourcePoint(), o = r.connection.targetPoint(), r.spVisual = new $(K(r.options.handles, { center: n })), r.epVisual = new $(K(r.options.handles, { center: o })), r.visual.append(r.spVisual), r.visual.append(r.epVisual) }, options: { handles: {} }, _getCursor: function () { return ie.move }, start: function (e) { switch (this.handle = this._hitTest(e), this.startPoint = e, this._initialSource = this.connection.source(), this._initialTarget = this.connection.target(), this.handle) { case -1: this.connection.targetConnector && this._ts._connectionManipulation(this.connection, this.connection.targetConnector.shape); break; case 1: this.connection.sourceConnector && this._ts._connectionManipulation(this.connection, this.connection.sourceConnector.shape) } }, move: function (e, t) { switch (e) { case -1: this.connection.source(t); break; case 1: this.connection.target(t); break; default: var i = t.minus(this.startPoint); this.startPoint = t, this.connection.sourceConnector || this.connection.source(this.connection.sourcePoint().plus(i)), this.connection.targetConnector || this.connection.target(this.connection.targetPoint().plus(i)) }return this.refresh(), !0 }, stop: function (e) { var i, n = this.diagram.toolService, o = n.hoveredItem; return i = n._hoveredConnector ? n._hoveredConnector._c : o && o instanceof N.Shape ? o.getConnector("Auto") || o.getConnector(e) : e, -1 === this.handle ? this.connection.source(i) : 1 === this.handle && this.connection.target(i), this.handle = t, this._ts._connectionManipulation(), new c(this.connection, this._initialSource, this._initialTarget) }, _hitTest: function (e) { var t = this.connection.sourcePoint(), i = this.connection.targetPoint(), n = this.options.handles.width / 2 + ne, o = this.options.handles.height / 2 + ne, r = t.distanceTo(e), s = i.distanceTo(e), a = new U(t.x, t.y).inflate(n, o).contains(e), l = new U(i.x, i.y).inflate(n, o).contains(e), c = 0; return a && (!l || r < s) ? c = -1 : l && (!a || s < r) && (c = 1), c }, refresh: function () { this.spVisual.redraw({ center: this.diagram.modelToLayer(this.connection.sourcePoint()) }), this.epVisual.redraw({ center: this.diagram.modelToLayer(this.connection.targetPoint()) }) } }), F = M.extend({ init: function (e, t) { var i = this; M.fn.init.call(i, e, t), i._refreshHandler = function (e) { e.item == i.shape && i.refresh() } }, show: function (e) { var t, i, n, o = this; for (o._visible = !0, o.shape = e, o.diagram.bind(le, o._refreshHandler), t = e.connectors.length, o.connectors = [], o._clearVisual(), i = 0; i < t; i++)n = new B(e.connectors[i]), o.connectors.push(n), o.visual.append(n.visual); o.visual.visible(!0), o.refresh() }, _clearVisual: function () { var e = this; e.diagram._cachedTouchTarget ? e._keepCachedTouchTarget() : e.visual.clear() }, _keepCachedTouchTarget: function () { var e, t = this, i = t.visual.children, n = i.length, o = ee(t.diagram._cachedTouchTarget, i); for (e = n - 1; e >= 0; e--)e != o && t.visual.remove(i[e]) }, destroy: function () { var e = this; e.diagram.unbind(le, e._refreshHandler), e.shape = t, e._visible = t, e.visual.visible(!1) }, _hitTest: function (e) { var t, i; for (i = 0; i < this.connectors.length; i++)if ((t = this.connectors[i])._hitTest(e)) { t._hover(!0), this.diagram.toolService._hoveredConnector = t; break } }, refresh: function () { if (this.shape) { var t = this.shape.bounds(); t = this.diagram.modelToLayer(t), this.visual.position(t.topLeft()), e.each(this.connectors, function () { this.refresh() }) } } }), z = M.extend({ init: function (e, t) { var i = this; M.fn.init.call(i, e, t), i._manipulating = !1, i.map = [], i.shapes = [], i._initSelection(), i._createHandles(), i.redraw(), i.diagram.bind("select", function (e) { i._initialize(e.selected) }), i._refreshHandler = function () { i._internalChange || (i.refreshBounds(), i.refresh()) }, i._rotatedHandler = function () { 1 == i.shapes.length && (i._angle = i.shapes[0].rotate().angle), i._refreshHandler() }, i.diagram.bind(le, i._refreshHandler).bind("itemRotate", i._rotatedHandler), i.refreshBounds(), i.refresh() }, options: { handles: { fill: { color: "#fff" }, stroke: { color: "#282828" }, height: 7, width: 7, hover: { fill: { color: "#282828" }, stroke: { color: "#282828" } } }, selectable: { stroke: { color: "#778899", width: 1, dashType: "dash" }, fill: { color: ce } }, offset: 10 }, _initSelection: function () { var e = this, t = e.diagram, i = t.options.selectable, n = K({}, e.options.selectable, i); e.rect = new W(n), e.visual.append(e.rect) }, _resizable: function () { return this.options.editable && !1 !== this.options.editable.resize }, _handleOptions: function () { return (this.options.editable.resize || {}).handles || this.options.handles }, _createHandles: function () { var e, t, i, n; if (this._resizable()) for (e = this._handleOptions(), n = -1; n <= 1; n++)for (i = -1; i <= 1; i++)0 === n && 0 === i || ((t = new W(e)).drawingElement._hover = te(this._hover, this), this.map.push({ x: n, y: i, visual: t }), this.visual.append(t)) }, bounds: function (e) { return e ? (this._innerBounds = e.clone(), this._bounds = this.diagram.modelToLayer(e).inflate(this.options.offset, this.options.offset), t) : this._bounds }, _hitTest: function (e) { var t, i, n, o, r = this.diagram.modelToLayer(e), s = this.map.length; if (this._angle && (r = r.clone().rotate(this._bounds.center(), this._angle)), this._resizable()) for (t = 0; t < s; t++)if (o = this.map[t], i = new G(o.x, o.y), (n = this._getHandleBounds(i)).offset(this._bounds.x, this._bounds.y), n.contains(r)) return i; if (this._bounds.contains(r)) return new G(0, 0) }, _getHandleBounds: function (e) { if (this._resizable()) { var t = this._handleOptions(), i = t.width, n = t.height, o = new U(0, 0, i, n); return e.x < 0 ? o.x = -i / 2 : 0 === e.x ? o.x = Math.floor(this._bounds.width / 2) - i / 2 : e.x > 0 && (o.x = this._bounds.width + 1 - i / 2), e.y < 0 ? o.y = -n / 2 : 0 === e.y ? o.y = Math.floor(this._bounds.height / 2) - n / 2 : e.y > 0 && (o.y = this._bounds.height + 1 - n / 2), o } }, _getCursor: function (e) { var t, i = this._hitTest(e); if (i && i.x >= -1 && i.x <= 1 && i.y >= -1 && i.y <= 1 && this._resizable()) { if ((t = this._angle) && (t = 360 - t, i.rotate(new G(0, 0), t), i = new G(Math.round(i.x), Math.round(i.y))), -1 == i.x && -1 == i.y) return "nw-resize"; if (1 == i.x && 1 == i.y) return "se-resize"; if (-1 == i.x && 1 == i.y) return "sw-resize"; if (1 == i.x && -1 == i.y) return "ne-resize"; if (0 === i.x && -1 == i.y) return "n-resize"; if (0 === i.x && 1 == i.y) return "s-resize"; if (1 == i.x && 0 === i.y) return "e-resize"; if (-1 == i.x && 0 === i.y) return "w-resize" } return this._manipulating ? ie.move : ie.select }, _initialize: function () { var e, t, i = this, n = i.diagram.select(); for (i.shapes = [], e = 0; e < n.length; e++)(t = n[e]) instanceof N.Shape && (i.shapes.push(t), t._rotationOffset = new G); i._angle = 1 == i.shapes.length ? i.shapes[0].rotate().angle : 0, i._startAngle = i._angle, i._rotates(), i._positions(), i.refreshBounds(), i.refresh(), i.redraw() }, _rotates: function () { var e, t, i = this; for (i.initialRotates = [], e = 0; e < i.shapes.length; e++)t = i.shapes[e], i.initialRotates.push(t.rotate().angle) }, _positions: function () { var e, t, i = this; for (i.initialStates = [], e = 0; e < i.shapes.length; e++)t = i.shapes[e], i.initialStates.push(t.bounds()) }, _hover: function (e, t) { if (this._resizable()) { var i = this._handleOptions(), n = i.hover, o = i.stroke, r = i.fill; e && q.isDefined(n.stroke) && (o = K({}, o, n.stroke)), e && q.isDefined(n.fill) && (r = n.fill), t.stroke(o.color, o.width, o.opacity), t.fill(r.color, r.opacity) } }, start: function (e) { var t, i; for (this._sp = e, this._cp = e, this._lp = e, this._manipulating = !0, this._internalChange = !0, this.shapeStates = [], t = 0; t < this.shapes.length; t++)i = this.shapes[t], this.shapeStates.push(i.bounds()) }, redraw: function () { var e, t = this._resizable(); for (e = 0; e < this.map.length; e++)this.map[e].visual.visible(t) }, angle: function (e) { return J(e) && (this._angle = e), this._angle }, rotate: function () { var e, t, i = this._innerBounds.center(), n = this.angle(); for (this._internalChange = !0, e = 0; e < this.shapes.length; e++)t = this.shapes[e], n = (n + this.initialRotates[e] - this._startAngle) % 360, t.rotate(n, i); this.refresh() }, move: function (e, i) { var o, r, s, a, l, c, d, u, h, f, p, m, g, v, _ = new G, b = new G, w = 0; if (-2 === e.y && -1 === e.x) { for (a = this._innerBounds.center(), this._angle = this._truncateAngle(q.findAngle(a, i)), c = 0; c < this.shapes.length; c++)l = this.shapes[c], d = (this._angle + this.initialRotates[c] - this._startAngle) % 360, l.rotate(d, a), l.hasOwnProperty("layout") && l.layout(l), this._rotating = !0; this.refresh() } else { if (this.shouldSnap()) { if (0 === (m = this._truncateDistance(i.minus(this._lp))).x && 0 === m.y) return this._cp = i, t; o = m, this._lp = new G(this._lp.x + m.x, this._lp.y + m.y) } else o = i.minus(this._cp); for (this.isDragHandle(e) ? (b = _ = o, r = !0) : (this._angle && o.rotate(new G(0, 0), this._angle), -1 == e.x ? _.x = o.x : 1 == e.x && (b.x = o.x), -1 == e.y ? _.y = o.y : 1 == e.y && (b.y = o.y)), r || (h = function (e, t) { var i; return -1 == e.x && -1 == e.y ? i = t.bottomRight() : 1 == e.x && 1 == e.y ? i = t.topLeft() : -1 == e.x && 1 == e.y ? i = t.topRight() : 1 == e.x && -1 == e.y ? i = t.bottomLeft() : 0 === e.x && -1 == e.y ? i = t.bottom() : 0 === e.x && 1 == e.y ? i = t.top() : 1 == e.x && 0 === e.y ? i = t.left() : -1 == e.x && 0 === e.y && (i = t.right()), i }(e, this._innerBounds), f = (this._innerBounds.width + o.x * e.x) / this._innerBounds.width, p = (this._innerBounds.height + o.y * e.y) / this._innerBounds.height), c = 0; c < this.shapes.length; c++) { if (l = this.shapes[c], s = l.bounds(), r) { if (!n(l)) continue; u = this._displaceBounds(s, _, b, r) } else (u = s.clone()).scale(f, p, h, this._innerBounds.center(), l.rotate().angle), (g = u.center()).rotate(s.center(), -this._angle), u = new U(g.x - u.width / 2, g.y - u.height / 2, u.width, u.height); u.width >= l.options.minWidth && u.height >= l.options.minHeight && (v = s, l.bounds(u), l.hasOwnProperty("layout") && l.layout(l, v, u), v.width === u.width && v.height === u.height || l.rotate(l.rotate().angle), w += 1) } w && (w == c ? (u = this._displaceBounds(this._innerBounds, _, b, r), this.bounds(u)) : this.refreshBounds(), this.refresh()), this._positions() } this._cp = i }, isDragHandle: function (e) { return 0 === e.x && 0 === e.y }, cancel: function () { var e, i = this.shapes, n = this.shapeStates; for (e = 0; e < i.length; e++)i[e].bounds(n[e]); this.refreshBounds(), this.refresh(), this._manipulating = t, this._internalChange = t, this._rotating = t }, _truncatePositionToGuides: function (e) { return this.diagram.ruler ? this.diagram.ruler.truncatePositionToGuides(e) : e }, _truncateSizeToGuides: function (e) { return this.diagram.ruler ? this.diagram.ruler.truncateSizeToGuides(e) : e }, _truncateAngle: function (e) { var t = this.snapOptions(), i = Math.max(t.angle || 10, 5); return t ? Math.floor(e % 360 / i) * i : e % 360 }, _truncateDistance: function (e) { var t, i; return e instanceof N.Point ? new N.Point(this._truncateDistance(e.x), this._truncateDistance(e.y)) : (t = this.snapOptions() || {}, i = Math.max(t.size || 10, 5), t ? Math.floor(e / i) * i : e) }, snapOptions: function () { var e = this.diagram.options.editable, t = ((e || {}).drag || {}).snap || {}; return t }, shouldSnap: function () { var e = this.diagram.options.editable, t = (e || {}).drag, i = (t || {}).snap; return !1 !== e && !1 !== t && !1 !== i }, _displaceBounds: function (e, t, i, n) { var o, r = e.topLeft().plus(t), s = e.bottomRight().plus(i), a = U.fromPoints(r, s); return n || ((o = a.center()).rotate(e.center(), -this._angle), a = new U(o.x - a.width / 2, o.y - a.height / 2, a.width, a.height)), a }, stop: function () { var e, i, n, o; if (this._cp != this._sp) if (this._rotating) e = new g(this, this.shapes, this.initialRotates), this._rotating = !1; else if (this._diffStates()) { if (this.diagram.ruler) for (i = 0; i < this.shapes.length; i++)n = this.shapes[i], o = n.bounds(), o = this._truncateSizeToGuides(this._truncatePositionToGuides(o)), n.bounds(o), this.refreshBounds(), this.refresh(); for (i = 0; i < this.shapes.length; i++)(n = this.shapes[i]).updateModel(); e = new h(this.shapes, this.shapeStates, this), this.diagram._syncShapeChanges() } return this._manipulating = t, this._internalChange = t, this._rotating = t, e }, _diffStates: function () { var e, t = this.shapes, i = this.shapeStates; for (e = 0; e < t.length; e++)if (!t[e].bounds().equals(i[e])) return !0; return !1 }, refreshBounds: function () { var e = 1 == this.shapes.length ? this.shapes[0].bounds().clone() : this.diagram.boundingBox(this.shapes, !0); this.bounds(e) }, refresh: function () { var t, i, n, o, r = this; this.shapes.length > 0 ? (i = this.bounds(), this.visual.visible(!0), this.visual.position(i.topLeft()), e.each(this.map, function () { t = r._getHandleBounds(new G(this.x, this.y)), this.visual.position(t.topLeft()) }), this.visual.position(i.topLeft()), n = new G(i.width / 2, i.height / 2), this.visual.rotate(this._angle, n), this.rect.redraw({ width: i.width, height: i.height }), this.rotationThumb && (o = this.options.editable.rotate.thumb, this._rotationThumbBounds = new U(i.center().x, i.y + o.y, 0, 0).inflate(o.width), this.rotationThumb.redraw({ x: i.width / 2 - o.width / 2 }))) : this.visual.visible(!1) } }), P = O.extend({ init: function (e) { var t = e.options.selectable; this.options = K({}, this.options, t), this.visual = new W(this.options), this.diagram = e }, options: { stroke: { color: "#778899", width: 1, dashType: "dash" }, fill: { color: ce } }, start: function (e) { this._sp = this._ep = e, this.refresh(), this.diagram._adorn(this, !0) }, end: function () { this._sp = this._ep = t, this.diagram._adorn(this, !1) }, bounds: function (e) { return e && (this._bounds = e), this._bounds }, move: function (e) { this._ep = e, this.refresh() }, refresh: function () { if (this._sp) { var e = U.fromPoints(this.diagram.modelToLayer(this._sp), this.diagram.modelToLayer(this._ep)); this.bounds(U.fromPoints(this._sp, this._ep)), this.visual.position(e.topLeft()), this.visual.redraw({ height: e.height + 1, width: e.width + 1 }) } } }), B = O.extend({ init: function (e) { this.options = K({}, e.options), this._c = e, this.visual = new $(this.options), this.refresh() }, _hover: function (e) { var t = this.options, i = t.hover, n = t.stroke, o = t.fill; e && q.isDefined(i.stroke) && (n = K({}, n, i.stroke)), e && q.isDefined(i.fill) && (o = i.fill), this.visual.redraw({ stroke: n, fill: o }) }, refresh: function () { var e = this._c.shape.diagram.modelToView(this._c.position()), t = e.minus(this._c.shape.bounds("transformed").topLeft()), i = new U(e.x, e.y, 0, 0); i.inflate(this.options.width / 2, this.options.height / 2), this._visualBounds = i, this.visual.redraw({ center: new G(t.x, t.y) }) }, _hitTest: function (e) { var t = this._c.shape.diagram.modelToView(e); return this._visualBounds.contains(t) } }), K(N, { CompositeUnit: a, TransformUnit: h, PanUndoUnit: m, AddShapeUnit: p, AddConnectionUnit: f, DeleteShapeUnit: u, DeleteConnectionUnit: d, ConnectionEditAdorner: R, ConnectionTool: C, ConnectorVisual: B, UndoRedoService: b, ResizingAdorner: z, Selector: P, ToolService: T, ConnectorsAdorner: F, LayoutUndoUnit: s, ConnectionEditUnit: l, ToFrontUnit: v, ToBackUnit: _, ConnectionRouterBase: D, PolylineRouter: E, CascadingRouter: I, SelectionTool: x, ScrollerTool: y, PointerTool: k, ConnectionEditTool: S, RotateUnit: g }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/diagram/layout.min", ["dataviz/diagram/math.min"], function () { e = window.kendo.jQuery, t = window.kendo, i = t.dataviz.diagram, n = i.Graph, o = i.Node, r = i.Link, s = t.deepExtend, a = i.Size, l = i.Rect, c = i.Dictionary, d = i.Set, u = i.Graph, h = i.Utils, f = i.Point, p = 1e-6, m = Math.PI / 180, g = h.contains, v = e.grep, _ = t.Class.extend({ defaultOptions: { type: "Tree", subtype: "Down", roots: null, animate: !1, limitToView: !1, friction: .9, nodeDistance: 50, iterations: 300, horizontalSeparation: 90, verticalSeparation: 50, underneathVerticalTopOffset: 15, underneathHorizontalOffset: 15, underneathVerticalSeparation: 15, grid: { width: 1500, offsetX: 50, offsetY: 50, componentSpacingX: 20, componentSpacingY: 20 }, layerSeparation: 50, layeredIterations: 2, startRadialAngle: 0, endRadialAngle: 360, radialSeparation: 150, radialFirstLevelSeparation: 200, keepComponentsInOneRadialLayout: !1, ignoreContainers: !0, layoutContainerChildren: !1, ignoreInvisible: !0, animateTransitions: !1 }, init: function () { }, gridLayoutComponents: function (e) { var t, i, n, o, r, s, a, l, c, d, u, p, m, g, v; if (!e) throw "No components supplied."; for (h.forEach(e, function (e) { e.calcBounds() }), e.sort(function (e, t) { return t.bounds.width - e.bounds.width }), t = this.options.grid.width, i = this.options.grid.componentSpacingX, n = this.options.grid.componentSpacingY, o = 0, r = this.options.grid.offsetX, s = this.options.grid.offsetY, a = r, l = s, d = [], u = []; e.length > 0;) { for (a >= t && (a = r, l += o + n, o = 0), p = e.pop(), this.moveToOffset(p, new f(a, l)), c = 0; c < p.nodes.length; c++)u.push(p.nodes[c]); for (c = 0; c < p.links.length; c++)d.push(p.links[c]); m = p.bounds, ((g = m.height) <= 0 || isNaN(g)) && (g = 0), ((v = m.width) <= 0 || isNaN(v)) && (v = 0), g >= o && (o = g), a += v + i } return { nodes: u, links: d } }, moveToOffset: function (e, t) { var i, n, o, r, s, a, c, d, u = e.bounds, h = t.x - u.x, p = t.y - u.y; for (i = 0; i < e.nodes.length; i++)o = e.nodes[i], 0 === (r = o.bounds()).width && 0 === r.height && 0 === r.x && 0 === r.y && (r = new l(0, 0, 0, 0)), r.x += h, r.y += p, o.bounds(r); for (i = 0; i < e.links.length; i++)if ((s = e.links[i]).points) { for (a = [], c = s.points, n = 0; n < c.length; n++)(d = c[n]).x += h, d.y += p, a.push(d); s.points = a } return this.currentHorizontalOffset += u.width + this.options.grid.offsetX, new f(h, p) }, transferOptions: function (e) { this.options = t.deepExtend({}, this.defaultOptions), h.isUndefined(e) || (this.options = t.deepExtend(this.options, e || {})) } }), b = t.Class.extend({ init: function (e) { this.nodeMap = new c, this.shapeMap = new c, this.nodes = [], this.edges = [], this.edgeMap = new c, this.finalNodes = [], this.finalLinks = [], this.ignoredConnections = [], this.ignoredShapes = [], this.hyperMap = new c, this.hyperTree = new n, this.finalGraph = null, this.diagram = e }, convert: function (e) { if (h.isUndefined(this.diagram)) throw "No diagram to convert."; return this.options = t.deepExtend({ ignoreInvisible: !0, ignoreContainers: !0, layoutContainerChildren: !1 }, e || {}), this.clear(), this._renormalizeShapes(), this._renormalizeConnections(), this.finalNodes = new c(this.nodes), this.finalLinks = new c(this.edges), this.finalGraph = new n, this.finalNodes.forEach(function (e) { this.finalGraph.addNode(e) }, this), this.finalLinks.forEach(function (e) { this.finalGraph.addExistingLink(e) }, this), this.finalGraph }, mapConnection: function (e) { return this.edgeMap.get(e.id) }, mapShape: function (e) { return this.nodeMap.get(e.id) }, getEdge: function (e, t) { return h.first(e.links, function (i) { return i.getComplement(e) === t }) }, clear: function () { this.finalGraph = null, this.hyperTree = !this.options.ignoreContainers && this.options.layoutContainerChildren ? new u : null, this.hyperMap = !this.options.ignoreContainers && this.options.layoutContainerChildren ? new c : null, this.nodeMap = new c, this.shapeMap = new c, this.nodes = [], this.edges = [], this.edgeMap = new c, this.ignoredConnections = [], this.ignoredShapes = [], this.finalNodes = [], this.finalLinks = [] }, listToRoot: function (e) { var t = [], i = e.container; if (!i) return t; for (t.push(i); i.parentContainer;)i = i.parentContainer, t.push(i); return t.reverse(), t }, firstNonIgnorableContainer: function (e) { return e.isContainer && !this._isIgnorableItem(e) ? e : e.parentContainer ? this.firstNonIgnorableContainer(e.parentContainer) : null }, isContainerConnection: function (e, t) { return !(!e.isContainer || !this.isDescendantOf(e, t)) || t.isContainer && this.isDescendantOf(t, e) }, isDescendantOf: function (e, t) { var i, n, o, r; if (!e.isContainer) throw "Expecting a container."; if (e === t) return !1; if (g(e.children, t)) return !0; for (i = [], n = 0, o = e.children.length; n < o; n++)(r = e.children[n]).isContainer && this.isDescendantOf(r, t) && i.push(r); return i.length > 0 }, isIgnorableItem: function (e) { return this.options.ignoreInvisible ? !(e.isCollapsed && this._isVisible(e) || !e.isCollapsed && this._isVisible(e)) : e.isCollapsed && !this._isTop(e) }, isShapeMapped: function (e) { return e.isCollapsed && !this._isVisible(e) && !this._isTop(e) }, leastCommonAncestor: function (e, t) { var i, n, o, r, s, a; if (!e) throw "Parameter should not be null."; if (!t) throw "Parameter should not be null."; if (!this.hyperTree) throw "No hypertree available."; if (i = this.listToRoot(e), n = this.listToRoot(t), o = null, h.isEmpty(i) || h.isEmpty(n)) return this.hyperTree.root.data; for (r = i[0], s = n[0], a = 0; r === s && (o = i[a], !(++a >= i.length || a >= n.length));)r = i[a], s = n[a]; return o ? v(this.hyperTree.nodes, function (e) { return e.data.container === o }) : this.hyperTree.root.data }, _isTop: function (e) { return !e.parentContainer }, _isVisible: function (e) { return !!e.visible() && (e.parentContainer ? this._isVisible(e.parentContainer) : e.visible()) }, _isCollapsed: function (e) { return !(!e.isContainer || !e.isCollapsed) || e.parentContainer && this._isCollapsed(e.parentContainer) }, _renormalizeShapes: function () { var e, t, i, n; if (!this.options.ignoreContainers) throw "Containers are not supported yet, but stay tuned."; for (e = 0, t = this.diagram.shapes.length; e < t; e++)i = this.diagram.shapes[e], this.options.ignoreInvisible && !this._isVisible(i) || i.isContainer ? this.ignoredShapes.push(i) : ((n = new o(i.id, i)).isVirtual = !1, this.nodeMap.add(i.id, n), this.nodes.push(n)) }, _renormalizeConnections: function () { var e, t, i, n, o, s, a, l; if (0 !== this.diagram.connections.length) for (e = 0, t = this.diagram.connections.length; e < t; e++)if (i = this.diagram.connections[e], this.isIgnorableItem(i)) this.ignoredConnections.push(i); else if (n = i.sourceConnector ? i.sourceConnector.shape : null, o = i.targetConnector ? i.targetConnector.shape : null, n && o) if (!g(this.ignoredShapes, n) || this.shapeMap.containsKey(n)) if (!g(this.ignoredShapes, o) || this.shapeMap.containsKey(o)) if (this.shapeMap.containsKey(n) && (n = this.shapeMap[n]), this.shapeMap.containsKey(o) && (o = this.shapeMap[o]), s = this.mapShape(n), a = this.mapShape(o), s === a || this.areConnectedAlready(s, a)) this.ignoredConnections.push(i); else { if (null === s || null === a) throw "A shape was not mapped to a node."; if (!this.options.ignoreContainers) throw "Containers are not supported yet, but stay tuned."; s.isVirtual || a.isVirtual ? this.ignoredConnections.push(i) : (l = new r(s, a, i.id, i), this.edgeMap.add(i.id, l), this.edges.push(l)) } else this.ignoredConnections.push(i); else this.ignoredConnections.push(i); else this.ignoredConnections.push(i) }, areConnectedAlready: function (e, t) { return h.any(this.edges, function (i) { return i.source === e && i.target === t || i.source === t && i.target === e }) } }), w = _.extend({ init: function (e) { if (_.fn.init.call(this), h.isUndefined(e)) throw "Diagram is not specified."; this.diagram = e }, layout: function (e) { var t, n, o, r, s, a; if (this.transferOptions(e), t = new b(this.diagram), !(n = t.convert(e)).isEmpty() && (o = n.getConnectedComponents(), !h.isEmpty(o))) { for (r = 0; r < o.length; r++)s = o[r], this.layoutGraph(s, e); return a = this.gridLayoutComponents(o), new i.LayoutState(this.diagram, a) } }, layoutGraph: function (e, t) { var i, n, o; for (h.isDefined(t) && this.transferOptions(t), this.graph = e, i = 9 * this.options.nodeDistance, this.temperature = i, n = this._expectedBounds(), this.width = n.width, this.height = n.height, o = 0; o < this.options.iterations; o++)this.refineStage = o >= 5 * this.options.iterations / 6, this.tick(), this.temperature = this.refineStage ? i / 30 : i * (1 - o / (2 * this.options.iterations)) }, tick: function () { var e, t, i; for (e = 0; e < this.graph.nodes.length; e++)this._repulsion(this.graph.nodes[e]); for (e = 0; e < this.graph.links.length; e++)this._attraction(this.graph.links[e]); for (e = 0; e < this.graph.nodes.length; e++) { if (t = this.graph.nodes[e], 0 === (i = Math.sqrt(t.dx * t.dx + t.dy * t.dy))) return; t.x += Math.min(i, this.temperature) * t.dx / i, t.y += Math.min(i, this.temperature) * t.dy / i, this.options.limitToView && (t.x = Math.min(this.width, Math.max(t.width / 2, t.x)), t.y = Math.min(this.height, Math.max(t.height / 2, t.y))) } }, _shake: function (e) { var t = Math.random() * this.options.nodeDistance / 4, i = 2 * Math.random() * Math.PI; e.x += t * Math.cos(i), e.y -= t * Math.sin(i) }, _InverseSquareForce: function (e, t, i) { var n, o, r, s, a, l, c; return this.refineStage ? (o = t.x - i.x, r = t.y - i.y, s = t.width / 2, a = t.height / 2, l = i.width / 2, c = i.height / 2, n = Math.pow(o, 2) / Math.pow(s + l + this.options.nodeDistance, 2) + Math.pow(r, 2) / Math.pow(a + c + this.options.nodeDistance, 2)) : n = Math.pow(e, 2) / Math.pow(this.options.nodeDistance, 2), 4 * n / 3 }, _SquareForce: function (e, t, i) { return 1 / this._InverseSquareForce(e, t, i) }, _repulsion: function (e) { e.dx = 0, e.dy = 0, h.forEach(this.graph.nodes, function (t) { var i, n, o, r; if (t !== e) { for (; e.x === t.x && e.y === t.y;)this._shake(t); i = e.x - t.x, n = e.y - t.y, o = Math.sqrt(i * i + n * n), r = 2 * this._SquareForce(o, e, t), e.dx += i / o * r, e.dy += n / o * r } }, this) }, _attraction: function (e) { var t, i, n, o, r, s, a = e.target, l = e.source; if (l !== a) { for (; l.x === a.x && l.y === a.y;)this._shake(a); t = l.x - a.x, i = l.y - a.y, n = Math.sqrt(t * t + i * i), o = 5 * this._InverseSquareForce(n, l, a), r = t / n * o, s = i / n * o, a.dx += r, a.dy += s, l.dx -= r, l.dy -= s } }, _expectedBounds: function () { var e, t, i, n, o = this.graph.nodes.length; return 0 === o ? e : (e = h.fold(this.graph.nodes, function (e, t) { var i = t.width * t.height; return i > 0 ? e += Math.sqrt(i) : 0 }, 0, this), t = e / o * Math.ceil(Math.sqrt(o)), i = t * Math.sqrt(1.5), n = t / Math.sqrt(1.5), { width: 4 * i, height: 4 * n }) } }), y = t.Class.extend({ init: function (e) { this.center = null, this.options = e }, layout: function (e, t) { if (this.graph = e, this.graph.nodes && 0 !== this.graph.nodes.length) { if (!g(this.graph.nodes, t)) throw "The given root is not in the graph."; this.center = t, this.graph.cacheRelationships(), this.layoutSwitch() } }, layoutLeft: function (e) { var t, i, n, o, r, s, l, c; for (this.setChildrenDirection(this.center, "Left", !1), this.setChildrenLayout(this.center, "Default", !1), t = 0, i = 0, o = 0; o < e.length; o++)(r = e[o]).TreeDirection = "Left", s = this.measure(r, a.Empty), i = Math.max(i, s.Width), t += s.height + this.options.verticalSeparation; for (t -= this.options.verticalSeparation, l = this.center.x - this.options.horizontalSeparation, n = this.center.y + (this.center.height - t) / 2, o = 0; o < e.length; o++)r = e[o], c = new f(l - r.Size.width, n), this.arrange(r, c), n += r.Size.height + this.options.verticalSeparation }, layoutRight: function (e) { var t, i, n, o, r, s, l, c; for (this.setChildrenDirection(this.center, "Right", !1), this.setChildrenLayout(this.center, "Default", !1), t = 0, i = 0, o = 0; o < e.length; o++)(r = e[o]).TreeDirection = "Right", s = this.measure(r, a.Empty), i = Math.max(i, s.Width), t += s.height + this.options.verticalSeparation; for (t -= this.options.verticalSeparation, l = this.center.x + this.options.horizontalSeparation + this.center.width, n = this.center.y + (this.center.height - t) / 2, o = 0; o < e.length; o++)r = e[o], c = new f(l, n), this.arrange(r, c), n += r.Size.height + this.options.verticalSeparation }, layoutUp: function (e) { var t, i, n, o, r, s, l; for (this.setChildrenDirection(this.center, "Up", !1), this.setChildrenLayout(this.center, "Default", !1), t = 0, o = 0; o < e.length; o++)(n = e[o]).TreeDirection = "Up", r = this.measure(n, a.Empty), t += r.width + this.options.horizontalSeparation; for (t -= this.options.horizontalSeparation, s = this.center.x + this.center.width / 2 - t / 2, o = 0; o < e.length; o++)n = e[o], i = this.center.y - this.options.verticalSeparation - n.Size.height, l = new f(s, i), this.arrange(n, l), s += n.Size.width + this.options.horizontalSeparation }, layoutDown: function (e) { var t, i, n, o, r, s, l; for (this.setChildrenDirection(this.center, "Down", !1), this.setChildrenLayout(this.center, "Default", !1), n = 0, i = 0; i < e.length; i++)(t = e[i]).treeDirection = "Down", r = this.measure(t, a.Empty), n += r.width + this.options.horizontalSeparation; for (n -= this.options.horizontalSeparation, s = this.center.x + this.center.width / 2 - n / 2, o = this.center.y + this.options.verticalSeparation + this.center.height, i = 0; i < e.length; i++)t = e[i], l = new f(s, o), this.arrange(t, l), s += t.Size.width + this.options.horizontalSeparation }, layoutRadialTree: function () { var e, t; if (this.setChildrenDirection(this.center, "Radial", !1), this.setChildrenLayout(this.center, "Default", !1), this.previousRoot = null, e = this.options.startRadialAngle * m, (t = this.options.endRadialAngle * m) <= e) throw "Final angle should not be less than the start angle."; this.maxDepth = 0, this.origin = new f(this.center.x, this.center.y), this.calculateAngularWidth(this.center, 0), this.maxDepth > 0 && this.radialLayout(this.center, this.options.radialFirstLevelSeparation, e, t), this.center.Angle = t - e }, tipOverTree: function (e, t) { var i, n, o, r, s, l, c; for (h.isUndefined(t) && (t = 0), this.setChildrenDirection(this.center, "Down", !1), this.setChildrenLayout(this.center, "Default", !1), this.setChildrenLayout(this.center, "Underneath", !1, t), i = 0, r = 0; r < e.length; r++)(o = e[r]).TreeDirection = "Down", s = this.measure(o, a.Empty), i += s.width + this.options.horizontalSeparation; for (i -= this.options.horizontalSeparation, i -= e[e.length - 1].width, i += e[e.length - 1].associatedShape.bounds().width, l = this.center.x + this.center.width / 2 - i / 2, n = this.center.y + this.options.verticalSeparation + this.center.height, r = 0; r < e.length; r++)o = e[r], c = new f(l, n), this.arrange(o, c), l += o.Size.width + this.options.horizontalSeparation }, calculateAngularWidth: function (e, t) { var i, n, o, r, s; if (t > this.maxDepth && (this.maxDepth = t), i = 0, 1e3, 1e3, n = 0 === t ? 0 : Math.sqrt(2e6) / t, e.children.length > 0) { for (o = 0, r = e.children.length; o < r; o++)s = e.children[o], i += this.calculateAngularWidth(s, t + 1); i = Math.max(n, i) } else i = n; return e.sectorAngle = i, i }, sortChildren: function (e) { var t, i, n, o, r, s, a, l, c, d, u, p = 0; if (e.parents.length > 1) throw "Node is not part of a tree."; if ((i = e.parents[0]) && (n = new f(i.x, i.y), o = new f(e.x, e.y), p = this.normalizeAngle(Math.atan2(n.y - o.y, n.x - o.x))), 0 === (r = e.children.length)) return null; for (s = [], a = [], t = 0; t < r; ++t)l = e.children[t], c = new f(l.x, l.y), a[t] = t, s[t] = this.normalizeAngle(-p + Math.atan2(c.y - c.y, c.x - c.x)); for (h.bisort(s, a), d = [], u = e.children, t = 0; t < r; ++t)d.push(u[a[t]]); return d }, normalizeAngle: function (e) { for (; e > 2 * Math.PI;)e -= 2 * Math.PI; for (; e < 0;)e += 2 * Math.PI; return e }, radialLayout: function (e, t, i, n) { var o, r, s, a, l, c = n - i, d = c / 2, u = e.sectorAngle, h = 0, f = this.sortChildren(e); for (o = 0, r = f.length; o < r; o++)s = f[o], l = (a = s).sectorAngle / u, s.children.length > 0 && this.radialLayout(s, t + this.options.radialSeparation, i + h * c, i + (h + l) * c), this.setPolarLocation(s, t, i + h * c + l * d), a.angle = l * c, h += l }, setPolarLocation: function (e, t, i) { e.x = this.origin.x + t * Math.cos(i), e.y = this.origin.y + t * Math.sin(i), e.BoundingRectangle = new l(e.x, e.y, e.width, e.height) }, setChildrenDirection: function (e, t, i) { var n = e.treeDirection; this.graph.depthFirstTraversal(e, function (e) { e.treeDirection = t }), i || (e.treeDirection = n) }, setChildrenLayout: function (e, t, i, n) { h.isUndefined(n) && (n = 0); var o = e.childrenLayout; n > 0 ? (this.graph.assignLevels(e), this.graph.depthFirstTraversal(e, function (e) { e.level >= n + 1 && (e.childrenLayout = t) })) : (this.graph.depthFirstTraversal(e, function (e) { e.childrenLayout = t }), i || (e.childrenLayout = o)) }, measure: function (e, t) { var i, n, o, r, s, l, c, d = 0, u = 0, f = new a(0, 0); if (!e) throw ""; if (n = e.associatedShape.bounds(), o = n.width, r = n.height, 1 !== e.parents.length) throw "Node not in a spanning tree."; if (s = e.parents[0], "Undefined" === e.treeDirection && (e.treeDirection = s.treeDirection), h.isEmpty(e.children)) f = new a(Math.abs(o) < p ? 50 : o, Math.abs(r) < p ? 25 : r); else if (1 === e.children.length) { switch (e.treeDirection) { case "Radial": i = this.measure(e.children[0], t), d = o + this.options.radialSeparation * Math.cos(e.AngleToParent) + i.width, u = r + Math.abs(this.options.radialSeparation * Math.sin(e.AngleToParent)) + i.height; break; case "Left": case "Right": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": i = this.measure(e.children[0], t), d = o + i.width + this.options.underneathHorizontalOffset, u = r + this.options.underneathVerticalTopOffset + i.height; break; case "Default": i = this.measure(e.children[0], t), d = o + this.options.horizontalSeparation + i.width, u = Math.max(r, i.height); break; default: throw "Unhandled TreeDirection in the Radial layout measuring." }break; case "Up": case "Down": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": i = this.measure(e.children[0], t), d = Math.max(o, i.width + this.options.underneathHorizontalOffset), u = r + this.options.underneathVerticalTopOffset + i.height; break; case "Default": i = this.measure(e.children[0], t), u = r + this.options.verticalSeparation + i.height, d = Math.max(o, i.width); break; default: throw "Unhandled TreeDirection in the Down layout measuring." }break; default: throw "Unhandled TreeDirection in the layout measuring." }f = new a(d, u) } else { switch (e.treeDirection) { case "Left": case "Right": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": for (d = o, u = r + this.options.underneathVerticalTopOffset, l = 0; l < e.children.length; l++)c = e.children[l], i = this.measure(c, t), d = Math.max(d, i.width + this.options.underneathHorizontalOffset), u += i.height + this.options.underneathVerticalSeparation; u -= this.options.underneathVerticalSeparation; break; case "Default": for (d = o, u = 0, l = 0; l < e.children.length; l++)c = e.children[l], i = this.measure(c, t), d = Math.max(d, o + this.options.horizontalSeparation + i.width), u += i.height + this.options.verticalSeparation; u -= this.options.verticalSeparation; break; default: throw "Unhandled TreeDirection in the Right layout measuring." }break; case "Up": case "Down": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": for (d = o, u = r + this.options.underneathVerticalTopOffset, l = 0; l < e.children.length; l++)c = e.children[l], i = this.measure(c, t), d = Math.max(d, i.width + this.options.underneathHorizontalOffset), u += i.height + this.options.underneathVerticalSeparation; u -= this.options.underneathVerticalSeparation; break; case "Default": for (d = 0, u = 0, l = 0; l < e.children.length; l++)c = e.children[l], i = this.measure(c, t), d += i.width + this.options.horizontalSeparation, u = Math.max(u, i.height + this.options.verticalSeparation + r); d -= this.options.horizontalSeparation; break; default: throw "Unhandled TreeDirection in the Down layout measuring." }break; default: throw "Unhandled TreeDirection in the layout measuring." }f = new a(d, u) } return e.SectorAngle = Math.sqrt(d * d / 4 + u * u / 4), e.Size = f, f }, arrange: function (e, t) { var i, n, o, r, s, a, c, d, u = e.associatedShape.bounds(), m = u.width, g = u.height; if (h.isEmpty(e.children)) e.x = t.x, e.y = t.y, e.BoundingRectangle = new l(t.x, t.y, m, g); else switch (e.treeDirection) { case "Left": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": for (d = t, e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), c = t.y + g + this.options.underneathVerticalTopOffset, i = 0; i < r.children.length; i++)r = r.children[i], a = d.x - r.associatedShape.width - this.options.underneathHorizontalOffset, n = new f(a, c), this.arrange(r, n), c += r.Size.height + this.options.underneathVerticalSeparation; break; case "Default": for (d = new f(t.x + e.Size.width - m, t.y + (e.Size.height - g) / 2), e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), a = d.x - this.options.horizontalSeparation, c = t.y, i = 0; i < e.children.length; i++)r = e.children[i], n = new f(a - r.Size.width, c), this.arrange(r, n), c += r.Size.height + this.options.verticalSeparation; break; default: throw "Unsupported TreeDirection" }break; case "Right": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": for (d = t, e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), a = t.x + m + this.options.underneathHorizontalOffset, c = t.y + g + this.options.underneathVerticalTopOffset, i = 0; i < e.children.length; i++)r = e.children[i], n = new f(a, c), this.arrange(r, n), c += r.Size.height + this.options.underneathVerticalSeparation; break; case "Default": for (d = new f(t.x, t.y + (e.Size.height - g) / 2), e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), a = t.x + m + this.options.horizontalSeparation, c = t.y, i = 0; i < e.children.length; i++)r = e.children[i], n = new f(a, c), this.arrange(r, n), c += r.Size.height + this.options.verticalSeparation; break; default: throw "Unsupported TreeDirection" }break; case "Up": if (d = new f(t.x + (e.Size.width - m) / 2, t.y + e.Size.height - g), e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), Math.abs(d.x - t.x) < p) { for (s = 0, i = 0; i < e.children.length; i++)o = e.children[i], s += o.Size.width + this.options.horizontalSeparation; s -= this.options.horizontalSeparation, a = t.x + (m - s) / 2 } else a = t.x; for (i = 0; i < e.children.length; i++)r = e.children[i], c = d.y - this.options.verticalSeparation - r.Size.height, n = new f(a, c), this.arrange(r, n), a += r.Size.width + this.options.horizontalSeparation; break; case "Down": switch (e.childrenLayout) { case "TopAlignedWithParent": case "BottomAlignedWithParent": break; case "Underneath": for (d = t, e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), a = t.x + this.options.underneathHorizontalOffset, c = t.y + g + this.options.underneathVerticalTopOffset, i = 0; i < e.children.length; i++)r = e.children[i], n = new f(a, c), this.arrange(r, n), c += r.Size.height + this.options.underneathVerticalSeparation; break; case "Default": if (d = new f(t.x + (e.Size.width - m) / 2, t.y), e.x = d.x, e.y = d.y, e.BoundingRectangle = new l(e.x, e.y, e.width, e.height), Math.abs(d.x - t.x) < p) { for (s = 0, i = 0; i < e.children.length; i++)o = e.children[i], s += o.Size.width + this.options.horizontalSeparation; s -= this.options.horizontalSeparation, a = t.x + (m - s) / 2 } else a = t.x; for (i = 0; i < e.children.length; i++)r = e.children[i], c = d.y + this.options.verticalSeparation + g, n = new f(a, c), this.arrange(r, n), a += r.Size.width + this.options.horizontalSeparation; break; default: throw "Unsupported TreeDirection" }break; case "None": break; default: throw "Unsupported TreeDirection" } }, layoutSwitch: function () { var e, t, i, n, o, r; if (this.center && !h.isEmpty(this.center.children)) switch (e = this.options.subtype, h.isUndefined(e) && (e = "Down"), r = this.center.children, e.toLowerCase()) { case "radial": case "radialtree": this.layoutRadialTree(); break; case "mindmaphorizontal": case "mindmap": t = this.center.children, 1 === this.center.children.length ? this.layoutRight(t) : (o = r.length / 2, i = v(this.center.children, function (e) { return h.indexOf(r, e) < o }), n = v(this.center.children, function (e) { return h.indexOf(r, e) >= o }), this.layoutLeft(i), this.layoutRight(n)); break; case "mindmapvertical": t = this.center.children, 1 === this.center.children.length ? this.layoutDown(t) : (o = r.length / 2, i = v(this.center.children, function (e) { return h.indexOf(r, e) < o }), n = v(this.center.children, function (e) { return h.indexOf(r, e) >= o }), this.layoutUp(i), this.layoutDown(n)); break; case "right": this.layoutRight(this.center.children); break; case "left": this.layoutLeft(this.center.children); break; case "up": case "bottom": this.layoutUp(this.center.children); break; case "down": case "top": this.layoutDown(this.center.children); break; case "tipover": case "tipovertree": if (this.options.tipOverTreeStartLevel < 0) throw "The tip-over level should be a positive integer."; this.tipOverTree(this.center.children, this.options.tipOverTreeStartLevel) } } }), k = _.extend({ init: function (e) { if (_.fn.init.call(this), h.isUndefined(e)) throw "No diagram specified."; this.diagram = e }, layout: function (e) { var t, n; return this.transferOptions(e), t = new b(this.diagram), this.graph = t.convert(), n = this.layoutComponents(), new i.LayoutState(this.diagram, n) }, layoutComponents: function () { var e, t, i, n, o, r, s, a; if (!this.graph.isEmpty() && (e = this.graph.getConnectedComponents(), !h.isEmpty(e))) { for (t = new y(this.options), i = [], n = 0; n < e.length; n++) { if (o = e[n], !(r = this.getTree(o))) throw "Failed to find a spanning tree for the component."; s = r.root, a = r.tree, t.layout(a, s), i.push(a) } return this.gridLayoutComponents(i) } }, getTree: function (e) { var t, i, n, o, r = null; if (this.options.roots && this.options.roots.length > 0) for (t = 0, i = e.nodes.length; t < i; t++)for (n = e.nodes[t], o = 0; o < this.options.roots.length; o++)if (this.options.roots[o] === n.associatedShape) { r = n; break } if (!r && !(r = e.root())) throw "Unable to find a root for the tree."; return this.getTreeForRoot(e, r) }, getTreeForRoot: function (e, t) { var i = e.getSpanningTree(t); return h.isUndefined(i) || i.isEmpty() ? null : { tree: i, root: i.root } } }), x = _.extend({ init: function (e) { if (_.fn.init.call(this), h.isUndefined(e)) throw "Diagram is not specified."; this.diagram = e }, layout: function (e) { var t, n, o, r, s, a; if (this.transferOptions(e), t = new b(this.diagram), !(n = t.convert(e)).isEmpty() && (o = n.getConnectedComponents(), !h.isEmpty(o))) { for (r = 0; r < o.length; r++)s = o[r], this.layoutGraph(s, e); return a = this.gridLayoutComponents(o), new i.LayoutState(this.diagram, a) } }, _initRuntimeProperties: function () { var e, t; for (e = 0; e < this.graph.nodes.length; e++)(t = this.graph.nodes[e]).layer = -1, t.downstreamLinkCount = 0, t.upstreamLinkCount = 0, t.isVirtual = !1, t.uBaryCenter = 0, t.dBaryCenter = 0, t.upstreamPriority = 0, t.downstreamPriority = 0, t.gridPosition = 0 }, _prepare: function (e) { var t, i, n, o, r, s, a, l, d, u, f, p = [], m = new c, v = 0; for (h.forEach(e.nodes, function (e) { 0 === e.incoming.length && (m.set(e, 0), p.push(e)) }); p.length > 0;)for (r = p.shift(), t = 0; t < r.outgoing.length; t++)n = r.outgoing[t], s = n.target, o = m.containsKey(s) ? Math.max(m.get(r) + 1, m.get(s)) : m.get(r) + 1, m.set(s, o), o > v && (v = o), g(p, s) || p.push(s); for ((a = m.keys()).sort(function (e, t) { var i = m.get(e), n = m.get(t); return h.sign(n - i) }), l = 0; l < a.length; ++l)if (d = a[l], u = Number.MAX_VALUE, 0 !== d.outgoing.length) { for (i = 0; i < d.outgoing.length; ++i)n = d.outgoing[i], u = Math.min(u, m.get(n.target)); u > 1 && m.set(d, u - 1) } for (this.layers = [], t = 0; t < v + 1; t++)(f = []).linksTo = {}, this.layers.push(f); for (m.forEach(function (e, t) { e.layer = t, this.layers[t].push(e) }, this), i = 0; i < this.layers.length; i++)for (f = this.layers[i], t = 0; t < f.length; t++)f[t].gridPosition = t }, layoutGraph: function (e, t) { if (h.isUndefined(e)) throw "No graph given or graph analysis of the diagram failed."; h.isDefined(t) && this.transferOptions(t), this.graph = e, e.setItemIndices(); var i = e.makeAcyclic(); this._initRuntimeProperties(), this._prepare(e, t), this._dummify(), this._optimizeCrossings(), this._swapPairs(), this.arrangeNodes(), this._moveThingsAround(), this._dedummify(), h.forEach(i, function (e) { e.points && e.points.reverse() }) }, setMinDist: function (e, t, i) { var n = e.layer, o = e.layerIndex; this.minDistances[n][o] = i }, getMinDist: function (e, t) { var i, n = 0, o = e.layerIndex, r = t.layerIndex, s = e.layer, a = Math.min(o, r), l = Math.max(o, r); for (i = a; i < l; ++i)n += this.minDistances[s][i]; return n }, placeLeftToRight: function (e) { var t, i, n, o, r, s, a, l, d, u, f = new c; for (n = 0; n < this.layers.length; ++n)if (o = e[n]) { for (t = 0; t < o.length; t++)i = o[t], f.containsKey(i) || this.placeLeft(i, f, n); for (r = Number.POSITIVE_INFINITY, t = 0; t < o.length; t++)i = o[t], (s = this.rightSibling(i)) && this.nodeLeftClass.get(s) !== n && (r = Math.min(r, f.get(s) - f.get(i) - this.getMinDist(i, s))); if (r === Number.POSITIVE_INFINITY) { for (a = [], t = 0; t < o.length; t++)for (i = o[t], l = [], h.addRange(l, this.upNodes.get(i)), h.addRange(l, this.downNodes.get(i)), d = 0; d < l.length; d++)u = l[d], this.nodeLeftClass.get(u) < n && a.push(f.get(u) - f.get(i)); a.sort(), r = 0 === a.length ? 0 : a.length % 2 == 1 ? a[this.intDiv(a.length, 2)] : (a[this.intDiv(a.length, 2) - 1] + a[this.intDiv(a.length, 2)]) / 2 } for (t = 0; t < o.length; t++)i = o[t], f.set(i, f.get(i) + r) } return f }, placeRightToLeft: function (e) { var t, i, n, o, r, s, a, l, d, u, f = new c; for (n = 0; n < this.layers.length; ++n)if (o = e[n]) { for (t = 0; t < o.length; t++)i = o[t], f.containsKey(i) || this.placeRight(i, f, n); for (r = Number.NEGATIVE_INFINITY, t = 0; t < o.length; t++)i = o[t], (s = this.leftSibling(i)) && this.nodeRightClass.get(s) !== n && (r = Math.max(r, f.get(s) - f.get(i) + this.getMinDist(s, i))); if (r === Number.NEGATIVE_INFINITY) { for (a = [], t = 0; t < o.length; t++)for (i = o[t], l = [], h.addRange(l, this.upNodes.get(i)), h.addRange(l, this.downNodes.get(i)), d = 0; d < l.length; d++)u = l[d], this.nodeRightClass.get(u) < n && a.push(f.get(i) - f.get(u)); a.sort(), r = 0 === a.length ? 0 : a.length % 2 == 1 ? a[this.intDiv(a.length, 2)] : (a[this.intDiv(a.length, 2) - 1] + a[this.intDiv(a.length, 2)]) / 2 } for (t = 0; t < o.length; t++)i = o[t], f.set(i, f.get(i) + r) } return f }, _getLeftWing: function () { var e = { value: null }, t = this.computeClasses(e, 1); return this.nodeLeftClass = e.value, t }, _getRightWing: function () { var e = { value: null }, t = this.computeClasses(e, -1); return this.nodeRightClass = e.value, t }, computeClasses: function (e, t) { var i, n, o, r, s, a, l, d, u, h = 0, f = e.value = new c; for (i = 0; i < this.layers.length; ++i)for (h = i, n = this.layers[i], o = 1 === t ? 0 : n.length - 1; 0 <= o && o < n.length; o += t)if (r = n[o], f.containsKey(r)) h = f.get(r); else if (f.set(r, h), r.isVirtual) for (s = this._nodesInLink(r), a = 0; a < s.length; a++)l = s[a], f.set(l, h); for (d = [], u = 0; u < this.layers.length; u++)d.push(null); return f.forEach(function (e, t) { null === d[t] && (d[t] = []), d[t].push(e) }), d }, _isVerticalLayout: function () { return "up" === this.options.subtype.toLowerCase() || "down" === this.options.subtype.toLowerCase() || "vertical" === this.options.subtype.toLowerCase() }, _isHorizontalLayout: function () { return "right" === this.options.subtype.toLowerCase() || "left" === this.options.subtype.toLowerCase() || "horizontal" === this.options.subtype.toLowerCase() }, _isIncreasingLayout: function () { return "right" === this.options.subtype.toLowerCase() || "down" === this.options.subtype.toLowerCase() }, _moveThingsAround: function () { function e(e, t) { var i, n, o = Number.MIN_VALUE; for (i = 0; i < e.length; ++i)n = e[i], o = t._isVerticalLayout() ? Math.max(o, n.height) : Math.max(o, n.width); return o } var t, i, n, o, r, s, a, l, d, u, f, p, m, g, v, _, b, w, y, k, x, C, S, T, D, A; for (i = 0; i < this.layers.length; ++i)(o = this.layers[i]).sort(this._gridPositionComparer); for (this.minDistances = [], i = 0; i < this.layers.length; ++i)for (o = this.layers[i], this.minDistances[i] = [], r = 0; r < o.length; ++r)(n = o[r]).layerIndex = r, this.minDistances[i][r] = this.options.nodeDistance, r < o.length - 1 && (this.minDistances[i][r] += this._isVerticalLayout() ? (n.width + o[r + 1].width) / 2 : (n.height + o[r + 1].height) / 2); for (this.downNodes = new c, this.upNodes = new c, h.forEach(this.graph.nodes, function (e) { this.downNodes.set(e, []), this.upNodes.set(e, []) }, this), h.forEach(this.graph.links, function (e) { var t = e.source, i = e.target, n = null, o = null; t.layer > i.layer ? (n = e.source, o = e.target) : (o = e.source, n = e.target), this.downNodes.get(o).push(n), this.upNodes.get(n).push(o) }, this), this.downNodes.forEachValue(function (e) { e.sort(this._gridPositionComparer) }, this), this.upNodes.forEachValue(function (e) { e.sort(this._gridPositionComparer) }, this), i = 0; i < this.layers.length - 1; ++i)for (o = this.layers[i], s = 0; s < o.length - 1; s++)if ((a = o[s]).isVirtual && (l = this.downNodes.get(a)[0]).isVirtual) for (r = s + 1; r < o.length; ++r)(n = o[r]).isVirtual && ((d = this.downNodes.get(n)[0]).isVirtual && l.gridPosition > d.gridPosition && (u = l.gridPosition, l.gridPosition = d.gridPosition, d.gridPosition = u, f = l.layerIndex, p = d.layerIndex, this.layers[i + 1][f] = d, this.layers[i + 1][p] = l, l.layerIndex = p, d.layerIndex = f)); for (m = this._getLeftWing(), g = this._getRightWing(), v = this.placeLeftToRight(m), _ = this.placeRightToLeft(g), b = new c, h.forEach(this.graph.nodes, function (e) { b.set(e, (v.get(e) + _.get(e)) / 2) }), w = new c, y = new c, i = 0; i < this.layers.length; ++i)for (o = this.layers[i], k = -1, -1, r = 0; r < o.length; ++r)n = o[r], w.set(n, 0), y.set(n, !1), n.isVirtual && (-1 === k ? k = r : k === r - 1 ? k = r : (r, w.set(o[k], 0), b.get(n) - b.get(o[k]) === this.getMinDist(o[k], n) ? y.set(o[k], !0) : y.set(o[k], !1), k = r)); for (x = [1, -1], h.forEach(x, function (e) { var i, n, o, r, s, a, l, c = 1 === e ? 0 : this.layers.length - 1; for (i = c; 0 <= i && i < this.layers.length; i += e) { if (n = this.layers[i], o = this._firstVirtualNode(n), r = null, s = null, -1 !== o) for (r = n[o], s = [], t = 0; t < o; t++)s.push(n[t]); else r = null, s = n; if (s.length > 0) { for (this._sequencer(b, null, r, e, s), t = 0; t < s.length - 1; ++t)this.setMinDist(s[t], s[t + 1], b.get(s[t + 1]) - b.get(s[t])); r && this.setMinDist(s[s.length - 1], r, b.get(r) - b.get(s[s.length - 1])) } for (; r;) { if (a = this.nextVirtualNode(n, r)) { if (w.get(r) === e) { for (o = r.layerIndex, l = a.layerIndex, s = [], t = o + 1; t < l; t++)s.push(n[t]); s.length > 0 && this._sequencer(b, r, a, e, s), y.set(r, !0) } } else { for (o = r.layerIndex, s = [], t = o + 1; t < n.length; t++)s.push(n[t]); if (s.length > 0) { for (this._sequencer(b, r, null, e, s), t = 0; t < s.length - 1; ++t)this.setMinDist(s[t], s[t + 1], b.get(s[t + 1]) - b.get(s[t])); this.setMinDist(r, s[0], b.get(s[0]) - b.get(r)) } } r = a } this.adjustDirections(i, e, w, y) } }, this), C = this._isIncreasingLayout() ? 0 : this.layers.length - 1, S = function (e, t) { return t._isIncreasingLayout() ? e < t.layers.length : e >= 0 }, T = this._isIncreasingLayout() ? 1 : -1, D = 0, t = C; S(t, this); t += T) { for (o = this.layers[t], A = e(o, this), r = 0; r < o.length; ++r)n = o[r], this._isVerticalLayout() ? (n.x = b.get(n), n.y = D + A / 2) : (n.x = D + A / 2, n.y = b.get(n)); D += this.options.layerSeparation + A } }, adjustDirections: function (e, t, i, n) { var o, r, s, a, l, c, d, u, h, f, p, m, g, v; if (!(e + t < 0 || e + t >= this.layers.length)) for (o = null, r = null, s = this.layers[e + t], a = 0; a < s.length; ++a)if ((l = s[a]).isVirtual && (c = this.getNeighborOnLayer(l, e)).isVirtual) { if (o) { for (d = n.get(r), u = this.layers[e], h = r.layerIndex, f = c.layerIndex, p = h + 1; p < f; ++p)u[p].isVirtual && (d = d && n.get(u[p])); if (d) for (i.set(o, t), m = o.layerIndex, g = l.layerIndex, v = m + 1; v < g; ++v)s[v].isVirtual && i.set(s[v], t) } o = l, r = c } }, getNeighborOnLayer: function (e, t) { var i = this.upNodes.get(e)[0]; return i.layer === t ? i : (i = this.downNodes.get(e)[0]).layer === t ? i : null }, _sequencer: function (e, t, i, n, o) { if (1 === o.length && this._sequenceSingle(e, t, i, n, o[0]), o.length > 1) { var r = o.length, s = this.intDiv(r, 2); this._sequencer(e, t, i, n, o.slice(0, s)), this._sequencer(e, t, i, n, o.slice(s)), this.combineSequences(e, t, i, n, o) } }, _sequenceSingle: function (e, t, i, n, o) { var r = -1 === n ? this.downNodes.get(o) : this.upNodes.get(o), s = r.length; 0 !== s && (s % 2 == 1 ? e.set(o, e.get(r[this.intDiv(s, 2)])) : e.set(o, (e.get(r[this.intDiv(s, 2) - 1]) + e.get(r[this.intDiv(s, 2)])) / 2), t && e.set(o, Math.max(e.get(o), e.get(t) + this.getMinDist(t, o))), i && e.set(o, Math.min(e.get(o), e.get(i) - this.getMinDist(o, i)))) }, combineSequences: function (e, t, i, n, o) { var r, s, a, l, c, d, u, h, f, p, m = o.length, g = this.intDiv(m, 2), v = []; for (r = 0; r < g; ++r) { for (s = 0, l = -1 === n ? this.downNodes.get(o[r]) : this.upNodes.get(o[r]), a = 0; a < l.length; ++a)c = l[a], e.get(c) >= e.get(o[r]) ? s++ : (s--, v.push({ k: e.get(c) + this.getMinDist(o[r], o[g - 1]), v: 2 })); v.push({ k: e.get(o[r]) + this.getMinDist(o[r], o[g - 1]), v: s }) } for (t && v.push({ k: e.get(t) + this.getMinDist(t, o[g - 1]), v: Number.MAX_VALUE }), v.sort(this._positionDescendingComparer), u = [], r = g; r < m; ++r) { for (s = 0, l = -1 === n ? this.downNodes.get(o[r]) : this.upNodes.get(o[r]), a = 0; a < l.length; ++a)c = l[a], e.get(c) <= e.get(o[r]) ? s++ : (s--, u.push({ k: e.get(c) - this.getMinDist(o[r], o[g]), v: 2 })); u.push({ k: e.get(o[r]) - this.getMinDist(o[r], o[g]), v: s }) } for (i && u.push({ k: e.get(i) - this.getMinDist(i, o[g]), v: Number.MAX_VALUE }), u.sort(this._positionAscendingComparer), h = 0, f = 0, p = this.getMinDist(o[g - 1], o[g]); e.get(o[g]) - e.get(o[g - 1]) < p;)if (h < f) { if (0 === v.length) { e.set(o[g - 1], e.get(o[g]) - p); break } d = v.shift(), h += d.v, e.set(o[g - 1], d.k), e.set(o[g - 1], Math.max(e.get(o[g - 1]), e.get(o[g]) - p)) } else { if (0 === u.length) { e.set(o[g], e.get(o[g - 1]) + p); break } d = u.shift(), f += d.v, e.set(o[g], d.k), e.set(o[g], Math.min(e.get(o[g]), e.get(o[g - 1]) + p)) } for (r = g - 2; r >= 0; r--)e.set(o[r], Math.min(e.get(o[r]), e.get(o[g - 1]) - this.getMinDist(o[r], o[g - 1]))); for (r = g + 1; r < m; r++)e.set(o[r], Math.max(e.get(o[r]), e.get(o[g]) + this.getMinDist(o[r], o[g]))) }, placeLeft: function (e, t, i) { var n = Number.NEGATIVE_INFINITY; h.forEach(this._getComposite(e), function (e) { var o = this.leftSibling(e); o && this.nodeLeftClass.get(o) === this.nodeLeftClass.get(e) && (t.containsKey(o) || this.placeLeft(o, t, i), n = Math.max(n, t.get(o) + this.getMinDist(o, e))) }, this), n === Number.NEGATIVE_INFINITY && (n = 0), h.forEach(this._getComposite(e), function (e) { t.set(e, n) }) }, placeRight: function (e, t, i) { var n = Number.POSITIVE_INFINITY; h.forEach(this._getComposite(e), function (e) { var o = this.rightSibling(e); o && this.nodeRightClass.get(o) === this.nodeRightClass.get(e) && (t.containsKey(o) || this.placeRight(o, t, i), n = Math.min(n, t.get(o) - this.getMinDist(e, o))) }, this), n === Number.POSITIVE_INFINITY && (n = 0), h.forEach(this._getComposite(e), function (e) { t.set(e, n) }) }, leftSibling: function (e) { var t = this.layers[e.layer], i = e.layerIndex; return 0 === i ? null : t[i - 1] }, rightSibling: function (e) { var t = this.layers[e.layer], i = e.layerIndex; return i === t.length - 1 ? null : t[i + 1] }, _getComposite: function (e) { return e.isVirtual ? this._nodesInLink(e) : [e] }, arrangeNodes: function () { var e, t, i, n, o, r, s; for (t = 0; t < this.layers.length; t++)for (n = this.layers[t], i = 0; i < n.length; i++)(o = n[i]).upstreamPriority = o.upstreamLinkCount, o.downstreamPriority = o.downstreamLinkCount; for (2, r = 0; r < 2; r++) { for (e = this.layers.length - 1; e >= 1; e--)this.layoutLayer(!1, e); for (e = 0; e < this.layers.length - 1; e++)this.layoutLayer(!0, e) } for (s = Number.MAX_VALUE, t = 0; t < this.layers.length; t++)for (n = this.layers[t], i = 0; i < n.length; i++)o = n[i], s = Math.min(s, o.gridPosition); if (s < 0) for (t = 0; t < this.layers.length; t++)for (n = this.layers[t], i = 0; i < n.length; i++)(o = n[i]).gridPosition = o.gridPosition - s }, layoutLayer: function (e, t) { var i, n, o, r; for (n = e ? this.layers[i = t + 1] : this.layers[i = t - 1], o = [], r = 0; r < n.length; r++)o.push(n[r]); o.sort(function (e, t) { var i = (e.upstreamPriority + e.downstreamPriority) / 2, n = (t.upstreamPriority + t.downstreamPriority) / 2; return Math.abs(i - n) < 1e-4 ? 0 : i < n ? 1 : -1 }), h.forEach(o, function (e) { var t = e.gridPosition, i = this.calcBaryCenter(e), o = (e.upstreamPriority + e.downstreamPriority) / 2; if (!(Math.abs(t - i) < 1e-4 || Math.abs(t - i) < .2501)) if (t < i) for (; t < i && this.moveRight(e, n, o);)t = e.gridPosition; else for (; t > i && this.moveLeft(e, n, o);)t = e.gridPosition }, this), i > 0 && this.calcDownData(i - 1), i < this.layers.length - 1 && this.calcUpData(i + 1) }, moveRight: function (e, t, i) { var n, o, r = h.indexOf(t, e); return r === t.length - 1 ? (e.gridPosition = e.gridPosition + .5, !0) : (n = t[r + 1], o = (n.upstreamPriority + n.downstreamPriority) / 2, n.gridPosition > e.gridPosition + 1 ? (e.gridPosition = e.gridPosition + .5, !0) : !(o > i || Math.abs(o - i) < 1e-4 || !this.moveRight(n, t, i) || (e.gridPosition = e.gridPosition + .5, 0))) }, moveLeft: function (e, t, i) { var n, o, r = h.indexOf(t, e); return 0 === r ? (e.gridPosition = e.gridPosition - .5, !0) : (n = t[r - 1], o = (n.upstreamPriority + n.downstreamPriority) / 2, n.gridPosition < e.gridPosition - 1 ? (e.gridPosition = e.gridPosition - .5, !0) : !(o > i || Math.abs(o - i) < 1e-4 || !this.moveLeft(n, t, i) || (e.gridPosition = e.gridPosition - .5, 0))) }, mapVirtualNode: function (e, t) { this.nodeToLinkMap.set(e, t), this.linkToNodeMap.containsKey(t) || this.linkToNodeMap.set(t, []), this.linkToNodeMap.get(t).push(e) }, _nodesInLink: function (e) { return this.linkToNodeMap.get(this.nodeToLinkMap.get(e)) }, _dummify: function () { var e, t, i, n, s, a, l, d, u, f, p, m, g, v, _, b, w, y, k, x; for (this.linkToNodeMap = new c, this.nodeToLinkMap = new c, u = this.graph.links.slice(0), f = this.layers, p = function (e, t, i) { f[e].linksTo[t] = f[e].linksTo[t] || [], f[e].linksTo[t].push(i) }, d = 0; d < u.length; d++)if (m = u[d], g = m.source, v = m.target, _ = g.layer, b = v.layer, w = g.gridPosition, y = v.gridPosition, k = (y - w) / Math.abs(b - _), x = g, _ - b > 1) { for (l = _ - 1; l > b; l--) { for ((i = new o).x = g.x, i.y = g.y, i.width = g.width / 100, i.height = g.height / 100, e = f[l], (t = (l - b) * k + w) > e.length && (t = e.length), w >= f[_].length - 1 && y >= f[b].length - 1 ? t = e.length : 0 === w && 0 === y && (t = 0), i.layer = l, i.uBaryCenter = 0, i.dBaryCenter = 0, i.upstreamLinkCount = 0, i.downstreamLinkCount = 0, i.gridPosition = t, i.isVirtual = !0, h.insert(e, i, t), s = t + 1; s < e.length; s++)(n = e[s]).gridPosition = n.gridPosition + 1; (a = new r(x, i)).depthOfDumminess = 0, p(l - 1, l, a), x = i, this.graph._addNode(i), this.graph.addLink(a), i.index = this.graph.nodes.length - 1, this.mapVirtualNode(i, m) } p(b - 1, b, a), m.changeSource(x), m.depthOfDumminess = _ - b - 1 } else if (_ - b < -1) { for (l = _ + 1; l < b; l++) { for ((i = new o).x = g.x, i.y = g.y, i.width = g.width / 100, i.height = g.height / 100, e = f[l], (t = (l - _) * k + w) > e.length && (t = e.length), w >= f[_].length - 1 && y >= f[b].length - 1 ? t = e.length : 0 === w && 0 === y && (t = 0), i.layer = l, i.uBaryCenter = 0, i.dBaryCenter = 0, i.upstreamLinkCount = 0, i.downstreamLinkCount = 0, i.gridPosition = t, i.isVirtual = !0, t &= t, h.insert(e, i, t), s = t + 1; s < e.length; s++)(n = e[s]).gridPosition = n.gridPosition + 1; (a = new r(x, i)).depthOfDumminess = 0, p(l - 1, l, a), x = i, this.graph._addNode(i), this.graph.addLink(a), i.index = this.graph.nodes.length - 1, this.mapVirtualNode(i, m) } p(b - 1, b, m), m.changeSource(x), m.depthOfDumminess = b - _ - 1 } else p(_, b, m) }, _dedummify: function () { for (var e, t, i, n, o, r, s, a, l = !0; l;)for (l = !1, e = 0; e < this.graph.links.length; e++)if ((t = this.graph.links[e]).depthOfDumminess) { for ((i = []).unshift({ x: t.target.x, y: t.target.y }), i.unshift({ x: t.source.x, y: t.source.y }), n = t, o = t.depthOfDumminess, r = 0; r < o; r++)s = n.source, a = s.incoming[0], i.unshift({ x: a.source.x, y: a.source.y }), n = a; t.changeSource(n.source), t.depthOfDumminess = 0, i.length > 2 ? (i.splice(0, 1), i.splice(i.length - 1), t.points = i) : t.points = [], l = !0; break } }, _optimizeCrossings: function () { for (var e, t = -1, i = 0; 0 !== t && !(i++ > 3);) { for (t = 0, e = this.layers.length - 1; e >= 1; e--)t += this.optimizeLayerCrossings(!1, e); for (e = 0; e < this.layers.length - 1; e++)t += this.optimizeLayerCrossings(!0, e) } }, calcUpData: function (e) { var t, i, n, o, r, s, a, l, c; if (0 !== e) { for (t = this.layers[e], r = new d, s = this.layers[e - 1], i = 0; i < s.length; i++)r.add(s[i]); for (i = 0; i < t.length; i++) { for (a = t[i], l = 0, c = 0, n = 0; n < a.incoming.length; n++)o = a.incoming[n], r.contains(o.source) && (c++, l += o.source.gridPosition); for (n = 0; n < a.outgoing.length; n++)o = a.outgoing[n], r.contains(o.target) && (c++, l += o.target.gridPosition); c > 0 ? (a.uBaryCenter = l / c, a.upstreamLinkCount = c) : (a.uBaryCenter = i, a.upstreamLinkCount = 0) } } }, calcDownData: function (e) { var t, i, n, o, r, s, a, l, c; if (e !== this.layers.length - 1) { for (t = this.layers[e], r = new d, s = this.layers[e + 1], i = 0; i < s.length; i++)r.add(s[i]); for (i = 0; i < t.length; i++) { for (a = t[i], l = 0, c = 0, n = 0; n < a.incoming.length; n++)o = a.incoming[n], r.contains(o.source) && (c++, l += o.source.gridPosition); for (n = 0; n < a.outgoing.length; n++)o = a.outgoing[n], r.contains(o.target) && (c++, l += o.target.gridPosition); c > 0 ? (a.dBaryCenter = l / c, a.downstreamLinkCount = c) : (a.dBaryCenter = i, a.downstreamLinkCount = 0) } } }, optimizeLayerCrossings: function (e, t) { var i, n, o, r, s, a, l; for (n = e ? this.layers[i = t + 1] : this.layers[i = t - 1], o = n.slice(0), e ? this.calcUpData(i) : this.calcDownData(i), r = this, n.sort(function (e, t) { var i, n = r.calcBaryCenter(e), o = r.calcBaryCenter(t); return Math.abs(n - o) < 1e-4 ? e.degree() === t.degree() ? r.compareByIndex(e, t) : e.degree() < t.degree() ? 1 : -1 : (i = 1e3 * (o - n)) > 0 ? -1 : i < 0 ? 1 : r.compareByIndex(e, t) }), a = 0, s = 0; s < n.length; s++)n[s] !== o[s] && a++; if (a > 0) for (l = 0, s = 0; s < n.length; s++)n[s].gridPosition = l++; return a }, _swapPairs: function () { for (var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g = this.options.layeredIterations, v = 0; !(v++ > g);)for (t = v % 4 == 1, i = (e = v % 4 <= 1) ? 0 : this.layers.length - 1; e ? i <= this.layers.length - 1 : i >= 0; i += e ? 1 : -1) { for (n = this.layers[i], o = !1, r = !0, s = 0, a = 0; a < n.length - 1; a++)l = 0, c = 0, d = 0, r ? (0 !== i && (l = this.countLinksCrossingBetweenTwoLayers(i - 1, i)), i !== this.layers.length - 1 && (c = this.countLinksCrossingBetweenTwoLayers(i, i + 1)), e ? l *= 2 : c *= 2, d = l + c) : d = s, 0 !== d && (u = n[a], h = n[a + 1], f = u.gridPosition, p = h.gridPosition, n[a] = h, n[a + 1] = u, u.gridPosition = p, h.gridPosition = f, l = 0, 0 !== i && (l = this.countLinksCrossingBetweenTwoLayers(i - 1, i)), c = 0, i !== this.layers.length - 1 && (c = this.countLinksCrossingBetweenTwoLayers(i, i + 1)), e ? l *= 2 : c *= 2, m = l + c, !1, (t ? m >= d : m > d) ? (u = n[a], h = n[a + 1], f = u.gridPosition, p = h.gridPosition, n[a] = h, n[a + 1] = u, u.gridPosition = p, h.gridPosition = f, s = d, r = !1) : (o = !0, r = !0)); o && (i !== this.layers.length - 1 && this.calcUpData(i + 1), 0 !== i && this.calcDownData(i - 1)) } }, countLinksCrossingBetweenTwoLayers: function (e, t) { var i, n, o, r, s, a, l, c, d, u, h, f, p = this.layers[e].linksTo[t], m = 0, g = p.length; for (l = 0; l < g; l++)for (i = p[l], c = l + 1; c < g; c++)n = p[c], i.target.layer === t ? (o = i.source, r = i.target) : (o = i.target, r = i.source), n.target.layer === t ? (s = n.source, a = n.target) : (s = n.target, a = n.source), d = o.gridPosition, u = r.gridPosition, h = s.gridPosition, f = a.gridPosition, (d - h) * (u - f) < 0 && m++; return m }, calcBaryCenter: function (e) { var t = e.upstreamLinkCount, i = e.downstreamLinkCount, n = e.uBaryCenter, o = e.dBaryCenter; return t > 0 && i > 0 ? (n + o) / 2 : t > 0 ? n : i > 0 ? o : 0 }, _gridPositionComparer: function (e, t) { return e.gridPosition < t.gridPosition ? -1 : e.gridPosition > t.gridPosition ? 1 : 0 }, _positionAscendingComparer: function (e, t) { return e.k < t.k ? -1 : e.k > t.k ? 1 : 0 }, _positionDescendingComparer: function (e, t) { return e.k < t.k ? 1 : e.k > t.k ? -1 : 0 }, _firstVirtualNode: function (e) { for (var t = 0; t < e.length; t++)if (e[t].isVirtual) return t; return -1 }, compareByIndex: function (e, t) { var i = e.index, n = t.index; return i < n ? 1 : i > n ? -1 : 0 }, intDiv: function (e, t) { return (e - e % t) / t }, nextVirtualNode: function (e, t) { var i, n = t.layerIndex; for (i = n + 1; i < e.length; ++i)if (e[i].isVirtual) return e[i]; return null } }), C = t.Class.extend({ init: function (e, t) { if (h.isUndefined(e)) throw "No diagram given"; this.diagram = e, this.nodeMap = new c, this.linkMap = new c, this.capture(t || e) }, capture: function (e) { var t, n, o, r, s, a, c, d, u; if (e instanceof i.Graph) { for (r = 0; r < e.nodes.length; r++)t = e.nodes[r], o = t.associatedShape, this.nodeMap.set(o.visual.id, new l(t.x, t.y, t.width, t.height)); for (r = 0; r < e.links.length; r++)a = e.links[r], s = a.associatedConnection, this.linkMap.set(s.visual.id, a.points()) } else if (e instanceof Array) for (n = e, r = 0; r < n.length; r++)t = n[r], (o = t.associatedShape) && this.nodeMap.set(o.visual.id, new l(t.x, t.y, t.width, t.height)); else if (e.hasOwnProperty("links") && e.hasOwnProperty("nodes")) { for (n = e.nodes, c = e.links, r = 0; r < n.length; r++)t = n[r], (o = t.associatedShape) && this.nodeMap.set(o.visual.id, new l(t.x, t.y, t.width, t.height)); for (r = 0; r < c.length; r++)a = c[r], (s = a.associatedConnection) && this.linkMap.set(s.visual.id, a.points) } else { for (d = this.diagram.shapes, u = this.diagram.connections, r = 0; r < d.length; r++)o = d[r], this.nodeMap.set(o.visual.id, o.bounds()); for (r = 0; r < u.length; r++)s = u[r], this.linkMap.set(s.visual.id, s.points()) } } }), s(i, { init: function (e) { t.init(e, i.ui) }, SpringLayout: w, TreeLayout: k, GraphAdapter: b, LayeredLayout: x, LayoutBase: _, LayoutState: C }); var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g, v, _, b, w, y, k, x, C }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("dataviz/diagram/dom.min", ["kendo.data.min", "kendo.draganddrop.min", "kendo.toolbar.min", "kendo.editable.min", "kendo.window.min", "kendo.dropdownlist.min", "kendo.dataviz.core.min", "kendo.dataviz.themes.min", "dataviz/diagram/svg.min", "dataviz/diagram/services.min", "dataviz/diagram/layout.min"], function () { !function (e, t) { function i(e) { return e.options.name.toLowerCase() === Ce.toLowerCase() } function n(e, t) { var n, o, r, s, a = Se; for (r = 0; r < t.length; r++)i(o = t[r]) || (s = e.distanceTo(o.position())) < a && (a = s, n = o); return n } function o(e, t) { var i, n, o, r = [], s = e.drawingContainer().children, a = s.length; for (i = 0; i < t.length; i++)for (n = t[i], o = 0; o < a; o++)if (s[o] == n.drawingContainer()) { r.push(o); break } return r } function r(e) { var t = {}; return fe((e = e || {}).text) && null !== e.text && (t.text = e.text), fe(e.x) && null !== e.x && (t.x = e.x), fe(e.y) && null !== e.y && (t.y = e.y), fe(e.width) && null !== e.width && (t.width = e.width), fe(e.height) && null !== e.height && (t.height = e.height), fe(e.type) && null !== e.type && (t.type = e.type), t } function s(t, i) { var n, o = this.dataSource.reader.model; o && (n = o.fn.fields.text ? "text" : o.idField, e("<input name='" + i.field + "' />").appendTo(t).kendoDropDownList({ dataValueField: o.idField, dataTextField: n, dataSource: this.dataSource.data().toJSON(), optionLabel: " ", valuePrimitive: !0 })) } function a(e) { this.dataItem = e, this.callbacks = [] } function l() { this.items = {} } function c(e) { var t = e; return e instanceof kendo.data.Model && ((t = e.toJSON())[e.idField] = e._defaultId), t } function d(e) { var t, i, n = [], o = []; for (i = 0; i < e.length; i++)(t = e[i]) instanceof _ ? o.push(t) : n.push(t); return { shapes: o, connections: n } } function u(e, t) { return e.reader.model ? new e.reader.model(t) : new kendo.data.ObservableObject(t) } function h(e, t) { fe(t[e]) && t.set(e, null) } function f(e, t, i) { var n, o; for (o = 0; o < i.length; o++)n = i[o], t && !fe(t[n]) && (t[n] = e[n]) } function p(e) { e.preventDefault() } var m, g, v, _, b, w, y, k, x, C, S, T, D = kendo.dataviz, A = kendo.drawing, E = kendo.geometry, I = D.diagram, M = kendo.ui.Widget, R = kendo.Class, F = e.proxy, z = kendo.deepExtend, P = kendo._outerWidth, B = kendo._outerHeight, L = e.extend, H = kendo.data.HierarchicalDataSource, N = I.Canvas, O = I.Group, V = I.Rectangle, U = I.Circle, W = I.CompositeTransform, q = I.Rect, j = I.Path, G = I.DeleteShapeUnit, $ = I.DeleteConnectionUnit, Y = I.TextBlock, K = I.Image, Q = I.Point, X = I.Intersect, Z = I.ConnectionEditAdorner, J = I.UndoRedoService, ee = I.ToolService, te = I.Selector, ie = I.ResizingAdorner, ne = I.ConnectorsAdorner, oe = I.Cursors, re = I.Utils, se = kendo.Observable, ae = I.ToBackUnit, le = I.ToFrontUnit, ce = I.PolylineRouter, de = I.CascadingRouter, ue = re.isUndefined, he = re.isDefined, fe = A.util.defined, pe = e.isArray, me = kendo.isFunction, ge = re.isString, ve = e.isPlainObject, _e = Math, be = ".kendoDiagram", we = "cascading", ye = "itemBoundsChange", ke = "change", xe = "click", Ce = "Auto", Se = 9007199254740992, Te = "itemRotate", De = "zoomStart", Ae = "zoomEnd", Ee = Number.MAX_VALUE, Ie = -Number.MAX_VALUE, Me = "transformed", Re = "rotated"; I.DefaultConnectors = [{ name: "Top" }, { name: "Bottom" }, { name: "Left" }, { name: "Right" }, { name: Ce, position: function (e) { return e.getPosition("center") } }], m = { cancel: { text: "Cancel", imageClass: "k-i-cancel", className: "k-diagram-cancel", iconClass: "k-icon" }, update: { text: "Update", imageClass: "k-i-checkmark", className: "k-diagram-update", iconClass: "k-icon" } }, I.shapeDefaults = function (e) { var t = { type: "rectangle", path: "", autoSize: !0, visual: null, x: 0, y: 0, minWidth: 20, minHeight: 20, width: 100, height: 100, hover: {}, editable: { connect: !0, tools: [] }, connectors: I.DefaultConnectors, rotation: { angle: 0 } }; return re.simpleExtend(t, e), t }, g = se.extend({ init: function (e) { var t = this; t.dataItem = (e || {}).dataItem, se.fn.init.call(t), t.options = z({ id: I.randomId() }, t.options, e), t.isSelected = !1, t.visual = new O({ id: t.options.id, autoSize: t.options.autoSize }), t.id = t.options.id, t._template() }, options: { hover: {}, cursor: oe.grip, content: { align: "center middle" }, selectable: !0, serializable: !0, enable: !0 }, _getCursor: function (e) { return this.adorner ? this.adorner._getCursor(e) : this.options.cursor }, visible: function (e) { return ue(e) ? this.visual.visible() : (this.visual.visible(e), t) }, bounds: function () { }, refresh: function () { this.visual.redraw() }, position: function (e) { this.options.x = e.x, this.options.y = e.y, this.visual.position(e) }, toString: function () { return this.options.id }, serialize: function () { var e = z({}, { options: this.options }); return this.dataItem && (e.dataItem = "" + this.dataItem), e }, _content: function (e) { var i, n; return e !== t && (i = this.options, I.Utils.isString(e) ? i.content.text = e : z(i.content, e), n = i.content, this._contentVisual ? this._updateContentVisual(n) : this._createContentVisual(n)), this.options.content.text }, _createContentVisual: function (e) { e.text && (this._contentVisual = new Y(e), this._contentVisual._includeInBBox = !1, this.visual.append(this._contentVisual)) }, _updateContentVisual: function (e) { this._contentVisual.redraw(e) }, _hitTest: function (e) { var t = this.bounds(); return this.visible() && t.contains(e) && this.options.enable }, _template: function () { var e, t, i = this; i.options.content.template && (e = i.dataItem || {}, t = kendo.template(i.options.content.template, { paramName: "dataItem" }), i.options.content.text = t(e)) }, _canSelect: function () { return !1 !== this.options.selectable }, toJSON: function () { return { id: this.options.id } } }), (v = R.extend({ init: function (e, t) { this.options = z({}, this.options, t), this.connections = [], this.shape = e }, options: { width: 7, height: 7, fill: { color: "Yellow" }, hover: {} }, position: function () { return this.options.position ? this.options.position(this.shape) : this.shape.getPosition(this.options.name) }, toJSON: function () { return { shapeId: "" + this.shape, connector: this.options.name } } })).parse = function (e, t) { var i, n, o = t.split(":"), r = o[0], s = o[1] || Ce; for (i = 0; i < e.shapes.length; i++)if ((n = e.shapes[i]).options.id == r) return n.getConnector(s.trim()) }, _ = g.extend({ init: function (e, t) { var i = this; g.fn.init.call(i, e), this.diagram = t, this.updateOptionsFromModel(), e = i.options, i.connectors = [], i.type = e.type, i.createShapeVisual(), i.updateBounds(), i.content(i.content()), i._createConnectors() }, options: I.shapeDefaults(), _setOptionsFromModel: function (e) { var t = r(e || this.dataItem); this.options = z({}, this.options, t), this.redrawVisual() }, updateOptionsFromModel: function (e, t) { var i, n; this.diagram && this.diagram._isEditable && (i = r(e || this.dataItem), e && t ? D.inArray(t, ["x", "y", "width", "height"]) ? ((n = this.bounds())[t] = e[t], this.bounds(n)) : (this.options.visual ? this._redrawVisual() : i.type && (this.options = z({}, this.options, i), this._redrawVisual()), this.options.content && (this._template(), this.content(this.options.content))) : this.options = z({}, this.options, i)) }, _redrawVisual: function () { this.visual.clear(), this._contentVisual = null, this.options.dataItem = this.dataItem, this.createShapeVisual(), this.updateBounds() }, redrawVisual: function () { this._redrawVisual(), this.options.content && (this._template(), this.content(this.options.content)) }, updateModel: function (e) { var t, i, n = this.diagram; n && n._isEditable && (t = this._bounds, (i = this.dataItem) && (n._suspendModelRefresh(), fe(i.x) && t.x !== i.x && i.set("x", t.x), fe(i.y) && t.y !== i.y && i.set("y", t.y), fe(i.width) && t.width !== i.width && i.set("width", t.width), fe(i.height) && t.height !== i.height && i.set("height", t.height), this.dataItem = i, n._resumeModelRefresh(), e && n._syncShapeChanges())) }, updateBounds: function () { var e = this.visual._measure(!0), t = this.options; this.bounds(new q(t.x, t.y, e.width, e.height)), this._rotate(), this._alignContent() }, content: function (e) { var t = this._content(e); return this._alignContent(), t }, _alignContent: function () { var e, t, i, n, o, r = this.options.content || {}, s = this._contentVisual; s && r.align && (e = this.visual._measure(), t = new I.RectAlign(e), i = s.drawingElement.bbox(null), n = new q(0, 0, i.width(), i.height()), o = t.align(n, r.align), s.position(o.topLeft())) }, _createConnectors: function () { var e, t, i = this.options, n = i.connectors.length, o = i.connectorDefaults; for (t = 0; t < n; t++)e = new v(this, z({}, o, i.connectors[t])), this.connectors.push(e) }, bounds: function (e) { var t, i; if (e) if (ge(e)) switch (e) { case Me: t = this._transformedBounds(); break; case "absolute": t = this._transformedBounds(), i = this.diagram._pan, t.x += i.x, t.y += i.y; break; case Re: t = this._rotatedBounds(); break; default: t = this._bounds } else this._setBounds(e), this._triggerBoundsChange(), this.diagram && this.diagram._layouting || this.refreshConnections(); else t = this._bounds; return t }, _setBounds: function (e) { var t = this.options, i = e.topLeft(), n = t.x = i.x, o = t.y = i.y, r = t.width = _e.max(e.width, t.minWidth), s = t.height = _e.max(e.height, t.minHeight); this._bounds = new q(n, o, r, s), this.visual.redraw({ x: n, y: o, width: r, height: s }) }, position: function (e) { return e ? (this.bounds(new q(e.x, e.y, this._bounds.width, this._bounds.height)), t) : this._bounds.topLeft() }, clone: function () { var e = this.serialize(); return e.options.id = I.randomId(), this.diagram && this.diagram._isEditable && fe(this.dataItem) && (e.options.dataItem = c(this.dataItem)), new _(e.options) }, select: function (e) { var t, i, n = this.diagram; if (ue(e) && (e = !0), this._canSelect() && this.isSelected != e) return t = [], i = [], this.isSelected = e, this.isSelected ? (n._selectedItems.push(this), t.push(this)) : (re.remove(n._selectedItems, this), i.push(this)), n._internalSelection || n._selectionChanged(t, i), !0 }, rotate: function (e, i, n) { var o, r, s, a, l = this.visual.rotate(); return e !== t && (!1 !== n && this.diagram && this.diagram.undoRedoService && e !== l.angle && this.diagram.undoRedoService.add(new I.RotateUnit(this.diagram._resizingAdorner, [this], [l.angle]), !1), o = this.bounds(), r = new Q(o.width / 2, o.height / 2), i && (s = e - l.angle, a = o.center().rotate(i, 360 - s).minus(r), this._rotationOffset = this._rotationOffset.plus(a.minus(o.topLeft())), this.position(a)), this.visual.rotate(e, r), this.options.rotation.angle = e, this.diagram && this.diagram._connectorsAdorner && this.diagram._connectorsAdorner.refresh(), this.refreshConnections(), this.diagram && this.diagram.trigger(Te, { item: this })), l }, connections: function (e) { var t, i, n, o, r, s, a, l = []; for (t = 0; t < this.connectors.length; t++)for (r = this.connectors[t], o = r.connections, i = 0; i < o.length; i++)n = o[i], "out" == e ? (s = n.source()).shape && s.shape == this && l.push(n) : "in" == e ? (a = n.target()).shape && a.shape == this && l.push(n) : l.push(n); return l }, refreshConnections: function () { e.each(this.connections(), function () { this.refresh() }) }, getConnector: function (e) { var t, i; if (!ge(e)) return e instanceof Q ? n(e, this.connectors) : this.connectors.length ? this.connectors[0] : null; for (e = e.toLocaleLowerCase(), t = 0; t < this.connectors.length; t++)if ((i = this.connectors[t]).options.name.toLocaleLowerCase() == e) return i }, getPosition: function (e) { var t = this.bounds(), i = e.charAt(0).toLowerCase() + e.slice(1); return me(t[i]) ? this._transformPoint(t[i]()) : t.center() }, redraw: function (e) { var t, i; e && (t = this.options, this.shapeVisual.redraw(this._visualOptions(e)), this._diffNumericOptions(e, ["width", "height", "x", "y"]) && (this.bounds(new q(t.x, t.y, t.width, t.height)), i = !0), e.connectors && (t.connectors = e.connectors, this._updateConnectors()), t = z(t, e), (e.rotation || i) && this._rotate(), t.content && this.content(t.content)) }, _updateConnectors: function () { var e, t, i, n, o = this.connections(); for (this.connectors = [], this._createConnectors(), n = 0; n < o.length; n++)e = o[n], t = e.source(), i = e.target(), t.shape && t.shape === this ? e.source(this.getConnector(t.options.name) || null) : i.shape && i.shape === this && e.target(this.getConnector(i.options.name) || null), e.updateModel() }, _diffNumericOptions: I.diffNumericOptions, _visualOptions: function (e) { return { data: e.path, source: e.source, hover: e.hover, fill: e.fill, stroke: e.stroke } }, _triggerBoundsChange: function () { this.diagram && this.diagram.trigger(ye, { item: this, bounds: this._bounds.clone() }) }, _transformPoint: function (e) { var t = this.rotate(), i = this.bounds(), n = i.topLeft(); return t.angle && e.rotate(t.center().plus(n), 360 - t.angle), e }, _transformedBounds: function () { var e = this.bounds(), t = e.topLeft(), i = e.bottomRight(); return q.fromPoints(this.diagram.modelToView(t), this.diagram.modelToView(i)) }, _rotatedBounds: function () { var e = this.bounds().rotatedBounds(this.rotate().angle), t = e.topLeft(), i = e.bottomRight(); return q.fromPoints(t, i) }, _rotate: function () { var e = this.options.rotation; e && e.angle && this.rotate(e.angle), this._rotationOffset = new Q }, _hover: function (e) { var t = this.options, i = t.hover, n = t.stroke, o = t.fill; e && he(i.stroke) && (n = z({}, n, i.stroke)), e && he(i.fill) && (o = i.fill), this.shapeVisual.redraw({ stroke: n, fill: o }), t.editable && t.editable.connect && this.diagram._showConnectors(this, e) }, _hitTest: function (e) { if (this.visible()) { var t, i = this.bounds(), n = this.rotate().angle; if (e.isEmpty && !e.isEmpty()) return X.rects(e, i, n || 0); if (t = e.clone().rotate(i.center(), n), i.contains(t)) return this } }, toJSON: function () { return { shapeId: this.options.id } }, createShapeVisual: function () { var e, t = this.options, i = this._visualOptions(t), n = t.visual, o = (t.type + "").toLocaleLowerCase(); i.width = t.width, i.height = t.height, me(n) ? e = n.call(this, t) : i.data ? function (e) { var t = e.drawingContainer().clippedBBox(null); 0 === t.origin.x && 0 === t.origin.y || e.position(-t.origin.x, -t.origin.y) }(e = new j(i)) : e = "rectangle" == o ? new V(i) : "circle" == o ? new U(i) : "text" == o ? new Y(i) : "image" == o ? new K(i) : new j(i), this.shapeVisual = e, this.visual.append(this.shapeVisual) } }), b = g.extend({ init: function (e, t, i) { var n = this; g.fn.init.call(n, i), this.updateOptionsFromModel(), this._initRouter(), n.path = new I.Polyline(n.options), n.path.fill("transparent"), n.visual.append(n.path), n._sourcePoint = n._targetPoint = new Q, n._setSource(e), n._setTarget(t), n.content(n.options.content), n.definers = [], fe(i) && i.points && n.points(i.points) }, options: { hover: { stroke: {} }, startCap: "none", endCap: "none", points: [], selectable: !0, fromConnector: Ce, toConnector: Ce }, _setOptionsFromModel: function (e) { this.updateOptionsFromModel(e || this.dataItem) }, updateOptionsFromModel: function (e) { var t, i, n, o; this.diagram && this.diagram._isEditable && (t = this.diagram._dataMap, i = function (e) { var t = {}; return fe((e = e || {}).text) && null !== e.text && (t.content = e.text), fe(e.type) && null !== e.type && (t.type = e.type), fe(e.from) && null !== e.from && (t.from = e.from), fe(e.fromConnector) && null !== e.fromConnector && (t.fromConnector = e.fromConnector), fe(e.fromX) && null !== e.fromX && (t.fromX = e.fromX), fe(e.fromY) && null !== e.fromY && (t.fromY = e.fromY), fe(e.to) && null !== e.to && (t.to = e.to), fe(e.toConnector) && null !== e.toConnector && (t.toConnector = e.toConnector), fe(e.toX) && null !== e.toX && (t.toX = e.toX), fe(e.toY) && null !== e.toY && (t.toY = e.toY), t }(e || this.dataItem), e ? (fe(i.from) ? ((n = t[i.from]) && fe(i.fromConnector) && (n = n.getConnector(i.fromConnector)), this.source(n)) : fe(i.fromX) && fe(i.fromY) && this.source(new Q(i.fromX, i.fromY)), fe(i.to) ? ((o = t[i.to]) && fe(i.toConnector) && (o = o.getConnector(i.toConnector)), this.target(o)) : fe(i.toX) && fe(i.toY) && this.target(new Q(i.toX, i.toY)), fe(i.type) && this.type() !== i.type && (this.points([]), this.type(i.type)), this.dataItem = e, this._template(), this.redraw(this.options)) : this.options = z({}, i, this.options)) }, updateModel: function (e) { if (this.diagram && this.diagram._isEditable && this.diagram.connectionsDataSource) { var t = this.diagram.connectionsDataSource.getByUid(this.dataItem.uid); t && (this.diagram._suspendModelRefresh(), fe(this.options.fromX) && null !== this.options.fromX ? (h("from", t), h("fromConnector", t), t.set("fromX", this.options.fromX), t.set("fromY", this.options.fromY)) : (t.set("from", this.options.from), fe(t.fromConnector) && t.set("fromConnector", this.sourceConnector ? this.sourceConnector.options.name : null), h("fromX", t), h("fromY", t)), fe(this.options.toX) && null !== this.options.toX ? (h("to", t), h("toConnector", t), t.set("toX", this.options.toX), t.set("toY", this.options.toY)) : (t.set("to", this.options.to), fe(t.toConnector) && t.set("toConnector", this.targetConnector ? this.targetConnector.options.name : null), h("toX", t), h("toY", t)), fe(this.options.type) && fe(t.type) && t.set("type", this.options.type), this.dataItem = t, this.diagram._resumeModelRefresh(), e && this.diagram._syncConnectionChanges()) } }, sourcePoint: function () { return this._resolvedSourceConnector ? this._resolvedSourceConnector.position() : this._sourcePoint }, _setSource: function (e) { var i, n = e instanceof _, o = this.options.fromConnector || Ce; n && !e.getConnector(o) || (e !== t && (this.from = e), this._removeFromSourceConnector(), null === e ? this.sourceConnector && (this._sourcePoint = (this._resolvedSourceConnector || this.sourceConnector).position(), this._clearSourceConnector(), this._setFromOptions(null, this._sourcePoint)) : e instanceof v ? ((i = e.shape.dataItem) && this._setFromOptions(i.id), this.sourceConnector = e, this.sourceConnector.connections.push(this)) : e instanceof Q ? (this._setFromOptions(null, e), this._sourcePoint = e, this.sourceConnector && this._clearSourceConnector()) : n && ((i = e.dataItem) && this._setFromOptions(i.id), this.sourceConnector = e.getConnector(o), this.sourceConnector.connections.push(this))) }, source: function (e, t) { return he(e) && (t && this.diagram && this.diagram.undoRedoService.addCompositeItem(new I.ConnectionEditUnit(this, e)), this._setSource(e), this.refresh()), this.sourceConnector ? this.sourceConnector : this._sourcePoint }, _setFromOptions: function (e, t) { this.options.from = e, t ? (this.options.fromX = t.x, this.options.fromY = t.y) : (this.options.fromX = null, this.options.fromY = null) }, sourceDefiner: function (e) { if (!e) return this._sourceDefiner || (this._sourceDefiner = new I.PathDefiner(this.sourcePoint(), null, null)), this._sourceDefiner; if (!(e instanceof I.PathDefiner)) throw "The sourceDefiner needs to be a PathDefiner."; e.left = null, this._sourceDefiner = e, this.source(e.point) }, targetPoint: function () { return this._resolvedTargetConnector ? this._resolvedTargetConnector.position() : this._targetPoint }, _setTarget: function (e) { var i, n = e instanceof _, o = this.options.toConnector || Ce; n && !e.getConnector(o) || (e !== t && (this.to = e), this._removeFromTargetConnector(), null === e ? this.targetConnector && (this._targetPoint = (this._resolvedTargetConnector || this.targetConnector).position(), this._clearTargetConnector(), this._setToOptions(null, this._targetPoint)) : e instanceof v ? ((i = e.shape.dataItem) && this._setToOptions(i.id), this.targetConnector = e, this.targetConnector.connections.push(this)) : e instanceof Q ? (this._setToOptions(null, e), this._targetPoint = e, this.targetConnector && this._clearTargetConnector()) : n && ((i = e.dataItem) && this._setToOptions(i.id), this.targetConnector = e.getConnector(o), this.targetConnector.connections.push(this))) }, target: function (e, i) { return he(e) && (i && this.diagram && this.diagram.undoRedoService.addCompositeItem(new I.ConnectionEditUnit(this, t, e)), this._setTarget(e), this.refresh()), this.targetConnector ? this.targetConnector : this._targetPoint }, _setToOptions: function (e, t) { this.options.to = e, t ? (this.options.toX = t.x, this.options.toY = t.y) : (this.options.toX = null, this.options.toY = null) }, targetDefiner: function (e) { if (!e) return this._targetDefiner || (this._targetDefiner = new I.PathDefiner(this.targetPoint(), null, null)), this._targetDefiner; if (!(e instanceof I.PathDefiner)) throw "The sourceDefiner needs to be a PathDefiner."; e.right = null, this._targetDefiner = e, this.target(e.point) }, _updateConnectors: function () { this._updateConnector(this.source(), "source"), this._updateConnector(this.target(), "target") }, _updateConnector: function (e, t) { var i, n, o, r, s = this, a = s.diagram; e instanceof v && !a.getShapeById(e.shape.id) ? (i = e.shape.dataItem, n = e.options.name, o = function () { var o = a._dataMap[i.id]; e = o.getConnector(n), s[t](e, !1), s.updateModel() }, a._dataMap[i.id] ? o() : (r = a._inactiveShapeItems.getByUid(i.uid)) && a._deferredConnectionUpdates.push(r.onActivate(o))) : s[t](e, !1) }, content: function (e) { var t = this._content(e); return fe(e) && this._alignContent(), t }, _createContentVisual: function (e) { var t; return me(e.visual) ? t = e.visual.call(this, e) : e.text && (t = new Y(e)), t && (this._contentVisual = t, t._includeInBBox = !1, this.visual.append(t)), t }, _updateContentVisual: function (e) { me(e.visual) ? (this.visual.remove(this._contentVisual), this._createContentVisual(e)) : this._contentVisual.redraw(e) }, _alignContent: function () { var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m; if (this._contentVisual) { for (e = 5, t = this.allPoints(), i = _e.floor(t.length / 2), n = i - 1; n > 0 && t[n].equals(t[i]);)n--, i++; o = t[i], r = t[n], s = this._contentVisual._measure(), a = s.width, l = s.height, c = t.length % 2 == 0, d = r.distanceTo(o), c && t.length > 2 && d > 0 && (r.y === o.y && d < a || r.x === o.x && d < l) && (c = !1, e = 0), c ? (h = A.util.deg(_e.atan2(o.y - r.y, o.x - r.x)), u = new Q((o.x - r.x) / 2 + r.x, (o.y - r.y) / 2 + r.y), 90 === _e.abs(h) ? (u.x += e, u.y -= l / 2) : h % 180 == 0 ? (u.x -= a / 2, u.y -= l + e) : h < -90 || 0 < h && h < 90 ? u.y -= l : (h < 0 || h > 90) && (u.x -= a, u.y -= l)) : (f = _e.floor(t.length / 2), u = t[f].clone(), r = t[f - 1], o = t[f + 1], p = r.x <= u.x && o.x <= u.x ? e : -s.width - e, m = r.y <= u.y && o.y <= u.y ? e : -s.height - e, u.x += p, u.y += m), this._contentVisual.position(u) } }, select: function (e) { var i, n, o = this.diagram; if (this._canSelect() && this.isSelected !== e) return this.isSelected = e, i = [], n = [], this.isSelected ? (this.adorner = new Z(this, this.options.selection), o._adorn(this.adorner, !0), o._selectedItems.push(this), i.push(this)) : this.adorner && (o._adorn(this.adorner, !1), re.remove(o._selectedItems, this), this.adorner = t, n.push(this)), this.adorner && this.adorner.refresh(), o._internalSelection || o._selectionChanged(i, n), !0 }, bounds: function (e) { return !e || ge(e) ? this._bounds : (this._bounds = e, t) }, type: function (e) { var i = this.options; return e ? (e !== i.type && (i.type = e, this._initRouter(), this.refresh()), t) : i.type }, _initRouter: function () { var e = (this.options.type || "").toLowerCase(); this._router = e == we ? new de(this) : new ce(this) }, points: function (e) { var t, i, n, o; if (!e) { if (n = [], he(this.definers)) for (o = 0; o < this.definers.length; o++)n.push(this.definers[o].point); return n } for (this.definers = [], t = 0; t < e.length; t++)if ((i = e[t]) instanceof I.Point) this.definers.push(new I.PathDefiner(i)); else { if (!i.hasOwnProperty("x") || !i.hasOwnProperty("y")) throw "A Connection point needs to be a Point or an object with x and y properties."; this.definers.push(new I.PathDefiner(new Q(i.x, i.y))) } }, allPoints: function () { var e, t = [this.sourcePoint()]; if (this.definers) for (e = 0; e < this.definers.length; e++)t.push(this.definers[e].point); return t.push(this.targetPoint()), t }, refresh: function () { this._resolveConnectors(), this._refreshPath(), this._alignContent(), this.adorner && this.adorner.refresh() }, _resolveConnectors: function () { var e, t, o, r, s = this, a = s.source(), l = s.target(); a instanceof Q ? e = a : a instanceof v && (o = i(a) ? a.shape.connectors : [a]), l instanceof Q ? t = l : l instanceof v && (r = i(l) ? l.shape.connectors : [l]), e ? r && (s._resolvedTargetConnector = n(e, r)) : o && (t ? s._resolvedSourceConnector = n(t, o) : r && this._resolveAutoConnectors(o, r)) }, _resolveAutoConnectors: function (e, t) { var n, o, r, s, a, l, c, d, u, h, f, p = Se, m = Se; for (u = 0; u < e.length; u++)if (!i(c = e[u])) for (r = c.position(), h = 0; h < t.length; h++)i(d = t[h]) || (s = d.position(), (f = _e.round(r.distanceTo(s))) < p && this.diagram && this._testRoutePoints(r, s, c, d) && (p = f, n = c, o = d), f < m && (a = c, l = d, m = f)); n && (a = n, l = o), this._resolvedSourceConnector = a, this._resolvedTargetConnector = l }, _testRoutePoints: function (e, t, i, n) { var o, r, s, a, l, c, d = this._router, u = !0; if (d instanceof de) for (o = d.routePoints(e, t, i, n), l = this._getRouteExclude(e, t, i.shape, n.shape), o.unshift(e), o.push(t), c = 1; c < o.length; c++)if (r = o[c - 1], s = o[c], (a = new q(_e.min(r.x, s.x), _e.min(r.y, s.y), _e.abs(r.x - s.x), _e.abs(r.y - s.y))).width > 0 && (a.x++, a.width -= 2), a.height > 0 && (a.y++, a.height -= 2), !a.isEmpty() && this.diagram._shapesQuadTree.hitTestRect(a, l)) { u = !1; break } return u }, _getRouteExclude: function (e, t, i, n) { var o = []; return this._isPointInsideShape(e, i) && o.push(i), this._isPointInsideShape(t, n) && o.push(n), o }, _isPointInsideShape: function (e, t) { var i, n, o, r = t.bounds(), s = t.rotate().angle, a = r.x, l = r.y; return i = e.clone().rotate(r.center(), s), n = i.x, o = i.y, n > a && n < a + r.width && o > l && o < l + r.height }, redraw: function (e) { if (e) { this.options = z({}, this.options, e); var t = this.options.points; fe(t) && t.length > 0 && (this.points(t), this._refreshPath()), (e && e.content || e.text) && this.content(e.content), this.path.redraw({ fill: e.fill, stroke: e.stroke, startCap: e.startCap, endCap: e.endCap }) } }, clone: function () { var e = this.serialize(); return this.diagram && this.diagram._isEditable && fe(this.dataItem) && (e.options.dataItem = c(this.dataItem)), new b(this.from, this.to, e.options) }, serialize: function () { var e = this.from.toJSON ? this.from.toJSON : "" + this.from, t = this.to.toJSON ? this.to.toJSON : "" + this.to, i = z({}, { options: this.options, from: e, to: t }); return fe(this.dataItem) && (i.dataItem = "" + this.dataItem), i.options.points = this.points(), i }, _hitTest: function (e) { if (this.visible()) { var t = new Q(e.x, e.y), i = this.sourcePoint(), n = this.targetPoint(); if (e.isEmpty && !e.isEmpty() && e.contains(i) && e.contains(n)) return this; if (this._router.hitTest(t)) return this } }, _hover: function (e) { var t = (this.options.stroke || {}).color; e && he(this.options.hover.stroke.color) && (t = this.options.hover.stroke.color), this.path.redraw({ stroke: { color: t } }) }, _refreshPath: function () { fe(this.path) && (this._drawPath(), this.bounds(this._router.getBounds())) }, _drawPath: function () { var e, t, i; this._router && this._router.route(), e = this.sourcePoint(), t = this.targetPoint(), i = this.points(), this.path.redraw({ points: [e].concat(i, [t]) }) }, _clearSourceConnector: function () { this.sourceConnector = t, this._resolvedSourceConnector = t }, _clearTargetConnector: function () { this.targetConnector = t, this._resolvedTargetConnector = t }, _removeFromSourceConnector: function () { this.sourceConnector && re.remove(this.sourceConnector.connections, this) }, _removeFromTargetConnector: function () { this.targetConnector && re.remove(this.targetConnector.connections, this) }, toJSON: function () { var e, t, i, n = this; return n.from && n.from.toJSON ? e = n.from.toJSON() : (i = n._sourcePoint, e = { x: i.x, y: i.y }), n.to && n.to.toJSON ? t = n.to.toJSON() : (i = n._targetPoint, t = { x: i.x, y: i.y }), { from: e, to: t } } }), w = M.extend({ init: function (e, t) { var i = this; kendo.destroy(e), M.fn.init.call(i, e, t), i._initTheme(), i._initElements(), i._extendLayoutOptions(i.options), i._initDefaults(t), i._interactionDefaults(), i._initCanvas(), i.mainLayer = new O({ id: "main-layer" }), i.canvas.append(i.mainLayer), i._shapesQuadTree = new T(i), i._pan = new Q, i._adorners = [], i.adornerLayer = new O({ id: "adorner-layer" }), i.canvas.append(i.adornerLayer), i._createHandlers(), i._initialize(), i._resizingAdorner = new ie(i, { editable: i.options.editable }), i._connectorsAdorner = new ne(i), i._adorn(i._resizingAdorner, !0), i._adorn(i._connectorsAdorner, !0), i.selector = new te(i), i._clipboard = [], i.pauseMouseHandlers = !1, i._fetchFreshData(), i._createGlobalToolBar(), i._createOptionElements(), i.zoom(i.options.zoom), i.canvas.draw() }, options: { name: "Diagram", theme: "default", layout: "", zoomRate: .1, zoom: 1, zoomMin: 0, zoomMax: 2, dataSource: {}, draggable: !0, template: "", autoBind: !0, editable: { rotate: {}, resize: {}, text: !0, tools: [], drag: { snap: { size: 10, angle: 10 } }, remove: !0 }, pannable: {}, selectable: { key: "none" }, tooltip: { enabled: !0, format: "{0}" }, copy: { enabled: !0, offsetX: 20, offsetY: 20 }, shapeDefaults: I.shapeDefaults({ undoable: !0 }), connectionDefaults: { editable: { tools: [] }, type: we }, shapes: [], connections: [] }, events: [Ae, De, "pan", "select", Te, ye, ke, xe, "mouseEnter", "mouseLeave", "toolBarClick", "save", "cancel", "edit", "remove", "add", "dataBound", "dragStart", "drag", "dragEnd"], items: function () { return e() }, _createGlobalToolBar: function () { var e, t = this.options.editable; t && (e = t.tools, !this._isEditable || !1 === e || e && 0 !== e.length || (e = ["createShape", "undo", "redo", "rotateClockwise", "rotateAnticlockwise"]), e && e.length && (this.toolBar = new y(this, { tools: e || {}, click: F(this._toolBarClick, this), modal: !1 }), this.toolBar.element.css({ textAlign: "left" }), this.element.prepend(this.toolBar.element), this._resize())) }, createShape: function () { var e, t, i, n, o; (this.editor && this.editor.end() || !this.editor) && (e = this.dataSource, t = e.view() || [], i = t.length, n = u(e, {}), o = this._createShape(n, {}), this.trigger("add", { shape: o }) || (e.insert(i, n), this._inactiveShapeItems.getByUid(n.uid).element = o, this.edit(o))) }, _createShape: function (e, t) { (t = z({}, this.options.shapeDefaults, t)).dataItem = e; var i = new _(t, this); return i }, createConnection: function () { var e, t, i, n, o; (this.editor && this.editor.end() || !this.editor) && (e = this.connectionsDataSource, t = e.view() || [], i = t.length, n = u(e, {}), o = this._createConnection(n), this.trigger("add", { connection: o }) || (this._connectionsDataMap[n.uid] = o, e.insert(i, n), this.addConnection(o, !1), this.edit(o))) }, _createConnection: function (e, t, i) { var n = z({}, this.options.connectionDefaults); return n.dataItem = e, new b(t || new Q, i || new Q, n) }, editModel: function (e, t) { var i, n, o, r; if (this.cancelEdit(), o = this.options.editable, "shape" == t) i = o.shapeEditors, n = o.shapeTemplate; else { if ("connection" != t) return; r = F(s, this), i = z({}, { from: r, to: r }, o.connectionEditors), n = o.connectionTemplate } this.editor = new x(this.element, { update: F(this._update, this), cancel: F(this._cancel, this), model: e, type: t, target: this, editors: i, template: n }), this.trigger("edit", this._editArgs()) }, edit: function (e) { if (e.dataItem) { var t = e instanceof _ ? "shape" : "connection"; this.editModel(e.dataItem, t) } }, cancelEdit: function () { this.editor && (this._getEditDataSource().cancelChanges(this.editor.model), this._destroyEditor()) }, saveEdit: function () { this.editor && this.editor.end() && !this.trigger("save", this._editArgs()) && this._getEditDataSource().sync() }, _update: function () { this.editor && this.editor.end() && !this.trigger("save", this._editArgs()) && (this._getEditDataSource().sync(), this._destroyEditor()) }, _cancel: function () { var e, t; this.editor && !this.trigger("cancel", this._editArgs()) && (e = this.editor.model, this._getEditDataSource().cancelChanges(e), (t = this._connectionsDataMap[e.uid] || this._dataMap[e.id]) && t._setOptionsFromModel(e), this._destroyEditor()) }, _getEditDataSource: function () { return "shape" === this.editor.options.type ? this.dataSource : this.connectionsDataSource }, _editArgs: function () { var e = { container: this.editor.wrapper }; return e[this.editor.options.type] = this.editor.model, e }, _destroyEditor: function () { this.editor && (this.editor.close(), this.editor = null) }, _initElements: function () { this.wrapper = this.element.empty().css("position", "relative").attr("tabindex", 0).addClass("k-widget k-diagram"), this.scrollable = e("<div />").appendTo(this.element) }, _initDefaults: function (e) { var t = this.options, i = t.editable, n = t.shapeDefaults, o = t.connectionDefaults, r = (e || {}).shapeDefaults; !1 === i ? (n.editable = !1, o.editable = !1) : (f(i, n.editable, ["drag", "remove", "connect"]), f(i, o.editable, ["drag", "remove"])), r && r.connectors && (t.shapeDefaults.connectors = r.connectors) }, _interactionDefaults: function () { var e = this.options, t = e.selectable, i = e.pannable, n = kendo.support.mobileOS; t && !fe(t.multiple) && (e.selectable = z({ multiple: !n }, e.selectable)), i && !fe(i.key) && (e.pannable = z({ key: n ? "none" : "ctrl" }, e.pannable)) }, _initCanvas: function () { var t = e("<div class='k-layer'></div>").appendTo(this.scrollable)[0], i = this.viewport(); this.canvas = new N(t, { width: i.width || 600, height: i.height || 600 }) }, _createHandlers: function () { var e = this, t = e.element; t.on("DOMMouseScroll.kendoDiagram mousewheel.kendoDiagram", F(e._wheel, e)).on("keydown" + be, F(e._keydown, e)), e._userEvents = new kendo.UserEvents(this.scrollable, { multiTouch: !0, fastTap: !0, tap: F(e._tap, e), start: F(e._dragStart, e), move: F(e._drag, e), end: F(e._dragEnd, e), gesturestart: F(e._gestureStart, e), gesturechange: F(e._gestureChange, e), gestureend: F(e._gestureEnd, e) }), e.toolService = new ee(e), this.scrollable.on("mouseover" + be, F(e._mouseover, e)).on("mouseout" + be, F(e._mouseout, e)).on("mousemove" + be, F(e._mouseMove, e)).on("mousedown" + be, F(e._mouseDown, e)).on("mouseup" + be, F(e._mouseUp, e)), this._syncHandler = F(e._syncChanges, e), e._resizeHandler = F(e.resize, e, !1), kendo.onResize(e._resizeHandler), this.bind(De, F(e._destroyToolBar, e)), this.bind("pan", F(e._destroyToolBar, e)) }, _dragStart: function (e) { var t, i; this._pauseMouseHandlers = !0, t = this._eventPositions(e, !0), i = e.event, this.toolService.start(t, this._meta(i)) && (this._destroyToolBar(), i.preventDefault()) }, _drag: function (e) { var t = this._eventPositions(e), i = e.event; this.toolService.move(t, this._meta(i)) && i.preventDefault() }, _dragEnd: function (e) { var t, i; this._pauseMouseHandlers = !1, t = this._eventPositions(e), i = e.event, this.toolService.end(t, this._meta(i)) && (this._createToolBar(), i.preventDefault()) }, _mouseMove: function (e) { if (!this._pauseMouseHandlers) { var t = this._eventPositions(e); this.toolService._updateHoveredItem(t), this.toolService._updateCursor(t) } }, _mouseDown: function () { this._pauseMouseHandlers = !0 }, _mouseUp: function () { this._pauseMouseHandlers = !1 }, _tap: function (e) { var t, i, n, o = this.toolService, r = this.options.selectable, s = this._eventPositions(e), a = this.focus(); o._updateHoveredItem(s), o.hoveredItem ? (t = o.hoveredItem, this.trigger("click", { item: t, point: s }), r && !1 !== t.options.selectable && (i = !1 !== r.multiple, n = kendo.support.mobileOS || this._meta(e.event).ctrlKey, t.isSelected ? n ? (this._destroyToolBar(), t.select(!1)) : this._createToolBar(a) : (this._destroyToolBar(), this.select(t, { addToSelection: i && n }), this._createToolBar(a)))) : r && (this._destroyToolBar(), this.deselect()) }, _keydown: function (e) { this.toolService.keyDown(e.keyCode, this._meta(e)) && e.preventDefault() }, _wheel: function (e) { var t = function (e) { var t = e.originalEvent, i = 0; return t.wheelDelta ? i = (i = -t.wheelDelta / 40) > 0 ? _e.ceil(i) : _e.floor(i) : t.detail && (i = t.detail), i }(e), i = this._eventPositions(e), n = z(this._meta(e), { delta: t }); this.toolService.wheel(i, n) && e.preventDefault() }, _meta: function (e) { return { ctrlKey: e.ctrlKey, metaKey: e.metaKey, altKey: e.altKey, shiftKey: e.shiftKey, type: e.type } }, _eventPositions: function (e, t) { var i, n, o; return e.touch ? (n = t ? "startLocation" : "location", i = new Q(e.x[n], e.y[n])) : (o = e.originalEvent, i = new Q(o.pageX, o.pageY)), this.documentToModel(i) }, _gestureStart: function (e) { var t, i; this._destroyToolBar(), this.scroller.disable(), t = this.documentToModel(new Q(e.center.x, e.center.y)), i = { point: t, zoom: this.zoom() }, this.trigger(De, i) || (this._gesture = e, this._initialCenter = t) }, _gestureChange: function (e) { var t, i, n = this._gesture, o = this._initialCenter, r = this.documentToView(new Q(e.center.x, e.center.y)), s = e.distance / n.distance, a = this._zoom, l = !1; _e.abs(s - 1) >= .05 && (this._zoom = a = this._getValidZoom(a * s), this.options.zoom = a, this._gesture = e, l = !0), t = o.times(a), i = r.minus(t), (l || this._pan.distanceTo(i) >= 5) && (this._panTransform(i), this._updateAdorners()), e.preventDefault() }, _gestureEnd: function () { !1 !== this.options.pannable && this.scroller.enable(), this.trigger(Ae, { point: this._initialCenter, zoom: this.zoom() }) }, _resize: function () { var e = this.viewport(); this.canvas && this.canvas.size(e), this.scrollable && this.toolBar && this.scrollable.height(e.height) }, _mouseover: function (e) { var t = e.target._kendoNode; t && t.srcElement._hover && t.srcElement._hover(!0, t.srcElement) }, _mouseout: function (e) { var t = e.target._kendoNode; t && t.srcElement._hover && t.srcElement._hover(!1, t.srcElement) }, _initTheme: function () { var e = this, t = D.ui.themes || {}, i = ((e.options || {}).theme || "").toLowerCase(), n = (t[i] || {}).diagram; e.options = z({}, n, e.options), !0 === e.options.editable && z(e.options, { editable: (n || {}).editable }) }, _createOptionElements: function () { var e = this.options, t = e.shapes.length; t && this._createShapes(), e.connections.length && this._createConnections(), t && e.layout && this.layout(e.layout) }, _createShapes: function () { var e, t, i = this.options, n = i.shapes; for (t = 0; t < n.length; t++)e = n[t], this.addShape(e) }, _createConnections: function () { var e, t, i, n, o = this, r = o.options, s = r.connectionDefaults, a = r.connections; for (n = 0; n < a.length; n++)e = a[n], t = o._findConnectionTarget(e.from), i = o._findConnectionTarget(e.to), o.connect(t, i, z({}, s, e)) }, _findConnectionTarget: function (e) { var t, i; return this, (t = ge(e = e || {}) ? e : e.shapeId || e.id) ? (i = this.getShapeById(t), e.connector && (i = i.getConnector(e.connector))) : i = new Q(e.x || 0, e.y || 0), i }, destroy: function () { var e = this; M.fn.destroy.call(e), this._userEvents && this._userEvents.destroy(), kendo.unbindResize(e._resizeHandler), e.clear(), e.element.off(be), e.scroller.wrapper.off(be), e.canvas.destroy(!0), e.canvas = t, e._destroyEditor(), e.destroyScroller(), e._destroyGlobalToolBar(), e._destroyToolBar() }, destroyScroller: function () { var e = this.scroller; e && (e.destroy(), e.element.remove(), this.scroller = null) }, save: function () { var e, t, i, n = { shapes: [], connections: [] }; for (e = 0; e < this.shapes.length; e++)(i = this.shapes[e]).options.serializable && n.shapes.push(i.options); for (e = 0; e < this.connections.length; e++)t = this.connections[e], n.connections.push(z({}, t.options, t.toJSON())); return n }, focus: function () { if (!this.element.is(kendo._activeElement())) { var e, t = this.element, i = t[0], n = [], o = [], r = document.documentElement; do { (i = i.parentNode).scrollHeight > i.clientHeight && (n.push(i), o.push(i.scrollTop)) } while (i != r); for (t.focus(), e = 0; e < n.length; e++)n[e].scrollTop = o[e]; return !0 } }, load: function (e) { this.clear(), this.setOptions(e), this._createShapes(), this._createConnections() }, setOptions: function (e) { z(this.options, e) }, clear: function () { var e = this; e.select(!1), e.mainLayer.clear(), e._shapesQuadTree.clear(), e._initialize() }, connect: function (e, t, i) { var n, o; return this.connectionsDataSource && this._isEditable ? (o = this.connectionsDataSource.add({}), (n = this._connectionsDataMap[o.uid]).source(e), n.target(t), n.redraw(i), n.updateModel()) : (n = new b(e, t, z({}, this.options.connectionDefaults, i)), this.addConnection(n)), n }, connected: function (e, t) { var i, n; for (i = 0; i < this.connections.length; i++)if ((n = this.connections[i]).from == e && n.to == t) return !0; return !1 }, addConnection: function (e, t) { return !1 !== t && this.undoRedoService.add(new I.AddConnectionUnit(e, this), !1), e.diagram = this, e._setOptionsFromModel(), e.refresh(), this.mainLayer.append(e.visual), this.connections.push(e), this.trigger(ke, { added: [e], removed: [] }), e }, _addConnection: function (e, t) { var i, n = this.connectionsDataSource; if (n && this._isEditable) { if (i = u(n, c(e.dataItem)), e.dataItem = i, e.updateModel(), !this.trigger("add", { connection: e })) return this._connectionsDataMap[i.uid] = e, n.add(i), this.addConnection(e, t), e._updateConnectors(), e } else if (!this.trigger("add", { connection: e })) return this.addConnection(e, t), e._updateConnectors(), e }, addShape: function (e, t) { var i, n = this.options.shapeDefaults; if (e instanceof _) i = e; else { if (e instanceof kendo.Class) return; n = z({}, n, e || {}), i = new _(n, this) } return !1 !== t && this.undoRedoService.add(new I.AddShapeUnit(i, this), !1), this.shapes.push(i), i.diagram !== this && (this._shapesQuadTree.insert(i), i.diagram = this), this.mainLayer.append(i.visual), this.trigger(ke, { added: [i], removed: [] }), i }, _addShape: function (e, t) { var i, n, o = this.dataSource; if (o && this._isEditable) { if (i = u(o, c(e.dataItem)), e.dataItem = i, e.updateModel(), !this.trigger("add", { shape: e })) return this.dataSource.add(i), (n = this._inactiveShapeItems.getByUid(i.uid)).element = e, n.undoable = t, e } else if (!this.trigger("add", { shape: e })) return this.addShape(e, t) }, remove: function (e, t) { var i, n, o, r; for (e = pe(e) ? e.slice(0) : [e], i = d(e), n = i.shapes, o = i.connections, fe(t) || (t = !0), t && this.undoRedoService.begin(), this._suspendModelRefresh(), r = n.length - 1; r >= 0; r--)this._removeItem(n[r], t, o); for (r = o.length - 1; r >= 0; r--)this._removeItem(o[r], t); this._resumeModelRefresh(), t && this.undoRedoService.commit(!1), this.trigger(ke, { added: [], removed: e }) }, _removeShapeDataItem: function (e) { this._isEditable && (this.dataSource.remove(e.dataItem), delete this._dataMap[e.dataItem.id]) }, _removeConnectionDataItem: function (e) { this._isEditable && (this.connectionsDataSource.remove(e.dataItem), delete this._connectionsDataMap[e.dataItem.uid]) }, _triggerRemove: function (e) { var t, i, n, o, r = []; for (o = 0; o < e.length; o++)t = e[o], n = t.options.editable, i = t instanceof _ ? { shape: t } : { connection: t }, n && !1 !== n.remove && !this.trigger("remove", i) && r.push(t); return r }, undo: function () { this.undoRedoService.undo() }, redo: function () { this.undoRedoService.redo() }, select: function (e, t) { if (!he(e)) return this._selectedItems; var i, n, o = (t = z({ addToSelection: !1 }, t)).addToSelection, r = [], s = []; for (o || this.deselect(), this._internalSelection = !0, e instanceof Array ? r = e : e instanceof g && (r = [e]), i = 0; i < r.length; i++)(n = r[i]).select(!0) && s.push(n); this._selectionChanged(s, []), this._internalSelection = !1 }, selectAll: function () { this.select(this.shapes.concat(this.connections)) }, selectArea: function (e) { var t, i, n, o; if (this._internalSelection = !0, o = [], e instanceof q) for (i = this.shapes.concat(this.connections), t = 0; t < i.length; t++)n = i[t], e && !n._hitTest(e) || !n.options.enable || n.select(!0) && o.push(n); this._selectionChanged(o, []), this._internalSelection = !1 }, deselect: function (e) { this._internalSelection = !0; var t, i, n = [], o = []; for (e instanceof Array ? o = e : e instanceof g ? o.push(e) : he(e) || (o = this._selectedItems.slice(0)), i = 0; i < o.length; i++)(t = o[i]).select(!1) && n.push(t); this._selectionChanged([], n), this._internalSelection = !1 }, toFront: function (e, t) { var i, n, r; e || (e = this._selectedItems.slice()), i = this._getDiagramItems(e), !fe(t) || t ? (n = o(this.mainLayer, i.visuals), r = new le(this, e, n), this.undoRedoService.add(r)) : (this.mainLayer.toFront(i.visuals), this._fixOrdering(i, !0)) }, toBack: function (e, t) { var i, n, r; e || (e = this._selectedItems.slice()), i = this._getDiagramItems(e), !fe(t) || t ? (n = o(this.mainLayer, i.visuals), r = new ae(this, e, n), this.undoRedoService.add(r)) : (this.mainLayer.toBack(i.visuals), this._fixOrdering(i, !1)) }, bringIntoView: function (e, t) { var i, n, o, r, s = this.viewport(), a = new I.RectAlign(s); 0 !== s.width && 0 !== s.height && ("none" == (t = z({ animate: !1, align: "center middle" }, t)).align && (t.align = "center middle"), e instanceof g ? n = e.bounds(Me) : pe(e) ? n = this.boundingBox(e) : e instanceof q && (n = e.clone()), o = n.clone(), n.zoom(this._zoom), (n.width > s.width || n.height > s.height) && (this._zoom = this._getValidZoom(_e.min(s.width / o.width, s.height / o.height)), n = o.clone().zoom(this._zoom)), this._zoomMainLayer(), i = n.clone(), a.align(n, t.align), r = n.topLeft().minus(i.topLeft()), this.pan(r.times(-1), t.animate)) }, alignShapes: function (e) { var t, i, n, o, r, s, a; if (ue(e) && (e = "Left"), 0 !== (t = this.select()).length) { switch (e.toLowerCase()) { case "left": case "top": i = Ee; break; case "right": case "bottom": i = Ie }for (o = 0; o < t.length; o++)if ((n = t[o]) instanceof _) switch (e.toLowerCase()) { case "left": i = _e.min(i, n.options.x); break; case "top": i = _e.min(i, n.options.y); break; case "right": i = _e.max(i, n.options.x); break; case "bottom": i = _e.max(i, n.options.y) }for (r = [], s = [], o = 0; o < t.length; o++)if ((n = t[o]) instanceof _) switch (s.push(n), r.push(n.bounds()), e.toLowerCase()) { case "left": case "right": n.position(new Q(i, n.options.y)); break; case "top": case "bottom": n.position(new Q(n.options.x, i)) }a = new I.TransformUnit(s, r), this.undoRedoService.add(a, !1) } }, zoom: function (e, t) { var i, n, o, r; return e && (i = t ? t.point : new I.Point(0, 0), e = this._zoom = this._getValidZoom(e), ue(i) || (i = new I.Point(_e.round(i.x), _e.round(i.y)), n = i.times(e), o = this.modelToView(i), r = o.minus(n), this._storePan(new I.Point(_e.round(r.x), _e.round(r.y)))), t && (t.zoom = e), this._panTransform(), this.canvas.surface.hideTooltip(), this._updateAdorners()), this._zoom }, _getPan: function (e) { var t = this.canvas; return t.translate || (e = e.plus(this._pan)), e }, pan: function (e, i) { var n, o; return e instanceof Q ? (o = (n = this).scroller, e = (e = n._getPan(e)).times(-1), i ? o.animatedScrollTo(e.x, e.y, function () { n._updateAdorners() }) : (o.scrollTo(e.x, e.y), n._updateAdorners()), t) : this._pan.times(-1) }, viewport: function () { var e = this.element, t = e.width(), i = e.height(); return this.toolBar && (i -= B(this.toolBar.element)), new q(0, 0, t, i) }, copy: function () { var e, t; if (this.options.copy.enabled) for (this._clipboard = [], this._copyOffset = 1, e = 0; e < this._selectedItems.length; e++)t = this._selectedItems[e], this._clipboard.push(t) }, cut: function () { var e, t; if (this.options.copy.enabled) { for (this._clipboard = [], this._copyOffset = 0, e = 0; e < this._selectedItems.length; e++)t = this._selectedItems[e], this._clipboard.push(t); this.remove(this._clipboard, !0) } }, paste: function () { var e, t, i, n, o, r, s, a; if (this._clipboard.length > 0) { for (n = {}, o = d(this._clipboard), r = o.connections, s = o.shapes, a = { x: this._copyOffset * this.options.copy.offsetX, y: this._copyOffset * this.options.copy.offsetY }, this.deselect(), i = 0; i < s.length; i++)e = s[i], t = e.clone(), n[e.id] = t, t.position(new Q(e.options.x + a.x, e.options.y + a.y)), t.diagram = this, (t = this._addShape(t)) && t.select(); for (i = 0; i < r.length; i++)e = r[i], (t = this._addConnection(e.clone())) && (this._updateCopiedConnection(t, e, "source", n, a), this._updateCopiedConnection(t, e, "target", n, a), t.select(!0), t.updateModel()); this._syncChanges(), this._copyOffset += 1 } }, _updateCopiedConnection: function (e, t, i, n, o) { var r, s, a, l = t[i](), c = this; l instanceof v && n[l.shape.id] ? (a = n[l.shape.id], c.getShapeById(a.id) ? e[i](a.getConnector(l.options.name)) : (s = c._inactiveShapeItems.getByUid(a.dataItem.uid)) && (r = function (t) { a = c._dataMap[t.id], e[i](a.getConnector(l.options.name)), e.updateModel() }, c._deferredConnectionUpdates.push(s.onActivate(r)))) : e[i](new Q(t[i + "Point"]().x + o.x, t[i + "Point"]().y + o.y)) }, boundingBox: function (e, t) { var i, n, o, r = q.empty(), s = he(e) ? this._getDiagramItems(e) : { shapes: this.shapes }; if (s.shapes.length > 0) for (n = s.shapes[0], r = n.bounds(Re), o = 1; o < s.shapes.length; o++)n = s.shapes[o], i = n.bounds(Re), !0 === t && (i.x -= n._rotationOffset.x, i.y -= n._rotationOffset.y), r = r.union(i); return r }, _containerOffset: function () { var e = this.element.offset(); return this.toolBar && (e.top += B(this.toolBar.element)), e }, documentToView: function (e) { var t = this._containerOffset(); return new Q(e.x - t.left, e.y - t.top) }, viewToDocument: function (e) { var t = this._containerOffset(); return new Q(e.x + t.left, e.y + t.top) }, viewToModel: function (e) { return this._transformWithMatrix(e, this._matrixInvert) }, modelToView: function (e) { return this._transformWithMatrix(e, this._matrix) }, modelToLayer: function (e) { return this._transformWithMatrix(e, this._layerMatrix) }, layerToModel: function (e) { return this._transformWithMatrix(e, this._layerMatrixInvert) }, documentToModel: function (e) { var t = this.documentToView(e); return this.canvas.translate || (t.x = t.x + this.scroller.scrollLeft, t.y = t.y + this.scroller.scrollTop), this.viewToModel(t) }, modelToDocument: function (e) { return this.viewToDocument(this.modelToView(e)) }, _transformWithMatrix: function (e, t) { var i, n, o = e; return e instanceof Q ? t && (o = t.apply(e)) : (i = this._transformWithMatrix(e.topLeft(), t), n = this._transformWithMatrix(e.bottomRight(), t), o = q.fromPoints(i, n)), o }, setDataSource: function (e) { this.options.dataSource = e, this._dataSource(), this.options.autoBind && this.dataSource.fetch() }, setConnectionsDataSource: function (e) { this.options.connectionsDataSource = e, this._connectionDataSource(), this.options.autoBind && this.connectionsDataSource.fetch() }, layout: function (e) { var t, i, n, o, r; switch (this._layouting = !0, ue(e) && (e = this.options.layout), (t = ue(e) || ue(e.type) ? "Tree" : e.type).toLowerCase()) { case "tree": i = new I.TreeLayout(this); break; case "layered": i = new I.LayeredLayout(this); break; case "forcedirected": case "force": case "spring": case "springembedder": i = new I.SpringLayout(this); break; default: throw "Layout algorithm '" + t + "' is not supported." }n = new I.LayoutState(this), (o = i.layout(e)) && (r = new I.LayoutUndoUnit(n, o, e ? e.animate : null), this.undoRedoService.add(r)), this._layouting = !1, this._redrawConnections() }, getShapeById: function (e) { var t; return (t = re.first(this.shapes, function (t) { return t.visual.id === e })) ? t : t = re.first(this.connections, function (t) { return t.visual.id === e }) }, getShapeByModelId: function (e) { return this._isEditable ? this._dataMap[e] : re.first(this.shapes, function (t) { return (t.dataItem || {}).id === e }) }, getShapeByModelUid: function (e) { return this._isEditable ? re.first(this.shapes, function (t) { return (t.dataItem || {}).uid === e }) : this._dataMap[e] }, getConnectionByModelId: function (e) { var t; return this.connectionsDataSource && (t = re.first(this.connections, function (t) { return (t.dataItem || {}).id === e })), t }, getConnectionByModelUid: function (e) { var t; return this.connectionsDataSource && (t = this._connectionsDataMap[e]), t }, _extendLayoutOptions: function (e) { e.layout && (e.layout = z({}, I.LayoutBase.fn.defaultOptions || {}, e.layout)) }, _selectionChanged: function (e, t) { (e.length || t.length) && this.trigger("select", { selected: e, deselected: t }) }, _getValidZoom: function (e) { return _e.min(_e.max(e, this.options.zoomMin), this.options.zoomMax) }, _panTransform: function (e) { var t = this, i = e || t._pan; t.canvas.translate ? (t.scroller.scrollTo(i.x, i.y), t._zoomMainLayer()) : (t._storePan(i), t._transformMainLayer()) }, _finishPan: function () { this.trigger("pan", { total: this._pan, delta: Number.NaN }) }, _storePan: function (e) { this._pan = e, this._storeViewMatrix() }, _zoomMainLayer: function () { var e = this._zoom, t = new W(0, 0, e, e); t.render(this.mainLayer), this._storeLayerMatrix(t), this._storeViewMatrix() }, _transformMainLayer: function () { var e = this._pan, t = this._zoom, i = new W(e.x, e.y, t, t); i.render(this.mainLayer), this._storeLayerMatrix(i), this._storeViewMatrix() }, _storeLayerMatrix: function (e) { this._layerMatrix = e.toMatrix(), this._layerMatrixInvert = e.invert().toMatrix() }, _storeViewMatrix: function () { var e = this._pan, t = this._zoom, i = new W(e.x, e.y, t, t); this._matrix = i.toMatrix(), this._matrixInvert = i.invert().toMatrix() }, _toIndex: function (e, t) { var i = this._getDiagramItems(e); this.mainLayer.toIndex(i.visuals, t), this._fixOrdering(i, !1) }, _fixOrdering: function (e, t) { var i, n, o = t ? this.shapes.length - 1 : 0, r = t ? this.connections.length - 1 : 0; for (i = 0; i < e.shapes.length; i++)n = e.shapes[i], re.remove(this.shapes, n), re.insert(this.shapes, n, o); for (i = 0; i < e.cons.length; i++)n = e.cons[i], re.remove(this.connections, n), re.insert(this.connections, n, r) }, _getDiagramItems: function (e) { var t, i, n = {}, o = e; for (n.visuals = [], n.shapes = [], n.cons = [], e ? pe(e) || (o = [e]) : o = this._selectedItems.slice(), t = 0; t < o.length; t++)(i = o[t]) instanceof _ ? (n.shapes.push(i), n.visuals.push(i.visual)) : i instanceof b && (n.cons.push(i), n.visuals.push(i.visual)); return n }, _removeItem: function (e, t, i) { e.select(!1), e instanceof _ ? (this._removeShapeDataItem(e), this._removeShape(e, t, i)) : e instanceof b && (this._removeConnectionDataItem(e), this._removeConnection(e, t)), this.mainLayer.remove(e.visual) }, _removeShape: function (e, t, i) { var n, o, r, s, a = [], l = []; for (this.toolService._removeHover(), t && this.undoRedoService.addCompositeItem(new G(e)), re.remove(this.shapes, e), this._shapesQuadTree.remove(e), n = 0; n < e.connectors.length; n++)for (r = e.connectors[n], s = 0; s < r.connections.length; s++)o = r.connections[s], i && D.inArray(o, i) || (o.sourceConnector == r ? a.push(o) : o.targetConnector == r && l.push(o)); for (n = 0; n < a.length; n++)a[n].source(null, t), a[n].updateModel(); for (n = 0; n < l.length; n++)l[n].target(null, t), l[n].updateModel() }, _removeConnection: function (e, t) { e.sourceConnector && re.remove(e.sourceConnector.connections, e), e.targetConnector && re.remove(e.targetConnector.connections, e), t && this.undoRedoService.addCompositeItem(new $(e)), re.remove(this.connections, e) }, _removeDataItems: function (e, t) { var i, n, o, r; for (e = pe(e) ? e : [e]; e.length;)if (i = e.shift(), (o = this._dataMap[i.uid]) && (this._removeShapeConnections(o), this._removeItem(o, !1), delete this._dataMap[i.uid], t && i.hasChildren && i.loaded())) for (n = i.children.data(), r = 0; r < n.length; r++)e.push(n[r]) }, _removeShapeConnections: function (e) { var t, i = e.connections(); if (i) for (t = 0; t < i.length; t++)this._removeItem(i[t], !1) }, _addDataItem: function (e, t) { var i, n; if (fe(e)) return (i = this._dataMap[e.id]) ? i : ((n = z({}, this.options.shapeDefaults)).dataItem = e, i = new _(n, this), this.addShape(i, !1 !== t), this._dataMap[e.id] = i, i) }, _addDataItemByUid: function (e) { var t, i; if (fe(e)) return (t = this._dataMap[e.uid]) ? t : ((i = z({}, this.options.shapeDefaults)).dataItem = e, t = new _(i, this), this.addShape(t), this._dataMap[e.uid] = t, t) }, _addDataItems: function (e, t) { var i, n, o, r; for (n = 0; n < e.length; n++)i = e[n], o = this._addDataItemByUid(i), (r = this._addDataItemByUid(t)) && !this.connected(r, o) && this.connect(r, o) }, _refreshSource: function (e) { var t, i, n = this, o = e.node, r = e.action, s = e.items, a = n.options; if (e.field) for (t = 0; t < s.length; t++)this._dataMap[s[t].uid] && this._dataMap[s[t].uid].redrawVisual(); else { if ("remove" == r) this._removeDataItems(e.items, !0); else for (r && "itemloaded" !== r || this._bindingRoots || (this._bindingRoots = !0, i = !0), r || o || n.clear(), this._addDataItems(s, o), t = 0; t < s.length; t++)s[t].load(); a.layout && (i || "remove" == r || "add" == r) && n.layout(a.layout), i && (this.trigger("dataBound"), this._bindingRoots = !1) } }, _addItem: function (e) { e instanceof _ ? this.addShape(e) : e instanceof b && this.addConnection(e) }, _createToolBar: function (e) { var t, i, n, o, r, s, a, l, c = this.toolService.diagram; this.singleToolBar || 1 !== c.select().length || (t = c.select()[0]) && !1 !== t.options.editable && (i = t.options.editable, n = i.tools, this._isEditable && 0 === n.length && (t instanceof _ ? n = ["edit", "rotateClockwise", "rotateAnticlockwise"] : t instanceof b && (n = ["edit"]), i && !1 !== i.remove && n.push("delete")), n && n.length && (20, this.singleToolBar = new y(c, { tools: n, click: F(this._toolBarClick, this), modal: !0 }), r = P(this.singleToolBar._popup.element), s = B(this.singleToolBar._popup.element), t instanceof _ ? (a = this.modelToView(t.bounds(Re)), o = new Q(a.x, a.y).minus(new Q((r - a.width) / 2, s + 20))) : t instanceof b && (l = this.modelToView(t.bounds()), o = new Q(l.x, l.y).minus(new Q((r - l.width - 20) / 2, s + 20))), o ? (this.canvas.translate || (o = o.minus(new Q(this.scroller.scrollLeft, this.scroller.scrollTop))), o = this.viewToDocument(o), o = new Q(_e.max(o.x, 0), _e.max(o.y, 0)), this.singleToolBar.showAt(o), e && this.singleToolBar._popup.one("close", p)) : this._destroyToolBar())) }, _toolBarClick: function (e) { this.trigger("toolBarClick", e), this._destroyToolBar() }, _normalizePointZoom: function (e) { return e.times(1 / this.zoom()) }, _initialize: function () { this.shapes = [], this._selectedItems = [], this.connections = [], this._dataMap = {}, this._connectionsDataMap = {}, this._inactiveShapeItems = new l, this._deferredConnectionUpdates = [], this.undoRedoService = new J({ undone: this._syncHandler, redone: this._syncHandler }), this.id = I.randomId() }, _fetchFreshData: function () { var e = this; e._dataSource(), e._isEditable && e._connectionDataSource(), e.options.autoBind && (e._isEditable ? (this._loadingShapes = !0, this._loadingConnections = !0, e.dataSource.fetch(), e.connectionsDataSource.fetch()) : e.dataSource.fetch()) }, _dataSource: function () { var e, t; fe(this.options.connectionsDataSource) ? (this._isEditable = !0, e = this.options.dataSource || {}, t = pe(e) ? { data: e } : e, this.dataSource && this._shapesRefreshHandler ? this.dataSource.unbind("change", this._shapesRefreshHandler).unbind("requestStart", this._shapesRequestStartHandler).unbind("error", this._shapesErrorHandler) : (this._shapesRefreshHandler = F(this._refreshShapes, this), this._shapesRequestStartHandler = F(this._shapesRequestStart, this), this._shapesErrorHandler = F(this._error, this)), this.dataSource = kendo.data.DataSource.create(t).bind("change", this._shapesRefreshHandler).bind("requestStart", this._shapesRequestStartHandler).bind("error", this._shapesErrorHandler)) : (this._treeDataSource(), this._isEditable = !1) }, _connectionDataSource: function () { var e, t = this.options.connectionsDataSource; t && (e = pe(t) ? { data: t } : t, this.connectionsDataSource && this._connectionsRefreshHandler ? this.connectionsDataSource.unbind("change", this._connectionsRefreshHandler).unbind("requestStart", this._connectionsRequestStartHandler).unbind("error", this._connectionsErrorHandler) : (this._connectionsRefreshHandler = F(this._refreshConnections, this), this._connectionsRequestStartHandler = F(this._connectionsRequestStart, this), this._connectionsErrorHandler = F(this._connectionsError, this)), this.connectionsDataSource = kendo.data.DataSource.create(e).bind("change", this._connectionsRefreshHandler).bind("requestStart", this._connectionsRequestStartHandler).bind("error", this._connectionsErrorHandler)) }, _shapesRequestStart: function (e) { "read" == e.type && (this._loadingShapes = !0) }, _connectionsRequestStart: function (e) { "read" == e.type && (this._loadingConnections = !0) }, _error: function () { this._loadingShapes = !1 }, _connectionsError: function () { this._loadingConnections = !1 }, _refreshShapes: function (e) { "remove" === e.action ? this._shouldRefresh() && this._removeShapes(e.items) : "itemchange" === e.action ? this._shouldRefresh() && this._updateShapes(e.items, e.field) : "add" === e.action ? this._inactiveShapeItems.add(e.items) : "sync" === e.action ? this._syncShapes(e.items) : this.refresh() }, _shouldRefresh: function () { return !this._suspended }, _suspendModelRefresh: function () { this._suspended = (this._suspended || 0) + 1 }, _resumeModelRefresh: function () { this._suspended = _e.max((this._suspended || 0) - 1, 0) }, refresh: function () { this._loadingShapes = !1, this._loadingConnections || this._rebindShapesAndConnections() }, _rebindShapesAndConnections: function () { this.clear(), this._addShapes(this.dataSource.view()), this.connectionsDataSource && this._addConnections(this.connectionsDataSource.view(), !1), this.options.layout ? this.layout(this.options.layout) : this._redrawConnections(), this.trigger("dataBound") }, refreshConnections: function () { this._loadingConnections = !1, this._loadingShapes || this._rebindShapesAndConnections() }, _redrawConnections: function () { var e, t = this.connections; for (e = 0; e < t.length; e++)t[e].refresh() }, _removeShapes: function (e) { var t, i, n = this._dataMap; for (i = 0; i < e.length; i++)t = e[i], n[t.id] && (this.remove(n[t.id], !1), n[t.id] = null) }, _syncShapes: function () { var e = this, t = e._inactiveShapeItems; t.forEach(function (i) { var n = i.dataItem, o = i.element; n.isNew() || (o ? (o._setOptionsFromModel(), e.addShape(o, i.undoable), e._dataMap[n.id] = o) : e._addDataItem(n), i.activate(), t.remove(n)) }) }, _updateShapes: function (e, t) { var i, n, o; for (i = 0; i < e.length; i++)n = e[i], (o = this._dataMap[n.id]) && o.updateOptionsFromModel(n, t) }, _addShapes: function (e) { for (var t = 0; t < e.length; t++)this._addDataItem(e[t], !1) }, _refreshConnections: function (e) { "remove" === e.action ? this._shouldRefresh() && this._removeConnections(e.items) : "add" === e.action ? this._addConnections(e.items) : "sync" === e.action || ("itemchange" === e.action ? this._shouldRefresh() && this._updateConnections(e.items) : this.refreshConnections()) }, _removeConnections: function (e) { for (var t = 0; t < e.length; t++)this.remove(this._connectionsDataMap[e[t].uid], !1), this._connectionsDataMap[e[t].uid] = null }, _updateConnections: function (e) { var t, i; for (t = 0; t < e.length; t++)i = e[t], this._connectionsDataMap[i.uid].updateOptionsFromModel(i) }, _addConnections: function (e, t) { var i, n, o = e.length; for (i = 0; i < o; i++)n = e[i], this._addConnectionDataItem(n, t) }, _addConnectionDataItem: function (e, t) { var i, n, o, r; this._connectionsDataMap[e.uid] || (i = this._validateConnector(e.from), fe(i) && null !== i || (i = new Q(e.fromX, e.fromY)), n = this._validateConnector(e.to), fe(n) && null !== n || (n = new Q(e.toX, e.toY)), fe(i) && fe(n) && ((o = z({}, this.options.connectionDefaults)).dataItem = e, r = new b(i, n, o), this._connectionsDataMap[e.uid] = r, this.addConnection(r, t))) }, _validateConnector: function (e) { var t; return fe(e) && null !== e && (t = this._dataMap[e]), t }, _treeDataSource: function () { var e = this, t = e.options, i = t.dataSource; if ((i = pe(i) ? { data: i } : i) instanceof kendo.data.DataSource && !(i instanceof kendo.data.HierarchicalDataSource)) throw Error("Incorrect DataSource type. If a single dataSource instance is set to the diagram then it should be a HierarchicalDataSource. You should set only the options instead of an instance or a HierarchicalDataSource instance or supply connectionsDataSource as well."); i.fields || (i.fields = [{ field: "text" }, { field: "url" }, { field: "spriteCssClass" }, { field: "imageUrl" }]), e.dataSource && e._refreshHandler && e._unbindDataSource(), e._refreshHandler = F(e._refreshSource, e), e._errorHandler = F(e._error, e), e.dataSource = H.create(i).bind(ke, e._refreshHandler).bind("error", e._errorHandler) }, _unbindDataSource: function () { var e = this; e.dataSource.unbind(ke, e._refreshHandler).unbind("error", e._errorHandler) }, _adorn: function (e, i) { i !== t && e && (i ? (this._adorners.push(e), this.adornerLayer.append(e.visual)) : (re.remove(this._adorners, e), this.adornerLayer.remove(e.visual))) }, _showConnectors: function (e, t) { t ? this._connectorsAdorner.show(e) : this._connectorsAdorner.destroy() }, _updateAdorners: function () { var e, t, i = this._adorners; for (e = 0; e < i.length; e++)(t = i[e]).refreshBounds && t.refreshBounds(), t.refresh() }, _refresh: function () { for (var e = 0; e < this.connections.length; e++)this.connections[e].refresh() }, _destroyToolBar: function () { this.singleToolBar && (this.singleToolBar.hide(), this.singleToolBar.destroy(), this.singleToolBar = null) }, _destroyGlobalToolBar: function () { this.toolBar && (this.toolBar.hide(), this.toolBar.destroy(), this.toolBar = null) }, exportDOMVisual: function () { var e = this.canvas._viewBox, t = E.transform().translate(-e.x, -e.y), i = new E.Rect([0, 0], [e.width, e.height]), n = A.Path.fromRect(i), o = new A.Group({ transform: t }), r = new A.Group({ clip: n }), s = this.canvas.drawingElement.children[0]; return r.append(o), o.children.push(s), r }, exportVisual: function () { var e = E.transform().scale(1 / this._zoom), t = new A.Group({ transform: e }), i = this.mainLayer.drawingElement; return t.children.push(i), t }, _syncChanges: function () { this._syncShapeChanges(), this._syncConnectionChanges() }, _syncShapeChanges: function () { this.dataSource && this._isEditable && this.dataSource.sync() }, _syncConnectionChanges: function () { var t = this; t.connectionsDataSource && t._isEditable && (e.when.apply(e, t._deferredConnectionUpdates).then(function () { t.connectionsDataSource.sync() }), t.deferredConnectionUpdates = []) } }), D.ExportMixin.extend(w.fn, !0), kendo.PDFMixin && kendo.PDFMixin.extend(w.fn), y = kendo.Observable.extend({ init: function (e, t) { kendo.Observable.fn.init.call(this), this.diagram = e, this.options = z({}, this.options, t), this._tools = [], this.createToolBar(), this.createTools(), this.appendTools(), this.options.modal && this.createPopup(), this.bind(this.events, t) }, events: ["click"], createPopup: function () { this.container = e("<div/>").append(this.element), this._popup = this.container.kendoPopup({}).getKendoPopup() }, appendTools: function () { var e, t; for (e = 0; e < this._tools.length; e++)((t = this._tools[e]).buttons && t.buttons.length || !fe(t.buttons)) && this._toolBar.add(t) }, createToolBar: function () { this.element = e("<div/>"), this._toolBar = this.element.kendoToolBar({ click: F(this.click, this), resizable: !1 }).getKendoToolBar(), this.element.css("border", "none") }, createTools: function () { for (var e = 0; e < this.options.tools.length; e++)this.createTool(this.options.tools[e]) }, createTool: function (e) { ve(e) || (e = { name: e }); var t = e.name + "Tool"; this[t] ? this[t](e) : this._tools.push(z({}, e, { attributes: this._setAttributes({ action: e.name }) })) }, showAt: function (e) { this._popup && this._popup.open(e.x, e.y) }, hide: function () { this._popup && this._popup.close() }, newGroup: function () { return { type: "buttonGroup", buttons: [] } }, editTool: function () { this._tools.push({ icon: "edit", showText: "overflow", type: "button", text: "Edit", attributes: this._setAttributes({ action: "edit" }) }) }, deleteTool: function () { this._tools.push({ icon: "close", showText: "overflow", type: "button", text: "Delete", attributes: this._setAttributes({ action: "delete" }) }) }, rotateAnticlockwiseTool: function (e) { this._appendGroup("rotate"), this._rotateGroup.buttons.push({ icon: "rotate-left", showText: "overflow", text: "RotateAnticlockwise", group: "rotate", attributes: this._setAttributes({ action: "rotateAnticlockwise", step: e.step }) }) }, rotateClockwiseTool: function (e) { this._appendGroup("rotate"), this._rotateGroup.buttons.push({ icon: "rotate-right", attributes: this._setAttributes({ action: "rotateClockwise", step: e.step }), showText: "overflow", text: "RotateClockwise", group: "rotate" }) }, createShapeTool: function () { this._appendGroup("create"), this._createGroup.buttons.push({ icon: "shape", showText: "overflow", text: "CreateShape", group: "create", attributes: this._setAttributes({ action: "createShape" }) }) }, createConnectionTool: function () { this._appendGroup("create"), this._createGroup.buttons.push({ icon: "connector", showText: "overflow", text: "CreateConnection", group: "create", attributes: this._setAttributes({ action: "createConnection" }) }) }, undoTool: function () { this._appendGroup("history"), this._historyGroup.buttons.push({ icon: "undo", showText: "overflow", text: "Undo", group: "history", attributes: this._setAttributes({ action: "undo" }) }) }, redoTool: function () { this._appendGroup("history"), this._historyGroup.buttons.push({ icon: "redo", showText: "overflow", text: "Redo", group: "history", attributes: this._setAttributes({ action: "redo" }) }) }, _appendGroup: function (e) { var t = "_" + e + "Group"; this[t] || (this[t] = this.newGroup(), this._tools.push(this[t])) }, _setAttributes: function (e) { var t = {}; return e.action && (t[kendo.attr("action")] = e.action), e.step && (t[kendo.attr("step")] = e.step), t }, _getAttributes: function (e) { var t, i = {}, n = e.attr(kendo.attr("action")); return n && (i.action = n), (t = e.attr(kendo.attr("step"))) && (i.step = t), i }, click: function (t) { var i = this._getAttributes(e(t.target)), n = i.action; n && this[n] && this[n](i), this.trigger("click", this.eventData(n, t.target)) }, eventData: function (e, t) { var i, n, o = this.selectedElements(), r = o.length, s = [], a = []; for (n = 0; n < r; n++)(i = o[n]) instanceof _ ? s.push(i) : a.push(i); return { shapes: s, connections: a, action: e, target: t } }, delete: function () { var e = this.diagram, t = e._triggerRemove(this.selectedElements()); t.length && (this.diagram.remove(t, !0), this.diagram._syncChanges()) }, edit: function () { var e = this.selectedElements(); 1 === e.length && this.diagram.edit(e[0]) }, rotateClockwise: function (e) { var t = parseFloat(e.step || 90); this._rotate(t) }, rotateAnticlockwise: function (e) { var t = parseFloat(e.step || 90); this._rotate(-t) }, _rotate: function (e) { var t = this.diagram._resizingAdorner; t.angle(t.angle() + e), t.rotate() }, selectedElements: function () { return this.diagram.select() }, createShape: function () { this.diagram.createShape() }, createConnection: function () { this.diagram.createConnection() }, undo: function () { this.diagram.undo() }, redo: function () { this.diagram.redo() }, destroy: function () { this.diagram = null, this.element = null, this.options = null, this._toolBar && this._toolBar.destroy(), this._popup && this._popup.destroy() } }), k = kendo.Observable.extend({ init: function (e, t) { kendo.Observable.fn.init.call(this), this.options = L(!0, {}, this.options, t), this.element = e, this.model = this.options.model, this.fields = this._getFields(), this._initContainer(), this.createEditable() }, options: { editors: {} }, _initContainer: function () { this.wrapper = this.element }, createEditable: function () { var e = this.options; this.editable = new kendo.ui.Editable(this.wrapper, { fields: this.fields, target: e.target, clearContainer: !1, model: this.model }) }, _isEditable: function (e) { return this.model.editable && this.model.editable(e) }, _getFields: function () { var e, t, i, n = [], o = this.model.fields; for (e in o) t = {}, this._isEditable(e) && ((i = this.options.editors[e]) && (t.editor = i), t.field = e, n.push(t)); return n }, end: function () { return this.editable.end() }, destroy: function () { this.editable.destroy(), this.editable.element.find("[" + kendo.attr("container-for") + "]").empty(), this.model = this.wrapper = this.element = this.columns = this.editable = null } }), x = k.extend({ init: function (e, t) { k.fn.init.call(this, e, t), this.bind(this.events, this.options), this.open() }, events: ["update", "cancel"], options: { window: { modal: !0, resizable: !1, draggable: !0, title: "Edit", visible: !1 } }, _initContainer: function () { var t, i = this; this.wrapper = e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"), this.model.uid), t = "", this.options.template ? (t += this._renderTemplate(), this.fields = []) : t += this._renderFields(), t += this._renderButtons(), this.wrapper.append(e('<div class="k-edit-form-container"/>').append(t)), this.window = new kendo.ui.Window(this.wrapper.appendTo(this.element), this.options.window), this.window.bind("close", function (e) { e.userTriggered && (e.sender.element.focus(), i._cancelClick(e)) }), this._attachButtonEvents() }, _renderTemplate: function () { var e = this.options.template; return "string" == typeof e && (e = window.unescape(e)), e = kendo.template(e)(this.model) }, _renderFields: function () { var e, t, i = ""; for (e = 0; e < this.fields.length; e++)t = this.fields[e], i += '<div class="k-edit-label"><label for="' + t.field + '">' + (t.field || "") + "</label></div>", this._isEditable(t.field) && (i += "<div " + kendo.attr("container-for") + '="' + t.field + '" class="k-edit-field"></div>'); return i }, _renderButtons: function () { var e = '<div class="k-edit-buttons k-state-default">'; return e += this._createButton("update"), e += this._createButton("cancel"), e += "</div>" }, _createButton: function (e) { return kendo.template('<a class="k-button k-button-icontext #=className#" href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>')(m[e]) }, _attachButtonEvents: function () { this._cancelClickHandler = F(this._cancelClick, this), this.window.element.on(xe + be, "a.k-diagram-cancel", this._cancelClickHandler), this._updateClickHandler = F(this._updateClick, this), this.window.element.on(xe + be, "a.k-diagram-update", this._updateClickHandler) }, _updateClick: function (e) { e.preventDefault(), this.trigger("update") }, _cancelClick: function (e) { e.preventDefault(), this.trigger("cancel") }, open: function () { this.window.center().open() }, close: function () { this.window.bind("deactivate", F(this.destroy, this)).close() }, destroy: function () { this.window.close().destroy(), this.window.element.off(xe + be, "a.k-diagram-cancel", this._cancelClickHandler), this.window.element.off(xe + be, "a.k-diagram-update", this._updateClickHandler), this._cancelClickHandler = null, this._editUpdateClickHandler = null, this.window = null, k.fn.destroy.call(this) } }), a.fn = a.prototype = { onActivate: function (t) { var i = e.Deferred(); return this.callbacks.push({ callback: t, deferred: i }), i }, activate: function () { var e, t, i = this.callbacks; for (t = 0; t < i.length; t++)(e = this.callbacks[t]).callback(this.dataItem), e.deferred.resolve(); this.callbacks = [] } }, l.fn = l.prototype = { add: function (e) { for (var t = 0; t < e.length; t++)this.items[e[t].uid] = new a(e[t]) }, forEach: function (e) { for (var t in this.items) e(this.items[t]) }, getByUid: function (e) { return this.items[e] }, remove: function (e) { delete this.items[e.uid] } }, C = R.extend({ init: function () { this.shapes = [] }, _add: function (e, t) { this.shapes.push({ bounds: t, shape: e }), e._quadNode = this }, insert: function (e, t) { this._add(e, t) }, remove: function (e) { var t, i = this.shapes, n = i.length; for (t = 0; t < n; t++)if (i[t].shape === e) { i.splice(t, 1); break } }, hitTestRect: function (e, t) { var i, n = this.shapes, o = n.length; for (i = 0; i < o; i++)if (this._testRect(n[i].shape, e) && !D.inArray(n[i].shape, t)) return !0 }, _testRect: function (e, t) { var i = e.rotate().angle, n = e.bounds(); return i ? X.rects(t, n, -i) : n.overlaps(t) } }), S = C.extend({ init: function (e) { C.fn.init.call(this), this.children = [], this.rect = e }, inBounds: function (e) { var t = this.rect, i = t.bottomRight(), n = e.bottomRight(), o = t.x <= e.x && t.y <= e.y && n.x <= i.x && n.y <= i.y; return o }, overlapsBounds: function (e) { return this.rect.overlaps(e) }, insert: function (e, t) { var i, n = !1, o = this.children, r = o.length; if (this.inBounds(t)) { if (!r && this.shapes.length < 4) this._add(e, t); else { for (r || this._initChildren(), i = 0; i < o.length; i++)if (o[i].insert(e, t)) { n = !0; break } n || this._add(e, t) } n = !0 } return n }, _initChildren: function () { var e, t, i = this.rect, n = this.children, o = this.shapes, r = i.center(), s = i.width / 2, a = i.height / 2; for (n.push(new S(new q(i.x, i.y, s, a)), new S(new q(r.x, i.y, s, a)), new S(new q(i.x, r.y, s, a)), new S(new q(r.x, r.y, s, a))), t = o.length - 1; t >= 0; t--)for (e = 0; e < n.length; e++)if (n[e].insert(o[t].shape, o[t].bounds)) { o.splice(t, 1); break } }, hitTestRect: function (e, t) { var i, n = this.children, o = n.length, r = !1; if (this.overlapsBounds(e)) if (C.fn.hitTestRect.call(this, e, t)) r = !0; else for (i = 0; i < o; i++)if (n[i].hitTestRect(e, t)) { r = !0; break } return r } }), T = R.extend({ ROOT_SIZE: 1e3, init: function (e) { var t = F(this._boundsChange, this); e.bind(ye, t), e.bind(Te, t), this.initRoots() }, initRoots: function () { this.rootMap = {}, this.root = new C }, clear: function () { this.initRoots() }, _boundsChange: function (e) { e.item._quadNode && e.item._quadNode.remove(e.item), this.insert(e.item) }, insert: function (e) { var t = e.bounds(Re), i = this.ROOT_SIZE, n = this.getSectors(t), o = n[0][0], r = n[1][0]; this.inRoot(n) ? this.root.insert(e, t) : (this.rootMap[o] || (this.rootMap[o] = {}), this.rootMap[o][r] || (this.rootMap[o][r] = new S(new q(o * i, r * i, i, i))), this.rootMap[o][r].insert(e, t)) }, remove: function (e) { e._quadNode && e._quadNode.remove(e) }, inRoot: function (e) { return e[0].length > 1 || e[1].length > 1 }, getSectors: function (e) { var t, i, n = this.ROOT_SIZE, o = e.bottomRight(), r = _e.floor(o.x / n), s = _e.floor(o.y / n), a = [[], []]; for (t = _e.floor(e.x / n); t <= r; t++)a[0].push(t); for (i = _e.floor(e.y / n); i <= s; i++)a[1].push(i); return a }, hitTestRect: function (e, t) { var i, n, o, r, s, a = this.getSectors(e); if (this.root.hitTestRect(e, t)) return !0; for (i = 0; i < a[0].length; i++)for (o = a[0][i], n = 0; n < a[1].length; n++)if (r = a[1][n], (s = (this.rootMap[o] || {})[r]) && s.hitTestRect(e, t)) return !0; return !1 } }), D.ui.plugin(w), z(I, { Shape: _, Connection: b, Connector: v, DiagramToolBar: y, QuadNode: S, QuadRoot: C, ShapesQuadTree: T, PopupEditor: x }) }(window.kendo.jQuery) }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.diagram.min", ["kendo.data.min", "kendo.draganddrop.min", "kendo.userevents.min", "kendo.mobile.scroller.min", "kendo.drawing.min", "dataviz/diagram/utils.min", "dataviz/diagram/math.min", "dataviz/diagram/svg.min", "dataviz/diagram/services.min", "dataviz/diagram/layout.min", "dataviz/diagram/dom.min"], function () { return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.treemap.min", ["kendo.data.min", "kendo.userevents.min", "kendo.dataviz.themes.min"], function () { return function (e, t) { function i(e, t) { if (null === t) return t; var i = x(e, !0); return i(t) } function n(e) { return typeof e !== I } function o(e, t, i) { var n, o, l = a(e), c = a(t), u = d(e) - d(t) < 0, h = []; for (h.push(e), n = 0; n < i; n++)o = { r: r(l.r, c.r, n, i, u), g: r(l.g, c.g, n, i, u), b: r(l.b, c.b, n, i, u) }, h.push(s(o)); return h.push(t), h } function r(e, t, i, n, o) { var r = h.min(h.abs(e), h.abs(t)), s = h.max(h.abs(e), h.abs(t)), a = (s - r) / (n + 1), l = a * (i + 1); return o ? r + l : s - l } function s(e) { return "#" + l(e.r) + l(e.g) + l(e.b) } function a(e) { var t = function (e) { var t = e.length, i = {}; return 3 === t ? (i.r = e[0], i.g = e[1], i.b = e[2]) : (i.r = e.substring(0, 2), i.g = e.substring(2, 4), i.b = e.substring(4, 6)), i }(e = e.replace("#", "")); return { r: c(t.r), g: c(t.g), b: c(t.b) } } function l(e) { var t = h.round(e).toString(16).toUpperCase(); return 1 === t.length && (t = "0" + t), t } function c(e) { return parseInt(e.toString(16), 16) } function d(e) { var t = 0; return e && (e = a(e), t = h.sqrt(.241 * e.r * e.r + .691 * e.g * e.g + .068 * e.b * e.b)), t } function u(e) { var t = h.pow(10, 4); return h.round(e * t) / t } var h = Math, f = e.proxy, p = e.isArray, m = window.kendo, g = m._outerHeight, v = m._outerWidth, _ = m.Class, b = m.ui.Widget, w = m.template, y = m.deepExtend, k = m.data.HierarchicalDataSource, x = m.getter, C = m.dataviz, S = ".kendoTreeMap", T = "change", D = "dataBound", A = "itemCreated", E = Number.MAX_VALUE, I = "undefined", M = b.extend({ init: function (t, i) { m.destroy(t), e(t).empty(), b.fn.init.call(this, t, i), this.wrapper = this.element, this._initTheme(this.options), this.element.addClass("k-widget k-treemap"), this._setLayout(), this._originalOptions = y({}, this.options), this._initDataSource(), this._attachEvents(), m.notify(this, C.ui) }, options: { name: "TreeMap", theme: "default", autoBind: !0, textField: "text", valueField: "value", colorField: "color" }, events: [D, A], _initTheme: function (e) { var t = C.ui.themes || {}, i = ((e || {}).theme || "").toLowerCase(), n = (t[i] || {}).treeMap; this.options = y({}, n, e) }, _attachEvents: function () { this.element.on("mouseover.kendoTreeMap", f(this._mouseover, this)).on("mouseleave.kendoTreeMap", f(this._mouseleave, this)), this._resizeHandler = f(this.resize, this, !1), m.onResize(this._resizeHandler) }, _setLayout: function () { "horizontal" === this.options.type ? (this._layout = new z(!1), this._view = new P(this, this.options)) : "vertical" === this.options.type ? (this._layout = new z(!0), this._view = new P(this, this.options)) : (this._layout = new R, this._view = new F(this, this.options)) }, _initDataSource: function () { var e = this, t = e.options, i = t.dataSource; e._dataChangeHandler = f(e._onDataChange, e), e.dataSource = k.create(i).bind(T, e._dataChangeHandler), i && e.options.autoBind && e.dataSource.fetch() }, setDataSource: function (e) { var t = this; t.dataSource.unbind(T, t._dataChangeHandler), t.dataSource = e.bind(T, t._dataChangeHandler), e && t.options.autoBind && t.dataSource.fetch() }, _onDataChange: function (e) { var t, i, n, o, r = e.node, s = e.items, a = this.options; if (r) { if (s.length) { for ((n = this._getByUid(r.uid)).children = [], s = new m.data.Query(s)._sortForGrouping(a.valueField, "desc"), i = 0; i < s.length; i++)t = s[i], n.children.push(this._wrapItem(t)); o = this._view.htmlSize(n), this._layout.compute(n.children, n.coord, o), this._setColors(n.children), this._view.render(n) } } else this._cleanItems(), this.element.empty(), t = this._wrapItem(s[0]), this._layout.createRoot(t, v(this.element), g(this.element), "vertical" === this.options.type), this._view.createRoot(t), this._root = t, this._colorIdx = 0; for (i = 0; i < s.length; i++)s[i].load(); r && this.trigger(D, { node: r }) }, _cleanItems: function () { var e = this; e.angular("cleanup", function () { return { elements: e.element.find(".k-leaf div,.k-treemap-title,.k-treemap-title-vertical") } }) }, _setColors: function (e) { var t, i, r, s, a = this.options.colors, l = this._colorIdx, c = a[l % a.length]; for (p(c) && (t = o(c[0], c[1], e.length)), r = !1, s = 0; s < e.length; s++)n((i = e[s]).color) || (i.color = t ? t[s] : c), i.dataItem.hasChildren || (r = !0); r && this._colorIdx++ }, _contentSize: function (e) { this.view.renderHeight(e) }, _wrapItem: function (e) { var t = {}; return n(this.options.valueField) && (t.value = i(this.options.valueField, e)), n(this.options.colorField) && (t.color = i(this.options.colorField, e)), n(this.options.textField) && (t.text = i(this.options.textField, e)), t.level = e.level(), t.dataItem = e, t }, _getByUid: function (e) { for (var t, i = [this._root]; i.length;) { if ((t = i.pop()).dataItem.uid === e) return t; t.children && (i = i.concat(t.children)) } }, dataItem: function (t) { var i = e(t).attr(m.attr("uid")), n = this.dataSource; return n && n.getByUid(i) }, findByUid: function (e) { return this.element.find(".k-treemap-tile[" + m.attr("uid") + "='" + e + "']") }, _mouseover: function (t) { var i = e(t.target); i.hasClass("k-leaf") && (this._removeActiveState(), i.removeClass("k-state-hover").addClass("k-state-hover")) }, _removeActiveState: function () { this.element.find(".k-state-hover").removeClass("k-state-hover") }, _mouseleave: function () { this._removeActiveState() }, destroy: function () { b.fn.destroy.call(this), this.element.off(S), this.dataSource && this.dataSource.unbind(T, this._dataChangeHandler), this._root = null, m.unbindResize(this._resizeHandler), m.destroy(this.element) }, items: function () { return e() }, getSize: function () { return m.dimensions(this.element) }, _resize: function () { var e, t, i = this._root; i && (e = this.element, t = e.children(), i.coord.width = v(e), i.coord.height = g(e), t.css({ width: i.coord.width, height: i.coord.height }), this._resizeItems(i, t)) }, _resizeItems: function (e, t) { var i, n, o, r; if (e.children && e.children.length) for (i = t.children(".k-treemap-wrap").children(), this._layout.compute(e.children, e.coord, { text: this._view.titleSize(e, t) }), r = 0; r < e.children.length; r++)n = e.children[r], o = i.filter("[" + m.attr("uid") + "='" + n.dataItem.uid + "']"), this._view.setItemSize(n, o), this._resizeItems(n, o) }, setOptions: function (e) { var i = e.dataSource; e.dataSource = t, this._originalOptions = y(this._originalOptions, e), this.options = y({}, this._originalOptions), this._setLayout(), this._initTheme(this.options), b.fn._setEvents.call(this, e), i && this.setDataSource(k.create(i)), this.options.autoBind && this.dataSource.fetch() } }), R = _.extend({ createRoot: function (e, t, i) { e.coord = { width: t, height: i, top: 0, left: 0 } }, leaf: function (e) { return !e.children }, layoutChildren: function (e, t) { var i, n, o, r, s = t.width * t.height, a = 0, l = []; for (i = 0; i < e.length; i++)l[i] = parseFloat(e[i].value), a += l[i]; for (i = 0; i < l.length; i++)e[i].area = s * l[i] / a; n = this.layoutHorizontal() ? t.height : t.width, o = [e[0]], r = e.slice(1), this.squarify(r, o, n, t) }, squarify: function (e, t, i, n) { this.computeDim(e, t, i, n) }, computeDim: function (e, i, n, o) { var r, s, a; return e.length + i.length == 1 ? (r = 1 == e.length ? e : i, this.layoutLast(r, n, o), t) : (e.length >= 2 && 0 === i.length && (i = [e[0]], e = e.slice(1)), 0 === e.length ? (i.length > 0 && this.layoutRow(i, n, o), t) : (s = e[0], this.worstAspectRatio(i, n) >= this.worstAspectRatio([s].concat(i), n) ? this.computeDim(e.slice(1), i.concat([s]), n, o) : (a = this.layoutRow(i, n, o), this.computeDim(e, [], a.dim, a)), t)) }, layoutLast: function (e, t, i) { e[0].coord = i }, layoutRow: function (e, t, i) { return this.layoutHorizontal() ? this.layoutV(e, t, i) : this.layoutH(e, t, i) }, orientation: "h", layoutVertical: function () { return "v" === this.orientation }, layoutHorizontal: function () { return "h" === this.orientation }, layoutChange: function () { this.orientation = this.layoutVertical() ? "h" : "v" }, worstAspectRatio: function (e, t) { var i, n, o, r, s; if (!e || 0 === e.length) return E; for (i = 0, n = 0, o = E, r = 0; r < e.length; r++)s = e[r].area, i += s, o = o < s ? o : s, n = n > s ? n : s; return h.max(t * t * n / (i * i), i * i / (t * t * o)) }, compute: function (e, t, i) { if (t.width >= t.height && this.layoutHorizontal() || this.layoutChange(), e && e.length > 0) { var n = { width: t.width, height: t.height - i.text, top: 0, left: 0 }; this.layoutChildren(e, n) } }, layoutV: function (e, t, i) { var n, o, r, s = this._totalArea(e), a = 0; for (t = u(s / t), n = 0; n < e.length; n++)o = u(e[n].area / t), e[n].coord = { height: o, width: t, top: i.top + a, left: i.left }, a += o; return (r = { height: i.height, width: i.width - t, top: i.top, left: i.left + t }).dim = h.min(r.width, r.height), r.dim != r.height && this.layoutChange(), r }, layoutH: function (e, t, i) { var n, o, r = this._totalArea(e), s = u(r / t), a = i.top, l = 0; for (n = 0; n < e.length; n++)e[n].coord = { height: s, width: u(e[n].area / s), top: a, left: i.left + l }, l += e[n].coord.width; return (o = { height: i.height - s, width: i.width, top: i.top + s, left: i.left }).dim = h.min(o.width, o.height), o.dim != o.width && this.layoutChange(), o }, _totalArea: function (e) { var t, i = 0; for (t = 0; t < e.length; t++)i += e[t].area; return i } }), F = _.extend({ init: function (t, i) { this.options = y({}, this.options, i), this.treeMap = t, this.element = e(t.element), this.offset = 0 }, titleSize: function (e, t) { var i = t.children(".k-treemap-title"); return i.height() }, htmlSize: function (e) { var t, i = this._getByUid(e.dataItem.uid), n = { text: 0 }; return e.children && (this._clean(i), this._getText(e) && (t = this._createTitle(e), i.append(t), this._compile(t, e.dataItem), n.text = t.height()), i.append(this._createWrap()), this.offset = (v(i) - i.innerWidth()) / 2), n }, _compile: function (e, t) { this.treeMap.angular("compile", function () { return { elements: e, data: [{ dataItem: t }] } }) }, _getByUid: function (e) { return this.element.find(".k-treemap-tile[" + m.attr("uid") + "='" + e + "']") }, render: function (e) { var t, i, n, o, r = this._getByUid(e.dataItem.uid), s = e.children; if (s) for (t = r.find(".k-treemap-wrap"), i = 0; i < s.length; i++)n = s[i], o = this._createLeaf(n), t.append(o), this._compile(o.children(), n.dataItem), this.treeMap.trigger(A, { element: o }) }, createRoot: function (e) { var t = this._createLeaf(e); this.element.append(t), this._compile(t.children(), e.dataItem), this.treeMap.trigger(A, { element: t }) }, _clean: function (e) { this.treeMap.angular("cleanup", function () { return { elements: e.children(":not(.k-treemap-wrap)") } }), e.css("background-color", ""), e.removeClass("k-leaf"), e.removeClass("k-inverse"), e.empty() }, _createLeaf: function (t) { return this._createTile(t).css("background-color", t.color).addClass("k-leaf").toggleClass("k-inverse", this._tileColorBrightness(t) > 180).append(e("<div></div>").html(this._getText(t))) }, _createTile: function (t) { var i = e("<div class='k-treemap-tile'></div>"); return this.setItemSize(t, i), n(t.dataItem) && n(t.dataItem.uid) && i.attr(m.attr("uid"), t.dataItem.uid), i }, _itemCoordinates: function (e) { var t = { width: e.coord.width, height: e.coord.height, left: e.coord.left, top: e.coord.top }; return t.width += t.left && this.offset ? 2 * this.offset : this.offset, t.height += t.top ? 2 * this.offset : this.offset, t }, setItemSize: function (e, t) { var i = this._itemCoordinates(e); t.css({ width: i.width, height: i.height, left: i.left, top: i.top }) }, _getText: function (e) { var t = e.text; return this.options.template && (t = this._renderTemplate(e)), t }, _renderTemplate: function (e) { var t = w(this.options.template); return t({ dataItem: e.dataItem, text: e.text }) }, _createTitle: function (t) { return e("<div class='k-treemap-title'></div>").append(e("<div></div>").html(this._getText(t))) }, _createWrap: function () { return e("<div class='k-treemap-wrap'></div>") }, _tileColorBrightness: function (e) { return d(e.color) } }), z = _.extend({ createRoot: function (e, t, i, n) { e.coord = { width: t, height: i, top: 0, left: 0 }, e.vertical = n }, init: function (e) { this.vertical = e, this.quotient = e ? 1 : 0 }, compute: function (e, t, i) { var n, o, r; e.length > 0 && (n = t.width, o = t.height, this.vertical ? o -= i.text : n -= i.text, r = { width: n, height: o, top: 0, left: 0 }, this.layoutChildren(e, r)) }, layoutChildren: function (e, t) { var i, n, o = t.width * t.height, r = 0, s = []; for (i = 0; i < e.length; i++)n = e[i], s[i] = parseFloat(e[i].value), r += s[i], n.vertical = this.vertical; for (i = 0; i < s.length; i++)e[i].area = o * s[i] / r; this.sliceAndDice(e, t) }, sliceAndDice: function (e, t) { var i = this._totalArea(e); e[0].level % 2 === this.quotient ? this.layoutHorizontal(e, t, i) : this.layoutVertical(e, t, i) }, layoutHorizontal: function (e, t, i) { var n, o, r, s = 0; for (n = 0; n < e.length; n++)o = e[n], r = o.area / (i / t.width), o.coord = { height: t.height, width: r, top: t.top, left: t.left + s }, s += r }, layoutVertical: function (e, t, i) { var n, o, r, s = 0; for (n = 0; n < e.length; n++)o = e[n], r = o.area / (i / t.height), o.coord = { height: r, width: t.width, top: t.top + s, left: t.left }, s += r }, _totalArea: function (e) { var t, i = 0; for (t = 0; t < e.length; t++)i += e[t].area; return i } }), P = F.extend({ htmlSize: function (e) { var t, i = this._getByUid(e.dataItem.uid), n = { text: 0, offset: 0 }; return e.children && (this._clean(i), this._getText(e) && (t = this._createTitle(e), i.append(t), this._compile(t, e.dataItem), n.text = e.vertical ? t.height() : t.width()), i.append(this._createWrap()), this.offset = (v(i) - i.innerWidth()) / 2), n }, titleSize: function (e, t) { return e.vertical ? t.children(".k-treemap-title").height() : t.children(".k-treemap-title-vertical").width() }, _createTitle: function (t) { return e(t.vertical ? "<div class='k-treemap-title'></div>" : "<div class='k-treemap-title-vertical'></div>").append(e("<div></div>").html(this._getText(t))) } }); C.ui.plugin(M) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.dataviz.min", ["kendo.core.min", "kendo.fx.min", "kendo.router.min", "kendo.view.min", "kendo.data.odata.min", "kendo.data.xml.min", "kendo.data.min", "kendo.data.signalr.min", "kendo.binder.min", "kendo.userevents.min", "kendo.draganddrop.min", "kendo.mobile.scroller.min", "kendo.popup.min", "kendo.tooltip.min", "kendo.drawing.min", "kendo.dataviz.core.min", "kendo.dataviz.themes.min", "kendo.dataviz.chart.min", "kendo.dataviz.gauge.min", "kendo.dataviz.barcode.min", "kendo.dataviz.qrcode.min", "kendo.dataviz.stock.min", "kendo.dataviz.sparkline.min", "kendo.dataviz.map.min", "kendo.dataviz.diagram.min", "kendo.dataviz.treemap.min", "kendo.angular.min"], function () { "bundle all"; return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.modalview.min", ["kendo.mobile.shim.min", "kendo.mobile.view.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.mobile.ui, n = i.Shim, o = i.Widget, r = "beforeOpen", s = "open", a = "close", l = "init", c = i.View.extend({ init: function (e, t) { var i = this; o.fn.init.call(i, e, t), i._id(), i._wrap(), i._shim(), this.options.$angular || (i._layout(), i._scroller(), i._model()), i.element.css("display", ""), i.trigger(l) }, events: [l, r, s, a], options: { name: "ModalView", modal: !0, width: null, height: null }, destroy: function () { o.fn.destroy.call(this), this.shim.destroy() }, open: function (t) { var i = this; i.target = e(t), i.shim.show(), i._invokeNgController(), i.trigger("show", { view: i }) }, openFor: function (e) { this.trigger(r, { target: e }) || (this.open(e), this.trigger(s, { target: e })) }, close: function () { this.element.is(":visible") && !this.trigger(a) && this.shim.hide() }, _wrap: function () { var e, t, i = this, n = i.element, o = i.options; e = n[0].style.width || "auto", t = n[0].style.height || "auto", n.addClass("km-modalview").wrap('<div class="km-modalview-wrapper" />'), i.wrapper = n.parent().css({ width: o.width || e || 300, height: o.height || t || 300 }).addClass("auto" == t ? " km-auto-height" : ""), n.css({ width: "", height: "" }) }, _shim: function () { var e = this; e.shim = new n(e.wrapper, { modal: e.options.modal, position: "center center", align: "center center", effect: "fade:in", className: "km-modalview-root", hide: function (t) { e.trigger(a) && t.preventDefault() } }) } }), i.plugin(c), window.kendo; var e, t, i, n, o, r, s, a, l, c }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.drawer.min", ["kendo.mobile.view.min", "kendo.userevents.min"], function () { return e = window.kendo.jQuery, i = window.kendo, n = i.mobile, o = i.support.mobileOS, r = i.effects.Transition, s = i.roleSelector, a = "x", l = n.ui, c = !(o.ios && 7 == o.majorVersion && !o.appMode), d = "beforeShow", u = "init", h = "show", f = "hide", p = "afterHide", m = { enable: e.noop }, g = l.View.extend({ init: function (t, o) { var r, a, l, d, h; if (e(t).parent().prepend(t), n.ui.Widget.fn.init.call(this, t, o), this.options.$angular || (this._layout(), this._scroller()), this._model(), r = this.element.closest(s("pane")).data("kendoMobilePane")) this.pane = r, this.pane.bind("viewShow", function (e) { d._viewShow(e) }), this.pane.bind("sameViewRequested", function () { d.hide() }), a = this.userEvents = new i.UserEvents(r.element, { fastTap: !0, filter: s("view splitview"), allowSelection: !0 }); else { if (this.currentView = m, !(l = e(this.options.container))) throw Error("The drawer needs a container configuration option set."); a = this.userEvents = new i.UserEvents(l, { fastTap: !0, allowSelection: !0 }), this._attachTransition(l) } d = this, h = function (e) { d.visible && (d.hide(), e.preventDefault()) }, this.options.swipeToOpen && c ? (a.bind("press", function () { d.transition.cancel() }), a.bind("start", function (e) { d._start(e) }), a.bind("move", function (e) { d._update(e) }), a.bind("end", function (e) { d._end(e) }), a.bind("tap", h)) : a.bind("press", h), this.leftPositioned = "left" === this.options.position, this.visible = !1, this.element.hide().addClass("km-drawer").addClass(this.leftPositioned ? "km-left-drawer" : "km-right-drawer"), this.trigger(u) }, options: { name: "Drawer", position: "left", views: [], swipeToOpenViews: [], swipeToOpen: !0, title: "", container: null }, events: [d, f, p, u, h], show: function () { this._activate() && this._show() }, hide: function () { this.currentView && (this.currentView.enable(), g.current = null, this._moveViewTo(0), this.trigger(f, { view: this })) }, openFor: function () { this.visible ? this.hide() : this.show() }, destroy: function () { l.View.fn.destroy.call(this), this.userEvents.destroy() }, _activate: function () { if (this.visible) return !0; var e = this._currentViewIncludedIn(this.options.views); return !(!e || this.trigger(d, { view: this }) || (this._setAsCurrent(), this.element.show(), this.trigger(h, { view: this }), this._invokeNgController(), 0)) }, _currentViewIncludedIn: function (t) { if (!this.pane || !t.length) return !0; var i = this.pane.view(); return e.inArray(i.id.replace("#", ""), t) > -1 || e.inArray(i.element.attr("id"), t) > -1 }, _show: function () { this.currentView.enable(!1), this.visible = !0; var e = this.element.width(); this.leftPositioned || (e = -e), this._moveViewTo(e) }, _setAsCurrent: function () { g.last !== this && (g.last && g.last.element.hide(), this.element.show()), g.last = this, g.current = this }, _moveViewTo: function (e) { this.userEvents.cancel(), this.transition.moveTo({ location: e, duration: 400, ease: r.easeOutExpo }) }, _viewShow: function (e) { return this.currentView && this.currentView.enable(), this.currentView === e.view ? (this.hide(), t) : (this.currentView = e.view, this._attachTransition(e.view.element), t) }, _attachTransition: function (e) { var t = this, n = this.movable, o = n && n.x; this.transition && (this.transition.cancel(), this.movable.moveAxis("x", 0)), n = this.movable = new i.ui.Movable(e), this.transition = new r({ axis: a, movable: this.movable, onEnd: function () { 0 === n.x && (e[0].style.cssText = "", t.element.hide(), t.trigger(p), t.visible = !1) } }), o && (e.addClass("k-fx-hidden"), i.animationFrame(function () { e.removeClass("k-fx-hidden"), t.movable.moveAxis(a, o), t.hide() })) }, _start: function (e) { var n, o, r, s, a, l = e.sender; return Math.abs(e.x.velocity) < Math.abs(e.y.velocity) || i.triggeredByInput(e.event) || !this._currentViewIncludedIn(this.options.swipeToOpenViews) ? (l.cancel(), t) : (n = this.leftPositioned, o = this.visible, r = n && o || !n && !g.current, s = !n && o || n && !g.current, a = e.x.velocity < 0, (r && a || s && !a) && this._activate() ? (l.capture(), t) : (l.cancel(), t)) }, _update: function (e) { var t, i = this.movable, n = i.x + e.x.delta; t = this.leftPositioned ? Math.min(Math.max(0, n), this.element.width()) : Math.max(Math.min(0, n), -this.element.width()), this.movable.moveAxis(a, t), e.event.preventDefault(), e.event.stopPropagation() }, _end: function (e) { var t = e.x.velocity, i = Math.abs(this.movable.x) > this.element.width() / 2; (this.leftPositioned ? t > -.8 && (t > .8 || i) : t < .8 && (t < -.8 || i)) ? this._show() : this.hide() } }), l.plugin(g), window.kendo; var e, t, i, n, o, r, s, a, l, c, d, u, h, f, p, m, g }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.splitview.min", ["kendo.mobile.pane.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.mobile.ui, n = i.Widget, o = i.View, r = o.extend({ init: function (o, r) { var s, a, l = this; n.fn.init.call(l, o, r), o = l.element, e.extend(l, r), l._id(), l.options.$angular ? l._overlay() : (l._layout(), l._overlay()), l._style(), a = o.children(l._locate("modalview")), l.options.$angular ? a.each(function (i, n) { t.compileMobileDirective(e(n), r.$angular[0]) }) : t.mobile.init(a), l.panes = [], l._paramsHistory = [], l.options.$angular ? (l.element.children(t.directiveSelector("pane")).each(function () { s = t.compileMobileDirective(e(this), r.$angular[0]), l.panes.push(s) }), l.element.children(t.directiveSelector("header footer")).each(function () { t.compileMobileDirective(e(this), r.$angular[0]) })) : l.content.children(t.roleSelector("pane")).each(function () { s = t.initWidget(this, {}, i.roles), l.panes.push(s) }), l.expandedPaneShim = e("<div class='km-expanded-pane-shim' />").appendTo(l.element), l._shimUserEvents = new t.UserEvents(l.expandedPaneShim, { fastTap: !0, tap: function () { l.collapsePanes() } }) }, _locate: function (e) { return this.options.$angular ? t.directiveSelector(e) : t.roleSelector(e) }, options: { name: "SplitView", style: "horizontal" }, expandPanes: function () { this.element.addClass("km-expanded-splitview") }, collapsePanes: function () { this.element.removeClass("km-expanded-splitview") }, _layout: function () { var e = this, i = e.element; e.transition = t.attrValue(i, "transition"), t.mobile.ui.View.prototype._layout.call(this), t.mobile.init(this.header.add(this.footer)), e.element.addClass("km-splitview"), e.content.addClass("km-split-content") }, _style: function () { var t, i = this.options.style, n = this.element; i && (t = i.split(" "), e.each(t, function () { n.addClass("km-split-" + this) })) }, showStart: function () { var t = this; t.element.css("display", ""), t.inited ? this._invokeNgController() : (t.inited = !0, e.each(t.panes, function () { this.options.initial ? this.navigateToInitial() : this.navigate("") }), t.trigger("init", { view: t })), t.trigger("show", { view: t }) } }), i.plugin(r), window.kendo; var e, t, i, n, o, r }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.application.min", ["kendo.mobile.pane.min", "kendo.router.min"], function () { return function (e, t) { function i(e) { return u.wp ? "-kendo-landscape" == e.css("animation-name") : Math.abs(window.orientation) / 90 == 1 } function n(e) { return i(e) ? v : f } function o(e) { e.parent().addBack().css("min-height", window.innerHeight) } function r() { e("meta[name=viewport]").remove(), I.append(b({ height: ", width=device-width" + (i() ? ", height=" + window.innerHeight + "px" : l.mobileOS.flatVersion >= 600 && l.mobileOS.flatVersion < 700 ? ", height=" + window.innerWidth + "px" : ", height=device-height") })) } var s = window.kendo, a = s.mobile, l = s.support, c = a.ui.Widget, d = a.ui.Pane, u = l.mobileOS, h = "blackberry" == u.device && u.flatVersion >= 600 && u.flatVersion < 1e3 && u.appMode, f = "km-vertical", p = "chrome" === u.browser, m = u.ios && u.flatVersion >= 700 && u.flatVersion < 800 && (u.appMode || p), g = Math.abs(window.orientation) / 90 == 1, v = "km-horizontal", _ = { ios7: { ios: !0, browser: "default", device: "iphone", flatVersion: "700", majorVersion: "7", minorVersion: "0.0", name: "ios", tablet: !1 }, ios: { ios: !0, browser: "default", device: "iphone", flatVersion: "612", majorVersion: "6", minorVersion: "1.2", name: "ios", tablet: !1 }, android: { android: !0, browser: "default", device: "android", flatVersion: "442", majorVersion: "4", minorVersion: "4.2", name: "android", tablet: !1 }, blackberry: { blackberry: !0, browser: "default", device: "blackberry", flatVersion: "710", majorVersion: "7", minorVersion: "1.0", name: "blackberry", tablet: !1 }, meego: { meego: !0, browser: "default", device: "meego", flatVersion: "850", majorVersion: "8", minorVersion: "5.0", name: "meego", tablet: !1 }, wp: { wp: !0, browser: "default", device: "wp", flatVersion: "800", majorVersion: "8", minorVersion: "0.0", name: "wp", tablet: !1 } }, b = s.template('<meta content="initial-scale=#: data.scale #, maximum-scale=#: data.scale #, user-scalable=no#=data.height#" name="viewport" />', { usedWithBlock: !1 }), w = s.template('<meta name="apple-mobile-web-app-capable" content="#= data.webAppCapable === false ? \'no\' : \'yes\' #" /> <meta name="apple-mobile-web-app-status-bar-style" content="#=data.statusBarStyle#" /> <meta name="msapplication-tap-highlight" content="no" /> ', { usedWithBlock: !1 }), y = s.template("<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>", { usedWithBlock: !1 }), k = u.android && "chrome" != u.browser || u.blackberry, x = s.template('<link rel="apple-touch-icon' + (u.android ? "-precomposed" : "") + '" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />', { usedWithBlock: !1 }), C = ("iphone" == u.device || "ipod" == u.device) && u.majorVersion < 7, S = ("iphone" == u.device || "ipod" == u.device) && u.majorVersion >= 7, T = S ? "none" : null, D = "mobilesafari" == u.browser ? 60 : 0, A = e(window), E = window.screen, I = e("head"), M = "init", R = e.proxy, F = c.extend({ init: function (t, i) { a.application = this, e(e.proxy(this, "bootstrap", t, i)) }, bootstrap: function (t, i) { var n, o, r; (t = e(t))[0] || (t = e(document.body)), c.fn.init.call(this, t, i), this.element.removeAttr("data-" + s.ns + "role"), this._setupPlatform(), this._attachMeta(), this._setupElementClass(), this._attachHideBarHandlers(), delete (n = e.extend({}, this.options)).name, o = this, r = function () { o.pane = new d(o.element, n), o.pane.navigateToInitial(), o.options.updateDocumentTitle && o._setupDocumentTitle(), o._startHistory(), o.trigger(M) }, this.options.$angular ? setTimeout(r) : r() }, options: { name: "Application", hideAddressBar: !0, browserHistory: !0, historyTransition: T, modelScope: window, statusBarStyle: "black", transition: "", retina: !1, platform: null, skin: null, updateDocumentTitle: !0, useNativeScrolling: !1 }, events: [M], navigate: function (e, t) { this.pane.navigate(e, t) }, replace: function (e, t) { this.pane.replace(e, t) }, scroller: function () { return this.view().scroller }, hideLoading: function () { if (!this.pane) throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler."); this.pane.hideLoading() }, showLoading: function () { if (!this.pane) throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler."); this.pane.showLoading() }, changeLoadingMessage: function (e) { if (!this.pane) throw Error("The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler."); this.pane.changeLoadingMessage(e) }, view: function () { return this.pane.view() }, skin: function (e) { var t = this; return arguments.length ? (t.options.skin = e || "", t.element[0].className = "km-pane", t._setupPlatform(), t._setupElementClass(), t.options.skin) : t.options.skin }, destroy: function () { c.fn.destroy.call(this), this.pane.destroy(), this.options.browserHistory && this.router.destroy() }, _setupPlatform: function () { var t = this, i = t.options.platform, n = t.options.skin, o = [], r = u || _.ios7; i && (r.setDefaultPlatform = !0, "string" == typeof i ? (o = i.split("-"), r = e.extend({ variant: o[1] }, r, _[o[0]])) : r = i), n && (o = n.split("-"), u || (r.setDefaultPlatform = !1), r = e.extend({}, r, { skin: o[0], variant: o[1] })), r.variant || (r.noVariantSet = !0, r.variant = "dark"), t.os = r, t.osCssClass = function (e, t) { var i = []; return u && i.push("km-on-" + u.name), i.push(e.skin ? "km-" + e.skin : "ios" == e.name && e.majorVersion > 6 ? "km-ios7" : "km-" + e.name), ("ios" == e.name && e.majorVersion < 7 || "ios" != e.name) && i.push("km-" + e.name + e.majorVersion), i.push("km-" + e.majorVersion), i.push("km-m" + (e.minorVersion ? e.minorVersion[0] : 0)), e.variant && (e.skin && e.skin === e.name || !e.skin || !1 === e.setDefaultPlatform) && i.push("km-" + (e.skin ? e.skin : e.name) + "-" + e.variant), e.cordova && i.push("km-cordova"), i.push(e.appMode ? "km-app" : "km-web"), t && t.statusBarStyle && i.push("km-" + t.statusBarStyle + "-status-bar"), i.join(" ") }(t.os, t.options), "wp" == r.name && (t.refreshBackgroundColorProxy || (t.refreshBackgroundColorProxy = e.proxy(function () { (t.os.variant && t.os.skin && t.os.skin === t.os.name || !t.os.skin) && t.element.removeClass("km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force").addClass(function (t) { return "km-wp-" + (t.noVariantSet ? 0 === parseInt(e("<div style='background: Background' />").css("background-color").split(",")[1], 10) ? "dark" : "light" : t.variant + " km-wp-" + t.variant + "-force") }(t.os)) }, t)), e(document).off("visibilitychange", t.refreshBackgroundColorProxy), e(document).off("resume", t.refreshBackgroundColorProxy), r.skin || (t.element.parent().css("overflow", "hidden"), e(document).on("visibilitychange", t.refreshBackgroundColorProxy), e(document).on("resume", t.refreshBackgroundColorProxy), t.refreshBackgroundColorProxy())) }, _startHistory: function () { this.options.browserHistory ? (this.router = new s.Router({ pushState: this.options.pushState, root: this.options.root, hashBang: this.options.hashBang }), this.pane.bindToRouter(this.router), this.router.start()) : this.options.initial || this.pane.navigate("") }, _resizeToScreenHeight: function () { var t, n = e("meta[name=apple-mobile-web-app-status-bar-style]").attr("content").match(/black-translucent|hidden/), o = this.element; t = p ? window.innerHeight : i(o) ? n ? g ? E.availWidth + 20 : E.availWidth : g ? E.availWidth : E.availWidth - 20 : n ? g ? E.availHeight : E.availHeight + 20 : g ? E.availHeight - 20 : E.availHeight, o.height(t) }, _setupElementClass: function () { var t, i = this, a = i.element; a.parent().addClass("km-root km-" + (i.os.tablet ? "tablet" : "phone")), a.addClass(i.osCssClass + " " + n(a)), this.options.useNativeScrolling && a.parent().addClass("km-native-scrolling"), p && a.addClass("km-ios-chrome"), l.wpDevicePixelRatio && a.parent().css("font-size", l.wpDevicePixelRatio + "em"), this.options.retina && (a.parent().addClass("km-retina"), a.parent().css("font-size", .93 * l.devicePixelRatio + "em")), h && r(), i.options.useNativeScrolling ? a.parent().addClass("km-native-scrolling") : k && (t = (screen.availWidth > screen.availHeight ? screen.availWidth : screen.availHeight) + 200, e(y({ width: t, height: t })).appendTo(I)), m && i._resizeToScreenHeight(), s.onResize(function () { a.removeClass("km-horizontal km-vertical").addClass(n(a)), i.options.useNativeScrolling && o(a), m && i._resizeToScreenHeight(), h && r(), s.resize(a) }) }, _clearExistingMeta: function () { I.find("meta").filter("[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']").remove() }, _attachMeta: function () { var e, t = this.options, i = t.icon; if (this._clearExistingMeta(), h || I.prepend(b({ height: "", scale: this.options.retina ? 1 / l.devicePixelRatio : "1.0" })), I.prepend(w(t)), i) for (e in "string" == typeof i && (i = { "": i }), i) I.prepend(x({ icon: i[e], size: e })); t.useNativeScrolling && o(this.element) }, _attachHideBarHandlers: function () { var e = this, t = R(e, "_hideBar"); !l.mobileOS.appMode && e.options.hideAddressBar && C && !e.options.useNativeScrolling && (e._initialHeight = {}, A.on("load", t), s.onResize(function () { setTimeout(window.scrollTo, 0, 0, 1) })) }, _setupDocumentTitle: function () { var e = document.title; this.pane.bind("viewShow", function (t) { var i = t.view.title; document.title = void 0 !== i ? i : e }) }, _hideBar: function () { var t = this.element; t.height(s.support.transforms.css + "calc(100% + " + D + "px)"), e(window).trigger(s.support.resize) } }); s.mobile.Application = F, s.ui.plugin(F, s.mobile, "Mobile") }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.button.min", ["kendo.userevents.min"], function () { return function (e, t) { function i(t, i, n) { e(i.target).closest(".km-button,.km-detail").toggleClass("km-state-active", n), d && t.deactivateTimeoutID && (clearTimeout(t.deactivateTimeoutID), t.deactivateTimeoutID = 0) } function n(t) { return e('<span class="km-badge">' + t + "</span>") } var o = window.kendo, r = o.mobile, s = r.ui, a = s.Widget, l = o.support, c = l.mobileOS, d = c.android && c.flatVersion >= 300, u = "click", h = "disabled", f = a.extend({ init: function (e, t) { var n, r = this; a.fn.init.call(r, e, t), n = "up" === r.options.clickOn, r._wrap(), r._style(), n || r.element.attr("data-navigate-on-press", !0), r.options.enable = r.options.enable && !r.element.attr(h), r.enable(r.options.enable), r._userEvents = new o.UserEvents(r.element, { allowSelection: !n, fastTap: !0, press: function (e) { r._activate(e) }, release: function (e) { i(r, e, !1), n || e.event.stopPropagation() } }), r._userEvents.bind(n ? "tap" : "press", function (e) { r._release(e) }), d && r.element.on("move", function (e) { r._timeoutDeactivate(e) }) }, destroy: function () { a.fn.destroy.call(this), this._userEvents.destroy() }, events: [u], options: { name: "Button", icon: "", style: "", badge: "", clickOn: "up", enable: !0 }, badge: function (e) { var t = this.badgeElement = this.badgeElement || n(e).appendTo(this.element); return e || 0 === e ? (t.html(e), this) : !1 === e ? (t.empty().remove(), this.badgeElement = !1, this) : t.html() }, enable: function (e) { var i = this.element; t === e && (e = !0), this.options.enable = e, e ? i.removeAttr(h) : i.attr(h, h), i.toggleClass("km-state-disabled", !e) }, _timeoutDeactivate: function (e) { this.deactivateTimeoutID || (this.deactivateTimeoutID = setTimeout(i, 500, this, e, !1)) }, _activate: function (e) { var t = document.activeElement, n = t ? t.nodeName : ""; this.options.enable && (i(this, e, !0), "INPUT" != n && "TEXTAREA" != n || t.blur()) }, _release: function (i) { var n = this; if (!(i.which > 1)) return n.options.enable ? (n.trigger(u, { target: e(i.target), button: n.element }) && i.preventDefault(), t) : (i.preventDefault(), t) }, _style: function () { var t, i = this.options.style, n = this.element; i && (t = i.split(" "), e.each(t, function () { n.addClass("km-" + this) })) }, _wrap: function () { var t = this, i = t.options.icon, o = t.options.badge, r = '<span class="km-icon km-' + i, s = t.element.addClass("km-button"), a = s.children("span:not(.km-icon)").addClass("km-text"), l = s.find("img").addClass("km-image"); !a[0] && s.html() && (a = s.wrapInner('<span class="km-text" />').children("span.km-text")), !l[0] && i && (a[0] || (r += " km-notext"), t.iconElement = s.prepend(e(r + '" />'))), (o || 0 === o) && (t.badgeElement = n(o).appendTo(s)) } }), p = f.extend({ options: { name: "BackButton", style: "back" }, init: function (e, i) { var n = this; f.fn.init.call(n, e, i), t === n.element.attr("href") && n.element.attr("href", "#:back") } }), m = f.extend({ options: { name: "DetailButton", style: "" }, init: function (e, t) { f.fn.init.call(this, e, t) }, _style: function () { var t, i = this.options.style + " detail", n = this.element; i && (t = i.split(" "), e.each(t, function () { n.addClass("km-" + this) })) }, _wrap: function () { var t = this.options.icon, i = '<span class="km-icon km-' + t, n = this.element, o = n.children("span"), r = n.find("img").addClass("km-image"); !r[0] && t && (o[0] || (i += " km-notext"), n.prepend(e(i + '" />'))) } }); s.plugin(f), s.plugin(p), s.plugin(m) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.buttongroup.min", ["kendo.core.min"], function () { return function (e, t) { function i(e) { return "k-" + e + " km-" + e } function n(t) { return e('<span class="' + i("badge") + '">' + t + "</span>") } var o = window.kendo, r = o.mobile.ui, s = r.Widget, a = "state-active", l = "state-disabled", c = "select", d = s.extend({ init: function (e, t) { var n = this; s.fn.init.call(n, e, t), n.element.addClass("km-buttongroup k-widget k-button-group").find("li").each(n._button), n.element.on(n.options.selectOn, "li:not(.km-state-active)", "_select"), n._enable = !0, n.select(n.options.index), n.options.enable || (n._enable = !1, n.wrapper.addClass(i(l))) }, events: [c], options: { name: "ButtonGroup", selectOn: "down", index: -1, enable: !0 }, current: function () { return this.element.find(".km-" + a) }, select: function (n) { var o = this, r = -1; n !== t && -1 !== n && o._enable && !e(n).is(".km-" + l) && (o.current().removeClass(i(a)), "number" == typeof n ? (r = n, n = e(o.element[0].children[n])) : n.nodeType && (n = e(n), r = n.index()), n.addClass(i(a)), o.selectedIndex = r) }, badge: function (t, i) { var o, r = this.element; return isNaN(t) || (t = r.children().get(t)), t = r.find(t), o = e(t.children(".km-badge")[0] || n(i).appendTo(t)), i || 0 === i ? (o.html(i), this) : !1 === i ? (o.empty().remove(), this) : o.html() }, enable: function (e) { t === e && (e = !0), this.wrapper.toggleClass(i(l), !e), this._enable = this.options.enable = e }, _button: function () { var t = e(this).addClass(i("button")), r = o.attrValue(t, "icon"), s = o.attrValue(t, "badge"), a = t.children("span"), l = t.find("img").addClass(i("image")); a[0] || (a = t.wrapInner("<span/>").children("span")), a.addClass(i("text")), !l[0] && r && t.prepend(e('<span class="' + i("icon") + " " + i(r) + '"/>')), (s || 0 === s) && n(s).appendTo(t) }, _select: function (e) { e.which > 1 || e.isDefaultPrevented() || !this._enable || (this.select(e.currentTarget), this.trigger(c, { index: this.selectedIndex })) } }); r.plugin(d) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.collapsible.min", ["kendo.core.min"], function () { return e = window.kendo.jQuery, t = window.kendo, i = t.mobile.ui, n = i.Widget, o = "km-collapsed", r = "km-expanded", s = "km-animated", a = "expand", l = "collapse", c = n.extend({ init: function (i, a) { var l = this, c = e(i); n.fn.init.call(l, c, a), c.addClass("km-collapsible"), l._buildHeader(), l.content = c.children().not(l.header).wrapAll("<div data-role='collapsible-content' class='km-collapsible-content'></div>").parent(), l._userEvents = new t.UserEvents(l.header, { fastTap: !0, tap: function () { l.toggle() } }), c.addClass(l.options.collapsed ? o : r), l.options.inset && c.addClass("km-collapsibleinset"), l.options.animation ? (l.content.addClass(s), l.content.height(0), l.options.collapsed && l.content.hide()) : l.options.collapsed && l.content.hide() }, events: [a, l], options: { name: "Collapsible", collapsed: !0, collapseIcon: "arrow-n", expandIcon: "arrow-s", iconPosition: "left", animation: !0, inset: !1 }, destroy: function () { n.fn.destroy.call(this), this._userEvents.destroy() }, expand: function (e) { var i = this.options.collapseIcon, n = this.content, l = t.support.mobileOS.ios; this.trigger(a) || (i && this.header.find(".km-icon").removeClass().addClass("km-icon km-" + i), this.element.removeClass(o).addClass(r), this.options.animation && !e ? (n.off("transitionend"), n.show(), l && n.removeClass(s), n.height(this._getContentHeight()), l && n.addClass(s), t.resize(n)) : n.show()) }, collapse: function (e) { var t = this.options.expandIcon, i = this.content; this.trigger(l) || (t && this.header.find(".km-icon").removeClass().addClass("km-icon km-" + t), this.element.removeClass(r).addClass(o), this.options.animation && !e ? (i.one("transitionend", function () { i.hide() }), i.height(0)) : i.hide()) }, toggle: function (e) { this.isCollapsed() ? this.expand(e) : this.collapse(e) }, isCollapsed: function () { return this.element.hasClass(o) }, resize: function () { !this.isCollapsed() && this.options.animation && this.content.height(this._getContentHeight()) }, _buildHeader: function () { var t = this.element.children(":header").wrapAll("<div data-role='collapsible-header' class='km-collapsible-header'></div>"), i = e('<span class="km-icon"/>'), n = this.options.collapsed ? this.options.expandIcon : this.options.collapseIcon, o = this.options.iconPosition; n && (t.prepend(i), i.addClass("km-" + n)), this.header = t.parent(), this.header.addClass("km-icon-" + o) }, _getContentHeight: function () { var e, t = this.content.attr("style"); return this.content.css({ position: "absolute", visibility: "hidden", height: "auto" }), e = this.content.height(), this.content.attr("style", t || ""), e } }), i.plugin(c), window.kendo; var e, t, i, n, o, r, s, a, l, c }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.listview.min", ["kendo.data.min", "kendo.userevents.min", "kendo.mobile.button.min"], function () { return function (e, t) { function i() { return this.nodeType === g.TEXT_NODE && this.nodeValue.match(H) } function n(e, t) { t && !e[0].querySelector(".km-icon") && e.prepend('<span class="km-icon km-' + t + '"/>') } function o(e) { n(e, S(e, "icon")), n(e, S(e.children(x), "icon")) } function r(e) { var t = e.parent(), o = e.add(t.children(m.roleSelector("detailbutton"))), r = t.contents().not(o).not(i); r.length || (e.addClass("km-listview-link").attr(m.attr("role"), "listview-link"), n(e, S(t, "icon")), n(e, S(e, "icon"))) } function s(t, i) { e(t).css("transform", "translate3d(0px, " + i + "px, 0px)") } var a, l, c, d, u, h, f, p, m = window.kendo, g = window.Node, v = m.mobile, _ = v.ui, b = m._outerHeight, w = m.data.DataSource, y = _.DataBoundWidget, k = ".km-listview-link, .km-listview-label", x = "[" + m.attr("icon") + "]", C = e.proxy, S = m.attrValue, T = "km-group-title", D = m.template('<li><div class="' + T + '"><div class="km-text">#= this.headerTemplate(data) #</div></div><ul>#= kendo.render(this.template, data.items)#</ul></li>'), A = m.template('<form class="km-filter-form"><div class="km-filter-wrap"><input type="search" placeholder="#=placeholder#"/><a href="\\#" class="km-filter-reset" title="Clear"><span class="km-icon km-clear"></span><span class="km-text">Clear</span></a></div></form>'), E = ".kendoMobileListView", I = "styled", M = "dataBound", R = "dataBinding", F = "itemChange", z = "click", P = "change", B = "progress", L = "function", H = /^\s+$/, N = /button/, O = m.Class.extend({ init: function (e) { var t, i, n = e.scroller(); n && (this.options = e.options, this.element = e.element, this.scroller = e.scroller(), this._shouldFixHeaders(), t = this, i = function () { t._cacheHeaders() }, e.bind("resize", i), e.bind(I, i), e.bind(M, i), this._scrollHandler = function (e) { t._fixHeader(e) }, n.bind("scroll", this._scrollHandler)) }, destroy: function () { var e = this; e.scroller && e.scroller.unbind("scroll", e._scrollHandler) }, _fixHeader: function (t) { if (this.fixedHeaders) { var i, n, o, r = 0, s = this.scroller, a = this.headers, l = t.scrollTop; do { if (!(i = a[r++])) { o = e("<div />"); break } n = i.offset, o = i.header } while (n + 1 > l); this.currentHeader != r && (s.fixedContainer.html(o.clone()), this.currentHeader = r) } }, _shouldFixHeaders: function () { this.fixedHeaders = "group" === this.options.type && this.options.fixedHeaders }, _cacheHeaders: function () { if (this._shouldFixHeaders(), this.fixedHeaders) { var t = [], i = this.scroller.scrollTop; this.element.find("." + T).each(function (n, o) { o = e(o), t.unshift({ offset: o.position().top + i, header: o }) }), this.headers = t, this._fixHeader({ scrollTop: i }) } } }), V = function () { return { page: 1 } }, U = m.Class.extend({ init: function (e) { var t = this, i = e.options, n = e.scroller(), o = i.pullParameters || V; this.listView = e, this.scroller = n, e.bind("_dataSource", function (e) { t.setDataSource(e.dataSource) }), n.setOptions({ pullToRefresh: !0, pull: function () { t._pulled || (t._pulled = !0, t.dataSource.read(o.call(e, t._first))) }, messages: { pullTemplate: i.messages.pullTemplate, releaseTemplate: i.messages.releaseTemplate, refreshTemplate: i.messages.refreshTemplate } }) }, setDataSource: function (e) { var t = this; this._first = e.view()[0], this.dataSource = e, e.bind("change", function () { t._change() }), e.bind("error", function () { t._change() }) }, _change: function () { var e, t = this.scroller, i = this.dataSource; this._pulled && t.pullHandled(), !this._pulled && this._first || (e = i.view())[0] && (this._first = e[0]), this._pulled = !1 } }), W = m.Observable.extend({ init: function (e) { var t = this; m.Observable.fn.init.call(t), t.buffer = e.buffer, t.height = e.height, t.item = e.item, t.items = [], t.footer = e.footer, t.buffer.bind("reset", function () { t.refresh() }) }, refresh: function () { for (var e, t, i, n, o = this.buffer, r = this.items, s = !1; r.length;)r.pop().destroy(); for (this.offset = o.offset, e = this.item, n = 0; n < o.viewSize; n++) { if (n === o.total()) { s = !0; break } (i = e(this.content(this.offset + r.length))).below(t), t = i, r.push(i) } this.itemCount = r.length, this.trigger("reset"), this._resize(), s && this.trigger("endReached") }, totalHeight: function () { if (!this.items[0]) return 0; var e = this, t = e.items, i = t[0].top, n = t[t.length - 1].bottom, o = (n - i) / e.itemCount, r = e.buffer.length - e.offset - e.itemCount; return (this.footer ? this.footer.height : 0) + n + r * o }, batchUpdate: function (e) { var t, i, n = this.height(), o = this.items, r = this.offset; if (o[0]) { if (this.lastDirection) for (; o[o.length - 1].bottom > e + 2 * n && 0 !== this.offset;)this.offset--, (t = o.pop()).update(this.content(this.offset)), t.above(o[0]), o.unshift(t); else for (; o[0].top < e - n;) { if ((i = this.offset + this.itemCount) === this.buffer.total()) { this.trigger("endReached"); break } if (i === this.buffer.length) break; (t = o.shift()).update(this.content(this.offset + this.itemCount)), t.below(o[o.length - 1]), o.push(t), this.offset++ } r !== this.offset && this._resize() } }, update: function (e) { var t, i, n, o, r = this, s = this.items, a = this.height(), l = this.itemCount, c = a / 2, d = (this.lastTop || 0) > e, u = e - c, h = e + a + c; s[0] && (this.lastTop = e, this.lastDirection = d, d ? s[0].top > u && s[s.length - 1].bottom > h + c && this.offset > 0 && (this.offset--, t = s.pop(), i = s[0], t.update(this.content(this.offset)), s.unshift(t), t.above(i), r._resize()) : s[s.length - 1].bottom < h && s[0].top < u - c && ((o = this.offset + l) === this.buffer.total() ? this.trigger("endReached") : o !== this.buffer.length && (t = s.shift(), n = s[s.length - 1], s.push(t), t.update(this.content(this.offset + this.itemCount)), r.offset++, t.below(n), r._resize()))) }, content: function (e) { return this.buffer.at(e) }, destroy: function () { this.unbind() }, _resize: function () { var e = this.items, t = 0, i = 0, n = e[0], o = e[e.length - 1]; n && (t = n.top, i = o.bottom), this.trigger("resize", { top: t, bottom: i }), this.footer && this.footer.below(o) } }); m.mobile.ui.VirtualList = W, a = m.Class.extend({ init: function (t, i) { var n = t.append([i], !0)[0], o = n.offsetHeight; e.extend(this, { top: 0, element: n, listView: t, height: o, bottom: o }) }, update: function (e) { this.element = this.listView.setDataItem(this.element, e) }, above: function (e) { e && (this.height = this.element.offsetHeight, this.top = e.top - this.height, this.bottom = e.top, s(this.element, this.top)) }, below: function (e) { e && (this.height = this.element.offsetHeight, this.top = e.bottom, this.bottom = this.top + this.height, s(this.element, this.top)) }, destroy: function () { m.destroy(this.element), e(this.element).remove() } }), l = '<div><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>', c = m.Class.extend({ init: function (t) { this.element = e('<li class="km-load-more km-scroller-refresh" style="display: none"></li>').appendTo(t.element), this._loadIcon = e(l).appendTo(this.element) }, enable: function () { this.element.show(), this.height = b(this.element, !0) }, disable: function () { this.element.hide(), this.height = 0 }, below: function (e) { e && (this.top = e.bottom, this.bottom = this.height + this.top, s(this.element, this.top)) } }), d = c.extend({ init: function (t, i) { this._loadIcon = e(l).hide(), this._loadButton = e('<a class="km-load">' + t.options.messages.loadMoreText + "</a>").hide(), this.element = e('<li class="km-load-more" style="display: none"></li>').append(this._loadIcon).append(this._loadButton).appendTo(t.element); var n = this; this._loadButton.kendoMobileButton().data("kendoMobileButton").bind("click", function () { n._hideShowButton(), i.next() }), i.bind("resize", function () { n._showLoadButton() }), this.height = b(this.element, !0), this.disable() }, _hideShowButton: function () { this._loadButton.hide(), this.element.addClass("km-scroller-refresh"), this._loadIcon.css("display", "block") }, _showLoadButton: function () { this._loadButton.show(), this.element.removeClass("km-scroller-refresh"), this._loadIcon.hide() } }), u = m.Class.extend({ init: function (e) { var t = this; this.chromeHeight = b(e.wrapper.children().not(e.element)), this.listView = e, this.scroller = e.scroller(), this.options = e.options, e.bind("_dataSource", function (e) { t.setDataSource(e.dataSource, e.empty) }), e.bind("resize", function () { t.list.items.length && (t.scroller.reset(), t.buffer.range(0), t.list.refresh()) }), this.scroller.makeVirtual(), this._scroll = function (e) { t.list.update(e.scrollTop) }, this.scroller.bind("scroll", this._scroll), this._scrollEnd = function (e) { t.list.batchUpdate(e.scrollTop) }, this.scroller.bind("scrollEnd", this._scrollEnd) }, destroy: function () { this.list.unbind(), this.buffer.unbind(), this.scroller.unbind("scroll", this._scroll), this.scroller.unbind("scrollEnd", this._scrollEnd) }, setDataSource: function (t, i) { var n, o, r, s, l = this, u = this.options, h = this.listView, f = h.scroller(), p = u.loadMore; if (this.dataSource = t, !(n = t.pageSize() || u.virtualViewSize) && !i) throw Error("the DataSource does not have page size configured. Page Size setting is mandatory for the mobile listview virtual scrolling to work as expected."); this.buffer && this.buffer.destroy(), o = new m.data.Buffer(t, Math.floor(n / 2), p), r = p ? new d(h, o) : new c(h), this.list && this.list.destroy(), (s = new W({ buffer: o, footer: r, item: function (e) { return new a(h, e) }, height: function () { return f.height() } })).bind("resize", function () { l.updateScrollerSize(), h.updateSize() }), s.bind("reset", function () { l.footer.enable() }), s.bind("endReached", function () { r.disable(), l.updateScrollerSize() }), o.bind("expand", function () { s.lastDirection = !1, s.batchUpdate(f.scrollTop) }), e.extend(this, { buffer: o, scroller: f, list: s, footer: r }) }, updateScrollerSize: function () { this.scroller.virtualSize(0, this.list.totalHeight() + this.chromeHeight) }, refresh: function () { this.list.refresh() }, reset: function () { this.buffer.range(0), this.list.refresh() } }), h = m.Class.extend({ init: function (e) { var t, i = this; this.listView = e, this.options = e.options, t = this, this._refreshHandler = function (e) { t.refresh(e) }, this._progressHandler = function () { e.showLoading() }, e.bind("_dataSource", function (e) { i.setDataSource(e.dataSource) }) }, destroy: function () { this._unbindDataSource() }, reset: function () { }, refresh: function (e) { var i, n, o, r, s, a = e && e.action, l = e && e.items, c = this.listView, d = this.dataSource, u = this.options.appendOnRefresh, h = d.view(), f = d.group(), p = f && f[0]; return "itemchange" === a ? (c._hasBindingTarget() || (i = c.findByDataItem(l)[0]) && c.setDataItem(i, l[0]), t) : ("add" === a && !p || u && !c._filter ? n = [] : "remove" === a && !p && (n = c.findByDataItem(l)), c.trigger(R, { action: a || "rebind", items: l, removedItems: n, index: e && e.index }) ? (this._shouldShowLoading() && c.hideLoading(), t) : ("add" !== a || p ? "remove" !== a || p ? p ? c.replaceGrouped(h) : u && !c._filter ? (o = c.prepend(h), r = h) : c.replace(h) : (o = [], c.remove(l)) : (s = h.indexOf(l[0])) > -1 && (o = c.insertAt(l, s), r = l), this._shouldShowLoading() && c.hideLoading(), c.trigger(M, { ns: _, addedItems: o, addedDataItems: r }), t)) }, setDataSource: function (e) { this.dataSource && this._unbindDataSource(), this.dataSource = e, e.bind(P, this._refreshHandler), this._shouldShowLoading() && this.dataSource.bind(B, this._progressHandler) }, _unbindDataSource: function () { this.dataSource.unbind(P, this._refreshHandler).unbind(B, this._progressHandler) }, _shouldShowLoading: function () { var e = this.options; return !e.pullToRefresh && !e.loadMore && !e.endlessScroll } }), f = m.Class.extend({ init: function (t) { var i = this, n = t.options.filterable, o = "change paste", r = this; this.listView = t, this.options = n, t.element.before(A({ placeholder: n.placeholder || "Search..." })), !1 !== n.autoFilter && (o += " keyup"), this.element = t.wrapper.find(".km-search-form"), this.searchInput = t.wrapper.find("input[type=search]").closest("form").on("submit" + E, function (e) { e.preventDefault() }).end().on("focus" + E, function () { i._oldFilter = i.searchInput.val() }).on(o.split(" ").join(E + " ") + E, C(this._filterChange, this)), this.clearButton = t.wrapper.find(".km-filter-reset").on(z, C(this, "_clearFilter")).hide(), this._dataSourceChange = e.proxy(this._refreshInput, this), t.bind("_dataSource", function (e) { e.dataSource.bind("change", r._dataSourceChange) }) }, _refreshInput: function () { var e = this.listView.dataSource.filter(), t = this.listView._filter.searchInput; t.val(e && e.filters[0].field === this.listView.options.filterable.field ? e.filters[0].value : "") }, _search: function (e) { this._filter = !0, this.clearButton[e ? "show" : "hide"](), this.listView.dataSource.filter(e) }, _filterChange: function (e) { var t = this; "paste" == e.type && !1 !== this.options.autoFilter ? setTimeout(function () { t._applyFilter() }, 1) : this._applyFilter() }, _applyFilter: function () { var e = this.options, t = this.searchInput.val(), i = t.length ? { field: e.field, operator: e.operator || "startswith", ignoreCase: e.ignoreCase, value: t } : null; t !== this._oldFilter && (this._oldFilter = t, this._search(i)) }, _clearFilter: function (e) { this.searchInput.val(""), this._search(null), e.preventDefault() } }), p = y.extend({ init: function (t, i) { var n = this; y.fn.init.call(this, t, i), t = this.element, (i = this.options).scrollTreshold && (i.scrollThreshold = i.scrollTreshold), t.on("down", k, "_highlight").on("move up cancel", k, "_dim"), this._userEvents = new m.UserEvents(t, { fastTap: !0, filter: ".km-list > li, > li:not(.km-group-container)", allowSelection: !0, tap: function (e) { n._click(e) } }), t.css("-ms-touch-action", "auto"), t.wrap('<div class="km-listview-wrapper" />'), this.wrapper = this.element.parent(), this._headerFixer = new O(this), this._itemsCache = {}, this._templates(), this.virtual = i.endlessScroll || i.loadMore, this._style(), this.options.$angular && (this.virtual || this.options.pullToRefresh) ? setTimeout(e.proxy(this, "_start")) : this._start() }, _start: function () { var e = this.options; this.options.filterable && (this._filter = new f(this)), this._itemBinder = this.virtual ? new u(this) : new h(this), this.options.pullToRefresh && (this._pullToRefreshHandler = new U(this)), this.setDataSource(e.dataSource), this._enhanceItems(this.items()), m.notify(this, _) }, events: [z, R, M, F], options: { name: "ListView", style: "", type: "flat", autoBind: !0, fixedHeaders: !1, template: "#:data#", headerTemplate: '<span class="km-text">#:value#</span>', appendOnRefresh: !1, loadMore: !1, endlessScroll: !1, scrollThreshold: 30, pullToRefresh: !1, messages: { loadMoreText: "Press to load more", pullTemplate: "Pull to refresh", releaseTemplate: "Release to refresh", refreshTemplate: "Refreshing" }, pullOffset: 140, filterable: !1, virtualViewSize: null }, refresh: function () { this._itemBinder.refresh() }, reset: function () { this._itemBinder.reset() }, setDataSource: function (e) { var t = !e; this.dataSource = w.create(e), this.trigger("_dataSource", { dataSource: this.dataSource, empty: t }), this.options.autoBind && !t && (this.items().remove(), this.dataSource.fetch()) }, destroy: function () { y.fn.destroy.call(this), m.destroy(this.element), this._userEvents.destroy(), this._itemBinder && this._itemBinder.destroy(), this._headerFixer && this._headerFixer.destroy(), this.element.unwrap(), delete this.element, delete this.wrapper, delete this._userEvents }, items: function () { return "group" === this.options.type ? this.element.find(".km-list").children() : this.element.children().not(".km-load-more") }, scroller: function () { return this._scrollerInstance || (this._scrollerInstance = this.element.closest(".km-scroll-wrapper").data("kendoMobileScroller")), this._scrollerInstance }, showLoading: function () { var e = this.view(); e && e.loader && e.loader.show() }, hideLoading: function () { var e = this.view(); e && e.loader && e.loader.hide() }, insertAt: function (e, t, i) { var n = this; return n._renderItems(e, function (o) { if (0 === t ? n.element.prepend(o) : -1 === t ? n.element.append(o) : n.items().eq(t - 1).after(o), i) for (var r = 0; r < o.length; r++)n.trigger(F, { item: o.eq(r), data: e[r], ns: _ }) }) }, append: function (e, t) { return this.insertAt(e, -1, t) }, prepend: function (e, t) { return this.insertAt(e, 0, t) }, replace: function (e) { return this.options.type = "flat", this._angularItems("cleanup"), m.destroy(this.element.children()), this.element.empty(), this._userEvents.cancel(), this._style(), this.insertAt(e, 0) }, replaceGrouped: function (t) { this.options.type = "group", this._angularItems("cleanup"), this.element.empty(); var i = e(m.render(this.groupTemplate, t)); this._enhanceItems(i.children("ul").children("li")), this.element.append(i), v.init(i), this._style(), this._angularItems("compile") }, remove: function (e) { var t = this.findByDataItem(e); this.angular("cleanup", function () { return { elements: t } }), m.destroy(t), t.remove() }, findByDataItem: function (e) { var t, i, n = []; for (t = 0, i = e.length; t < i; t++)n[t] = "[data-" + m.ns + "uid=" + e[t].uid + "]"; return this.element.find(n.join(",")) }, setDataItem: function (t, i) { var n = this; return this._renderItems([i], function (o) { var r = e(o[0]); m.destroy(t), n.angular("cleanup", function () { return { elements: [e(t)] } }), e(t).replaceWith(r), n.trigger(F, { item: r, data: i, ns: _ }) })[0] }, updateSize: function () { this._size = this.getSize() }, _renderItems: function (t, i) { var n = e(m.render(this.template, t)); return i(n), this.angular("compile", function () { return { elements: n, data: t.map(function (e) { return { dataItem: e } }) } }), v.init(n), this._enhanceItems(n), n }, _dim: function (e) { this._toggle(e, !1) }, _highlight: function (e) { this._toggle(e, !0) }, _toggle: function (t, i) { if (!(t.which > 1)) { var n = e(t.currentTarget), o = n.parent(), r = S(n, "role") || "", s = !r.match(N), a = t.isDefaultPrevented(); s && o.toggleClass("km-state-active", i && !a) } }, _templates: function () { var e = this.options.template, t = this.options.headerTemplate, i = {}, n = {}; typeof e === L && (i.template = e, e = "#=this.template(data)#"), this.template = C(m.template('<li data-uid="#=arguments[0].uid || ""#">' + e + "</li>"), i), n.template = this.template, typeof t === L && (n._headerTemplate = t, t = "#=this._headerTemplate(data)#"), n.headerTemplate = m.template(t), this.groupTemplate = C(D, n) }, _click: function (t) { if (!(t.event.which > 1 || t.event.isDefaultPrevented())) { var i, n = t.target, o = e(t.event.target), r = o.closest(m.roleSelector("button", "detailbutton", "backbutton")), s = m.widgetInstance(r, _), a = n.attr(m.attr("uid")); a && (i = this.dataSource.getByUid(a)), this.trigger(z, { target: o, item: n, dataItem: i, button: s }) && t.preventDefault() } }, _styleGroups: function () { var t = this.element.children(); t.children("ul").addClass("km-list"), t.each(function () { var t = e(this), i = t.contents().first(); t.addClass("km-group-container"), i.is("ul") || i.is("div." + T) || i.wrap('<div class="km-group-title"><div class="km-text"></div></div>') }) }, _style: function () { var e = this.options, t = "group" === e.type, i = this.element, n = "inset" === e.style; i.addClass("km-listview").toggleClass("km-list", !t).toggleClass("km-virtual-list", this.virtual).toggleClass("km-listinset", !t && n).toggleClass("km-listgroup", t && !n).toggleClass("km-listgroupinset", t && n), i.parents(".km-listview")[0] || i.closest(".km-content").toggleClass("km-insetcontent", n), t && this._styleGroups(), this.trigger(I) }, _enhanceItems: function (t) { t.each(function () { var t, i = e(this), n = !1; i.children().each(function () { (t = e(this)).is("a") ? (r(t), n = !0) : t.is("label") && (function (e) { if (e[0].querySelector("input[type=checkbox],input[type=radio]")) { var t = e.parent(); t.contents().not(e).not(function () { return 3 == this.nodeType })[0] || (e.addClass("km-listview-label"), e.children("[type=checkbox],[type=radio]").addClass("km-widget km-icon km-check")) } }(t), n = !0) }), n || o(i) }) } }), _.plugin(p) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.navbar.min", ["kendo.core.min"], function () { return function (e, t) { function i(t, i) { var n = i.find("[" + o.attr("align") + "=" + t + "]"); if (n[0]) return e('<div class="km-' + t + 'item" />').append(n).prependTo(i) } function n(t) { var i = t.siblings(), n = !!t.children("ul")[0], r = !!i[0] && "" === e.trim(t.text()), s = !(!o.mobile.application || !o.mobile.application.element.is(".km-android")); t.prevAll().toggleClass("km-absolute", n), t.toggleClass("km-show-title", r), t.toggleClass("km-fill-title", r && !e.trim(t.html())), t.toggleClass("km-no-title", n), t.toggleClass("km-hide-title", s && !i.children().is(":visible")) } var o = window.kendo, r = o.mobile, s = r.ui, a = s.Widget, l = a.extend({ init: function (t, n) { var o = this; a.fn.init.call(o, t, n), t = o.element, o.container().bind("show", e.proxy(this, "refresh")), t.addClass("km-navbar").wrapInner(e('<div class="km-view-title km-show-title" />')), o.leftElement = i("left", t), o.rightElement = i("right", t), o.centerElement = t.find(".km-view-title") }, options: { name: "NavBar" }, title: function (e) { this.element.find(o.roleSelector("view-title")).text(e), n(this.centerElement) }, refresh: function (e) { var t = e.view; this.title(t.options.title) }, destroy: function () { a.fn.destroy.call(this), o.destroy(this.element) } }); s.plugin(l) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.scrollview.min", ["kendo.fx.min", "kendo.data.min", "kendo.draganddrop.min"], function () { return function (e, t) { function i(e) { return "k-" + e + " km-" + e } var n, o, r, s, a, l, c, d, u = window.kendo, h = u.mobile, f = h.ui, p = e.proxy, m = u.effects.Transition, g = u.ui.Pane, v = u.ui.PaneDimensions, _ = f.DataBoundWidget, b = u.data.DataSource, w = u.data.Buffer, y = u.data.BatchBuffer, k = Math, x = k.abs, C = k.ceil, S = k.round, T = k.max, D = k.min, A = k.floor, E = "change", I = "changing", M = "refresh", R = "current-page", F = "virtual-page", z = "function", P = "itemChange", B = "cleanup", L = u.Class.extend({ init: function (t) { var n = this, o = e("<ol class='" + i("pages") + "'/>"); t.element.append(o), this._changeProxy = p(n, "_change"), this._refreshProxy = p(n, "_refresh"), t.bind(E, this._changeProxy), t.bind(M, this._refreshProxy), e.extend(n, { element: o, scrollView: t }) }, items: function () { return this.element.children() }, _refresh: function (e) { var t, n = ""; for (t = 0; t < e.pageCount; t++)n += "<li/>"; this.element.html(n), this.items().eq(e.page).addClass(i(R)) }, _change: function (e) { this.items().removeClass(i(R)).eq(e.page).addClass(i(R)) }, destroy: function () { this.scrollView.unbind(E, this._changeProxy), this.scrollView.unbind(M, this._refreshProxy), this.element.remove() } }); u.mobile.ui.ScrollViewPager = L, n = "transitionEnd", o = "dragStart", r = "dragEnd", s = u.Observable.extend({ init: function (t, i) { var s, a, l, c, d, h, f = this; u.Observable.fn.init.call(this), this.element = t, this.container = t.parent(), s = new u.ui.Movable(f.element), a = new m({ axis: "x", movable: s, onEnd: function () { f.trigger(n) } }), l = new u.UserEvents(t, { fastTap: !0, start: function (e) { 2 * x(e.x.velocity) >= x(e.y.velocity) ? l.capture() : l.cancel(), f.trigger(o, e), a.cancel() }, allowSelection: !0, end: function (e) { f.trigger(r, e) } }), c = new v({ element: f.element, container: f.container }), (d = c.x).bind(E, function () { f.trigger(E) }), h = new g({ dimensions: c, userEvents: l, movable: s, elastic: !0 }), e.extend(f, { duration: i && i.duration || 1, movable: s, transition: a, userEvents: l, dimensions: c, dimension: d, pane: h }), this.bind([n, o, r, E], i) }, size: function () { return { width: this.dimensions.x.getSize(), height: this.dimensions.y.getSize() } }, total: function () { return this.dimension.getTotal() }, offset: function () { return -this.movable.x }, updateDimension: function () { this.dimension.update(!0) }, refresh: function () { this.dimensions.refresh() }, moveTo: function (e) { this.movable.moveAxis("x", -e) }, transitionTo: function (e, t, i) { i ? this.moveTo(-e) : this.transition.moveTo({ location: e, duration: this.duration, ease: t }) } }), u.mobile.ui.ScrollViewElasticPane = s, a = u.Observable.extend({ init: function (e, t, i) { var n = this; u.Observable.fn.init.call(this), n.element = e, n.pane = t, n._getPages(), this.page = 0, this.pageSize = i.pageSize || 1, this.contentHeight = i.contentHeight, this.enablePager = i.enablePager, this.pagerOverlay = i.pagerOverlay }, scrollTo: function (e, t) { this.page = e, this.pane.transitionTo(-e * this.pane.size().width, m.easeOutExpo, t) }, paneMoved: function (e, t, i, n) { var o, r, s = this, a = s.pane, l = a.size().width * s.pageSize, c = S, d = t ? m.easeOutBack : m.easeOutExpo; -1 === e ? c = C : 1 === e && (c = A), r = c(a.offset() / l), o = T(s.minSnap, D(-r * l, s.maxSnap)), r != s.page && i && i({ currentPage: s.page, nextPage: r }) && (o = -s.page * a.size().width), a.transitionTo(o, d, n) }, updatePage: function () { var e = this.pane, t = S(e.offset() / e.size().width); return t != this.page && (this.page = t, !0) }, forcePageUpdate: function () { return this.updatePage() }, resizeTo: function (e) { var t, i, n = this.pane, o = e.width; this.pageElements.width(o), "100%" === this.contentHeight && (t = this.element.parent().height(), !0 === this.enablePager && (i = this.element.parent().find("ol.km-pages"), !this.pagerOverlay && i.length && (t -= u._outerHeight(i, !0))), this.element.css("height", t), this.pageElements.css("height", t)), n.updateDimension(), this._paged || (this.page = A(n.offset() / o)), this.scrollTo(this.page, !0), this.pageCount = C(n.total() / o), this.minSnap = -(this.pageCount - 1) * o, this.maxSnap = 0 }, _getPages: function () { this.pageElements = this.element.find(u.roleSelector("page")), this._paged = this.pageElements.length > 0 } }), u.mobile.ui.ScrollViewContent = a, l = u.Observable.extend({ init: function (e, t, i) { var n = this; u.Observable.fn.init.call(this), n.element = e, n.pane = t, n.options = i, n._templates(), n.page = i.page || 0, n.pages = [], n._initPages(), n.resizeTo(n.pane.size()), n.pane.dimension.forceEnabled() }, setDataSource: function (e) { this.dataSource = b.create(e), this._buffer(), this._pendingPageRefresh = !1, this._pendingWidgetRefresh = !1 }, _viewShow: function () { var e = this; e._pendingWidgetRefresh && (setTimeout(function () { e._resetPages() }, 0), e._pendingWidgetRefresh = !1) }, _buffer: function () { var e = this.options.itemsPerPage; this.buffer && this.buffer.destroy(), this.buffer = e > 1 ? new y(this.dataSource, e) : new w(this.dataSource, 3 * e), this._resizeProxy = p(this, "_onResize"), this._resetProxy = p(this, "_onReset"), this._endReachedProxy = p(this, "_onEndReached"), this.buffer.bind({ resize: this._resizeProxy, reset: this._resetProxy, endreached: this._endReachedProxy }) }, _templates: function () { var e = this.options.template, t = this.options.emptyTemplate, i = {}, n = {}; typeof e === z && (i.template = e, e = "#=this.template(data)#"), this.template = p(u.template(e), i), typeof t === z && (n.emptyTemplate = t, t = "#=this.emptyTemplate(data)#"), this.emptyTemplate = p(u.template(t), n) }, _initPages: function () { var e, t, i = this.pages, n = this.element; for (t = 0; t < 3; t++)e = new c(n), i.push(e); this.pane.updateDimension() }, resizeTo: function (e) { var t, i, n, o = this.pages, r = this.pane; for (t = 0; t < o.length; t++)o[t].setWidth(e.width); "auto" === this.options.contentHeight ? this.element.css("height", this.pages[1].element.height()) : "100%" === this.options.contentHeight && (i = this.element.parent().height(), !0 === this.options.enablePager && (n = this.element.parent().find("ol.km-pages"), !this.options.pagerOverlay && n.length && (i -= u._outerHeight(n, !0))), this.element.css("height", i), o[0].element.css("height", i), o[1].element.css("height", i), o[2].element.css("height", i)), r.updateDimension(), this._repositionPages(), this.width = e.width }, scrollTo: function (e) { var t = this.buffer; t.syncDataSource(), t.at(e) && (this._updatePagesContent(e), this.page = e) }, paneMoved: function (e, t, i, n) { var o, r = this, s = r.pane, a = s.size().width, l = s.offset(), c = Math.abs(l) >= a / 3, d = t ? u.effects.Transition.easeOutBack : u.effects.Transition.easeOutExpo, h = r.page + 2 > r.buffer.total(), f = 0; 1 === e ? 0 !== r.page && (f = -1) : -1 !== e || h ? l > 0 && c && !h ? f = 1 : l < 0 && c && 0 !== r.page && (f = -1) : f = 1, o = r.page, f && (o = f > 0 ? o + 1 : o - 1), i && i({ currentPage: r.page, nextPage: o }) && (f = 0), 0 === f ? r._cancelMove(d, n) : -1 === f ? r._moveBackward(n) : 1 === f && r._moveForward(n) }, updatePage: function () { var e = this.pages; return 0 !== this.pane.offset() && (this.pane.offset() > 0 ? (e.push(this.pages.shift()), this.page++, this.setPageContent(e[2], this.page + 1)) : (e.unshift(this.pages.pop()), this.page--, this.setPageContent(e[0], this.page - 1)), this._repositionPages(), this._resetMovable(), !0) }, forcePageUpdate: function () { var e = this.pane.offset(), t = 3 * this.pane.size().width / 4; return x(e) > t && this.updatePage() }, _resetMovable: function () { this.pane.moveTo(0) }, _moveForward: function (e) { this.pane.transitionTo(-this.width, u.effects.Transition.easeOutExpo, e) }, _moveBackward: function (e) { this.pane.transitionTo(this.width, u.effects.Transition.easeOutExpo, e) }, _cancelMove: function (e, t) { this.pane.transitionTo(0, e, t) }, _resetPages: function () { this.page = this.options.page || 0, this._updatePagesContent(this.page), this._repositionPages(), this.trigger("reset") }, _onResize: function () { this.pageCount = C(this.dataSource.total() / this.options.itemsPerPage), this._pendingPageRefresh && (this._updatePagesContent(this.page), this._pendingPageRefresh = !1), this.trigger("resize") }, _onReset: function () { this.pageCount = C(this.dataSource.total() / this.options.itemsPerPage), this._resetPages() }, _onEndReached: function () { this._pendingPageRefresh = !0 }, _repositionPages: function () { var e = this.pages; e[0].position(-1), e[1].position(0), e[2].position(1) }, _updatePagesContent: function (e) { var t = this.pages, i = e || 0; this.setPageContent(t[0], i - 1), this.setPageContent(t[1], i), this.setPageContent(t[2], i + 1) }, setPageContent: function (t, i) { var n = this.buffer, o = this.template, r = this.emptyTemplate, s = null; i >= 0 && (s = n.at(i), e.isArray(s) && !s.length && (s = null)), this.trigger(B, { item: t.element }), t.content(null !== s ? o(s) : r({})), u.mobile.init(t.element), this.trigger(P, { item: t.element, data: s, ns: u.mobile.ui }) } }), u.mobile.ui.VirtualScrollViewContent = l, c = u.Class.extend({ init: function (t) { this.element = e("<div class='" + i(F) + "'></div>"), this.width = t.width(), this.element.width(this.width), t.append(this.element) }, content: function (e) { this.element.html(e) }, position: function (e) { this.element.css("transform", "translate3d(" + this.width * e + "px, 0, 0)") }, setWidth: function (e) { this.width = e, this.element.width(e) } }), u.mobile.ui.VirtualPage = c, d = _.extend({ init: function (e, t) { var n, o, r, c = this; _.fn.init.call(c, e, t), t = c.options, e = c.element, u.stripWhitespace(e[0]), e.wrapInner("<div/>").addClass("k-widget " + i("scrollview")), this.options.enablePager && (this.pager = new L(this), this.options.pagerOverlay && e.addClass(i("scrollview-overlay"))), c.inner = e.children().first(), c.page = 0, c.inner.css("height", t.contentHeight), c.pane = new s(c.inner, { duration: this.options.duration, transitionEnd: p(this, "_transitionEnd"), dragStart: p(this, "_dragStart"), dragEnd: p(this, "_dragEnd"), change: p(this, M) }), c.bind("resize", function () { c.pane.refresh() }), c.page = t.page, n = 0 === this.inner.children().length, (o = n ? new l(c.inner, c.pane, t) : new a(c.inner, c.pane, t)).page = c.page, o.bind("reset", function () { this._pendingPageRefresh = !1, c._syncWithContent(), c.trigger(M, { pageCount: o.pageCount, page: o.page }) }), o.bind("resize", function () { c.trigger(M, { pageCount: o.pageCount, page: o.page }) }), o.bind(P, function (e) { c.trigger(P, e), c.angular("compile", function () { return { elements: e.item, data: [{ dataItem: e.data }] } }) }), o.bind(B, function (e) { c.angular("cleanup", function () { return { elements: e.item } }) }), c._content = o, c.setDataSource(t.dataSource), (r = c.container()).nullObject ? (c.viewInit(), c.viewShow()) : r.bind("show", p(this, "viewShow")).bind("init", p(this, "viewInit")) }, options: { name: "ScrollView", page: 0, duration: 400, velocityThreshold: .8, contentHeight: "auto", pageSize: 1, itemsPerPage: 1, bounceVelocityThreshold: 1.6, enablePager: !0, pagerOverlay: !1, autoBind: !0, template: "", emptyTemplate: "" }, events: [I, E, M], destroy: function () { _.fn.destroy.call(this), u.destroy(this.element) }, viewInit: function () { this.options.autoBind && this._content.scrollTo(this._content.page, !0) }, viewShow: function () { this.pane.refresh() }, refresh: function () { var e = this._content; e.resizeTo(this.pane.size()), this.page = e.page, this.trigger(M, { pageCount: e.pageCount, page: e.page }) }, content: function (e) { this.element.children().first().html(e), this._content._getPages(), this.pane.refresh() }, value: function (e) { var i = this.dataSource; return e ? (this.scrollTo(i.indexOf(e), !0), t) : i.at(this.page) }, scrollTo: function (e, t) { this._content.scrollTo(e, t), this._syncWithContent() }, prev: function () { var e = this, i = e.page - 1; e._content instanceof l ? e._content.paneMoved(1, t, function (t) { return e.trigger(I, t) }) : i > -1 && e.scrollTo(i) }, next: function () { var e = this, i = e.page + 1; e._content instanceof l ? e._content.paneMoved(-1, t, function (t) { return e.trigger(I, t) }) : i < e._content.pageCount && e.scrollTo(i) }, setDataSource: function (e) { if (this._content instanceof l) { var t = !e; this.dataSource = b.create(e), this._content.setDataSource(this.dataSource), this.options.autoBind && !t && this.dataSource.fetch() } }, items: function () { return this.element.find(".km-" + F) }, _syncWithContent: function () { var e, i, n = this._content.pages, o = this._content.buffer; this.page = this._content.page, (e = o ? o.at(this.page) : t) instanceof Array || (e = [e]), i = n ? n[1].element : t, this.trigger(E, { page: this.page, element: i, data: e }) }, _dragStart: function () { this._content.forcePageUpdate() && this._syncWithContent() }, _dragEnd: function (e) { var t = this, i = e.x.velocity, n = this.options.velocityThreshold, o = 0, r = x(i) > this.options.bounceVelocityThreshold; i > n ? o = 1 : i < -n && (o = -1), this._content.paneMoved(o, r, function (e) { return t.trigger(I, e) }) }, _transitionEnd: function () { this._content.updatePage() && this._syncWithContent() } }), f.plugin(d) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.switch.min", ["kendo.fx.min", "kendo.userevents.min"], function () { return function (e, t) { function i(e) { return "k-" + e + " km-" + e } var n = window.kendo, o = n.mobile.ui, r = n._outerWidth, s = o.Widget, a = n.support, l = "change", c = "switch-on", d = "switch-off", u = "margin-left", h = "state-active", f = "disabled", p = a.transitions.css + "transform", m = e.proxy, g = '<span class="' + i("switch") + " " + i("widget") + '">        <span class="' + i("switch-wrapper") + '">            <span class="' + i("switch-background") + '"></span>        </span>         <span class="' + i("switch-container") + '">            <span class="' + i("switch-handle") + '">                 <span class="' + i("switch-label-on") + '">{0}</span>                 <span class="' + i("switch-label-off") + '">{1}</span>             </span>         </span>    </span>', v = s.extend({ init: function (t, i) { var o, r = this; s.fn.init.call(r, t, i), i = r.options, r.wrapper = e(n.format(g, i.onLabel, i.offLabel)), r.handle = r.wrapper.find(".km-switch-handle"), r.background = r.wrapper.find(".km-switch-background"), r.wrapper.insertBefore(r.element).prepend(r.element), r._drag(), r.origin = parseInt(r.background.css(u), 10), r.constrain = 0, r.snapPoint = 0, (t = r.element[0]).type = "checkbox", r._animateBackground = !0, null === (o = r.options.checked) && (o = t.checked), r.check(o), r.options.enable = r.options.enable && !r.element.attr(f), r.enable(r.options.enable), r.refresh(), n.notify(r, n.mobile.ui) }, refresh: function () { var e = this, t = r(e.handle, !0); e.width = e.wrapper.width(), e.constrain = e.width - t, e.snapPoint = e.constrain / 2, "number" != typeof e.origin && (e.origin = parseInt(e.background.css(u), 10)), e.background.data("origin", e.origin), e.check(e.element[0].checked) }, events: [l], options: { name: "Switch", onLabel: "on", offLabel: "off", checked: null, enable: !0 }, check: function (e) { var n = this, o = n.element[0]; return e === t ? o.checked : (n._position(e ? n.constrain : 0), o.checked = e, n.wrapper.toggleClass(i(c), e).toggleClass(i(d), !e), t) }, value: function () { return this.check.apply(this, arguments) }, destroy: function () { s.fn.destroy.call(this), this.userEvents.destroy() }, toggle: function () { this.check(!this.element[0].checked) }, enable: function (e) { var n = this.element, o = this.wrapper; t === e && (e = !0), this.options.enable = e, e ? n.removeAttr(f) : n.attr(f, f), o.toggleClass(i("state-disabled"), !e) }, _resize: function () { this.refresh() }, _move: function (e) { var t = this; e.preventDefault(), t._position(function (e, t, i) { return Math.max(t, Math.min(i, e)) }(t.position + e.x.delta, 0, t.width - r(t.handle, !0))) }, _position: function (e) { var t = this; t.position = e, t.handle.css(p, "translatex(" + e + "px)"), t._animateBackground && t.background.css(u, t.origin + e) }, _start: function () { this.options.enable ? (this.userEvents.capture(), this.handle.addClass(i(h))) : this.userEvents.cancel() }, _stop: function () { var e = this; e.handle.removeClass(i(h)), e._toggle(e.position > e.snapPoint) }, _toggle: function (e) { var t, o = this, r = o.handle, s = o.element[0], a = s.checked, u = n.mobile.application && n.mobile.application.os.wp ? 100 : 200; o.wrapper.toggleClass(i(c), e).toggleClass(i(d), !e), o.position = t = e * o.constrain, o._animateBackground && o.background.kendoStop(!0, !0).kendoAnimate({ effects: "slideMargin", offset: t, reset: !0, reverse: !e, axis: "left", duration: u }), r.kendoStop(!0, !0).kendoAnimate({ effects: "slideTo", duration: u, offset: t + "px,0", reset: !0, complete: function () { a !== e && (s.checked = e, o.trigger(l, { checked: e })) } }) }, _drag: function () { var e = this; e.userEvents = new n.UserEvents(e.wrapper, { fastTap: !0, tap: function () { e.options.enable && e._toggle(!e.element[0].checked) }, start: m(e._start, e), move: m(e._move, e), end: m(e._stop, e) }) } }); o.plugin(v) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.tabstrip.min", ["kendo.core.min"], function () { return function (e, t) { function i(t) { return e('<span class="km-badge">' + t + "</span>") } var n = window.kendo, o = n.mobile.ui, r = o.Widget, s = "km-state-active", a = "select", l = r.extend({ init: function (t, i) { var n = this; r.fn.init.call(n, t, i), n.container().bind("show", e.proxy(this, "refresh")), n.element.addClass("km-tabstrip").find("a").each(n._buildButton).eq(n.options.selectedIndex).addClass(s), n.element.on("down", "a", "_release") }, events: [a], switchTo: function (t) { var i, n, o = this.element.find("a"), r = 0, s = o.length; if (!isNaN(t)) return this._setActiveItem(o.eq(t)), !0; for (; r < s; r++)if (i = o[r], -1 !== (n = i.href.replace(/(\#.+)(\?.+)$/, "$1")).indexOf(t, n.length - t.length)) return this._setActiveItem(e(i)), !0; return !1 }, switchByFullUrl: function (e) { var t; t = this.element.find("a[href$='" + e + "']"), this._setActiveItem(t) }, clear: function () { this.currentItem().removeClass(s) }, currentItem: function () { return this.element.children("." + s) }, badge: function (t, n) { var o, r = this.element; return isNaN(t) || (t = r.children().get(t)), t = r.find(t), o = e(t.find(".km-badge")[0] || i(n).insertAfter(t.children(".km-icon"))), n || 0 === n ? (o.html(n), this) : !1 === n ? (o.empty().remove(), this) : o.html() }, _release: function (t) { if (!(t.which > 1)) { var i = this, n = e(t.currentTarget); n[0] !== i.currentItem()[0] && (i.trigger(a, { item: n }) ? t.preventDefault() : i._setActiveItem(n)) } }, _setActiveItem: function (e) { e[0] && (this.clear(), e.addClass(s)) }, _buildButton: function () { var t = e(this), o = n.attrValue(t, "icon"), r = n.attrValue(t, "badge"), s = t.find("img"), a = e('<span class="km-icon"/>'); t.addClass("km-button").attr(n.attr("role"), "tab").contents().not(s).wrapAll('<span class="km-text"/>'), s[0] ? s.addClass("km-image").prependTo(t) : (t.prepend(a), o && (a.addClass("km-" + o), (r || 0 === r) && i(r).insertAfter(a))) }, refresh: function (e) { var t = e.view.id; t && !this.switchTo(e.view.id) && this.switchTo(t) }, options: { name: "TabStrip", selectedIndex: 0, enable: !0 } }); o.plugin(l) }(window.kendo.jQuery), window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.mobile.min", ["kendo.core.min", "kendo.fx.min", "kendo.data.odata.min", "kendo.data.xml.min", "kendo.data.min", "kendo.data.signalr.min", "kendo.binder.min", "kendo.validator.min", "kendo.router.min", "kendo.view.min", "kendo.userevents.min", "kendo.draganddrop.min", "kendo.popup.min", "kendo.touch.min", "kendo.mobile.popover.min", "kendo.mobile.loader.min", "kendo.mobile.scroller.min", "kendo.mobile.shim.min", "kendo.mobile.view.min", "kendo.mobile.modalview.min", "kendo.mobile.drawer.min", "kendo.mobile.splitview.min", "kendo.mobile.pane.min", "kendo.mobile.application.min", "kendo.mobile.actionsheet.min", "kendo.mobile.button.min", "kendo.mobile.buttongroup.min", "kendo.mobile.collapsible.min", "kendo.mobile.listview.min", "kendo.mobile.navbar.min", "kendo.mobile.scrollview.min", "kendo.mobile.switch.min", "kendo.mobile.tabstrip.min", "kendo.angular.min"], function () { "bundle all"; return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() }), function (e, t) { t("kendo.all.min", ["kendo.web.min", "kendo.dataviz.min", "kendo.mobile.min", "kendo.drawing.min", "kendo.dom.min"], function () { "bundle all"; return window.kendo }) }(0, "function" == typeof define && define.amd ? define : function (e, t, i) { (i || t)() });